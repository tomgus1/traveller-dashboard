const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-CMt2WY0y.js","assets/icons-9UWp7c2_.js","assets/excel-Du8kUxR_.js","assets/vendor-Dfoqj1Wf.js"])))=>i.map(i=>d[i]);
import{r as S,U as On,X as zg,P as Sl,a as an,T as Vs,A as Lg,b as Cl,C as av,S as Bg,L as nv,c as rv,d as Km,M as sv,E as Wc,e as eu,f as qg,g as iv,R as lv,h as ov,D as cv,i as uv,j as Hg}from"./icons-9UWp7c2_.js";import{g as $g,a as dv}from"./excel-Du8kUxR_.js";import{r as hv,a as fv}from"./vendor-Dfoqj1Wf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var tu={exports:{}},Ms={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm;function mv(){if(Qm)return Ms;Qm=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:l,type:i,key:h,ref:o!==void 0?o:null,props:c}}return Ms.Fragment=n,Ms.jsx=r,Ms.jsxs=r,Ms}var Xm;function gv(){return Xm||(Xm=1,tu.exports=mv()),tu.exports}var f=gv(),au={exports:{}},zs={},nu={exports:{}},ru={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function pv(){return Im||(Im=1,(function(l){function n(B,G){var X=B.length;B.push(G);e:for(;0<X;){var pe=X-1>>>1,be=B[pe];if(0<o(be,G))B[pe]=G,B[X]=be,X=pe;else break e}}function r(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],X=B.pop();if(X!==G){B[0]=X;e:for(var pe=0,be=B.length,De=be>>>1;pe<De;){var Ne=2*(pe+1)-1,me=B[Ne],qe=Ne+1,ut=B[qe];if(0>o(me,X))qe<be&&0>o(ut,me)?(B[pe]=ut,B[qe]=X,pe=qe):(B[pe]=me,B[Ne]=X,pe=Ne);else if(qe<be&&0>o(ut,X))B[pe]=ut,B[qe]=X,pe=qe;else break e}}return G}function o(B,G){var X=B.sortIndex-G.sortIndex;return X!==0?X:B.id-G.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;l.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();l.unstable_now=function(){return h.now()-m}}var g=[],y=[],v=1,b=null,x=3,_=!1,C=!1,E=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function V(B){for(var G=r(y);G!==null;){if(G.callback===null)i(y);else if(G.startTime<=B)i(y),G.sortIndex=G.expirationTime,n(g,G);else break;G=r(y)}}function P(B){if(E=!1,V(B),!C)if(r(g)!==null)C=!0,$||($=!0,_e());else{var G=r(y);G!==null&&Fe(P,G.startTime-B)}}var $=!1,Z=-1,se=5,Y=-1;function ge(){return T?!0:!(l.unstable_now()-Y<se)}function Be(){if(T=!1,$){var B=l.unstable_now();Y=B;var G=!0;try{e:{C=!1,E&&(E=!1,O(Z),Z=-1),_=!0;var X=x;try{t:{for(V(B),b=r(g);b!==null&&!(b.expirationTime>B&&ge());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,x=b.priorityLevel;var be=pe(b.expirationTime<=B);if(B=l.unstable_now(),typeof be=="function"){b.callback=be,V(B),G=!0;break t}b===r(g)&&i(g),V(B)}else i(g);b=r(g)}if(b!==null)G=!0;else{var De=r(y);De!==null&&Fe(P,De.startTime-B),G=!1}}break e}finally{b=null,x=X,_=!1}G=void 0}}finally{G?_e():$=!1}}}var _e;if(typeof z=="function")_e=function(){z(Be)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Re=ae.port2;ae.port1.onmessage=Be,_e=function(){Re.postMessage(null)}}else _e=function(){R(Be,0)};function Fe(B,G){Z=R(function(){B(l.unstable_now())},G)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(B){B.callback=null},l.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<B?Math.floor(1e3/B):5},l.unstable_getCurrentPriorityLevel=function(){return x},l.unstable_next=function(B){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var X=x;x=G;try{return B()}finally{x=X}},l.unstable_requestPaint=function(){T=!0},l.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=x;x=B;try{return G()}finally{x=X}},l.unstable_scheduleCallback=function(B,G,X){var pe=l.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?pe+X:pe):X=pe,B){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=X+be,B={id:v++,callback:G,priorityLevel:B,startTime:X,expirationTime:be,sortIndex:-1},X>pe?(B.sortIndex=X,n(y,B),r(g)===null&&B===r(y)&&(E?(O(Z),Z=-1):E=!0,Fe(P,X-pe))):(B.sortIndex=be,n(g,B),C||_||(C=!0,$||($=!0,_e()))),B},l.unstable_shouldYield=ge,l.unstable_wrapCallback=function(B){var G=x;return function(){var X=x;x=G;try{return B.apply(this,arguments)}finally{x=X}}}})(ru)),ru}var Jm;function yv(){return Jm||(Jm=1,nu.exports=pv()),nu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function vv(){if(Zm)return zs;Zm=1;var l=yv(),n=hv(),r=fv();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(i(188))}function y(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var u=a.return;if(u===null)break;var d=u.alternate;if(d===null){if(s=u.return,s!==null){a=s;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===a)return g(u),e;if(d===s)return g(u),t;d=d.sibling}throw Error(i(188))}if(a.return!==s.return)a=u,s=d;else{for(var p=!1,w=u.child;w;){if(w===a){p=!0,a=u,s=d;break}if(w===s){p=!0,s=u,a=d;break}w=w.sibling}if(!p){for(w=d.child;w;){if(w===a){p=!0,a=d,s=u;break}if(w===s){p=!0,s=d,a=u;break}w=w.sibling}if(!p)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),z=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),Be=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=Be&&e[Be]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Symbol.for("react.client.reference");function Re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case P:return"Suspense";case $:return"SuspenseList";case Y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case z:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:Re(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return Re(e(t))}catch{}}return null}var Fe=Array.isArray,B=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},pe=[],be=-1;function De(e){return{current:e}}function Ne(e){0>be||(e.current=pe[be],pe[be]=null,be--)}function me(e,t){be++,pe[be]=e.current,e.current=t}var qe=De(null),ut=De(null),Rt=De(null),Ye=De(null);function $t(e,t){switch(me(Rt,t),me(ut,e),me(qe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gm(t),e=pm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ne(qe),me(qe,e)}function Gt(){Ne(qe),Ne(ut),Ne(Rt)}function Ca(e){e.memoizedState!==null&&me(Ye,e);var t=qe.current,a=pm(t,e.type);t!==a&&(me(ut,e),me(qe,a))}function W(e){ut.current===e&&(Ne(qe),Ne(ut)),Ye.current===e&&(Ne(Ye),Os._currentValue=X)}var we,oe;function Le(e){if(we===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);we=t&&t[1]||"",oe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+e+oe}var Gr=!1;function Dn(e,t){if(!e||Gr)return"";Gr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(M){var D=M}Reflect.construct(e,[],H)}else{try{H.call()}catch(M){D=M}e.call(H.prototype)}}else{try{throw Error()}catch(M){D=M}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(M){if(M&&D&&typeof M.stack=="string")return[M.stack,D.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),p=d[0],w=d[1];if(p&&w){var j=p.split(`
`),U=w.split(`
`);for(u=s=0;s<j.length&&!j[s].includes("DetermineComponentFrameRoot");)s++;for(;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;if(s===j.length||u===U.length)for(s=j.length-1,u=U.length-1;1<=s&&0<=u&&j[s]!==U[u];)u--;for(;1<=s&&0<=u;s--,u--)if(j[s]!==U[u]){if(s!==1||u!==1)do if(s--,u--,0>u||j[s]!==U[u]){var L=`
`+j[s].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=s&&0<=u);break}}}finally{Gr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Le(a):""}function Up(e,t){switch(e.tag){case 26:case 27:case 5:return Le(e.type);case 16:return Le("Lazy");case 13:return e.child!==t&&t!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return Dn(e.type,!1);case 11:return Dn(e.type.render,!1);case 1:return Dn(e.type,!0);case 31:return Le("Activity");default:return""}}function Yu(e){try{var t="",a=null;do t+=Up(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ll=Object.prototype.hasOwnProperty,Bl=l.unstable_scheduleCallback,ql=l.unstable_cancelCallback,Dp=l.unstable_shouldYield,Mp=l.unstable_requestPaint,bt=l.unstable_now,zp=l.unstable_getCurrentPriorityLevel,Ku=l.unstable_ImmediatePriority,Qu=l.unstable_UserBlockingPriority,Js=l.unstable_NormalPriority,Lp=l.unstable_LowPriority,Xu=l.unstable_IdlePriority,Bp=l.log,qp=l.unstable_setDisableYieldValue,Vr=null,xt=null;function ja(e){if(typeof Bp=="function"&&qp(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Vr,e)}catch{}}var wt=Math.clz32?Math.clz32:Gp,Hp=Math.log,$p=Math.LN2;function Gp(e){return e>>>=0,e===0?32:31-(Hp(e)/$p|0)|0}var Zs=256,Fs=262144,Ws=4194304;function ln(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ei(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var u=0,d=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var w=s&134217727;return w!==0?(s=w&~d,s!==0?u=ln(s):(p&=w,p!==0?u=ln(p):a||(a=w&~e,a!==0&&(u=ln(a))))):(w=s&~d,w!==0?u=ln(w):p!==0?u=ln(p):a||(a=s&~e,a!==0&&(u=ln(a)))),u===0?0:t!==0&&t!==u&&(t&d)===0&&(d=u&-u,a=t&-t,d>=a||d===32&&(a&4194048)!==0)?t:u}function Pr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Vp(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iu(){var e=Ws;return Ws<<=1,(Ws&62914560)===0&&(Ws=4194304),e}function Hl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Yr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pp(e,t,a,s,u,d){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,j=e.expirationTimes,U=e.hiddenUpdates;for(a=p&~a;0<a;){var L=31-wt(a),H=1<<L;w[L]=0,j[L]=-1;var D=U[L];if(D!==null)for(U[L]=null,L=0;L<D.length;L++){var M=D[L];M!==null&&(M.lane&=-536870913)}a&=~H}s!==0&&Ju(e,s,0),d!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=d&~(p&~t))}function Ju(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-wt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function Zu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-wt(a),u=1<<s;u&t|e[s]&t&&(e[s]|=t),a&=~u}}function Fu(e,t){var a=t&-t;return a=(a&42)!==0?1:$l(a),(a&(e.suspendedLanes|t))!==0?0:a}function $l(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wu(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:qm(e.type))}function ed(e,t){var a=G.p;try{return G.p=e,t()}finally{G.p=a}}var Aa=Math.random().toString(36).slice(2),rt="__reactFiber$"+Aa,dt="__reactProps$"+Aa,Mn="__reactContainer$"+Aa,Vl="__reactEvents$"+Aa,Yp="__reactListeners$"+Aa,Kp="__reactHandles$"+Aa,td="__reactResources$"+Aa,Kr="__reactMarker$"+Aa;function Pl(e){delete e[rt],delete e[dt],delete e[Vl],delete e[Yp],delete e[Kp]}function zn(e){var t=e[rt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Mn]||a[rt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Sm(e);e!==null;){if(a=e[rt])return a;e=Sm(e)}return t}e=a,a=e.parentNode}return null}function Ln(e){if(e=e[rt]||e[Mn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Qr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Bn(e){var t=e[td];return t||(t=e[td]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tt(e){e[Kr]=!0}var ad=new Set,nd={};function on(e,t){qn(e,t),qn(e+"Capture",t)}function qn(e,t){for(nd[e]=t,e=0;e<t.length;e++)ad.add(t[e])}var Qp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rd={},sd={};function Xp(e){return Ll.call(sd,e)?!0:Ll.call(rd,e)?!1:Qp.test(e)?sd[e]=!0:(rd[e]=!0,!1)}function ti(e,t,a){if(Xp(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ai(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function aa(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function id(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ip(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,d=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(p){a=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yl(e){if(!e._valueTracker){var t=id(e)?"checked":"value";e._valueTracker=Ip(e,t,""+e[t])}}function ld(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=id(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Jp=/[\n"\\]/g;function kt(e){return e.replace(Jp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Kl(e,t,a,s,u,d,p,w){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Ql(e,p,Ot(t)):a!=null?Ql(e,p,Ot(a)):s!=null&&e.removeAttribute("value"),u==null&&d!=null&&(e.defaultChecked=!!d),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Ot(w):e.removeAttribute("name")}function od(e,t,a,s,u,d,p,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Yl(e);return}a=a!=null?""+Ot(a):"",t=t!=null?""+Ot(t):a,w||t===e.value||(e.value=t),e.defaultValue=t}s=s??u,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=w?e.checked:!!s,e.defaultChecked=!!s,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Yl(e)}function Ql(e,t,a){t==="number"&&ni(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Hn(e,t,a,s){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Ot(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function cd(e,t,a){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ot(a):""}function ud(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(i(92));if(Fe(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Ot(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Yl(e)}function $n(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Zp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dd(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Zp.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function hd(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var u in t)s=t[u],t.hasOwnProperty(u)&&a[u]!==s&&dd(e,u,s)}else for(var d in t)t.hasOwnProperty(d)&&dd(e,d,t[d])}function Xl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(e){return Wp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function na(){}var Il=null;function Jl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gn=null,Vn=null;function fd(e){var t=Ln(e);if(t&&(e=t.stateNode)){var a=e[dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Kl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var u=s[dt]||null;if(!u)throw Error(i(90));Kl(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&ld(s)}break e;case"textarea":cd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Hn(e,!!a.multiple,t,!1)}}}var Zl=!1;function md(e,t,a){if(Zl)return e(t,a);Zl=!0;try{var s=e(t);return s}finally{if(Zl=!1,(Gn!==null||Vn!==null)&&(Yi(),Gn&&(t=Gn,e=Vn,Vn=Gn=null,fd(t),e)))for(t=0;t<e.length;t++)fd(e[t])}}function Xr(e,t){var a=e.stateNode;if(a===null)return null;var s=a[dt]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=!1;if(ra)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){Fl=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{Fl=!1}var Ea=null,Wl=null,si=null;function gd(){if(si)return si;var e,t=Wl,a=t.length,s,u="value"in Ea?Ea.value:Ea.textContent,d=u.length;for(e=0;e<a&&t[e]===u[e];e++);var p=a-e;for(s=1;s<=p&&t[a-s]===u[d-s];s++);return si=u.slice(e,1<s?1-s:void 0)}function ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function li(){return!0}function pd(){return!1}function ht(e){function t(a,s,u,d,p){this._reactName=a,this._targetInst=u,this.type=s,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?li:pd,this.isPropagationStopped=pd,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),t}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oi=ht(cn),Jr=b({},cn,{view:0,detail:0}),e0=ht(Jr),eo,to,Zr,ci=b({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zr&&(Zr&&e.type==="mousemove"?(eo=e.screenX-Zr.screenX,to=e.screenY-Zr.screenY):to=eo=0,Zr=e),eo)},movementY:function(e){return"movementY"in e?e.movementY:to}}),yd=ht(ci),t0=b({},ci,{dataTransfer:0}),a0=ht(t0),n0=b({},Jr,{relatedTarget:0}),ao=ht(n0),r0=b({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),s0=ht(r0),i0=b({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),l0=ht(i0),o0=b({},cn,{data:0}),vd=ht(o0),c0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=d0[e])?!!t[e]:!1}function no(){return h0}var f0=b({},Jr,{key:function(e){if(e.key){var t=c0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),m0=ht(f0),g0=b({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=ht(g0),p0=b({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),y0=ht(p0),v0=b({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),b0=ht(v0),x0=b({},ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w0=ht(x0),_0=b({},cn,{newState:0,oldState:0}),S0=ht(_0),C0=[9,13,27,32],ro=ra&&"CompositionEvent"in window,Fr=null;ra&&"documentMode"in document&&(Fr=document.documentMode);var j0=ra&&"TextEvent"in window&&!Fr,xd=ra&&(!ro||Fr&&8<Fr&&11>=Fr),wd=" ",_d=!1;function Sd(e,t){switch(e){case"keyup":return C0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pn=!1;function A0(e,t){switch(e){case"compositionend":return Cd(t);case"keypress":return t.which!==32?null:(_d=!0,wd);case"textInput":return e=t.data,e===wd&&_d?null:e;default:return null}}function E0(e,t){if(Pn)return e==="compositionend"||!ro&&Sd(e,t)?(e=gd(),si=Wl=Ea=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xd&&t.locale!=="ko"?null:t.data;default:return null}}var N0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!N0[e.type]:t==="textarea"}function Ad(e,t,a,s){Gn?Vn?Vn.push(s):Vn=[s]:Gn=s,t=Fi(t,"onChange"),0<t.length&&(a=new oi("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Wr=null,es=null;function T0(e){cm(e,0)}function ui(e){var t=Qr(e);if(ld(t))return e}function Ed(e,t){if(e==="change")return t}var Nd=!1;if(ra){var so;if(ra){var io="oninput"in document;if(!io){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),io=typeof Td.oninput=="function"}so=io}else so=!1;Nd=so&&(!document.documentMode||9<document.documentMode)}function Rd(){Wr&&(Wr.detachEvent("onpropertychange",Od),es=Wr=null)}function Od(e){if(e.propertyName==="value"&&ui(es)){var t=[];Ad(t,es,e,Jl(e)),md(T0,t)}}function R0(e,t,a){e==="focusin"?(Rd(),Wr=t,es=a,Wr.attachEvent("onpropertychange",Od)):e==="focusout"&&Rd()}function O0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ui(es)}function k0(e,t){if(e==="click")return ui(t)}function U0(e,t){if(e==="input"||e==="change")return ui(t)}function D0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:D0;function ts(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var u=a[s];if(!Ll.call(t,u)||!_t(e[u],t[u]))return!1}return!0}function kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ud(e,t){var a=kd(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kd(a)}}function Dd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Md(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ni(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ni(e.document)}return t}function lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var M0=ra&&"documentMode"in document&&11>=document.documentMode,Yn=null,oo=null,as=null,co=!1;function zd(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;co||Yn==null||Yn!==ni(s)||(s=Yn,"selectionStart"in s&&lo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),as&&ts(as,s)||(as=s,s=Fi(oo,"onSelect"),0<s.length&&(t=new oi("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Yn)))}function un(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Kn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},uo={},Ld={};ra&&(Ld=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function dn(e){if(uo[e])return uo[e];if(!Kn[e])return e;var t=Kn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ld)return uo[e]=t[a];return e}var Bd=dn("animationend"),qd=dn("animationiteration"),Hd=dn("animationstart"),z0=dn("transitionrun"),L0=dn("transitionstart"),B0=dn("transitioncancel"),$d=dn("transitionend"),Gd=new Map,ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ho.push("scrollEnd");function Vt(e,t){Gd.set(e,t),on(t,[e])}var di=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ut=[],Qn=0,fo=0;function hi(){for(var e=Qn,t=fo=Qn=0;t<e;){var a=Ut[t];Ut[t++]=null;var s=Ut[t];Ut[t++]=null;var u=Ut[t];Ut[t++]=null;var d=Ut[t];if(Ut[t++]=null,s!==null&&u!==null){var p=s.pending;p===null?u.next=u:(u.next=p.next,p.next=u),s.pending=u}d!==0&&Vd(a,u,d)}}function fi(e,t,a,s){Ut[Qn++]=e,Ut[Qn++]=t,Ut[Qn++]=a,Ut[Qn++]=s,fo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function mo(e,t,a,s){return fi(e,t,a,s),mi(e)}function hn(e,t){return fi(e,null,null,t),mi(e)}function Vd(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var u=!1,d=e.return;d!==null;)d.childLanes|=a,s=d.alternate,s!==null&&(s.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(u=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,u&&t!==null&&(u=31-wt(a),e=d.hiddenUpdates,s=e[u],s===null?e[u]=[t]:s.push(t),t.lane=a|536870912),d):null}function mi(e){if(50<Cs)throw Cs=0,Sc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Xn={};function q0(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,a,s){return new q0(e,t,a,s)}function go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sa(e,t){var a=e.alternate;return a===null?(a=St(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Pd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function gi(e,t,a,s,u,d){var p=0;if(s=e,typeof e=="function")go(e)&&(p=1);else if(typeof e=="string")p=Py(e,a,qe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Y:return e=St(31,a,t,u),e.elementType=Y,e.lanes=d,e;case E:return fn(a.children,u,d,t);case T:p=8,u|=24;break;case R:return e=St(12,a,t,u|2),e.elementType=R,e.lanes=d,e;case P:return e=St(13,a,t,u),e.elementType=P,e.lanes=d,e;case $:return e=St(19,a,t,u),e.elementType=$,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:p=10;break e;case O:p=9;break e;case V:p=11;break e;case Z:p=14;break e;case se:p=16,s=null;break e}p=29,a=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=St(p,a,t,u),t.elementType=e,t.type=s,t.lanes=d,t}function fn(e,t,a,s){return e=St(7,e,s,t),e.lanes=a,e}function po(e,t,a){return e=St(6,e,null,t),e.lanes=a,e}function Yd(e){var t=St(18,null,null,0);return t.stateNode=e,t}function yo(e,t,a){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kd=new WeakMap;function Dt(e,t){if(typeof e=="object"&&e!==null){var a=Kd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Yu(t)},Kd.set(e,t),t)}return{value:e,source:t,stack:Yu(t)}}var In=[],Jn=0,pi=null,ns=0,Mt=[],zt=0,Na=null,Zt=1,Ft="";function ia(e,t){In[Jn++]=ns,In[Jn++]=pi,pi=e,ns=t}function Qd(e,t,a){Mt[zt++]=Zt,Mt[zt++]=Ft,Mt[zt++]=Na,Na=e;var s=Zt;e=Ft;var u=32-wt(s)-1;s&=~(1<<u),a+=1;var d=32-wt(t)+u;if(30<d){var p=u-u%5;d=(s&(1<<p)-1).toString(32),s>>=p,u-=p,Zt=1<<32-wt(t)+u|a<<u|s,Ft=d+e}else Zt=1<<d|a<<u|s,Ft=e}function vo(e){e.return!==null&&(ia(e,1),Qd(e,1,0))}function bo(e){for(;e===pi;)pi=In[--Jn],In[Jn]=null,ns=In[--Jn],In[Jn]=null;for(;e===Na;)Na=Mt[--zt],Mt[zt]=null,Ft=Mt[--zt],Mt[zt]=null,Zt=Mt[--zt],Mt[zt]=null}function Xd(e,t){Mt[zt++]=Zt,Mt[zt++]=Ft,Mt[zt++]=Na,Zt=t.id,Ft=t.overflow,Na=e}var st=null,ke=null,fe=!1,Ta=null,Lt=!1,xo=Error(i(519));function Ra(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rs(Dt(t,e)),xo}function Id(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[rt]=e,t[dt]=s,a){case"dialog":ue("cancel",t),ue("close",t);break;case"iframe":case"object":case"embed":ue("load",t);break;case"video":case"audio":for(a=0;a<As.length;a++)ue(As[a],t);break;case"source":ue("error",t);break;case"img":case"image":case"link":ue("error",t),ue("load",t);break;case"details":ue("toggle",t);break;case"input":ue("invalid",t),od(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ue("invalid",t);break;case"textarea":ue("invalid",t),ud(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||fm(t.textContent,a)?(s.popover!=null&&(ue("beforetoggle",t),ue("toggle",t)),s.onScroll!=null&&ue("scroll",t),s.onScrollEnd!=null&&ue("scrollend",t),s.onClick!=null&&(t.onclick=na),t=!0):t=!1,t||Ra(e,!0)}function Jd(e){for(st=e.return;st;)switch(st.tag){case 5:case 31:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:st=st.return}}function Zn(e){if(e!==st)return!1;if(!fe)return Jd(e),fe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bc(e.type,e.memoizedProps)),a=!a),a&&ke&&Ra(e),Jd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));ke=_m(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));ke=_m(e)}else t===27?(t=ke,Pa(e.type)?(e=Vc,Vc=null,ke=e):ke=t):ke=st?qt(e.stateNode.nextSibling):null;return!0}function mn(){ke=st=null,fe=!1}function wo(){var e=Ta;return e!==null&&(pt===null?pt=e:pt.push.apply(pt,e),Ta=null),e}function rs(e){Ta===null?Ta=[e]:Ta.push(e)}var _o=De(null),gn=null,la=null;function Oa(e,t,a){me(_o,t._currentValue),t._currentValue=a}function oa(e){e._currentValue=_o.current,Ne(_o)}function So(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Co(e,t,a,s){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var d=u.dependencies;if(d!==null){var p=u.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=u;for(var j=0;j<t.length;j++)if(w.context===t[j]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),So(d.return,a,e),s||(p=null);break e}d=w.next}}else if(u.tag===18){if(p=u.return,p===null)throw Error(i(341));p.lanes|=a,d=p.alternate,d!==null&&(d.lanes|=a),So(p,a,e),p=null}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===e){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}}function Fn(e,t,a,s){e=null;for(var u=t,d=!1;u!==null;){if(!d){if((u.flags&524288)!==0)d=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var p=u.alternate;if(p===null)throw Error(i(387));if(p=p.memoizedProps,p!==null){var w=u.type;_t(u.pendingProps.value,p.value)||(e!==null?e.push(w):e=[w])}}else if(u===Ye.current){if(p=u.alternate,p===null)throw Error(i(387));p.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Os):e=[Os])}u=u.return}e!==null&&Co(t,e,a,s),t.flags|=262144}function yi(e){for(e=e.firstContext;e!==null;){if(!_t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function pn(e){gn=e,la=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Zd(gn,e)}function vi(e,t){return gn===null&&pn(e),Zd(e,t)}function Zd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},la===null){if(e===null)throw Error(i(308));la=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else la=la.next=t;return a}var H0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},$0=l.unstable_scheduleCallback,G0=l.unstable_NormalPriority,Ke={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jo(){return{controller:new H0,data:new Map,refCount:0}}function ss(e){e.refCount--,e.refCount===0&&$0(G0,function(){e.controller.abort()})}var is=null,Ao=0,Wn=0,er=null;function V0(e,t){if(is===null){var a=is=[];Ao=0,Wn=Tc(),er={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Ao++,t.then(Fd,Fd),t}function Fd(){if(--Ao===0&&is!==null){er!==null&&(er.status="fulfilled");var e=is;is=null,Wn=0,er=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function P0(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(s.status="rejected",s.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),s}var Wd=B.S;B.S=function(e,t){Lf=bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&V0(e,t),Wd!==null&&Wd(e,t)};var yn=De(null);function Eo(){var e=yn.current;return e!==null?e:Te.pooledCache}function bi(e,t){t===null?me(yn,yn.current):me(yn,t.pool)}function eh(){var e=Eo();return e===null?null:{parent:Ke._currentValue,pool:e}}var tr=Error(i(460)),No=Error(i(474)),xi=Error(i(542)),wi={then:function(){}};function th(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ah(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(na,na),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rh(e),e;default:if(typeof t.status=="string")t.then(na,na);else{if(e=Te,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=s}},function(s){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rh(e),e}throw bn=t,tr}}function vn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(bn=a,tr):a}}var bn=null;function nh(){if(bn===null)throw Error(i(459));var e=bn;return bn=null,e}function rh(e){if(e===tr||e===xi)throw Error(i(483))}var ar=null,ls=0;function _i(e){var t=ls;return ls+=1,ar===null&&(ar=[]),ah(ar,e,t)}function os(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Si(e,t){throw t.$$typeof===x?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sh(e){function t(N,A){if(e){var k=N.deletions;k===null?(N.deletions=[A],N.flags|=16):k.push(A)}}function a(N,A){if(!e)return null;for(;A!==null;)t(N,A),A=A.sibling;return null}function s(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function u(N,A){return N=sa(N,A),N.index=0,N.sibling=null,N}function d(N,A,k){return N.index=k,e?(k=N.alternate,k!==null?(k=k.index,k<A?(N.flags|=67108866,A):k):(N.flags|=67108866,A)):(N.flags|=1048576,A)}function p(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function w(N,A,k,q){return A===null||A.tag!==6?(A=po(k,N.mode,q),A.return=N,A):(A=u(A,k),A.return=N,A)}function j(N,A,k,q){var F=k.type;return F===E?L(N,A,k.props.children,q,k.key):A!==null&&(A.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===se&&vn(F)===A.type)?(A=u(A,k.props),os(A,k),A.return=N,A):(A=gi(k.type,k.key,k.props,null,N.mode,q),os(A,k),A.return=N,A)}function U(N,A,k,q){return A===null||A.tag!==4||A.stateNode.containerInfo!==k.containerInfo||A.stateNode.implementation!==k.implementation?(A=yo(k,N.mode,q),A.return=N,A):(A=u(A,k.children||[]),A.return=N,A)}function L(N,A,k,q,F){return A===null||A.tag!==7?(A=fn(k,N.mode,q,F),A.return=N,A):(A=u(A,k),A.return=N,A)}function H(N,A,k){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=po(""+A,N.mode,k),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _:return k=gi(A.type,A.key,A.props,null,N.mode,k),os(k,A),k.return=N,k;case C:return A=yo(A,N.mode,k),A.return=N,A;case se:return A=vn(A),H(N,A,k)}if(Fe(A)||_e(A))return A=fn(A,N.mode,k,null),A.return=N,A;if(typeof A.then=="function")return H(N,_i(A),k);if(A.$$typeof===z)return H(N,vi(N,A),k);Si(N,A)}return null}function D(N,A,k,q){var F=A!==null?A.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return F!==null?null:w(N,A,""+k,q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===F?j(N,A,k,q):null;case C:return k.key===F?U(N,A,k,q):null;case se:return k=vn(k),D(N,A,k,q)}if(Fe(k)||_e(k))return F!==null?null:L(N,A,k,q,null);if(typeof k.then=="function")return D(N,A,_i(k),q);if(k.$$typeof===z)return D(N,A,vi(N,k),q);Si(N,k)}return null}function M(N,A,k,q,F){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return N=N.get(k)||null,w(A,N,""+q,F);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return N=N.get(q.key===null?k:q.key)||null,j(A,N,q,F);case C:return N=N.get(q.key===null?k:q.key)||null,U(A,N,q,F);case se:return q=vn(q),M(N,A,k,q,F)}if(Fe(q)||_e(q))return N=N.get(k)||null,L(A,N,q,F,null);if(typeof q.then=="function")return M(N,A,k,_i(q),F);if(q.$$typeof===z)return M(N,A,k,vi(A,q),F);Si(A,q)}return null}function Q(N,A,k,q){for(var F=null,ye=null,I=A,le=A=0,he=null;I!==null&&le<k.length;le++){I.index>le?(he=I,I=null):he=I.sibling;var ve=D(N,I,k[le],q);if(ve===null){I===null&&(I=he);break}e&&I&&ve.alternate===null&&t(N,I),A=d(ve,A,le),ye===null?F=ve:ye.sibling=ve,ye=ve,I=he}if(le===k.length)return a(N,I),fe&&ia(N,le),F;if(I===null){for(;le<k.length;le++)I=H(N,k[le],q),I!==null&&(A=d(I,A,le),ye===null?F=I:ye.sibling=I,ye=I);return fe&&ia(N,le),F}for(I=s(I);le<k.length;le++)he=M(I,N,le,k[le],q),he!==null&&(e&&he.alternate!==null&&I.delete(he.key===null?le:he.key),A=d(he,A,le),ye===null?F=he:ye.sibling=he,ye=he);return e&&I.forEach(function(Ia){return t(N,Ia)}),fe&&ia(N,le),F}function te(N,A,k,q){if(k==null)throw Error(i(151));for(var F=null,ye=null,I=A,le=A=0,he=null,ve=k.next();I!==null&&!ve.done;le++,ve=k.next()){I.index>le?(he=I,I=null):he=I.sibling;var Ia=D(N,I,ve.value,q);if(Ia===null){I===null&&(I=he);break}e&&I&&Ia.alternate===null&&t(N,I),A=d(Ia,A,le),ye===null?F=Ia:ye.sibling=Ia,ye=Ia,I=he}if(ve.done)return a(N,I),fe&&ia(N,le),F;if(I===null){for(;!ve.done;le++,ve=k.next())ve=H(N,ve.value,q),ve!==null&&(A=d(ve,A,le),ye===null?F=ve:ye.sibling=ve,ye=ve);return fe&&ia(N,le),F}for(I=s(I);!ve.done;le++,ve=k.next())ve=M(I,N,le,ve.value,q),ve!==null&&(e&&ve.alternate!==null&&I.delete(ve.key===null?le:ve.key),A=d(ve,A,le),ye===null?F=ve:ye.sibling=ve,ye=ve);return e&&I.forEach(function(tv){return t(N,tv)}),fe&&ia(N,le),F}function Ee(N,A,k,q){if(typeof k=="object"&&k!==null&&k.type===E&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:e:{for(var F=k.key;A!==null;){if(A.key===F){if(F=k.type,F===E){if(A.tag===7){a(N,A.sibling),q=u(A,k.props.children),q.return=N,N=q;break e}}else if(A.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===se&&vn(F)===A.type){a(N,A.sibling),q=u(A,k.props),os(q,k),q.return=N,N=q;break e}a(N,A);break}else t(N,A);A=A.sibling}k.type===E?(q=fn(k.props.children,N.mode,q,k.key),q.return=N,N=q):(q=gi(k.type,k.key,k.props,null,N.mode,q),os(q,k),q.return=N,N=q)}return p(N);case C:e:{for(F=k.key;A!==null;){if(A.key===F)if(A.tag===4&&A.stateNode.containerInfo===k.containerInfo&&A.stateNode.implementation===k.implementation){a(N,A.sibling),q=u(A,k.children||[]),q.return=N,N=q;break e}else{a(N,A);break}else t(N,A);A=A.sibling}q=yo(k,N.mode,q),q.return=N,N=q}return p(N);case se:return k=vn(k),Ee(N,A,k,q)}if(Fe(k))return Q(N,A,k,q);if(_e(k)){if(F=_e(k),typeof F!="function")throw Error(i(150));return k=F.call(k),te(N,A,k,q)}if(typeof k.then=="function")return Ee(N,A,_i(k),q);if(k.$$typeof===z)return Ee(N,A,vi(N,k),q);Si(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,A!==null&&A.tag===6?(a(N,A.sibling),q=u(A,k),q.return=N,N=q):(a(N,A),q=po(k,N.mode,q),q.return=N,N=q),p(N)):a(N,A)}return function(N,A,k,q){try{ls=0;var F=Ee(N,A,k,q);return ar=null,F}catch(I){if(I===tr||I===xi)throw I;var ye=St(29,I,null,N.mode);return ye.lanes=q,ye.return=N,ye}finally{}}}var xn=sh(!0),ih=sh(!1),ka=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ua(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(xe&2)!==0){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,t=mi(e),Vd(e,null,a),t}return fi(e,s,t,a),mi(e)}function cs(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Zu(e,a)}}function Oo(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var u=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?u=d=p:d=d.next=p,a=a.next}while(a!==null);d===null?u=d=t:d=d.next=t}else u=d=t;a={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var ko=!1;function us(){if(ko){var e=er;if(e!==null)throw e}}function ds(e,t,a,s){ko=!1;var u=e.updateQueue;ka=!1;var d=u.firstBaseUpdate,p=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var j=w,U=j.next;j.next=null,p===null?d=U:p.next=U,p=j;var L=e.alternate;L!==null&&(L=L.updateQueue,w=L.lastBaseUpdate,w!==p&&(w===null?L.firstBaseUpdate=U:w.next=U,L.lastBaseUpdate=j))}if(d!==null){var H=u.baseState;p=0,L=U=j=null,w=d;do{var D=w.lane&-536870913,M=D!==w.lane;if(M?(de&D)===D:(s&D)===D){D!==0&&D===Wn&&(ko=!0),L!==null&&(L=L.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Q=e,te=w;D=t;var Ee=a;switch(te.tag){case 1:if(Q=te.payload,typeof Q=="function"){H=Q.call(Ee,H,D);break e}H=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=te.payload,D=typeof Q=="function"?Q.call(Ee,H,D):Q,D==null)break e;H=b({},H,D);break e;case 2:ka=!0}}D=w.callback,D!==null&&(e.flags|=64,M&&(e.flags|=8192),M=u.callbacks,M===null?u.callbacks=[D]:M.push(D))}else M={lane:D,tag:w.tag,payload:w.payload,callback:w.callback,next:null},L===null?(U=L=M,j=H):L=L.next=M,p|=D;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;M=w,w=M.next,M.next=null,u.lastBaseUpdate=M,u.shared.pending=null}}while(!0);L===null&&(j=H),u.baseState=j,u.firstBaseUpdate=U,u.lastBaseUpdate=L,d===null&&(u.shared.lanes=0),qa|=p,e.lanes=p,e.memoizedState=H}}function lh(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function oh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)lh(a[e],t)}var nr=De(null),Ci=De(0);function ch(e,t){e=ya,me(Ci,e),me(nr,t),ya=e|t.baseLanes}function Uo(){me(Ci,ya),me(nr,nr.current)}function Do(){ya=Ci.current,Ne(nr),Ne(Ci)}var Ct=De(null),Bt=null;function Ma(e){var t=e.alternate;me(Ge,Ge.current&1),me(Ct,e),Bt===null&&(t===null||nr.current!==null||t.memoizedState!==null)&&(Bt=e)}function Mo(e){me(Ge,Ge.current),me(Ct,e),Bt===null&&(Bt=e)}function uh(e){e.tag===22?(me(Ge,Ge.current),me(Ct,e),Bt===null&&(Bt=e)):za()}function za(){me(Ge,Ge.current),me(Ct,Ct.current)}function jt(e){Ne(Ct),Bt===e&&(Bt=null),Ne(Ge)}var Ge=De(0);function ji(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$c(a)||Gc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=0,ie=null,je=null,Qe=null,Ai=!1,rr=!1,wn=!1,Ei=0,hs=0,sr=null,Y0=0;function He(){throw Error(i(321))}function zo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!_t(e[a],t[a]))return!1;return!0}function Lo(e,t,a,s,u,d){return ca=d,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?Qh:Fo,wn=!1,d=a(s,u),wn=!1,rr&&(d=hh(t,a,s,u)),dh(e),d}function dh(e){B.H=gs;var t=je!==null&&je.next!==null;if(ca=0,Qe=je=ie=null,Ai=!1,hs=0,sr=null,t)throw Error(i(300));e===null||Xe||(e=e.dependencies,e!==null&&yi(e)&&(Xe=!0))}function hh(e,t,a,s){ie=e;var u=0;do{if(rr&&(sr=null),hs=0,rr=!1,25<=u)throw Error(i(301));if(u+=1,Qe=je=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}B.H=Xh,d=t(a,s)}while(rr);return d}function K0(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?fs(t):t,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(ie.flags|=1024),t}function Bo(){var e=Ei!==0;return Ei=0,e}function qo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Ho(e){if(Ai){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ai=!1}ca=0,Qe=je=ie=null,rr=!1,hs=Ei=0,sr=null}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?ie.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ve(){if(je===null){var e=ie.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=Qe===null?ie.memoizedState:Qe.next;if(t!==null)Qe=t,je=e;else{if(e===null)throw ie.alternate===null?Error(i(467)):Error(i(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Qe===null?ie.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Ni(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fs(e){var t=hs;return hs+=1,sr===null&&(sr=[]),e=ah(sr,e,t),t=ie,(Qe===null?t.memoizedState:Qe.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?Qh:Fo),e}function Ti(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fs(e);if(e.$$typeof===z)return it(e)}throw Error(i(438,String(e)))}function $o(e){var t=null,a=ie.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ie.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Ni(),ie.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=ge;return t.index++,a}function ua(e,t){return typeof t=="function"?t(e):t}function Ri(e){var t=Ve();return Go(t,je,e)}function Go(e,t,a){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=a;var u=e.baseQueue,d=s.pending;if(d!==null){if(u!==null){var p=u.next;u.next=d.next,d.next=p}t.baseQueue=u=d,s.pending=null}if(d=e.baseState,u===null)e.memoizedState=d;else{t=u.next;var w=p=null,j=null,U=t,L=!1;do{var H=U.lane&-536870913;if(H!==U.lane?(de&H)===H:(ca&H)===H){var D=U.revertLane;if(D===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),H===Wn&&(L=!0);else if((ca&D)===D){U=U.next,D===Wn&&(L=!0);continue}else H={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},j===null?(w=j=H,p=d):j=j.next=H,ie.lanes|=D,qa|=D;H=U.action,wn&&a(d,H),d=U.hasEagerState?U.eagerState:a(d,H)}else D={lane:H,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},j===null?(w=j=D,p=d):j=j.next=D,ie.lanes|=H,qa|=H;U=U.next}while(U!==null&&U!==t);if(j===null?p=d:j.next=w,!_t(d,e.memoizedState)&&(Xe=!0,L&&(a=er,a!==null)))throw a;e.memoizedState=d,e.baseState=p,e.baseQueue=j,s.lastRenderedState=d}return u===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Vo(e){var t=Ve(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,u=a.pending,d=t.memoizedState;if(u!==null){a.pending=null;var p=u=u.next;do d=e(d,p.action),p=p.next;while(p!==u);_t(d,t.memoizedState)||(Xe=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),a.lastRenderedState=d}return[d,s]}function fh(e,t,a){var s=ie,u=Ve(),d=fe;if(d){if(a===void 0)throw Error(i(407));a=a()}else a=t();var p=!_t((je||u).memoizedState,a);if(p&&(u.memoizedState=a,Xe=!0),u=u.queue,Ko(ph.bind(null,s,u,e),[e]),u.getSnapshot!==t||p||Qe!==null&&Qe.memoizedState.tag&1){if(s.flags|=2048,ir(9,{destroy:void 0},gh.bind(null,s,u,a,t),null),Te===null)throw Error(i(349));d||(ca&127)!==0||mh(s,t,a)}return a}function mh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ie.updateQueue,t===null?(t=Ni(),ie.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function gh(e,t,a,s){t.value=a,t.getSnapshot=s,yh(t)&&vh(e)}function ph(e,t,a){return a(function(){yh(t)&&vh(e)})}function yh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!_t(e,a)}catch{return!0}}function vh(e){var t=hn(e,2);t!==null&&yt(t,e,2)}function Po(e){var t=ct();if(typeof e=="function"){var a=e;if(e=a(),wn){ja(!0);try{a()}finally{ja(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e},t}function bh(e,t,a,s){return e.baseState=a,Go(e,je,typeof s=="function"?s:ua)}function Q0(e,t,a,s,u){if(Ui(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};B.T!==null?a(!0):d.isTransition=!1,s(d),a=t.pending,a===null?(d.next=t.pending=d,xh(t,d)):(d.next=a.next,t.pending=a.next=d)}}function xh(e,t){var a=t.action,s=t.payload,u=e.state;if(t.isTransition){var d=B.T,p={};B.T=p;try{var w=a(u,s),j=B.S;j!==null&&j(p,w),wh(e,t,w)}catch(U){Yo(e,t,U)}finally{d!==null&&p.types!==null&&(d.types=p.types),B.T=d}}else try{d=a(u,s),wh(e,t,d)}catch(U){Yo(e,t,U)}}function wh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){_h(e,t,s)},function(s){return Yo(e,t,s)}):_h(e,t,a)}function _h(e,t,a){t.status="fulfilled",t.value=a,Sh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,xh(e,a)))}function Yo(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Sh(t),t=t.next;while(t!==s)}e.action=null}function Sh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ch(e,t){return t}function jh(e,t){if(fe){var a=Te.formState;if(a!==null){e:{var s=ie;if(fe){if(ke){t:{for(var u=ke,d=Lt;u.nodeType!==8;){if(!d){u=null;break t}if(u=qt(u.nextSibling),u===null){u=null;break t}}d=u.data,u=d==="F!"||d==="F"?u:null}if(u){ke=qt(u.nextSibling),s=u.data==="F!";break e}}Ra(s)}s=!1}s&&(t=a[0])}}return a=ct(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ch,lastRenderedState:t},a.queue=s,a=Ph.bind(null,ie,s),s.dispatch=a,s=Po(!1),d=Zo.bind(null,ie,!1,s.queue),s=ct(),u={state:t,dispatch:null,action:e,pending:null},s.queue=u,a=Q0.bind(null,ie,u,d,a),u.dispatch=a,s.memoizedState=e,[t,a,!1]}function Ah(e){var t=Ve();return Eh(t,je,e)}function Eh(e,t,a){if(t=Go(e,t,Ch)[0],e=Ri(ua)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=fs(t)}catch(p){throw p===tr?xi:p}else s=t;t=Ve();var u=t.queue,d=u.dispatch;return a!==t.memoizedState&&(ie.flags|=2048,ir(9,{destroy:void 0},X0.bind(null,u,a),null)),[s,d,e]}function X0(e,t){e.action=t}function Nh(e){var t=Ve(),a=je;if(a!==null)return Eh(t,a,e);Ve(),t=t.memoizedState,a=Ve();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function ir(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ie.updateQueue,t===null&&(t=Ni(),ie.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Th(){return Ve().memoizedState}function Oi(e,t,a,s){var u=ct();ie.flags|=e,u.memoizedState=ir(1|t,{destroy:void 0},a,s===void 0?null:s)}function ki(e,t,a,s){var u=Ve();s=s===void 0?null:s;var d=u.memoizedState.inst;je!==null&&s!==null&&zo(s,je.memoizedState.deps)?u.memoizedState=ir(t,d,a,s):(ie.flags|=e,u.memoizedState=ir(1|t,d,a,s))}function Rh(e,t){Oi(8390656,8,e,t)}function Ko(e,t){ki(2048,8,e,t)}function I0(e){ie.flags|=4;var t=ie.updateQueue;if(t===null)t=Ni(),ie.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Oh(e){var t=Ve().memoizedState;return I0({ref:t,nextImpl:e}),function(){if((xe&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function kh(e,t){return ki(4,2,e,t)}function Uh(e,t){return ki(4,4,e,t)}function Dh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mh(e,t,a){a=a!=null?a.concat([e]):null,ki(4,4,Dh.bind(null,t,e),a)}function Qo(){}function zh(e,t){var a=Ve();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&zo(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Lh(e,t){var a=Ve();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&zo(t,s[1]))return s[0];if(s=e(),wn){ja(!0);try{e()}finally{ja(!1)}}return a.memoizedState=[s,t],s}function Xo(e,t,a){return a===void 0||(ca&1073741824)!==0&&(de&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=qf(),ie.lanes|=e,qa|=e,a)}function Bh(e,t,a,s){return _t(a,t)?a:nr.current!==null?(e=Xo(e,a,s),_t(e,t)||(Xe=!0),e):(ca&42)===0||(ca&1073741824)!==0&&(de&261930)===0?(Xe=!0,e.memoizedState=a):(e=qf(),ie.lanes|=e,qa|=e,t)}function qh(e,t,a,s,u){var d=G.p;G.p=d!==0&&8>d?d:8;var p=B.T,w={};B.T=w,Zo(e,!1,t,a);try{var j=u(),U=B.S;if(U!==null&&U(w,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var L=P0(j,s);ms(e,t,L,Nt(e))}else ms(e,t,s,Nt(e))}catch(H){ms(e,t,{then:function(){},status:"rejected",reason:H},Nt())}finally{G.p=d,p!==null&&w.types!==null&&(p.types=w.types),B.T=p}}function J0(){}function Io(e,t,a,s){if(e.tag!==5)throw Error(i(476));var u=Hh(e).queue;qh(e,u,t,X,a===null?J0:function(){return $h(e),a(s)})}function Hh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:X},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $h(e){var t=Hh(e);t.next===null&&(t=e.alternate.memoizedState),ms(e,t.next.queue,{},Nt())}function Jo(){return it(Os)}function Gh(){return Ve().memoizedState}function Vh(){return Ve().memoizedState}function Z0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Nt();e=Ua(a);var s=Da(t,e,a);s!==null&&(yt(s,t,a),cs(s,t,a)),t={cache:jo()},e.payload=t;return}t=t.return}}function F0(e,t,a){var s=Nt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ui(e)?Yh(t,a):(a=mo(e,t,a,s),a!==null&&(yt(a,e,s),Kh(a,t,s)))}function Ph(e,t,a){var s=Nt();ms(e,t,a,s)}function ms(e,t,a,s){var u={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ui(e))Yh(t,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,w=d(p,a);if(u.hasEagerState=!0,u.eagerState=w,_t(w,p))return fi(e,t,u,0),Te===null&&hi(),!1}catch{}finally{}if(a=mo(e,t,u,s),a!==null)return yt(a,e,s),Kh(a,t,s),!0}return!1}function Zo(e,t,a,s){if(s={lane:2,revertLane:Tc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ui(e)){if(t)throw Error(i(479))}else t=mo(e,a,s,2),t!==null&&yt(t,e,2)}function Ui(e){var t=e.alternate;return e===ie||t!==null&&t===ie}function Yh(e,t){rr=Ai=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Kh(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Zu(e,a)}}var gs={readContext:it,use:Ti,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};gs.useEffectEvent=He;var Qh={readContext:it,use:Ti,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:Rh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Oi(4194308,4,Dh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){Oi(4,2,e,t)},useMemo:function(e,t){var a=ct();t=t===void 0?null:t;var s=e();if(wn){ja(!0);try{e()}finally{ja(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=ct();if(a!==void 0){var u=a(t);if(wn){ja(!0);try{a(t)}finally{ja(!1)}}}else u=t;return s.memoizedState=s.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},s.queue=e,e=e.dispatch=F0.bind(null,ie,e),[s.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:function(e){e=Po(e);var t=e.queue,a=Ph.bind(null,ie,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Qo,useDeferredValue:function(e,t){var a=ct();return Xo(a,e,t)},useTransition:function(){var e=Po(!1);return e=qh.bind(null,ie,e.queue,!0,!1),ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ie,u=ct();if(fe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Te===null)throw Error(i(349));(de&127)!==0||mh(s,t,a)}u.memoizedState=a;var d={value:a,getSnapshot:t};return u.queue=d,Rh(ph.bind(null,s,d,e),[e]),s.flags|=2048,ir(9,{destroy:void 0},gh.bind(null,s,d,a,t),null),a},useId:function(){var e=ct(),t=Te.identifierPrefix;if(fe){var a=Ft,s=Zt;a=(s&~(1<<32-wt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ei++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Y0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Jo,useFormState:jh,useActionState:jh,useOptimistic:function(e){var t=ct();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Zo.bind(null,ie,!0,a),a.dispatch=t,[e,t]},useMemoCache:$o,useCacheRefresh:function(){return ct().memoizedState=Z0.bind(null,ie)},useEffectEvent:function(e){var t=ct(),a={impl:e};return t.memoizedState=a,function(){if((xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Fo={readContext:it,use:Ti,useCallback:zh,useContext:it,useEffect:Ko,useImperativeHandle:Mh,useInsertionEffect:kh,useLayoutEffect:Uh,useMemo:Lh,useReducer:Ri,useRef:Th,useState:function(){return Ri(ua)},useDebugValue:Qo,useDeferredValue:function(e,t){var a=Ve();return Bh(a,je.memoizedState,e,t)},useTransition:function(){var e=Ri(ua)[0],t=Ve().memoizedState;return[typeof e=="boolean"?e:fs(e),t]},useSyncExternalStore:fh,useId:Gh,useHostTransitionStatus:Jo,useFormState:Ah,useActionState:Ah,useOptimistic:function(e,t){var a=Ve();return bh(a,je,e,t)},useMemoCache:$o,useCacheRefresh:Vh};Fo.useEffectEvent=Oh;var Xh={readContext:it,use:Ti,useCallback:zh,useContext:it,useEffect:Ko,useImperativeHandle:Mh,useInsertionEffect:kh,useLayoutEffect:Uh,useMemo:Lh,useReducer:Vo,useRef:Th,useState:function(){return Vo(ua)},useDebugValue:Qo,useDeferredValue:function(e,t){var a=Ve();return je===null?Xo(a,e,t):Bh(a,je.memoizedState,e,t)},useTransition:function(){var e=Vo(ua)[0],t=Ve().memoizedState;return[typeof e=="boolean"?e:fs(e),t]},useSyncExternalStore:fh,useId:Gh,useHostTransitionStatus:Jo,useFormState:Nh,useActionState:Nh,useOptimistic:function(e,t){var a=Ve();return je!==null?bh(a,je,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:$o,useCacheRefresh:Vh};Xh.useEffectEvent=Oh;function Wo(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ec={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Nt(),u=Ua(s);u.payload=t,a!=null&&(u.callback=a),t=Da(e,u,s),t!==null&&(yt(t,e,s),cs(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Nt(),u=Ua(s);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=Da(e,u,s),t!==null&&(yt(t,e,s),cs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Nt(),s=Ua(a);s.tag=2,t!=null&&(s.callback=t),t=Da(e,s,a),t!==null&&(yt(t,e,a),cs(t,e,a))}};function Ih(e,t,a,s,u,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,p):t.prototype&&t.prototype.isPureReactComponent?!ts(a,s)||!ts(u,d):!0}function Jh(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&ec.enqueueReplaceState(t,t.state,null)}function _n(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function Zh(e){di(e)}function Fh(e){console.error(e)}function Wh(e){di(e)}function Di(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function ef(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function tc(e,t,a){return a=Ua(a),a.tag=3,a.payload={element:null},a.callback=function(){Di(e,t)},a}function tf(e){return e=Ua(e),e.tag=3,e}function af(e,t,a,s){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var d=s.value;e.payload=function(){return u(d)},e.callback=function(){ef(t,a,s)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){ef(t,a,s),typeof u!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})})}function W0(e,t,a,s,u){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Fn(t,a,u,!0),a=Ct.current,a!==null){switch(a.tag){case 31:case 13:return Bt===null?Ki():a.alternate===null&&$e===0&&($e=3),a.flags&=-257,a.flags|=65536,a.lanes=u,s===wi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Ac(e,s,u)),!1;case 22:return a.flags|=65536,s===wi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Ac(e,s,u)),!1}throw Error(i(435,a.tag))}return Ac(e,s,u),Ki(),!1}if(fe)return t=Ct.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,s!==xo&&(e=Error(i(422),{cause:s}),rs(Dt(e,a)))):(s!==xo&&(t=Error(i(423),{cause:s}),rs(Dt(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,s=Dt(s,a),u=tc(e.stateNode,s,u),Oo(e,u),$e!==4&&($e=2)),!1;var d=Error(i(520),{cause:s});if(d=Dt(d,a),Ss===null?Ss=[d]:Ss.push(d),$e!==4&&($e=2),t===null)return!0;s=Dt(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=tc(a.stateNode,s,e),Oo(a,e),!1;case 1:if(t=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ha===null||!Ha.has(d))))return a.flags|=65536,u&=-u,a.lanes|=u,u=tf(u),af(u,e,a,s),Oo(a,u),!1}a=a.return}while(a!==null);return!1}var ac=Error(i(461)),Xe=!1;function lt(e,t,a,s){t.child=e===null?ih(t,null,a,s):xn(t,e.child,a,s)}function nf(e,t,a,s,u){a=a.render;var d=t.ref;if("ref"in s){var p={};for(var w in s)w!=="ref"&&(p[w]=s[w])}else p=s;return pn(t),s=Lo(e,t,a,p,d,u),w=Bo(),e!==null&&!Xe?(qo(e,t,u),da(e,t,u)):(fe&&w&&vo(t),t.flags|=1,lt(e,t,s,u),t.child)}function rf(e,t,a,s,u){if(e===null){var d=a.type;return typeof d=="function"&&!go(d)&&d.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=d,sf(e,t,d,s,u)):(e=gi(a.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!uc(e,u)){var p=d.memoizedProps;if(a=a.compare,a=a!==null?a:ts,a(p,s)&&e.ref===t.ref)return da(e,t,u)}return t.flags|=1,e=sa(d,s),e.ref=t.ref,e.return=t,t.child=e}function sf(e,t,a,s,u){if(e!==null){var d=e.memoizedProps;if(ts(d,s)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=s=d,uc(e,u))(e.flags&131072)!==0&&(Xe=!0);else return t.lanes=e.lanes,da(e,t,u)}return nc(e,t,a,s,u)}function lf(e,t,a,s){var u=s.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(s=t.child=e.child,u=0;s!==null;)u=u|s.lanes|s.childLanes,s=s.sibling;s=u&~d}else s=0,t.child=null;return of(e,t,d,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&bi(t,d!==null?d.cachePool:null),d!==null?ch(t,d):Uo(),uh(t);else return s=t.lanes=536870912,of(e,t,d!==null?d.baseLanes|a:a,a,s)}else d!==null?(bi(t,d.cachePool),ch(t,d),za(),t.memoizedState=null):(e!==null&&bi(t,null),Uo(),za());return lt(e,t,u,a),t.child}function ps(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function of(e,t,a,s,u){var d=Eo();return d=d===null?null:{parent:Ke._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&bi(t,null),Uo(),uh(t),e!==null&&Fn(e,t,s,!0),t.childLanes=u,null}function Mi(e,t){return t=Li({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function cf(e,t,a){return xn(t,e.child,null,a),e=Mi(t,t.pendingProps),e.flags|=2,jt(t),t.memoizedState=null,e}function ey(e,t,a){var s=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(fe){if(s.mode==="hidden")return e=Mi(t,s),t.lanes=536870912,ps(null,e);if(Mo(t),(e=ke)?(e=wm(e,Lt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:Zt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},a=Yd(e),a.return=t,t.child=a,st=t,ke=null)):e=null,e===null)throw Ra(t);return t.lanes=536870912,null}return Mi(t,s)}var d=e.memoizedState;if(d!==null){var p=d.dehydrated;if(Mo(t),u)if(t.flags&256)t.flags&=-257,t=cf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Xe||Fn(e,t,a,!1),u=(a&e.childLanes)!==0,Xe||u){if(s=Te,s!==null&&(p=Fu(s,a),p!==0&&p!==d.retryLane))throw d.retryLane=p,hn(e,p),yt(s,e,p),ac;Ki(),t=cf(e,t,a)}else e=d.treeContext,ke=qt(p.nextSibling),st=t,fe=!0,Ta=null,Lt=!1,e!==null&&Xd(t,e),t=Mi(t,s),t.flags|=4096;return t}return e=sa(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function zi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function nc(e,t,a,s,u){return pn(t),a=Lo(e,t,a,s,void 0,u),s=Bo(),e!==null&&!Xe?(qo(e,t,u),da(e,t,u)):(fe&&s&&vo(t),t.flags|=1,lt(e,t,a,u),t.child)}function uf(e,t,a,s,u,d){return pn(t),t.updateQueue=null,a=hh(t,s,a,u),dh(e),s=Bo(),e!==null&&!Xe?(qo(e,t,d),da(e,t,d)):(fe&&s&&vo(t),t.flags|=1,lt(e,t,a,d),t.child)}function df(e,t,a,s,u){if(pn(t),t.stateNode===null){var d=Xn,p=a.contextType;typeof p=="object"&&p!==null&&(d=it(p)),d=new a(s,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ec,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=s,d.state=t.memoizedState,d.refs={},To(t),p=a.contextType,d.context=typeof p=="object"&&p!==null?it(p):Xn,d.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Wo(t,a,p,s),d.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&ec.enqueueReplaceState(d,d.state,null),ds(t,s,d,u),us(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){d=t.stateNode;var w=t.memoizedProps,j=_n(a,w);d.props=j;var U=d.context,L=a.contextType;p=Xn,typeof L=="object"&&L!==null&&(p=it(L));var H=a.getDerivedStateFromProps;L=typeof H=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,L||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||U!==p)&&Jh(t,d,s,p),ka=!1;var D=t.memoizedState;d.state=D,ds(t,s,d,u),us(),U=t.memoizedState,w||D!==U||ka?(typeof H=="function"&&(Wo(t,a,H,s),U=t.memoizedState),(j=ka||Ih(t,a,j,s,D,U,p))?(L||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=U),d.props=s,d.state=U,d.context=p,s=j):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{d=t.stateNode,Ro(e,t),p=t.memoizedProps,L=_n(a,p),d.props=L,H=t.pendingProps,D=d.context,U=a.contextType,j=Xn,typeof U=="object"&&U!==null&&(j=it(U)),w=a.getDerivedStateFromProps,(U=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==H||D!==j)&&Jh(t,d,s,j),ka=!1,D=t.memoizedState,d.state=D,ds(t,s,d,u),us();var M=t.memoizedState;p!==H||D!==M||ka||e!==null&&e.dependencies!==null&&yi(e.dependencies)?(typeof w=="function"&&(Wo(t,a,w,s),M=t.memoizedState),(L=ka||Ih(t,a,L,s,D,M,j)||e!==null&&e.dependencies!==null&&yi(e.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,M,j),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,M,j)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=M),d.props=s,d.state=M,d.context=j,s=L):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),s=!1)}return d=s,zi(e,t),s=(t.flags&128)!==0,d||s?(d=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&s?(t.child=xn(t,e.child,null,u),t.child=xn(t,null,a,u)):lt(e,t,a,u),t.memoizedState=d.state,e=t.child):e=da(e,t,u),e}function hf(e,t,a,s){return mn(),t.flags|=256,lt(e,t,a,s),t.child}var rc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sc(e){return{baseLanes:e,cachePool:eh()}}function ic(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Et),e}function ff(e,t,a){var s=t.pendingProps,u=!1,d=(t.flags&128)!==0,p;if((p=d)||(p=e!==null&&e.memoizedState===null?!1:(Ge.current&2)!==0),p&&(u=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(fe){if(u?Ma(t):za(),(e=ke)?(e=wm(e,Lt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:Zt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},a=Yd(e),a.return=t,t.child=a,st=t,ke=null)):e=null,e===null)throw Ra(t);return Gc(e)?t.lanes=32:t.lanes=536870912,null}var w=s.children;return s=s.fallback,u?(za(),u=t.mode,w=Li({mode:"hidden",children:w},u),s=fn(s,u,a,null),w.return=t,s.return=t,w.sibling=s,t.child=w,s=t.child,s.memoizedState=sc(a),s.childLanes=ic(e,p,a),t.memoizedState=rc,ps(null,s)):(Ma(t),lc(t,w))}var j=e.memoizedState;if(j!==null&&(w=j.dehydrated,w!==null)){if(d)t.flags&256?(Ma(t),t.flags&=-257,t=oc(e,t,a)):t.memoizedState!==null?(za(),t.child=e.child,t.flags|=128,t=null):(za(),w=s.fallback,u=t.mode,s=Li({mode:"visible",children:s.children},u),w=fn(w,u,a,null),w.flags|=2,s.return=t,w.return=t,s.sibling=w,t.child=s,xn(t,e.child,null,a),s=t.child,s.memoizedState=sc(a),s.childLanes=ic(e,p,a),t.memoizedState=rc,t=ps(null,s));else if(Ma(t),Gc(w)){if(p=w.nextSibling&&w.nextSibling.dataset,p)var U=p.dgst;p=U,s=Error(i(419)),s.stack="",s.digest=p,rs({value:s,source:null,stack:null}),t=oc(e,t,a)}else if(Xe||Fn(e,t,a,!1),p=(a&e.childLanes)!==0,Xe||p){if(p=Te,p!==null&&(s=Fu(p,a),s!==0&&s!==j.retryLane))throw j.retryLane=s,hn(e,s),yt(p,e,s),ac;$c(w)||Ki(),t=oc(e,t,a)}else $c(w)?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,ke=qt(w.nextSibling),st=t,fe=!0,Ta=null,Lt=!1,e!==null&&Xd(t,e),t=lc(t,s.children),t.flags|=4096);return t}return u?(za(),w=s.fallback,u=t.mode,j=e.child,U=j.sibling,s=sa(j,{mode:"hidden",children:s.children}),s.subtreeFlags=j.subtreeFlags&65011712,U!==null?w=sa(U,w):(w=fn(w,u,a,null),w.flags|=2),w.return=t,s.return=t,s.sibling=w,t.child=s,ps(null,s),s=t.child,w=e.child.memoizedState,w===null?w=sc(a):(u=w.cachePool,u!==null?(j=Ke._currentValue,u=u.parent!==j?{parent:j,pool:j}:u):u=eh(),w={baseLanes:w.baseLanes|a,cachePool:u}),s.memoizedState=w,s.childLanes=ic(e,p,a),t.memoizedState=rc,ps(e.child,s)):(Ma(t),a=e.child,e=a.sibling,a=sa(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function lc(e,t){return t=Li({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Li(e,t){return e=St(22,e,null,t),e.lanes=0,e}function oc(e,t,a){return xn(t,e.child,null,a),e=lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mf(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),So(e.return,t,a)}function cc(e,t,a,s,u,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:u,treeForkCount:d}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=s,p.tail=a,p.tailMode=u,p.treeForkCount=d)}function gf(e,t,a){var s=t.pendingProps,u=s.revealOrder,d=s.tail;s=s.children;var p=Ge.current,w=(p&2)!==0;if(w?(p=p&1|2,t.flags|=128):p&=1,me(Ge,p),lt(e,t,s,a),s=fe?ns:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mf(e,a,t);else if(e.tag===19)mf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&ji(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),cc(t,!1,u,a,d,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&ji(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}cc(t,!0,a,null,d,s);break;case"together":cc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function da(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),qa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Fn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=sa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=sa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function uc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&yi(e)))}function ty(e,t,a){switch(t.tag){case 3:$t(t,t.stateNode.containerInfo),Oa(t,Ke,e.memoizedState.cache),mn();break;case 27:case 5:Ca(t);break;case 4:$t(t,t.stateNode.containerInfo);break;case 10:Oa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Mo(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ma(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ff(e,t,a):(Ma(t),e=da(e,t,a),e!==null?e.sibling:null);Ma(t);break;case 19:var u=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Fn(e,t,a,!1),s=(a&t.childLanes)!==0),u){if(s)return gf(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),me(Ge,Ge.current),s)break;return null;case 22:return t.lanes=0,lf(e,t,a,t.pendingProps);case 24:Oa(t,Ke,e.memoizedState.cache)}return da(e,t,a)}function pf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Xe=!0;else{if(!uc(e,a)&&(t.flags&128)===0)return Xe=!1,ty(e,t,a);Xe=(e.flags&131072)!==0}else Xe=!1,fe&&(t.flags&1048576)!==0&&Qd(t,ns,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=vn(t.elementType),t.type=e,typeof e=="function")go(e)?(s=_n(e,s),t.tag=1,t=df(null,t,e,s,a)):(t.tag=0,t=nc(null,t,e,s,a));else{if(e!=null){var u=e.$$typeof;if(u===V){t.tag=11,t=nf(null,t,e,s,a);break e}else if(u===Z){t.tag=14,t=rf(null,t,e,s,a);break e}}throw t=Re(e)||e,Error(i(306,t,""))}}return t;case 0:return nc(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,u=_n(s,t.pendingProps),df(e,t,s,u,a);case 3:e:{if($t(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var d=t.memoizedState;u=d.element,Ro(e,t),ds(t,s,null,a);var p=t.memoizedState;if(s=p.cache,Oa(t,Ke,s),s!==d.cache&&Co(t,[Ke],a,!0),us(),s=p.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=hf(e,t,s,a);break e}else if(s!==u){u=Dt(Error(i(424)),t),rs(u),t=hf(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ke=qt(e.firstChild),st=t,fe=!0,Ta=null,Lt=!0,a=ih(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mn(),s===u){t=da(e,t,a);break e}lt(e,t,s,a)}t=t.child}return t;case 26:return zi(e,t),e===null?(a=Em(t.type,null,t.pendingProps,null))?t.memoizedState=a:fe||(a=t.type,e=t.pendingProps,s=Wi(Rt.current).createElement(a),s[rt]=t,s[dt]=e,ot(s,a,e),tt(s),t.stateNode=s):t.memoizedState=Em(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ca(t),e===null&&fe&&(s=t.stateNode=Cm(t.type,t.pendingProps,Rt.current),st=t,Lt=!0,u=ke,Pa(t.type)?(Vc=u,ke=qt(s.firstChild)):ke=u),lt(e,t,t.pendingProps.children,a),zi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&fe&&((u=s=ke)&&(s=Oy(s,t.type,t.pendingProps,Lt),s!==null?(t.stateNode=s,st=t,ke=qt(s.firstChild),Lt=!1,u=!0):u=!1),u||Ra(t)),Ca(t),u=t.type,d=t.pendingProps,p=e!==null?e.memoizedProps:null,s=d.children,Bc(u,d)?s=null:p!==null&&Bc(u,p)&&(t.flags|=32),t.memoizedState!==null&&(u=Lo(e,t,K0,null,null,a),Os._currentValue=u),zi(e,t),lt(e,t,s,a),t.child;case 6:return e===null&&fe&&((e=a=ke)&&(a=ky(a,t.pendingProps,Lt),a!==null?(t.stateNode=a,st=t,ke=null,e=!0):e=!1),e||Ra(t)),null;case 13:return ff(e,t,a);case 4:return $t(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=xn(t,null,s,a):lt(e,t,s,a),t.child;case 11:return nf(e,t,t.type,t.pendingProps,a);case 7:return lt(e,t,t.pendingProps,a),t.child;case 8:return lt(e,t,t.pendingProps.children,a),t.child;case 12:return lt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,Oa(t,t.type,s.value),lt(e,t,s.children,a),t.child;case 9:return u=t.type._context,s=t.pendingProps.children,pn(t),u=it(u),s=s(u),t.flags|=1,lt(e,t,s,a),t.child;case 14:return rf(e,t,t.type,t.pendingProps,a);case 15:return sf(e,t,t.type,t.pendingProps,a);case 19:return gf(e,t,a);case 31:return ey(e,t,a);case 22:return lf(e,t,a,t.pendingProps);case 24:return pn(t),s=it(Ke),e===null?(u=Eo(),u===null&&(u=Te,d=jo(),u.pooledCache=d,d.refCount++,d!==null&&(u.pooledCacheLanes|=a),u=d),t.memoizedState={parent:s,cache:u},To(t),Oa(t,Ke,u)):((e.lanes&a)!==0&&(Ro(e,t),ds(t,null,null,a),us()),u=e.memoizedState,d=t.memoizedState,u.parent!==s?(u={parent:s,cache:s},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Oa(t,Ke,s)):(s=d.cache,Oa(t,Ke,s),s!==u.cache&&Co(t,[Ke],a,!0))),lt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ha(e){e.flags|=4}function dc(e,t,a,s,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Vf())e.flags|=8192;else throw bn=wi,No}else e.flags&=-16777217}function yf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!km(t))if(Vf())e.flags|=8192;else throw bn=wi,No}function Bi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Iu():536870912,e.lanes|=t,ur|=t)}function ys(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,s|=u.subtreeFlags&65011712,s|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function ay(e,t,a){var s=t.pendingProps;switch(bo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Ue(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),oa(Ke),Gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Zn(t)?ha(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,wo())),Ue(t),null;case 26:var u=t.type,d=t.memoizedState;return e===null?(ha(t),d!==null?(Ue(t),yf(t,d)):(Ue(t),dc(t,u,null,s,a))):d?d!==e.memoizedState?(ha(t),Ue(t),yf(t,d)):(Ue(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ha(t),Ue(t),dc(t,u,e,s,a)),null;case 27:if(W(t),a=Rt.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ha(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}e=qe.current,Zn(t)?Id(t):(e=Cm(u,s,a),t.stateNode=e,ha(t))}return Ue(t),null;case 5:if(W(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ha(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}if(d=qe.current,Zn(t))Id(t);else{var p=Wi(Rt.current);switch(d){case 1:d=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:d=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":d=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":d=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":d=p.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof s.is=="string"?p.createElement("select",{is:s.is}):p.createElement("select"),s.multiple?d.multiple=!0:s.size&&(d.size=s.size);break;default:d=typeof s.is=="string"?p.createElement(u,{is:s.is}):p.createElement(u)}}d[rt]=t,d[dt]=s;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)d.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=d;e:switch(ot(d,u,s),u){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ha(t)}}return Ue(t),dc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ha(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=Rt.current,Zn(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,u=st,u!==null)switch(u.tag){case 27:case 5:s=u.memoizedProps}e[rt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||fm(e.nodeValue,a)),e||Ra(t,!0)}else e=Wi(e).createTextNode(s),e[rt]=t,t.stateNode=e}return Ue(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Zn(t),a!==null){if(e===null){if(!s)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[rt]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),e=!1}else a=wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(jt(t),t):(jt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Ue(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Zn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(i(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[rt]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),u=!1}else u=wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(jt(t),t):(jt(t),null)}return jt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,u=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(u=s.alternate.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==u&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Bi(t,t.updateQueue),Ue(t),null);case 4:return Gt(),e===null&&Uc(t.stateNode.containerInfo),Ue(t),null;case 10:return oa(t.type),Ue(t),null;case 19:if(Ne(Ge),s=t.memoizedState,s===null)return Ue(t),null;if(u=(t.flags&128)!==0,d=s.rendering,d===null)if(u)ys(s,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=ji(e),d!==null){for(t.flags|=128,ys(s,!1),e=d.updateQueue,t.updateQueue=e,Bi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Pd(a,e),a=a.sibling;return me(Ge,Ge.current&1|2),fe&&ia(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&bt()>Vi&&(t.flags|=128,u=!0,ys(s,!1),t.lanes=4194304)}else{if(!u)if(e=ji(d),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Bi(t,e),ys(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!fe)return Ue(t),null}else 2*bt()-s.renderingStartTime>Vi&&a!==536870912&&(t.flags|=128,u=!0,ys(s,!1),t.lanes=4194304);s.isBackwards?(d.sibling=t.child,t.child=d):(e=s.last,e!==null?e.sibling=d:t.child=d,s.last=d)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=bt(),e.sibling=null,a=Ge.current,me(Ge,u?a&1|2:a&1),fe&&ia(t,s.treeForkCount),e):(Ue(t),null);case 22:case 23:return jt(t),Do(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),a=t.updateQueue,a!==null&&Bi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Ne(yn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),oa(Ke),Ue(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function ny(e,t){switch(bo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oa(Ke),Gt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return W(t),null;case 31:if(t.memoizedState!==null){if(jt(t),t.alternate===null)throw Error(i(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Ge),null;case 4:return Gt(),null;case 10:return oa(t.type),null;case 22:case 23:return jt(t),Do(),e!==null&&Ne(yn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return oa(Ke),null;case 25:return null;default:return null}}function vf(e,t){switch(bo(t),t.tag){case 3:oa(Ke),Gt();break;case 26:case 27:case 5:W(t);break;case 4:Gt();break;case 31:t.memoizedState!==null&&jt(t);break;case 13:jt(t);break;case 19:Ne(Ge);break;case 10:oa(t.type);break;case 22:case 23:jt(t),Do(),e!==null&&Ne(yn);break;case 24:oa(Ke)}}function vs(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var u=s.next;a=u;do{if((a.tag&e)===e){s=void 0;var d=a.create,p=a.inst;s=d(),p.destroy=s}a=a.next}while(a!==u)}}catch(w){Ce(t,t.return,w)}}function La(e,t,a){try{var s=t.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var d=u.next;s=d;do{if((s.tag&e)===e){var p=s.inst,w=p.destroy;if(w!==void 0){p.destroy=void 0,u=t;var j=a,U=w;try{U()}catch(L){Ce(u,j,L)}}}s=s.next}while(s!==d)}}catch(L){Ce(t,t.return,L)}}function bf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{oh(t,a)}catch(s){Ce(e,e.return,s)}}}function xf(e,t,a){a.props=_n(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Ce(e,t,s)}}function bs(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(u){Ce(e,t,u)}}function Wt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(u){Ce(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Ce(e,t,u)}else a.current=null}function wf(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(u){Ce(e,e.return,u)}}function hc(e,t,a){try{var s=e.stateNode;jy(s,e.type,a,t),s[dt]=t}catch(u){Ce(e,e.return,u)}}function _f(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pa(e.type)||e.tag===4}function fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mc(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=na));else if(s!==4&&(s===27&&Pa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(mc(e,t,a),e=e.sibling;e!==null;)mc(e,t,a),e=e.sibling}function qi(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Pa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(qi(e,t,a),e=e.sibling;e!==null;)qi(e,t,a),e=e.sibling}function Sf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);ot(t,s,a),t[rt]=e,t[dt]=a}catch(d){Ce(e,e.return,d)}}var fa=!1,Ie=!1,gc=!1,Cf=typeof WeakSet=="function"?WeakSet:Set,at=null;function ry(e,t){if(e=e.containerInfo,zc=il,e=Md(e),lo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var u=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var p=0,w=-1,j=-1,U=0,L=0,H=e,D=null;t:for(;;){for(var M;H!==a||u!==0&&H.nodeType!==3||(w=p+u),H!==d||s!==0&&H.nodeType!==3||(j=p+s),H.nodeType===3&&(p+=H.nodeValue.length),(M=H.firstChild)!==null;)D=H,H=M;for(;;){if(H===e)break t;if(D===a&&++U===u&&(w=p),D===d&&++L===s&&(j=p),(M=H.nextSibling)!==null)break;H=D,D=H.parentNode}H=M}a=w===-1||j===-1?null:{start:w,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:e,selectionRange:a},il=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){switch(t=at,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=t,u=d.memoizedProps,d=d.memoizedState,s=a.stateNode;try{var Q=_n(a.type,u);e=s.getSnapshotBeforeUpdate(Q,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(te){Ce(a,a.return,te)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Hc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Hc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}}function jf(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:ga(e,a),s&4&&vs(5,a);break;case 1:if(ga(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(p){Ce(a,a.return,p)}else{var u=_n(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Ce(a,a.return,p)}}s&64&&bf(a),s&512&&bs(a,a.return);break;case 3:if(ga(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{oh(e,t)}catch(p){Ce(a,a.return,p)}}break;case 27:t===null&&s&4&&Sf(a);case 26:case 5:ga(e,a),t===null&&s&4&&wf(a),s&512&&bs(a,a.return);break;case 12:ga(e,a);break;case 31:ga(e,a),s&4&&Nf(e,a);break;case 13:ga(e,a),s&4&&Tf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=fy.bind(null,a),Uy(e,a))));break;case 22:if(s=a.memoizedState!==null||fa,!s){t=t!==null&&t.memoizedState!==null||Ie,u=fa;var d=Ie;fa=s,(Ie=t)&&!d?pa(e,a,(a.subtreeFlags&8772)!==0):ga(e,a),fa=u,Ie=d}break;case 30:break;default:ga(e,a)}}function Af(e){var t=e.alternate;t!==null&&(e.alternate=null,Af(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Pl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Me=null,ft=!1;function ma(e,t,a){for(a=a.child;a!==null;)Ef(e,t,a),a=a.sibling}function Ef(e,t,a){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Vr,a)}catch{}switch(a.tag){case 26:Ie||Wt(a,t),ma(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ie||Wt(a,t);var s=Me,u=ft;Pa(a.type)&&(Me=a.stateNode,ft=!1),ma(e,t,a),Ns(a.stateNode),Me=s,ft=u;break;case 5:Ie||Wt(a,t);case 6:if(s=Me,u=ft,Me=null,ma(e,t,a),Me=s,ft=u,Me!==null)if(ft)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(a.stateNode)}catch(d){Ce(a,t,d)}else try{Me.removeChild(a.stateNode)}catch(d){Ce(a,t,d)}break;case 18:Me!==null&&(ft?(e=Me,bm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),vr(e)):bm(Me,a.stateNode));break;case 4:s=Me,u=ft,Me=a.stateNode.containerInfo,ft=!0,ma(e,t,a),Me=s,ft=u;break;case 0:case 11:case 14:case 15:La(2,a,t),Ie||La(4,a,t),ma(e,t,a);break;case 1:Ie||(Wt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&xf(a,t,s)),ma(e,t,a);break;case 21:ma(e,t,a);break;case 22:Ie=(s=Ie)||a.memoizedState!==null,ma(e,t,a),Ie=s;break;default:ma(e,t,a)}}function Nf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vr(e)}catch(a){Ce(t,t.return,a)}}}function Tf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vr(e)}catch(a){Ce(t,t.return,a)}}function sy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cf),t;default:throw Error(i(435,e.tag))}}function Hi(e,t){var a=sy(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var u=my.bind(null,e,s);s.then(u,u)}})}function mt(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var u=a[s],d=e,p=t,w=p;e:for(;w!==null;){switch(w.tag){case 27:if(Pa(w.type)){Me=w.stateNode,ft=!1;break e}break;case 5:Me=w.stateNode,ft=!1;break e;case 3:case 4:Me=w.stateNode.containerInfo,ft=!0;break e}w=w.return}if(Me===null)throw Error(i(160));Ef(d,p,u),Me=null,ft=!1,d=u.alternate,d!==null&&(d.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Rf(t,e),t=t.sibling}var Pt=null;function Rf(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mt(t,e),gt(e),s&4&&(La(3,e,e.return),vs(3,e),La(5,e,e.return));break;case 1:mt(t,e),gt(e),s&512&&(Ie||a===null||Wt(a,a.return)),s&64&&fa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var u=Pt;if(mt(t,e),gt(e),s&512&&(Ie||a===null||Wt(a,a.return)),s&4){var d=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(s){case"title":d=u.getElementsByTagName("title")[0],(!d||d[Kr]||d[rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=u.createElement(s),u.head.insertBefore(d,u.querySelector("head > title"))),ot(d,s,a),d[rt]=e,tt(d),s=d;break e;case"link":var p=Rm("link","href",u).get(s+(a.href||""));if(p){for(var w=0;w<p.length;w++)if(d=p[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(w,1);break t}}d=u.createElement(s),ot(d,s,a),u.head.appendChild(d);break;case"meta":if(p=Rm("meta","content",u).get(s+(a.content||""))){for(w=0;w<p.length;w++)if(d=p[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(w,1);break t}}d=u.createElement(s),ot(d,s,a),u.head.appendChild(d);break;default:throw Error(i(468,s))}d[rt]=e,tt(d),s=d}e.stateNode=s}else Om(u,e.type,e.stateNode);else e.stateNode=Tm(u,s,e.memoizedProps);else d!==s?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,s===null?Om(u,e.type,e.stateNode):Tm(u,s,e.memoizedProps)):s===null&&e.stateNode!==null&&hc(e,e.memoizedProps,a.memoizedProps)}break;case 27:mt(t,e),gt(e),s&512&&(Ie||a===null||Wt(a,a.return)),a!==null&&s&4&&hc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(mt(t,e),gt(e),s&512&&(Ie||a===null||Wt(a,a.return)),e.flags&32){u=e.stateNode;try{$n(u,"")}catch(Q){Ce(e,e.return,Q)}}s&4&&e.stateNode!=null&&(u=e.memoizedProps,hc(e,u,a!==null?a.memoizedProps:u)),s&1024&&(gc=!0);break;case 6:if(mt(t,e),gt(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(Q){Ce(e,e.return,Q)}}break;case 3:if(al=null,u=Pt,Pt=el(t.containerInfo),mt(t,e),Pt=u,gt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{vr(t.containerInfo)}catch(Q){Ce(e,e.return,Q)}gc&&(gc=!1,Of(e));break;case 4:s=Pt,Pt=el(e.stateNode.containerInfo),mt(t,e),gt(e),Pt=s;break;case 12:mt(t,e),gt(e);break;case 31:mt(t,e),gt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Hi(e,s)));break;case 13:mt(t,e),gt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gi=bt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Hi(e,s)));break;case 22:u=e.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,U=fa,L=Ie;if(fa=U||u,Ie=L||j,mt(t,e),Ie=L,fa=U,gt(e),s&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||j||fa||Ie||Sn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){j=a=t;try{if(d=j.stateNode,u)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{w=j.stateNode;var H=j.memoizedProps.style,D=H!=null&&H.hasOwnProperty("display")?H.display:null;w.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(Q){Ce(j,j.return,Q)}}}else if(t.tag===6){if(a===null){j=t;try{j.stateNode.nodeValue=u?"":j.memoizedProps}catch(Q){Ce(j,j.return,Q)}}}else if(t.tag===18){if(a===null){j=t;try{var M=j.stateNode;u?xm(M,!0):xm(j.stateNode,!1)}catch(Q){Ce(j,j.return,Q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Hi(e,a))));break;case 19:mt(t,e),gt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Hi(e,s)));break;case 30:break;case 21:break;default:mt(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(_f(s)){a=s;break}s=s.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var u=a.stateNode,d=fc(e);qi(e,d,u);break;case 5:var p=a.stateNode;a.flags&32&&($n(p,""),a.flags&=-33);var w=fc(e);qi(e,w,p);break;case 3:case 4:var j=a.stateNode.containerInfo,U=fc(e);mc(e,U,j);break;default:throw Error(i(161))}}catch(L){Ce(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Of(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Of(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ga(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)jf(e,t.alternate,t),t=t.sibling}function Sn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:La(4,t,t.return),Sn(t);break;case 1:Wt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&xf(t,t.return,a),Sn(t);break;case 27:Ns(t.stateNode);case 26:case 5:Wt(t,t.return),Sn(t);break;case 22:t.memoizedState===null&&Sn(t);break;case 30:Sn(t);break;default:Sn(t)}e=e.sibling}}function pa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,u=e,d=t,p=d.flags;switch(d.tag){case 0:case 11:case 15:pa(u,d,a),vs(4,d);break;case 1:if(pa(u,d,a),s=d,u=s.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(U){Ce(s,s.return,U)}if(s=d,u=s.updateQueue,u!==null){var w=s.stateNode;try{var j=u.shared.hiddenCallbacks;if(j!==null)for(u.shared.hiddenCallbacks=null,u=0;u<j.length;u++)lh(j[u],w)}catch(U){Ce(s,s.return,U)}}a&&p&64&&bf(d),bs(d,d.return);break;case 27:Sf(d);case 26:case 5:pa(u,d,a),a&&s===null&&p&4&&wf(d),bs(d,d.return);break;case 12:pa(u,d,a);break;case 31:pa(u,d,a),a&&p&4&&Nf(u,d);break;case 13:pa(u,d,a),a&&p&4&&Tf(u,d);break;case 22:d.memoizedState===null&&pa(u,d,a),bs(d,d.return);break;case 30:break;default:pa(u,d,a)}t=t.sibling}}function pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ss(a))}function yc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ss(e))}function Yt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kf(e,t,a,s),t=t.sibling}function kf(e,t,a,s){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Yt(e,t,a,s),u&2048&&vs(9,t);break;case 1:Yt(e,t,a,s);break;case 3:Yt(e,t,a,s),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ss(e)));break;case 12:if(u&2048){Yt(e,t,a,s),e=t.stateNode;try{var d=t.memoizedProps,p=d.id,w=d.onPostCommit;typeof w=="function"&&w(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Ce(t,t.return,j)}}else Yt(e,t,a,s);break;case 31:Yt(e,t,a,s);break;case 13:Yt(e,t,a,s);break;case 23:break;case 22:d=t.stateNode,p=t.alternate,t.memoizedState!==null?d._visibility&2?Yt(e,t,a,s):xs(e,t):d._visibility&2?Yt(e,t,a,s):(d._visibility|=2,lr(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),u&2048&&pc(p,t);break;case 24:Yt(e,t,a,s),u&2048&&yc(t.alternate,t);break;default:Yt(e,t,a,s)}}function lr(e,t,a,s,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,p=t,w=a,j=s,U=p.flags;switch(p.tag){case 0:case 11:case 15:lr(d,p,w,j,u),vs(8,p);break;case 23:break;case 22:var L=p.stateNode;p.memoizedState!==null?L._visibility&2?lr(d,p,w,j,u):xs(d,p):(L._visibility|=2,lr(d,p,w,j,u)),u&&U&2048&&pc(p.alternate,p);break;case 24:lr(d,p,w,j,u),u&&U&2048&&yc(p.alternate,p);break;default:lr(d,p,w,j,u)}t=t.sibling}}function xs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,u=s.flags;switch(s.tag){case 22:xs(a,s),u&2048&&pc(s.alternate,s);break;case 24:xs(a,s),u&2048&&yc(s.alternate,s);break;default:xs(a,s)}t=t.sibling}}var ws=8192;function or(e,t,a){if(e.subtreeFlags&ws)for(e=e.child;e!==null;)Uf(e,t,a),e=e.sibling}function Uf(e,t,a){switch(e.tag){case 26:or(e,t,a),e.flags&ws&&e.memoizedState!==null&&Yy(a,Pt,e.memoizedState,e.memoizedProps);break;case 5:or(e,t,a);break;case 3:case 4:var s=Pt;Pt=el(e.stateNode.containerInfo),or(e,t,a),Pt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=ws,ws=16777216,or(e,t,a),ws=s):or(e,t,a));break;default:or(e,t,a)}}function Df(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function _s(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];at=s,zf(s,e)}Df(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mf(e),e=e.sibling}function Mf(e){switch(e.tag){case 0:case 11:case 15:_s(e),e.flags&2048&&La(9,e,e.return);break;case 3:_s(e);break;case 12:_s(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,$i(e)):_s(e);break;default:_s(e)}}function $i(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];at=s,zf(s,e)}Df(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:La(8,t,t.return),$i(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,$i(t));break;default:$i(t)}e=e.sibling}}function zf(e,t){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:La(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ss(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,at=s;else e:for(a=e;at!==null;){s=at;var u=s.sibling,d=s.return;if(Af(s),s===a){at=null;break e}if(u!==null){u.return=d,at=u;break e}at=d}}}var iy={getCacheForType:function(e){var t=it(Ke),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return it(Ke).controller.signal}},ly=typeof WeakMap=="function"?WeakMap:Map,xe=0,Te=null,ce=null,de=0,Se=0,At=null,Ba=!1,cr=!1,vc=!1,ya=0,$e=0,qa=0,Cn=0,bc=0,Et=0,ur=0,Ss=null,pt=null,xc=!1,Gi=0,Lf=0,Vi=1/0,Pi=null,Ha=null,We=0,$a=null,dr=null,va=0,wc=0,_c=null,Bf=null,Cs=0,Sc=null;function Nt(){return(xe&2)!==0&&de!==0?de&-de:B.T!==null?Tc():Wu()}function qf(){if(Et===0)if((de&536870912)===0||fe){var e=Fs;Fs<<=1,(Fs&3932160)===0&&(Fs=262144),Et=e}else Et=536870912;return e=Ct.current,e!==null&&(e.flags|=32),Et}function yt(e,t,a){(e===Te&&(Se===2||Se===9)||e.cancelPendingCommit!==null)&&(hr(e,0),Ga(e,de,Et,!1)),Yr(e,a),((xe&2)===0||e!==Te)&&(e===Te&&((xe&2)===0&&(Cn|=a),$e===4&&Ga(e,de,Et,!1)),ea(e))}function Hf(e,t,a){if((xe&6)!==0)throw Error(i(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Pr(e,t),u=s?uy(e,t):jc(e,t,!0),d=s;do{if(u===0){cr&&!s&&Ga(e,t,0,!1);break}else{if(a=e.current.alternate,d&&!oy(a)){u=jc(e,t,!1),d=!1;continue}if(u===2){if(d=t,e.errorRecoveryDisabledLanes&d)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var w=e;u=Ss;var j=w.current.memoizedState.isDehydrated;if(j&&(hr(w,p).flags|=256),p=jc(w,p,!1),p!==2){if(vc&&!j){w.errorRecoveryDisabledLanes|=d,Cn|=d,u=4;break e}d=pt,pt=u,d!==null&&(pt===null?pt=d:pt.push.apply(pt,d))}u=p}if(d=!1,u!==2)continue}}if(u===1){hr(e,0),Ga(e,t,0,!0);break}e:{switch(s=e,d=u,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ga(s,t,Et,!Ba);break e;case 2:pt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(u=Gi+300-bt(),10<u)){if(Ga(s,t,Et,!Ba),ei(s,0,!0)!==0)break e;va=t,s.timeoutHandle=ym($f.bind(null,s,a,pt,Pi,xc,t,Et,Cn,ur,Ba,d,"Throttled",-0,0),u);break e}$f(s,a,pt,Pi,xc,t,Et,Cn,ur,Ba,d,null,-0,0)}}break}while(!0);ea(e)}function $f(e,t,a,s,u,d,p,w,j,U,L,H,D,M){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:na},Uf(t,d,H);var Q=(d&62914560)===d?Gi-bt():(d&4194048)===d?Lf-bt():0;if(Q=Ky(H,Q),Q!==null){va=d,e.cancelPendingCommit=Q(If.bind(null,e,t,d,a,s,u,p,w,j,L,H,null,D,M)),Ga(e,d,p,!U);return}}If(e,t,d,a,s,u,p,w,j)}function oy(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var u=a[s],d=u.getSnapshot;u=u.value;try{if(!_t(d(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ga(e,t,a,s){t&=~bc,t&=~Cn,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var u=t;0<u;){var d=31-wt(u),p=1<<d;s[d]=-1,u&=~p}a!==0&&Ju(e,a,t)}function Yi(){return(xe&6)===0?(js(0),!1):!0}function Cc(){if(ce!==null){if(Se===0)var e=ce.return;else e=ce,la=gn=null,Ho(e),ar=null,ls=0,e=ce;for(;e!==null;)vf(e.alternate,e),e=e.return;ce=null}}function hr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ny(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),va=0,Cc(),Te=e,ce=a=sa(e.current,null),de=t,Se=0,At=null,Ba=!1,cr=Pr(e,t),vc=!1,ur=Et=bc=Cn=qa=$e=0,pt=Ss=null,xc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var u=31-wt(s),d=1<<u;t|=e[u],s&=~d}return ya=t,hi(),a}function Gf(e,t){ie=null,B.H=gs,t===tr||t===xi?(t=nh(),Se=3):t===No?(t=nh(),Se=4):Se=t===ac?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,At=t,ce===null&&($e=1,Di(e,Dt(t,e.current)))}function Vf(){var e=Ct.current;return e===null?!0:(de&4194048)===de?Bt===null:(de&62914560)===de||(de&536870912)!==0?e===Bt:!1}function Pf(){var e=B.H;return B.H=gs,e===null?gs:e}function Yf(){var e=B.A;return B.A=iy,e}function Ki(){$e=4,Ba||(de&4194048)!==de&&Ct.current!==null||(cr=!0),(qa&134217727)===0&&(Cn&134217727)===0||Te===null||Ga(Te,de,Et,!1)}function jc(e,t,a){var s=xe;xe|=2;var u=Pf(),d=Yf();(Te!==e||de!==t)&&(Pi=null,hr(e,t)),t=!1;var p=$e;e:do try{if(Se!==0&&ce!==null){var w=ce,j=At;switch(Se){case 8:Cc(),p=6;break e;case 3:case 2:case 9:case 6:Ct.current===null&&(t=!0);var U=Se;if(Se=0,At=null,fr(e,w,j,U),a&&cr){p=0;break e}break;default:U=Se,Se=0,At=null,fr(e,w,j,U)}}cy(),p=$e;break}catch(L){Gf(e,L)}while(!0);return t&&e.shellSuspendCounter++,la=gn=null,xe=s,B.H=u,B.A=d,ce===null&&(Te=null,de=0,hi()),p}function cy(){for(;ce!==null;)Kf(ce)}function uy(e,t){var a=xe;xe|=2;var s=Pf(),u=Yf();Te!==e||de!==t?(Pi=null,Vi=bt()+500,hr(e,t)):cr=Pr(e,t);e:do try{if(Se!==0&&ce!==null){t=ce;var d=At;t:switch(Se){case 1:Se=0,At=null,fr(e,t,d,1);break;case 2:case 9:if(th(d)){Se=0,At=null,Qf(t);break}t=function(){Se!==2&&Se!==9||Te!==e||(Se=7),ea(e)},d.then(t,t);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:th(d)?(Se=0,At=null,Qf(t)):(Se=0,At=null,fr(e,t,d,7));break;case 5:var p=null;switch(ce.tag){case 26:p=ce.memoizedState;case 5:case 27:var w=ce;if(p?km(p):w.stateNode.complete){Se=0,At=null;var j=w.sibling;if(j!==null)ce=j;else{var U=w.return;U!==null?(ce=U,Qi(U)):ce=null}break t}}Se=0,At=null,fr(e,t,d,5);break;case 6:Se=0,At=null,fr(e,t,d,6);break;case 8:Cc(),$e=6;break e;default:throw Error(i(462))}}dy();break}catch(L){Gf(e,L)}while(!0);return la=gn=null,B.H=s,B.A=u,xe=a,ce!==null?0:(Te=null,de=0,hi(),$e)}function dy(){for(;ce!==null&&!Dp();)Kf(ce)}function Kf(e){var t=pf(e.alternate,e,ya);e.memoizedProps=e.pendingProps,t===null?Qi(e):ce=t}function Qf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=uf(a,t,t.pendingProps,t.type,void 0,de);break;case 11:t=uf(a,t,t.pendingProps,t.type.render,t.ref,de);break;case 5:Ho(t);default:vf(a,t),t=ce=Pd(t,ya),t=pf(a,t,ya)}e.memoizedProps=e.pendingProps,t===null?Qi(e):ce=t}function fr(e,t,a,s){la=gn=null,Ho(t),ar=null,ls=0;var u=t.return;try{if(W0(e,u,t,a,de)){$e=1,Di(e,Dt(a,e.current)),ce=null;return}}catch(d){if(u!==null)throw ce=u,d;$e=1,Di(e,Dt(a,e.current)),ce=null;return}t.flags&32768?(fe||s===1?e=!0:cr||(de&536870912)!==0?e=!1:(Ba=e=!0,(s===2||s===9||s===3||s===6)&&(s=Ct.current,s!==null&&s.tag===13&&(s.flags|=16384))),Xf(t,e)):Qi(t)}function Qi(e){var t=e;do{if((t.flags&32768)!==0){Xf(t,Ba);return}e=t.return;var a=ay(t.alternate,t,ya);if(a!==null){ce=a;return}if(t=t.sibling,t!==null){ce=t;return}ce=t=e}while(t!==null);$e===0&&($e=5)}function Xf(e,t){do{var a=ny(e.alternate,e);if(a!==null){a.flags&=32767,ce=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ce=e;return}ce=e=a}while(e!==null);$e=6,ce=null}function If(e,t,a,s,u,d,p,w,j){e.cancelPendingCommit=null;do Xi();while(We!==0);if((xe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=fo,Pp(e,a,d,p,w,j),e===Te&&(ce=Te=null,de=0),dr=t,$a=e,va=a,wc=d,_c=u,Bf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,gy(Js,function(){return em(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=B.T,B.T=null,u=G.p,G.p=2,p=xe,xe|=4;try{ry(e,t,a)}finally{xe=p,G.p=u,B.T=s}}We=1,Jf(),Zf(),Ff()}}function Jf(){if(We===1){We=0;var e=$a,t=dr,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var s=G.p;G.p=2;var u=xe;xe|=4;try{Rf(t,e);var d=Lc,p=Md(e.containerInfo),w=d.focusedElem,j=d.selectionRange;if(p!==w&&w&&w.ownerDocument&&Dd(w.ownerDocument.documentElement,w)){if(j!==null&&lo(w)){var U=j.start,L=j.end;if(L===void 0&&(L=U),"selectionStart"in w)w.selectionStart=U,w.selectionEnd=Math.min(L,w.value.length);else{var H=w.ownerDocument||document,D=H&&H.defaultView||window;if(D.getSelection){var M=D.getSelection(),Q=w.textContent.length,te=Math.min(j.start,Q),Ee=j.end===void 0?te:Math.min(j.end,Q);!M.extend&&te>Ee&&(p=Ee,Ee=te,te=p);var N=Ud(w,te),A=Ud(w,Ee);if(N&&A&&(M.rangeCount!==1||M.anchorNode!==N.node||M.anchorOffset!==N.offset||M.focusNode!==A.node||M.focusOffset!==A.offset)){var k=H.createRange();k.setStart(N.node,N.offset),M.removeAllRanges(),te>Ee?(M.addRange(k),M.extend(A.node,A.offset)):(k.setEnd(A.node,A.offset),M.addRange(k))}}}}for(H=[],M=w;M=M.parentNode;)M.nodeType===1&&H.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<H.length;w++){var q=H[w];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}il=!!zc,Lc=zc=null}finally{xe=u,G.p=s,B.T=a}}e.current=t,We=2}}function Zf(){if(We===2){We=0;var e=$a,t=dr,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var s=G.p;G.p=2;var u=xe;xe|=4;try{jf(e,t.alternate,t)}finally{xe=u,G.p=s,B.T=a}}We=3}}function Ff(){if(We===4||We===3){We=0,Mp();var e=$a,t=dr,a=va,s=Bf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?We=5:(We=0,dr=$a=null,Wf(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ha=null),Gl(a),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Vr,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=B.T,u=G.p,G.p=2,B.T=null;try{for(var d=e.onRecoverableError,p=0;p<s.length;p++){var w=s[p];d(w.value,{componentStack:w.stack})}}finally{B.T=t,G.p=u}}(va&3)!==0&&Xi(),ea(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===Sc?Cs++:(Cs=0,Sc=e):Cs=0,js(0)}}function Wf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ss(t)))}function Xi(){return Jf(),Zf(),Ff(),em()}function em(){if(We!==5)return!1;var e=$a,t=wc;wc=0;var a=Gl(va),s=B.T,u=G.p;try{G.p=32>a?32:a,B.T=null,a=_c,_c=null;var d=$a,p=va;if(We=0,dr=$a=null,va=0,(xe&6)!==0)throw Error(i(331));var w=xe;if(xe|=4,Mf(d.current),kf(d,d.current,p,a),xe=w,js(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Vr,d)}catch{}return!0}finally{G.p=u,B.T=s,Wf(e,t)}}function tm(e,t,a){t=Dt(a,t),t=tc(e.stateNode,t,2),e=Da(e,t,2),e!==null&&(Yr(e,2),ea(e))}function Ce(e,t,a){if(e.tag===3)tm(e,e,a);else for(;t!==null;){if(t.tag===3){tm(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ha===null||!Ha.has(s))){e=Dt(a,e),a=tf(2),s=Da(t,a,2),s!==null&&(af(a,s,t,e),Yr(s,2),ea(s));break}}t=t.return}}function Ac(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new ly;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(a)||(vc=!0,u.add(a),e=hy.bind(null,e,t,a),t.then(e,e))}function hy(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Te===e&&(de&a)===a&&($e===4||$e===3&&(de&62914560)===de&&300>bt()-Gi?(xe&2)===0&&hr(e,0):bc|=a,ur===de&&(ur=0)),ea(e)}function am(e,t){t===0&&(t=Iu()),e=hn(e,t),e!==null&&(Yr(e,t),ea(e))}function fy(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),am(e,a)}function my(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),am(e,a)}function gy(e,t){return Bl(e,t)}var Ii=null,mr=null,Ec=!1,Ji=!1,Nc=!1,Va=0;function ea(e){e!==mr&&e.next===null&&(mr===null?Ii=mr=e:mr=mr.next=e),Ji=!0,Ec||(Ec=!0,yy())}function js(e,t){if(!Nc&&Ji){Nc=!0;do for(var a=!1,s=Ii;s!==null;){if(e!==0){var u=s.pendingLanes;if(u===0)var d=0;else{var p=s.suspendedLanes,w=s.pingedLanes;d=(1<<31-wt(42|e)+1)-1,d&=u&~(p&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,im(s,d))}else d=de,d=ei(s,s===Te?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||Pr(s,d)||(a=!0,im(s,d));s=s.next}while(a);Nc=!1}}function py(){nm()}function nm(){Ji=Ec=!1;var e=0;Va!==0&&Ey()&&(e=Va);for(var t=bt(),a=null,s=Ii;s!==null;){var u=s.next,d=rm(s,t);d===0?(s.next=null,a===null?Ii=u:a.next=u,u===null&&(mr=a)):(a=s,(e!==0||(d&3)!==0)&&(Ji=!0)),s=u}We!==0&&We!==5||js(e),Va!==0&&(Va=0)}function rm(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var p=31-wt(d),w=1<<p,j=u[p];j===-1?((w&a)===0||(w&s)!==0)&&(u[p]=Vp(w,t)):j<=t&&(e.expiredLanes|=w),d&=~w}if(t=Te,a=de,a=ei(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Se===2||Se===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&ql(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Pr(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&ql(s),Gl(a)){case 2:case 8:a=Qu;break;case 32:a=Js;break;case 268435456:a=Xu;break;default:a=Js}return s=sm.bind(null,e),a=Bl(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&ql(s),e.callbackPriority=2,e.callbackNode=null,2}function sm(e,t){if(We!==0&&We!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Xi()&&e.callbackNode!==a)return null;var s=de;return s=ei(e,e===Te?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Hf(e,s,t),rm(e,bt()),e.callbackNode!=null&&e.callbackNode===a?sm.bind(null,e):null)}function im(e,t){if(Xi())return null;Hf(e,t,!0)}function yy(){Ty(function(){(xe&6)!==0?Bl(Ku,py):nm()})}function Tc(){if(Va===0){var e=Wn;e===0&&(e=Zs,Zs<<=1,(Zs&261888)===0&&(Zs=256)),Va=e}return Va}function lm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ri(""+e)}function om(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function vy(e,t,a,s,u){if(t==="submit"&&a&&a.stateNode===u){var d=lm((u[dt]||null).action),p=s.submitter;p&&(t=(t=p[dt]||null)?lm(t.formAction):p.getAttribute("formAction"),t!==null&&(d=t,p=null));var w=new oi("action","action",null,s,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Va!==0){var j=p?om(u,p):new FormData(u);Io(a,{pending:!0,data:j,method:u.method,action:d},null,j)}}else typeof d=="function"&&(w.preventDefault(),j=p?om(u,p):new FormData(u),Io(a,{pending:!0,data:j,method:u.method,action:d},d,j))},currentTarget:u}]})}}for(var Rc=0;Rc<ho.length;Rc++){var Oc=ho[Rc],by=Oc.toLowerCase(),xy=Oc[0].toUpperCase()+Oc.slice(1);Vt(by,"on"+xy)}Vt(Bd,"onAnimationEnd"),Vt(qd,"onAnimationIteration"),Vt(Hd,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(z0,"onTransitionRun"),Vt(L0,"onTransitionStart"),Vt(B0,"onTransitionCancel"),Vt($d,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),on("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),on("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),on("onBeforeInput",["compositionend","keypress","textInput","paste"]),on("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(As));function cm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],u=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var p=s.length-1;0<=p;p--){var w=s[p],j=w.instance,U=w.currentTarget;if(w=w.listener,j!==d&&u.isPropagationStopped())break e;d=w,u.currentTarget=U;try{d(u)}catch(L){di(L)}u.currentTarget=null,d=j}else for(p=0;p<s.length;p++){if(w=s[p],j=w.instance,U=w.currentTarget,w=w.listener,j!==d&&u.isPropagationStopped())break e;d=w,u.currentTarget=U;try{d(u)}catch(L){di(L)}u.currentTarget=null,d=j}}}}function ue(e,t){var a=t[Vl];a===void 0&&(a=t[Vl]=new Set);var s=e+"__bubble";a.has(s)||(um(t,e,2,!1),a.add(s))}function kc(e,t,a){var s=0;t&&(s|=4),um(a,e,s,t)}var Zi="_reactListening"+Math.random().toString(36).slice(2);function Uc(e){if(!e[Zi]){e[Zi]=!0,ad.forEach(function(a){a!=="selectionchange"&&(wy.has(a)||kc(a,!1,e),kc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zi]||(t[Zi]=!0,kc("selectionchange",!1,t))}}function um(e,t,a,s){switch(qm(t)){case 2:var u=Iy;break;case 8:u=Jy;break;default:u=Xc}a=u.bind(null,t,a,e),u=void 0,!Fl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Dc(e,t,a,s,u){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var p=s.tag;if(p===3||p===4){var w=s.stateNode.containerInfo;if(w===u)break;if(p===4)for(p=s.return;p!==null;){var j=p.tag;if((j===3||j===4)&&p.stateNode.containerInfo===u)return;p=p.return}for(;w!==null;){if(p=zn(w),p===null)return;if(j=p.tag,j===5||j===6||j===26||j===27){s=d=p;continue e}w=w.parentNode}}s=s.return}md(function(){var U=d,L=Jl(a),H=[];e:{var D=Gd.get(e);if(D!==void 0){var M=oi,Q=e;switch(e){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":M=m0;break;case"focusin":Q="focus",M=ao;break;case"focusout":Q="blur",M=ao;break;case"beforeblur":case"afterblur":M=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=a0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=y0;break;case Bd:case qd:case Hd:M=s0;break;case $d:M=b0;break;case"scroll":case"scrollend":M=e0;break;case"wheel":M=w0;break;case"copy":case"cut":case"paste":M=l0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=bd;break;case"toggle":case"beforetoggle":M=S0}var te=(t&4)!==0,Ee=!te&&(e==="scroll"||e==="scrollend"),N=te?D!==null?D+"Capture":null:D;te=[];for(var A=U,k;A!==null;){var q=A;if(k=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||k===null||N===null||(q=Xr(A,N),q!=null&&te.push(Es(A,q,k))),Ee)break;A=A.return}0<te.length&&(D=new M(D,Q,null,a,L),H.push({event:D,listeners:te}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",D&&a!==Il&&(Q=a.relatedTarget||a.fromElement)&&(zn(Q)||Q[Mn]))break e;if((M||D)&&(D=L.window===L?L:(D=L.ownerDocument)?D.defaultView||D.parentWindow:window,M?(Q=a.relatedTarget||a.toElement,M=U,Q=Q?zn(Q):null,Q!==null&&(Ee=c(Q),te=Q.tag,Q!==Ee||te!==5&&te!==27&&te!==6)&&(Q=null)):(M=null,Q=U),M!==Q)){if(te=yd,q="onMouseLeave",N="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(te=bd,q="onPointerLeave",N="onPointerEnter",A="pointer"),Ee=M==null?D:Qr(M),k=Q==null?D:Qr(Q),D=new te(q,A+"leave",M,a,L),D.target=Ee,D.relatedTarget=k,q=null,zn(L)===U&&(te=new te(N,A+"enter",Q,a,L),te.target=k,te.relatedTarget=Ee,q=te),Ee=q,M&&Q)t:{for(te=_y,N=M,A=Q,k=0,q=N;q;q=te(q))k++;q=0;for(var F=A;F;F=te(F))q++;for(;0<k-q;)N=te(N),k--;for(;0<q-k;)A=te(A),q--;for(;k--;){if(N===A||A!==null&&N===A.alternate){te=N;break t}N=te(N),A=te(A)}te=null}else te=null;M!==null&&dm(H,D,M,te,!1),Q!==null&&Ee!==null&&dm(H,Ee,Q,te,!0)}}e:{if(D=U?Qr(U):window,M=D.nodeName&&D.nodeName.toLowerCase(),M==="select"||M==="input"&&D.type==="file")var ye=Ed;else if(jd(D))if(Nd)ye=U0;else{ye=O0;var I=R0}else M=D.nodeName,!M||M.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?U&&Xl(U.elementType)&&(ye=Ed):ye=k0;if(ye&&(ye=ye(e,U))){Ad(H,ye,a,L);break e}I&&I(e,D,U),e==="focusout"&&U&&D.type==="number"&&U.memoizedProps.value!=null&&Ql(D,"number",D.value)}switch(I=U?Qr(U):window,e){case"focusin":(jd(I)||I.contentEditable==="true")&&(Yn=I,oo=U,as=null);break;case"focusout":as=oo=Yn=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,zd(H,a,L);break;case"selectionchange":if(M0)break;case"keydown":case"keyup":zd(H,a,L)}var le;if(ro)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Pn?Sd(e,a)&&(he="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(he="onCompositionStart");he&&(xd&&a.locale!=="ko"&&(Pn||he!=="onCompositionStart"?he==="onCompositionEnd"&&Pn&&(le=gd()):(Ea=L,Wl="value"in Ea?Ea.value:Ea.textContent,Pn=!0)),I=Fi(U,he),0<I.length&&(he=new vd(he,e,null,a,L),H.push({event:he,listeners:I}),le?he.data=le:(le=Cd(a),le!==null&&(he.data=le)))),(le=j0?A0(e,a):E0(e,a))&&(he=Fi(U,"onBeforeInput"),0<he.length&&(I=new vd("onBeforeInput","beforeinput",null,a,L),H.push({event:I,listeners:he}),I.data=le)),vy(H,e,U,a,L)}cm(H,t)})}function Es(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Fi(e,t){for(var a=t+"Capture",s=[];e!==null;){var u=e,d=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||d===null||(u=Xr(e,a),u!=null&&s.unshift(Es(e,u,d)),u=Xr(e,t),u!=null&&s.push(Es(e,u,d))),e.tag===3)return s;e=e.return}return[]}function _y(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dm(e,t,a,s,u){for(var d=t._reactName,p=[];a!==null&&a!==s;){var w=a,j=w.alternate,U=w.stateNode;if(w=w.tag,j!==null&&j===s)break;w!==5&&w!==26&&w!==27||U===null||(j=U,u?(U=Xr(a,d),U!=null&&p.unshift(Es(a,U,j))):u||(U=Xr(a,d),U!=null&&p.push(Es(a,U,j)))),a=a.return}p.length!==0&&e.push({event:t,listeners:p})}var Sy=/\r\n?/g,Cy=/\u0000|\uFFFD/g;function hm(e){return(typeof e=="string"?e:""+e).replace(Sy,`
`).replace(Cy,"")}function fm(e,t){return t=hm(t),hm(e)===t}function Ae(e,t,a,s,u,d){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||$n(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&$n(e,""+s);break;case"className":ai(e,"class",s);break;case"tabIndex":ai(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(e,a,s);break;case"style":hd(e,s,d);break;case"data":if(t!=="object"){ai(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ri(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(t!=="input"&&Ae(e,t,"name",u.name,u,null),Ae(e,t,"formEncType",u.formEncType,u,null),Ae(e,t,"formMethod",u.formMethod,u,null),Ae(e,t,"formTarget",u.formTarget,u,null)):(Ae(e,t,"encType",u.encType,u,null),Ae(e,t,"method",u.method,u,null),Ae(e,t,"target",u.target,u,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ri(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=na);break;case"onScroll":s!=null&&ue("scroll",e);break;case"onScrollEnd":s!=null&&ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(u.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=ri(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ue("beforetoggle",e),ue("toggle",e),ti(e,"popover",s);break;case"xlinkActuate":aa(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":aa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":aa(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":aa(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":aa(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":aa(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":aa(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":aa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":aa(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ti(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fp.get(a)||a,ti(e,a,s))}}function Mc(e,t,a,s,u,d){switch(a){case"style":hd(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(u.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof s=="string"?$n(e,s):(typeof s=="number"||typeof s=="bigint")&&$n(e,""+s);break;case"onScroll":s!=null&&ue("scroll",e);break;case"onScrollEnd":s!=null&&ue("scrollend",e);break;case"onClick":s!=null&&(e.onclick=na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),d=e[dt]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(t,d,u),typeof s=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,u);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):ti(e,a,s)}}}function ot(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ue("error",e),ue("load",e);var s=!1,u=!1,d;for(d in a)if(a.hasOwnProperty(d)){var p=a[d];if(p!=null)switch(d){case"src":s=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ae(e,t,d,p,a,null)}}u&&Ae(e,t,"srcSet",a.srcSet,a,null),s&&Ae(e,t,"src",a.src,a,null);return;case"input":ue("invalid",e);var w=d=p=u=null,j=null,U=null;for(s in a)if(a.hasOwnProperty(s)){var L=a[s];if(L!=null)switch(s){case"name":u=L;break;case"type":p=L;break;case"checked":j=L;break;case"defaultChecked":U=L;break;case"value":d=L;break;case"defaultValue":w=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(137,t));break;default:Ae(e,t,s,L,a,null)}}od(e,d,w,j,U,p,u,!1);return;case"select":ue("invalid",e),s=p=d=null;for(u in a)if(a.hasOwnProperty(u)&&(w=a[u],w!=null))switch(u){case"value":d=w;break;case"defaultValue":p=w;break;case"multiple":s=w;default:Ae(e,t,u,w,a,null)}t=d,a=p,e.multiple=!!s,t!=null?Hn(e,!!s,t,!1):a!=null&&Hn(e,!!s,a,!0);return;case"textarea":ue("invalid",e),d=u=s=null;for(p in a)if(a.hasOwnProperty(p)&&(w=a[p],w!=null))switch(p){case"value":s=w;break;case"defaultValue":u=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Ae(e,t,p,w,a,null)}ud(e,s,u,d);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(s=a[j],s!=null))switch(j){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ae(e,t,j,s,a,null)}return;case"dialog":ue("beforetoggle",e),ue("toggle",e),ue("cancel",e),ue("close",e);break;case"iframe":case"object":ue("load",e);break;case"video":case"audio":for(s=0;s<As.length;s++)ue(As[s],e);break;case"image":ue("error",e),ue("load",e);break;case"details":ue("toggle",e);break;case"embed":case"source":case"link":ue("error",e),ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(s=a[U],s!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ae(e,t,U,s,a,null)}return;default:if(Xl(t)){for(L in a)a.hasOwnProperty(L)&&(s=a[L],s!==void 0&&Mc(e,t,L,s,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(s=a[w],s!=null&&Ae(e,t,w,s,a,null))}function jy(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,d=null,p=null,w=null,j=null,U=null,L=null;for(M in a){var H=a[M];if(a.hasOwnProperty(M)&&H!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":j=H;default:s.hasOwnProperty(M)||Ae(e,t,M,null,s,H)}}for(var D in s){var M=s[D];if(H=a[D],s.hasOwnProperty(D)&&(M!=null||H!=null))switch(D){case"type":d=M;break;case"name":u=M;break;case"checked":U=M;break;case"defaultChecked":L=M;break;case"value":p=M;break;case"defaultValue":w=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(137,t));break;default:M!==H&&Ae(e,t,D,M,s,H)}}Kl(e,p,w,j,U,L,d,u);return;case"select":M=p=w=D=null;for(d in a)if(j=a[d],a.hasOwnProperty(d)&&j!=null)switch(d){case"value":break;case"multiple":M=j;default:s.hasOwnProperty(d)||Ae(e,t,d,null,s,j)}for(u in s)if(d=s[u],j=a[u],s.hasOwnProperty(u)&&(d!=null||j!=null))switch(u){case"value":D=d;break;case"defaultValue":w=d;break;case"multiple":p=d;default:d!==j&&Ae(e,t,u,d,s,j)}t=w,a=p,s=M,D!=null?Hn(e,!!a,D,!1):!!s!=!!a&&(t!=null?Hn(e,!!a,t,!0):Hn(e,!!a,a?[]:"",!1));return;case"textarea":M=D=null;for(w in a)if(u=a[w],a.hasOwnProperty(w)&&u!=null&&!s.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ae(e,t,w,null,s,u)}for(p in s)if(u=s[p],d=a[p],s.hasOwnProperty(p)&&(u!=null||d!=null))switch(p){case"value":D=u;break;case"defaultValue":M=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(i(91));break;default:u!==d&&Ae(e,t,p,u,s,d)}cd(e,D,M);return;case"option":for(var Q in a)if(D=a[Q],a.hasOwnProperty(Q)&&D!=null&&!s.hasOwnProperty(Q))switch(Q){case"selected":e.selected=!1;break;default:Ae(e,t,Q,null,s,D)}for(j in s)if(D=s[j],M=a[j],s.hasOwnProperty(j)&&D!==M&&(D!=null||M!=null))switch(j){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Ae(e,t,j,D,s,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var te in a)D=a[te],a.hasOwnProperty(te)&&D!=null&&!s.hasOwnProperty(te)&&Ae(e,t,te,null,s,D);for(U in s)if(D=s[U],M=a[U],s.hasOwnProperty(U)&&D!==M&&(D!=null||M!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(137,t));break;default:Ae(e,t,U,D,s,M)}return;default:if(Xl(t)){for(var Ee in a)D=a[Ee],a.hasOwnProperty(Ee)&&D!==void 0&&!s.hasOwnProperty(Ee)&&Mc(e,t,Ee,void 0,s,D);for(L in s)D=s[L],M=a[L],!s.hasOwnProperty(L)||D===M||D===void 0&&M===void 0||Mc(e,t,L,D,s,M);return}}for(var N in a)D=a[N],a.hasOwnProperty(N)&&D!=null&&!s.hasOwnProperty(N)&&Ae(e,t,N,null,s,D);for(H in s)D=s[H],M=a[H],!s.hasOwnProperty(H)||D===M||D==null&&M==null||Ae(e,t,H,D,s,M)}function mm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ay(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var u=a[s],d=u.transferSize,p=u.initiatorType,w=u.duration;if(d&&w&&mm(p)){for(p=0,w=u.responseEnd,s+=1;s<a.length;s++){var j=a[s],U=j.startTime;if(U>w)break;var L=j.transferSize,H=j.initiatorType;L&&mm(H)&&(j=j.responseEnd,p+=L*(j<w?1:(w-U)/(j-U)))}if(--s,t+=8*(d+p)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var zc=null,Lc=null;function Wi(e){return e.nodeType===9?e:e.ownerDocument}function gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qc=null;function Ey(){var e=window.event;return e&&e.type==="popstate"?e===qc?!1:(qc=e,!0):(qc=null,!1)}var ym=typeof setTimeout=="function"?setTimeout:void 0,Ny=typeof clearTimeout=="function"?clearTimeout:void 0,vm=typeof Promise=="function"?Promise:void 0,Ty=typeof queueMicrotask=="function"?queueMicrotask:typeof vm<"u"?function(e){return vm.resolve(null).then(e).catch(Ry)}:ym;function Ry(e){setTimeout(function(){throw e})}function Pa(e){return e==="head"}function bm(e,t){var a=t,s=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(u),vr(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")Ns(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ns(a);for(var d=a.firstChild;d;){var p=d.nextSibling,w=d.nodeName;d[Kr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=p}}else a==="body"&&Ns(e.ownerDocument.body);a=u}while(a);vr(t)}function xm(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function Hc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hc(a),Pl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Oy(e,t,a,s){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Kr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=qt(e.nextSibling),e===null)break}return null}function ky(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qt(e.nextSibling),e===null))return null;return e}function wm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=qt(e.nextSibling),e===null))return null;return e}function $c(e){return e.data==="$?"||e.data==="$~"}function Gc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Uy(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Vc=null;function _m(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return qt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Sm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Cm(e,t,a){switch(t=Wi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ns(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Pl(e)}var Ht=new Map,jm=new Set;function el(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ba=G.d;G.d={f:Dy,r:My,D:zy,C:Ly,L:By,m:qy,X:$y,S:Hy,M:Gy};function Dy(){var e=ba.f(),t=Yi();return e||t}function My(e){var t=Ln(e);t!==null&&t.tag===5&&t.type==="form"?$h(t):ba.r(e)}var gr=typeof document>"u"?null:document;function Am(e,t,a){var s=gr;if(s&&typeof t=="string"&&t){var u=kt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),jm.has(u)||(jm.add(u),e={rel:e,crossOrigin:a,href:t},s.querySelector(u)===null&&(t=s.createElement("link"),ot(t,"link",e),tt(t),s.head.appendChild(t)))}}function zy(e){ba.D(e),Am("dns-prefetch",e,null)}function Ly(e,t){ba.C(e,t),Am("preconnect",e,t)}function By(e,t,a){ba.L(e,t,a);var s=gr;if(s&&e&&t){var u='link[rel="preload"][as="'+kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+kt(a.imageSizes)+'"]')):u+='[href="'+kt(e)+'"]';var d=u;switch(t){case"style":d=pr(e);break;case"script":d=yr(e)}Ht.has(d)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ht.set(d,e),s.querySelector(u)!==null||t==="style"&&s.querySelector(Ts(d))||t==="script"&&s.querySelector(Rs(d))||(t=s.createElement("link"),ot(t,"link",e),tt(t),s.head.appendChild(t)))}}function qy(e,t){ba.m(e,t);var a=gr;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+kt(s)+'"][href="'+kt(e)+'"]',d=u;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yr(e)}if(!Ht.has(d)&&(e=b({rel:"modulepreload",href:e},t),Ht.set(d,e),a.querySelector(u)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rs(d)))return}s=a.createElement("link"),ot(s,"link",e),tt(s),a.head.appendChild(s)}}}function Hy(e,t,a){ba.S(e,t,a);var s=gr;if(s&&e){var u=Bn(s).hoistableStyles,d=pr(e);t=t||"default";var p=u.get(d);if(!p){var w={loading:0,preload:null};if(p=s.querySelector(Ts(d)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ht.get(d))&&Pc(e,a);var j=p=s.createElement("link");tt(j),ot(j,"link",e),j._p=new Promise(function(U,L){j.onload=U,j.onerror=L}),j.addEventListener("load",function(){w.loading|=1}),j.addEventListener("error",function(){w.loading|=2}),w.loading|=4,tl(p,t,s)}p={type:"stylesheet",instance:p,count:1,state:w},u.set(d,p)}}}function $y(e,t){ba.X(e,t);var a=gr;if(a&&e){var s=Bn(a).hoistableScripts,u=yr(e),d=s.get(u);d||(d=a.querySelector(Rs(u)),d||(e=b({src:e,async:!0},t),(t=Ht.get(u))&&Yc(e,t),d=a.createElement("script"),tt(d),ot(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(u,d))}}function Gy(e,t){ba.M(e,t);var a=gr;if(a&&e){var s=Bn(a).hoistableScripts,u=yr(e),d=s.get(u);d||(d=a.querySelector(Rs(u)),d||(e=b({src:e,async:!0,type:"module"},t),(t=Ht.get(u))&&Yc(e,t),d=a.createElement("script"),tt(d),ot(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(u,d))}}function Em(e,t,a,s){var u=(u=Rt.current)?el(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=pr(a.href),a=Bn(u).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=pr(a.href);var d=Bn(u).hoistableStyles,p=d.get(e);if(p||(u=u.ownerDocument||u,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,p),(d=u.querySelector(Ts(e)))&&!d._p&&(p.instance=d,p.state.loading=5),Ht.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ht.set(e,a),d||Vy(u,e,a,p.state))),t&&s===null)throw Error(i(528,""));return p}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=yr(a),a=Bn(u).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function pr(e){return'href="'+kt(e)+'"'}function Ts(e){return'link[rel="stylesheet"]['+e+"]"}function Nm(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Vy(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),ot(t,"link",a),tt(t),e.head.appendChild(t))}function yr(e){return'[src="'+kt(e)+'"]'}function Rs(e){return"script[async]"+e}function Tm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+kt(a.href)+'"]');if(s)return t.instance=s,tt(s),s;var u=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),tt(s),ot(s,"style",u),tl(s,a.precedence,e),t.instance=s;case"stylesheet":u=pr(a.href);var d=e.querySelector(Ts(u));if(d)return t.state.loading|=4,t.instance=d,tt(d),d;s=Nm(a),(u=Ht.get(u))&&Pc(s,u),d=(e.ownerDocument||e).createElement("link"),tt(d);var p=d;return p._p=new Promise(function(w,j){p.onload=w,p.onerror=j}),ot(d,"link",s),t.state.loading|=4,tl(d,a.precedence,e),t.instance=d;case"script":return d=yr(a.src),(u=e.querySelector(Rs(d)))?(t.instance=u,tt(u),u):(s=a,(u=Ht.get(d))&&(s=b({},a),Yc(s,u)),e=e.ownerDocument||e,u=e.createElement("script"),tt(u),ot(u,"link",s),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,tl(s,a.precedence,e));return t.instance}function tl(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=s.length?s[s.length-1]:null,d=u,p=0;p<s.length;p++){var w=s[p];if(w.dataset.precedence===t)d=w;else if(d!==u)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Pc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var al=null;function Rm(e,t,a){if(al===null){var s=new Map,u=al=new Map;u.set(a,s)}else u=al,s=u.get(a),s||(s=new Map,u.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var d=a[u];if(!(d[Kr]||d[rt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(t)||"";p=e+p;var w=s.get(p);w?w.push(d):s.set(p,[d])}}return s}function Om(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Py(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function km(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yy(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=pr(s.href),d=t.querySelector(Ts(u));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=nl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=d,tt(d);return}d=t.ownerDocument||t,s=Nm(s),(u=Ht.get(u))&&Pc(s,u),d=d.createElement("link"),tt(d);var p=d;p._p=new Promise(function(w,j){p.onload=w,p.onerror=j}),ot(d,"link",s),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=nl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Kc=0;function Ky(e,t){return e.stylesheets&&e.count===0&&sl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&sl(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Kc===0&&(Kc=62500*Ay());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sl(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Kc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(u)}}:null}function nl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rl=null;function sl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rl=new Map,t.forEach(Qy,e),rl=null,nl.call(e))}function Qy(e,t){if(!(t.state.loading&4)){var a=rl.get(e);if(a)var s=a.get(null);else{a=new Map,rl.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<u.length;d++){var p=u[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),s=p)}s&&a.set(null,s)}u=t.instance,p=u.getAttribute("data-precedence"),d=a.get(p)||s,d===s&&a.set(null,u),a.set(p,u),this.count++,s=nl.bind(this),u.addEventListener("load",s),u.addEventListener("error",s),d?d.parentNode.insertBefore(u,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var Os={$$typeof:z,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Xy(e,t,a,s,u,d,p,w,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.hiddenUpdates=Hl(null),this.identifierPrefix=s,this.onUncaughtError=u,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Um(e,t,a,s,u,d,p,w,j,U,L,H){return e=new Xy(e,t,a,p,j,U,L,H,w),t=1,d===!0&&(t|=24),d=St(3,null,null,t),e.current=d,d.stateNode=e,t=jo(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:s,isDehydrated:a,cache:t},To(d),e}function Dm(e){return e?(e=Xn,e):Xn}function Mm(e,t,a,s,u,d){u=Dm(u),s.context===null?s.context=u:s.pendingContext=u,s=Ua(t),s.payload={element:a},d=d===void 0?null:d,d!==null&&(s.callback=d),a=Da(e,s,t),a!==null&&(yt(a,e,t),cs(a,e,t))}function zm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Qc(e,t){zm(e,t),(e=e.alternate)&&zm(e,t)}function Lm(e){if(e.tag===13||e.tag===31){var t=hn(e,67108864);t!==null&&yt(t,e,67108864),Qc(e,67108864)}}function Bm(e){if(e.tag===13||e.tag===31){var t=Nt();t=$l(t);var a=hn(e,t);a!==null&&yt(a,e,t),Qc(e,t)}}var il=!0;function Iy(e,t,a,s){var u=B.T;B.T=null;var d=G.p;try{G.p=2,Xc(e,t,a,s)}finally{G.p=d,B.T=u}}function Jy(e,t,a,s){var u=B.T;B.T=null;var d=G.p;try{G.p=8,Xc(e,t,a,s)}finally{G.p=d,B.T=u}}function Xc(e,t,a,s){if(il){var u=Ic(s);if(u===null)Dc(e,t,s,ll,a),Hm(e,s);else if(Fy(u,e,t,a,s))s.stopPropagation();else if(Hm(e,s),t&4&&-1<Zy.indexOf(e)){for(;u!==null;){var d=Ln(u);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=ln(d.pendingLanes);if(p!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;p;){var j=1<<31-wt(p);w.entanglements[1]|=j,p&=~j}ea(d),(xe&6)===0&&(Vi=bt()+500,js(0))}}break;case 31:case 13:w=hn(d,2),w!==null&&yt(w,d,2),Yi(),Qc(d,2)}if(d=Ic(s),d===null&&Dc(e,t,s,ll,a),d===u)break;u=d}u!==null&&s.stopPropagation()}else Dc(e,t,s,null,a)}}function Ic(e){return e=Jl(e),Jc(e)}var ll=null;function Jc(e){if(ll=null,e=zn(e),e!==null){var t=c(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ll=e,null}function qm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zp()){case Ku:return 2;case Qu:return 8;case Js:case Lp:return 32;case Xu:return 268435456;default:return 32}default:return 32}}var Zc=!1,Ya=null,Ka=null,Qa=null,ks=new Map,Us=new Map,Xa=[],Zy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hm(e,t){switch(e){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(t.pointerId)}}function Ds(e,t,a,s,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:d,targetContainers:[u]},t!==null&&(t=Ln(t),t!==null&&Lm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Fy(e,t,a,s,u){switch(t){case"focusin":return Ya=Ds(Ya,e,t,a,s,u),!0;case"dragenter":return Ka=Ds(Ka,e,t,a,s,u),!0;case"mouseover":return Qa=Ds(Qa,e,t,a,s,u),!0;case"pointerover":var d=u.pointerId;return ks.set(d,Ds(ks.get(d)||null,e,t,a,s,u)),!0;case"gotpointercapture":return d=u.pointerId,Us.set(d,Ds(Us.get(d)||null,e,t,a,s,u)),!0}return!1}function $m(e){var t=zn(e.target);if(t!==null){var a=c(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,ed(e.priority,function(){Bm(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,ed(e.priority,function(){Bm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ol(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Ic(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Il=s,a.target.dispatchEvent(s),Il=null}else return t=Ln(a),t!==null&&Lm(t),e.blockedOn=a,!1;t.shift()}return!0}function Gm(e,t,a){ol(e)&&a.delete(t)}function Wy(){Zc=!1,Ya!==null&&ol(Ya)&&(Ya=null),Ka!==null&&ol(Ka)&&(Ka=null),Qa!==null&&ol(Qa)&&(Qa=null),ks.forEach(Gm),Us.forEach(Gm)}function cl(e,t){e.blockedOn===t&&(e.blockedOn=null,Zc||(Zc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Wy)))}var ul=null;function Vm(e){ul!==e&&(ul=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){ul===e&&(ul=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],u=e[t+2];if(typeof s!="function"){if(Jc(s||a)===null)continue;break}var d=Ln(a);d!==null&&(e.splice(t,3),t-=3,Io(d,{pending:!0,data:u,method:a.method,action:s},s,u))}}))}function vr(e){function t(j){return cl(j,e)}Ya!==null&&cl(Ya,e),Ka!==null&&cl(Ka,e),Qa!==null&&cl(Qa,e),ks.forEach(t),Us.forEach(t);for(var a=0;a<Xa.length;a++){var s=Xa[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Xa.length&&(a=Xa[0],a.blockedOn===null);)$m(a),a.blockedOn===null&&Xa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var u=a[s],d=a[s+1],p=u[dt]||null;if(typeof d=="function")p||Vm(a);else if(p){var w=null;if(d&&d.hasAttribute("formAction")){if(u=d,p=d[dt]||null)w=p.formAction;else if(Jc(u)!==null)continue}else w=p.action;typeof w=="function"?a[s+1]=w:(a.splice(s,3),s-=3),Vm(a)}}}function Pm(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(p){return u=p})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function Fc(e){this._internalRoot=e}dl.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,s=Nt();Mm(a,s,e,t,null,null)},dl.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mm(e.current,2,null,e,null,null),Yi(),t[Mn]=null}};function dl(e){this._internalRoot=e}dl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Xa.length&&t!==0&&t<Xa[a].priority;a++);Xa.splice(a,0,e),a===0&&$m(e)}};var Ym=n.version;if(Ym!=="19.2.0")throw Error(i(527,Ym,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var ev={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{Vr=hl.inject(ev),xt=hl}catch{}}return zs.createRoot=function(e,t){if(!o(e))throw Error(i(299));var a=!1,s="",u=Zh,d=Fh,p=Wh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Um(e,1,!1,null,null,a,s,null,u,d,p,Pm),e[Mn]=t.current,Uc(e),new Fc(t)},zs.hydrateRoot=function(e,t,a){if(!o(e))throw Error(i(299));var s=!1,u="",d=Zh,p=Fh,w=Wh,j=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),t=Um(e,1,!0,t,a??null,s,u,j,d,p,w,Pm),t.context=Dm(null),a=t.current,s=Nt(),s=$l(s),u=Ua(s),u.callback=null,Da(a,u,s),a=s,t.current.lanes=a,Yr(t,a),ea(t),e[Mn]=t.current,Uc(e),new dl(t)},zs.version="19.2.0",zs}var Fm;function bv(){if(Fm)return au.exports;Fm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),au.exports=vv(),au.exports}var xv=bv();const wv=$g(xv);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Wm="popstate";function _v(l={}){function n(i,o){let{pathname:c,search:h,hash:m}=i.location;return yu("",{pathname:c,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Ps(o)}return Cv(n,r,null,l)}function ze(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function Xt(l,n){if(!l){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Sv(){return Math.random().toString(36).substring(2,10)}function eg(l,n){return{usr:l.state,key:l.key,idx:n}}function yu(l,n,r=null,i){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof n=="string"?zr(n):n,state:r,key:n&&n.key||i||Sv()}}function Ps({pathname:l="/",search:n="",hash:r=""}){return n&&n!=="?"&&(l+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(l+=r.charAt(0)==="#"?r:"#"+r),l}function zr(l){let n={};if(l){let r=l.indexOf("#");r>=0&&(n.hash=l.substring(r),l=l.substring(0,r));let i=l.indexOf("?");i>=0&&(n.search=l.substring(i),l=l.substring(0,i)),l&&(n.pathname=l)}return n}function Cv(l,n,r,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,h=o.history,m="POP",g=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function b(){m="POP";let T=v(),R=T==null?null:T-y;y=T,g&&g({action:m,location:E.location,delta:R})}function x(T,R){m="PUSH";let O=yu(E.location,T,R);y=v()+1;let z=eg(O,y),V=E.createHref(O);try{h.pushState(z,"",V)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(V)}c&&g&&g({action:m,location:E.location,delta:1})}function _(T,R){m="REPLACE";let O=yu(E.location,T,R);y=v();let z=eg(O,y),V=E.createHref(O);h.replaceState(z,"",V),c&&g&&g({action:m,location:E.location,delta:0})}function C(T){return jv(T)}let E={get action(){return m},get location(){return l(o,h)},listen(T){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Wm,b),g=T,()=>{o.removeEventListener(Wm,b),g=null}},createHref(T){return n(o,T)},createURL:C,encodeLocation(T){let R=C(T);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:x,replace:_,go(T){return h.go(T)}};return E}function jv(l,n=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ze(r,"No window.location.(origin|href) available to create URL");let i=typeof l=="string"?l:Ps(l);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Gg(l,n,r="/"){return Av(l,n,r,!1)}function Av(l,n,r,i){let o=typeof n=="string"?zr(n):n,c=_a(o.pathname||"/",r);if(c==null)return null;let h=Vg(l);Ev(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let y=Bv(c);m=zv(h[g],y,i)}return m}function Vg(l,n=[],r=[],i="",o=!1){let c=(h,m,g=o,y)=>{let v={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&g)return;ze(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let b=wa([i,v.relativePath]),x=r.concat(v);h.children&&h.children.length>0&&(ze(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Vg(h.children,n,x,b,g)),!(h.path==null&&!h.index)&&n.push({path:b,score:Dv(b,h.index),routesMeta:x})};return l.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))c(h,m);else for(let g of Pg(h.path))c(h,m,!0,g)}),n}function Pg(l){let n=l.split("/");if(n.length===0)return[];let[r,...i]=n,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let h=Pg(i.join("/")),m=[];return m.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...h),m.map(g=>l.startsWith("/")&&g===""?"/":g)}function Ev(l){l.sort((n,r)=>n.score!==r.score?r.score-n.score:Mv(n.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Nv=/^:[\w-]+$/,Tv=3,Rv=2,Ov=1,kv=10,Uv=-2,tg=l=>l==="*";function Dv(l,n){let r=l.split("/"),i=r.length;return r.some(tg)&&(i+=Uv),n&&(i+=Rv),r.filter(o=>!tg(o)).reduce((o,c)=>o+(Nv.test(c)?Tv:c===""?Ov:kv),i)}function Mv(l,n){return l.length===n.length&&l.slice(0,-1).every((i,o)=>i===n[o])?l[l.length-1]-n[n.length-1]:0}function zv(l,n,r=!1){let{routesMeta:i}=l,o={},c="/",h=[];for(let m=0;m<i.length;++m){let g=i[m],y=m===i.length-1,v=c==="/"?n:n.slice(c.length)||"/",b=jl({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),x=g.route;if(!b&&y&&r&&!i[i.length-1].route.index&&(b=jl({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),h.push({params:o,pathname:wa([c,b.pathname]),pathnameBase:Gv(wa([c,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(c=wa([c,b.pathnameBase]))}return h}function jl(l,n){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[r,i]=Lv(l.path,l.caseSensitive,l.end),o=n.match(r);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:b},x)=>{if(v==="*"){let C=m[x]||"";h=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const _=m[x];return b&&!_?y[v]=void 0:y[v]=(_||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:l}}function Lv(l,n=!1,r=!0){Xt(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let i=[],o="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(i.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(i.push({paramName:"*"}),o+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":l!==""&&l!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),i]}function Bv(l){try{return l.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Xt(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),l}}function _a(l,n){if(n==="/")return l;if(!l.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,i=l.charAt(r);return i&&i!=="/"?null:l.slice(r)||"/"}function qv(l,n="/"){let{pathname:r,search:i="",hash:o=""}=typeof l=="string"?zr(l):l;return{pathname:r?r.startsWith("/")?r:Hv(r,n):n,search:Vv(i),hash:Pv(o)}}function Hv(l,n){let r=n.replace(/\/+$/,"").split("/");return l.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function su(l,n,r,i){return`Cannot include a '${l}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $v(l){return l.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Ou(l){let n=$v(l);return n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase)}function ku(l,n,r,i=!1){let o;typeof l=="string"?o=zr(l):(o={...l},ze(!o.pathname||!o.pathname.includes("?"),su("?","pathname","search",o)),ze(!o.pathname||!o.pathname.includes("#"),su("#","pathname","hash",o)),ze(!o.search||!o.search.includes("#"),su("#","search","hash",o)));let c=l===""||o.pathname==="",h=c?"/":o.pathname,m;if(h==null)m=r;else{let b=n.length-1;if(!i&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),b-=1;o.pathname=x.join("/")}m=b>=0?n[b]:"/"}let g=qv(o,m),y=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var wa=l=>l.join("/").replace(/\/\/+/g,"/"),Gv=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Vv=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Pv=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function Yv(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Yg=["POST","PUT","PATCH","DELETE"];new Set(Yg);var Kv=["GET",...Yg];new Set(Kv);var Lr=S.createContext(null);Lr.displayName="DataRouter";var Ol=S.createContext(null);Ol.displayName="DataRouterState";S.createContext(!1);var Kg=S.createContext({isTransitioning:!1});Kg.displayName="ViewTransition";var Qv=S.createContext(new Map);Qv.displayName="Fetchers";var Xv=S.createContext(null);Xv.displayName="Await";var It=S.createContext(null);It.displayName="Navigation";var Qs=S.createContext(null);Qs.displayName="Location";var Jt=S.createContext({outlet:null,matches:[],isDataRoute:!1});Jt.displayName="Route";var Uu=S.createContext(null);Uu.displayName="RouteError";function Iv(l,{relative:n}={}){ze(Br(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=S.useContext(It),{hash:o,pathname:c,search:h}=Xs(l,{relative:n}),m=c;return r!=="/"&&(m=c==="/"?r:wa([r,c])),i.createHref({pathname:m,search:h,hash:o})}function Br(){return S.useContext(Qs)!=null}function rn(){return ze(Br(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Qs).location}var Qg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xg(l){S.useContext(It).static||S.useLayoutEffect(l)}function kl(){let{isDataRoute:l}=S.useContext(Jt);return l?cb():Jv()}function Jv(){ze(Br(),"useNavigate() may be used only in the context of a <Router> component.");let l=S.useContext(Lr),{basename:n,navigator:r}=S.useContext(It),{matches:i}=S.useContext(Jt),{pathname:o}=rn(),c=JSON.stringify(Ou(i)),h=S.useRef(!1);return Xg(()=>{h.current=!0}),S.useCallback((g,y={})=>{if(Xt(h.current,Qg),!h.current)return;if(typeof g=="number"){r.go(g);return}let v=ku(g,JSON.parse(c),o,y.relative==="path");l==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:wa([n,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[n,r,c,o,l])}S.createContext(null);function Zv(){let{matches:l}=S.useContext(Jt),n=l[l.length-1];return n?n.params:{}}function Xs(l,{relative:n}={}){let{matches:r}=S.useContext(Jt),{pathname:i}=rn(),o=JSON.stringify(Ou(r));return S.useMemo(()=>ku(l,JSON.parse(o),i,n==="path"),[l,o,i,n])}function Fv(l,n){return Ig(l,n)}function Ig(l,n,r,i,o){ze(Br(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=S.useContext(It),{matches:h}=S.useContext(Jt),m=h[h.length-1],g=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let O=b&&b.path||"";Jg(y,!b||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let x=rn(),_;if(n){let O=typeof n=="string"?zr(n):n;ze(v==="/"||O.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${O.pathname}" was given in the \`location\` prop.`),_=O}else _=x;let C=_.pathname||"/",E=C;if(v!=="/"){let O=v.replace(/^\//,"").split("/");E="/"+C.replace(/^\//,"").split("/").slice(O.length).join("/")}let T=Gg(l,{pathname:E});Xt(b||T!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Xt(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=nb(T&&T.map(O=>Object.assign({},O,{params:Object.assign({},g,O.params),pathname:wa([v,c.encodeLocation?c.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?v:wa([v,c.encodeLocation?c.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),h,r,i,o);return n&&R?S.createElement(Qs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},R):R}function Wv(){let l=ob(),n=Yv(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),r=l instanceof Error?l.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:c},"ErrorBoundary")," or"," ",S.createElement("code",{style:c},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},n),r?S.createElement("pre",{style:o},r):null,h)}var eb=S.createElement(Wv,null),tb=class extends S.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,n){return n.location!==l.location||n.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:n.error,location:n.location,revalidation:l.revalidation||n.revalidation}}componentDidCatch(l,n){this.props.unstable_onError?this.props.unstable_onError(l,n):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?S.createElement(Jt.Provider,{value:this.props.routeContext},S.createElement(Uu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ab({routeContext:l,match:n,children:r}){let i=S.useContext(Lr);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Jt.Provider,{value:l},r)}function nb(l,n=[],r=null,i=null,o=null){if(l==null){if(!r)return null;if(r.errors)l=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)l=r.matches;else return null}let c=l,h=r?.errors;if(h!=null){let y=c.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);ze(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let m=!1,g=-1;if(r)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:b,errors:x}=r,_=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||_){m=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,v,b)=>{let x,_=!1,C=null,E=null;r&&(x=h&&v.route.id?h[v.route.id]:void 0,C=v.route.errorElement||eb,m&&(g<0&&b===0?(Jg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):g===b&&(_=!0,E=v.route.hydrateFallbackElement||null)));let T=n.concat(c.slice(0,b+1)),R=()=>{let O;return x?O=C:_?O=E:v.route.Component?O=S.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=y,S.createElement(ab,{match:v,routeContext:{outlet:y,matches:T,isDataRoute:r!=null},children:O})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?S.createElement(tb,{location:r.location,revalidation:r.revalidation,component:C,error:x,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:i}):R()},null)}function Du(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rb(l){let n=S.useContext(Lr);return ze(n,Du(l)),n}function sb(l){let n=S.useContext(Ol);return ze(n,Du(l)),n}function ib(l){let n=S.useContext(Jt);return ze(n,Du(l)),n}function Mu(l){let n=ib(l),r=n.matches[n.matches.length-1];return ze(r.route.id,`${l} can only be used on routes that contain a unique "id"`),r.route.id}function lb(){return Mu("useRouteId")}function ob(){let l=S.useContext(Uu),n=sb("useRouteError"),r=Mu("useRouteError");return l!==void 0?l:n.errors?.[r]}function cb(){let{router:l}=rb("useNavigate"),n=Mu("useNavigate"),r=S.useRef(!1);return Xg(()=>{r.current=!0}),S.useCallback(async(o,c={})=>{Xt(r.current,Qg),r.current&&(typeof o=="number"?l.navigate(o):await l.navigate(o,{fromRouteId:n,...c}))},[l,n])}var ag={};function Jg(l,n,r){!n&&!ag[l]&&(ag[l]=!0,Xt(!1,r))}S.memo(ub);function ub({routes:l,future:n,state:r,unstable_onError:i}){return Ig(l,void 0,r,i,n)}function db({to:l,replace:n,state:r,relative:i}){ze(Br(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=S.useContext(It);Xt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=S.useContext(Jt),{pathname:h}=rn(),m=kl(),g=ku(l,Ou(c),h,i==="path"),y=JSON.stringify(g);return S.useEffect(()=>{m(JSON.parse(y),{replace:n,state:r,relative:i})},[m,y,i,n,r]),null}function bl(l){ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hb({basename:l="/",children:n=null,location:r,navigationType:i="POP",navigator:o,static:c=!1}){ze(!Br(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=l.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof r=="string"&&(r=zr(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:x="default"}=r,_=S.useMemo(()=>{let C=_a(g,h);return C==null?null:{location:{pathname:C,search:y,hash:v,state:b,key:x},navigationType:i}},[h,g,y,v,b,x,i]);return Xt(_!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:S.createElement(It.Provider,{value:m},S.createElement(Qs.Provider,{children:n,value:_}))}function fb({children:l,location:n}){return Fv(vu(l),n)}function vu(l,n=[]){let r=[];return S.Children.forEach(l,(i,o)=>{if(!S.isValidElement(i))return;let c=[...n,o];if(i.type===S.Fragment){r.push.apply(r,vu(i.props.children,c));return}ze(i.type===bl,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ze(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=vu(i.props.children,c)),r.push(h)}),r}var xl="get",wl="application/x-www-form-urlencoded";function Ul(l){return l!=null&&typeof l.tagName=="string"}function mb(l){return Ul(l)&&l.tagName.toLowerCase()==="button"}function gb(l){return Ul(l)&&l.tagName.toLowerCase()==="form"}function pb(l){return Ul(l)&&l.tagName.toLowerCase()==="input"}function yb(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function vb(l,n){return l.button===0&&(!n||n==="_self")&&!yb(l)}var fl=null;function bb(){if(fl===null)try{new FormData(document.createElement("form"),0),fl=!1}catch{fl=!0}return fl}var xb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function iu(l){return l!=null&&!xb.has(l)?(Xt(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wl}"`),null):l}function wb(l,n){let r,i,o,c,h;if(gb(l)){let m=l.getAttribute("action");i=m?_a(m,n):null,r=l.getAttribute("method")||xl,o=iu(l.getAttribute("enctype"))||wl,c=new FormData(l)}else if(mb(l)||pb(l)&&(l.type==="submit"||l.type==="image")){let m=l.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=l.getAttribute("formaction")||m.getAttribute("action");if(i=g?_a(g,n):null,r=l.getAttribute("formmethod")||m.getAttribute("method")||xl,o=iu(l.getAttribute("formenctype"))||iu(m.getAttribute("enctype"))||wl,c=new FormData(m,l),!bb()){let{name:y,type:v,value:b}=l;if(v==="image"){let x=y?`${y}.`:"";c.append(`${x}x`,"0"),c.append(`${x}y`,"0")}else y&&c.append(y,b)}}else{if(Ul(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=xl,i=null,o=wl,h=l}return c&&o==="text/plain"&&(h=c,c=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zu(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function _b(l,n,r){let i=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return i.pathname==="/"?i.pathname=`_root.${r}`:n&&_a(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Sb(l,n){if(l.id in n)return n[l.id];try{let r=await import(l.module);return n[l.id]=r,r}catch(r){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cb(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function jb(l,n,r){let i=await Promise.all(l.map(async o=>{let c=n.routes[o.route.id];if(c){let h=await Sb(c,r);return h.links?h.links():[]}return[]}));return Tb(i.flat(1).filter(Cb).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ng(l,n,r,i,o,c){let h=(g,y)=>r[y]?g.route.id!==r[y].route.id:!0,m=(g,y)=>r[y].pathname!==g.pathname||r[y].route.path?.endsWith("*")&&r[y].params["*"]!==g.params["*"];return c==="assets"?n.filter((g,y)=>h(g,y)||m(g,y)):c==="data"?n.filter((g,y)=>{let v=i.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(h(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Ab(l,n,{includeHydrateFallback:r}={}){return Eb(l.map(i=>{let o=n.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function Eb(l){return[...new Set(l)]}function Nb(l){let n={},r=Object.keys(l).sort();for(let i of r)n[i]=l[i];return n}function Tb(l,n){let r=new Set;return new Set(n),l.reduce((i,o)=>{let c=JSON.stringify(Nb(o));return r.has(c)||(r.add(c),i.push({key:c,link:o})),i},[])}function Zg(){let l=S.useContext(Lr);return zu(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Rb(){let l=S.useContext(Ol);return zu(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Lu=S.createContext(void 0);Lu.displayName="FrameworkContext";function Fg(){let l=S.useContext(Lu);return zu(l,"You must render this element inside a <HydratedRouter> element"),l}function Ob(l,n){let r=S.useContext(Lu),[i,o]=S.useState(!1),[c,h]=S.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=n,x=S.useRef(null);S.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let E=R=>{R.forEach(O=>{h(O.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return x.current&&T.observe(x.current),()=>{T.disconnect()}}},[l]),S.useEffect(()=>{if(i){let E=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(E)}}},[i]);let _=()=>{o(!0)},C=()=>{o(!1),h(!1)};return r?l!=="intent"?[c,x,{}]:[c,x,{onFocus:Ls(m,_),onBlur:Ls(g,C),onMouseEnter:Ls(y,_),onMouseLeave:Ls(v,C),onTouchStart:Ls(b,_)}]:[!1,x,{}]}function Ls(l,n){return r=>{l&&l(r),r.defaultPrevented||n(r)}}function kb({page:l,...n}){let{router:r}=Zg(),i=S.useMemo(()=>Gg(r.routes,l,r.basename),[r.routes,l,r.basename]);return i?S.createElement(Db,{page:l,matches:i,...n}):null}function Ub(l){let{manifest:n,routeModules:r}=Fg(),[i,o]=S.useState([]);return S.useEffect(()=>{let c=!1;return jb(l,n,r).then(h=>{c||o(h)}),()=>{c=!0}},[l,n,r]),i}function Db({page:l,matches:n,...r}){let i=rn(),{manifest:o,routeModules:c}=Fg(),{basename:h}=Zg(),{loaderData:m,matches:g}=Rb(),y=S.useMemo(()=>ng(l,n,g,o,i,"data"),[l,n,g,o,i]),v=S.useMemo(()=>ng(l,n,g,o,i,"assets"),[l,n,g,o,i]),b=S.useMemo(()=>{if(l===i.pathname+i.search+i.hash)return[];let C=new Set,E=!1;if(n.forEach(R=>{let O=o.routes[R.route.id];!O||!O.hasLoader||(!y.some(z=>z.route.id===R.route.id)&&R.route.id in m&&c[R.route.id]?.shouldRevalidate||O.hasClientLoader?E=!0:C.add(R.route.id))}),C.size===0)return[];let T=_b(l,h,"data");return E&&C.size>0&&T.searchParams.set("_routes",n.filter(R=>C.has(R.route.id)).map(R=>R.route.id).join(",")),[T.pathname+T.search]},[h,m,i,o,y,n,l,c]),x=S.useMemo(()=>Ab(v,o),[v,o]),_=Ub(v);return S.createElement(S.Fragment,null,b.map(C=>S.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...r})),x.map(C=>S.createElement("link",{key:C,rel:"modulepreload",href:C,...r})),_.map(({key:C,link:E})=>S.createElement("link",{key:C,nonce:r.nonce,...E})))}function Mb(...l){return n=>{l.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var Wg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wg&&(window.__reactRouterVersion="7.9.5")}catch{}function zb({basename:l,children:n,window:r}){let i=S.useRef();i.current==null&&(i.current=_v({window:r,v5Compat:!0}));let o=i.current,[c,h]=S.useState({action:o.action,location:o.location}),m=S.useCallback(g=>{S.startTransition(()=>h(g))},[h]);return S.useLayoutEffect(()=>o.listen(m),[o,m]),S.createElement(hb,{basename:l,children:n,location:c.location,navigationType:c.action,navigator:o})}var ep=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tp=S.forwardRef(function({onClick:n,discover:r="render",prefetch:i="none",relative:o,reloadDocument:c,replace:h,state:m,target:g,to:y,preventScrollReset:v,viewTransition:b,...x},_){let{basename:C}=S.useContext(It),E=typeof y=="string"&&ep.test(y),T,R=!1;if(typeof y=="string"&&E&&(T=y,Wg))try{let Y=new URL(window.location.href),ge=y.startsWith("//")?new URL(Y.protocol+y):new URL(y),Be=_a(ge.pathname,C);ge.origin===Y.origin&&Be!=null?y=Be+ge.search+ge.hash:R=!0}catch{Xt(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=Iv(y,{relative:o}),[z,V,P]=Ob(i,x),$=Hb(y,{replace:h,state:m,target:g,preventScrollReset:v,relative:o,viewTransition:b});function Z(Y){n&&n(Y),Y.defaultPrevented||$(Y)}let se=S.createElement("a",{...x,...P,href:T||O,onClick:R||c?n:Z,ref:Mb(_,V),target:g,"data-discover":!E&&r==="render"?"true":void 0});return z&&!E?S.createElement(S.Fragment,null,se,S.createElement(kb,{page:O})):se});tp.displayName="Link";var Lb=S.forwardRef(function({"aria-current":n="page",caseSensitive:r=!1,className:i="",end:o=!1,style:c,to:h,viewTransition:m,children:g,...y},v){let b=Xs(h,{relative:y.relative}),x=rn(),_=S.useContext(Ol),{navigator:C,basename:E}=S.useContext(It),T=_!=null&&Yb(b)&&m===!0,R=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,O=x.pathname,z=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(O=O.toLowerCase(),z=z?z.toLowerCase():null,R=R.toLowerCase()),z&&E&&(z=_a(z,E)||z);const V=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let P=O===R||!o&&O.startsWith(R)&&O.charAt(V)==="/",$=z!=null&&(z===R||!o&&z.startsWith(R)&&z.charAt(R.length)==="/"),Z={isActive:P,isPending:$,isTransitioning:T},se=P?n:void 0,Y;typeof i=="function"?Y=i(Z):Y=[i,P?"active":null,$?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ge=typeof c=="function"?c(Z):c;return S.createElement(tp,{...y,"aria-current":se,className:Y,ref:v,style:ge,to:h,viewTransition:m},typeof g=="function"?g(Z):g)});Lb.displayName="NavLink";var Bb=S.forwardRef(({discover:l="render",fetcherKey:n,navigate:r,reloadDocument:i,replace:o,state:c,method:h=xl,action:m,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:b,...x},_)=>{let C=Vb(),E=Pb(m,{relative:y}),T=h.toLowerCase()==="get"?"get":"post",R=typeof m=="string"&&ep.test(m),O=z=>{if(g&&g(z),z.defaultPrevented)return;z.preventDefault();let V=z.nativeEvent.submitter,P=V?.getAttribute("formmethod")||h;C(V||z.currentTarget,{fetcherKey:n,method:P,navigate:r,replace:o,state:c,relative:y,preventScrollReset:v,viewTransition:b})};return S.createElement("form",{ref:_,method:T,action:E,onSubmit:i?g:O,...x,"data-discover":!R&&l==="render"?"true":void 0})});Bb.displayName="Form";function qb(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ap(l){let n=S.useContext(Lr);return ze(n,qb(l)),n}function Hb(l,{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:h}={}){let m=kl(),g=rn(),y=Xs(l,{relative:c});return S.useCallback(v=>{if(vb(v,n)){v.preventDefault();let b=r!==void 0?r:Ps(g)===Ps(y);m(l,{replace:b,state:i,preventScrollReset:o,relative:c,viewTransition:h})}},[g,m,y,r,i,n,l,o,c,h])}var $b=0,Gb=()=>`__${String(++$b)}__`;function Vb(){let{router:l}=ap("useSubmit"),{basename:n}=S.useContext(It),r=lb();return S.useCallback(async(i,o={})=>{let{action:c,method:h,encType:m,formData:g,body:y}=wb(i,n);if(o.navigate===!1){let v=o.fetcherKey||Gb();await l.fetch(v,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await l.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[l,n,r])}function Pb(l,{relative:n}={}){let{basename:r}=S.useContext(It),i=S.useContext(Jt);ze(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...Xs(l||".",{relative:n})},h=rn();if(l==null){c.search=h.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();c.search=v?`?${v}`:""}}return(!l||l===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:wa([r,c.pathname])),Ps(c)}function Yb(l,{relative:n}={}){let r=S.useContext(Kg);ze(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ap("useViewTransitionState"),o=Xs(l,{relative:n});if(!r.isTransitioning)return!1;let c=_a(r.currentLocation.pathname,i)||r.currentLocation.pathname,h=_a(r.nextLocation.pathname,i)||r.nextLocation.pathname;return jl(o.pathname,h)!=null||jl(o.pathname,c)!=null}function Al(l){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)}function rg(l){if(!l?.trim())return{isValid:!1,error:"Username is required"};const n=l.trim();return n.length<3||n.length>30?{isValid:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(n)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}function Kb(l){if(!l)return{isValid:!1,error:"Password is required"};if(l.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};const n=/[a-z]/.test(l),r=/[A-Z]/.test(l),i=/\d/.test(l),o=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(l);return!n||!r||!i||!o?{isValid:!1,error:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:{isValid:!0}}function sg(l){return l?.trim()?l.length>100?{isValid:!1,error:"Campaign name must be 100 characters or less"}:{isValid:!0}:{isValid:!1,error:"Campaign name is required"}}function ig(l){return["admin","gm","player"].includes(l)}function np(l){const{isAdmin:n,isGm:r,isPlayer:i}=l;return!(!n&&!r&&!i||r&&i&&!n)}function lu(l){return typeof l=="string"?["admin","gm"].includes(l):l.isAdmin||l.isGm}function Qb(l){return typeof l=="string"?l==="admin":l.isAdmin}function Xb(l){return typeof l=="string"?l==="admin":l.isAdmin}function Dl(l){const n=[];return l.isAdmin&&n.push("Admin"),l.isGm&&n.push("GM"),l.isPlayer&&n.push("Player"),n.length===0?"No roles":n.length===1?n[0]:n.length===2?n.join(" + "):`${n.slice(0,-1).join(", ")} + ${n[n.length-1]}`}function Bs(l,n){return`Only ${n.length===1?`${n[0]}s`:`${n.slice(0,-1).join(", ")} and ${n[n.length-1]}s`} can ${l}`}class Ib{authRepository;constructor(n){this.authRepository=n}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:Al(n)?this.authRepository.signIn(n,r):{success:!1,error:"Invalid email format"}}async signUp(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:Al(n)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(n,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(n){return this.authRepository.onAuthStateChange(n)}async completeProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.displayName?.trim())return{success:!1,error:"Display name is required"};const i=rg(n.username);return i.isValid?this.authRepository.completeProfile(r.id,n.displayName.trim(),n.username.trim()):{success:!1,error:i.error}}async updateProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(n.displayName!==void 0&&!n.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(n.username!==void 0){const i=rg(n.username);if(!i.isValid)return{success:!1,error:i.error}}return this.authRepository.updateProfile(r.id,n.displayName?.trim(),n.username?.trim())}async changePassword(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.currentPassword)return{success:!1,error:"Current password is required"};const i=Kb(n.newPassword);return i.isValid?this.authRepository.changePassword(r.id,n.currentPassword,n.newPassword):{success:!1,error:i.error}}async deleteAccount(){const n=await this.authRepository.getCurrentUser();return n?this.authRepository.deleteAccount(n.id):{success:!1,error:"User not authenticated"}}}class Jb{campaignRepository;authRepository;constructor(n,r){this.campaignRepository=n,this.authRepository=r}async getCampaigns(){const n=await this.authRepository.getCurrentUser();return n?this.campaignRepository.getCampaigns(n.id):{success:!1,error:"User not authenticated"}}async getCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(n)}async createCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=sg(n.name);if(!i.isValid)return{success:!1,error:i.error};const o=n.creatorIsAlsoGM||!1;if(n.initialMembers)for(const h of n.initialMembers){if(!Al(h.email))return{success:!1,error:`Invalid email format: ${h.email}`};if(!ig(h.role))return{success:!1,error:`Invalid role: ${h.role}`}}const c=await this.campaignRepository.createCampaign(r.id,{name:n.name.trim(),description:n.description?.trim()},o);if(!c.success)return c;if(n.initialMembers&&n.initialMembers.length>0&&c.data)for(const h of n.initialMembers)await this.campaignRepository.addMemberByEmail(c.data.id,h.email.trim(),h.role);return c}async updateCampaign(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const o=await this.campaignRepository.getUserRole(n,i.id);if(!o.success||!o.data||!Qb(o.data))return{success:!1,error:Bs("update campaigns",["admin"])};if(r.name!==void 0){const h=sg(r.name);if(!h.isValid)return{success:!1,error:h.error}}const c={};return r.name!==void 0&&(c.name=r.name.trim()),r.description!==void 0&&(c.description=r.description?.trim()),this.campaignRepository.updateCampaign(n,c)}async deleteCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.getUserRole(n,r.id);return!i.success||!i.data||!Xb(i.data)?{success:!1,error:Bs("delete campaigns",["admin"])}:this.campaignRepository.deleteCampaign(n)}async getCampaignMembers(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(n)}async addMemberByEmail(n,r,i){const o=await this.authRepository.getCurrentUser();if(!o)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(n,o.id);return!c.success||!c.data||!lu(c.data)?{success:!1,error:Bs("add members",["admin","gm"])}:r?.trim()?Al(r)?ig(i)?this.campaignRepository.addMemberByEmail(n,r.trim(),i):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(n,r,i){const o=await this.authRepository.getCurrentUser();if(!o)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(n,o.id);return!c.success||!c.data||!lu(c.data)?{success:!1,error:Bs("update member roles",["admin","gm"])}:np(i)?this.campaignRepository.updateMemberRole(n,r,i):{success:!1,error:"Invalid role combination. Must have at least one role and cannot be GM+Player without Admin."}}async removeMember(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const o=await this.campaignRepository.getUserRole(n,i.id);return!o.success||!o.data||!lu(o.data)?{success:!1,error:Bs("remove members",["admin","gm"])}:this.campaignRepository.removeMember(n,r)}}const Zb="modulepreload",Fb=function(l){return"/traveller-dashboard/"+l},lg={},nn=function(n,r,i){let o=Promise.resolve();if(r&&r.length>0){let g=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");o=g(r.map(y=>{if(y=Fb(y),y in lg)return;lg[y]=!0;const v=y.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${b}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":Zb,v||(x.as="script"),x.crossOrigin="",x.href=y,m&&x.setAttribute("nonce",m),document.head.appendChild(x),v)return new Promise((_,C)=>{x.addEventListener("load",_),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return o.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return n().catch(c)})},Wb=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...r)=>nn(async()=>{const{default:i}=await Promise.resolve().then(()=>qr);return{default:i}},[]).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)};class Bu extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class og extends Bu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class cg extends Bu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class ug extends Bu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var bu;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(bu||(bu={}));var ex=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};class tx{constructor(n,{headers:r={},customFetch:i,region:o=bu.Any}={}){this.url=n,this.headers=r,this.region=o,this.fetch=Wb(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ex(this,arguments,void 0,function*(r,i={}){var o;try{const{headers:c,method:h,body:m,signal:g}=i;let y={},{region:v}=i;v||(v=this.region);const b=new URL(`${this.url}/${r}`);v&&v!=="any"&&(y["x-region"]=v,b.searchParams.set("forceFunctionRegion",v));let x;m&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=m):typeof m=="string"?(y["Content-Type"]="text/plain",x=m):typeof FormData<"u"&&m instanceof FormData?x=m:(y["Content-Type"]="application/json",x=JSON.stringify(m)));const _=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),c),body:x,signal:g}).catch(R=>{throw R.name==="AbortError"?R:new og(R)}),C=_.headers.get("x-relay-error");if(C&&C==="true")throw new cg(_);if(!_.ok)throw new ug(_);let E=((o=_.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),T;return E==="application/json"?T=yield _.json():E==="application/octet-stream"?T=yield _.blob():E==="text/event-stream"?T=_:E==="multipart/form-data"?T=yield _.formData():T=yield _.text(),{data:T,error:null,response:_}}catch(c){return c instanceof Error&&c.name==="AbortError"?{data:null,error:new og(c)}:{data:null,error:c,response:c instanceof ug||c instanceof cg?c.context:void 0}}})}}var nt={},br={},xr={},wr={},_r={},Sr={},ax=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dr=ax();const nx=Dr.fetch,rp=Dr.fetch.bind(Dr),sp=Dr.Headers,rx=Dr.Request,sx=Dr.Response,qr=Object.freeze(Object.defineProperty({__proto__:null,Headers:sp,Request:rx,Response:sx,default:rp,fetch:nx},Symbol.toStringTag,{value:"Module"})),ix=dv(qr);var ml={},dg;function ip(){if(dg)return ml;dg=1,Object.defineProperty(ml,"__esModule",{value:!0});class l extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ml.default=l,ml}var hg;function lp(){if(hg)return Sr;hg=1;var l=Sr&&Sr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Sr,"__esModule",{value:!0});const n=l(ix),r=l(ip());class i{constructor(c){var h,m;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(h=c.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=c.signal,this.isMaybeSingle=(m=c.isMaybeSingle)!==null&&m!==void 0?m:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,h){return this.headers=new Headers(this.headers),this.headers.set(c,h),this}then(c,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let g=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var v,b,x,_;let C=null,E=null,T=null,R=y.status,O=y.statusText;if(y.ok){if(this.method!=="HEAD"){const $=await y.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?E=$:E=JSON.parse($))}const V=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),P=(x=y.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");V&&P&&P.length>1&&(T=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(C={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,T=null,R=406,O="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const V=await y.text();try{C=JSON.parse(V),Array.isArray(C)&&y.status===404&&(E=[],C=null,R=200,O="OK")}catch{y.status===404&&V===""?(R=204,O="No Content"):C={message:V}}if(C&&this.isMaybeSingle&&(!((_=C?.details)===null||_===void 0)&&_.includes("0 rows"))&&(C=null,R=200,O="OK"),C&&this.shouldThrowOnError)throw new r.default(C)}return{error:C,data:E,count:T,status:R,statusText:O}});return this.shouldThrowOnError||(g=g.catch(y=>{var v,b,x;return{error:{message:`${(v=y?.name)!==null&&v!==void 0?v:"FetchError"}: ${y?.message}`,details:`${(b=y?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(x=y?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),g.then(c,h)}returns(){return this}overrideTypes(){return this}}return Sr.default=i,Sr}var fg;function op(){if(fg)return _r;fg=1;var l=_r&&_r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_r,"__esModule",{value:!0});const n=l(lp());class r extends n.default{select(o){let c=!1;const h=(o??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:h,foreignTable:m,referencedTable:g=m}={}){const y=g?`${g}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${o}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:h=c}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${o}`),this}range(o,c,{foreignTable:h,referencedTable:m=h}={}){const g=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(y,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:h=!1,buffers:m=!1,wal:g=!1,format:y="text"}={}){var v;const b=[o?"analyze":null,c?"verbose":null,h?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),x=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${x}"; options=${b};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return _r.default=r,_r}var mg;function qu(){if(mg)return wr;mg=1;var l=wr&&wr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wr,"__esModule",{value:!0});const n=l(op());class r extends n.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const h=Array.from(new Set(c)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(o,`in.(${h})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:h,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const y=h===void 0?"":`(${h})`;return this.url.searchParams.append(o,`${g}fts${y}.${c}`),this}match(o){return Object.entries(o).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(o,c,h){return this.url.searchParams.append(o,`not.${c}.${h}`),this}or(o,{foreignTable:c,referencedTable:h=c}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${o})`),this}filter(o,c,h){return this.url.searchParams.append(o,`${c}.${h}`),this}}return wr.default=r,wr}var gg;function cp(){if(gg)return xr;gg=1;var l=xr&&xr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xr,"__esModule",{value:!0});const n=l(qu());class r{constructor(o,{headers:c={},schema:h,fetch:m}){this.url=o,this.headers=new Headers(c),this.schema=h,this.fetch=m}select(o,c){const{head:h=!1,count:m}=c??{},g=h?"HEAD":"GET";let y=!1;const v=(o??"*").split("").map(b=>/\s/.test(b)&&!y?"":(b==='"'&&(y=!y),b)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:h=!0}={}){var m;const g="POST";if(c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:h=!1,count:m,defaultToNull:g=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(b.length>0){const x=[...new Set(b)].map(_=>`"${_}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(o,{count:c}={}){var h;const m="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:o}={}){var c;const h="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return xr.default=r,xr}var pg;function lx(){if(pg)return br;pg=1;var l=br&&br.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(br,"__esModule",{value:!0});const n=l(cp()),r=l(qu());class i{constructor(c,{headers:h={},schema:m,fetch:g}={}){this.url=c,this.headers=new Headers(h),this.schemaName=m,this.fetch=g}from(c){const h=new URL(`${this.url}/${c}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new i(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:m=!1,get:g=!1,count:y}={}){var v;let b;const x=new URL(`${this.url}/rpc/${c}`);let _;m||g?(b=m?"HEAD":"GET",Object.entries(h).filter(([E,T])=>T!==void 0).map(([E,T])=>[E,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([E,T])=>{x.searchParams.append(E,T)})):(b="POST",_=h);const C=new Headers(this.headers);return y&&C.set("Prefer",`count=${y}`),new r.default({method:b,url:x,headers:C,schema:this.schemaName,body:_,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return br.default=i,br}var yg;function ox(){if(yg)return nt;yg=1;var l=nt&&nt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(nt,"__esModule",{value:!0}),nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const n=l(lx());nt.PostgrestClient=n.default;const r=l(cp());nt.PostgrestQueryBuilder=r.default;const i=l(qu());nt.PostgrestFilterBuilder=i.default;const o=l(op());nt.PostgrestTransformBuilder=o.default;const c=l(lp());nt.PostgrestBuilder=c.default;const h=l(ip());return nt.PostgrestError=h.default,nt.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:h.default},nt}var cx=ox();const ux=$g(cx),{PostgrestClient:dx,PostgrestQueryBuilder:zS,PostgrestFilterBuilder:LS,PostgrestTransformBuilder:BS,PostgrestBuilder:qS,PostgrestError:HS}=ux;class hx{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const fx="2.75.0",mx=`realtime-js/${fx}`,gx="1.0.0",xu=1e4,px=1e3,yx=100;var Hs;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Hs||(Hs={}));var et;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(et||(et={}));var Qt;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Qt||(Qt={}));var wu;(function(l){l.websocket="websocket"})(wu||(wu={}));var Nn;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Nn||(Nn={}));class vx{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,r,i)}_decodeBroadcast(n,r,i){const o=r.getUint8(1),c=r.getUint8(2);let h=this.HEADER_LENGTH+2;const m=i.decode(n.slice(h,h+o));h=h+o;const g=i.decode(n.slice(h,h+c));h=h+c;const y=JSON.parse(i.decode(n.slice(h,n.byteLength)));return{ref:null,topic:m,event:g,payload:y}}}class up{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Oe||(Oe={}));const vg=(l,n,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((c,h)=>(c[h]=bx(h,l,n,o),c),{}):{}},bx=(l,n,r,i)=>{const o=n.find(m=>m.name===l),c=o?.type,h=r[l];return c&&!i.includes(c)?dp(c,h):_u(h)},dp=(l,n)=>{if(l.charAt(0)==="_"){const r=l.slice(1,l.length);return Sx(n,r)}switch(l){case Oe.bool:return xx(n);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return wx(n);case Oe.json:case Oe.jsonb:return _x(n);case Oe.timestamp:return Cx(n);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return _u(n);default:return _u(n)}},_u=l=>l,xx=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},wx=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},_x=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},Sx=(l,n)=>{if(typeof l!="string")return l;const r=l.length-1,i=l[r];if(l[0]==="{"&&i==="}"){let c;const h=l.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(m=>dp(n,m))}return l},Cx=l=>typeof l=="string"?l.replace(" ","T"):l,hp=l=>{let n=l;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class ou{constructor(n,r,i={},o=xu){this.channel=n,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var bg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(bg||(bg={}));class $s{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$s.syncState(this.state,o,c,h),this.pendingDiffs.forEach(g=>{this.state=$s.syncDiff(this.state,g,c,h)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=$s.syncDiff(this.state,o,c,h),m())}),this.onJoin((o,c,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:h})}),this.onLeave((o,c,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,o){const c=this.cloneDeep(n),h=this.transformState(r),m={},g={};return this.map(c,(y,v)=>{h[y]||(g[y]=v)}),this.map(h,(y,v)=>{const b=c[y];if(b){const x=v.map(T=>T.presence_ref),_=b.map(T=>T.presence_ref),C=v.filter(T=>_.indexOf(T.presence_ref)<0),E=b.filter(T=>x.indexOf(T.presence_ref)<0);C.length>0&&(m[y]=C),E.length>0&&(g[y]=E)}else m[y]=v}),this.syncDiff(c,{joins:m,leaves:g},i,o)}static syncDiff(n,r,i,o){const{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(m,g)=>{var y;const v=(y=n[m])!==null&&y!==void 0?y:[];if(n[m]=this.cloneDeep(g),v.length>0){const b=n[m].map(_=>_.presence_ref),x=v.filter(_=>b.indexOf(_.presence_ref)<0);n[m].unshift(...x)}i(m,v,g)}),this.map(h,(m,g)=>{let y=n[m];if(!y)return;const v=g.map(b=>b.presence_ref);y=y.filter(b=>v.indexOf(b.presence_ref)<0),n[m]=y,o(m,y,g),y.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const o=n[i];return"metas"in o?r[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[i]=o,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xg;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(xg||(xg={}));var Gs;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Gs||(Gs={}));var xa;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(xa||(xa={}));class Hu{constructor(n,r={config:{}},i){var o,c;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ou(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new up(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new $s(this),this.broadcastEndpointURL=hp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:h,presence:m,private:g}}=this.params,y=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Gs.PRESENCE]&&this.bindings[Gs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,b={},x={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(xa.CHANNEL_ERROR,_)),this._onClose(()=>n?.(xa.CLOSED)),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:_})=>{var C;if(this.socket.setAuth(),_===void 0){n?.(xa.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,T=(C=E?.length)!==null&&C!==void 0?C:0,R=[];for(let O=0;O<T;O++){const z=E[O],{filter:{event:V,schema:P,table:$,filter:Z}}=z,se=_&&_[O];if(se&&se.event===V&&se.schema===P&&se.table===$&&se.filter===Z)R.push(Object.assign(Object.assign({},z),{id:se.id}));else{this.unsubscribe(),this.state=et.errored,n?.(xa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(xa.SUBSCRIBED);return}}).receive("error",_=>{this.state=et.errored,n?.(xa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(xa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===et.joined&&n===Gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,i)}async send(n,r={}){var i,o;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:h}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=y.body)===null||o===void 0?void 0:o.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,m,g;const y=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new ou(this,Qt.leave,{},n),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),h=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),h}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ou(this,n,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>yx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var o,c;const h=n.toLocaleLowerCase(),{close:m,error:g,leave:y,join:v}=Qt;if(i&&[m,g,y,v].indexOf(h)>=0&&i!==this._joinRef())return;let x=this._onMessage(h,r,i);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(_=>{var C,E,T;return((C=_.filter)===null||C===void 0?void 0:C.event)==="*"||((T=(E=_.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===h}).map(_=>_.callback(x,i)):(c=this.bindings[h])===null||c===void 0||c.filter(_=>{var C,E,T,R,O,z;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in _){const V=_.id,P=(C=_.filter)===null||C===void 0?void 0:C.event;return V&&((E=r.ids)===null||E===void 0?void 0:E.includes(V))&&(P==="*"||P?.toLocaleLowerCase()===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const V=(O=(R=_?.filter)===null||R===void 0?void 0:R.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return V==="*"||V===((z=r?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===h}).map(_=>{if(typeof x=="object"&&"ids"in x){const C=x.data,{schema:E,table:T,commit_timestamp:R,type:O,errors:z}=C;x=Object.assign(Object.assign({},{schema:E,table:T,commit_timestamp:R,eventType:O,new:{},old:{},errors:z}),this._getPayloadRecords(C))}_.callback(x,i)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const o=n.toLocaleLowerCase(),c={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Hu.isEqual(o.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Qt.close,{},n)}_onError(n){this._on(Qt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=vg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=vg(n.columns,n.old_record)),r}}const cu=()=>{},gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jx=[1e3,2e3,5e3,1e4],Ax=1e4,Ex=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nx{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xu,this.transport=null,this.heartbeatIntervalMs=gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cu,this.ref=0,this.reconnectTimer=null,this.logger=cu,this.conn=null,this.sendBuffer=[],this.serializer=new vx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...h)=>nn(async()=>{const{default:m}=await Promise.resolve().then(()=>qr);return{default:m}},void 0).then(({default:m})=>m(...h)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...h)=>c(...h)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${wu.websocket}`,this.httpEndpoint=hp(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hx.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gx}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Hs.connecting:return Nn.Connecting;case Hs.open:return Nn.Open;case Hs.closing:return Nn.Closing;default:return Nn.Closed}}isConnected(){return this.connectionState()===Nn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===i);if(o)return o;{const c=new Hu(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:i,payload:o,ref:c}=n,h=()=>{this.encode(n,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${r} ${i} (${c})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(px,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:c,ref:h}=r,m=h?`(${h})`:"",g=c.status||"";this.log("receive",`${g} ${i} ${o} ${m}`.trim(),c),this.channels.filter(y=>y._isMember(i)).forEach(y=>y._trigger(o,c,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Qt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${n}${i}${o}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([Ex],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:mx};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Qt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new up(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,o,c,h,m,g,y,v;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:xu,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:gl.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:cu,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(b=>jx[b-1]||Ax),this.encode=(y=n?.encode)!==null&&y!==void 0?y:((b,x)=>x(JSON.stringify(b))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class $u extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ze(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class Tx extends $u{constructor(n,r,i){super(n),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Su extends $u{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var Rx=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};const fp=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...r)=>nn(async()=>{const{default:i}=await Promise.resolve().then(()=>qr);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Ox=()=>Rx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nn(()=>Promise.resolve().then(()=>qr),void 0)).Response:Response}),Cu=l=>{if(Array.isArray(l))return l.map(r=>Cu(r));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=Cu(i)}),n},kx=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var kn=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};const uu=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Ux=(l,n,r)=>kn(void 0,void 0,void 0,function*(){const i=yield Ox();l instanceof i&&!r?.noResolveJson?l.json().then(o=>{const c=l.status||500,h=o?.statusCode||c+"";n(new Tx(uu(o),c,h))}).catch(o=>{n(new Su(uu(o),o))}):n(new Su(uu(l),l))}),Dx=(l,n,r,i)=>{const o={method:l,headers:n?.headers||{}};return l==="GET"||!i?o:(kx(i)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(i)):o.body=i,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),r))};function Is(l,n,r,i,o,c){return kn(this,void 0,void 0,function*(){return new Promise((h,m)=>{l(r,Dx(n,i,o,c)).then(g=>{if(!g.ok)throw g;return i?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>Ux(g,m,i))})})}function El(l,n,r,i){return kn(this,void 0,void 0,function*(){return Is(l,"GET",n,r,i)})}function ta(l,n,r,i,o){return kn(this,void 0,void 0,function*(){return Is(l,"POST",n,i,o,r)})}function ju(l,n,r,i,o){return kn(this,void 0,void 0,function*(){return Is(l,"PUT",n,i,o,r)})}function Mx(l,n,r,i){return kn(this,void 0,void 0,function*(){return Is(l,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function mp(l,n,r,i,o){return kn(this,void 0,void 0,function*(){return Is(l,"DELETE",n,i,o,r)})}var zx=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};class Lx{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return zx(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}}var Bx=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};class qx{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}asStream(){return new Lx(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.execute().then(n,r)}execute(){return Bx(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}}var vt=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};const Hx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $x{constructor(n,r={},i,o){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=i,this.fetch=fp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,i,o){return vt(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},wg),o);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",this.encodeMetadata(g))):(c=i,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),o?.headers&&(m=Object.assign(Object.assign({},m),o.headers));const y=this._removeEmptyFolders(r),v=this._getFinalPath(y),b=yield(n=="PUT"?ju:ta)(this.fetch,`${this.url}/object/${v}`,c,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:y,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ze(c))return{data:null,error:c};throw c}})}upload(n,r,i){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,i)})}uploadToSignedUrl(n,r,i,o){return vt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",r);try{let g;const y=Object.assign({upsert:wg.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",y.cacheControl)):(g=i,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const b=yield ju(this.fetch,m.toString(),g,{headers:v});return{data:{path:c,fullPath:b.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Ze(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,r){return vt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const c=yield ta(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),h=new URL(this.url+c.url),m=h.searchParams.get("token");if(!m)throw new $u("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}update(n,r,i){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,i)})}move(n,r,i){return vt(this,void 0,void 0,function*(){try{return{data:yield ta(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}copy(n,r,i){return vt(this,void 0,void 0,function*(){try{return{data:{path:(yield ta(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}createSignedUrl(n,r,i){return vt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),c=yield ta(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}createSignedUrls(n,r,i){return vt(this,void 0,void 0,function*(){try{const o=yield ta(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}download(n,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),h=c?`?${c}`:"",m=this._getFinalPath(n),g=()=>El(this.fetch,`${this.url}/${o}/${m}${h}`,{headers:this.headers,noResolveJson:!0});return new qx(g,this.shouldThrowOnError)}info(n){return vt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const i=yield El(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Cu(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}exists(n){return vt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield Mx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i)&&i instanceof Su){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,r){const i=this._getFinalPath(n),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const m=typeof r?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(r?.transform||{});g!==""&&o.push(g);let y=o.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${y}`)}}}remove(n){return vt(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}list(n,r,i){return vt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Hx),r),{prefix:n||""});return{data:yield ta(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}listV2(n,r){return vt(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield ta(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const Gx="2.75.0",Vx={"X-Client-Info":`storage-js/${Gx}`};var Cr=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};class Px{constructor(n,r={},i,o){this.shouldThrowOnError=!1;const c=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vx),r),this.fetch=fp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Cr(this,void 0,void 0,function*(){try{return{data:yield El(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}getBucket(n){return Cr(this,void 0,void 0,function*(){try{return{data:yield El(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}createBucket(n){return Cr(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield ta(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}updateBucket(n,r){return Cr(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}emptyBucket(n){return Cr(this,void 0,void 0,function*(){try{return{data:yield ta(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(n){return Cr(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}}class Yx extends Px{constructor(n,r={},i,o){super(n,r,i,o)}from(n){return new $x(this.url,this.headers,n,this.fetch)}}const Kx="2.75.0";let qs="";typeof Deno<"u"?qs="deno":typeof document<"u"?qs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qs="react-native":qs="node";const Qx={"X-Client-Info":`supabase-js-${qs}/${Kx}`},Xx={headers:Qx},Ix={schema:"public"},Jx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zx={};var Fx=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};const Wx=l=>{let n;return l?n=l:typeof fetch>"u"?n=rp:n=fetch,(...r)=>n(...r)},ew=()=>typeof Headers>"u"?sp:Headers,tw=(l,n,r)=>{const i=Wx(r),o=ew();return(c,h)=>Fx(void 0,void 0,void 0,function*(){var m;const g=(m=yield n())!==null&&m!==void 0?m:l;let y=new o(h?.headers);return y.has("apikey")||y.set("apikey",l),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),i(c,Object.assign(Object.assign({},h),{headers:y}))})};var aw=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};function nw(l){return l.endsWith("/")?l:l+"/"}function rw(l,n){var r,i;const{db:o,auth:c,realtime:h,global:m}=l,{db:g,auth:y,realtime:v,global:b}=n,x={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},y),c),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(r=b?.headers)!==null&&r!==void 0?r:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>aw(this,void 0,void 0,function*(){return""})};return l.accessToken?x.accessToken=l.accessToken:delete x.accessToken,x}function sw(l){const n=l?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(nw(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const gp="2.75.0",Rr=30*1e3,Au=3,du=Au*Rr,iw="http://localhost:9999",lw="supabase.auth.token",ow={"X-Client-Info":`gotrue-js/${gp}`},Eu="X-Supabase-Api-Version",pp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uw=600*1e3;class Ys extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function ee(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class dw extends Ys{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function hw(l){return ee(l)&&l.name==="AuthApiError"}class Tn extends Ys{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class sn extends Ys{constructor(n,r,i,o){super(n,i,o),this.name=r,this.status=i}}class Za extends sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fw(l){return ee(l)&&l.name==="AuthSessionMissingError"}class jr extends sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pl extends sn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class yl extends sn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mw(l){return ee(l)&&l.name==="AuthImplicitGrantRedirectError"}class _g extends sn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nu extends sn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function hu(l){return ee(l)&&l.name==="AuthRetryableFetchError"}class Sg extends sn{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Tu extends sn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cg=` 	
\r=`.split(""),gw=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<Cg.length;n+=1)l[Cg[n].charCodeAt(0)]=-2;for(let n=0;n<Nl.length;n+=1)l[Nl[n].charCodeAt(0)]=n;return l})();function jg(l,n,r){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(Nl[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(Nl[i]),n.queuedBits-=6}}function yp(l,n,r){const i=gw[l];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Ag(l){const n=[],r=h=>{n.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=h=>{vw(h,i,r)};for(let h=0;h<l.length;h+=1)yp(l.charCodeAt(h),o,c);return n.join("")}function pw(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function yw(l,n){for(let r=0;r<l.length;r+=1){let i=l.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(l.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}pw(i,n)}}function vw(l,n,r){if(n.utf8seq===0){if(l<=127){r(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ur(l){const n=[],r={queue:0,queuedBits:0},i=o=>{n.push(o)};for(let o=0;o<l.length;o+=1)yp(l.charCodeAt(o),r,i);return new Uint8Array(n)}function bw(l){const n=[];return yw(l,r=>n.push(r)),new Uint8Array(n)}function Rn(l){const n=[],r={queue:0,queuedBits:0},i=o=>{n.push(o)};return l.forEach(o=>jg(o,r,i)),jg(null,r,i),n.join("")}function xw(l){return Math.round(Date.now()/1e3)+l}function ww(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",jn={tested:!1,writable:!1},vp=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jn.tested)return jn.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),jn.tested=!0,jn.writable=!0}catch{jn.tested=!0,jn.writable=!1}return jn.writable};function _w(l){const n={},r=new URL(l);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return r.searchParams.forEach((i,o)=>{n[o]=i}),n}const bp=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...r)=>nn(async()=>{const{default:i}=await Promise.resolve().then(()=>qr);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Sw=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Or=async(l,n,r)=>{await l.setItem(n,JSON.stringify(r))},An=async(l,n)=>{const r=await l.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ja=async(l,n)=>{await l.removeItem(n)};class Ml{constructor(){this.promise=new Ml.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Ml.promiseConstructor=Promise;function fu(l){const n=l.split(".");if(n.length!==3)throw new Tu("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!cw.test(n[i]))throw new Tu("JWT not in base64url format");return{header:JSON.parse(Ag(n[0])),payload:JSON.parse(Ag(n[1])),signature:Ur(n[2]),raw:{header:n[0],payload:n[1]}}}async function Cw(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function jw(l,n){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await l(c);if(!n(c,null,h)){i(h);return}}catch(h){if(!n(c,h)){o(h);return}}})()})}function Aw(l){return("0"+l.toString(16)).substr(-2)}function Ew(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(n),Array.from(n,Aw).join("")}async function Nw(l){const r=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function Tw(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const r=await Nw(l);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ar(l,n,r=!1){const i=Ew();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await Or(l,`${n}-code-verifier`,o);const c=await Tw(i);return[c,i===c?"plain":"s256"]}const Rw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ow(l){const n=l.headers.get(Eu);if(!n||!n.match(Rw))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function kw(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function Uw(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Er(l){if(!Dw.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mu(){const l={};return new Proxy(l,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Eg(l){return JSON.parse(JSON.stringify(l))}var Mw=function(l,n){var r={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(r[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(l);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(l,i[o])&&(r[i[o]]=l[i[o]]);return r};const En=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),zw=[502,503,504];async function Ng(l){var n;if(!Sw(l))throw new Nu(En(l),0);if(zw.includes(l.status))throw new Nu(En(l),l.status);let r;try{r=await l.json()}catch(c){throw new Tn(En(c),c)}let i;const o=Ow(l);if(o&&o.getTime()>=pp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Sg(En(r),l.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Za}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Sg(En(r),l.status,r.weak_password.reasons);throw new dw(En(r),l.status||500,i)}const Lw=(l,n,r,i)=>{const o={method:l,headers:n?.headers||{}};return l==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function re(l,n,r,i){var o;const c=Object.assign({},i?.headers);c[Eu]||(c[Eu]=pp["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const h=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Bw(l,n,r+m,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(g):{data:Object.assign({},g),error:null}}async function Bw(l,n,r,i,o,c){const h=Lw(n,i,o,c);let m;try{m=await l(r,Object.assign({},h))}catch(g){throw console.error(g),new Nu(En(g),0)}if(m.ok||await Ng(m),i?.noResolveJson)return m;try{return await m.json()}catch(g){await Ng(g)}}function Kt(l){var n;let r=null;$w(l)&&(r=Object.assign({},l),l.expires_at||(r.expires_at=xw(l.expires_in)));const i=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:r,user:i},error:null}}function Tg(l){const n=Kt(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=l.weak_password),n}function Fa(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function qw(l){return{data:l,error:null}}function Hw(l){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:o,verification_type:c}=l,h=Mw(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:i,redirect_to:o,verification_type:c},g=Object.assign({},h);return{data:{properties:m,user:g},error:null}}function Rg(l){return l}function $w(l){return l.access_token&&l.refresh_token&&l.expires_in}const gu=["global","local","others"];var Gw=function(l,n){var r={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(r[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(l);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(l,i[o])&&(r[i[o]]=l[i[o]]);return r};class Vw{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=bp(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=gu[0]){if(gu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gu.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ee(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fa})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=Gw(n,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Hw,redirectTo:r?.redirectTo})}catch(r){if(ee(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Fa})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,o,c,h,m,g;try{const y={nextPage:null,lastPage:0,total:0},v=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Rg});if(v.error)throw v.error;const b=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(C=>{const E=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(C.split(";")[1].split("=")[1]);y[`${T}Page`]=E}),y.total=parseInt(x)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if(ee(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Er(n);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Fa})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Er(n);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Fa})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){Er(n);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fa})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){Er(n.userId);try{const{data:r,error:i}=await re(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Er(n.userId),Er(n.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,o,c,h,m,g;try{const y={nextPage:null,lastPage:0,total:0},v=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Rg});if(v.error)throw v.error;const b=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(C=>{const E=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(C.split(";")[1].split("=")[1]);y[`${T}Page`]=E}),y.total=parseInt(x)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if(ee(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}}function Og(l={}){return{getItem:n=>l[n]||null,setItem:(n,r)=>{l[n]=r},removeItem:n=>{delete l[n]}}}const Nr={debug:!!(globalThis&&vp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Pw extends xp{}async function Yw(l,n,r){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,o.name);try{return await r()}finally{Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,o.name)}}else{if(n===0)throw Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Pw(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Nr.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Kw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wp(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Qw(l){return parseInt(l,16)}function Xw(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Iw(l){var n;const{chainId:r,domain:i,expirationTime:o,issuedAt:c=new Date,nonce:h,notBefore:m,requestId:g,resources:y,scheme:v,uri:b,version:x}=l;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const _=wp(l.address),C=v?`${v}://${i}`:i,E=l.statement?`${l.statement}
`:"",T=`${C} wants you to sign in with your Ethereum account:
${_}

${E}`;let R=`URI: ${b}
Version: ${x}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(o&&(R+=`
Expiration Time: ${o.toISOString()}`),m&&(R+=`
Not Before: ${m.toISOString()}`),g&&(R+=`
Request ID: ${g}`),y){let O=`
Resources:`;for(const z of y){if(!z||typeof z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${z}`);O+=`
- ${z}`}R+=O}return`${T}
${R}`}class Je extends Error{constructor({message:n,code:r,cause:i,name:o}){var c;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=o??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class Tl extends Je{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Jw({error:l,options:n}){var r,i,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(n.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new Je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new Je({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return c.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new Je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const h=window.location.hostname;if(Sp(h)){if(c.rp.id!==h)return new Je({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Zw({error:l,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new Je({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const i=window.location.hostname;if(Sp(i)){if(r.rpId!==i)return new Je({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}var _p=function(l,n){var r={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(r[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(l);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(l,i[o])&&(r[i[o]]=l[i[o]]);return r};class Fw{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Ww=new Fw;function e_(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:n,user:r,excludeCredentials:i}=l,o=_p(l,["challenge","user","excludeCredentials"]),c=Ur(n).buffer,h=Object.assign(Object.assign({},r),{id:Ur(r.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:c,user:h});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let g=0;g<i.length;g++){const y=i[g];m.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:Ur(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function t_(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:n,allowCredentials:r}=l,i=_p(l,["challenge","allowCredentials"]),o=Ur(n).buffer,c=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];c.allowCredentials[h]=Object.assign(Object.assign({},m),{id:Ur(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return c}function a_(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l;return{id:l.id,rawId:l.id,response:{attestationObject:Rn(new Uint8Array(l.response.attestationObject)),clientDataJSON:Rn(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function n_(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l,i=l.getClientExtensionResults(),o=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Rn(new Uint8Array(o.authenticatorData)),clientDataJSON:Rn(new Uint8Array(o.clientDataJSON)),signature:Rn(new Uint8Array(o.signature)),userHandle:o.userHandle?Rn(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Sp(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function kg(){var l,n;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function r_(l){try{const n=await navigator.credentials.create(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Tl("Browser returned unexpected credential type",n)}:{data:null,error:new Tl("Empty credential response",n)}}catch(n){return{data:null,error:Jw({error:n,options:l})}}}async function s_(l){try{const n=await navigator.credentials.get(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Tl("Browser returned unexpected credential type",n)}:{data:null,error:new Tl("Empty credential response",n)}}catch(n){return{data:null,error:Zw({error:n,options:l})}}}const i_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},l_={userVerification:"preferred",hints:["security-key"]};function Rl(...l){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of l)if(o)for(const c in o){const h=o[c];if(h!==void 0)if(Array.isArray(h))i[c]=h;else if(r(h))i[c]=h;else if(n(h)){const m=i[c];n(m)?i[c]=Rl(m,h):i[c]=Rl(h)}else i[c]=h}return i}function o_(l,n){return Rl(i_,l,n||{})}function c_(l,n){return Rl(l_,l,n||{})}class u_{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:o},c){try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!h)return{data:null,error:m};const g=o??Ww.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:y}=h.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${i}`),y.displayName||(y.displayName=y.name)}switch(h.webauthn.type){case"create":{const y=o_(h.webauthn.credential_options.publicKey,c?.create),{data:v,error:b}=await r_({publicKey:y,signal:g});return v?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const y=c_(h.webauthn.credential_options.publicKey,c?.request),{data:v,error:b}=await s_(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:y,signal:g}));return v?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(h){return ee(h)?{data:null,error:h}:{data:null,error:new Tn("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}},c){if(!r)return{data:null,error:new Ys("rpId is required for WebAuthn authentication")};try{if(!kg())return{data:null,error:new Tn("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:c});if(!h)return{data:null,error:m};const{webauthn:g}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:i,credential_response:g.credential_response}})}catch(h){return ee(h)?{data:null,error:h}:{data:null,error:new Tn("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o},c){if(!r)return{data:null,error:new Ys("rpId is required for WebAuthn registration")};try{if(!kg())return{data:null,error:new Tn("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:m};const{data:g,error:y}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:c});return g?this._verify({factorId:h.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:i,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(h){return ee(h)?{data:null,error:h}:{data:null,error:new Tn("Unexpected error in register",h)}}}}Kw();const d_={url:iw,storageKey:lw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ow,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ug(l,n,r){return await r()}const Tr={};class Ks{get jwks(){var n,r;return(r=(n=Tr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Tr[this.storageKey]=Object.assign(Object.assign({},Tr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Tr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Tr[this.storageKey]=Object.assign(Object.assign({},Tr[this.storageKey]),{cachedAt:n})}constructor(n){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ks.nextInstanceID,Ks.nextInstanceID+=1,this.instanceID>0&&Tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},d_),n);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Vw({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=bp(o.fetch),this.lock=o.lock||Ug,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Tt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Yw:this.lock=Ug,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new u_(this)},this.persistSession?(o.storage?this.storage=o.storage:vp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Og(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Og(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gp}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=_w(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Tt()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),mw(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ee(r)?{error:r}:{error:new Tn("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,o;try{const c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Kt}),{data:h,error:m}=c;if(m||!h)return{data:{user:null,session:null},error:m};const g=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(c){if(ee(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var r,i,o;try{let c;if("email"in n){const{email:v,password:b,options:x}=n;let _=null,C=null;this.flowType==="pkce"&&([_,C]=await Ar(this.storage,this.storageKey)),c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:v,password:b,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:_,code_challenge_method:C},xform:Kt})}else if("phone"in n){const{phone:v,password:b,options:x}=n;c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Kt})}else throw new pl("You must provide either an email or phone number and a password");const{data:h,error:m}=c;if(m||!h)return{data:{user:null,session:null},error:m};const g=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(c){if(ee(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:h,options:m}=n;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Tg})}else if("phone"in n){const{phone:c,password:h,options:m}=n;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Tg})}else throw new pl("You must provide either an email or phone number and a password");const{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new jr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,i,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,o,c,h,m,g,y,v,b,x;let _,C;if("message"in n)_=n.message,C=n.signature;else{const{chain:E,wallet:T,statement:R,options:O}=n;let z;if(Tt())if(typeof T=="object")z=T;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")z=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=T}const V=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href),P=await z.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=wp(P[0]);let Z=(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!Z){const Y=await z.request({method:"eth_chainId"});Z=Qw(Y)}const se={domain:V.host,address:$,statement:R,uri:V.href,version:"1",chainId:Z,nonce:(o=O?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(c=O?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=O?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=O?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=O?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=O?.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=Iw(se),C=await z.request({method:"personal_sign",params:[Xw(_),$]})}try{const{data:E,error:T}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:C},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Kt});if(T)throw T;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new jr}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:T})}catch(E){if(ee(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(n){var r,i,o,c,h,m,g,y,v,b,x,_;let C,E;if("message"in n)C=n.message,E=n.signature;else{const{chain:T,wallet:R,statement:O,options:z}=n;let V;if(Tt())if(typeof R=="object")V=R;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))V=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=R}const P=new URL((r=z?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in V&&V.signIn){const $=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),O?{statement:O}:null));let Z;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")Z=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)Z=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)C=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),E=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${P.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(o=(i=z?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=z?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((h=z?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((m=z?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((g=z?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((y=z?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((b=(v=z?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...z.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const $=await V.signMessage(new TextEncoder().encode(C),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=$}}try{const{data:T,error:R}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Rn(E)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Kt});if(R)throw R;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new jr}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:R})}catch(T){if(ee(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(n){const r=await An(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:c,error:h}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Kt});if(await Ja(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new jr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:h})}catch(c){if(ee(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:r,provider:i,token:o,access_token:c,nonce:h}=n,m=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Kt}),{data:g,error:y}=m;return y?{data:{user:null,session:null},error:y}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new jr}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:y})}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,i,o,c,h;try{if("email"in n){const{email:m,options:g}=n;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Ar(this.storage,this.storageKey));const{error:b}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:m,options:g}=n,{data:y,error:v}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:v}}throw new pl("You must provide either an email or phone number.")}catch(m){if(ee(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var r,i;try{let o,c;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:m}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Kt});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,y=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(n){var r,i,o;try{let c=null,h=null;return this.flowType==="pkce"&&([c,h]=await Ar(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:qw})}catch(c){if(ee(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Za;const{error:o}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:o,options:c}=n,{error:h}=await re(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:i,type:o,options:c}=n,{data:h,error:m}=await re(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new pl("You must provide either an email or phone number and a type")}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await An(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<du:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const h=await An(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=mu()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,y,v)=>(!h&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,y,v))})}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Fa}):await this._useSession(async r=>{var i,o,c;const{data:h,error:m}=r;if(m)throw m;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Za}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Fa})})}catch(r){if(ee(r))return fw(r)&&(await this._removeSession(),await Ja(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new Za;const h=o.session;let m=null,g=null;this.flowType==="pkce"&&n.email!=null&&([m,g]=await Ar(this.storage,this.storageKey));const{data:y,error:v}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:g}),jwt:h.access_token,xform:Fa});if(v)throw v;return h.user=y.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Za;const r=Date.now()/1e3;let i=r,o=!0,c=null;const{payload:h}=fu(n.access_token);if(h.exp&&(i=h.exp,o=i<=r),o){const{data:m,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:g}=await this._getUser(n.access_token);if(g)throw g;c={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(ee(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:h,error:m}=r;if(m)throw m;n=(i=h.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Za;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!Tt())throw new yl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new yl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _g("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new _g("No code detected.");const{data:O,error:z}=await this._exchangeCodeForSession(n.code);if(z)throw z;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:h,expires_in:m,expires_at:g,token_type:y}=n;if(!c||!m||!h||!y)throw new yl("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(m);let x=v+b;g&&(x=parseInt(g));const _=x-v;_*1e3<=Rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${b}s`);const C=x-b;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,x,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,x,v);const{data:E,error:T}=await this._getUser(c);if(T)throw T;const R={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:b,expires_at:x,refresh_token:h,token_type:y,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:n.type},error:null}}catch(i){if(ee(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await An(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:c}=r;if(c)return{error:c};const h=(i=o.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:m}=await this.admin.signOut(h,n);if(m&&!(hw(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await Ja(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=ww(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,o;try{const{data:{session:c},error:h}=r;if(h)throw h;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ar(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(ee(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:o}=await this._useSession(async c=>{var h,m,g,y,v;const{data:b,error:x}=c;if(x)throw x;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return Tt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(ee(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:c}}=r;if(o)throw o;const{options:h,provider:m,token:g,access_token:y,nonce:v}=n,b=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:g,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Kt}),{data:x,error:_}=b;return _?{data:{user:null,session:null},error:_}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new jr}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:_})}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,o;const{data:c,error:h}=r;if(h)throw h;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await jw(async o=>(o>0&&await Cw(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Kt})),(o,c)=>{const h=200*Math.pow(2,o);return c&&hu(c)&&Date.now()+h-i<Rr})}catch(i){if(this._debug(r,"error",i),ee(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),Tt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await An(this.storage,this.storageKey);if(o&&this.userStorage){let h=await An(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await Or(this.userStorage,this.storageKey+"-user",h)),o.user=(n=h?.user)!==null&&n!==void 0?n:mu()}else if(o&&!o.user&&!o.user){const h=await An(this.storage,this.storageKey+"-user");h&&h?.user?(o.user=h.user,await Ja(this.storage,this.storageKey+"-user"),await Or(this.storage,this.storageKey,o)):o.user=mu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<du;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${du}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),hu(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(o.access_token);!m&&h?.user?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Za;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ml;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new Za;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={data:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(o,"error",c),ee(c)){const h={data:null,error:c};return hu(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,i=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(g){c.push(g)}});if(await Promise.all(h),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Or(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=Eg(o);await Or(this.storage,this.storageKey,c)}else{const o=Eg(r);await Or(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ja(this.storage,this.storageKey),await Ja(this.storage,this.storageKey+"-code-verifier"),await Ja(this.storage,this.storageKey+"-user"),this.userStorage&&await Ja(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Rr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-n)/Rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Rr}ms, refresh threshold is ${Au} ticks`),o<=Au&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof xp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,h]=await Ar(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(m.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:o,error:c}=r;return c?{data:null,error:c}:await re(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,o;const{data:c,error:h}=r;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:y}=await re(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:c}=r;if(c)return{data:null,error:c};const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?a_(n.webauthn.credential_response):n_(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:g}=await re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:g})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:c}=r;if(c)return{data:null,error:c};const h=await re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:e_(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:t_(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ee(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,i;const{data:{session:o},error:c}=n;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=fu(o.access_token);let m=null;h.aal&&(m=h.aal);let g=m;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const v=h.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(m=>m.kid===n);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(m=>m.kid===n),i&&this.jwks_cached_at+uw>o)return i;const{data:c,error:h}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,i=c.keys.find(m=>m.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:_,error:C}=await this.getSession();if(C||!_.session)return{data:null,error:C};i=_.session.access_token}const{header:o,payload:c,signature:h,raw:{header:m,payload:g}}=fu(i);r?.allowExpired||kw(c.exp);const y=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!y){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:c,header:o,signature:h},error:null}}const v=Uw(o.alg),b=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,h,bw(`${m}.${g}`)))throw new Tu("Invalid JWT signature");return{data:{claims:c,header:o,signature:h},error:null}}catch(i){if(ee(i))return{data:null,error:i};throw i}}}Ks.nextInstanceID=0;const h_=Ks;class f_ extends h_{constructor(n){super(n)}}var m_=function(l,n,r,i){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{y(i.next(v))}catch(b){h(b)}}function g(v){try{y(i.throw(v))}catch(b){h(b)}}function y(v){v.done?c(v.value):o(v.value).then(m,g)}y((i=i.apply(l,n||[])).next())})};class g_{constructor(n,r,i){var o,c,h;this.supabaseUrl=n,this.supabaseKey=r;const m=sw(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:Ix,realtime:Zx,auth:Object.assign(Object.assign({},Jx),{storageKey:g}),global:Xx},v=rw(i??{},y);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=tw(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new dx(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Yx(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new tx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,i)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return m_(this,void 0,void 0,function*(){var n,r;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:c,storageKey:h,flowType:m,lock:g,debug:y},v,b){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f_({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),v),storageKey:h,autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:c,flowType:m,lock:g,debug:y,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Nx(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(n,r,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const p_=(l,n,r)=>new g_(l,n,r);function y_(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const n=l.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}y_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const v_="https://xtdudfccgbdanmmncwhn.supabase.co",b_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",K=p_(v_,b_,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),x_=Object.freeze(Object.defineProperty({__proto__:null,supabase:K},Symbol.toStringTag,{value:"Module"}));class w_{createUserFromProfileData(n,r){return{id:n.id,email:n.email||"",displayName:r?.display_name||n.user_metadata?.display_name||n.email?.split("@")[0],username:r?.username||n.user_metadata?.username||n.email?.split("@")[0],profileCompleted:r?.profile_completed||!!n.user_metadata?.profile_completed,createdAt:new Date(n.created_at)}}async mapAuthUserToUser(n){try{const{data:r}=await K.from("user_profiles").select("display_name, username, profile_completed").eq("id",n.id).single();return r&&typeof r=="object"?this.createUserFromProfileData(n,r):this.createUserFromProfileData(n)}catch{return this.createUserFromProfileData(n)}}async getCurrentUser(){try{const{data:{user:n},error:r}=await K.auth.getUser();return r||!n?null:await this.mapAuthUserToUser(n)}catch{return null}}async signIn(n,r){try{const{data:i,error:o}=await K.auth.signInWithPassword({email:n,password:r});return o?{success:!1,error:o.message}:{success:!0,data:{id:i.user.id,email:i.user.email||"",displayName:i.user.user_metadata?.display_name,createdAt:new Date(i.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(n,r){try{const i=window.location.origin,o=i.includes("github.io")?`${i}/`:`${i}/traveller-dashboard/`,{data:c,error:h}=await K.auth.signUp({email:n,password:r,options:{emailRedirectTo:o}});return h?{success:!1,error:h.message}:c.user?{success:!0,data:{id:c.user.id,email:c.user.email||"",displayName:c.user.user_metadata?.display_name,createdAt:new Date(c.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:n}=await K.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(n){const{data:{subscription:r}}=K.auth.onAuthStateChange(async(i,o)=>{if(o?.user){const c=await this.mapAuthUserToUser(o.user);n(c)}else n(null)});return()=>r.unsubscribe()}async completeProfile(n,r,i){try{const{error:o}=await K.from("user_profiles").update({display_name:r,username:i,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",n);if(o)return o.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:o.message};const{data:c,error:h}=await K.auth.updateUser({data:{display_name:r,username:i,profile_completed:!0}});return h?{success:!1,error:h.message}:{success:!0,data:{id:c.user.id,email:c.user.email||"",displayName:r,username:i,profileCompleted:!0,createdAt:new Date(c.user.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to complete profile"}}}buildProfileUpdates(n,r){const i={updated_at:new Date().toISOString()};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}buildAuthUpdates(n,r){const i={};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}async updateProfile(n,r,i){try{const o=this.buildProfileUpdates(r,i),{error:c}=await K.from("user_profiles").update(o).eq("id",n);if(c)return c.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:c.message};const h=this.buildAuthUpdates(r,i),{data:m,error:g}=await K.auth.updateUser({data:h});if(g)return{success:!1,error:g.message};const{data:y}=await K.from("user_profiles").select("*").eq("id",n).single(),v=y;return{success:!0,data:{id:m.user.id,email:m.user.email||"",displayName:v?.display_name||m.user.user_metadata?.display_name,username:v?.username||m.user.user_metadata?.username,profileCompleted:v?.profile_completed||m.user.user_metadata?.profile_completed||!1,createdAt:new Date(m.user.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to update profile"}}}async changePassword(n,r,i){try{const{data:o}=await K.auth.getUser();if(!o.user?.email)return{success:!1,error:"User not found"};const{error:c}=await K.auth.signInWithPassword({email:o.user.email,password:r});if(c)return{success:!1,error:"Current password is incorrect"};const{error:h}=await K.auth.updateUser({password:i});return h?{success:!1,error:h.message}:{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to change password"}}}async deleteAccount(n){try{const{error:r}=await K.from("user_profiles").delete().eq("id",n);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class Cp{async getCampaigns(n){try{const{data:r,error:i}=await K.from("campaigns").select(`
          *,
          campaign_members!inner(
            is_admin,
            is_gm,
            is_player,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",n).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(c=>{const h=c.campaign_members[0];return{id:c.id,name:c.name,description:c.description||void 0,createdBy:c.created_by,createdAt:new Date(c.created_at||Date.now()),updatedAt:new Date(c.updated_at||Date.now()),userRoles:h?{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1}:{isAdmin:!1,isGm:!1,isPlayer:!1},memberCount:c.member_count?.[0]?.count||0,isOwner:c.created_by===n}})}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(n){try{const{data:r,error:i}=await K.from("campaigns").select("*").eq("id",n).single();return i?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at||Date.now()),updatedAt:new Date(r.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(n,r,i=!1){try{const{data:o,error:c}=await K.from("campaigns").insert({name:r.name,description:r.description,created_by:n}).select().single();if(c)return{success:!1,error:`Failed to create campaign: ${c.message}`};const{error:h}=await K.from("campaign_members").insert({campaign_id:o.id,user_id:n,role:"admin"});if(h)return await K.from("campaigns").delete().eq("id",o.id),{success:!1,error:`Failed to set up campaign admin: ${h.message}`};if(i){const{error:g}=await K.from("campaign_members").insert({campaign_id:o.id,user_id:n,role:"gm"})}return{success:!0,data:{id:o.id,name:o.name,description:o.description||void 0,createdBy:o.created_by,createdAt:new Date(o.created_at||Date.now()),updatedAt:new Date(o.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(n,r){try{const{error:i}=await K.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",n);return i?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(n){try{const{error:r}=await K.from("campaigns").delete().eq("id",n);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(n){try{const{data:r,error:i}=await K.from("campaign_members").select("id, user_id, is_admin, is_gm, is_player, created_at").eq("campaign_id",n).order("created_at",{ascending:!0});if(i)return{success:!1,error:"Failed to fetch campaign members"};const o=[];for(const c of r){const h=c;try{const{data:m,error:g}=await K.from("user_profiles").select("*").eq("id",h.user_id).single();let y,v,b;if(!g&&m){const x=m;y=x.email||"",v=x.display_name||void 0,b=x.username||void 0}else y=`user_${h.user_id.slice(0,8)}@example.com`,v=void 0,b=void 0;o.push({id:h.id,userId:h.user_id,email:y,displayName:v,username:b,roles:{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1},joinedAt:new Date(h.created_at)})}catch{o.push({id:h.id,userId:h.user_id,email:`user_${h.user_id.slice(0,8)}@example.com`,displayName:void 0,username:void 0,roles:{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1},joinedAt:new Date(h.created_at)})}}return{success:!0,data:o}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(n,r,i){try{const{data:o,error:c}=await K.from("user_profiles").select("id").eq("email",r).single();if(c||!o){if(!(await K.auth.getUser()).data.user)return{success:!1,error:"You must be logged in to send invitations"};try{const{data:y,error:v}=await K.functions.invoke("invite-user",{body:{email:r,campaignId:n,role:i,campaignName:void 0}});return v?{success:!1,error:`Failed to send invitation: ${v.message||JSON.stringify(v)}`}:y?.error?{success:!1,error:`${y.error}${y.details?`: ${y.details}`:""}`}:{success:!0}}catch(y){return{success:!1,error:`Failed to send invitation: ${y instanceof Error?y.message:"Unknown error"}`}}}const{data:h}=await K.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",o.id).single();if(h)return{success:!1,error:"User is already a member of this campaign"};const{error:m}=await K.from("campaign_members").insert({campaign_id:n,user_id:o.id,role:i});return m?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(n,r,i){try{const{error:o}=await K.from("campaign_members").update({is_admin:i.isAdmin,is_gm:i.isGm,is_player:i.isPlayer}).eq("campaign_id",n).eq("user_id",r);return o?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(n,r){try{const{error:i}=await K.from("campaign_members").delete().eq("campaign_id",n).eq("user_id",r);return i?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createPendingInvitation(n,r,i,o){try{const{data:c}=await K.from("pending_invitations").select("id").eq("email",r).eq("campaign_id",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(c)return{success:!1,error:"An invitation has already been sent to this email address for this campaign"};const{data:h}=await K.from("campaigns").select("name").eq("id",n).single(),{data:m}=await K.from("user_profiles").select("display_name, email").eq("id",o).single(),{data:g,error:y}=await K.from("pending_invitations").insert({email:r,campaign_id:n,invited_by:o,role:i}).select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at
        `).single();return y?{success:!1,error:"Failed to create invitation"}:(await K.rpc("send_campaign_invitation",{p_email:r,p_campaign_id:n,p_campaign_name:h?.name||"Unknown Campaign",p_inviter_name:m?.display_name||m?.email||"Unknown User",p_role:i}),{success:!0,data:{id:g.id,email:g.email,campaignId:g.campaign_id,campaignName:h?.name,invitedBy:g.invited_by,inviterName:m?.display_name||m?.email,role:g.role,createdAt:new Date(g.created_at||""),expiresAt:new Date(g.expires_at||""),acceptedAt:g.accepted_at?new Date(g.accepted_at):void 0}})}catch{return{success:!1,error:"An unexpected error occurred"}}}async getPendingInvitations(n){try{const{data:r,error:i}=await K.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("campaign_id",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(c=>({id:c.id,email:c.email,campaignId:c.campaign_id,campaignName:c.campaigns?.name,invitedBy:c.invited_by,inviterName:void 0,role:c.role,createdAt:new Date(c.created_at||""),expiresAt:new Date(c.expires_at||""),acceptedAt:c.accepted_at?new Date(c.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserPendingInvitations(n){try{const{data:r,error:i}=await K.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("email",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(c=>({id:c.id,email:c.email,campaignId:c.campaign_id,campaignName:c.campaigns?.name,invitedBy:c.invited_by,inviterName:void 0,role:c.role,createdAt:new Date(c.created_at||""),expiresAt:new Date(c.expires_at||""),acceptedAt:c.accepted_at?new Date(c.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptPendingInvitation(n,r){try{const{data:i,error:o}=await K.from("pending_invitations").select("*").eq("id",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(o||!i)return{success:!1,error:"Invitation not found or expired"};const{data:c}=await K.from("campaign_members").select("id").eq("campaign_id",i.campaign_id).eq("user_id",r).single();if(c)return await K.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",n),{success:!1,error:"You are already a member of this campaign"};const{error:h}=await K.from("campaign_members").insert({campaign_id:i.campaign_id,user_id:r,is_admin:i.role==="admin",is_gm:i.role==="gm",is_player:i.role==="player"});if(h)return{success:!1,error:"Failed to add you to the campaign"};const{error:m}=await K.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",n);return{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declinePendingInvitation(n){try{const{error:r}=await K.from("pending_invitations").delete().eq("id",n);return r?{success:!1,error:"Failed to decline invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async cancelPendingInvitation(n){try{const{error:r}=await K.from("pending_invitations").delete().eq("id",n);return r?{success:!1,error:"Failed to cancel invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(n,r){try{const i=await this.getUserRoles(n,r);if(!i.success||!i.data)return{success:!1,error:i.error||"User is not a member of this campaign"};const o=i.data;let c;return o.isAdmin?c="admin":o.isGm?c="gm":c="player",{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRoles(n,r){try{const{data:i,error:o}=await K.from("campaign_members").select("is_admin, is_gm, is_player").eq("campaign_id",n).eq("user_id",r).single();if(o||!i)return{success:!1,error:"User is not a member of this campaign"};const c=i;return{success:!0,data:{isAdmin:c.is_admin||!1,isGm:c.is_gm||!1,isPlayer:c.is_player||!1}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(n,r){try{const{data:i,error:o}=await K.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",r).single();return o?{success:!0,data:!1}:{success:!0,data:!!i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(n){try{const{data:r,error:i}=await K.from("characters").select("*").eq("campaign_id",n).order("created_at",{ascending:!0});return i?{success:!1,error:i.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(n,r,i,o,c){try{const{data:h,error:m}=await K.from("characters").insert({campaign_id:n,name:i,player_name:o,character_name:c,owner_id:r}).select().single();return m?{success:!1,error:m.message}:{success:!0,data:h}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createStandaloneCharacter(n,r,i,o){try{const{data:c,error:h}=await K.rpc("create_standalone_character",{user_id:n,char_name:r,player_name:i||void 0,character_name:o||void 0});return h?{success:!1,error:h.message}:{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getStandaloneCharacters(n){try{const{data:r,error:i}=await K.from("characters").select("*").eq("owner_id",n).is("campaign_id",null).order("created_at",{ascending:!1});return i?{success:!1,error:i.message}:{success:!0,data:(r||[]).map(c=>({id:c.id,name:c.name,player_name:c.player_name||void 0,character_name:c.character_name||void 0,owner_id:c.owner_id||"",created_at:c.created_at||"",updated_at:c.updated_at||""}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteStandaloneCharacter(n,r){try{const{data:i,error:o}=await K.from("characters").select("owner_id, campaign_id").eq("id",n).single();if(o||!i)return{success:!1,error:"Character not found"};if(i.campaign_id!==null)return{success:!1,error:"This is not a standalone character"};if(i.owner_id!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:c}=await K.from("characters").delete().eq("id",n);return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async assignCharacterToCampaign(n,r,i){try{const{data:o,error:c}=await K.from("characters").select("owner_id, campaign_id").eq("id",n).single();if(c||!o)return{success:!1,error:"Character not found"};if(o.owner_id!==i)return{success:!1,error:"You don't have permission to move this character"};if(o.campaign_id!==null)return{success:!1,error:"Character is already assigned to a campaign"};const{data:h,error:m}=await K.from("campaign_members").select("id").eq("campaign_id",r).eq("user_id",i).single();if(m||!h)return{success:!1,error:"You are not a member of this campaign"};const{error:g}=await K.from("characters").update({campaign_id:r}).eq("id",n);return g?{success:!1,error:g.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaignInvitation(n,r,i,o){try{const{data:c,error:h}=await K.rpc("create_campaign_invitation",{p_campaign_id:n,p_invited_email:r,p_invited_by:i,p_roles_offered:JSON.stringify(o)});return h?{success:!1,error:h.message}:{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserInvitations(n){try{const{data:r,error:i}=await K.rpc("get_user_invitations",{p_user_email:n});return i?{success:!1,error:i.message}:{success:!0,data:Array.isArray(r)?r.map(c=>({id:c.id,campaignId:c.campaign_id,campaignName:c.campaign_name,invitedEmail:c.invited_email,invitedBy:c.invited_by,invitedByName:c.inviter_name,rolesOffered:typeof c.roles_offered=="string"?JSON.parse(c.roles_offered):c.roles_offered,status:c.status,expiresAt:c.expires_at?new Date(c.expires_at):null,createdAt:new Date(c.created_at),acceptedAt:c.accepted_at?new Date(c.accepted_at):null})):[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptCampaignInvitation(n,r){try{const{data:i,error:o}=await K.rpc("accept_campaign_invitation",{p_invitation_id:n,p_user_id:r});return o?{success:!1,error:o.message}:{success:!0,data:i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declineCampaignInvitation(n){try{const{data:r,error:i}=await K.rpc("decline_campaign_invitation",{p_invitation_id:n});return i?{success:!1,error:i.message}:{success:!0,data:r}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(n,r){try{const{data:i,error:o}=await K.from("characters").select("owner_id, campaign_id, campaigns!inner(created_by)").eq("id",n).single();if(o)return{success:!1,error:"Character not found"};if(i.owner_id!==r&&i.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:c}=await K.from("characters").delete().eq("id",n);return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class en{static instance;_authRepository;_campaignRepository;_authService;_campaignService;constructor(){this._authRepository=new w_,this._campaignRepository=new Cp,this._authService=new Ib(this._authRepository),this._campaignService=new Jb(this._campaignRepository,this._authRepository)}static getInstance(){return en.instance||(en.instance=new en),en.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}}function __(){return en.getInstance().authService}function jp(){return en.getInstance().campaignService}function Gu(){return en.getInstance().campaignRepository}const Sa=()=>{const[l,n]=S.useState(null),[r,i]=S.useState(!0),o=__();return S.useEffect(()=>((async()=>{const C=await o.getCurrentUser();console.log("useAuth: getCurrentUser result:",C),n(C),i(!1)})(),o.onAuthStateChange(C=>{console.log("useAuth: onAuthStateChange triggered with user:",C),n(C),i(!1)})),[o]),{user:l,loading:r,signIn:async(x,_)=>{const C=await o.signIn(x,_);return C.success&&C.data?(n(C.data),{success:!0}):{success:!1,error:C.error}},signUp:async(x,_)=>{const C=await o.signUp(x,_);return C.success&&C.data?(n(C.data),{success:!0}):{success:!1,error:C.error}},signOut:async()=>{const x=await o.signOut();return x.success?(n(null),{success:!0}):{success:!1,error:x.error}},completeProfile:async x=>{const _=await o.completeProfile(x);return _.success&&_.data?(n(_.data),{success:!0,user:_.data}):{success:!1,error:_.error}},updateProfile:async x=>{const _=await o.updateProfile(x);return _.success&&_.data?(n(_.data),{success:!0,user:_.data}):{success:!1,error:_.error}},changePassword:async x=>{const _=await o.changePassword(x);return _.success?{success:!0}:{success:!1,error:_.error}},deleteAccount:async()=>{const x=await o.deleteAccount();return x.success?(n(null),{success:!0}):{success:!1,error:x.error}}}},S_=()=>{S.useEffect(()=>{const l=async(r,i)=>{if(r==="SIGNED_IN"&&i?.user){const o=i.user,c=new URLSearchParams(window.location.search),h=c.get("invited_to_campaign"),m=c.get("role"),g=h||o.user_metadata?.campaign_id,y=m||o.user_metadata?.role;if(g&&y)try{const{error:v}=await K.from("campaign_members").insert({campaign_id:g,user_id:o.id,is_admin:y==="admin",is_gm:y==="gm",is_player:y==="player"});if(!v){const b=window.location.pathname;window.history.replaceState({},"",b)}}catch{}}},{data:{subscription:n}}=K.auth.onAuthStateChange(l);return()=>{n.unsubscribe()}},[])};function ne({variant:l="default",size:n="md",className:r="",children:i,...o}){const h={default:"",primary:"bg-blue-600 hover:bg-blue-700 hover:shadow-lg hover:-translate-y-0.5 text-white border-blue-600 transition-all duration-200",danger:"bg-red-600 hover:bg-red-700 hover:shadow-lg hover:-translate-y-0.5 text-white border-red-600 transition-all duration-200",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-sm transition-all duration-200"},m={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},g=["btn",h[l],m[n],r].filter(Boolean).join(" ");return f.jsx("button",{className:g,...o,children:i})}function C_({icon:l,variant:n="default",className:r="",...i}){const o={default:"btn p-2 hover:scale-110 transition-all duration-200",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:scale-110 transition-all duration-200"};return f.jsx("button",{className:`${o[n]} ${r}`,...i,children:l})}const J=S.forwardRef(({label:l,type:n="text",className:r,required:i=!1,error:o,...c},h)=>{const m="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",g=`input w-full ${o?"border-red-500 focus:border-red-500":""}`,y=()=>{if(n==="textarea"){const b=c;return f.jsx("textarea",{ref:h,className:r||g,required:i,...b})}if(n==="select"){const{children:b,...x}=c;return f.jsx("select",{ref:h,className:r||"select",required:i,...x,children:b})}const v=c;return f.jsx("input",{ref:h,type:n,step:n==="number"?"1":void 0,className:r||g,required:i,...v})};return f.jsxs("div",{children:[l&&f.jsxs("label",{className:m,children:[l," ",i&&"*"]}),y(),o&&f.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o})]})});J.displayName="FormField";function j_(){const[l,n]=S.useState("sign_in"),[r,i]=S.useState(""),[o,c]=S.useState(""),[h,m]=S.useState(!1),[g,y]=S.useState(""),{signIn:v,signUp:b}=Sa(),x=async C=>{C.preventDefault(),m(!0),y("");try{let E;l==="sign_up"?(E=await b(r,o),E.success?y("Check your email for the confirmation link!"):y(E.error||"Sign up failed")):(E=await v(r,o),E.success||y(E.error||"Sign in failed"))}catch(E){y(E instanceof Error?E.message:"An error occurred")}finally{m(!1)}},_=()=>h?"Loading...":l==="sign_in"?"Sign In":"Sign Up";return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),f.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:l==="sign_in"?"Welcome Back":"Create Account"}),f.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:l==="sign_in"?"Sign in to your account":"Create a new account"})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[f.jsx("button",{type:"button",onClick:()=>n("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${l==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),f.jsx("button",{type:"button",onClick:()=>n("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${l==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),f.jsxs("form",{className:"space-y-4",onSubmit:x,children:[f.jsx(J,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:r,onChange:C=>i(C.target.value),placeholder:"Enter your email"}),f.jsx(J,{label:"Password",type:"password",autoComplete:l==="sign_up"?"new-password":"current-password",required:!0,value:o,onChange:C=>c(C.target.value),placeholder:"Enter your password"}),g&&f.jsx("div",{className:`p-3 rounded-xl text-sm ${g.includes("error")||g.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:g}),f.jsx(ne,{type:"submit",disabled:h,variant:"primary",className:"w-full justify-center py-3",children:_()})]})]})]})})]})}const A_=l=>{const n=[];let r="weak";l.length<8&&n.push("Password must be at least 8 characters long");const i=/[a-z]/.test(l),o=/[A-Z]/.test(l),c=/\d/.test(l),h=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(l);i||n.push("Password must contain at least one lowercase letter"),o||n.push("Password must contain at least one uppercase letter"),c||n.push("Password must contain at least one number"),h||n.push("Password must contain at least one special character");const m=[i,o,c,h].filter(Boolean).length;let g=0;l.length>=12?g=2:l.length>=8&&(g=1);const y=m+g;return y>=5?r="strong":y>=3&&(r="medium"),{isValid:n.length===0,errors:n,strength:r}},E_=l=>{switch(l){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},N_=l=>{switch(l){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},T_=l=>l.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:l.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(l)?/^[_-]|[_-]$/.test(l)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function R_({onComplete:l,loading:n=!1}){const[r,i]=S.useState(""),[o,c]=S.useState(""),[h,m]=S.useState({}),[g,y]=S.useState(!1),v=()=>{const _={};if(r.trim()?r.trim().length<2?_.displayName="Name must be at least 2 characters long":r.trim().length>50&&(_.displayName="Name must be less than 50 characters long"):_.displayName="Name is required",!o.trim())_.username="Username is required";else{const C=T_(o.trim());C.isValid||(_.username=C.error||"Invalid username")}return m(_),Object.keys(_).length===0},b=async _=>{if(_.preventDefault(),!!v()){y(!0);try{const C=await l({displayName:r.trim(),username:o.trim().toLowerCase()});!C.success&&C.error&&(C.error.toLowerCase().includes("username")?m({username:C.error}):m({general:C.error}))}catch{m({general:"An unexpected error occurred. Please try again."})}finally{y(!1)}}},x=r.trim()&&o.trim()&&Object.keys(h).length===0;return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Complete Your Profile"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up your profile to start using Traveller Dashboard"})]})}),f.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:f.jsx(On,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:"Welcome to Traveller Dashboard"}),f.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Let's set up your profile to get started"})]}),f.jsx("div",{className:"card",children:f.jsxs("form",{className:"space-y-4",onSubmit:b,children:[f.jsxs("div",{children:[f.jsx(J,{label:"Your Name",type:"text",required:!0,value:r,onChange:_=>{i(_.target.value),h.displayName&&m(C=>({...C,displayName:""}))},placeholder:"Enter your first name or full name",error:h.displayName}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This is how other players will see you in campaigns"})]}),f.jsxs("div",{children:[f.jsx(J,{label:"Username",type:"text",required:!0,value:o,onChange:_=>{c(_.target.value),h.username&&m(C=>({...C,username:""}))},placeholder:"Choose a unique username",error:h.username}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),h.general&&f.jsx("div",{className:"p-3 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",children:h.general}),f.jsx(ne,{type:"submit",disabled:!x||g||n,variant:"primary",className:"w-full justify-center py-3",children:g||n?"Setting up...":"Complete Profile"})]})}),f.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:f.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const O_=()=>{const[l,n]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(null),h=jp(),m=S.useCallback(async()=>{try{i(!0),c(null);const b=await h.getCampaigns();b.success&&b.data?n(b.data):c(b.error||"Failed to fetch campaigns")}catch{c("An unexpected error occurred")}finally{i(!1)}},[h]),g=async b=>{try{c(null);const x=await h.createCampaign(b);return x.success?(await m(),{success:!0}):(c(x.error||"Failed to create campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return c(x),{success:!1,error:x}}},y=async(b,x)=>{try{c(null);const _=await h.updateCampaign(b,x);return _.success?(await m(),{success:!0}):(c(_.error||"Failed to update campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return c(_),{success:!1,error:_}}},v=async b=>{try{c(null);const x=await h.deleteCampaign(b);return x.success?(await m(),{success:!0}):(c(x.error||"Failed to delete campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return c(x),{success:!1,error:x}}};return S.useEffect(()=>{m()},[m]),{campaigns:l,loading:r,error:o,fetchCampaigns:m,createCampaign:g,updateCampaign:y,deleteCampaign:v}};function zl(){const[l,n]=S.useState([]),[r,i]=S.useState(!1),[o,c]=S.useState(null),h=S.useCallback(async(x,..._)=>{i(!0),c(null);try{const C=await x(..._);if(C.success&&C.data!==void 0)return n(C.data),{success:!0,data:C.data};const E=C.error||"Operation failed";return c(E),{success:!1,error:E}}catch(C){const E=C instanceof Error?C.message:"An unexpected error occurred";return c(E),{success:!1,error:E}}finally{i(!1)}},[]),m=S.useCallback(x=>{n(_=>[..._,x])},[]),g=S.useCallback((x,_)=>{n(C=>C.map((E,T)=>T===x?_:E))},[]),y=S.useCallback(x=>{n(_=>_.filter((C,E)=>E!==x))},[]),v=S.useCallback(()=>{n([]),c(null),i(!1)},[]),b=S.useCallback(()=>{c(null)},[]);return{items:l,loading:r,error:o,execute:h,addItem:m,updateItem:g,removeItem:y,reset:v,clearError:b,setItems:n}}const k_=()=>{const{items:l,loading:n,error:r,execute:i}=zl(),o=S.useMemo(()=>jp(),[]),c=S.useCallback(async y=>await i(async b=>{const x=await o.getCampaignMembers(b);return x.success&&x.data?{success:!0,data:x.data}:{success:!1,error:x.error||"Failed to fetch members"}},y),[o,i]),h=S.useCallback(async(y,v,b)=>{try{const x=await o.addMemberByEmail(y,v,b);return x.success?(await c(y),{success:!0}):{success:!1,error:x.error||"Failed to add member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]),m=S.useCallback(async(y,v,b)=>{try{const x=await o.updateMemberRole(y,v,b);return x.success?(await c(y),{success:!0}):{success:!1,error:x.error||"Failed to update member role"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]),g=S.useCallback(async(y,v)=>{try{const b=await o.removeMember(y,v);return b.success?(await c(y),{success:!0}):{success:!1,error:b.error||"Failed to remove member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]);return{members:l,loading:n,error:r,fetchMembers:c,addMemberByEmail:h,updateMemberRole:m,removeMember:g}};function U_({size:l="md",className:n=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return f.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[l]} ${n}`,role:"status","aria-label":"Loading"})}function D_({message:l="Loading..."}){return f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[f.jsx(U_,{size:"lg",className:"mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:l})]})}function Pe({isOpen:l,onClose:n,title:r,children:i,maxWidth:o="md"}){if(S.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[l]),S.useEffect(()=>{const h=m=>{m.key==="Escape"&&n()};if(l)return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[l,n]),!l)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:h=>{h.target===h.currentTarget&&n()},children:f.jsxs("div",{className:`card w-full ${c[o]}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:r}),f.jsx(C_,{icon:f.jsx(zg,{size:20}),onClick:n,"aria-label":"Close modal"})]}),i]})})}function tn({onCancel:l,onConfirm:n,confirmText:r="Confirm",cancelText:i="Cancel",confirmVariant:o="primary",confirmDisabled:c=!1,confirmType:h="button",isLoading:m=!1,children:g}){return g?f.jsx("div",{className:"flex gap-2 mt-6",children:g}):f.jsxs("div",{className:"flex gap-2 mt-6",children:[l&&f.jsx(ne,{onClick:l,variant:"ghost",className:"flex-1 justify-center",disabled:m,children:i}),(n||h==="submit")&&f.jsx(ne,{onClick:h==="submit"?void 0:n,variant:o,className:"flex-1 justify-center",disabled:m||c,type:h,children:r})]})}function Dg({roles:l,onChange:n,disabled:r=!1,showError:i=!0}){const o=(m,g)=>{const y={...l,[m]:g};n(y)},c=np(l),h=l.isGm&&l.isPlayer&&!l.isAdmin;return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:l.isAdmin,onChange:m=>o("isAdmin",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Administrator"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can manage campaign settings and members)"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:l.isGm,onChange:m=>o("isGm",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game Master (GM)"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can run game sessions)"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:l.isPlayer,onChange:m=>o("isPlayer",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Player"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can create and play characters)"})]})]}),f.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current roles:"," ",f.jsx("span",{className:"font-medium text-gray-900 dark:text-zinc-50",children:Dl(l)})]})}),i&&!c&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:f.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[!l.isAdmin&&!l.isGm&&!l.isPlayer&&"Must select at least one role.",h&&"Cannot be both GM and Player without Administrator privileges. This prevents conflicts of interest."]})})]})}function M_({campaign:l,onUpdateCampaign:n,onDeleteCampaign:r,onGetMembers:i,onAddMember:o,onUpdateMemberRole:c,onRemoveMember:h,onClose:m}){const[g,y]=S.useState(!1),[v,b]=S.useState(!1),[x,_]=S.useState(!1),[C,E]=S.useState(!1),[T,R]=S.useState([]),[O,z]=S.useState(!1),[V,P]=S.useState(!1),[$,Z]=S.useState(null),[se,Y]=S.useState(l.name),[ge,Be]=S.useState(l.description||""),[_e,ae]=S.useState(!1),[Re,Fe]=S.useState(!1),[B,G]=S.useState(""),[X,pe]=S.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),[be,De]=S.useState(null),Ne=async oe=>{if(oe.preventDefault(),!!se.trim())try{ae(!0),await n(l.id,{name:se,description:ge||null}),y(!1)}finally{ae(!1)}},me=async()=>{try{Fe(!0),await r(l.id),b(!1),m?.()}finally{Fe(!1)}},qe=async()=>{try{const oe=await i(l.id);oe&&R(oe)}catch{}},ut=async()=>{if(T.length>0&&!x){_(!0);return}try{z(!0);const oe=await i(l.id);oe&&R(oe),_(!0)}finally{z(!1)}},Rt=async oe=>{if(oe.preventDefault(),!!B.trim()){P(!0),De(null);try{const Le=await o(l.id,B,X);Le.success?(G(""),pe({isAdmin:!1,isGm:!1,isPlayer:!0}),E(!1),qe()):De(Le.error||"Failed to add member")}catch(Le){De(Le instanceof Error?Le.message:"Failed to add member")}finally{P(!1)}}},[Ye,$t]=S.useState(null),[Gt,Ca]=S.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),W=async oe=>{if(!Ye)return;const Le=Ye.user_id||Ye.userId;if(Le){Z(Le);try{if((await c(l.id,Le,oe)).success){const Dn=await i(l.id);Dn&&R(Dn),$t(null)}}finally{Z(null)}}},we=oe=>{$t(oe),Ca(oe.roles)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),f.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:l.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.description||"No description provided"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),f.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[l.member_count||0," member(s)"]})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs(ne,{onClick:()=>y(!0),className:"flex items-center gap-2 justify-center",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Edit Campaign"]}),f.jsxs(ne,{onClick:ut,disabled:O,className:"flex items-center gap-2 justify-center",children:[f.jsx(an,{className:"w-4 h-4"}),O?"Loading...":"Manage Members"]})]})]}),f.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[f.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),f.jsxs(ne,{onClick:()=>b(!0),variant:"danger",className:"flex items-center gap-2",children:[f.jsx(Vs,{className:"w-4 h-4"}),"Delete Campaign"]})]}),f.jsx(Pe,{isOpen:g,onClose:()=>y(!1),title:"Edit Campaign",children:f.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),f.jsx("input",{type:"text",value:se,onChange:oe=>Y(oe.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:ge,onChange:oe=>Be(oe.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsx(tn,{onCancel:()=>y(!1),cancelText:"Cancel",confirmText:_e?"Updating...":"Update",confirmDisabled:_e||!se.trim(),confirmType:"submit",isLoading:_e})]})}),f.jsxs(Pe,{isOpen:v,onClose:()=>b(!1),title:"Delete Campaign",children:[f.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',l.name,'"? This action cannot be undone and will remove all campaign data and members.']}),f.jsx(tn,{onCancel:()=>b(!1),onConfirm:me,cancelText:"Cancel",confirmText:Re?"Deleting...":"Delete",confirmVariant:"danger",isLoading:Re})]}),f.jsx(Pe,{isOpen:x,onClose:()=>_(!1),title:"Campaign Members",maxWidth:"lg",children:f.jsxs("div",{className:"space-y-4",children:[T.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):f.jsx("div",{className:"space-y-3",children:T.map(oe=>f.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:oe.user_profiles?.display_name||oe.displayName||"No Name"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:oe.user_profiles?.email||oe.email})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"flex flex-wrap gap-1",children:f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:Dl(oe.roles)})}),f.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>we(oe),disabled:$===oe.user_id,children:f.jsx(Sl,{className:"w-3 h-3"})}),$===oe.user_id&&f.jsx("span",{className:"text-xs text-gray-500",children:"Updating..."}),!oe.roles.isAdmin&&f.jsx(ne,{size:"sm",variant:"danger",onClick:()=>{const Le=oe.user_id||oe.userId;Le&&h(l.id,Le)},children:f.jsx(Vs,{className:"w-3 h-3"})})]})]},oe.id))}),f.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:f.jsxs(ne,{variant:"primary",className:"w-full justify-center",onClick:()=>E(!0),children:[f.jsx(On,{className:"w-4 h-4"}),"Add Member"]})})]})}),f.jsx(Pe,{isOpen:C,onClose:()=>{E(!1),G(""),pe({isAdmin:!1,isGm:!1,isPlayer:!0}),De(null)},title:"Add Campaign Member",children:f.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),f.jsx("input",{type:"email",value:B,onChange:oe=>G(oe.target.value),className:"input w-full",placeholder:"Enter member's email",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles"}),f.jsx(Dg,{roles:X,onChange:pe})]}),be&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:f.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:be})}),f.jsx(tn,{onCancel:()=>{E(!1),G(""),pe({isAdmin:!1,isGm:!1,isPlayer:!0}),De(null)},cancelText:"Cancel",confirmText:V?"Adding...":"Add Member",confirmDisabled:V||!B.trim(),confirmType:"submit",isLoading:V})]})}),Ye&&f.jsx(Pe,{isOpen:!!Ye,onClose:()=>$t(null),title:`Edit Roles - ${Ye.user_profiles?.display_name||Ye.displayName||Ye.user_profiles?.email||Ye.email}`,children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Roles"}),f.jsx(Dg,{roles:Gt,onChange:Ca,disabled:$===Ye.user_id})]}),f.jsx(tn,{onCancel:()=>$t(null),cancelText:"Cancel",confirmText:$===Ye.user_id?"Updating...":"Update Roles",confirmDisabled:$===Ye.user_id,onConfirm:()=>W(Gt),isLoading:$===Ye.user_id})]})})]})}function Mr(l){const{items:n,loading:r,error:i,execute:o,setItems:c}=zl(),h=S.useMemo(()=>new Cp,[]),m=S.useCallback(async v=>{if(!v)return;await o(async x=>{const _=await h.getCharactersByCampaign(x);return _.success&&_.data&&_.data.length>0?{success:!0,data:_.data.map(E=>({id:E.id,campaignId:E.campaign_id||"",displayName:E.name,playerName:E.player_name||"",characterName:E.character_name||"",ownerId:E.owner_id||void 0}))}:{success:!0,data:[]}},v)},[h,o]),g=S.useCallback(async(v,b,x)=>{if(!l)return{success:!1,error:"No campaign selected"};try{const _=`${v}  ${b}`,C=await h.createCharacterForCampaign(l,x,_,v,b);if(C.success&&C.data){const E={id:C.data.id,campaignId:C.data.campaign_id||"",displayName:C.data.name,playerName:v,characterName:b,ownerId:C.data.owner_id||void 0};return c(T=>[...T,E]),{success:!0,data:E}}return{success:!1,error:C.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[l,h,c]),y=S.useCallback(async(v,b)=>{try{const x=await h.deleteCharacter(v,b);return x.success?(c(_=>_.filter(C=>C.id!==v)),{success:!0}):{success:!1,error:x.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[h,c]);return S.useEffect(()=>{l?m(l):c([])},[l,m,c]),{characters:n,loading:r,error:i,createCharacter:g,deleteCharacter:y,refreshCharacters:()=>l&&m(l)}}function Vu(l){const{items:n,loading:r,error:i,execute:o,setItems:c}=zl(),h=S.useMemo(()=>Gu(),[]),m=S.useCallback(async v=>{if(!v)return;await o(async x=>{const _=await h.getStandaloneCharacters(x);return _.success&&_.data?{success:!0,data:_.data.map(E=>({id:E.id,campaignId:null,displayName:E.name,playerName:E.player_name||"",characterName:E.character_name||"",ownerId:E.owner_id}))}:{success:!1,error:_.error||"Failed to load characters"}},v)},[h,o]),g=S.useCallback(async(v,b,x)=>{try{const _=`${v}  ${b}`,C=await h.createStandaloneCharacter(x,_,v,b);if(C.success&&C.data){const E={id:C.data.id,campaignId:null,displayName:C.data.name,playerName:C.data.player_name||v,characterName:C.data.character_name||b,ownerId:C.data.owner_id};return c(T=>[E,...T]),{success:!0,data:E}}return{success:!1,error:C.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[h,c]),y=S.useCallback(async(v,b)=>{try{const x=await h.deleteStandaloneCharacter(v,b);return x.success?(c(_=>_.filter(C=>C.id!==v)),{success:!0}):{success:!1,error:x.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[h,c]);return S.useEffect(()=>{l?m(l):c([])},[l,m,c]),{characters:n,loading:r,error:i,createCharacter:g,deleteCharacter:y,refreshCharacters:()=>l&&m(l)}}function Ap({isOpen:l,onClose:n,campaigns:r,onAssignmentComplete:i}){const{user:o}=Sa(),{characters:c,loading:h,error:m,refreshCharacters:g}=Vu(o?.id),[y,v]=S.useState([]),[b,x]=S.useState(null),_=S.useMemo(()=>r.filter(R=>R.userRoles.isAdmin||R.userRoles.isPlayer),[r]),C=async(R,O)=>{if(o){x(null),v(z=>[...z.filter(V=>V.characterId!==R),{characterId:R,campaignId:O,loading:!0}]);try{const V=await Gu().assignCharacterToCampaign(R,O,o.id);V.success?(await g(),v(P=>P.filter($=>$.characterId!==R)),i?.()):(x(V.error||"Failed to assign character to campaign"),v(P=>P.filter($=>$.characterId!==R)))}catch{x("An unexpected error occurred while assigning character"),v(z=>z.filter(V=>V.characterId!==R))}}},E=R=>y.some(O=>O.characterId===R&&O.loading),T=R=>y.find(O=>O.characterId===R)?.campaignId;return h?f.jsx(Pe,{isOpen:l,onClose:n,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"}),f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-2/3"})]})}):m?f.jsx(Pe,{isOpen:l,onClose:n,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-8",children:[f.jsxs("p",{children:["Error loading characters: ",m]}),f.jsx(ne,{onClick:g,variant:"primary",className:"mt-4",children:"Retry"})]})}):c.length===0?f.jsx(Pe,{isOpen:l,onClose:n,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[f.jsx(an,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),f.jsx("p",{className:"text-lg font-medium mb-2",children:"No Standalone Characters"}),f.jsx("p",{className:"text-sm",children:"You don't have any standalone characters to assign to campaigns."}),f.jsx("p",{className:"text-sm mt-1",children:"Create some characters first, then come back to assign them!"})]})}):_.length===0?f.jsx(Pe,{isOpen:l,onClose:n,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[f.jsx(On,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),f.jsx("p",{className:"text-lg font-medium mb-2",children:"No Available Campaigns"}),f.jsx("p",{className:"text-sm",children:"You're not a member of any campaigns where you can add characters."}),f.jsx("p",{className:"text-sm mt-1",children:"Join a campaign as a player or create your own to assign characters!"})]})}):f.jsx(Pe,{isOpen:l,onClose:n,title:"Assign Characters to Campaigns",maxWidth:"lg",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Assign your standalone characters to campaigns where you're a member. Once assigned, characters will appear in the campaign's character list."}),b&&f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:f.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:b})}),f.jsx("div",{className:"space-y-4",children:c.map(R=>f.jsx("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 mb-1",children:R.displayName}),f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.playerName&&R.characterName&&f.jsxs(f.Fragment,{children:["Player: ",R.playerName,"  Character:"," ",R.characterName]})})]}),f.jsx("div",{className:"flex-shrink-0 ml-4",children:E(R.id)?f.jsxs("div",{className:"flex items-center text-sm text-blue-600 dark:text-blue-400",children:[f.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"}),"Assigning..."]}):f.jsxs("select",{className:"text-sm border rounded px-3 py-2 bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-zinc-50",value:T(R.id)||"",onChange:O=>{O.target.value&&C(R.id,O.target.value)},children:[f.jsx("option",{value:"",children:"Select Campaign..."}),_.map(O=>f.jsxs("option",{value:O.id,children:[O.name," (",O.userRoles.isAdmin?"Admin":"Player",")"]},O.id))]})})]})},R.id))}),f.jsx("div",{className:"border-t pt-4",children:f.jsx(ne,{onClick:n,className:"w-full",children:"Done"})})]})})}function z_(l){return l.isAdmin?"admin":l.isGm?"gm":l.isPlayer?"player":"unknown"}function L_(l){const n=[];return l.isAdmin&&n.push("ADMIN"),l.isGm&&n.push("GM"),l.isPlayer&&n.push("PLAYER"),n.join(" + ")}function B_(l){const n=z_(l);return n==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":n==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function q_({campaign:l,onViewCampaign:n,onDeleteCharacter:r}){const{characters:i,loading:o,error:c}=Mr(l.id);return o?f.jsxs("div",{className:"animate-pulse p-4",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),f.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):c?f.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",c]}):f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:l.name}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," character(s)"]})]}),l.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${B_(l.userRoles)}`,children:L_(l.userRoles)})]}),i.length===0?f.jsxs("div",{className:"text-center py-6",children:[f.jsx(an,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):f.jsx("div",{className:"space-y-3 mb-4",children:i.map(h=>f.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:h.displayName}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",h.playerName]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ne,{size:"sm",onClick:()=>n(l.id),title:"View character details in campaign",children:f.jsx(Sl,{className:"w-4 h-4"})}),f.jsx(ne,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>r(h.id,h.displayName,l.id),children:f.jsx(Vs,{className:"w-4 h-4"})})]})]},h.id))}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(ne,{onClick:()=>n(l.id),className:"flex items-center gap-2 flex-1",children:[f.jsx(an,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function H_({campaigns:l,onShowAssignment:n}){const{user:r}=Sa(),{characters:i,loading:o,error:c,refreshCharacters:h}=Vu(r?.id),m=l.filter(g=>g.userRoles.isAdmin||g.userRoles.isPlayer);return o?f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Your Standalone Characters"}),f.jsxs("div",{className:"animate-pulse space-y-3",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})]}):c?f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Your Standalone Characters"}),f.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm",children:["Error loading characters: ",c,f.jsx(ne,{onClick:h,variant:"ghost",size:"sm",className:"ml-2",children:"Retry"})]})]}):f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Your Standalone Characters"}),i.length>0&&m.length>0&&f.jsxs(ne,{onClick:n,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[f.jsx(Lg,{className:"w-4 h-4"}),"Assign to Campaigns"]})]}),i.length===0?f.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[f.jsx(an,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),f.jsx("p",{className:"text-sm",children:"No standalone characters yet."}),f.jsx("p",{className:"text-xs mt-1",children:"Characters created outside of campaigns will appear here."})]}):f.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:i.map(g=>f.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50 dark:bg-zinc-800 dark:border-zinc-700",children:[f.jsx("div",{className:"font-medium text-gray-900 dark:text-zinc-50 text-sm mb-1",children:g.displayName}),f.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Player: ",g.playerName]}),f.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Character: ",g.characterName]}),f.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Available for assignment"})]},g.id))}),i.length>0&&m.length===0&&f.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mt-3",children:f.jsxs("p",{className:"text-amber-600 dark:text-amber-400 text-sm",children:["You have ",i.length," standalone character(s), but you're not a member of any campaigns where you can assign them."]})})]})}function $_({campaigns:l,onViewCampaign:n}){const{user:r}=Sa(),[i,o]=S.useState(!1),[c,h]=S.useState(""),[m,g]=S.useState(""),[y,v]=S.useState(""),[b,x]=S.useState(!1),[_,C]=S.useState(null),[E,T]=S.useState(!1),[R,O]=S.useState(null),[z,V]=S.useState(!1),[P,$]=S.useState(!1),{createCharacter:Z}=Mr(c||""),{deleteCharacter:se}=Mr(R?.campaignId||""),Y=l.filter(ae=>ae.memberCount&&ae.memberCount>0),ge=async ae=>{if(ae.preventDefault(),!(!m.trim()||!y.trim()||!c))try{x(!0),C(null);const Re=await Z(m.trim(),y.trim(),"");Re.success?(g(""),v(""),h(""),o(!1)):C(Re.error||"Failed to create character")}finally{x(!1)}},Be=(ae,Re,Fe)=>{O({id:ae,name:Re,campaignId:Fe}),T(!0)},_e=async()=>{if(!(!R||!r))try{V(!0);const ae=await se(R.id,r.id);ae.success?(T(!1),O(null)):C(ae.error||"Failed to delete character")}finally{V(!1)}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:l.length}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Y.length}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Y.reduce((ae,Re)=>ae+(Re.memberCount||0),0)}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs(ne,{onClick:()=>o(!0),disabled:l.length===0,className:"flex items-center gap-2 justify-center",children:[f.jsx(On,{className:"w-4 h-4"}),"Create New Character"]}),f.jsxs(ne,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),l.length===0&&f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),f.jsx(H_,{campaigns:l,onShowAssignment:()=>$(!0)}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),Y.length===0?f.jsxs("div",{className:"card text-center py-8",children:[f.jsx(an,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),f.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),f.jsxs(ne,{onClick:()=>o(!0),disabled:l.length===0,className:"flex items-center gap-2",children:[f.jsx(On,{className:"w-4 h-4"}),"Create Character"]})]}):f.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:Y.map(ae=>f.jsx(q_,{campaign:ae,onViewCampaign:n,onDeleteCharacter:Be},ae.id))})]}),f.jsx(Pe,{isOpen:i,onClose:()=>o(!1),title:"Create New Character",children:f.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[_&&f.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:_}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),f.jsxs("select",{value:c,onChange:ae=>h(ae.target.value),className:"input w-full",required:!0,children:[f.jsx("option",{value:"",children:"Select a campaign"}),l.map(ae=>f.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),f.jsx(J,{label:"Player Name",value:m,onChange:ae=>g(ae.target.value),placeholder:"e.g., John Smith",required:!0}),f.jsx(J,{label:"Character Name",value:y,onChange:ae=>v(ae.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),f.jsx(tn,{onCancel:()=>o(!1),cancelText:"Cancel",confirmText:b?"Creating...":"Create",confirmDisabled:b||!m.trim()||!y.trim()||!c,confirmType:"submit",isLoading:b})]})}),f.jsx(Pe,{isOpen:E,onClose:()=>T(!1),title:"Delete Character",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:f.jsx(Vs,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),f.jsxs("div",{className:"flex-grow",children:[f.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',R?.name,'"?']}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),f.jsx(tn,{onCancel:()=>T(!1),cancelText:"Cancel",confirmText:z?"Deleting...":"Delete",confirmDisabled:z,onConfirm:_e,confirmVariant:"danger",isLoading:z})]})}),f.jsx(Ap,{isOpen:P,onClose:()=>$(!1),campaigns:l,onAssignmentComplete:()=>{window.location.reload()}})]})}function G_({characters:l,currentUserId:n,onDeleteCharacter:r}){return l.length===0?f.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[f.jsx(an,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),f.jsx("p",{children:"No standalone characters yet."}),f.jsx("p",{className:"text-sm mt-1",children:"Create your first character to get started!"})]}):f.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:l.map(i=>f.jsxs("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 truncate",children:i.displayName}),i.ownerId===n&&f.jsx(ne,{onClick:()=>r(i.id,i.displayName),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 p-1 h-auto",title:"Delete character",children:f.jsx(Vs,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Player:"})," ",i.playerName]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Character:"})," ",i.characterName]}),f.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Available for campaign invitations"})]})]},i.id))})}function V_({campaigns:l=[]}){const[n,r]=S.useState(!1),[i,o]=S.useState(""),[c,h]=S.useState(""),[m,g]=S.useState(!1),[y,v]=S.useState(null),[b,x]=S.useState(!1),[_,C]=S.useState(null),[E,T]=S.useState(!1),{user:R}=Sa(),{characters:O,loading:z,error:V,createCharacter:P,deleteCharacter:$,refreshCharacters:Z}=Vu(R?.id),se=async ae=>{if(ae.preventDefault(),v(null),!R){v("You must be logged in to create a character");return}if(!i.trim()){v("Player name is required");return}if(!c.trim()){v("Character name is required");return}g(!0);try{const Re=await P(i.trim(),c.trim(),R.id);Re.success?(r(!1),o(""),h(""),v(null)):v(Re.error||"Failed to create character")}catch{v("An unexpected error occurred")}finally{g(!1)}},Y=(ae,Re)=>{C({id:ae,name:Re}),x(!0)},ge=async()=>{if(_&&R)try{const ae=await $(_.id,R.id);ae.success?(x(!1),C(null)):v(ae.error||"Failed to delete character")}catch{v("An unexpected error occurred while deleting character")}},Be=()=>{r(!1),o(""),h(""),v(null)},_e=()=>{r(!0),o(""),h(""),v(null)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50",children:"Your Characters"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Create characters that can be used in any campaign when invited."})]}),f.jsxs("div",{className:"flex gap-3",children:[l.length>0&&f.jsxs(ne,{onClick:()=>T(!0),variant:"ghost",className:"flex items-center gap-2",children:[f.jsx(Lg,{className:"w-4 h-4"}),"Assign to Campaigns"]}),f.jsxs(ne,{onClick:_e,className:"flex items-center gap-2",children:[f.jsx(On,{className:"w-4 h-4"}),"Create Character"]})]})]}),f.jsxs("div",{className:"card",children:[z&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:f.jsx("p",{children:"Loading characters..."})}),!z&&V&&f.jsxs("div",{className:"text-center py-6 text-red-600 dark:text-red-400",children:[f.jsxs("p",{children:["Error: ",V]}),f.jsx(ne,{onClick:Z,variant:"ghost",size:"sm",className:"mt-2",children:"Try Again"})]}),!z&&!V&&f.jsx(G_,{characters:O,currentUserId:R?.id,onDeleteCharacter:Y})]}),f.jsx(Pe,{isOpen:n,onClose:Be,title:"Create New Character",children:f.jsxs("form",{onSubmit:se,className:"space-y-4",children:[f.jsx(J,{label:"Player Name",value:i,onChange:ae=>o(ae.target.value),placeholder:"e.g., John Smith",required:!0}),f.jsx(J,{label:"Character Name",value:c,onChange:ae=>h(ae.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),y&&f.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm",children:y}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(ne,{type:"button",variant:"ghost",onClick:Be,disabled:m,children:"Cancel"}),f.jsx(ne,{type:"submit",disabled:m||!i.trim()||!c.trim(),children:m?"Creating...":"Create Character"})]})]})}),f.jsx(Pe,{isOpen:b,onClose:()=>x(!1),title:"Delete Character",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',_?.name,'"? This action cannot be undone.']}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(ne,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"}),f.jsx(ne,{variant:"danger",onClick:ge,children:"Delete Character"})]})]})}),f.jsx(Ap,{isOpen:E,onClose:()=>T(!1),campaigns:l,onAssignmentComplete:()=>{Z()}})]})}function P_({user:l,onSettings:n,onSignOut:r}){const[i,o]=S.useState(!1),c=S.useRef(null);S.useEffect(()=>{const m=g=>{c.current&&!c.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),S.useEffect(()=>{const m=g=>{g.key==="Escape"&&o(!1)};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[]);const h=l.displayName||l.username||l.email.split("@")[0];return f.jsxs("div",{className:"relative",ref:c,children:[f.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 hover:shadow-sm rounded-lg transition-all duration-200","aria-expanded":i,"aria-haspopup":"true",children:[f.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:f.jsx(Cl,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),f.jsx("span",{className:"hidden sm:block max-w-24 truncate",children:h}),f.jsx(av,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&f.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-gray-200 dark:border-zinc-700 py-1 z-50",children:[f.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-700",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:f.jsx(Cl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:h}),l.username&&f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",l.username]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:l.email})]})]})}),f.jsxs("div",{className:"py-1",children:[f.jsxs("button",{onClick:()=>{o(!1),n()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-300 transition-all duration-200",children:[f.jsx(Bg,{className:"w-4 h-4 mr-3 transition-transform duration-200 hover:rotate-45"}),"Account Settings"]}),f.jsxs("button",{onClick:()=>{o(!1),r()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-200",children:[f.jsx(nv,{className:"w-4 h-4 mr-3 transition-transform duration-200 hover:translate-x-1"}),"Sign Out"]})]})]})]})}function Y_({isOpen:l,onClose:n,user:r,onUpdateProfile:i,onChangePassword:o,onDeleteAccount:c}){const[h,m]=S.useState("profile"),[g,y]=S.useState(!1),[v,b]=S.useState(null),[x,_]=S.useState(r.displayName||""),[C,E]=S.useState(r.username||""),[T,R]=S.useState(""),[O,z]=S.useState(""),[V,P]=S.useState(""),[$,Z]=S.useState(!1),[se,Y]=S.useState(!1),[ge,Be]=S.useState(!1),_e=A_(O),ae=async G=>{G.preventDefault(),y(!0),b(null);try{await i({displayName:x.trim()||void 0,username:C.trim()||void 0}),b({type:"success",text:"Profile updated successfully!"})}catch(X){b({type:"error",text:X instanceof Error?X.message:"Failed to update profile"})}finally{y(!1)}},Re=async G=>{if(G.preventDefault(),y(!0),b(null),!_e.isValid){b({type:"error",text:"Please fix the password requirements"}),y(!1);return}if(O!==V){b({type:"error",text:"New passwords do not match"}),y(!1);return}try{await o({currentPassword:T,newPassword:O}),b({type:"success",text:"Password changed successfully!"}),R(""),z(""),P("")}catch(X){b({type:"error",text:X instanceof Error?X.message:"Failed to change password"})}finally{y(!1)}},Fe=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&c()},B=[{id:"profile",label:"Profile",icon:Cl},{id:"password",label:"Password",icon:rv},{id:"danger",label:"Danger Zone",icon:Km}];return f.jsx(Pe,{isOpen:l,onClose:n,title:"Account Settings",maxWidth:"xl",children:f.jsxs("div",{className:"flex h-[32rem]",children:[f.jsx("div",{className:"w-56 border-r border-gray-200 dark:border-zinc-700 pr-6",children:f.jsx("nav",{className:"space-y-1",children:B.map(G=>{const X=G.icon;return f.jsxs("button",{onClick:()=>m(G.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${h===G.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:[f.jsx(X,{className:"w-4 h-4 mr-3"}),G.label]},G.id)})})}),f.jsxs("div",{className:"flex-1 pl-8",children:[v&&f.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${v.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:v.text}),h==="profile"&&f.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),f.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[f.jsx(sv,{className:"w-4 h-4 text-gray-400 mr-3"}),f.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),f.jsx(J,{label:"Display Name",type:"text",value:x,onChange:G=>_(G.target.value),placeholder:"Enter your display name"}),f.jsx(J,{label:"Username",type:"text",value:C,onChange:G=>E(G.target.value),placeholder:"Enter your username"}),f.jsx(ne,{type:"submit",disabled:g,className:"w-full",children:g?"Updating...":"Update Profile"})]}),h==="password"&&f.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(J,{label:"Current Password",type:$?"text":"password",value:T,onChange:G=>R(G.target.value),placeholder:"Enter your current password",required:!0}),f.jsx("button",{type:"button",onClick:()=>Z(!$),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:$?f.jsx(Wc,{className:"w-4 h-4"}):f.jsx(eu,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"relative",children:[f.jsx(J,{label:"New Password",type:se?"text":"password",value:O,onChange:G=>z(G.target.value),placeholder:"Enter your new password",required:!0}),f.jsx("button",{type:"button",onClick:()=>Y(!se),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:se?f.jsx(Wc,{className:"w-4 h-4"}):f.jsx(eu,{className:"w-4 h-4"})})]}),O&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Password Strength:"}),f.jsx("span",{className:`text-sm font-medium ${E_(_e.strength)}`,children:N_(_e.strength)})]}),f.jsx("div",{className:"space-y-1 text-xs",children:_e.errors.map((G,X)=>f.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[f.jsx("span",{className:"mr-2",children:""}),G]},X))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(J,{label:"Confirm New Password",type:ge?"text":"password",value:V,onChange:G=>P(G.target.value),placeholder:"Confirm your new password",required:!0}),f.jsx("button",{type:"button",onClick:()=>Be(!ge),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ge?f.jsx(Wc,{className:"w-4 h-4"}):f.jsx(eu,{className:"w-4 h-4"})})]}),f.jsx(ne,{type:"submit",disabled:g||!_e.isValid||O!==V,className:"w-full",children:g?"Changing Password...":"Change Password"})]}),h==="danger"&&f.jsx("div",{className:"space-y-6",children:f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(Km,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),f.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),f.jsx("div",{className:"mt-4",children:f.jsx(ne,{variant:"danger",onClick:Fe,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function K_({isOpen:l,onClose:n,onCreateCampaign:r}){const[i,o]=S.useState(""),[c,h]=S.useState(""),[m,g]=S.useState(!1),[y,v]=S.useState(!1),[b,x]=S.useState([]),[_,C]=S.useState(""),[E,T]=S.useState("player"),R=async P=>{if(P.preventDefault(),!!i.trim())try{v(!0),(await r({name:i.trim(),description:c.trim()||void 0,creatorIsAlsoGM:m,initialMembers:b.length>0?b:void 0})).success&&(o(""),h(""),g(!1),x([]),C(""),T("player"))}finally{v(!1)}},O=()=>{_.trim()&&(b.some(P=>P.email.toLowerCase()===_.toLowerCase())||(x([...b,{email:_.trim(),role:E}]),C(""),T("player")))},z=P=>{x(b.filter(($,Z)=>Z!==P))},V=()=>{o(""),h(""),g(!1),x([]),C(""),T("player"),n()};return f.jsx(Pe,{isOpen:l,onClose:V,title:"Create New Campaign",maxWidth:"lg",children:f.jsxs("form",{onSubmit:R,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Campaign Information"}),f.jsx(J,{label:"Campaign Name",value:i,onChange:P=>o(P.target.value),placeholder:"Enter campaign name",required:!0}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:c,onChange:P=>h(P.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",id:"creatorIsAlsoGM",checked:m,onChange:P=>g(P.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),f.jsx("label",{htmlFor:"creatorIsAlsoGM",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Also be the Game Master"})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You will always be an Administrator with full campaign control. Check this if you also want to run the game as GM."})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Invite Players (Optional)"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add players to your campaign. They'll need to have accounts to join."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{type:"email",value:_,onChange:P=>C(P.target.value),placeholder:"player@example.com",className:"input w-full",onKeyDown:P=>{P.key==="Enter"&&(P.preventDefault(),O())}})}),f.jsxs("select",{value:E,onChange:P=>T(P.target.value),className:"input",children:[f.jsx("option",{value:"player",children:"Player"}),f.jsx("option",{value:"gm",children:"GM"}),f.jsx("option",{value:"admin",children:"Admin"})]}),f.jsx(ne,{type:"button",onClick:O,disabled:!_.trim(),size:"sm",children:f.jsx(On,{className:"w-4 h-4"})})]}),b.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Initial Members (",b.length,")"]}),f.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.map((P,$)=>f.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-50",children:P.email}),f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:P.role})]}),f.jsx("button",{type:"button",onClick:()=>z($),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:f.jsx(zg,{className:"w-4 h-4"})})]},$))})]})]}),f.jsx(tn,{onCancel:V,cancelText:"Cancel",confirmText:y?"Creating...":"Create Campaign",confirmDisabled:y||!i.trim(),confirmType:"submit",isLoading:y})]})})}const Q_=()=>{const{user:l}=Sa(),{items:n,loading:r,error:i,execute:o,setItems:c}=zl(),h=S.useMemo(()=>Gu(),[]),m=S.useCallback(async()=>{if(!l?.email)return;await o(async()=>{const x=await h.getUserInvitations(l.email);return x.success?{success:!0,data:x.data||[]}:x.error?.includes("function")&&x.error?.includes("does not exist")?{success:!0,data:[]}:{success:!1,error:x.error||"Failed to load invitations"}})},[l?.email,h,o]),g=S.useCallback(async b=>{if(!l)return{success:!1,error:"User not found"};try{const x=await h.acceptCampaignInvitation(b,l.id);return x.success&&c(_=>_.filter(C=>C.id!==b)),x}catch{return{success:!1,error:"Failed to accept invitation"}}},[l,h,c]),y=S.useCallback(async b=>{try{const x=await h.declineCampaignInvitation(b);return x.success&&c(_=>_.filter(C=>C.id!==b)),x}catch{return{success:!1,error:"Failed to decline invitation"}}},[h,c]),v=S.useCallback(async(b,x)=>{if(!l)return{success:!1,error:"User not found"};try{const _=await g(b);if(!_.success)return _;const C=n.find(R=>R.id===b);if(!C)return{success:!1,error:"Invitation not found"};const{supabase:E}=await nn(async()=>{const{supabase:R}=await Promise.resolve().then(()=>x_);return{supabase:R}},void 0),{error:T}=await E.from("characters").update({campaign_id:C.campaignId}).eq("id",x).eq("owner_id",l.id);return T?{success:!1,error:"Failed to assign character to campaign"}:{success:!0}}catch{return{success:!1,error:"Failed to accept invitation and assign character"}}},[l,n,g]);return S.useEffect(()=>{m()},[m]),{invitations:n,loading:r,error:i,acceptInvitation:g,declineInvitation:y,assignCharacterAndAccept:v,refreshInvitations:m}},X_=({onInvitationAccepted:l})=>{const{user:n}=Sa(),{invitations:r,loading:i,error:o,acceptInvitation:c,declineInvitation:h,assignCharacterAndAccept:m}=Q_(),[g,y]=S.useState([]),[v,b]=S.useState(!1),[x,_]=S.useState(null),[C,E]=S.useState(""),[T,R]=S.useState(!1),O=S.useCallback(async()=>{if(n)try{const{data:Y,error:ge}=await K.from("characters").select("id, name, campaign_id").eq("owner_id",n.id).is("campaign_id",null);!ge&&Y&&y(Y)}catch{}},[n]);S.useEffect(()=>{O()},[O]);const z=async Y=>{R(!0);try{(await c(Y.id)).success&&l?.()}finally{R(!1)}},V=Y=>{_(Y),b(!0)},P=async()=>{if(!(!x||!C)){R(!0);try{(await m(x.id,C)).success&&(b(!1),_(null),E(""),await O(),l?.())}finally{R(!1)}}},$=async Y=>{R(!0);try{await h(Y)}finally{R(!1)}},Z=Y=>{const ge=[];return Y.isAdmin&&ge.push("Admin"),Y.isGm&&ge.push("GM"),Y.isPlayer&&ge.push("Player"),ge.length>0?ge.join(", "):"Player"},se=Y=>Y?Y.toLocaleDateString():"No expiration";return i?f.jsx("div",{className:"text-center py-4",children:"Loading invitations..."}):o?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"Campaign Invitations"}),f.jsx("p",{className:"text-red-600",children:o})]}):r.length===0?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"No pending invitations"}),f.jsx("p",{children:"You don't have any pending campaign invitations at the moment."})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Invitations"}),r.map(Y=>f.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg",children:Y.campaignName||"Unknown Campaign"}),f.jsxs("p",{className:"text-gray-600 text-sm",children:["Invited by ",Y.invitedByName||"Unknown User"]})]}),f.jsxs("div",{className:"text-right text-sm text-gray-500",children:[f.jsxs("div",{children:["Expires: ",se(Y.expiresAt)]}),f.jsxs("div",{children:["Roles: ",Z(Y.rolesOffered)]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ne,{onClick:()=>z(Y),disabled:T,className:"bg-green-600 hover:bg-green-700",children:"Accept"}),g.length>0&&f.jsx(ne,{onClick:()=>V(Y),disabled:T,className:"bg-blue-600 hover:bg-blue-700",children:"Accept & Assign Character"}),f.jsx(ne,{onClick:()=>$(Y.id),disabled:T,variant:"default",children:"Decline"})]})]},Y.id)),f.jsx(Pe,{isOpen:v,onClose:()=>{b(!1),_(null),E("")},title:"Accept Invitation & Assign Character",children:f.jsxs("div",{className:"space-y-4",children:[x&&f.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[f.jsx("h4",{className:"font-medium",children:x.campaignName}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Roles: ",Z(x.rolesOffered)]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"character-select",className:"block text-sm font-medium mb-2",children:"Select a character to assign:"}),f.jsxs("select",{id:"character-select",value:C,onChange:Y=>E(Y.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"",children:"Choose a character..."}),g.map(Y=>f.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[f.jsx(ne,{onClick:()=>{b(!1),_(null),E("")},variant:"default",disabled:T,children:"Cancel"}),f.jsx(ne,{onClick:P,disabled:T||!C,className:"bg-green-600 hover:bg-green-700",children:"Accept & Assign"})]})]})})]})},Pu=l=>l.isAdmin?"admin":l.isGm?"gm":"player";function Ep(l){return l==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":l==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function pu({title:l,description:n,icon:r,onClick:i,disabled:o=!1}){return f.jsx("button",{onClick:i,disabled:o,className:"card p-6 text-left hover:shadow-lg hover:shadow-blue-100 dark:hover:shadow-blue-900/20 hover:border-blue-300 dark:hover:border-blue-600 hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-none",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"text-blue-600 dark:text-blue-400 transition-transform duration-200 hover:scale-110",children:r}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-zinc-50 transition-colors duration-200",children:l}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-200",children:n})]})]})})}function I_({campaigns:l,onCampaignSelect:n}){const r=l.sort((i,o)=>o.updatedAt.getTime()-i.updatedAt.getTime()).slice(0,3);return f.jsxs("div",{className:"card p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),l.length>3&&f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.length," total"]})]}),r.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):f.jsx("div",{className:"space-y-3",children:r.map(i=>f.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 hover:shadow-sm cursor-pointer transition-all duration-200",onClick:()=>n(i.id),children:[f.jsxs("div",{className:"flex-grow",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:i.name}),i.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Ep(Pu(i.userRoles))}`,children:Dl(i.userRoles)})]}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.memberCount||0," member(s)  Updated"," ",i.updatedAt.toLocaleDateString()]})]}),f.jsx(qg,{className:"w-4 h-4 text-gray-400 transition-transform duration-200 group-hover:translate-x-1"})]},i.id))})]})}function J_({campaign:l,onSelect:n,onEdit:r,onSettings:i}){const o=Pu(l.userRoles);return f.jsxs("div",{className:"card p-6 hover:shadow-lg hover:shadow-gray-100 dark:hover:shadow-gray-900/20 hover:border-blue-300 dark:hover:border-blue-600 hover:-translate-y-1 transition-all duration-200",children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:l.name}),l.description&&f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:l.description})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Ep(o)}`,children:Dl(l.userRoles)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.memberCount||0," member(s)"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>r(l),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Edit Campaign",children:f.jsx(iv,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>i(l),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Campaign Settings",children:f.jsx(Bg,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>n(l.id),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Enter Campaign",children:f.jsx(qg,{className:"w-4 h-4"})})]})]})]})}function Z_({campaign:l,onViewCampaign:n}){const{characters:r}=Mr(l.id);return f.jsxs("div",{className:"card p-6 hover:shadow-lg hover:shadow-gray-100 dark:hover:shadow-gray-900/20 hover:border-green-300 dark:hover:border-green-600 hover:-translate-y-1 transition-all duration-200",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:l.name}),f.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[r.length," CHARACTER",r.length!==1?"S":""]})]}),r.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(i=>f.jsxs("div",{className:"flex items-center text-sm",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),f.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:i.characterName||i.displayName})]},i.id)),r.length>3&&f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-4",children:["+",r.length-3," more characters"]})]})}),f.jsx("button",{onClick:()=>n(l.id),className:"w-full text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 font-medium py-2 px-3 rounded-md transition-all duration-200 hover:shadow-sm",children:"View Campaign "})]})}function F_({campaigns:l,onSelect:n,onEdit:r,onSettings:i}){return f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(o=>f.jsx(J_,{campaign:o,onSelect:n,onEdit:r,onSettings:i},o.id))})]})}function W_({campaigns:l,onViewCampaign:n}){const r=l.filter(i=>i.memberCount&&i.memberCount>0);return f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),r.length===0?f.jsx("div",{className:"card p-6 text-center",children:f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(i=>f.jsx(Z_,{campaign:i,onViewCampaign:n},i.id))})]})}function eS(){const l=kl(),{campaigns:n,loading:r,error:i,createCampaign:o,updateCampaign:c,deleteCampaign:h}=O_(),{fetchMembers:m,addMemberByEmail:g,removeMember:y,updateMemberRole:v}=k_(),{signOut:b,user:x,updateProfile:_,changePassword:C,deleteAccount:E}=Sa(),[T,R]=S.useState(!1),[O,z]=S.useState(!1),[V,P]=S.useState(!1),[$,Z]=S.useState(!1),[se,Y]=S.useState(!1),[ge,Be]=S.useState(!1),[_e,ae]=S.useState(null),[Re,Fe]=S.useState(""),[B,G]=S.useState(""),[X,pe]=S.useState(!1),[be,De]=S.useState(null),Ne=async W=>{const we=await o(W);return we.success&&R(!1),we},me=W=>{ae(W),Fe(W.name),G(W.description||""),z(!0)},qe=async W=>{if(W.preventDefault(),!!_e){pe(!0);try{(await c(_e.id,{name:Re.trim(),description:B.trim()||void 0})).success&&(z(!1),ae(null))}finally{pe(!1)}}},ut=W=>{De(W),P(!0)},Rt=async(W,we,oe)=>{const Le=Pu(oe);return await g(W,we,Le)},Ye=async(W,we)=>{await y(W,we)},$t=async(W,we,oe)=>await v(W,we,oe),Gt=W=>({id:W.id,name:W.name,description:W.description||null,created_at:W.createdAt.toISOString(),created_by:W.createdBy,updated_at:W.updatedAt.toISOString(),userRoles:W.userRoles,member_count:W.memberCount}),Ca=async W=>{const we=await m(W);return we.success?we.data:void 0};return r?f.jsx(D_,{message:"Loading dashboard..."}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),x&&f.jsx(P_,{user:x,onSettings:()=>Be(!0),onSignOut:()=>b()})]})}),f.jsx("div",{className:"p-6 space-y-6",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[i&&f.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:i}),f.jsx("div",{className:"mb-8",children:f.jsx(X_,{onInvitationAccepted:()=>{}})}),f.jsx("div",{className:"mb-8",children:f.jsx(I_,{campaigns:n,onCampaignSelect:W=>l(`/campaign/${W}`)})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[f.jsx(pu,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:f.jsx(lv,{className:"w-8 h-8"}),onClick:()=>R(!0)}),f.jsx(pu,{title:"Your Characters",description:"Create and manage your standalone characters",icon:f.jsx(Cl,{className:"w-8 h-8"}),onClick:()=>Y(!0)}),f.jsx(pu,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:f.jsx(an,{className:"w-8 h-8"}),onClick:()=>Z(!0)})]})]}),n.length>0&&f.jsx("div",{className:"mb-8",children:f.jsx(F_,{campaigns:n,onSelect:W=>l(`/campaign/${W}`),onEdit:me,onSettings:ut})}),n.length>0&&f.jsx("div",{className:"mb-8",children:f.jsx(W_,{campaigns:n,onViewCampaign:W=>l(`/campaign/${W}`)})})]})}),f.jsx(K_,{isOpen:T,onClose:()=>R(!1),onCreateCampaign:Ne}),f.jsx(Pe,{isOpen:O,onClose:()=>z(!1),title:"Edit Campaign",children:f.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[f.jsx(J,{label:"Campaign Name",value:Re,onChange:W=>Fe(W.target.value),placeholder:"Enter campaign name",required:!0}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:B,onChange:W=>G(W.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsx(tn,{onCancel:()=>z(!1),cancelText:"Cancel",confirmText:X?"Updating...":"Update Campaign",confirmDisabled:X||!Re.trim(),confirmType:"submit",isLoading:X})]})}),be&&f.jsx(Pe,{isOpen:V,onClose:()=>P(!1),title:"Campaign Settings",maxWidth:"xl",children:f.jsx(M_,{campaign:Gt(be),onClose:()=>P(!1),onGetMembers:Ca,onAddMember:Rt,onRemoveMember:Ye,onUpdateMemberRole:$t,onUpdateCampaign:async(W,we)=>{await c(W,{name:we.name,description:we.description||void 0})},onDeleteCampaign:async W=>{(await h(W)).success&&(P(!1),De(null))}})}),f.jsx(Pe,{isOpen:$,onClose:()=>Z(!1),title:"Character Management",maxWidth:"xl",children:f.jsx($_,{campaigns:n,onViewCampaign:W=>{Z(!1),l(`/campaign/${W}`)}})}),f.jsx(Pe,{isOpen:se,onClose:()=>Y(!1),title:"Your Characters",maxWidth:"xl",children:f.jsx(V_,{campaigns:n})}),x&&f.jsx(Y_,{isOpen:ge,onClose:()=>Be(!1),user:x,onUpdateProfile:async W=>{const we=await _(W);if(!we.success&&we.error)throw new Error(we.error)},onChangePassword:async W=>{const we=await C(W);if(!we.success&&we.error)throw new Error(we.error)},onDeleteAccount:()=>{E().then(()=>{Be(!1)})}})]})}const Np="traveller-ui-state-v1",Mg={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function Tp(){try{const l=localStorage.getItem(Np);if(!l)return Mg;const n=JSON.parse(l);return n.PCs||(n.PCs={}),Object.keys(n.PCs).forEach(r=>{n.PCs[r].Finance||(n.PCs[r].Finance=[]),n.PCs[r].Inventory||(n.PCs[r].Inventory=[]),n.PCs[r].Weapons||(n.PCs[r].Weapons=[]),n.PCs[r].Armour||(n.PCs[r].Armour=[]),n.PCs[r].Ammo||(n.PCs[r].Ammo=[])}),n}catch{return Mg}}function Rp(l){localStorage.setItem(Np,JSON.stringify(l))}function Wa(l){const n=Tp();n.PCs[l]||(n.PCs[l]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Rp(n))}function tS(l){const n=S.useCallback((o,c,h)=>{l(m=>{m.PCs[o]||Wa(o);const g=m.PCs[o]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...m,PCs:{...m.PCs,[o]:{...g,Ammo:(g.Ammo||[]).map((y,v)=>v===c?h:y)}}}})},[l]),r=S.useCallback((o,c)=>{l(h=>{if(!h.PCs[o])return Wa(o),h;const m=h.PCs[o]?.Ammo?.[c];if(!m)return h;const g=Number(m["Rounds Loaded"]||0),y=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),b=Number(m["Magazine Size"]||0);let x=g,_=y,C=v;if(x>0)x-=1;else if(_>0)_-=1,x=b-1;else if(C>0&&b>0){const R=Math.min(C,b);C-=R,x=R-1}else return h;const E=x+_*b+C,T={...m,"Rounds Loaded":x,"Spare Magazines":_,"Loose Rounds":C,"Total Rounds":E};return{...h,PCs:{...h.PCs,[o]:{...h.PCs[o],Ammo:(h.PCs[o].Ammo||[]).map((R,O)=>O===c?T:R)}}}})},[l]),i=S.useCallback((o,c)=>{l(h=>{if(!h.PCs[o])return Wa(o),h;const m=h.PCs[o]?.Ammo?.[c];if(!m)return h;const g=Number(m["Rounds Loaded"]||0),y=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),b=Number(m["Magazine Size"]||0);let x=g,_=y,C=v;if(_>0&&x<b)_-=1,x=b;else if(C>0&&x<b){const R=b-x,O=Math.min(C,R);C-=O,x+=O}const E=x+_*b+C,T={...m,"Rounds Loaded":x,"Spare Magazines":_,"Loose Rounds":C,"Total Rounds":E};return{...h,PCs:{...h.PCs,[o]:{...h.PCs[o],Ammo:(h.PCs[o].Ammo||[]).map((R,O)=>O===c?T:R)}}}})},[l]);return{updateCharacterAmmo:n,fireRound:r,reloadWeapon:i}}function aS(){const[l,n]=S.useState(Tp());S.useEffect(()=>{Rp(l)},[l]);const r=S.useCallback(b=>{n(x=>({...x,Party_Finances:b}))},[]),i=S.useCallback(b=>{n(x=>({...x,Ship_Accounts:b}))},[]),o=S.useCallback(b=>{n(x=>({...x,Ship_Cargo:[...x.Ship_Cargo,b]}))},[]),c=S.useCallback((b,x)=>{n(_=>(_.PCs[b]||Wa(b),{..._,PCs:{..._.PCs,[b]:{..._.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:x}}}))},[]),h=S.useCallback((b,x)=>{n(_=>{_.PCs[b]||Wa(b);const C=_.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{..._,PCs:{..._.PCs,[b]:{...C,Inventory:[...C.Inventory,x]}}}})},[]),m=S.useCallback((b,x)=>{n(_=>{_.PCs[b]||Wa(b);const C=_.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{..._,PCs:{..._.PCs,[b]:{...C,Ammo:[...C.Ammo||[],x]}}}})},[]),g=S.useCallback((b,x)=>{n(_=>{_.PCs[b]||Wa(b);const C=_.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{..._,PCs:{..._.PCs,[b]:{...C,Weapons:[...C.Weapons||[],x]}}}})},[]),y=S.useCallback((b,x)=>{n(_=>{_.PCs[b]||Wa(b);const C=_.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{..._,PCs:{..._.PCs,[b]:{...C,Armour:[...C.Armour||[],x]}}}})},[]),v=tS(n);return{state:l,setState:n,updatePartyFinances:r,updateShipAccounts:i,addCargoLeg:o,updateCharacterFinance:c,addCharacterInventory:h,addCharacterAmmo:m,addCharacterWeapon:g,addCharacterArmour:y,...v}}function nS(l,n=0){let r=n;return l.map(i=>{const o=i["Amount (Cr)"],c=i.Category;return c==="Income"?r+=o:c==="Expense"&&(r-=o),{...i,"Running Total":r}})}function _l(l,n=0){return l.reduce((r,i)=>{const o=i["Amount (Cr)"],c=i.Category;return c==="Income"?r+o:c==="Expense"?r-o:r},n)}function rS(l,n,r=0){const i=[...l,n];return i.sort((o,c)=>new Date(o.Date).getTime()-new Date(c.Date).getTime()),nS(i,r)}function sS(l){const n=[];return l.Description?.trim()||n.push("Description is required"),l.Date||n.push("Date is required"),(l["Amount (Cr)"]===void 0||l["Amount (Cr)"]===null)&&n.push("Amount is required"),typeof l["Amount (Cr)"]=="number"&&l["Amount (Cr)"]<0&&n.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(l.Category||"")||n.push("Category must be Income, Expense, or Transfer"),{isValid:n.length===0,errors:n}}function vl(l){return`${l.toLocaleString()} Cr`}function iS(l){const n=l.reduce((r,i)=>{const o=i["Amount (Cr)"];return i.Category==="Income"?r.totalIncome+=o:i.Category==="Expense"&&(r.totalExpenses+=o),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...n,netChange:n.totalIncome-n.totalExpenses}}function lS(l,n){return S.useMemo(()=>({party:_l(l.Party_Finances,0),ship:_l(l.Ship_Accounts,0),character:_l(l.PCs[n]?.Finance||[],0)}),[l.Party_Finances,l.Ship_Accounts,l.PCs,n])}function oS(l,n){const r=S.useCallback(async o=>{try{const{importXlsx:c}=await nn(async()=>{const{importXlsx:h}=await import("./xlsx-CMt2WY0y.js");return{importXlsx:h}},__vite__mapDeps([0,1,2,3]));return await c(o,l),{success:!0}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}},[l]),i=S.useCallback(async()=>{try{const{exportXlsx:o}=await nn(async()=>{const{exportXlsx:c}=await import("./xlsx-CMt2WY0y.js");return{exportXlsx:c}},__vite__mapDeps([0,1,2,3]));return await o(n),{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}},[n]);return{handleImport:r,handleExport:i}}function cS({onImport:l,onExport:n}){const r=async c=>{const h=c.target.files?.[0];h&&((await l(h)).success||(c.target.value=""))},i=async()=>{await n()},o=c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.currentTarget.click())};return f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),f.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[f.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:o,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[f.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:r,"data-testid":"file-input"}),f.jsx(ov,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),f.jsxs(ne,{onClick:i,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[f.jsx(cv,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const kr=l=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(l)} Cr`,uS=()=>new Date().toISOString().slice(0,10);function dS({partyBalance:l,shipBalance:n,cargoLegsCount:r,characterCount:i}){return f.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${kr(l)}`,children:kr(l)})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${kr(n)}`,children:kr(n)})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${r}`,children:r})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${i}`,children:i})]})]})}function Op({tabs:l,active:n,onChange:r}){const i=o=>{const c=l.findIndex(g=>g.id===n);let h=c;switch(o.key){case"ArrowLeft":o.preventDefault(),h=c>0?c-1:l.length-1;break;case"ArrowRight":o.preventDefault(),h=c<l.length-1?c+1:0;break;case"Home":o.preventDefault(),h=0;break;case"End":o.preventDefault(),h=l.length-1;break;default:return}const m=l[h].id;r(m)};return f.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:l.map(o=>f.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${n===o.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>r(o.id),onKeyDown:i,role:"tab","aria-selected":n===o.id,"aria-controls":`tabpanel-${o.id}`,id:`tab-${o.id}`,type:"button",tabIndex:n===o.id?0:-1,"data-testid":`tab-${o.id}`,children:o.label},o.id))})}function Un({title:l,children:n}){return f.jsxs("div",{className:"card space-y-3",children:[f.jsx("div",{className:"font-semibold",children:l}),n]})}function Hr({columns:l,rows:n}){const r=i=>S.isValidElement(i)?i:String(i??"");return f.jsx("div",{className:"overflow-auto border rounded-2xl",children:f.jsxs("table",{className:"table",children:[f.jsx("thead",{children:f.jsx("tr",{children:l.map(i=>f.jsx("th",{children:i},i))})}),f.jsx("tbody",{children:n.length===0?f.jsx("tr",{children:f.jsx("td",{className:"text-zinc-500 p-3",colSpan:l.length,children:"No rows yet."})}):n.map((i,o)=>f.jsx("tr",{children:l.map(c=>f.jsx("td",{children:r(i[c])},c))},o))})]})})}function $r(l){const[n,r]=S.useState(l),i=S.useCallback((g,y)=>{r(v=>({...v,[g]:y}))},[]),o=S.useCallback(g=>y=>{i(g,y.target.value)},[i]),c=S.useCallback(g=>{r(y=>{const v={...l};return g&&g.forEach(b=>{v[b]=y[b]}),v})},[l]),h=S.useCallback(g=>{r(y=>({...y,...g}))},[]),m=S.useCallback(()=>({...n}),[n]);return{form:n,updateField:i,createInputHandler:o,resetForm:c,updateFields:h,getFormData:m,setForm:r}}const hS={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function fS({rows:l,onAdd:n}){const{form:r,createInputHandler:i,resetForm:o}=$r(hS),c=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const h=Number(r.Tons),m=Number(r.BuyPP),g=r.SellPP===""?null:Number(r.SellPP),y=r.Fees===""?0:Number(r.Fees),v=g===null?null:(g-m)*h-y;n({"Leg/Route":r.Route,Item:r.Item,Tons:h,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":m,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":g,"Broker (DM)":r.DM,"Fees/Taxes (Cr)":y,"Profit (Cr)":v}),o()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Un,{title:"Record Cargo Leg",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(J,{placeholder:"Route (Vland  Regina)",value:r.Route,onChange:i("Route")}),f.jsx(J,{placeholder:"Item",value:r.Item,onChange:i("Item")}),f.jsx(J,{type:"number",placeholder:"Tons",value:r.Tons,onChange:i("Tons")}),f.jsx(J,{placeholder:"Purchase World",value:r.BuyWorld,onChange:i("BuyWorld")}),f.jsx(J,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:r.BuyPP,onChange:i("BuyPP")}),f.jsx(J,{placeholder:"Sale World (optional)",value:r.SellWorld,onChange:i("SellWorld")}),f.jsx(J,{type:"number",placeholder:"Sale Price (Cr/ton)",value:r.SellPP,onChange:i("SellPP")}),f.jsx(J,{placeholder:"Broker DM",value:r.DM,onChange:i("DM")}),f.jsx(J,{type:"number",placeholder:"Fees/Taxes (Cr)",value:r.Fees,onChange:i("Fees")})]}),f.jsx(ne,{className:"mt-2",onClick:c,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),f.jsx(Hr,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:l})]})}function mS({title:l,totalIncome:n,totalExpenses:r,netChange:i,currentBalance:o}){return f.jsx(Un,{title:`${l} Summary`,children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),f.jsx("div",{children:vl(n)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),f.jsx("div",{children:vl(r)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),f.jsx("div",{className:i>=0?"text-green-600":"text-red-600",children:vl(i)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),f.jsx("div",{className:o>=0?"text-green-600":"text-red-600",children:vl(o)})]})]})})}function gS({title:l,fundName:n,onSubmit:r}){const i={Date:uS(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:o,createInputHandler:c,resetForm:h}=$r(i),[m,g]=S.useState([]),y=()=>{g([]);const v={Date:o.Date,Description:o.Description,Category:o.Category,Subcategory:o.Subcategory,"Amount (Cr)":Number(o.Amount),"Paid By":n,"Paid From (Fund)":n,Notes:o.Notes},b=sS(v);if(!b.isValid){g(b.errors);return}r(v),h(["Date","Category"])};return f.jsxs(Un,{title:`Add ${l} Transaction`,children:[m.length>0&&f.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:f.jsx("ul",{className:"list-disc list-inside",children:m.map((v,b)=>f.jsx("li",{children:v},b))})}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(J,{type:"date",value:o.Date,onChange:c("Date")}),f.jsx(J,{placeholder:"Description",value:o.Description,onChange:c("Description")}),f.jsxs(J,{type:"select",value:o.Category,onChange:c("Category"),children:[f.jsx("option",{value:"Income",children:"Income"}),f.jsx("option",{value:"Expense",children:"Expense"}),f.jsx("option",{value:"Transfer",children:"Transfer"})]}),f.jsx(J,{placeholder:"Subcategory",value:o.Subcategory,onChange:c("Subcategory")}),f.jsx(J,{type:"number",placeholder:"Amount (Cr)",value:o.Amount,onChange:c("Amount")}),f.jsx(J,{placeholder:"Notes",value:o.Notes,onChange:c("Notes")})]}),f.jsx(ne,{className:"mt-2",onClick:y,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function Ru({title:l,rows:n,onUpdate:r,fundName:i,initialBalance:o=0,showSummary:c=!0}){const h=_l(n,o),m=iS(n),g=v=>{const b=rS(n,v,o);r(b)},y=n.map(v=>({...v,"Amount (Cr)":v.Category==="Expense"?-Math.abs(v["Amount (Cr)"]):Math.abs(v["Amount (Cr)"])}));return f.jsxs("div",{className:"space-y-4",children:[c&&f.jsx(mS,{title:l,totalIncome:m.totalIncome,totalExpenses:m.totalExpenses,netChange:m.netChange,currentBalance:h}),f.jsx(gS,{title:l,fundName:i,onSubmit:g}),f.jsx(Hr,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:y})]})}function pS({pc:l,rows:n,onAdd:r}){const i=l.includes("  ")?l.split("  ")[1]:l;return f.jsx("div",{className:"space-y-4",children:f.jsx(Ru,{title:i,rows:n,onUpdate:r,fundName:`${i} Fund`,initialBalance:0,showSummary:!0})})}const yS={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function vS({rows:l,onAdd:n}){const{form:r,createInputHandler:i,resetForm:o}=$r(yS),c=()=>{if(!r.Item||r.Qty==="")return;const h=Number(r.Qty||0),m=Number(r["Unit Mass (kg)"]||0),g=Number(r["Unit Value (Cr)"]||0);n({Item:r.Item,Qty:h,"Unit Mass (kg)":m,"Total Mass (kg)":h*m,"Unit Value (Cr)":g,"Total Value (Cr)":h*g,"Location/Container":r["Location/Container"],Notes:r.Notes}),o()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Un,{title:"Add Inventory Item",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(J,{placeholder:"Item",value:r.Item,onChange:i("Item")}),f.jsx(J,{type:"number",placeholder:"Qty",value:r.Qty,onChange:i("Qty")}),f.jsx(J,{type:"number",placeholder:"Unit Mass (kg)",value:r["Unit Mass (kg)"],onChange:i("Unit Mass (kg)")}),f.jsx(J,{type:"number",placeholder:"Unit Value (Cr)",value:r["Unit Value (Cr)"],onChange:i("Unit Value (Cr)")}),f.jsx(J,{placeholder:"Location/Container",value:r["Location/Container"],onChange:i("Location/Container")}),f.jsx(J,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),f.jsx(ne,{className:"mt-2",onClick:c,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),f.jsx(Hr,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:l})]})}function bS({content:l,children:n,position:r="bottom",className:i=""}){const[o,c]=S.useState(!1),h={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},m={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return f.jsxs("div",{className:`relative inline-block ${i}`,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),children:[n,o&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:`absolute z-[9999] ${h[r]} transition-opacity duration-200`,children:[f.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:l}),f.jsx("div",{className:`absolute ${m[r]}`})]})})]})}const xS={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Notes:""};function wS({row:l,index:n,onFireRound:r,onReload:i}){return f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ne,{variant:"danger",size:"sm",onClick:()=>r?.(n),disabled:Number(l["Total Rounds"]||0)<=0,title:`Fire one round from ${l.Weapon}`,"aria-label":`Fire one round from ${l.Weapon}`,children:"Fire"}),f.jsx(ne,{variant:"primary",size:"sm",onClick:()=>i?.(n),disabled:Number(l["Spare Magazines"]||0)<=0&&Number(l["Loose Rounds"]||0)<=0,title:`Reload ${l.Weapon}`,"aria-label":`Reload ${l.Weapon}`,children:"Reload"})]})}function _S({rows:l,weapons:n=[],onAdd:r,onFireRound:i,onReload:o}){const{form:c,createInputHandler:h,resetForm:m,updateField:g}=$r(xS),y=()=>{if(!c.Weapon)return;const x=Number(c["Magazine Size"]||0),_=Number(c["Rounds Loaded"]||0),C=Number(c["Spare Magazines"]||0),E=Number(c["Loose Rounds"]||0),T=x*C+_+E;r({Weapon:c.Weapon,"Ammo Type":c["Ammo Type"],"Magazine Size":x,"Rounds Loaded":_,"Spare Magazines":C,"Loose Rounds":E,"Total Rounds":T,Notes:c.Notes}),m()},v=x=>{g("Weapon",x)},b=l.map((x,_)=>({...x,Actions:f.jsx(wS,{row:x,index:_,onFireRound:i,onReload:o})}));return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Un,{title:"Add Ammunition Entry",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsxs(J,{type:"select",value:c.Weapon==="__custom"?"":c.Weapon,onChange:h("Weapon"),children:[f.jsx("option",{value:"",children:"Select Weapon"}),n.map(x=>f.jsxs("option",{value:x.Weapon,children:[x.Weapon," (",x.Type,")"]},x.Weapon)),f.jsx("option",{value:"__custom",children:"--- Custom Weapon ---"})]}),c.Weapon==="__custom"&&f.jsx(J,{placeholder:"Custom Weapon Name",value:"",onChange:x=>v(x.target.value)}),f.jsx(J,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:c["Ammo Type"],onChange:h("Ammo Type")}),f.jsx(J,{type:"number",placeholder:"Magazine Size",value:c["Magazine Size"],onChange:h("Magazine Size")}),f.jsx(J,{type:"number",placeholder:"Rounds Loaded",value:c["Rounds Loaded"],onChange:h("Rounds Loaded")}),f.jsx(J,{type:"number",placeholder:"Spare Magazines",value:c["Spare Magazines"],onChange:h("Spare Magazines")}),f.jsx(J,{type:"number",placeholder:"Loose Rounds",value:c["Loose Rounds"],onChange:h("Loose Rounds")}),f.jsx(J,{placeholder:"Notes",value:c.Notes,onChange:h("Notes")})]}),f.jsx(ne,{className:"mt-2",onClick:y,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),f.jsx(bS,{content:f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),f.jsxs("ul",{className:"space-y-1 text-sm",children:[f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds  Spare magazines  Loose rounds"]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:f.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:f.jsx(uv,{className:"w-5 h-5"})})})]}),f.jsx(Hr,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:b})]})}const SS={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function CS({rows:l,onAdd:n}){const{form:r,createInputHandler:i,resetForm:o}=$r(SS),c=()=>{r.Weapon&&(n({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),o())};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Un,{title:"Add Weapon Entry",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(J,{placeholder:"Weapon Name",value:r.Weapon,onChange:i("Weapon")}),f.jsxs(J,{type:"select",value:r.Type,onChange:i("Type"),children:[f.jsx("option",{value:"",children:"Select Type"}),f.jsx("option",{value:"Melee",children:"Melee"}),f.jsx("option",{value:"Pistol",children:"Pistol"}),f.jsx("option",{value:"Rifle",children:"Rifle"}),f.jsx("option",{value:"Shotgun",children:"Shotgun"}),f.jsx("option",{value:"Heavy Weapon",children:"Heavy Weapon"}),f.jsx("option",{value:"Explosive",children:"Explosive"}),f.jsx("option",{value:"Other",children:"Other"})]}),f.jsx(J,{placeholder:"Damage (e.g., 3d6)",value:r.Damage,onChange:i("Damage")}),f.jsx(J,{placeholder:"Range (e.g., 150m)",value:r.Range,onChange:i("Range")}),f.jsx(J,{type:"number",placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),f.jsx(J,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),f.jsx(J,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),f.jsx(ne,{className:"mt-2",onClick:c,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),f.jsx(Hr,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:l})]})}const jS={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function AS({rows:l,onAdd:n}){const{form:r,createInputHandler:i,resetForm:o}=$r(jS),c=()=>{r.Armour&&(n({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),o())};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Un,{title:"Add Armour Entry",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(J,{placeholder:"Armour Name",value:r.Armour,onChange:i("Armour")}),f.jsxs(J,{type:"select",value:r.Type,onChange:i("Type"),children:[f.jsx("option",{value:"",children:"Select Type"}),f.jsx("option",{value:"Cloth",children:"Cloth"}),f.jsx("option",{value:"Mesh",children:"Mesh"}),f.jsx("option",{value:"Flak Jacket",children:"Flak Jacket"}),f.jsx("option",{value:"Combat Armour",children:"Combat Armour"}),f.jsx("option",{value:"Battle Dress",children:"Battle Dress"}),f.jsx("option",{value:"Powered Armour",children:"Powered Armour"}),f.jsx("option",{value:"Vacc Suit",children:"Vacc Suit"}),f.jsx("option",{value:"Environmental Suit",children:"Environmental Suit"}),f.jsx("option",{value:"Other",children:"Other"})]}),f.jsx(J,{placeholder:"Protection (e.g., +5, 1d6+2)",value:r.Protection,onChange:i("Protection")}),f.jsx(J,{placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),f.jsx(J,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),f.jsx(J,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),f.jsx(ne,{className:"mt-2",onClick:c,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),f.jsx(Hr,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:l})]})}function ES({campaignId:l,selectedPc:n,onPcChange:r,characterBalance:i,characterFinance:o,characterInventory:c,characterAmmo:h,characterWeapons:m,characterArmour:g,onUpdateFinance:y,onAddInventory:v,onAddAmmo:b,onAddWeapon:x,onAddArmour:_,onFireRound:C,onReloadWeapon:E}){const[T,R]=S.useState("ledger"),{characters:O,loading:z,error:V}=Mr(l),P=O.find($=>$.displayName===n);return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("select",{className:"select",value:n,onChange:$=>r($.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:z,children:z?f.jsx("option",{children:"Loading characters..."}):O.map($=>f.jsx("option",{value:$.displayName,children:$.displayName},$.id))}),V&&f.jsx("span",{className:"text-xs text-yellow-600",title:V,children:" Offline mode"}),f.jsx("div",{className:"text-sm",children:f.jsxs("span",{"aria-label":`Current character balance: ${kr(i)}`,children:["Current Balance:"," ",f.jsx("span",{className:"font-semibold",children:kr(i)})]})})]}),P&&P.id.startsWith("character-")&&f.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",P.playerName," | Character:"," ",P.characterName]}),f.jsx(Op,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:T,onChange:$=>R($)}),T==="ledger"&&f.jsx(pS,{pc:n,rows:o,onAdd:$=>y(n,$)}),T==="inventory"&&f.jsx(vS,{rows:c,onAdd:$=>v(n,$)}),T==="weapons"&&f.jsx(CS,{rows:m,onAdd:$=>x(n,$)}),T==="armour"&&f.jsx(AS,{rows:g,onAdd:$=>_(n,$)}),T==="ammo"&&f.jsx(_S,{rows:h,weapons:m,onAdd:$=>b(n,$),onFireRound:$=>C?.(n,$),onReload:$=>E?.(n,$)})]})}function NS({campaignId:l,activeTab:n,state:r,selectedCharacterDisplayName:i,characterBalance:o,onCharacterChange:c,onUpdatePartyFinances:h,onUpdateShipAccounts:m,onAddCargoLeg:g,onUpdateCharacterFinance:y,onAddCharacterInventory:v,onAddCharacterAmmo:b,onAddCharacterWeapon:x,onAddCharacterArmour:_,onFireRound:C,onReloadWeapon:E}){return f.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${n}`,id:`tabpanel-${n}`,children:[n==="party"&&f.jsx(Ru,{title:"Party",rows:r.Party_Finances,onUpdate:h,fundName:"Party Fund",initialBalance:0,showSummary:!0}),n==="ship"&&f.jsx(Ru,{title:"Ship",rows:r.Ship_Accounts,onUpdate:m,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),n==="cargo"&&f.jsx(fS,{rows:r.Ship_Cargo,onAdd:g}),n==="characters"&&f.jsx(ES,{campaignId:l,selectedPc:i,onPcChange:c,characterBalance:o,characterFinance:r.PCs[i]?.Finance||[],characterInventory:r.PCs[i]?.Inventory||[],characterAmmo:r.PCs[i]?.Ammo||[],characterWeapons:r.PCs[i]?.Weapons||[],characterArmour:r.PCs[i]?.Armour||[],onUpdateFinance:y,onAddInventory:v,onAddAmmo:b,onAddWeapon:x,onAddArmour:_,onFireRound:C,onReloadWeapon:E})]})}function TS(){const{campaignId:l}=Zv(),n=kl(),[r,i]=S.useState("party"),{characters:o}=Mr(l||""),[c,h]=S.useState(""),m=c||o[0]?.displayName||"",{state:g,setState:y,updatePartyFinances:v,updateShipAccounts:b,addCargoLeg:x,updateCharacterFinance:_,addCharacterInventory:C,addCharacterAmmo:E,addCharacterWeapon:T,addCharacterArmour:R,fireRound:O,reloadWeapon:z}=aS(),V=lS(g,m),{handleImport:P,handleExport:$}=oS(y,g);return l?f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>n("/"),className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:" Back to Campaigns"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",l]})]})]})})}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx(cS,{onImport:P,onExport:$}),f.jsx(dS,{partyBalance:V.party,shipBalance:V.ship,cargoLegsCount:g.Ship_Cargo.length,characterCount:o.length}),f.jsx(Op,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:Z=>i(Z)}),f.jsx(NS,{campaignId:l,activeTab:r,state:g,selectedCharacterDisplayName:m,characterBalance:V.character,onCharacterChange:h,onUpdatePartyFinances:v,onUpdateShipAccounts:b,onAddCargoLeg:x,onUpdateCharacterFinance:_,onAddCharacterInventory:C,onAddCharacterAmmo:E,onAddCharacterWeapon:T,onAddCharacterArmour:R,onFireRound:O,onReloadWeapon:z})]})]}):(n("/"),null)}function RS(){const{user:l,loading:n,completeProfile:r}=Sa();return S_(),n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):l?l.profileCompleted?f.jsxs(fb,{children:[f.jsx(bl,{path:"/",element:f.jsx(eS,{})}),f.jsx(bl,{path:"/campaign/:campaignId",element:f.jsx(TS,{})}),f.jsx(bl,{path:"*",element:f.jsx(db,{to:"/",replace:!0})})]}):f.jsx(R_,{onComplete:r}):f.jsx(j_,{})}function OS(){return f.jsx(zb,{basename:"/traveller-dashboard",children:f.jsx(RS,{})})}class kS extends Hg.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error boundary caught an error:",n,r)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:f.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[f.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),f.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),f.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),f.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const kp=document.getElementById("root");if(!kp)throw new Error("Failed to find the root element");wv.createRoot(kp).render(f.jsx(Hg.StrictMode,{children:f.jsx(kS,{children:f.jsx(OS,{})})}));export{Mg as D,nn as _};
