const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-BUvyoub0.js","assets/icons-Bw6bOHsG.js","assets/excel-Du8kUxR_.js","assets/vendor-Dfoqj1Wf.js"])))=>i.map(i=>d[i]);
import{r as z,U as Ur,X as Pm,P as oc,a as zr,T as cc,b as ol,C as Xy,S as Im,L as Jy,c as Zy,d as hm,M as Py,E as zo,e as Mo,R as Iy,f as Wy,g as Fy,h as ep,i as tp,D as ap,j as np,k as Wm}from"./icons-Bw6bOHsG.js";import{g as Fm,a as sp}from"./excel-Du8kUxR_.js";import{r as rp,a as ip}from"./vendor-Dfoqj1Wf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();var Do={exports:{}},Ar={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function lp(){if(mm)return Ar;mm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var g in u)g!=="key"&&(d[g]=u[g])}else d=u;return u=d.ref,{$$typeof:o,type:i,key:f,ref:u!==void 0?u:null,props:d}}return Ar.Fragment=n,Ar.jsx=r,Ar.jsxs=r,Ar}var gm;function up(){return gm||(gm=1,Do.exports=lp()),Do.exports}var h=up(),Bo={exports:{}},Er={},Lo={exports:{}},qo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function op(){return ym||(ym=1,(function(o){function n(U,L){var Q=U.length;U.push(L);e:for(;0<Q;){var pe=Q-1>>>1,ve=U[pe];if(0<u(ve,L))U[pe]=L,U[Q]=ve,Q=pe;else break e}}function r(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var L=U[0],Q=U.pop();if(Q!==L){U[0]=Q;e:for(var pe=0,ve=U.length,Me=ve>>>1;pe<Me;){var Se=2*(pe+1)-1,I=U[Se],be=Se+1,Ie=U[be];if(0>u(I,Q))be<ve&&0>u(Ie,I)?(U[pe]=Ie,U[be]=Q,pe=be):(U[pe]=I,U[Se]=Q,pe=Se);else if(be<ve&&0>u(Ie,Q))U[pe]=Ie,U[be]=Q,pe=be;else break e}}return L}function u(U,L){var Q=U.sortIndex-L.sortIndex;return Q!==0?Q:U.id-L.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();o.unstable_now=function(){return f.now()-g}}var y=[],v=[],x=1,b=null,_=3,S=!1,C=!1,R=!1,B=!1,G=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Y(U){for(var L=r(v);L!==null;){if(L.callback===null)i(v);else if(L.startTime<=U)i(v),L.sortIndex=L.expirationTime,n(y,L);else break;L=r(v)}}function V(U){if(R=!1,Y(U),!C)if(r(y)!==null)C=!0,$||($=!0,de());else{var L=r(v);L!==null&&Pe(V,L.startTime-U)}}var $=!1,ee=-1,ge=5,we=-1;function nt(){return B?!0:!(o.unstable_now()-we<ge)}function se(){if(B=!1,$){var U=o.unstable_now();we=U;var L=!0;try{e:{C=!1,R&&(R=!1,H(ee),ee=-1),S=!0;var Q=_;try{t:{for(Y(U),b=r(y);b!==null&&!(b.expirationTime>U&&nt());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,_=b.priorityLevel;var ve=pe(b.expirationTime<=U);if(U=o.unstable_now(),typeof ve=="function"){b.callback=ve,Y(U),L=!0;break t}b===r(y)&&i(y),Y(U)}else i(y);b=r(y)}if(b!==null)L=!0;else{var Me=r(v);Me!==null&&Pe(V,Me.startTime-U),L=!1}}break e}finally{b=null,_=Q,S=!1}L=void 0}}finally{L?de():$=!1}}}var de;if(typeof q=="function")de=function(){q(se)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,Ze=st.port2;st.port1.onmessage=se,de=function(){Ze.postMessage(null)}}else de=function(){G(se,0)};function Pe(U,L){ee=G(function(){U(o.unstable_now())},L)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return _},o.unstable_next=function(U){switch(_){case 1:case 2:case 3:var L=3;break;default:L=_}var Q=_;_=L;try{return U()}finally{_=Q}},o.unstable_requestPaint=function(){B=!0},o.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=_;_=U;try{return L()}finally{_=Q}},o.unstable_scheduleCallback=function(U,L,Q){var pe=o.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?pe+Q:pe):Q=pe,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Q+ve,U={id:x++,callback:L,priorityLevel:U,startTime:Q,expirationTime:ve,sortIndex:-1},Q>pe?(U.sortIndex=Q,n(v,U),r(y)===null&&U===r(v)&&(R?(H(ee),ee=-1):R=!0,Pe(V,Q-pe))):(U.sortIndex=ve,n(y,U),C||S||(C=!0,$||($=!0,de()))),U},o.unstable_shouldYield=nt,o.unstable_wrapCallback=function(U){var L=_;return function(){var Q=_;_=L;try{return U.apply(this,arguments)}finally{_=Q}}}})(qo)),qo}var pm;function cp(){return pm||(pm=1,Lo.exports=op()),Lo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function dp(){if(vm)return Er;vm=1;var o=cp(),n=rp(),r=ip();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(i(188))}function v(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var l=a.return;if(l===null)break;var c=l.alternate;if(c===null){if(s=l.return,s!==null){a=s;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===a)return y(l),e;if(c===s)return y(l),t;c=c.sibling}throw Error(i(188))}if(a.return!==s.return)a=l,s=c;else{for(var m=!1,p=l.child;p;){if(p===a){m=!0,a=l,s=c;break}if(p===s){m=!0,s=l,a=c;break}p=p.sibling}if(!m){for(p=c.child;p;){if(p===a){m=!0,a=c,s=l;break}if(p===s){m=!0,s=c,a=l;break}p=p.sibling}if(!m)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function de(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var st=Symbol.for("react.client.reference");function Ze(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===st?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case G:return"Profiler";case B:return"StrictMode";case V:return"Suspense";case $:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case q:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return t=e.displayName||null,t!==null?t:Ze(e.type)||"Memo";case ge:t=e._payload,e=e._init;try{return Ze(e(t))}catch{}}return null}var Pe=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},pe=[],ve=-1;function Me(e){return{current:e}}function Se(e){0>ve||(e.current=pe[ve],pe[ve]=null,ve--)}function I(e,t){ve++,pe[ve]=e.current,e.current=t}var be=Me(null),Ie=Me(null),Mt=Me(null),wn=Me(null);function ha(e,t){switch(I(Mt,t),I(Ie,e),I(be,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Dh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Dh(t),e=Bh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Se(be),I(be,e)}function ma(){Se(be),Se(Ie),Se(Mt)}function Sn(e){e.memoizedState!==null&&I(wn,e);var t=be.current,a=Bh(t,e.type);t!==a&&(I(Ie,e),I(be,a))}function jn(e){Ie.current===e&&(Se(be),Se(Ie)),wn.current===e&&(Se(wn),wr._currentValue=Q)}var Ts,Lr;function Xt(e){if(Ts===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ts=t&&t[1]||"",Lr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ts+e+Lr}var Ns=!1;function Os(e,t){if(!e||Ns)return"";Ns=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var D=function(){throw Error()};if(Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(O){var N=O}Reflect.construct(e,[],D)}else{try{D.call()}catch(O){N=O}e.call(D.prototype)}}else{try{throw Error()}catch(O){N=O}(D=e())&&typeof D.catch=="function"&&D.catch(function(){})}}catch(O){if(O&&N&&typeof O.stack=="string")return[O.stack,N.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),m=c[0],p=c[1];if(m&&p){var w=m.split(`
`),T=p.split(`
`);for(l=s=0;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;for(;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;if(s===w.length||l===T.length)for(s=w.length-1,l=T.length-1;1<=s&&0<=l&&w[s]!==T[l];)l--;for(;1<=s&&0<=l;s--,l--)if(w[s]!==T[l]){if(s!==1||l!==1)do if(s--,l--,0>l||w[s]!==T[l]){var k=`
`+w[s].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=s&&0<=l);break}}}finally{Ns=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Xt(a):""}function pl(e,t){switch(e.tag){case 26:case 27:case 5:return Xt(e.type);case 16:return Xt("Lazy");case 13:return e.child!==t&&t!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return Os(e.type,!1);case 11:return Os(e.type.render,!1);case 1:return Os(e.type,!0);case 31:return Xt("Activity");default:return""}}function qr(e){try{var t="",a=null;do t+=pl(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Rs=Object.prototype.hasOwnProperty,ks=o.unstable_scheduleCallback,Us=o.unstable_cancelCallback,vl=o.unstable_shouldYield,bl=o.unstable_requestPaint,X=o.unstable_now,Ee=o.unstable_getCurrentPriorityLevel,$t=o.unstable_ImmediatePriority,xl=o.unstable_UserBlockingPriority,Hr=o.unstable_NormalPriority,Tg=o.unstable_LowPriority,gc=o.unstable_IdlePriority,Ng=o.log,Og=o.unstable_setDisableYieldValue,zs=null,mt=null;function ga(e){if(typeof Ng=="function"&&Og(e),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(zs,e)}catch{}}var gt=Math.clz32?Math.clz32:Ug,Rg=Math.log,kg=Math.LN2;function Ug(e){return e>>>=0,e===0?32:31-(Rg(e)/kg|0)|0}var $r=256,Gr=262144,Vr=4194304;function Ka(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Yr(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var l=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var p=s&134217727;return p!==0?(s=p&~c,s!==0?l=Ka(s):(m&=p,m!==0?l=Ka(m):a||(a=p&~e,a!==0&&(l=Ka(a))))):(p=s&~c,p!==0?l=Ka(p):m!==0?l=Ka(m):a||(a=s&~e,a!==0&&(l=Ka(a)))),l===0?0:t!==0&&t!==l&&(t&c)===0&&(c=l&-l,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:l}function Ms(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function zg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var e=Vr;return Vr<<=1,(Vr&62914560)===0&&(Vr=4194304),e}function _l(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ds(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Mg(e,t,a,s,l,c){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var p=e.entanglements,w=e.expirationTimes,T=e.hiddenUpdates;for(a=m&~a;0<a;){var k=31-gt(a),D=1<<k;p[k]=0,w[k]=-1;var N=T[k];if(N!==null)for(T[k]=null,k=0;k<N.length;k++){var O=N[k];O!==null&&(O.lane&=-536870913)}a&=~D}s!==0&&pc(e,s,0),c!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~t))}function pc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-gt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function vc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-gt(a),l=1<<s;l&t|e[s]&t&&(e[s]|=t),a&=~l}}function bc(e,t){var a=t&-t;return a=(a&42)!==0?1:wl(a),(a&(e.suspendedLanes|t))!==0?0:a}function wl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xc(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:im(e.type))}function _c(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var ya=Math.random().toString(36).slice(2),We="__reactFiber$"+ya,it="__reactProps$"+ya,Cn="__reactContainer$"+ya,jl="__reactEvents$"+ya,Dg="__reactListeners$"+ya,Bg="__reactHandles$"+ya,wc="__reactResources$"+ya,Bs="__reactMarker$"+ya;function Cl(e){delete e[We],delete e[it],delete e[jl],delete e[Dg],delete e[Bg]}function An(e){var t=e[We];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Cn]||a[We]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Yh(e);e!==null;){if(a=e[We])return a;e=Yh(e)}return t}e=a,a=e.parentNode}return null}function En(e){if(e=e[We]||e[Cn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ls(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Tn(e){var t=e[wc];return t||(t=e[wc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Bs]=!0}var Sc=new Set,jc={};function Xa(e,t){Nn(e,t),Nn(e+"Capture",t)}function Nn(e,t){for(jc[e]=t,e=0;e<t.length;e++)Sc.add(t[e])}var Lg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cc={},Ac={};function qg(e){return Rs.call(Ac,e)?!0:Rs.call(Cc,e)?!1:Lg.test(e)?Ac[e]=!0:(Cc[e]=!0,!1)}function Qr(e,t,a){if(qg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Kr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Jt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ec(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hg(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,c=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){a=""+m,c.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Al(e){if(!e._valueTracker){var t=Ec(e)?"checked":"value";e._valueTracker=Hg(e,t,""+e[t])}}function Tc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Ec(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $g=/[\n"\\]/g;function Ct(e){return e.replace($g,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function El(e,t,a,s,l,c,m,p){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+jt(t)):e.value!==""+jt(t)&&(e.value=""+jt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Tl(e,m,jt(t)):a!=null?Tl(e,m,jt(a)):s!=null&&e.removeAttribute("value"),l==null&&c!=null&&(e.defaultChecked=!!c),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+jt(p):e.removeAttribute("name")}function Nc(e,t,a,s,l,c,m,p){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){Al(e);return}a=a!=null?""+jt(a):"",t=t!=null?""+jt(t):a,p||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=p?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Al(e)}function Tl(e,t,a){t==="number"&&Xr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function On(e,t,a,s){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&s&&(e[a].defaultSelected=!0)}else{for(a=""+jt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Oc(e,t,a){if(t!=null&&(t=""+jt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+jt(a):""}function Rc(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(i(92));if(Pe(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=jt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Al(e)}function Rn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Gg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kc(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Gg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Uc(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&a[l]!==s&&kc(e,l,s)}else for(var c in t)t.hasOwnProperty(c)&&kc(e,c,t[c])}function Nl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jr(e){return Yg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zt(){}var Ol=null;function Rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kn=null,Un=null;function zc(e){var t=En(e);if(t&&(e=t.stateNode)){var a=e[it]||null;e:switch(e=t.stateNode,t.type){case"input":if(El(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var l=s[it]||null;if(!l)throw Error(i(90));El(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Tc(s)}break e;case"textarea":Oc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&On(e,!!a.multiple,t,!1)}}}var kl=!1;function Mc(e,t,a){if(kl)return e(t,a);kl=!0;try{var s=e(t);return s}finally{if(kl=!1,(kn!==null||Un!==null)&&(Mi(),kn&&(t=kn,e=Un,Un=kn=null,zc(t),e)))for(t=0;t<e.length;t++)zc(e[t])}}function qs(e,t){var a=e.stateNode;if(a===null)return null;var s=a[it]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ul=!1;if(Pt)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{Ul=!1}var pa=null,zl=null,Zr=null;function Dc(){if(Zr)return Zr;var e,t=zl,a=t.length,s,l="value"in pa?pa.value:pa.textContent,c=l.length;for(e=0;e<a&&t[e]===l[e];e++);var m=a-e;for(s=1;s<=m&&t[a-s]===l[c-s];s++);return Zr=l.slice(e,1<s?1-s:void 0)}function Pr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ir(){return!0}function Bc(){return!1}function lt(e){function t(a,s,l,c,m){this._reactName=a,this._targetInst=l,this.type=s,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(a=e[p],this[p]=a?a(c):c[p]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Ir:Bc,this.isPropagationStopped=Bc,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),t}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wr=lt(Ja),$s=b({},Ja,{view:0,detail:0}),Qg=lt($s),Ml,Dl,Gs,Fr=b({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gs&&(Gs&&e.type==="mousemove"?(Ml=e.screenX-Gs.screenX,Dl=e.screenY-Gs.screenY):Dl=Ml=0,Gs=e),Ml)},movementY:function(e){return"movementY"in e?e.movementY:Dl}}),Lc=lt(Fr),Kg=b({},Fr,{dataTransfer:0}),Xg=lt(Kg),Jg=b({},$s,{relatedTarget:0}),Bl=lt(Jg),Zg=b({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),Pg=lt(Zg),Ig=b({},Ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wg=lt(Ig),Fg=b({},Ja,{data:0}),qc=lt(Fg),e0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=a0[e])?!!t[e]:!1}function Ll(){return n0}var s0=b({},$s,{key:function(e){if(e.key){var t=e0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?t0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(e){return e.type==="keypress"?Pr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r0=lt(s0),i0=b({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hc=lt(i0),l0=b({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),u0=lt(l0),o0=b({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),c0=lt(o0),d0=b({},Fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),f0=lt(d0),h0=b({},Ja,{newState:0,oldState:0}),m0=lt(h0),g0=[9,13,27,32],ql=Pt&&"CompositionEvent"in window,Vs=null;Pt&&"documentMode"in document&&(Vs=document.documentMode);var y0=Pt&&"TextEvent"in window&&!Vs,$c=Pt&&(!ql||Vs&&8<Vs&&11>=Vs),Gc=" ",Vc=!1;function Yc(e,t){switch(e){case"keyup":return g0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zn=!1;function p0(e,t){switch(e){case"compositionend":return Qc(t);case"keypress":return t.which!==32?null:(Vc=!0,Gc);case"textInput":return e=t.data,e===Gc&&Vc?null:e;default:return null}}function v0(e,t){if(zn)return e==="compositionend"||!ql&&Yc(e,t)?(e=Dc(),Zr=zl=pa=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $c&&t.locale!=="ko"?null:t.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b0[e.type]:t==="textarea"}function Xc(e,t,a,s){kn?Un?Un.push(s):Un=[s]:kn=s,t=Gi(t,"onChange"),0<t.length&&(a=new Wr("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Ys=null,Qs=null;function x0(e){Oh(e,0)}function ei(e){var t=Ls(e);if(Tc(t))return e}function Jc(e,t){if(e==="change")return t}var Zc=!1;if(Pt){var Hl;if(Pt){var $l="oninput"in document;if(!$l){var Pc=document.createElement("div");Pc.setAttribute("oninput","return;"),$l=typeof Pc.oninput=="function"}Hl=$l}else Hl=!1;Zc=Hl&&(!document.documentMode||9<document.documentMode)}function Ic(){Ys&&(Ys.detachEvent("onpropertychange",Wc),Qs=Ys=null)}function Wc(e){if(e.propertyName==="value"&&ei(Qs)){var t=[];Xc(t,Qs,e,Rl(e)),Mc(x0,t)}}function _0(e,t,a){e==="focusin"?(Ic(),Ys=t,Qs=a,Ys.attachEvent("onpropertychange",Wc)):e==="focusout"&&Ic()}function w0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ei(Qs)}function S0(e,t){if(e==="click")return ei(t)}function j0(e,t){if(e==="input"||e==="change")return ei(t)}function C0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:C0;function Ks(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var l=a[s];if(!Rs.call(t,l)||!yt(e[l],t[l]))return!1}return!0}function Fc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ed(e,t){var a=Fc(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fc(a)}}function td(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?td(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Xr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Xr(e.document)}return t}function Gl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var A0=Pt&&"documentMode"in document&&11>=document.documentMode,Mn=null,Vl=null,Xs=null,Yl=!1;function nd(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yl||Mn==null||Mn!==Xr(s)||(s=Mn,"selectionStart"in s&&Gl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Xs&&Ks(Xs,s)||(Xs=s,s=Gi(Vl,"onSelect"),0<s.length&&(t=new Wr("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Mn)))}function Za(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Dn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},Ql={},sd={};Pt&&(sd=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function Pa(e){if(Ql[e])return Ql[e];if(!Dn[e])return e;var t=Dn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in sd)return Ql[e]=t[a];return e}var rd=Pa("animationend"),id=Pa("animationiteration"),ld=Pa("animationstart"),E0=Pa("transitionrun"),T0=Pa("transitionstart"),N0=Pa("transitioncancel"),ud=Pa("transitionend"),od=new Map,Kl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kl.push("scrollEnd");function Dt(e,t){od.set(e,t),Xa(t,[e])}var ti=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},At=[],Bn=0,Xl=0;function ai(){for(var e=Bn,t=Xl=Bn=0;t<e;){var a=At[t];At[t++]=null;var s=At[t];At[t++]=null;var l=At[t];At[t++]=null;var c=At[t];if(At[t++]=null,s!==null&&l!==null){var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}c!==0&&cd(a,l,c)}}function ni(e,t,a,s){At[Bn++]=e,At[Bn++]=t,At[Bn++]=a,At[Bn++]=s,Xl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Jl(e,t,a,s){return ni(e,t,a,s),si(e)}function Ia(e,t){return ni(e,null,null,t),si(e)}function cd(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var l=!1,c=e.return;c!==null;)c.childLanes|=a,s=c.alternate,s!==null&&(s.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(l=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,l&&t!==null&&(l=31-gt(a),e=c.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=a|536870912),c):null}function si(e){if(50<gr)throw gr=0,no=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ln={};function O0(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,a,s){return new O0(e,t,a,s)}function Zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function It(e,t){var a=e.alternate;return a===null?(a=pt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function dd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ri(e,t,a,s,l,c){var m=0;if(s=e,typeof e=="function")Zl(e)&&(m=1);else if(typeof e=="string")m=My(e,a,be.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=pt(31,a,t,l),e.elementType=we,e.lanes=c,e;case R:return Wa(a.children,l,c,t);case B:m=8,l|=24;break;case G:return e=pt(12,a,t,l|2),e.elementType=G,e.lanes=c,e;case V:return e=pt(13,a,t,l),e.elementType=V,e.lanes=c,e;case $:return e=pt(19,a,t,l),e.elementType=$,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:m=10;break e;case H:m=9;break e;case Y:m=11;break e;case ee:m=14;break e;case ge:m=16,s=null;break e}m=29,a=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=pt(m,a,t,l),t.elementType=e,t.type=s,t.lanes=c,t}function Wa(e,t,a,s){return e=pt(7,e,s,t),e.lanes=a,e}function Pl(e,t,a){return e=pt(6,e,null,t),e.lanes=a,e}function fd(e){var t=pt(18,null,null,0);return t.stateNode=e,t}function Il(e,t,a){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var hd=new WeakMap;function Et(e,t){if(typeof e=="object"&&e!==null){var a=hd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:qr(t)},hd.set(e,t),t)}return{value:e,source:t,stack:qr(t)}}var qn=[],Hn=0,ii=null,Js=0,Tt=[],Nt=0,va=null,Gt=1,Vt="";function Wt(e,t){qn[Hn++]=Js,qn[Hn++]=ii,ii=e,Js=t}function md(e,t,a){Tt[Nt++]=Gt,Tt[Nt++]=Vt,Tt[Nt++]=va,va=e;var s=Gt;e=Vt;var l=32-gt(s)-1;s&=~(1<<l),a+=1;var c=32-gt(t)+l;if(30<c){var m=l-l%5;c=(s&(1<<m)-1).toString(32),s>>=m,l-=m,Gt=1<<32-gt(t)+l|a<<l|s,Vt=c+e}else Gt=1<<c|a<<l|s,Vt=e}function Wl(e){e.return!==null&&(Wt(e,1),md(e,1,0))}function Fl(e){for(;e===ii;)ii=qn[--Hn],qn[Hn]=null,Js=qn[--Hn],qn[Hn]=null;for(;e===va;)va=Tt[--Nt],Tt[Nt]=null,Vt=Tt[--Nt],Tt[Nt]=null,Gt=Tt[--Nt],Tt[Nt]=null}function gd(e,t){Tt[Nt++]=Gt,Tt[Nt++]=Vt,Tt[Nt++]=va,Gt=t.id,Vt=t.overflow,va=e}var Fe=null,Oe=null,ce=!1,ba=null,Ot=!1,eu=Error(i(519));function xa(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zs(Et(t,e)),eu}function yd(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[We]=e,t[it]=s,a){case"dialog":ie("cancel",t),ie("close",t);break;case"iframe":case"object":case"embed":ie("load",t);break;case"video":case"audio":for(a=0;a<pr.length;a++)ie(pr[a],t);break;case"source":ie("error",t);break;case"img":case"image":case"link":ie("error",t),ie("load",t);break;case"details":ie("toggle",t);break;case"input":ie("invalid",t),Nc(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ie("invalid",t);break;case"textarea":ie("invalid",t),Rc(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||zh(t.textContent,a)?(s.popover!=null&&(ie("beforetoggle",t),ie("toggle",t)),s.onScroll!=null&&ie("scroll",t),s.onScrollEnd!=null&&ie("scrollend",t),s.onClick!=null&&(t.onclick=Zt),t=!0):t=!1,t||xa(e,!0)}function pd(e){for(Fe=e.return;Fe;)switch(Fe.tag){case 5:case 31:case 13:Ot=!1;return;case 27:case 3:Ot=!0;return;default:Fe=Fe.return}}function $n(e){if(e!==Fe)return!1;if(!ce)return pd(e),ce=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bo(e.type,e.memoizedProps)),a=!a),a&&Oe&&xa(e),pd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Oe=Vh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Oe=Vh(e)}else t===27?(t=Oe,za(e.type)?(e=jo,jo=null,Oe=e):Oe=t):Oe=Fe?kt(e.stateNode.nextSibling):null;return!0}function Fa(){Oe=Fe=null,ce=!1}function tu(){var e=ba;return e!==null&&(dt===null?dt=e:dt.push.apply(dt,e),ba=null),e}function Zs(e){ba===null?ba=[e]:ba.push(e)}var au=Me(null),en=null,Ft=null;function _a(e,t,a){I(au,t._currentValue),t._currentValue=a}function ea(e){e._currentValue=au.current,Se(au)}function nu(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function su(e,t,a,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){var m=l.child;c=c.firstContext;e:for(;c!==null;){var p=c;c=l;for(var w=0;w<t.length;w++)if(p.context===t[w]){c.lanes|=a,p=c.alternate,p!==null&&(p.lanes|=a),nu(c.return,a,e),s||(m=null);break e}c=p.next}}else if(l.tag===18){if(m=l.return,m===null)throw Error(i(341));m.lanes|=a,c=m.alternate,c!==null&&(c.lanes|=a),nu(m,a,e),m=null}else m=l.child;if(m!==null)m.return=l;else for(m=l;m!==null;){if(m===e){m=null;break}if(l=m.sibling,l!==null){l.return=m.return,m=l;break}m=m.return}l=m}}function Gn(e,t,a,s){e=null;for(var l=t,c=!1;l!==null;){if(!c){if((l.flags&524288)!==0)c=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var m=l.alternate;if(m===null)throw Error(i(387));if(m=m.memoizedProps,m!==null){var p=l.type;yt(l.pendingProps.value,m.value)||(e!==null?e.push(p):e=[p])}}else if(l===wn.current){if(m=l.alternate,m===null)throw Error(i(387));m.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(wr):e=[wr])}l=l.return}e!==null&&su(t,e,a,s),t.flags|=262144}function li(e){for(e=e.firstContext;e!==null;){if(!yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function tn(e){en=e,Ft=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function et(e){return vd(en,e)}function ui(e,t){return en===null&&tn(e),vd(e,t)}function vd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ft===null){if(e===null)throw Error(i(308));Ft=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ft=Ft.next=t;return a}var R0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},k0=o.unstable_scheduleCallback,U0=o.unstable_NormalPriority,Le={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ru(){return{controller:new R0,data:new Map,refCount:0}}function Ps(e){e.refCount--,e.refCount===0&&k0(U0,function(){e.controller.abort()})}var Is=null,iu=0,Vn=0,Yn=null;function z0(e,t){if(Is===null){var a=Is=[];iu=0,Vn=oo(),Yn={status:"pending",value:void 0,then:function(s){a.push(s)}}}return iu++,t.then(bd,bd),t}function bd(){if(--iu===0&&Is!==null){Yn!==null&&(Yn.status="fulfilled");var e=Is;Is=null,Vn=0,Yn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function M0(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),s}var xd=U.S;U.S=function(e,t){sh=X(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&z0(e,t),xd!==null&&xd(e,t)};var an=Me(null);function lu(){var e=an.current;return e!==null?e:Te.pooledCache}function oi(e,t){t===null?I(an,an.current):I(an,t.pool)}function _d(){var e=lu();return e===null?null:{parent:Le._currentValue,pool:e}}var Qn=Error(i(460)),uu=Error(i(474)),ci=Error(i(542)),di={then:function(){}};function wd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Sd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Zt,Zt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e;default:if(typeof t.status=="string")t.then(Zt,Zt);else{if(e=Te,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e}throw sn=t,Qn}}function nn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(sn=a,Qn):a}}var sn=null;function jd(){if(sn===null)throw Error(i(459));var e=sn;return sn=null,e}function Cd(e){if(e===Qn||e===ci)throw Error(i(483))}var Kn=null,Ws=0;function fi(e){var t=Ws;return Ws+=1,Kn===null&&(Kn=[]),Sd(Kn,e,t)}function Fs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hi(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ad(e){function t(A,j){if(e){var E=A.deletions;E===null?(A.deletions=[j],A.flags|=16):E.push(j)}}function a(A,j){if(!e)return null;for(;j!==null;)t(A,j),j=j.sibling;return null}function s(A){for(var j=new Map;A!==null;)A.key!==null?j.set(A.key,A):j.set(A.index,A),A=A.sibling;return j}function l(A,j){return A=It(A,j),A.index=0,A.sibling=null,A}function c(A,j,E){return A.index=E,e?(E=A.alternate,E!==null?(E=E.index,E<j?(A.flags|=67108866,j):E):(A.flags|=67108866,j)):(A.flags|=1048576,j)}function m(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function p(A,j,E,M){return j===null||j.tag!==6?(j=Pl(E,A.mode,M),j.return=A,j):(j=l(j,E),j.return=A,j)}function w(A,j,E,M){var P=E.type;return P===R?k(A,j,E.props.children,M,E.key):j!==null&&(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ge&&nn(P)===j.type)?(j=l(j,E.props),Fs(j,E),j.return=A,j):(j=ri(E.type,E.key,E.props,null,A.mode,M),Fs(j,E),j.return=A,j)}function T(A,j,E,M){return j===null||j.tag!==4||j.stateNode.containerInfo!==E.containerInfo||j.stateNode.implementation!==E.implementation?(j=Il(E,A.mode,M),j.return=A,j):(j=l(j,E.children||[]),j.return=A,j)}function k(A,j,E,M,P){return j===null||j.tag!==7?(j=Wa(E,A.mode,M,P),j.return=A,j):(j=l(j,E),j.return=A,j)}function D(A,j,E){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Pl(""+j,A.mode,E),j.return=A,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return E=ri(j.type,j.key,j.props,null,A.mode,E),Fs(E,j),E.return=A,E;case C:return j=Il(j,A.mode,E),j.return=A,j;case ge:return j=nn(j),D(A,j,E)}if(Pe(j)||de(j))return j=Wa(j,A.mode,E,null),j.return=A,j;if(typeof j.then=="function")return D(A,fi(j),E);if(j.$$typeof===q)return D(A,ui(A,j),E);hi(A,j)}return null}function N(A,j,E,M){var P=j!==null?j.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return P!==null?null:p(A,j,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case S:return E.key===P?w(A,j,E,M):null;case C:return E.key===P?T(A,j,E,M):null;case ge:return E=nn(E),N(A,j,E,M)}if(Pe(E)||de(E))return P!==null?null:k(A,j,E,M,null);if(typeof E.then=="function")return N(A,j,fi(E),M);if(E.$$typeof===q)return N(A,j,ui(A,E),M);hi(A,E)}return null}function O(A,j,E,M,P){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return A=A.get(E)||null,p(j,A,""+M,P);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case S:return A=A.get(M.key===null?E:M.key)||null,w(j,A,M,P);case C:return A=A.get(M.key===null?E:M.key)||null,T(j,A,M,P);case ge:return M=nn(M),O(A,j,E,M,P)}if(Pe(M)||de(M))return A=A.get(E)||null,k(j,A,M,P,null);if(typeof M.then=="function")return O(A,j,E,fi(M),P);if(M.$$typeof===q)return O(A,j,E,ui(j,M),P);hi(j,M)}return null}function K(A,j,E,M){for(var P=null,fe=null,J=j,ne=j=0,ue=null;J!==null&&ne<E.length;ne++){J.index>ne?(ue=J,J=null):ue=J.sibling;var he=N(A,J,E[ne],M);if(he===null){J===null&&(J=ue);break}e&&J&&he.alternate===null&&t(A,J),j=c(he,j,ne),fe===null?P=he:fe.sibling=he,fe=he,J=ue}if(ne===E.length)return a(A,J),ce&&Wt(A,ne),P;if(J===null){for(;ne<E.length;ne++)J=D(A,E[ne],M),J!==null&&(j=c(J,j,ne),fe===null?P=J:fe.sibling=J,fe=J);return ce&&Wt(A,ne),P}for(J=s(J);ne<E.length;ne++)ue=O(J,A,ne,E[ne],M),ue!==null&&(e&&ue.alternate!==null&&J.delete(ue.key===null?ne:ue.key),j=c(ue,j,ne),fe===null?P=ue:fe.sibling=ue,fe=ue);return e&&J.forEach(function(qa){return t(A,qa)}),ce&&Wt(A,ne),P}function F(A,j,E,M){if(E==null)throw Error(i(151));for(var P=null,fe=null,J=j,ne=j=0,ue=null,he=E.next();J!==null&&!he.done;ne++,he=E.next()){J.index>ne?(ue=J,J=null):ue=J.sibling;var qa=N(A,J,he.value,M);if(qa===null){J===null&&(J=ue);break}e&&J&&qa.alternate===null&&t(A,J),j=c(qa,j,ne),fe===null?P=qa:fe.sibling=qa,fe=qa,J=ue}if(he.done)return a(A,J),ce&&Wt(A,ne),P;if(J===null){for(;!he.done;ne++,he=E.next())he=D(A,he.value,M),he!==null&&(j=c(he,j,ne),fe===null?P=he:fe.sibling=he,fe=he);return ce&&Wt(A,ne),P}for(J=s(J);!he.done;ne++,he=E.next())he=O(J,A,ne,he.value,M),he!==null&&(e&&he.alternate!==null&&J.delete(he.key===null?ne:he.key),j=c(he,j,ne),fe===null?P=he:fe.sibling=he,fe=he);return e&&J.forEach(function(Ky){return t(A,Ky)}),ce&&Wt(A,ne),P}function Ae(A,j,E,M){if(typeof E=="object"&&E!==null&&E.type===R&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case S:e:{for(var P=E.key;j!==null;){if(j.key===P){if(P=E.type,P===R){if(j.tag===7){a(A,j.sibling),M=l(j,E.props.children),M.return=A,A=M;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ge&&nn(P)===j.type){a(A,j.sibling),M=l(j,E.props),Fs(M,E),M.return=A,A=M;break e}a(A,j);break}else t(A,j);j=j.sibling}E.type===R?(M=Wa(E.props.children,A.mode,M,E.key),M.return=A,A=M):(M=ri(E.type,E.key,E.props,null,A.mode,M),Fs(M,E),M.return=A,A=M)}return m(A);case C:e:{for(P=E.key;j!==null;){if(j.key===P)if(j.tag===4&&j.stateNode.containerInfo===E.containerInfo&&j.stateNode.implementation===E.implementation){a(A,j.sibling),M=l(j,E.children||[]),M.return=A,A=M;break e}else{a(A,j);break}else t(A,j);j=j.sibling}M=Il(E,A.mode,M),M.return=A,A=M}return m(A);case ge:return E=nn(E),Ae(A,j,E,M)}if(Pe(E))return K(A,j,E,M);if(de(E)){if(P=de(E),typeof P!="function")throw Error(i(150));return E=P.call(E),F(A,j,E,M)}if(typeof E.then=="function")return Ae(A,j,fi(E),M);if(E.$$typeof===q)return Ae(A,j,ui(A,E),M);hi(A,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,j!==null&&j.tag===6?(a(A,j.sibling),M=l(j,E),M.return=A,A=M):(a(A,j),M=Pl(E,A.mode,M),M.return=A,A=M),m(A)):a(A,j)}return function(A,j,E,M){try{Ws=0;var P=Ae(A,j,E,M);return Kn=null,P}catch(J){if(J===Qn||J===ci)throw J;var fe=pt(29,J,null,A.mode);return fe.lanes=M,fe.return=A,fe}finally{}}}var rn=Ad(!0),Ed=Ad(!1),wa=!1;function ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(ye&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=si(e),cd(e,null,a),t}return ni(e,s,t,a),si(e)}function er(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,vc(e,a)}}function du(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var l=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?l=c=m:c=c.next=m,a=a.next}while(a!==null);c===null?l=c=t:c=c.next=t}else l=c=t;a={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var fu=!1;function tr(){if(fu){var e=Yn;if(e!==null)throw e}}function ar(e,t,a,s){fu=!1;var l=e.updateQueue;wa=!1;var c=l.firstBaseUpdate,m=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var w=p,T=w.next;w.next=null,m===null?c=T:m.next=T,m=w;var k=e.alternate;k!==null&&(k=k.updateQueue,p=k.lastBaseUpdate,p!==m&&(p===null?k.firstBaseUpdate=T:p.next=T,k.lastBaseUpdate=w))}if(c!==null){var D=l.baseState;m=0,k=T=w=null,p=c;do{var N=p.lane&-536870913,O=N!==p.lane;if(O?(le&N)===N:(s&N)===N){N!==0&&N===Vn&&(fu=!0),k!==null&&(k=k.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var K=e,F=p;N=t;var Ae=a;switch(F.tag){case 1:if(K=F.payload,typeof K=="function"){D=K.call(Ae,D,N);break e}D=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=F.payload,N=typeof K=="function"?K.call(Ae,D,N):K,N==null)break e;D=b({},D,N);break e;case 2:wa=!0}}N=p.callback,N!==null&&(e.flags|=64,O&&(e.flags|=8192),O=l.callbacks,O===null?l.callbacks=[N]:O.push(N))}else O={lane:N,tag:p.tag,payload:p.payload,callback:p.callback,next:null},k===null?(T=k=O,w=D):k=k.next=O,m|=N;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;O=p,p=O.next,O.next=null,l.lastBaseUpdate=O,l.shared.pending=null}}while(!0);k===null&&(w=D),l.baseState=w,l.firstBaseUpdate=T,l.lastBaseUpdate=k,c===null&&(l.shared.lanes=0),Na|=m,e.lanes=m,e.memoizedState=D}}function Td(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Nd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Td(a[e],t)}var Xn=Me(null),mi=Me(0);function Od(e,t){e=oa,I(mi,e),I(Xn,t),oa=e|t.baseLanes}function hu(){I(mi,oa),I(Xn,Xn.current)}function mu(){oa=mi.current,Se(Xn),Se(mi)}var vt=Me(null),Rt=null;function Ca(e){var t=e.alternate;I(De,De.current&1),I(vt,e),Rt===null&&(t===null||Xn.current!==null||t.memoizedState!==null)&&(Rt=e)}function gu(e){I(De,De.current),I(vt,e),Rt===null&&(Rt=e)}function Rd(e){e.tag===22?(I(De,De.current),I(vt,e),Rt===null&&(Rt=e)):Aa()}function Aa(){I(De,De.current),I(vt,vt.current)}function bt(e){Se(vt),Rt===e&&(Rt=null),Se(De)}var De=Me(0);function gi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wo(a)||So(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=0,ae=null,je=null,qe=null,yi=!1,Jn=!1,ln=!1,pi=0,nr=0,Zn=null,D0=0;function Ue(){throw Error(i(321))}function yu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yt(e[a],t[a]))return!1;return!0}function pu(e,t,a,s,l,c){return ta=c,ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?gf:ku,ln=!1,c=a(s,l),ln=!1,Jn&&(c=Ud(t,a,s,l)),kd(e),c}function kd(e){U.H=ir;var t=je!==null&&je.next!==null;if(ta=0,qe=je=ae=null,yi=!1,nr=0,Zn=null,t)throw Error(i(300));e===null||He||(e=e.dependencies,e!==null&&li(e)&&(He=!0))}function Ud(e,t,a,s){ae=e;var l=0;do{if(Jn&&(Zn=null),nr=0,Jn=!1,25<=l)throw Error(i(301));if(l+=1,qe=je=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}U.H=yf,c=t(a,s)}while(Jn);return c}function B0(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?sr(t):t,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(ae.flags|=1024),t}function vu(){var e=pi!==0;return pi=0,e}function bu(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function xu(e){if(yi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yi=!1}ta=0,qe=je=ae=null,Jn=!1,nr=pi=0,Zn=null}function rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?ae.memoizedState=qe=e:qe=qe.next=e,qe}function Be(){if(je===null){var e=ae.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=qe===null?ae.memoizedState:qe.next;if(t!==null)qe=t,je=e;else{if(e===null)throw ae.alternate===null?Error(i(467)):Error(i(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},qe===null?ae.memoizedState=qe=e:qe=qe.next=e}return qe}function vi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sr(e){var t=nr;return nr+=1,Zn===null&&(Zn=[]),e=Sd(Zn,e,t),t=ae,(qe===null?t.memoizedState:qe.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?gf:ku),e}function bi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return sr(e);if(e.$$typeof===q)return et(e)}throw Error(i(438,String(e)))}function _u(e){var t=null,a=ae.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=vi(),ae.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=nt;return t.index++,a}function aa(e,t){return typeof t=="function"?t(e):t}function xi(e){var t=Be();return wu(t,je,e)}function wu(e,t,a){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=a;var l=e.baseQueue,c=s.pending;if(c!==null){if(l!==null){var m=l.next;l.next=c.next,c.next=m}t.baseQueue=l=c,s.pending=null}if(c=e.baseState,l===null)e.memoizedState=c;else{t=l.next;var p=m=null,w=null,T=t,k=!1;do{var D=T.lane&-536870913;if(D!==T.lane?(le&D)===D:(ta&D)===D){var N=T.revertLane;if(N===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),D===Vn&&(k=!0);else if((ta&N)===N){T=T.next,N===Vn&&(k=!0);continue}else D={lane:0,revertLane:T.revertLane,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},w===null?(p=w=D,m=c):w=w.next=D,ae.lanes|=N,Na|=N;D=T.action,ln&&a(c,D),c=T.hasEagerState?T.eagerState:a(c,D)}else N={lane:D,revertLane:T.revertLane,gesture:T.gesture,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},w===null?(p=w=N,m=c):w=w.next=N,ae.lanes|=D,Na|=D;T=T.next}while(T!==null&&T!==t);if(w===null?m=c:w.next=p,!yt(c,e.memoizedState)&&(He=!0,k&&(a=Yn,a!==null)))throw a;e.memoizedState=c,e.baseState=m,e.baseQueue=w,s.lastRenderedState=c}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Su(e){var t=Be(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,l=a.pending,c=t.memoizedState;if(l!==null){a.pending=null;var m=l=l.next;do c=e(c,m.action),m=m.next;while(m!==l);yt(c,t.memoizedState)||(He=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,s]}function zd(e,t,a){var s=ae,l=Be(),c=ce;if(c){if(a===void 0)throw Error(i(407));a=a()}else a=t();var m=!yt((je||l).memoizedState,a);if(m&&(l.memoizedState=a,He=!0),l=l.queue,Au(Bd.bind(null,s,l,e),[e]),l.getSnapshot!==t||m||qe!==null&&qe.memoizedState.tag&1){if(s.flags|=2048,Pn(9,{destroy:void 0},Dd.bind(null,s,l,a,t),null),Te===null)throw Error(i(349));c||(ta&127)!==0||Md(s,t,a)}return a}function Md(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ae.updateQueue,t===null?(t=vi(),ae.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Dd(e,t,a,s){t.value=a,t.getSnapshot=s,Ld(t)&&qd(e)}function Bd(e,t,a){return a(function(){Ld(t)&&qd(e)})}function Ld(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yt(e,a)}catch{return!0}}function qd(e){var t=Ia(e,2);t!==null&&ft(t,e,2)}function ju(e){var t=rt();if(typeof e=="function"){var a=e;if(e=a(),ln){ga(!0);try{a()}finally{ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:e},t}function Hd(e,t,a,s){return e.baseState=a,wu(e,je,typeof s=="function"?s:aa)}function L0(e,t,a,s,l){if(Si(e))throw Error(i(485));if(e=t.action,e!==null){var c={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};U.T!==null?a(!0):c.isTransition=!1,s(c),a=t.pending,a===null?(c.next=t.pending=c,$d(t,c)):(c.next=a.next,t.pending=a.next=c)}}function $d(e,t){var a=t.action,s=t.payload,l=e.state;if(t.isTransition){var c=U.T,m={};U.T=m;try{var p=a(l,s),w=U.S;w!==null&&w(m,p),Gd(e,t,p)}catch(T){Cu(e,t,T)}finally{c!==null&&m.types!==null&&(c.types=m.types),U.T=c}}else try{c=a(l,s),Gd(e,t,c)}catch(T){Cu(e,t,T)}}function Gd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Vd(e,t,s)},function(s){return Cu(e,t,s)}):Vd(e,t,a)}function Vd(e,t,a){t.status="fulfilled",t.value=a,Yd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,$d(e,a)))}function Cu(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Yd(t),t=t.next;while(t!==s)}e.action=null}function Yd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qd(e,t){return t}function Kd(e,t){if(ce){var a=Te.formState;if(a!==null){e:{var s=ae;if(ce){if(Oe){t:{for(var l=Oe,c=Ot;l.nodeType!==8;){if(!c){l=null;break t}if(l=kt(l.nextSibling),l===null){l=null;break t}}c=l.data,l=c==="F!"||c==="F"?l:null}if(l){Oe=kt(l.nextSibling),s=l.data==="F!";break e}}xa(s)}s=!1}s&&(t=a[0])}}return a=rt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:t},a.queue=s,a=ff.bind(null,ae,s),s.dispatch=a,s=ju(!1),c=Ru.bind(null,ae,!1,s.queue),s=rt(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,a=L0.bind(null,ae,l,c,a),l.dispatch=a,s.memoizedState=e,[t,a,!1]}function Xd(e){var t=Be();return Jd(t,je,e)}function Jd(e,t,a){if(t=wu(e,t,Qd)[0],e=xi(aa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=sr(t)}catch(m){throw m===Qn?ci:m}else s=t;t=Be();var l=t.queue,c=l.dispatch;return a!==t.memoizedState&&(ae.flags|=2048,Pn(9,{destroy:void 0},q0.bind(null,l,a),null)),[s,c,e]}function q0(e,t){e.action=t}function Zd(e){var t=Be(),a=je;if(a!==null)return Jd(t,a,e);Be(),t=t.memoizedState,a=Be();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Pn(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ae.updateQueue,t===null&&(t=vi(),ae.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Pd(){return Be().memoizedState}function _i(e,t,a,s){var l=rt();ae.flags|=e,l.memoizedState=Pn(1|t,{destroy:void 0},a,s===void 0?null:s)}function wi(e,t,a,s){var l=Be();s=s===void 0?null:s;var c=l.memoizedState.inst;je!==null&&s!==null&&yu(s,je.memoizedState.deps)?l.memoizedState=Pn(t,c,a,s):(ae.flags|=e,l.memoizedState=Pn(1|t,c,a,s))}function Id(e,t){_i(8390656,8,e,t)}function Au(e,t){wi(2048,8,e,t)}function H0(e){ae.flags|=4;var t=ae.updateQueue;if(t===null)t=vi(),ae.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Wd(e){var t=Be().memoizedState;return H0({ref:t,nextImpl:e}),function(){if((ye&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Fd(e,t){return wi(4,2,e,t)}function ef(e,t){return wi(4,4,e,t)}function tf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function af(e,t,a){a=a!=null?a.concat([e]):null,wi(4,4,tf.bind(null,t,e),a)}function Eu(){}function nf(e,t){var a=Be();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&yu(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function sf(e,t){var a=Be();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&yu(t,s[1]))return s[0];if(s=e(),ln){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[s,t],s}function Tu(e,t,a){return a===void 0||(ta&1073741824)!==0&&(le&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=ih(),ae.lanes|=e,Na|=e,a)}function rf(e,t,a,s){return yt(a,t)?a:Xn.current!==null?(e=Tu(e,a,s),yt(e,t)||(He=!0),e):(ta&42)===0||(ta&1073741824)!==0&&(le&261930)===0?(He=!0,e.memoizedState=a):(e=ih(),ae.lanes|=e,Na|=e,t)}function lf(e,t,a,s,l){var c=L.p;L.p=c!==0&&8>c?c:8;var m=U.T,p={};U.T=p,Ru(e,!1,t,a);try{var w=l(),T=U.S;if(T!==null&&T(p,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var k=M0(w,s);rr(e,t,k,wt(e))}else rr(e,t,s,wt(e))}catch(D){rr(e,t,{then:function(){},status:"rejected",reason:D},wt())}finally{L.p=c,m!==null&&p.types!==null&&(m.types=p.types),U.T=m}}function $0(){}function Nu(e,t,a,s){if(e.tag!==5)throw Error(i(476));var l=uf(e).queue;lf(e,l,t,Q,a===null?$0:function(){return of(e),a(s)})}function uf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:Q},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function of(e){var t=uf(e);t.next===null&&(t=e.alternate.memoizedState),rr(e,t.next.queue,{},wt())}function Ou(){return et(wr)}function cf(){return Be().memoizedState}function df(){return Be().memoizedState}function G0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=wt();e=Sa(a);var s=ja(t,e,a);s!==null&&(ft(s,t,a),er(s,t,a)),t={cache:ru()},e.payload=t;return}t=t.return}}function V0(e,t,a){var s=wt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Si(e)?hf(t,a):(a=Jl(e,t,a,s),a!==null&&(ft(a,e,s),mf(a,t,s)))}function ff(e,t,a){var s=wt();rr(e,t,a,s)}function rr(e,t,a,s){var l={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Si(e))hf(t,l);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var m=t.lastRenderedState,p=c(m,a);if(l.hasEagerState=!0,l.eagerState=p,yt(p,m))return ni(e,t,l,0),Te===null&&ai(),!1}catch{}finally{}if(a=Jl(e,t,l,s),a!==null)return ft(a,e,s),mf(a,t,s),!0}return!1}function Ru(e,t,a,s){if(s={lane:2,revertLane:oo(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Si(e)){if(t)throw Error(i(479))}else t=Jl(e,a,s,2),t!==null&&ft(t,e,2)}function Si(e){var t=e.alternate;return e===ae||t!==null&&t===ae}function hf(e,t){Jn=yi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function mf(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,vc(e,a)}}var ir={readContext:et,use:bi,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};ir.useEffectEvent=Ue;var gf={readContext:et,use:bi,useCallback:function(e,t){return rt().memoizedState=[e,t===void 0?null:t],e},useContext:et,useEffect:Id,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,_i(4194308,4,tf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return _i(4194308,4,e,t)},useInsertionEffect:function(e,t){_i(4,2,e,t)},useMemo:function(e,t){var a=rt();t=t===void 0?null:t;var s=e();if(ln){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=rt();if(a!==void 0){var l=a(t);if(ln){ga(!0);try{a(t)}finally{ga(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=V0.bind(null,ae,e),[s.memoizedState,e]},useRef:function(e){var t=rt();return e={current:e},t.memoizedState=e},useState:function(e){e=ju(e);var t=e.queue,a=ff.bind(null,ae,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Eu,useDeferredValue:function(e,t){var a=rt();return Tu(a,e,t)},useTransition:function(){var e=ju(!1);return e=lf.bind(null,ae,e.queue,!0,!1),rt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ae,l=rt();if(ce){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Te===null)throw Error(i(349));(le&127)!==0||Md(s,t,a)}l.memoizedState=a;var c={value:a,getSnapshot:t};return l.queue=c,Id(Bd.bind(null,s,c,e),[e]),s.flags|=2048,Pn(9,{destroy:void 0},Dd.bind(null,s,c,a,t),null),a},useId:function(){var e=rt(),t=Te.identifierPrefix;if(ce){var a=Vt,s=Gt;a=(s&~(1<<32-gt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=pi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=D0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ou,useFormState:Kd,useActionState:Kd,useOptimistic:function(e){var t=rt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ru.bind(null,ae,!0,a),a.dispatch=t,[e,t]},useMemoCache:_u,useCacheRefresh:function(){return rt().memoizedState=G0.bind(null,ae)},useEffectEvent:function(e){var t=rt(),a={impl:e};return t.memoizedState=a,function(){if((ye&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},ku={readContext:et,use:bi,useCallback:nf,useContext:et,useEffect:Au,useImperativeHandle:af,useInsertionEffect:Fd,useLayoutEffect:ef,useMemo:sf,useReducer:xi,useRef:Pd,useState:function(){return xi(aa)},useDebugValue:Eu,useDeferredValue:function(e,t){var a=Be();return rf(a,je.memoizedState,e,t)},useTransition:function(){var e=xi(aa)[0],t=Be().memoizedState;return[typeof e=="boolean"?e:sr(e),t]},useSyncExternalStore:zd,useId:cf,useHostTransitionStatus:Ou,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,t){var a=Be();return Hd(a,je,e,t)},useMemoCache:_u,useCacheRefresh:df};ku.useEffectEvent=Wd;var yf={readContext:et,use:bi,useCallback:nf,useContext:et,useEffect:Au,useImperativeHandle:af,useInsertionEffect:Fd,useLayoutEffect:ef,useMemo:sf,useReducer:Su,useRef:Pd,useState:function(){return Su(aa)},useDebugValue:Eu,useDeferredValue:function(e,t){var a=Be();return je===null?Tu(a,e,t):rf(a,je.memoizedState,e,t)},useTransition:function(){var e=Su(aa)[0],t=Be().memoizedState;return[typeof e=="boolean"?e:sr(e),t]},useSyncExternalStore:zd,useId:cf,useHostTransitionStatus:Ou,useFormState:Zd,useActionState:Zd,useOptimistic:function(e,t){var a=Be();return je!==null?Hd(a,je,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:_u,useCacheRefresh:df};yf.useEffectEvent=Wd;function Uu(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var zu={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=wt(),l=Sa(s);l.payload=t,a!=null&&(l.callback=a),t=ja(e,l,s),t!==null&&(ft(t,e,s),er(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=wt(),l=Sa(s);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=ja(e,l,s),t!==null&&(ft(t,e,s),er(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wt(),s=Sa(a);s.tag=2,t!=null&&(s.callback=t),t=ja(e,s,a),t!==null&&(ft(t,e,a),er(t,e,a))}};function pf(e,t,a,s,l,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,m):t.prototype&&t.prototype.isPureReactComponent?!Ks(a,s)||!Ks(l,c):!0}function vf(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&zu.enqueueReplaceState(t,t.state,null)}function un(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function bf(e){ti(e)}function xf(e){console.error(e)}function _f(e){ti(e)}function ji(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function wf(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Mu(e,t,a){return a=Sa(a),a.tag=3,a.payload={element:null},a.callback=function(){ji(e,t)},a}function Sf(e){return e=Sa(e),e.tag=3,e}function jf(e,t,a,s){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var c=s.value;e.payload=function(){return l(c)},e.callback=function(){wf(t,a,s)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){wf(t,a,s),typeof l!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var p=s.stack;this.componentDidCatch(s.value,{componentStack:p!==null?p:""})})}function Y0(e,t,a,s,l){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Gn(t,a,l,!0),a=vt.current,a!==null){switch(a.tag){case 31:case 13:return Rt===null?Di():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=l,s===di?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),io(e,s,l)),!1;case 22:return a.flags|=65536,s===di?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),io(e,s,l)),!1}throw Error(i(435,a.tag))}return io(e,s,l),Di(),!1}if(ce)return t=vt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==eu&&(e=Error(i(422),{cause:s}),Zs(Et(e,a)))):(s!==eu&&(t=Error(i(423),{cause:s}),Zs(Et(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=Et(s,a),l=Mu(e.stateNode,s,l),du(e,l),ze!==4&&(ze=2)),!1;var c=Error(i(520),{cause:s});if(c=Et(c,a),mr===null?mr=[c]:mr.push(c),ze!==4&&(ze=2),t===null)return!0;s=Et(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Mu(a.stateNode,s,e),du(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Oa===null||!Oa.has(c))))return a.flags|=65536,l&=-l,a.lanes|=l,l=Sf(l),jf(l,e,a,s),du(a,l),!1}a=a.return}while(a!==null);return!1}var Du=Error(i(461)),He=!1;function tt(e,t,a,s){t.child=e===null?Ed(t,null,a,s):rn(t,e.child,a,s)}function Cf(e,t,a,s,l){a=a.render;var c=t.ref;if("ref"in s){var m={};for(var p in s)p!=="ref"&&(m[p]=s[p])}else m=s;return tn(t),s=pu(e,t,a,m,c,l),p=vu(),e!==null&&!He?(bu(e,t,l),na(e,t,l)):(ce&&p&&Wl(t),t.flags|=1,tt(e,t,s,l),t.child)}function Af(e,t,a,s,l){if(e===null){var c=a.type;return typeof c=="function"&&!Zl(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,Ef(e,t,c,s,l)):(e=ri(a.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Yu(e,l)){var m=c.memoizedProps;if(a=a.compare,a=a!==null?a:Ks,a(m,s)&&e.ref===t.ref)return na(e,t,l)}return t.flags|=1,e=It(c,s),e.ref=t.ref,e.return=t,t.child=e}function Ef(e,t,a,s,l){if(e!==null){var c=e.memoizedProps;if(Ks(c,s)&&e.ref===t.ref)if(He=!1,t.pendingProps=s=c,Yu(e,l))(e.flags&131072)!==0&&(He=!0);else return t.lanes=e.lanes,na(e,t,l)}return Bu(e,t,a,s,l)}function Tf(e,t,a,s){var l=s.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~c}else s=0,t.child=null;return Nf(e,t,c,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&oi(t,c!==null?c.cachePool:null),c!==null?Od(t,c):hu(),Rd(t);else return s=t.lanes=536870912,Nf(e,t,c!==null?c.baseLanes|a:a,a,s)}else c!==null?(oi(t,c.cachePool),Od(t,c),Aa(),t.memoizedState=null):(e!==null&&oi(t,null),hu(),Aa());return tt(e,t,l,a),t.child}function lr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Nf(e,t,a,s,l){var c=lu();return c=c===null?null:{parent:Le._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&oi(t,null),hu(),Rd(t),e!==null&&Gn(e,t,s,!0),t.childLanes=l,null}function Ci(e,t){return t=Ei({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Of(e,t,a){return rn(t,e.child,null,a),e=Ci(t,t.pendingProps),e.flags|=2,bt(t),t.memoizedState=null,e}function Q0(e,t,a){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ce){if(s.mode==="hidden")return e=Ci(t,s),t.lanes=536870912,lr(null,e);if(gu(t),(e=Oe)?(e=Gh(e,Ot),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Gt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=fd(e),a.return=t,t.child=a,Fe=t,Oe=null)):e=null,e===null)throw xa(t);return t.lanes=536870912,null}return Ci(t,s)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(gu(t),l)if(t.flags&256)t.flags&=-257,t=Of(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(He||Gn(e,t,a,!1),l=(a&e.childLanes)!==0,He||l){if(s=Te,s!==null&&(m=bc(s,a),m!==0&&m!==c.retryLane))throw c.retryLane=m,Ia(e,m),ft(s,e,m),Du;Di(),t=Of(e,t,a)}else e=c.treeContext,Oe=kt(m.nextSibling),Fe=t,ce=!0,ba=null,Ot=!1,e!==null&&gd(t,e),t=Ci(t,s),t.flags|=4096;return t}return e=It(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ai(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Bu(e,t,a,s,l){return tn(t),a=pu(e,t,a,s,void 0,l),s=vu(),e!==null&&!He?(bu(e,t,l),na(e,t,l)):(ce&&s&&Wl(t),t.flags|=1,tt(e,t,a,l),t.child)}function Rf(e,t,a,s,l,c){return tn(t),t.updateQueue=null,a=Ud(t,s,a,l),kd(e),s=vu(),e!==null&&!He?(bu(e,t,c),na(e,t,c)):(ce&&s&&Wl(t),t.flags|=1,tt(e,t,a,c),t.child)}function kf(e,t,a,s,l){if(tn(t),t.stateNode===null){var c=Ln,m=a.contextType;typeof m=="object"&&m!==null&&(c=et(m)),c=new a(s,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=zu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=s,c.state=t.memoizedState,c.refs={},ou(t),m=a.contextType,c.context=typeof m=="object"&&m!==null?et(m):Ln,c.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Uu(t,a,m,s),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&zu.enqueueReplaceState(c,c.state,null),ar(t,s,c,l),tr(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){c=t.stateNode;var p=t.memoizedProps,w=un(a,p);c.props=w;var T=c.context,k=a.contextType;m=Ln,typeof k=="object"&&k!==null&&(m=et(k));var D=a.getDerivedStateFromProps;k=typeof D=="function"||typeof c.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,k||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p||T!==m)&&vf(t,c,s,m),wa=!1;var N=t.memoizedState;c.state=N,ar(t,s,c,l),tr(),T=t.memoizedState,p||N!==T||wa?(typeof D=="function"&&(Uu(t,a,D,s),T=t.memoizedState),(w=wa||pf(t,a,w,s,N,T,m))?(k||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=T),c.props=s,c.state=T,c.context=m,s=w):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,cu(e,t),m=t.memoizedProps,k=un(a,m),c.props=k,D=t.pendingProps,N=c.context,T=a.contextType,w=Ln,typeof T=="object"&&T!==null&&(w=et(T)),p=a.getDerivedStateFromProps,(T=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==D||N!==w)&&vf(t,c,s,w),wa=!1,N=t.memoizedState,c.state=N,ar(t,s,c,l),tr();var O=t.memoizedState;m!==D||N!==O||wa||e!==null&&e.dependencies!==null&&li(e.dependencies)?(typeof p=="function"&&(Uu(t,a,p,s),O=t.memoizedState),(k=wa||pf(t,a,k,s,N,O,w)||e!==null&&e.dependencies!==null&&li(e.dependencies))?(T||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,O,w),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,O,w)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=O),c.props=s,c.state=O,c.context=w,s=k):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),s=!1)}return c=s,Ai(e,t),s=(t.flags&128)!==0,c||s?(c=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&s?(t.child=rn(t,e.child,null,l),t.child=rn(t,null,a,l)):tt(e,t,a,l),t.memoizedState=c.state,e=t.child):e=na(e,t,l),e}function Uf(e,t,a,s){return Fa(),t.flags|=256,tt(e,t,a,s),t.child}var Lu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qu(e){return{baseLanes:e,cachePool:_d()}}function Hu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=_t),e}function zf(e,t,a){var s=t.pendingProps,l=!1,c=(t.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),m&&(l=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(ce){if(l?Ca(t):Aa(),(e=Oe)?(e=Gh(e,Ot),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Gt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=fd(e),a.return=t,t.child=a,Fe=t,Oe=null)):e=null,e===null)throw xa(t);return So(e)?t.lanes=32:t.lanes=536870912,null}var p=s.children;return s=s.fallback,l?(Aa(),l=t.mode,p=Ei({mode:"hidden",children:p},l),s=Wa(s,l,a,null),p.return=t,s.return=t,p.sibling=s,t.child=p,s=t.child,s.memoizedState=qu(a),s.childLanes=Hu(e,m,a),t.memoizedState=Lu,lr(null,s)):(Ca(t),$u(t,p))}var w=e.memoizedState;if(w!==null&&(p=w.dehydrated,p!==null)){if(c)t.flags&256?(Ca(t),t.flags&=-257,t=Gu(e,t,a)):t.memoizedState!==null?(Aa(),t.child=e.child,t.flags|=128,t=null):(Aa(),p=s.fallback,l=t.mode,s=Ei({mode:"visible",children:s.children},l),p=Wa(p,l,a,null),p.flags|=2,s.return=t,p.return=t,s.sibling=p,t.child=s,rn(t,e.child,null,a),s=t.child,s.memoizedState=qu(a),s.childLanes=Hu(e,m,a),t.memoizedState=Lu,t=lr(null,s));else if(Ca(t),So(p)){if(m=p.nextSibling&&p.nextSibling.dataset,m)var T=m.dgst;m=T,s=Error(i(419)),s.stack="",s.digest=m,Zs({value:s,source:null,stack:null}),t=Gu(e,t,a)}else if(He||Gn(e,t,a,!1),m=(a&e.childLanes)!==0,He||m){if(m=Te,m!==null&&(s=bc(m,a),s!==0&&s!==w.retryLane))throw w.retryLane=s,Ia(e,s),ft(m,e,s),Du;wo(p)||Di(),t=Gu(e,t,a)}else wo(p)?(t.flags|=192,t.child=e.child,t=null):(e=w.treeContext,Oe=kt(p.nextSibling),Fe=t,ce=!0,ba=null,Ot=!1,e!==null&&gd(t,e),t=$u(t,s.children),t.flags|=4096);return t}return l?(Aa(),p=s.fallback,l=t.mode,w=e.child,T=w.sibling,s=It(w,{mode:"hidden",children:s.children}),s.subtreeFlags=w.subtreeFlags&65011712,T!==null?p=It(T,p):(p=Wa(p,l,a,null),p.flags|=2),p.return=t,s.return=t,s.sibling=p,t.child=s,lr(null,s),s=t.child,p=e.child.memoizedState,p===null?p=qu(a):(l=p.cachePool,l!==null?(w=Le._currentValue,l=l.parent!==w?{parent:w,pool:w}:l):l=_d(),p={baseLanes:p.baseLanes|a,cachePool:l}),s.memoizedState=p,s.childLanes=Hu(e,m,a),t.memoizedState=Lu,lr(e.child,s)):(Ca(t),a=e.child,e=a.sibling,a=It(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function $u(e,t){return t=Ei({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ei(e,t){return e=pt(22,e,null,t),e.lanes=0,e}function Gu(e,t,a){return rn(t,e.child,null,a),e=$u(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mf(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),nu(e.return,t,a)}function Vu(e,t,a,s,l,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:l,treeForkCount:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=a,m.tailMode=l,m.treeForkCount=c)}function Df(e,t,a){var s=t.pendingProps,l=s.revealOrder,c=s.tail;s=s.children;var m=De.current,p=(m&2)!==0;if(p?(m=m&1|2,t.flags|=128):m&=1,I(De,m),tt(e,t,s,a),s=ce?Js:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mf(e,a,t);else if(e.tag===19)Mf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&gi(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Vu(t,!1,l,a,c,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&gi(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Vu(t,!0,a,null,c,s);break;case"together":Vu(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function na(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Na|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Gn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=It(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=It(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&li(e)))}function K0(e,t,a){switch(t.tag){case 3:ha(t,t.stateNode.containerInfo),_a(t,Le,e.memoizedState.cache),Fa();break;case 27:case 5:Sn(t);break;case 4:ha(t,t.stateNode.containerInfo);break;case 10:_a(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gu(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?zf(e,t,a):(Ca(t),e=na(e,t,a),e!==null?e.sibling:null);Ca(t);break;case 19:var l=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Gn(e,t,a,!1),s=(a&t.childLanes)!==0),l){if(s)return Df(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),I(De,De.current),s)break;return null;case 22:return t.lanes=0,Tf(e,t,a,t.pendingProps);case 24:_a(t,Le,e.memoizedState.cache)}return na(e,t,a)}function Bf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)He=!0;else{if(!Yu(e,a)&&(t.flags&128)===0)return He=!1,K0(e,t,a);He=(e.flags&131072)!==0}else He=!1,ce&&(t.flags&1048576)!==0&&md(t,Js,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=nn(t.elementType),t.type=e,typeof e=="function")Zl(e)?(s=un(e,s),t.tag=1,t=kf(null,t,e,s,a)):(t.tag=0,t=Bu(null,t,e,s,a));else{if(e!=null){var l=e.$$typeof;if(l===Y){t.tag=11,t=Cf(null,t,e,s,a);break e}else if(l===ee){t.tag=14,t=Af(null,t,e,s,a);break e}}throw t=Ze(e)||e,Error(i(306,t,""))}}return t;case 0:return Bu(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,l=un(s,t.pendingProps),kf(e,t,s,l,a);case 3:e:{if(ha(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var c=t.memoizedState;l=c.element,cu(e,t),ar(t,s,null,a);var m=t.memoizedState;if(s=m.cache,_a(t,Le,s),s!==c.cache&&su(t,[Le],a,!0),tr(),s=m.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Uf(e,t,s,a);break e}else if(s!==l){l=Et(Error(i(424)),t),Zs(l),t=Uf(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Oe=kt(e.firstChild),Fe=t,ce=!0,ba=null,Ot=!0,a=Ed(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fa(),s===l){t=na(e,t,a);break e}tt(e,t,s,a)}t=t.child}return t;case 26:return Ai(e,t),e===null?(a=Jh(t.type,null,t.pendingProps,null))?t.memoizedState=a:ce||(a=t.type,e=t.pendingProps,s=Vi(Mt.current).createElement(a),s[We]=t,s[it]=e,at(s,a,e),Ke(s),t.stateNode=s):t.memoizedState=Jh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Sn(t),e===null&&ce&&(s=t.stateNode=Qh(t.type,t.pendingProps,Mt.current),Fe=t,Ot=!0,l=Oe,za(t.type)?(jo=l,Oe=kt(s.firstChild)):Oe=l),tt(e,t,t.pendingProps.children,a),Ai(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ce&&((l=s=Oe)&&(s=wy(s,t.type,t.pendingProps,Ot),s!==null?(t.stateNode=s,Fe=t,Oe=kt(s.firstChild),Ot=!1,l=!0):l=!1),l||xa(t)),Sn(t),l=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,s=c.children,bo(l,c)?s=null:m!==null&&bo(l,m)&&(t.flags|=32),t.memoizedState!==null&&(l=pu(e,t,B0,null,null,a),wr._currentValue=l),Ai(e,t),tt(e,t,s,a),t.child;case 6:return e===null&&ce&&((e=a=Oe)&&(a=Sy(a,t.pendingProps,Ot),a!==null?(t.stateNode=a,Fe=t,Oe=null,e=!0):e=!1),e||xa(t)),null;case 13:return zf(e,t,a);case 4:return ha(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=rn(t,null,s,a):tt(e,t,s,a),t.child;case 11:return Cf(e,t,t.type,t.pendingProps,a);case 7:return tt(e,t,t.pendingProps,a),t.child;case 8:return tt(e,t,t.pendingProps.children,a),t.child;case 12:return tt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,_a(t,t.type,s.value),tt(e,t,s.children,a),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,tn(t),l=et(l),s=s(l),t.flags|=1,tt(e,t,s,a),t.child;case 14:return Af(e,t,t.type,t.pendingProps,a);case 15:return Ef(e,t,t.type,t.pendingProps,a);case 19:return Df(e,t,a);case 31:return Q0(e,t,a);case 22:return Tf(e,t,a,t.pendingProps);case 24:return tn(t),s=et(Le),e===null?(l=lu(),l===null&&(l=Te,c=ru(),l.pooledCache=c,c.refCount++,c!==null&&(l.pooledCacheLanes|=a),l=c),t.memoizedState={parent:s,cache:l},ou(t),_a(t,Le,l)):((e.lanes&a)!==0&&(cu(e,t),ar(t,null,null,a),tr()),l=e.memoizedState,c=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),_a(t,Le,s)):(s=c.cache,_a(t,Le,s),s!==l.cache&&su(t,[Le],a,!0))),tt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function sa(e){e.flags|=4}function Qu(e,t,a,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(ch())e.flags|=8192;else throw sn=di,uu}else e.flags&=-16777217}function Lf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fh(t))if(ch())e.flags|=8192;else throw sn=di,uu}function Ti(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?yc():536870912,e.lanes|=t,es|=t)}function ur(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function X0(e,t,a){var s=t.pendingProps;switch(Fl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Re(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ea(Le),ma(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($n(t)?sa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,tu())),Re(t),null;case 26:var l=t.type,c=t.memoizedState;return e===null?(sa(t),c!==null?(Re(t),Lf(t,c)):(Re(t),Qu(t,l,null,s,a))):c?c!==e.memoizedState?(sa(t),Re(t),Lf(t,c)):(Re(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&sa(t),Re(t),Qu(t,l,e,s,a)),null;case 27:if(jn(t),a=Mt.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&sa(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Re(t),null}e=be.current,$n(t)?yd(t):(e=Qh(l,s,a),t.stateNode=e,sa(t))}return Re(t),null;case 5:if(jn(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&sa(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Re(t),null}if(c=be.current,$n(t))yd(t);else{var m=Vi(Mt.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?c.multiple=!0:s.size&&(c.size=s.size);break;default:c=typeof s.is=="string"?m.createElement(l,{is:s.is}):m.createElement(l)}}c[We]=t,c[it]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=c;e:switch(at(c,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&sa(t)}}return Re(t),Qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&sa(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=Mt.current,$n(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,l=Fe,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[We]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||zh(e.nodeValue,a)),e||xa(t,!0)}else e=Vi(e).createTextNode(s),e[We]=t,t.stateNode=e}return Re(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=$n(t),a!==null){if(e===null){if(!s)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[We]=t}else Fa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Re(t),e=!1}else a=tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(bt(t),t):(bt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Re(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=$n(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[We]=t}else Fa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Re(t),l=!1}else l=tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(bt(t),t):(bt(t),null)}return bt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Ti(t,t.updateQueue),Re(t),null);case 4:return ma(),e===null&&mo(t.stateNode.containerInfo),Re(t),null;case 10:return ea(t.type),Re(t),null;case 19:if(Se(De),s=t.memoizedState,s===null)return Re(t),null;if(l=(t.flags&128)!==0,c=s.rendering,c===null)if(l)ur(s,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=gi(e),c!==null){for(t.flags|=128,ur(s,!1),e=c.updateQueue,t.updateQueue=e,Ti(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)dd(a,e),a=a.sibling;return I(De,De.current&1|2),ce&&Wt(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&X()>Ui&&(t.flags|=128,l=!0,ur(s,!1),t.lanes=4194304)}else{if(!l)if(e=gi(c),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Ti(t,e),ur(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!ce)return Re(t),null}else 2*X()-s.renderingStartTime>Ui&&a!==536870912&&(t.flags|=128,l=!0,ur(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=X(),e.sibling=null,a=De.current,I(De,l?a&1|2:a&1),ce&&Wt(t,s.treeForkCount),e):(Re(t),null);case 22:case 23:return bt(t),mu(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),a=t.updateQueue,a!==null&&Ti(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Se(an),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ea(Le),Re(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function J0(e,t){switch(Fl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ea(Le),ma(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return jn(t),null;case 31:if(t.memoizedState!==null){if(bt(t),t.alternate===null)throw Error(i(340));Fa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(bt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Fa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(De),null;case 4:return ma(),null;case 10:return ea(t.type),null;case 22:case 23:return bt(t),mu(),e!==null&&Se(an),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ea(Le),null;case 25:return null;default:return null}}function qf(e,t){switch(Fl(t),t.tag){case 3:ea(Le),ma();break;case 26:case 27:case 5:jn(t);break;case 4:ma();break;case 31:t.memoizedState!==null&&bt(t);break;case 13:bt(t);break;case 19:Se(De);break;case 10:ea(t.type);break;case 22:case 23:bt(t),mu(),e!==null&&Se(an);break;case 24:ea(Le)}}function or(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var l=s.next;a=l;do{if((a.tag&e)===e){s=void 0;var c=a.create,m=a.inst;s=c(),m.destroy=s}a=a.next}while(a!==l)}}catch(p){_e(t,t.return,p)}}function Ea(e,t,a){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&e)===e){var m=s.inst,p=m.destroy;if(p!==void 0){m.destroy=void 0,l=t;var w=a,T=p;try{T()}catch(k){_e(l,w,k)}}}s=s.next}while(s!==c)}}catch(k){_e(t,t.return,k)}}function Hf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Nd(t,a)}catch(s){_e(e,e.return,s)}}}function $f(e,t,a){a.props=un(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){_e(e,t,s)}}function cr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(l){_e(e,t,l)}}function Yt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(l){_e(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){_e(e,t,l)}else a.current=null}function Gf(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(l){_e(e,e.return,l)}}function Ku(e,t,a){try{var s=e.stateNode;yy(s,e.type,a,t),s[it]=t}catch(l){_e(e,e.return,l)}}function Vf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function Xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ju(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Zt));else if(s!==4&&(s===27&&za(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Ju(e,t,a),e=e.sibling;e!==null;)Ju(e,t,a),e=e.sibling}function Ni(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&za(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ni(e,t,a),e=e.sibling;e!==null;)Ni(e,t,a),e=e.sibling}function Yf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);at(t,s,a),t[We]=e,t[it]=a}catch(c){_e(e,e.return,c)}}var ra=!1,$e=!1,Zu=!1,Qf=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Z0(e,t){if(e=e.containerInfo,po=Pi,e=ad(e),Gl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var l=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var m=0,p=-1,w=-1,T=0,k=0,D=e,N=null;t:for(;;){for(var O;D!==a||l!==0&&D.nodeType!==3||(p=m+l),D!==c||s!==0&&D.nodeType!==3||(w=m+s),D.nodeType===3&&(m+=D.nodeValue.length),(O=D.firstChild)!==null;)N=D,D=O;for(;;){if(D===e)break t;if(N===a&&++T===l&&(p=m),N===c&&++k===s&&(w=m),(O=D.nextSibling)!==null)break;D=N,N=D.parentNode}D=O}a=p===-1||w===-1?null:{start:p,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(vo={focusedElem:e,selectionRange:a},Pi=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,l=c.memoizedProps,c=c.memoizedState,s=a.stateNode;try{var K=un(a.type,l);e=s.getSnapshotBeforeUpdate(K,c),s.__reactInternalSnapshotBeforeUpdate=e}catch(F){_e(a,a.return,F)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)_o(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_o(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function Kf(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:la(e,a),s&4&&or(5,a);break;case 1:if(la(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){_e(a,a.return,m)}else{var l=un(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){_e(a,a.return,m)}}s&64&&Hf(a),s&512&&cr(a,a.return);break;case 3:if(la(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Nd(e,t)}catch(m){_e(a,a.return,m)}}break;case 27:t===null&&s&4&&Yf(a);case 26:case 5:la(e,a),t===null&&s&4&&Gf(a),s&512&&cr(a,a.return);break;case 12:la(e,a);break;case 31:la(e,a),s&4&&Zf(e,a);break;case 13:la(e,a),s&4&&Pf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=sy.bind(null,a),jy(e,a))));break;case 22:if(s=a.memoizedState!==null||ra,!s){t=t!==null&&t.memoizedState!==null||$e,l=ra;var c=$e;ra=s,($e=t)&&!c?ua(e,a,(a.subtreeFlags&8772)!==0):la(e,a),ra=l,$e=c}break;case 30:break;default:la(e,a)}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ke=null,ut=!1;function ia(e,t,a){for(a=a.child;a!==null;)Jf(e,t,a),a=a.sibling}function Jf(e,t,a){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(zs,a)}catch{}switch(a.tag){case 26:$e||Yt(a,t),ia(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$e||Yt(a,t);var s=ke,l=ut;za(a.type)&&(ke=a.stateNode,ut=!1),ia(e,t,a),br(a.stateNode),ke=s,ut=l;break;case 5:$e||Yt(a,t);case 6:if(s=ke,l=ut,ke=null,ia(e,t,a),ke=s,ut=l,ke!==null)if(ut)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(a.stateNode)}catch(c){_e(a,t,c)}else try{ke.removeChild(a.stateNode)}catch(c){_e(a,t,c)}break;case 18:ke!==null&&(ut?(e=ke,Hh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),us(e)):Hh(ke,a.stateNode));break;case 4:s=ke,l=ut,ke=a.stateNode.containerInfo,ut=!0,ia(e,t,a),ke=s,ut=l;break;case 0:case 11:case 14:case 15:Ea(2,a,t),$e||Ea(4,a,t),ia(e,t,a);break;case 1:$e||(Yt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&$f(a,t,s)),ia(e,t,a);break;case 21:ia(e,t,a);break;case 22:$e=(s=$e)||a.memoizedState!==null,ia(e,t,a),$e=s;break;default:ia(e,t,a)}}function Zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{us(e)}catch(a){_e(t,t.return,a)}}}function Pf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{us(e)}catch(a){_e(t,t.return,a)}}function P0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Qf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Qf),t;default:throw Error(i(435,e.tag))}}function Oi(e,t){var a=P0(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var l=ry.bind(null,e,s);s.then(l,l)}})}function ot(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var l=a[s],c=e,m=t,p=m;e:for(;p!==null;){switch(p.tag){case 27:if(za(p.type)){ke=p.stateNode,ut=!1;break e}break;case 5:ke=p.stateNode,ut=!1;break e;case 3:case 4:ke=p.stateNode.containerInfo,ut=!0;break e}p=p.return}if(ke===null)throw Error(i(160));Jf(c,m,l),ke=null,ut=!1,c=l.alternate,c!==null&&(c.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)If(t,e),t=t.sibling}var Bt=null;function If(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ot(t,e),ct(e),s&4&&(Ea(3,e,e.return),or(3,e),Ea(5,e,e.return));break;case 1:ot(t,e),ct(e),s&512&&($e||a===null||Yt(a,a.return)),s&64&&ra&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var l=Bt;if(ot(t,e),ct(e),s&512&&($e||a===null||Yt(a,a.return)),s&4){var c=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":c=l.getElementsByTagName("title")[0],(!c||c[Bs]||c[We]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=l.createElement(s),l.head.insertBefore(c,l.querySelector("head > title"))),at(c,s,a),c[We]=e,Ke(c),s=c;break e;case"link":var m=Ih("link","href",l).get(s+(a.href||""));if(m){for(var p=0;p<m.length;p++)if(c=m[p],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(p,1);break t}}c=l.createElement(s),at(c,s,a),l.head.appendChild(c);break;case"meta":if(m=Ih("meta","content",l).get(s+(a.content||""))){for(p=0;p<m.length;p++)if(c=m[p],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(p,1);break t}}c=l.createElement(s),at(c,s,a),l.head.appendChild(c);break;default:throw Error(i(468,s))}c[We]=e,Ke(c),s=c}e.stateNode=s}else Wh(l,e.type,e.stateNode);else e.stateNode=Ph(l,s,e.memoizedProps);else c!==s?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,s===null?Wh(l,e.type,e.stateNode):Ph(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Ku(e,e.memoizedProps,a.memoizedProps)}break;case 27:ot(t,e),ct(e),s&512&&($e||a===null||Yt(a,a.return)),a!==null&&s&4&&Ku(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ot(t,e),ct(e),s&512&&($e||a===null||Yt(a,a.return)),e.flags&32){l=e.stateNode;try{Rn(l,"")}catch(K){_e(e,e.return,K)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,Ku(e,l,a!==null?a.memoizedProps:l)),s&1024&&(Zu=!0);break;case 6:if(ot(t,e),ct(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(K){_e(e,e.return,K)}}break;case 3:if(Ki=null,l=Bt,Bt=Yi(t.containerInfo),ot(t,e),Bt=l,ct(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(K){_e(e,e.return,K)}Zu&&(Zu=!1,Wf(e));break;case 4:s=Bt,Bt=Yi(e.stateNode.containerInfo),ot(t,e),ct(e),Bt=s;break;case 12:ot(t,e),ct(e);break;case 31:ot(t,e),ct(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Oi(e,s)));break;case 13:ot(t,e),ct(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ki=X()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Oi(e,s)));break;case 22:l=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,T=ra,k=$e;if(ra=T||l,$e=k||w,ot(t,e),$e=k,ra=T,ct(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||w||ra||$e||on(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){w=a=t;try{if(c=w.stateNode,l)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{p=w.stateNode;var D=w.memoizedProps.style,N=D!=null&&D.hasOwnProperty("display")?D.display:null;p.style.display=N==null||typeof N=="boolean"?"":(""+N).trim()}}catch(K){_e(w,w.return,K)}}}else if(t.tag===6){if(a===null){w=t;try{w.stateNode.nodeValue=l?"":w.memoizedProps}catch(K){_e(w,w.return,K)}}}else if(t.tag===18){if(a===null){w=t;try{var O=w.stateNode;l?$h(O,!0):$h(w.stateNode,!1)}catch(K){_e(w,w.return,K)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Oi(e,a))));break;case 19:ot(t,e),ct(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Oi(e,s)));break;case 30:break;case 21:break;default:ot(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Vf(s)){a=s;break}s=s.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var l=a.stateNode,c=Xu(e);Ni(e,c,l);break;case 5:var m=a.stateNode;a.flags&32&&(Rn(m,""),a.flags&=-33);var p=Xu(e);Ni(e,p,m);break;case 3:case 4:var w=a.stateNode.containerInfo,T=Xu(e);Ju(e,T,w);break;default:throw Error(i(161))}}catch(k){_e(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Wf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function la(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Kf(e,t.alternate,t),t=t.sibling}function on(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ea(4,t,t.return),on(t);break;case 1:Yt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&$f(t,t.return,a),on(t);break;case 27:br(t.stateNode);case 26:case 5:Yt(t,t.return),on(t);break;case 22:t.memoizedState===null&&on(t);break;case 30:on(t);break;default:on(t)}e=e.sibling}}function ua(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,c=t,m=c.flags;switch(c.tag){case 0:case 11:case 15:ua(l,c,a),or(4,c);break;case 1:if(ua(l,c,a),s=c,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(T){_e(s,s.return,T)}if(s=c,l=s.updateQueue,l!==null){var p=s.stateNode;try{var w=l.shared.hiddenCallbacks;if(w!==null)for(l.shared.hiddenCallbacks=null,l=0;l<w.length;l++)Td(w[l],p)}catch(T){_e(s,s.return,T)}}a&&m&64&&Hf(c),cr(c,c.return);break;case 27:Yf(c);case 26:case 5:ua(l,c,a),a&&s===null&&m&4&&Gf(c),cr(c,c.return);break;case 12:ua(l,c,a);break;case 31:ua(l,c,a),a&&m&4&&Zf(l,c);break;case 13:ua(l,c,a),a&&m&4&&Pf(l,c);break;case 22:c.memoizedState===null&&ua(l,c,a),cr(c,c.return);break;case 30:break;default:ua(l,c,a)}t=t.sibling}}function Pu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ps(a))}function Iu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ps(e))}function Lt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ff(e,t,a,s),t=t.sibling}function Ff(e,t,a,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Lt(e,t,a,s),l&2048&&or(9,t);break;case 1:Lt(e,t,a,s);break;case 3:Lt(e,t,a,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ps(e)));break;case 12:if(l&2048){Lt(e,t,a,s),e=t.stateNode;try{var c=t.memoizedProps,m=c.id,p=c.onPostCommit;typeof p=="function"&&p(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){_e(t,t.return,w)}}else Lt(e,t,a,s);break;case 31:Lt(e,t,a,s);break;case 13:Lt(e,t,a,s);break;case 23:break;case 22:c=t.stateNode,m=t.alternate,t.memoizedState!==null?c._visibility&2?Lt(e,t,a,s):dr(e,t):c._visibility&2?Lt(e,t,a,s):(c._visibility|=2,In(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Pu(m,t);break;case 24:Lt(e,t,a,s),l&2048&&Iu(t.alternate,t);break;default:Lt(e,t,a,s)}}function In(e,t,a,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,m=t,p=a,w=s,T=m.flags;switch(m.tag){case 0:case 11:case 15:In(c,m,p,w,l),or(8,m);break;case 23:break;case 22:var k=m.stateNode;m.memoizedState!==null?k._visibility&2?In(c,m,p,w,l):dr(c,m):(k._visibility|=2,In(c,m,p,w,l)),l&&T&2048&&Pu(m.alternate,m);break;case 24:In(c,m,p,w,l),l&&T&2048&&Iu(m.alternate,m);break;default:In(c,m,p,w,l)}t=t.sibling}}function dr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,l=s.flags;switch(s.tag){case 22:dr(a,s),l&2048&&Pu(s.alternate,s);break;case 24:dr(a,s),l&2048&&Iu(s.alternate,s);break;default:dr(a,s)}t=t.sibling}}var fr=8192;function Wn(e,t,a){if(e.subtreeFlags&fr)for(e=e.child;e!==null;)eh(e,t,a),e=e.sibling}function eh(e,t,a){switch(e.tag){case 26:Wn(e,t,a),e.flags&fr&&e.memoizedState!==null&&Dy(a,Bt,e.memoizedState,e.memoizedProps);break;case 5:Wn(e,t,a);break;case 3:case 4:var s=Bt;Bt=Yi(e.stateNode.containerInfo),Wn(e,t,a),Bt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=fr,fr=16777216,Wn(e,t,a),fr=s):Wn(e,t,a));break;default:Wn(e,t,a)}}function th(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function hr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Xe=s,nh(s,e)}th(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ah(e),e=e.sibling}function ah(e){switch(e.tag){case 0:case 11:case 15:hr(e),e.flags&2048&&Ea(9,e,e.return);break;case 3:hr(e);break;case 12:hr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ri(e)):hr(e);break;default:hr(e)}}function Ri(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Xe=s,nh(s,e)}th(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ea(8,t,t.return),Ri(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ri(t));break;default:Ri(t)}e=e.sibling}}function nh(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Ea(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ps(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Xe=s;else e:for(a=e;Xe!==null;){s=Xe;var l=s.sibling,c=s.return;if(Xf(s),s===a){Xe=null;break e}if(l!==null){l.return=c,Xe=l;break e}Xe=c}}}var I0={getCacheForType:function(e){var t=et(Le),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return et(Le).controller.signal}},W0=typeof WeakMap=="function"?WeakMap:Map,ye=0,Te=null,re=null,le=0,xe=0,xt=null,Ta=!1,Fn=!1,Wu=!1,oa=0,ze=0,Na=0,cn=0,Fu=0,_t=0,es=0,mr=null,dt=null,eo=!1,ki=0,sh=0,Ui=1/0,zi=null,Oa=null,Ye=0,Ra=null,ts=null,ca=0,to=0,ao=null,rh=null,gr=0,no=null;function wt(){return(ye&2)!==0&&le!==0?le&-le:U.T!==null?oo():xc()}function ih(){if(_t===0)if((le&536870912)===0||ce){var e=Gr;Gr<<=1,(Gr&3932160)===0&&(Gr=262144),_t=e}else _t=536870912;return e=vt.current,e!==null&&(e.flags|=32),_t}function ft(e,t,a){(e===Te&&(xe===2||xe===9)||e.cancelPendingCommit!==null)&&(as(e,0),ka(e,le,_t,!1)),Ds(e,a),((ye&2)===0||e!==Te)&&(e===Te&&((ye&2)===0&&(cn|=a),ze===4&&ka(e,le,_t,!1)),Qt(e))}function lh(e,t,a){if((ye&6)!==0)throw Error(i(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ms(e,t),l=s?ty(e,t):ro(e,t,!0),c=s;do{if(l===0){Fn&&!s&&ka(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!F0(a)){l=ro(e,t,!1),c=!1;continue}if(l===2){if(c=t,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var p=e;l=mr;var w=p.current.memoizedState.isDehydrated;if(w&&(as(p,m).flags|=256),m=ro(p,m,!1),m!==2){if(Wu&&!w){p.errorRecoveryDisabledLanes|=c,cn|=c,l=4;break e}c=dt,dt=l,c!==null&&(dt===null?dt=c:dt.push.apply(dt,c))}l=m}if(c=!1,l!==2)continue}}if(l===1){as(e,0),ka(e,t,0,!0);break}e:{switch(s=e,c=l,c){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ka(s,t,_t,!Ta);break e;case 2:dt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(l=ki+300-X(),10<l)){if(ka(s,t,_t,!Ta),Yr(s,0,!0)!==0)break e;ca=t,s.timeoutHandle=Lh(uh.bind(null,s,a,dt,zi,eo,t,_t,cn,es,Ta,c,"Throttled",-0,0),l);break e}uh(s,a,dt,zi,eo,t,_t,cn,es,Ta,c,null,-0,0)}}break}while(!0);Qt(e)}function uh(e,t,a,s,l,c,m,p,w,T,k,D,N,O){if(e.timeoutHandle=-1,D=t.subtreeFlags,D&8192||(D&16785408)===16785408){D={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zt},eh(t,c,D);var K=(c&62914560)===c?ki-X():(c&4194048)===c?sh-X():0;if(K=By(D,K),K!==null){ca=c,e.cancelPendingCommit=K(yh.bind(null,e,t,c,a,s,l,m,p,w,k,D,null,N,O)),ka(e,c,m,!T);return}}yh(e,t,c,a,s,l,m,p,w)}function F0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var l=a[s],c=l.getSnapshot;l=l.value;try{if(!yt(c(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ka(e,t,a,s){t&=~Fu,t&=~cn,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var c=31-gt(l),m=1<<c;s[c]=-1,l&=~m}a!==0&&pc(e,a,t)}function Mi(){return(ye&6)===0?(yr(0),!1):!0}function so(){if(re!==null){if(xe===0)var e=re.return;else e=re,Ft=en=null,xu(e),Kn=null,Ws=0,e=re;for(;e!==null;)qf(e.alternate,e),e=e.return;re=null}}function as(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,by(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ca=0,so(),Te=e,re=a=It(e.current,null),le=t,xe=0,xt=null,Ta=!1,Fn=Ms(e,t),Wu=!1,es=_t=Fu=cn=Na=ze=0,dt=mr=null,eo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-gt(s),c=1<<l;t|=e[l],s&=~c}return oa=t,ai(),a}function oh(e,t){ae=null,U.H=ir,t===Qn||t===ci?(t=jd(),xe=3):t===uu?(t=jd(),xe=4):xe=t===Du?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xt=t,re===null&&(ze=1,ji(e,Et(t,e.current)))}function ch(){var e=vt.current;return e===null?!0:(le&4194048)===le?Rt===null:(le&62914560)===le||(le&536870912)!==0?e===Rt:!1}function dh(){var e=U.H;return U.H=ir,e===null?ir:e}function fh(){var e=U.A;return U.A=I0,e}function Di(){ze=4,Ta||(le&4194048)!==le&&vt.current!==null||(Fn=!0),(Na&134217727)===0&&(cn&134217727)===0||Te===null||ka(Te,le,_t,!1)}function ro(e,t,a){var s=ye;ye|=2;var l=dh(),c=fh();(Te!==e||le!==t)&&(zi=null,as(e,t)),t=!1;var m=ze;e:do try{if(xe!==0&&re!==null){var p=re,w=xt;switch(xe){case 8:so(),m=6;break e;case 3:case 2:case 9:case 6:vt.current===null&&(t=!0);var T=xe;if(xe=0,xt=null,ns(e,p,w,T),a&&Fn){m=0;break e}break;default:T=xe,xe=0,xt=null,ns(e,p,w,T)}}ey(),m=ze;break}catch(k){oh(e,k)}while(!0);return t&&e.shellSuspendCounter++,Ft=en=null,ye=s,U.H=l,U.A=c,re===null&&(Te=null,le=0,ai()),m}function ey(){for(;re!==null;)hh(re)}function ty(e,t){var a=ye;ye|=2;var s=dh(),l=fh();Te!==e||le!==t?(zi=null,Ui=X()+500,as(e,t)):Fn=Ms(e,t);e:do try{if(xe!==0&&re!==null){t=re;var c=xt;t:switch(xe){case 1:xe=0,xt=null,ns(e,t,c,1);break;case 2:case 9:if(wd(c)){xe=0,xt=null,mh(t);break}t=function(){xe!==2&&xe!==9||Te!==e||(xe=7),Qt(e)},c.then(t,t);break e;case 3:xe=7;break e;case 4:xe=5;break e;case 7:wd(c)?(xe=0,xt=null,mh(t)):(xe=0,xt=null,ns(e,t,c,7));break;case 5:var m=null;switch(re.tag){case 26:m=re.memoizedState;case 5:case 27:var p=re;if(m?Fh(m):p.stateNode.complete){xe=0,xt=null;var w=p.sibling;if(w!==null)re=w;else{var T=p.return;T!==null?(re=T,Bi(T)):re=null}break t}}xe=0,xt=null,ns(e,t,c,5);break;case 6:xe=0,xt=null,ns(e,t,c,6);break;case 8:so(),ze=6;break e;default:throw Error(i(462))}}ay();break}catch(k){oh(e,k)}while(!0);return Ft=en=null,U.H=s,U.A=l,ye=a,re!==null?0:(Te=null,le=0,ai(),ze)}function ay(){for(;re!==null&&!vl();)hh(re)}function hh(e){var t=Bf(e.alternate,e,oa);e.memoizedProps=e.pendingProps,t===null?Bi(e):re=t}function mh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Rf(a,t,t.pendingProps,t.type,void 0,le);break;case 11:t=Rf(a,t,t.pendingProps,t.type.render,t.ref,le);break;case 5:xu(t);default:qf(a,t),t=re=dd(t,oa),t=Bf(a,t,oa)}e.memoizedProps=e.pendingProps,t===null?Bi(e):re=t}function ns(e,t,a,s){Ft=en=null,xu(t),Kn=null,Ws=0;var l=t.return;try{if(Y0(e,l,t,a,le)){ze=1,ji(e,Et(a,e.current)),re=null;return}}catch(c){if(l!==null)throw re=l,c;ze=1,ji(e,Et(a,e.current)),re=null;return}t.flags&32768?(ce||s===1?e=!0:Fn||(le&536870912)!==0?e=!1:(Ta=e=!0,(s===2||s===9||s===3||s===6)&&(s=vt.current,s!==null&&s.tag===13&&(s.flags|=16384))),gh(t,e)):Bi(t)}function Bi(e){var t=e;do{if((t.flags&32768)!==0){gh(t,Ta);return}e=t.return;var a=X0(t.alternate,t,oa);if(a!==null){re=a;return}if(t=t.sibling,t!==null){re=t;return}re=t=e}while(t!==null);ze===0&&(ze=5)}function gh(e,t){do{var a=J0(e.alternate,e);if(a!==null){a.flags&=32767,re=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){re=e;return}re=e=a}while(e!==null);ze=6,re=null}function yh(e,t,a,s,l,c,m,p,w){e.cancelPendingCommit=null;do Li();while(Ye!==0);if((ye&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(c=t.lanes|t.childLanes,c|=Xl,Mg(e,a,c,m,p,w),e===Te&&(re=Te=null,le=0),ts=t,Ra=e,ca=a,to=c,ao=l,rh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,iy(Hr,function(){return _h(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=U.T,U.T=null,l=L.p,L.p=2,m=ye,ye|=4;try{Z0(e,t,a)}finally{ye=m,L.p=l,U.T=s}}Ye=1,ph(),vh(),bh()}}function ph(){if(Ye===1){Ye=0;var e=Ra,t=ts,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var s=L.p;L.p=2;var l=ye;ye|=4;try{If(t,e);var c=vo,m=ad(e.containerInfo),p=c.focusedElem,w=c.selectionRange;if(m!==p&&p&&p.ownerDocument&&td(p.ownerDocument.documentElement,p)){if(w!==null&&Gl(p)){var T=w.start,k=w.end;if(k===void 0&&(k=T),"selectionStart"in p)p.selectionStart=T,p.selectionEnd=Math.min(k,p.value.length);else{var D=p.ownerDocument||document,N=D&&D.defaultView||window;if(N.getSelection){var O=N.getSelection(),K=p.textContent.length,F=Math.min(w.start,K),Ae=w.end===void 0?F:Math.min(w.end,K);!O.extend&&F>Ae&&(m=Ae,Ae=F,F=m);var A=ed(p,F),j=ed(p,Ae);if(A&&j&&(O.rangeCount!==1||O.anchorNode!==A.node||O.anchorOffset!==A.offset||O.focusNode!==j.node||O.focusOffset!==j.offset)){var E=D.createRange();E.setStart(A.node,A.offset),O.removeAllRanges(),F>Ae?(O.addRange(E),O.extend(j.node,j.offset)):(E.setEnd(j.node,j.offset),O.addRange(E))}}}}for(D=[],O=p;O=O.parentNode;)O.nodeType===1&&D.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<D.length;p++){var M=D[p];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}Pi=!!po,vo=po=null}finally{ye=l,L.p=s,U.T=a}}e.current=t,Ye=2}}function vh(){if(Ye===2){Ye=0;var e=Ra,t=ts,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var s=L.p;L.p=2;var l=ye;ye|=4;try{Kf(e,t.alternate,t)}finally{ye=l,L.p=s,U.T=a}}Ye=3}}function bh(){if(Ye===4||Ye===3){Ye=0,bl();var e=Ra,t=ts,a=ca,s=rh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ye=5:(Ye=0,ts=Ra=null,xh(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Oa=null),Sl(a),t=t.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(zs,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=U.T,l=L.p,L.p=2,U.T=null;try{for(var c=e.onRecoverableError,m=0;m<s.length;m++){var p=s[m];c(p.value,{componentStack:p.stack})}}finally{U.T=t,L.p=l}}(ca&3)!==0&&Li(),Qt(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===no?gr++:(gr=0,no=e):gr=0,yr(0)}}function xh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ps(t)))}function Li(){return ph(),vh(),bh(),_h()}function _h(){if(Ye!==5)return!1;var e=Ra,t=to;to=0;var a=Sl(ca),s=U.T,l=L.p;try{L.p=32>a?32:a,U.T=null,a=ao,ao=null;var c=Ra,m=ca;if(Ye=0,ts=Ra=null,ca=0,(ye&6)!==0)throw Error(i(331));var p=ye;if(ye|=4,ah(c.current),Ff(c,c.current,m,a),ye=p,yr(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(zs,c)}catch{}return!0}finally{L.p=l,U.T=s,xh(e,t)}}function wh(e,t,a){t=Et(a,t),t=Mu(e.stateNode,t,2),e=ja(e,t,2),e!==null&&(Ds(e,2),Qt(e))}function _e(e,t,a){if(e.tag===3)wh(e,e,a);else for(;t!==null;){if(t.tag===3){wh(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Oa===null||!Oa.has(s))){e=Et(a,e),a=Sf(2),s=ja(t,a,2),s!==null&&(jf(a,s,t,e),Ds(s,2),Qt(s));break}}t=t.return}}function io(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new W0;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(a)||(Wu=!0,l.add(a),e=ny.bind(null,e,t,a),t.then(e,e))}function ny(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Te===e&&(le&a)===a&&(ze===4||ze===3&&(le&62914560)===le&&300>X()-ki?(ye&2)===0&&as(e,0):Fu|=a,es===le&&(es=0)),Qt(e)}function Sh(e,t){t===0&&(t=yc()),e=Ia(e,t),e!==null&&(Ds(e,t),Qt(e))}function sy(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Sh(e,a)}function ry(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),Sh(e,a)}function iy(e,t){return ks(e,t)}var qi=null,ss=null,lo=!1,Hi=!1,uo=!1,Ua=0;function Qt(e){e!==ss&&e.next===null&&(ss===null?qi=ss=e:ss=ss.next=e),Hi=!0,lo||(lo=!0,uy())}function yr(e,t){if(!uo&&Hi){uo=!0;do for(var a=!1,s=qi;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var c=0;else{var m=s.suspendedLanes,p=s.pingedLanes;c=(1<<31-gt(42|e)+1)-1,c&=l&~(m&~p),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,Eh(s,c))}else c=le,c=Yr(s,s===Te?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||Ms(s,c)||(a=!0,Eh(s,c));s=s.next}while(a);uo=!1}}function ly(){jh()}function jh(){Hi=lo=!1;var e=0;Ua!==0&&vy()&&(e=Ua);for(var t=X(),a=null,s=qi;s!==null;){var l=s.next,c=Ch(s,t);c===0?(s.next=null,a===null?qi=l:a.next=l,l===null&&(ss=a)):(a=s,(e!==0||(c&3)!==0)&&(Hi=!0)),s=l}Ye!==0&&Ye!==5||yr(e),Ua!==0&&(Ua=0)}function Ch(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-gt(c),p=1<<m,w=l[m];w===-1?((p&a)===0||(p&s)!==0)&&(l[m]=zg(p,t)):w<=t&&(e.expiredLanes|=p),c&=~p}if(t=Te,a=le,a=Yr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(xe===2||xe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Us(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ms(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Us(s),Sl(a)){case 2:case 8:a=xl;break;case 32:a=Hr;break;case 268435456:a=gc;break;default:a=Hr}return s=Ah.bind(null,e),a=ks(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Us(s),e.callbackPriority=2,e.callbackNode=null,2}function Ah(e,t){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Li()&&e.callbackNode!==a)return null;var s=le;return s=Yr(e,e===Te?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(lh(e,s,t),Ch(e,X()),e.callbackNode!=null&&e.callbackNode===a?Ah.bind(null,e):null)}function Eh(e,t){if(Li())return null;lh(e,t,!0)}function uy(){xy(function(){(ye&6)!==0?ks($t,ly):jh()})}function oo(){if(Ua===0){var e=Vn;e===0&&(e=$r,$r<<=1,($r&261888)===0&&($r=256)),Ua=e}return Ua}function Th(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jr(""+e)}function Nh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function oy(e,t,a,s,l){if(t==="submit"&&a&&a.stateNode===l){var c=Th((l[it]||null).action),m=s.submitter;m&&(t=(t=m[it]||null)?Th(t.formAction):m.getAttribute("formAction"),t!==null&&(c=t,m=null));var p=new Wr("action","action",null,s,l);e.push({event:p,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ua!==0){var w=m?Nh(l,m):new FormData(l);Nu(a,{pending:!0,data:w,method:l.method,action:c},null,w)}}else typeof c=="function"&&(p.preventDefault(),w=m?Nh(l,m):new FormData(l),Nu(a,{pending:!0,data:w,method:l.method,action:c},c,w))},currentTarget:l}]})}}for(var co=0;co<Kl.length;co++){var fo=Kl[co],cy=fo.toLowerCase(),dy=fo[0].toUpperCase()+fo.slice(1);Dt(cy,"on"+dy)}Dt(rd,"onAnimationEnd"),Dt(id,"onAnimationIteration"),Dt(ld,"onAnimationStart"),Dt("dblclick","onDoubleClick"),Dt("focusin","onFocus"),Dt("focusout","onBlur"),Dt(E0,"onTransitionRun"),Dt(T0,"onTransitionStart"),Dt(N0,"onTransitionCancel"),Dt(ud,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pr));function Oh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],l=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var m=s.length-1;0<=m;m--){var p=s[m],w=p.instance,T=p.currentTarget;if(p=p.listener,w!==c&&l.isPropagationStopped())break e;c=p,l.currentTarget=T;try{c(l)}catch(k){ti(k)}l.currentTarget=null,c=w}else for(m=0;m<s.length;m++){if(p=s[m],w=p.instance,T=p.currentTarget,p=p.listener,w!==c&&l.isPropagationStopped())break e;c=p,l.currentTarget=T;try{c(l)}catch(k){ti(k)}l.currentTarget=null,c=w}}}}function ie(e,t){var a=t[jl];a===void 0&&(a=t[jl]=new Set);var s=e+"__bubble";a.has(s)||(Rh(t,e,2,!1),a.add(s))}function ho(e,t,a){var s=0;t&&(s|=4),Rh(a,e,s,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function mo(e){if(!e[$i]){e[$i]=!0,Sc.forEach(function(a){a!=="selectionchange"&&(fy.has(a)||ho(a,!1,e),ho(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$i]||(t[$i]=!0,ho("selectionchange",!1,t))}}function Rh(e,t,a,s){switch(im(t)){case 2:var l=Hy;break;case 8:l=$y;break;default:l=No}a=l.bind(null,t,a,e),l=void 0,!Ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function go(e,t,a,s,l){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var p=s.stateNode.containerInfo;if(p===l)break;if(m===4)for(m=s.return;m!==null;){var w=m.tag;if((w===3||w===4)&&m.stateNode.containerInfo===l)return;m=m.return}for(;p!==null;){if(m=An(p),m===null)return;if(w=m.tag,w===5||w===6||w===26||w===27){s=c=m;continue e}p=p.parentNode}}s=s.return}Mc(function(){var T=c,k=Rl(a),D=[];e:{var N=od.get(e);if(N!==void 0){var O=Wr,K=e;switch(e){case"keypress":if(Pr(a)===0)break e;case"keydown":case"keyup":O=r0;break;case"focusin":K="focus",O=Bl;break;case"focusout":K="blur",O=Bl;break;case"beforeblur":case"afterblur":O=Bl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=u0;break;case rd:case id:case ld:O=Pg;break;case ud:O=c0;break;case"scroll":case"scrollend":O=Qg;break;case"wheel":O=f0;break;case"copy":case"cut":case"paste":O=Wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Hc;break;case"toggle":case"beforetoggle":O=m0}var F=(t&4)!==0,Ae=!F&&(e==="scroll"||e==="scrollend"),A=F?N!==null?N+"Capture":null:N;F=[];for(var j=T,E;j!==null;){var M=j;if(E=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||E===null||A===null||(M=qs(j,A),M!=null&&F.push(vr(j,M,E))),Ae)break;j=j.return}0<F.length&&(N=new O(N,K,null,a,k),D.push({event:N,listeners:F}))}}if((t&7)===0){e:{if(N=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",N&&a!==Ol&&(K=a.relatedTarget||a.fromElement)&&(An(K)||K[Cn]))break e;if((O||N)&&(N=k.window===k?k:(N=k.ownerDocument)?N.defaultView||N.parentWindow:window,O?(K=a.relatedTarget||a.toElement,O=T,K=K?An(K):null,K!==null&&(Ae=d(K),F=K.tag,K!==Ae||F!==5&&F!==27&&F!==6)&&(K=null)):(O=null,K=T),O!==K)){if(F=Lc,M="onMouseLeave",A="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(F=Hc,M="onPointerLeave",A="onPointerEnter",j="pointer"),Ae=O==null?N:Ls(O),E=K==null?N:Ls(K),N=new F(M,j+"leave",O,a,k),N.target=Ae,N.relatedTarget=E,M=null,An(k)===T&&(F=new F(A,j+"enter",K,a,k),F.target=E,F.relatedTarget=Ae,M=F),Ae=M,O&&K)t:{for(F=hy,A=O,j=K,E=0,M=A;M;M=F(M))E++;M=0;for(var P=j;P;P=F(P))M++;for(;0<E-M;)A=F(A),E--;for(;0<M-E;)j=F(j),M--;for(;E--;){if(A===j||j!==null&&A===j.alternate){F=A;break t}A=F(A),j=F(j)}F=null}else F=null;O!==null&&kh(D,N,O,F,!1),K!==null&&Ae!==null&&kh(D,Ae,K,F,!0)}}e:{if(N=T?Ls(T):window,O=N.nodeName&&N.nodeName.toLowerCase(),O==="select"||O==="input"&&N.type==="file")var fe=Jc;else if(Kc(N))if(Zc)fe=j0;else{fe=w0;var J=_0}else O=N.nodeName,!O||O.toLowerCase()!=="input"||N.type!=="checkbox"&&N.type!=="radio"?T&&Nl(T.elementType)&&(fe=Jc):fe=S0;if(fe&&(fe=fe(e,T))){Xc(D,fe,a,k);break e}J&&J(e,N,T),e==="focusout"&&T&&N.type==="number"&&T.memoizedProps.value!=null&&Tl(N,"number",N.value)}switch(J=T?Ls(T):window,e){case"focusin":(Kc(J)||J.contentEditable==="true")&&(Mn=J,Vl=T,Xs=null);break;case"focusout":Xs=Vl=Mn=null;break;case"mousedown":Yl=!0;break;case"contextmenu":case"mouseup":case"dragend":Yl=!1,nd(D,a,k);break;case"selectionchange":if(A0)break;case"keydown":case"keyup":nd(D,a,k)}var ne;if(ql)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else zn?Yc(e,a)&&(ue="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ue="onCompositionStart");ue&&($c&&a.locale!=="ko"&&(zn||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&zn&&(ne=Dc()):(pa=k,zl="value"in pa?pa.value:pa.textContent,zn=!0)),J=Gi(T,ue),0<J.length&&(ue=new qc(ue,e,null,a,k),D.push({event:ue,listeners:J}),ne?ue.data=ne:(ne=Qc(a),ne!==null&&(ue.data=ne)))),(ne=y0?p0(e,a):v0(e,a))&&(ue=Gi(T,"onBeforeInput"),0<ue.length&&(J=new qc("onBeforeInput","beforeinput",null,a,k),D.push({event:J,listeners:ue}),J.data=ne)),oy(D,e,T,a,k)}Oh(D,t)})}function vr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Gi(e,t){for(var a=t+"Capture",s=[];e!==null;){var l=e,c=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||c===null||(l=qs(e,a),l!=null&&s.unshift(vr(e,l,c)),l=qs(e,t),l!=null&&s.push(vr(e,l,c))),e.tag===3)return s;e=e.return}return[]}function hy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kh(e,t,a,s,l){for(var c=t._reactName,m=[];a!==null&&a!==s;){var p=a,w=p.alternate,T=p.stateNode;if(p=p.tag,w!==null&&w===s)break;p!==5&&p!==26&&p!==27||T===null||(w=T,l?(T=qs(a,c),T!=null&&m.unshift(vr(a,T,w))):l||(T=qs(a,c),T!=null&&m.push(vr(a,T,w)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var my=/\r\n?/g,gy=/\u0000|\uFFFD/g;function Uh(e){return(typeof e=="string"?e:""+e).replace(my,`
`).replace(gy,"")}function zh(e,t){return t=Uh(t),Uh(e)===t}function Ce(e,t,a,s,l,c){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Rn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Rn(e,""+s);break;case"className":Kr(e,"class",s);break;case"tabIndex":Kr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(e,a,s);break;case"style":Uc(e,s,c);break;case"data":if(t!=="object"){Kr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Jr(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Ce(e,t,"name",l.name,l,null),Ce(e,t,"formEncType",l.formEncType,l,null),Ce(e,t,"formMethod",l.formMethod,l,null),Ce(e,t,"formTarget",l.formTarget,l,null)):(Ce(e,t,"encType",l.encType,l,null),Ce(e,t,"method",l.method,l,null),Ce(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Jr(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Zt);break;case"onScroll":s!=null&&ie("scroll",e);break;case"onScrollEnd":s!=null&&ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Jr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ie("beforetoggle",e),ie("toggle",e),Qr(e,"popover",s);break;case"xlinkActuate":Jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Jt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Jt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Jt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Jt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Qr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vg.get(a)||a,Qr(e,a,s))}}function yo(e,t,a,s,l,c){switch(a){case"style":Uc(e,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Rn(e,s):(typeof s=="number"||typeof s=="bigint")&&Rn(e,""+s);break;case"onScroll":s!=null&&ie("scroll",e);break;case"onScrollEnd":s!=null&&ie("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Zt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),c=e[it]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,l),typeof s=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,l);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Qr(e,a,s)}}}function at(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ie("error",e),ie("load",e);var s=!1,l=!1,c;for(c in a)if(a.hasOwnProperty(c)){var m=a[c];if(m!=null)switch(c){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ce(e,t,c,m,a,null)}}l&&Ce(e,t,"srcSet",a.srcSet,a,null),s&&Ce(e,t,"src",a.src,a,null);return;case"input":ie("invalid",e);var p=c=m=l=null,w=null,T=null;for(s in a)if(a.hasOwnProperty(s)){var k=a[s];if(k!=null)switch(s){case"name":l=k;break;case"type":m=k;break;case"checked":w=k;break;case"defaultChecked":T=k;break;case"value":c=k;break;case"defaultValue":p=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(137,t));break;default:Ce(e,t,s,k,a,null)}}Nc(e,c,p,w,T,m,l,!1);return;case"select":ie("invalid",e),s=m=c=null;for(l in a)if(a.hasOwnProperty(l)&&(p=a[l],p!=null))switch(l){case"value":c=p;break;case"defaultValue":m=p;break;case"multiple":s=p;default:Ce(e,t,l,p,a,null)}t=c,a=m,e.multiple=!!s,t!=null?On(e,!!s,t,!1):a!=null&&On(e,!!s,a,!0);return;case"textarea":ie("invalid",e),c=l=s=null;for(m in a)if(a.hasOwnProperty(m)&&(p=a[m],p!=null))switch(m){case"value":s=p;break;case"defaultValue":l=p;break;case"children":c=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:Ce(e,t,m,p,a,null)}Rc(e,s,l,c);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(s=a[w],s!=null))switch(w){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ce(e,t,w,s,a,null)}return;case"dialog":ie("beforetoggle",e),ie("toggle",e),ie("cancel",e),ie("close",e);break;case"iframe":case"object":ie("load",e);break;case"video":case"audio":for(s=0;s<pr.length;s++)ie(pr[s],e);break;case"image":ie("error",e),ie("load",e);break;case"details":ie("toggle",e);break;case"embed":case"source":case"link":ie("error",e),ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(T in a)if(a.hasOwnProperty(T)&&(s=a[T],s!=null))switch(T){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ce(e,t,T,s,a,null)}return;default:if(Nl(t)){for(k in a)a.hasOwnProperty(k)&&(s=a[k],s!==void 0&&yo(e,t,k,s,a,void 0));return}}for(p in a)a.hasOwnProperty(p)&&(s=a[p],s!=null&&Ce(e,t,p,s,a,null))}function yy(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,c=null,m=null,p=null,w=null,T=null,k=null;for(O in a){var D=a[O];if(a.hasOwnProperty(O)&&D!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":w=D;default:s.hasOwnProperty(O)||Ce(e,t,O,null,s,D)}}for(var N in s){var O=s[N];if(D=a[N],s.hasOwnProperty(N)&&(O!=null||D!=null))switch(N){case"type":c=O;break;case"name":l=O;break;case"checked":T=O;break;case"defaultChecked":k=O;break;case"value":m=O;break;case"defaultValue":p=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(137,t));break;default:O!==D&&Ce(e,t,N,O,s,D)}}El(e,m,p,w,T,k,c,l);return;case"select":O=m=p=N=null;for(c in a)if(w=a[c],a.hasOwnProperty(c)&&w!=null)switch(c){case"value":break;case"multiple":O=w;default:s.hasOwnProperty(c)||Ce(e,t,c,null,s,w)}for(l in s)if(c=s[l],w=a[l],s.hasOwnProperty(l)&&(c!=null||w!=null))switch(l){case"value":N=c;break;case"defaultValue":p=c;break;case"multiple":m=c;default:c!==w&&Ce(e,t,l,c,s,w)}t=p,a=m,s=O,N!=null?On(e,!!a,N,!1):!!s!=!!a&&(t!=null?On(e,!!a,t,!0):On(e,!!a,a?[]:"",!1));return;case"textarea":O=N=null;for(p in a)if(l=a[p],a.hasOwnProperty(p)&&l!=null&&!s.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Ce(e,t,p,null,s,l)}for(m in s)if(l=s[m],c=a[m],s.hasOwnProperty(m)&&(l!=null||c!=null))switch(m){case"value":N=l;break;case"defaultValue":O=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(i(91));break;default:l!==c&&Ce(e,t,m,l,s,c)}Oc(e,N,O);return;case"option":for(var K in a)if(N=a[K],a.hasOwnProperty(K)&&N!=null&&!s.hasOwnProperty(K))switch(K){case"selected":e.selected=!1;break;default:Ce(e,t,K,null,s,N)}for(w in s)if(N=s[w],O=a[w],s.hasOwnProperty(w)&&N!==O&&(N!=null||O!=null))switch(w){case"selected":e.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Ce(e,t,w,N,s,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var F in a)N=a[F],a.hasOwnProperty(F)&&N!=null&&!s.hasOwnProperty(F)&&Ce(e,t,F,null,s,N);for(T in s)if(N=s[T],O=a[T],s.hasOwnProperty(T)&&N!==O&&(N!=null||O!=null))switch(T){case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(137,t));break;default:Ce(e,t,T,N,s,O)}return;default:if(Nl(t)){for(var Ae in a)N=a[Ae],a.hasOwnProperty(Ae)&&N!==void 0&&!s.hasOwnProperty(Ae)&&yo(e,t,Ae,void 0,s,N);for(k in s)N=s[k],O=a[k],!s.hasOwnProperty(k)||N===O||N===void 0&&O===void 0||yo(e,t,k,N,s,O);return}}for(var A in a)N=a[A],a.hasOwnProperty(A)&&N!=null&&!s.hasOwnProperty(A)&&Ce(e,t,A,null,s,N);for(D in s)N=s[D],O=a[D],!s.hasOwnProperty(D)||N===O||N==null&&O==null||Ce(e,t,D,N,s,O)}function Mh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function py(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var l=a[s],c=l.transferSize,m=l.initiatorType,p=l.duration;if(c&&p&&Mh(m)){for(m=0,p=l.responseEnd,s+=1;s<a.length;s++){var w=a[s],T=w.startTime;if(T>p)break;var k=w.transferSize,D=w.initiatorType;k&&Mh(D)&&(w=w.responseEnd,m+=k*(w<p?1:(p-T)/(w-T)))}if(--s,t+=8*(c+m)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var po=null,vo=null;function Vi(e){return e.nodeType===9?e:e.ownerDocument}function Dh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xo=null;function vy(){var e=window.event;return e&&e.type==="popstate"?e===xo?!1:(xo=e,!0):(xo=null,!1)}var Lh=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,qh=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof qh<"u"?function(e){return qh.resolve(null).then(e).catch(_y)}:Lh;function _y(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function Hh(e,t){var a=t,s=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(l),us(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")br(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,br(a);for(var c=a.firstChild;c;){var m=c.nextSibling,p=c.nodeName;c[Bs]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=m}}else a==="body"&&br(e.ownerDocument.body);a=l}while(a);us(t)}function $h(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function _o(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_o(a),Cl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function wy(e,t,a,s){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Bs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=kt(e.nextSibling),e===null)break}return null}function Sy(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=kt(e.nextSibling),e===null))return null;return e}function Gh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=kt(e.nextSibling),e===null))return null;return e}function wo(e){return e.data==="$?"||e.data==="$~"}function So(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function jy(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var jo=null;function Vh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return kt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Yh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Qh(e,t,a){switch(t=Vi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function br(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cl(e)}var Ut=new Map,Kh=new Set;function Yi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var da=L.d;L.d={f:Cy,r:Ay,D:Ey,C:Ty,L:Ny,m:Oy,X:ky,S:Ry,M:Uy};function Cy(){var e=da.f(),t=Mi();return e||t}function Ay(e){var t=En(e);t!==null&&t.tag===5&&t.type==="form"?of(t):da.r(e)}var rs=typeof document>"u"?null:document;function Xh(e,t,a){var s=rs;if(s&&typeof t=="string"&&t){var l=Ct(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),Kh.has(l)||(Kh.add(l),e={rel:e,crossOrigin:a,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),at(t,"link",e),Ke(t),s.head.appendChild(t)))}}function Ey(e){da.D(e),Xh("dns-prefetch",e,null)}function Ty(e,t){da.C(e,t),Xh("preconnect",e,t)}function Ny(e,t,a){da.L(e,t,a);var s=rs;if(s&&e&&t){var l='link[rel="preload"][as="'+Ct(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Ct(a.imageSizes)+'"]')):l+='[href="'+Ct(e)+'"]';var c=l;switch(t){case"style":c=is(e);break;case"script":c=ls(e)}Ut.has(c)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ut.set(c,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(xr(c))||t==="script"&&s.querySelector(_r(c))||(t=s.createElement("link"),at(t,"link",e),Ke(t),s.head.appendChild(t)))}}function Oy(e,t){da.m(e,t);var a=rs;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Ct(s)+'"][href="'+Ct(e)+'"]',c=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=ls(e)}if(!Ut.has(c)&&(e=b({rel:"modulepreload",href:e},t),Ut.set(c,e),a.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_r(c)))return}s=a.createElement("link"),at(s,"link",e),Ke(s),a.head.appendChild(s)}}}function Ry(e,t,a){da.S(e,t,a);var s=rs;if(s&&e){var l=Tn(s).hoistableStyles,c=is(e);t=t||"default";var m=l.get(c);if(!m){var p={loading:0,preload:null};if(m=s.querySelector(xr(c)))p.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ut.get(c))&&Co(e,a);var w=m=s.createElement("link");Ke(w),at(w,"link",e),w._p=new Promise(function(T,k){w.onload=T,w.onerror=k}),w.addEventListener("load",function(){p.loading|=1}),w.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Qi(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:p},l.set(c,m)}}}function ky(e,t){da.X(e,t);var a=rs;if(a&&e){var s=Tn(a).hoistableScripts,l=ls(e),c=s.get(l);c||(c=a.querySelector(_r(l)),c||(e=b({src:e,async:!0},t),(t=Ut.get(l))&&Ao(e,t),c=a.createElement("script"),Ke(c),at(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(l,c))}}function Uy(e,t){da.M(e,t);var a=rs;if(a&&e){var s=Tn(a).hoistableScripts,l=ls(e),c=s.get(l);c||(c=a.querySelector(_r(l)),c||(e=b({src:e,async:!0,type:"module"},t),(t=Ut.get(l))&&Ao(e,t),c=a.createElement("script"),Ke(c),at(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(l,c))}}function Jh(e,t,a,s){var l=(l=Mt.current)?Yi(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=is(a.href),a=Tn(l).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=is(a.href);var c=Tn(l).hoistableStyles,m=c.get(e);if(m||(l=l.ownerDocument||l,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=l.querySelector(xr(e)))&&!c._p&&(m.instance=c,m.state.loading=5),Ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ut.set(e,a),c||zy(l,e,a,m.state))),t&&s===null)throw Error(i(528,""));return m}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ls(a),a=Tn(l).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function is(e){return'href="'+Ct(e)+'"'}function xr(e){return'link[rel="stylesheet"]['+e+"]"}function Zh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function zy(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),at(t,"link",a),Ke(t),e.head.appendChild(t))}function ls(e){return'[src="'+Ct(e)+'"]'}function _r(e){return"script[async]"+e}function Ph(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(s)return t.instance=s,Ke(s),s;var l=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ke(s),at(s,"style",l),Qi(s,a.precedence,e),t.instance=s;case"stylesheet":l=is(a.href);var c=e.querySelector(xr(l));if(c)return t.state.loading|=4,t.instance=c,Ke(c),c;s=Zh(a),(l=Ut.get(l))&&Co(s,l),c=(e.ownerDocument||e).createElement("link"),Ke(c);var m=c;return m._p=new Promise(function(p,w){m.onload=p,m.onerror=w}),at(c,"link",s),t.state.loading|=4,Qi(c,a.precedence,e),t.instance=c;case"script":return c=ls(a.src),(l=e.querySelector(_r(c)))?(t.instance=l,Ke(l),l):(s=a,(l=Ut.get(c))&&(s=b({},a),Ao(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),Ke(l),at(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Qi(s,a.precedence,e));return t.instance}function Qi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,c=l,m=0;m<s.length;m++){var p=s[m];if(p.dataset.precedence===t)c=p;else if(c!==l)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Co(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ao(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ki=null;function Ih(e,t,a){if(Ki===null){var s=new Map,l=Ki=new Map;l.set(a,s)}else l=Ki,s=l.get(a),s||(s=new Map,l.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var c=a[l];if(!(c[Bs]||c[We]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(t)||"";m=e+m;var p=s.get(m);p?p.push(c):s.set(m,[c])}}return s}function Wh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function My(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Fh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Dy(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=is(s.href),c=t.querySelector(xr(l));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Xi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,Ke(c);return}c=t.ownerDocument||t,s=Zh(s),(l=Ut.get(l))&&Co(s,l),c=c.createElement("link"),Ke(c);var m=c;m._p=new Promise(function(p,w){m.onload=p,m.onerror=w}),at(c,"link",s),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Xi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Eo=0;function By(e,t){return e.stylesheets&&e.count===0&&Zi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Zi(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Eo===0&&(Eo=62500*py());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zi(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Eo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function Xi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ji=null;function Zi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ji=new Map,t.forEach(Ly,e),Ji=null,Xi.call(e))}function Ly(e,t){if(!(t.state.loading&4)){var a=Ji.get(e);if(a)var s=a.get(null);else{a=new Map,Ji.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<l.length;c++){var m=l[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),s=m)}s&&a.set(null,s)}l=t.instance,m=l.getAttribute("data-precedence"),c=a.get(m)||s,c===s&&a.set(null,l),a.set(m,l),this.count++,s=Xi.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),c?c.parentNode.insertBefore(l,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var wr={$$typeof:q,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function qy(e,t,a,s,l,c,m,p,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_l(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.hiddenUpdates=_l(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function em(e,t,a,s,l,c,m,p,w,T,k,D){return e=new qy(e,t,a,m,w,T,k,D,p),t=1,c===!0&&(t|=24),c=pt(3,null,null,t),e.current=c,c.stateNode=e,t=ru(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:s,isDehydrated:a,cache:t},ou(c),e}function tm(e){return e?(e=Ln,e):Ln}function am(e,t,a,s,l,c){l=tm(l),s.context===null?s.context=l:s.pendingContext=l,s=Sa(t),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),a=ja(e,s,t),a!==null&&(ft(a,e,t),er(a,e,t))}function nm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function To(e,t){nm(e,t),(e=e.alternate)&&nm(e,t)}function sm(e){if(e.tag===13||e.tag===31){var t=Ia(e,67108864);t!==null&&ft(t,e,67108864),To(e,67108864)}}function rm(e){if(e.tag===13||e.tag===31){var t=wt();t=wl(t);var a=Ia(e,t);a!==null&&ft(a,e,t),To(e,t)}}var Pi=!0;function Hy(e,t,a,s){var l=U.T;U.T=null;var c=L.p;try{L.p=2,No(e,t,a,s)}finally{L.p=c,U.T=l}}function $y(e,t,a,s){var l=U.T;U.T=null;var c=L.p;try{L.p=8,No(e,t,a,s)}finally{L.p=c,U.T=l}}function No(e,t,a,s){if(Pi){var l=Oo(s);if(l===null)go(e,t,s,Ii,a),lm(e,s);else if(Vy(l,e,t,a,s))s.stopPropagation();else if(lm(e,s),t&4&&-1<Gy.indexOf(e)){for(;l!==null;){var c=En(l);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Ka(c.pendingLanes);if(m!==0){var p=c;for(p.pendingLanes|=2,p.entangledLanes|=2;m;){var w=1<<31-gt(m);p.entanglements[1]|=w,m&=~w}Qt(c),(ye&6)===0&&(Ui=X()+500,yr(0))}}break;case 31:case 13:p=Ia(c,2),p!==null&&ft(p,c,2),Mi(),To(c,2)}if(c=Oo(s),c===null&&go(e,t,s,Ii,a),c===l)break;l=c}l!==null&&s.stopPropagation()}else go(e,t,s,null,a)}}function Oo(e){return e=Rl(e),Ro(e)}var Ii=null;function Ro(e){if(Ii=null,e=An(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ii=e,null}function im(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case $t:return 2;case xl:return 8;case Hr:case Tg:return 32;case gc:return 268435456;default:return 32}default:return 32}}var ko=!1,Ma=null,Da=null,Ba=null,Sr=new Map,jr=new Map,La=[],Gy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lm(e,t){switch(e){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Sr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(t.pointerId)}}function Cr(e,t,a,s,l,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:c,targetContainers:[l]},t!==null&&(t=En(t),t!==null&&sm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Vy(e,t,a,s,l){switch(t){case"focusin":return Ma=Cr(Ma,e,t,a,s,l),!0;case"dragenter":return Da=Cr(Da,e,t,a,s,l),!0;case"mouseover":return Ba=Cr(Ba,e,t,a,s,l),!0;case"pointerover":var c=l.pointerId;return Sr.set(c,Cr(Sr.get(c)||null,e,t,a,s,l)),!0;case"gotpointercapture":return c=l.pointerId,jr.set(c,Cr(jr.get(c)||null,e,t,a,s,l)),!0}return!1}function um(e){var t=An(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,_c(e.priority,function(){rm(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,_c(e.priority,function(){rm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Oo(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Ol=s,a.target.dispatchEvent(s),Ol=null}else return t=En(a),t!==null&&sm(t),e.blockedOn=a,!1;t.shift()}return!0}function om(e,t,a){Wi(e)&&a.delete(t)}function Yy(){ko=!1,Ma!==null&&Wi(Ma)&&(Ma=null),Da!==null&&Wi(Da)&&(Da=null),Ba!==null&&Wi(Ba)&&(Ba=null),Sr.forEach(om),jr.forEach(om)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,ko||(ko=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Yy)))}var el=null;function cm(e){el!==e&&(el=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){el===e&&(el=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(Ro(s||a)===null)continue;break}var c=En(a);c!==null&&(e.splice(t,3),t-=3,Nu(c,{pending:!0,data:l,method:a.method,action:s},s,l))}}))}function us(e){function t(w){return Fi(w,e)}Ma!==null&&Fi(Ma,e),Da!==null&&Fi(Da,e),Ba!==null&&Fi(Ba,e),Sr.forEach(t),jr.forEach(t);for(var a=0;a<La.length;a++){var s=La[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<La.length&&(a=La[0],a.blockedOn===null);)um(a),a.blockedOn===null&&La.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var l=a[s],c=a[s+1],m=l[it]||null;if(typeof c=="function")m||cm(a);else if(m){var p=null;if(c&&c.hasAttribute("formAction")){if(l=c,m=c[it]||null)p=m.formAction;else if(Ro(l)!==null)continue}else p=m.action;typeof p=="function"?a[s+1]=p:(a.splice(s,3),s-=3),cm(a)}}}function dm(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return l=m})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Uo(e){this._internalRoot=e}tl.prototype.render=Uo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,s=wt();am(a,s,e,t,null,null)},tl.prototype.unmount=Uo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;am(e.current,2,null,e,null,null),Mi(),t[Cn]=null}};function tl(e){this._internalRoot=e}tl.prototype.unstable_scheduleHydration=function(e){if(e){var t=xc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<La.length&&t!==0&&t<La[a].priority;a++);La.splice(a,0,e),a===0&&um(e)}};var fm=n.version;if(fm!=="19.2.0")throw Error(i(527,fm,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=v(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Qy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{zs=al.inject(Qy),mt=al}catch{}}return Er.createRoot=function(e,t){if(!u(e))throw Error(i(299));var a=!1,s="",l=bf,c=xf,m=_f;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=em(e,1,!1,null,null,a,s,null,l,c,m,dm),e[Cn]=t.current,mo(e),new Uo(t)},Er.hydrateRoot=function(e,t,a){if(!u(e))throw Error(i(299));var s=!1,l="",c=bf,m=xf,p=_f,w=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(p=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),t=em(e,1,!0,t,a??null,s,l,w,c,m,p,dm),t.context=tm(null),a=t.current,s=wt(),s=wl(s),l=Sa(s),l.callback=null,ja(a,l,s),a=s,t.current.lanes=a,Ds(t,a),Qt(t),e[Cn]=t.current,mo(e),new tl(t)},Er.version="19.2.0",Er}var bm;function fp(){if(bm)return Bo.exports;bm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Bo.exports=dp(),Bo.exports}var hp=fp();const mp=Fm(hp);function cl(o){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)}function xm(o){if(!o?.trim())return{isValid:!1,error:"Username is required"};const n=o.trim();return n.length<3||n.length>30?{isValid:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(n)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}function gp(o){if(!o)return{isValid:!1,error:"Password is required"};if(o.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};const n=/[a-z]/.test(o),r=/[A-Z]/.test(o),i=/\d/.test(o),u=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);return!n||!r||!i||!u?{isValid:!1,error:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:{isValid:!0}}function _m(o){return o?.trim()?o.length>100?{isValid:!1,error:"Campaign name must be 100 characters or less"}:{isValid:!0}:{isValid:!1,error:"Campaign name is required"}}function Ho(o){return["admin","gm","player"].includes(o)}function $o(o){return["admin","gm"].includes(o)}function yp(o){return o==="admin"}function pp(o){return o==="admin"}function Tr(o,n){return`Only ${n.length===1?`${n[0]}s`:`${n.slice(0,-1).join(", ")} and ${n[n.length-1]}s`} can ${o}`}class vp{authRepository;constructor(n){this.authRepository=n}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:cl(n)?this.authRepository.signIn(n,r):{success:!1,error:"Invalid email format"}}async signUp(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:cl(n)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(n,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(n){return this.authRepository.onAuthStateChange(n)}async completeProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.displayName?.trim())return{success:!1,error:"Display name is required"};const i=xm(n.username);return i.isValid?this.authRepository.completeProfile(r.id,n.displayName.trim(),n.username.trim()):{success:!1,error:i.error}}async updateProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(n.displayName!==void 0&&!n.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(n.username!==void 0){const i=xm(n.username);if(!i.isValid)return{success:!1,error:i.error}}return this.authRepository.updateProfile(r.id,n.displayName?.trim(),n.username?.trim())}async changePassword(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.currentPassword)return{success:!1,error:"Current password is required"};const i=gp(n.newPassword);return i.isValid?this.authRepository.changePassword(r.id,n.currentPassword,n.newPassword):{success:!1,error:i.error}}async deleteAccount(){const n=await this.authRepository.getCurrentUser();return n?this.authRepository.deleteAccount(n.id):{success:!1,error:"User not authenticated"}}}class bp{campaignRepository;authRepository;constructor(n,r){this.campaignRepository=n,this.authRepository=r}async getCampaigns(){const n=await this.authRepository.getCurrentUser();return n?this.campaignRepository.getCampaigns(n.id):{success:!1,error:"User not authenticated"}}async getCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(n)}async createCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=_m(n.name);if(!i.isValid)return{success:!1,error:i.error};const u=n.creatorIsAlsoGM||!1;if(n.initialMembers)for(const f of n.initialMembers){if(!cl(f.email))return{success:!1,error:`Invalid email format: ${f.email}`};if(!Ho(f.role))return{success:!1,error:`Invalid role: ${f.role}`}}const d=await this.campaignRepository.createCampaign(r.id,{name:n.name.trim(),description:n.description?.trim()},u);if(!d.success)return d;if(n.initialMembers&&n.initialMembers.length>0&&d.data)for(const f of n.initialMembers)await this.campaignRepository.addMemberByEmail(d.data.id,f.email.trim(),f.role);return d}async updateCampaign(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,i.id);if(!u.success||!u.data||!yp(u.data))return{success:!1,error:Tr("update campaigns",["admin"])};if(r.name!==void 0){const f=_m(r.name);if(!f.isValid)return{success:!1,error:f.error}}const d={};return r.name!==void 0&&(d.name=r.name.trim()),r.description!==void 0&&(d.description=r.description?.trim()),this.campaignRepository.updateCampaign(n,d)}async deleteCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.getUserRole(n,r.id);return!i.success||!i.data||!pp(i.data)?{success:!1,error:Tr("delete campaigns",["admin"])}:this.campaignRepository.deleteCampaign(n)}async getCampaignMembers(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(n)}async addMemberByEmail(n,r,i){const u=await this.authRepository.getCurrentUser();if(!u)return{success:!1,error:"User not authenticated"};const d=await this.campaignRepository.getUserRole(n,u.id);return!d.success||!d.data||!$o(d.data)?{success:!1,error:Tr("add members",["admin","gm"])}:r?.trim()?cl(r)?Ho(i)?this.campaignRepository.addMemberByEmail(n,r.trim(),i):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(n,r,i){const u=await this.authRepository.getCurrentUser();if(!u)return{success:!1,error:"User not authenticated"};const d=await this.campaignRepository.getUserRole(n,u.id);return!d.success||!d.data||!$o(d.data)?{success:!1,error:Tr("update member roles",["admin","gm"])}:Ho(i)?this.campaignRepository.updateMemberRole(n,r,i):{success:!1,error:"Invalid role specified"}}async removeMember(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,i.id);return!u.success||!u.data||!$o(u.data)?{success:!1,error:Tr("remove members",["admin","gm"])}:this.campaignRepository.removeMember(n,r)}}const xp="modulepreload",_p=function(o){return"/traveller-dashboard/"+o},wm={},vn=function(n,r,i){let u=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");u=y(r.map(v=>{if(v=_p(v),v in wm)return;wm[v]=!0;const x=v.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":xp,x||(_.as="script"),_.crossOrigin="",_.href=v,g&&_.setAttribute("nonce",g),document.head.appendChild(_),x)return new Promise((S,C)=>{_.addEventListener("load",S),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${v}`)))})}))}function d(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return u.then(f=>{for(const g of f||[])g.status==="rejected"&&d(g.reason);return n().catch(d)})},wp=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>vn(async()=>{const{default:i}=await Promise.resolve().then(()=>Cs);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)};class dc extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class Sm extends dc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class jm extends dc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Cm extends dc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Io;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Io||(Io={}));var Sp=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class jp{constructor(n,{headers:r={},customFetch:i,region:u=Io.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=wp(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Sp(this,arguments,void 0,function*(r,i={}){var u;try{const{headers:d,method:f,body:g,signal:y}=i;let v={},{region:x}=i;x||(x=this.region);const b=new URL(`${this.url}/${r}`);x&&x!=="any"&&(v["x-region"]=x,b.searchParams.set("forceFunctionRegion",x));let _;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",_=g):typeof g=="string"?(v["Content-Type"]="text/plain",_=g):typeof FormData<"u"&&g instanceof FormData?_=g:(v["Content-Type"]="application/json",_=JSON.stringify(g)));const S=yield this.fetch(b.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),d),body:_,signal:y}).catch(G=>{throw G.name==="AbortError"?G:new Sm(G)}),C=S.headers.get("x-relay-error");if(C&&C==="true")throw new jm(S);if(!S.ok)throw new Cm(S);let R=((u=S.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),B;return R==="application/json"?B=yield S.json():R==="application/octet-stream"?B=yield S.blob():R==="text/event-stream"?B=S:R==="multipart/form-data"?B=yield S.formData():B=yield S.text(),{data:B,error:null,response:S}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new Sm(d)}:{data:null,error:d,response:d instanceof Cm||d instanceof jm?d.context:void 0}}})}}var Je={},os={},cs={},ds={},fs={},hs={},Cp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},js=Cp();const Ap=js.fetch,eg=js.fetch.bind(js),tg=js.Headers,Ep=js.Request,Tp=js.Response,Cs=Object.freeze(Object.defineProperty({__proto__:null,Headers:tg,Request:Ep,Response:Tp,default:eg,fetch:Ap},Symbol.toStringTag,{value:"Module"})),Np=sp(Cs);var nl={},Am;function ag(){if(Am)return nl;Am=1,Object.defineProperty(nl,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return nl.default=o,nl}var Em;function ng(){if(Em)return hs;Em=1;var o=hs&&hs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(hs,"__esModule",{value:!0});const n=o(Np),r=o(ag());class i{constructor(d){var f,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let y=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var x,b,_,S;let C=null,R=null,B=null,G=v.status,H=v.statusText;if(v.ok){if(this.method!=="HEAD"){const $=await v.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?R=$:R=JSON.parse($))}const Y=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),V=(_=v.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");Y&&V&&V.length>1&&(B=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(C={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,B=null,G=406,H="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const Y=await v.text();try{C=JSON.parse(Y),Array.isArray(C)&&v.status===404&&(R=[],C=null,G=200,H="OK")}catch{v.status===404&&Y===""?(G=204,H="No Content"):C={message:Y}}if(C&&this.isMaybeSingle&&(!((S=C?.details)===null||S===void 0)&&S.includes("0 rows"))&&(C=null,G=200,H="OK"),C&&this.shouldThrowOnError)throw new r.default(C)}return{error:C,data:R,count:B,status:G,statusText:H}});return this.shouldThrowOnError||(y=y.catch(v=>{var x,b,_;return{error:{message:`${(x=v?.name)!==null&&x!==void 0?x:"FetchError"}: ${v?.message}`,details:`${(b=v?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(_=v?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),y.then(d,f)}returns(){return this}overrideTypes(){return this}}return hs.default=i,hs}var Tm;function sg(){if(Tm)return fs;Tm=1;var o=fs&&fs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(fs,"__esModule",{value:!0});const n=o(ng());class r extends n.default{select(u){let d=!1;const f=(u??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:g,referencedTable:y=g}={}){const v=y?`${y}.order`:"order",x=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${x?`${x},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:g=f}={}){const y=typeof g>"u"?"offset":`${g}.offset`,v=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${u}`),this.url.searchParams.set(v,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:g=!1,wal:y=!1,format:v="text"}={}){var x;const b=[u?"analyze":null,d?"verbose":null,f?"settings":null,g?"buffers":null,y?"wal":null].filter(Boolean).join("|"),_=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${_}"; options=${b};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return fs.default=r,fs}var Nm;function fc(){if(Nm)return ds;Nm=1;var o=ds&&ds.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ds,"__esModule",{value:!0});const n=o(sg());class r extends n.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}in(u,d){const f=Array.from(new Set(d)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(u,`in.(${f})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:f,type:g}={}){let y="";g==="plain"?y="pl":g==="phrase"?y="ph":g==="websearch"&&(y="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(u,`${y}fts${v}.${d}`),this}match(u){return Object.entries(u).forEach(([d,f])=>{this.url.searchParams.append(d,`eq.${f}`)}),this}not(u,d,f){return this.url.searchParams.append(u,`not.${d}.${f}`),this}or(u,{foreignTable:d,referencedTable:f=d}={}){const g=f?`${f}.or`:"or";return this.url.searchParams.append(g,`(${u})`),this}filter(u,d,f){return this.url.searchParams.append(u,`${d}.${f}`),this}}return ds.default=r,ds}var Om;function rg(){if(Om)return cs;Om=1;var o=cs&&cs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(cs,"__esModule",{value:!0});const n=o(fc());class r{constructor(u,{headers:d={},schema:f,fetch:g}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=g}select(u,d){const{head:f=!1,count:g}=d??{},y=f?"HEAD":"GET";let v=!1;const x=(u??"*").split("").map(b=>/\s/.test(b)&&!v?"":(b==='"'&&(v=!v),b)).join("");return this.url.searchParams.set("select",x),g&&this.headers.append("Prefer",`count=${g}`),new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var g;const y="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const v=u.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:g,defaultToNull:y=!0}={}){var v;const x="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const b=u.reduce((_,S)=>_.concat(Object.keys(S)),[]);if(b.length>0){const _=[...new Set(b)].map(S=>`"${S}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(u,{count:d}={}){var f;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return cs.default=r,cs}var Rm;function Op(){if(Rm)return os;Rm=1;var o=os&&os.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(os,"__esModule",{value:!0});const n=o(rg()),r=o(fc());class i{constructor(d,{headers:f={},schema:g,fetch:y}={}){this.url=d,this.headers=new Headers(f),this.schemaName=g,this.fetch=y}from(d){const f=new URL(`${this.url}/${d}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new i(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:g=!1,get:y=!1,count:v}={}){var x;let b;const _=new URL(`${this.url}/rpc/${d}`);let S;g||y?(b=g?"HEAD":"GET",Object.entries(f).filter(([R,B])=>B!==void 0).map(([R,B])=>[R,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([R,B])=>{_.searchParams.append(R,B)})):(b="POST",S=f);const C=new Headers(this.headers);return v&&C.set("Prefer",`count=${v}`),new r.default({method:b,url:_,headers:C,schema:this.schemaName,body:S,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return os.default=i,os}var km;function Rp(){if(km)return Je;km=1;var o=Je&&Je.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Je,"__esModule",{value:!0}),Je.PostgrestError=Je.PostgrestBuilder=Je.PostgrestTransformBuilder=Je.PostgrestFilterBuilder=Je.PostgrestQueryBuilder=Je.PostgrestClient=void 0;const n=o(Op());Je.PostgrestClient=n.default;const r=o(rg());Je.PostgrestQueryBuilder=r.default;const i=o(fc());Je.PostgrestFilterBuilder=i.default;const u=o(sg());Je.PostgrestTransformBuilder=u.default;const d=o(ng());Je.PostgrestBuilder=d.default;const f=o(ag());return Je.PostgrestError=f.default,Je.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},Je}var kp=Rp();const Up=Fm(kp),{PostgrestClient:zp,PostgrestQueryBuilder:Zx,PostgrestFilterBuilder:Px,PostgrestTransformBuilder:Ix,PostgrestBuilder:Wx,PostgrestError:Fx}=Up;class Mp{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,u=parseInt(i.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Dp="2.75.0",Bp=`realtime-js/${Dp}`,Lp="1.0.0",Wo=1e4,qp=1e3,Hp=100;var Or;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Or||(Or={}));var Qe;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Qe||(Qe={}));var Ht;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Ht||(Ht={}));var Fo;(function(o){o.websocket="websocket"})(Fo||(Fo={}));var mn;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(mn||(mn={}));class $p{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,r,i)}_decodeBroadcast(n,r,i){const u=r.getUint8(1),d=r.getUint8(2);let f=this.HEADER_LENGTH+2;const g=i.decode(n.slice(f,f+u));f=f+u;const y=i.decode(n.slice(f,f+d));f=f+d;const v=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:g,event:y,payload:v}}}class ig{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Ne||(Ne={}));const Um=(o,n,r={})=>{var i;const u=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=Gp(f,o,n,u),d),{}):{}},Gp=(o,n,r,i)=>{const u=n.find(g=>g.name===o),d=u?.type,f=r[o];return d&&!i.includes(d)?lg(d,f):ec(f)},lg=(o,n)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return Kp(n,r)}switch(o){case Ne.bool:return Vp(n);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return Yp(n);case Ne.json:case Ne.jsonb:return Qp(n);case Ne.timestamp:return Xp(n);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return ec(n);default:return ec(n)}},ec=o=>o,Vp=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Yp=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Qp=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Kp=(o,n)=>{if(typeof o!="string")return o;const r=o.length-1,i=o[r];if(o[0]==="{"&&i==="}"){let d;const f=o.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(g=>lg(n,g))}return o},Xp=o=>typeof o=="string"?o.replace(" ","T"):o,ug=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Go{constructor(n,r,i={},u=Wo){this.channel=n,this.event=r,this.payload=i,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var zm;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(zm||(zm={}));class Rr{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rr.syncState(this.state,u,d,f),this.pendingDiffs.forEach(y=>{this.state=Rr.syncDiff(this.state,y,d,f)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Rr.syncDiff(this.state,u,d,f),g())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,u){const d=this.cloneDeep(n),f=this.transformState(r),g={},y={};return this.map(d,(v,x)=>{f[v]||(y[v]=x)}),this.map(f,(v,x)=>{const b=d[v];if(b){const _=x.map(B=>B.presence_ref),S=b.map(B=>B.presence_ref),C=x.filter(B=>S.indexOf(B.presence_ref)<0),R=b.filter(B=>_.indexOf(B.presence_ref)<0);C.length>0&&(g[v]=C),R.length>0&&(y[v]=R)}else g[v]=x}),this.syncDiff(d,{joins:g,leaves:y},i,u)}static syncDiff(n,r,i,u){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),u||(u=()=>{}),this.map(d,(g,y)=>{var v;const x=(v=n[g])!==null&&v!==void 0?v:[];if(n[g]=this.cloneDeep(y),x.length>0){const b=n[g].map(S=>S.presence_ref),_=x.filter(S=>b.indexOf(S.presence_ref)<0);n[g].unshift(..._)}i(g,x,y)}),this.map(f,(g,y)=>{let v=n[g];if(!v)return;const x=y.map(b=>b.presence_ref);v=v.filter(b=>x.indexOf(b.presence_ref)<0),n[g]=v,u(g,v,y),v.length===0&&delete n[g]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const u=n[i];return"metas"in u?r[i]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[i]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mm;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Mm||(Mm={}));var kr;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(kr||(kr={}));var fa;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(fa||(fa={}));class hc{constructor(n,r={config:{}},i){var u,d;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Go(this,Ht.join,this.params,this.timeout),this.rejoinTimer=new ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ht.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Rr(this),this.broadcastEndpointURL=ug(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Qe.closed){const{config:{broadcast:f,presence:g,private:y}}=this.params,v=(u=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&u!==void 0?u:[],x=!!this.bindings[kr.PRESENCE]&&this.bindings[kr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,b={},_={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:x}),postgres_changes:v,private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(S=>n?.(fa.CHANNEL_ERROR,S)),this._onClose(()=>n?.(fa.CLOSED)),this.updateJoinPayload(Object.assign({config:_},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var C;if(this.socket.setAuth(),S===void 0){n?.(fa.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,B=(C=R?.length)!==null&&C!==void 0?C:0,G=[];for(let H=0;H<B;H++){const q=R[H],{filter:{event:Y,schema:V,table:$,filter:ee}}=q,ge=S&&S[H];if(ge&&ge.event===Y&&ge.schema===V&&ge.table===$&&ge.filter===ee)G.push(Object.assign(Object.assign({},q),{id:ge.id}));else{this.unsubscribe(),this.state=Qe.errored,n?.(fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,n&&n(fa.SUBSCRIBED);return}}).receive("error",S=>{this.state=Qe.errored,n?.(fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{n?.(fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===Qe.joined&&n===kr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,i)}async send(n,r={}){var i,u;if(!this._canPush()&&n.type==="broadcast"){const{event:d,payload:f}=n,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,g,y;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((y=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&d("ok"),v.receive("ok",()=>d("ok")),v.receive("error",()=>d("error")),v.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Qe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ht.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(u=>{i=new Go(this,Ht.leave,{},n),i.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qe.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const u=new AbortController,d=setTimeout(()=>u.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(d),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Go(this,n,r,i);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Hp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var u,d;const f=n.toLocaleLowerCase(),{close:g,error:y,leave:v,join:x}=Ht;if(i&&[g,y,v,x].indexOf(f)>=0&&i!==this._joinRef())return;let _=this._onMessage(f,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(S=>{var C,R,B;return((C=S.filter)===null||C===void 0?void 0:C.event)==="*"||((B=(R=S.filter)===null||R===void 0?void 0:R.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===f}).map(S=>S.callback(_,i)):(d=this.bindings[f])===null||d===void 0||d.filter(S=>{var C,R,B,G,H,q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in S){const Y=S.id,V=(C=S.filter)===null||C===void 0?void 0:C.event;return Y&&((R=r.ids)===null||R===void 0?void 0:R.includes(Y))&&(V==="*"||V?.toLocaleLowerCase()===((B=r.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const Y=(H=(G=S?.filter)===null||G===void 0?void 0:G.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return Y==="*"||Y===((q=r?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===f}).map(S=>{if(typeof _=="object"&&"ids"in _){const C=_.data,{schema:R,table:B,commit_timestamp:G,type:H,errors:q}=C;_=Object.assign(Object.assign({},{schema:R,table:B,commit_timestamp:G,eventType:H,new:{},old:{},errors:q}),this._getPayloadRecords(C))}S.callback(_,i)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const u=n.toLocaleLowerCase(),d={type:u,filter:r,callback:i};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&hc.isEqual(u.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Ht.close,{},n)}_onError(n){this._on(Ht.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Um(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Um(n.columns,n.old_record)),r}}const Vo=()=>{},sl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jp=[1e3,2e3,5e3,1e4],Zp=1e4,Pp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ip{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wo,this.transport=null,this.heartbeatIntervalMs=sl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vo,this.ref=0,this.reconnectTimer=null,this.logger=Vo,this.conn=null,this.sendBuffer=[],this.serializer=new $p,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let d;return u?d=u:typeof fetch>"u"?d=(...f)=>vn(async()=>{const{default:g}=await Promise.resolve().then(()=>Cs);return{default:g}},void 0).then(({default:g})=>g(...f)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Fo.websocket}`,this.httpEndpoint=ug(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mp.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Lp}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Or.connecting:return mn.Connecting;case Or.open:return mn.Open;case Or.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===i);if(u)return u;{const d=new hc(`realtime:${n}`,r,this);return this.channels.push(d),d}}push(n){const{topic:r,event:i,payload:u,ref:d}=n,f=()=>{this.encode(n,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${r} ${i} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(qp,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},sl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:u,payload:d,ref:f}=r,g=f?`(${f})`:"",y=d.status||"";this.log("receive",`${y} ${i} ${u} ${g}`.trim(),d),this.channels.filter(v=>v._isMember(i)).forEach(v=>v._trigger(u,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Ht.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${i}${u}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([Pp],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const u={access_token:r,version:Bp};r&&i.updateJoinPayload(u),i.joinedOnce&&i._isJoined()&&i._push(Ht.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new ig(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,u,d,f,g,y,v,x;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Wo,this.heartbeatIntervalMs=(u=n?.heartbeatIntervalMs)!==null&&u!==void 0?u:sl.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:Vo,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n?.reconnectAfterMs)!==null&&y!==void 0?y:(b=>Jp[b-1]||Zp),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((b,_)=>_(JSON.stringify(b))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class mc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ve(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Wp extends mc{constructor(n,r,i){super(n),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tc extends mc{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var Fp=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const og=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>vn(async()=>{const{default:i}=await Promise.resolve().then(()=>Cs);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},ev=()=>Fp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vn(()=>Promise.resolve().then(()=>Cs),void 0)).Response:Response}),ac=o=>{if(Array.isArray(o))return o.map(r=>ac(r));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([r,i])=>{const u=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=ac(i)}),n},tv=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var xn=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const Yo=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),av=(o,n,r)=>xn(void 0,void 0,void 0,function*(){const i=yield ev();o instanceof i&&!r?.noResolveJson?o.json().then(u=>{const d=o.status||500,f=u?.statusCode||d+"";n(new Wp(Yo(u),d,f))}).catch(u=>{n(new tc(Yo(u),u))}):n(new tc(Yo(o),o))}),nv=(o,n,r,i)=>{const u={method:o,headers:n?.headers||{}};return o==="GET"||!i?u:(tv(i)?(u.headers=Object.assign({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(i)):u.body=i,n?.duplex&&(u.duplex=n.duplex),Object.assign(Object.assign({},u),r))};function Br(o,n,r,i,u,d){return xn(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(r,nv(n,i,u,d)).then(y=>{if(!y.ok)throw y;return i?.noResolveJson?y:y.json()}).then(y=>f(y)).catch(y=>av(y,g,i))})})}function dl(o,n,r,i){return xn(this,void 0,void 0,function*(){return Br(o,"GET",n,r,i)})}function Kt(o,n,r,i,u){return xn(this,void 0,void 0,function*(){return Br(o,"POST",n,i,u,r)})}function nc(o,n,r,i,u){return xn(this,void 0,void 0,function*(){return Br(o,"PUT",n,i,u,r)})}function sv(o,n,r,i){return xn(this,void 0,void 0,function*(){return Br(o,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function cg(o,n,r,i,u){return xn(this,void 0,void 0,function*(){return Br(o,"DELETE",n,i,u,r)})}var rv=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class iv{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return rv(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}}var lv=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class uv{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}asStream(){return new iv(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.execute().then(n,r)}execute(){return lv(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}}var ht=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const ov={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cv{constructor(n,r={},i,u){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=i,this.fetch=og(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,i,u){return ht(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},Dm),u);let g=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const y=f.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y))):(d=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,y&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),u?.headers&&(g=Object.assign(Object.assign({},g),u.headers));const v=this._removeEmptyFolders(r),x=this._getFinalPath(v),b=yield(n=="PUT"?nc:Kt)(this.fetch,`${this.url}/object/${x}`,d,Object.assign({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:v,id:b.Id,fullPath:b.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ve(d))return{data:null,error:d};throw d}})}upload(n,r,i){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,i)})}uploadToSignedUrl(n,r,i,u){return ht(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",r);try{let y;const v=Object.assign({upsert:Dm.upsert},u),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&i instanceof Blob?(y=new FormData,y.append("cacheControl",v.cacheControl),y.append("",i)):typeof FormData<"u"&&i instanceof FormData?(y=i,y.append("cacheControl",v.cacheControl)):(y=i,x["cache-control"]=`max-age=${v.cacheControl}`,x["content-type"]=v.contentType);const b=yield nc(this.fetch,g.toString(),y,{headers:x});return{data:{path:d,fullPath:b.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(Ve(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(n,r){return ht(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const u=Object.assign({},this.headers);r?.upsert&&(u["x-upsert"]="true");const d=yield Kt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:u}),f=new URL(this.url+d.url),g=f.searchParams.get("token");if(!g)throw new mc("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:g},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}update(n,r,i){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,i)})}move(n,r,i){return ht(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}copy(n,r,i){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}createSignedUrl(n,r,i){return ht(this,void 0,void 0,function*(){try{let u=this._getFinalPath(n),d=yield Kt(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}createSignedUrls(n,r,i){return ht(this,void 0,void 0,function*(){try{const u=yield Kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),d=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}download(n,r){const u=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),f=d?`?${d}`:"",g=this._getFinalPath(n),y=()=>dl(this.fetch,`${this.url}/${u}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new uv(y,this.shouldThrowOnError)}info(n){return ht(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const i=yield dl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ac(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}exists(n){return ht(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield sv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i)&&i instanceof tc){const u=i.originalError;if([400,404].includes(u?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,r){const i=this._getFinalPath(n),u=[],d=r?.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&u.push(d);const g=typeof r?.transform<"u"?"render/image":"object",y=this.transformOptsToQueryString(r?.transform||{});y!==""&&u.push(y);let v=u.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${v}`)}}}remove(n){return ht(this,void 0,void 0,function*(){try{return{data:yield cg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}list(n,r,i){return ht(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},ov),r),{prefix:n||""});return{data:yield Kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},i),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}listV2(n,r){return ht(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield Kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const dv="2.75.0",fv={"X-Client-Info":`storage-js/${dv}`};var ms=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class hv{constructor(n,r={},i,u){this.shouldThrowOnError=!1;const d=new URL(n);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fv),r),this.fetch=og(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ms(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}getBucket(n){return ms(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}createBucket(n){return ms(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield Kt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}updateBucket(n,r){return ms(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}emptyBucket(n){return ms(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}deleteBucket(n){return ms(this,void 0,void 0,function*(){try{return{data:yield cg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}}class mv extends hv{constructor(n,r={},i,u){super(n,r,i,u)}from(n){return new cv(this.url,this.headers,n,this.fetch)}}const gv="2.75.0";let Nr="";typeof Deno<"u"?Nr="deno":typeof document<"u"?Nr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nr="react-native":Nr="node";const yv={"X-Client-Info":`supabase-js-${Nr}/${gv}`},pv={headers:yv},vv={schema:"public"},bv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xv={};var _v=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const wv=o=>{let n;return o?n=o:typeof fetch>"u"?n=eg:n=fetch,(...r)=>n(...r)},Sv=()=>typeof Headers>"u"?tg:Headers,jv=(o,n,r)=>{const i=wv(r),u=Sv();return(d,f)=>_v(void 0,void 0,void 0,function*(){var g;const y=(g=yield n())!==null&&g!==void 0?g:o;let v=new u(f?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${y}`),i(d,Object.assign(Object.assign({},f),{headers:v}))})};var Cv=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};function Av(o){return o.endsWith("/")?o:o+"/"}function Ev(o,n){var r,i;const{db:u,auth:d,realtime:f,global:g}=o,{db:y,auth:v,realtime:x,global:b}=n,_={db:Object.assign(Object.assign({},y),u),auth:Object.assign(Object.assign({},v),d),realtime:Object.assign(Object.assign({},x),f),storage:{},global:Object.assign(Object.assign(Object.assign({},b),g),{headers:Object.assign(Object.assign({},(r=b?.headers)!==null&&r!==void 0?r:{}),(i=g?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Cv(this,void 0,void 0,function*(){return""})};return o.accessToken?_.accessToken=o.accessToken:delete _.accessToken,_}function Tv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Av(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dg="2.75.0",xs=30*1e3,sc=3,Qo=sc*xs,Nv="http://localhost:9999",Ov="supabase.auth.token",Rv={"X-Client-Info":`gotrue-js/${dg}`},rc="X-Supabase-Api-Version",fg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Uv=600*1e3;class Mr extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function W(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class zv extends Mr{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function Mv(o){return W(o)&&o.name==="AuthApiError"}class gn extends Mr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Qa extends Mr{constructor(n,r,i,u){super(n,i,u),this.name=r,this.status=i}}class $a extends Qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dv(o){return W(o)&&o.name==="AuthSessionMissingError"}class gs extends Qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rl extends Qa{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class il extends Qa{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bv(o){return W(o)&&o.name==="AuthImplicitGrantRedirectError"}class Bm extends Qa{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ic extends Qa{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Ko(o){return W(o)&&o.name==="AuthRetryableFetchError"}class Lm extends Qa{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class lc extends Qa{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qm=` 	
\r=`.split(""),Lv=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<qm.length;n+=1)o[qm[n].charCodeAt(0)]=-2;for(let n=0;n<fl.length;n+=1)o[fl[n].charCodeAt(0)]=n;return o})();function Hm(o,n,r){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(fl[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(fl[i]),n.queuedBits-=6}}function hg(o,n,r){const i=Lv[o];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function $m(o){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{$v(f,i,r)};for(let f=0;f<o.length;f+=1)hg(o.charCodeAt(f),u,d);return n.join("")}function qv(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Hv(o,n){for(let r=0;r<o.length;r+=1){let i=o.charCodeAt(r);if(i>55295&&i<=56319){const u=(i-55296)*1024&65535;i=(o.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}qv(i,n)}}function $v(o,n,r){if(n.utf8seq===0){if(o<=127){r(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ss(o){const n=[],r={queue:0,queuedBits:0},i=u=>{n.push(u)};for(let u=0;u<o.length;u+=1)hg(o.charCodeAt(u),r,i);return new Uint8Array(n)}function Gv(o){const n=[];return Hv(o,r=>n.push(r)),new Uint8Array(n)}function yn(o){const n=[],r={queue:0,queuedBits:0},i=u=>{n.push(u)};return o.forEach(u=>Hm(u,r,i)),Hm(null,r,i),n.join("")}function Vv(o){return Math.round(Date.now()/1e3)+o}function Yv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const St=()=>typeof window<"u"&&typeof document<"u",dn={tested:!1,writable:!1},mg=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dn.tested)return dn.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),dn.tested=!0,dn.writable=!0}catch{dn.tested=!0,dn.writable=!1}return dn.writable};function Qv(o){const n={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return r.searchParams.forEach((i,u)=>{n[u]=i}),n}const gg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>vn(async()=>{const{default:i}=await Promise.resolve().then(()=>Cs);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Kv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",_s=async(o,n,r)=>{await o.setItem(n,JSON.stringify(r))},fn=async(o,n)=>{const r=await o.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ha=async(o,n)=>{await o.removeItem(n)};class gl{constructor(){this.promise=new gl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}gl.promiseConstructor=Promise;function Xo(o){const n=o.split(".");if(n.length!==3)throw new lc("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!kv.test(n[i]))throw new lc("JWT not in base64url format");return{header:JSON.parse($m(n[0])),payload:JSON.parse($m(n[1])),signature:Ss(n[2]),raw:{header:n[0],payload:n[1]}}}async function Xv(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Jv(o,n){return new Promise((i,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await o(d);if(!n(d,null,f)){i(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function Zv(o){return("0"+o.toString(16)).substr(-2)}function Pv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let u="";for(let d=0;d<56;d++)u+=r.charAt(Math.floor(Math.random()*i));return u}return crypto.getRandomValues(n),Array.from(n,Zv).join("")}async function Iv(o){const r=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(i);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Wv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await Iv(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ys(o,n,r=!1){const i=Pv();let u=i;r&&(u+="/PASSWORD_RECOVERY"),await _s(o,`${n}-code-verifier`,u);const d=await Wv(i);return[d,i===d?"plain":"s256"]}const Fv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eb(o){const n=o.headers.get(rc);if(!n||!n.match(Fv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function tb(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function ab(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ps(o){if(!nb.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jo(){const o={};return new Proxy(o,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gm(o){return JSON.parse(JSON.stringify(o))}var sb=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)n.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(r[i[u]]=o[i[u]]);return r};const hn=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),rb=[502,503,504];async function Vm(o){var n;if(!Kv(o))throw new ic(hn(o),0);if(rb.includes(o.status))throw new ic(hn(o),o.status);let r;try{r=await o.json()}catch(d){throw new gn(hn(d),d)}let i;const u=eb(o);if(u&&u.getTime()>=fg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Lm(hn(r),o.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new $a}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Lm(hn(r),o.status,r.weak_password.reasons);throw new zv(hn(r),o.status||500,i)}const ib=(o,n,r,i)=>{const u={method:o,headers:n?.headers||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(i),Object.assign(Object.assign({},u),r))};async function te(o,n,r,i){var u;const d=Object.assign({},i?.headers);d[rc]||(d[rc]=fg["2024-01-01"].name),i?.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const f=(u=i?.query)!==null&&u!==void 0?u:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",y=await lb(o,n,r+g,{headers:d,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(y):{data:Object.assign({},y),error:null}}async function lb(o,n,r,i,u,d){const f=ib(n,i,u,d);let g;try{g=await o(r,Object.assign({},f))}catch(y){throw console.error(y),new ic(hn(y),0)}if(g.ok||await Vm(g),i?.noResolveJson)return g;try{return await g.json()}catch(y){await Vm(y)}}function qt(o){var n;let r=null;cb(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=Vv(o.expires_in)));const i=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:r,user:i},error:null}}function Ym(o){const n=qt(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=o.weak_password),n}function Ga(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function ub(o){return{data:o,error:null}}function ob(o){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:u,verification_type:d}=o,f=sb(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:r,hashed_token:i,redirect_to:u,verification_type:d},y=Object.assign({},f);return{data:{properties:g,user:y},error:null}}function Qm(o){return o}function cb(o){return o.access_token&&o.refresh_token&&o.expires_in}const Zo=["global","local","others"];var db=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)n.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(r[i[u]]=o[i[u]]);return r};class fb{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=gg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Zo[0]){if(Zo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zo.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ga})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=db(n,["options"]),u=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(u.new_email=i?.newEmail,delete u.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:ob,redirectTo:r?.redirectTo})}catch(r){if(W(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ga})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,u,d,f,g,y;try{const v={nextPage:null,lastPage:0,total:0},x=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Qm});if(x.error)throw x.error;const b=await x.json(),_=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(y=(g=x.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return S.length>0&&(S.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(C.split(";")[1].split("=")[1]);v[`${B}Page`]=R}),v.total=parseInt(_)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(W(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){ps(n);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ga})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){ps(n);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Ga})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){ps(n);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ga})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){ps(n.userId);try{const{data:r,error:i}=await te(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:i}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteFactor(n){ps(n.userId),ps(n.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,u,d,f,g,y;try{const v={nextPage:null,lastPage:0,total:0},x=await te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Qm});if(x.error)throw x.error;const b=await x.json(),_=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(y=(g=x.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return S.length>0&&(S.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(C.split(";")[1].split("=")[1]);v[`${B}Page`]=R}),v.total=parseInt(_)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(W(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}}function Km(o={}){return{getItem:n=>o[n]||null,setItem:(n,r)=>{o[n]=r},removeItem:n=>{delete o[n]}}}const vs={debug:!!(globalThis&&mg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class hb extends yg{}async function mb(o,n,r){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async u=>{if(u){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await r()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(n===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new hb(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(vs.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function gb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pg(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function yb(o){return parseInt(o,16)}function pb(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function vb(o){var n;const{chainId:r,domain:i,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:g,requestId:y,resources:v,scheme:x,uri:b,version:_}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const S=pg(o.address),C=x?`${x}://${i}`:i,R=o.statement?`${o.statement}
`:"",B=`${C} wants you to sign in with your Ethereum account:
${S}

${R}`;let G=`URI: ${b}
Version: ${_}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(G+=`
Expiration Time: ${u.toISOString()}`),g&&(G+=`
Not Before: ${g.toISOString()}`),y&&(G+=`
Request ID: ${y}`),v){let H=`
Resources:`;for(const q of v){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);H+=`
- ${q}`}G+=H}return`${B}
${G}`}class Ge extends Error{constructor({message:n,code:r,cause:i,name:u}){var d;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(d=u??(i instanceof Error?i.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class hl extends Ge{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function bb({error:o,options:n}){var r,i,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((i=d.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Ge({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(bg(f)){if(d.rp.id!==f)return new Ge({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function xb({error:o,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Ge({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const i=window.location.hostname;if(bg(i)){if(r.rpId!==i)return new Ge({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}var vg=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)n.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(r[i[u]]=o[i[u]]);return r};class _b{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const wb=new _b;function Sb(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:r,excludeCredentials:i}=o,u=vg(o,["challenge","user","excludeCredentials"]),d=Ss(n).buffer,f=Object.assign(Object.assign({},r),{id:Ss(r.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:d,user:f});if(i&&i.length>0){g.excludeCredentials=new Array(i.length);for(let y=0;y<i.length;y++){const v=i[y];g.excludeCredentials[y]=Object.assign(Object.assign({},v),{id:Ss(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return g}function jb(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:r}=o,i=vg(o,["challenge","allowCredentials"]),u=Ss(n).buffer,d=Object.assign(Object.assign({},i),{challenge:u});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Ss(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function Cb(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:yn(new Uint8Array(o.response.attestationObject)),clientDataJSON:yn(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Ab(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,i=o.getClientExtensionResults(),u=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:yn(new Uint8Array(u.authenticatorData)),clientDataJSON:yn(new Uint8Array(u.clientDataJSON)),signature:yn(new Uint8Array(u.signature)),userHandle:u.userHandle?yn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function bg(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Xm(){var o,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Eb(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new hl("Browser returned unexpected credential type",n)}:{data:null,error:new hl("Empty credential response",n)}}catch(n){return{data:null,error:bb({error:n,options:o})}}}async function Tb(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new hl("Browser returned unexpected credential type",n)}:{data:null,error:new hl("Empty credential response",n)}}catch(n){return{data:null,error:xb({error:n,options:o})}}}const Nb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Ob={userVerification:"preferred",hints:["security-key"]};function ml(...o){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),i={};for(const u of o)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))i[d]=f;else if(r(f))i[d]=f;else if(n(f)){const g=i[d];n(g)?i[d]=ml(g,f):i[d]=ml(f)}else i[d]=f}return i}function Rb(o,n){return ml(Nb,o,n||{})}function kb(o,n){return ml(Ob,o,n||{})}class Ub{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:u},d){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:g};const y=u??wb.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${i}`),v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=Rb(f.webauthn.credential_options.publicKey,d?.create),{data:x,error:b}=await Eb({publicKey:v,signal:y});return x?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}case"request":{const v=kb(f.webauthn.credential_options.publicKey,d?.request),{data:x,error:b}=await Tb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:y}));return x?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}}}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u}},d){if(!r)return{data:null,error:new Mr("rpId is required for WebAuthn authentication")};try{if(!Xm())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:u},{request:d});if(!f)return{data:null,error:g};const{webauthn:y}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:i,credential_response:y.credential_response}})}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u},d){if(!r)return{data:null,error:new Mr("rpId is required for WebAuthn registration")};try{if(!Xm())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(x=>{var b;return(b=x.data)===null||b===void 0?void 0:b.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:g};const{data:y,error:v}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:u},{create:d});return y?this._verify({factorId:f.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:i,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:v}}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in register",f)}}}}gb();const zb={url:Nv,storageKey:Ov,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Rv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jm(o,n,r){return await r()}const bs={};class Dr{get jwks(){var n,r;return(r=(n=bs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=bs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{cachedAt:n})}constructor(n){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dr.nextInstanceID,Dr.nextInstanceID+=1,this.instanceID>0&&St()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},zb),n);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new fb({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=gg(u.fetch),this.lock=u.lock||Jm,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:St()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=mb:this.lock=Jm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ub(this)},this.persistSession?(u.storage?this.storage=u.storage:mg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Km(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Km(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Qv(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),St()&&this.detectSessionInUrl&&i!=="none"){const{data:u,error:d}=await this._getSessionFromURL(r,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Bv(d)){const y=(n=d.details)===null||n===void 0?void 0:n.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?{error:r}:{error:new gn("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,u;try{const d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:qt}),{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const y=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:v,session:y},error:null}}catch(d){if(W(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var r,i,u;try{let d;if("email"in n){const{email:x,password:b,options:_}=n;let S=null,C=null;this.flowType==="pkce"&&([S,C]=await ys(this.storage,this.storageKey)),d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:x,password:b,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:S,code_challenge_method:C},xform:qt})}else if("phone"in n){const{phone:x,password:b,options:_}=n;d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:b,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(u=_?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:qt})}else throw new rl("You must provide either an email or phone number and a password");const{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const y=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:v,session:y},error:null}}catch(d){if(W(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let r;if("email"in n){const{email:d,password:f,options:g}=n;r=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ym})}else if("phone"in n){const{phone:d,password:f,options:g}=n;r=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ym})}else throw new rl("You must provide either an email or phone number and a password");const{data:i,error:u}=r;return u?{data:{user:null,session:null},error:u}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new gs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:u})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,i,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,u,d,f,g,y,v,x,b,_;let S,C;if("message"in n)S=n.message,C=n.signature;else{const{chain:R,wallet:B,statement:G,options:H}=n;let q;if(St())if(typeof B=="object")q=B;else{const we=window;if("ethereum"in we&&typeof we.ethereum=="object"&&"request"in we.ethereum&&typeof we.ethereum.request=="function")q=we.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!H?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=B}const Y=new URL((r=H?.url)!==null&&r!==void 0?r:window.location.href),V=await q.request({method:"eth_requestAccounts"}).then(we=>we).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=pg(V[0]);let ee=(i=H?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ee){const we=await q.request({method:"eth_chainId"});ee=yb(we)}const ge={domain:Y.host,address:$,statement:G,uri:Y.href,version:"1",chainId:ee,nonce:(u=H?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=H?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=H?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=H?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(v=H?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(x=H?.signInWithEthereum)===null||x===void 0?void 0:x.resources};S=vb(ge),C=await q.request({method:"personal_sign",params:[pb(S),$]})}try{const{data:R,error:B}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:C},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:qt});if(B)throw B;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new gs}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:B})}catch(R){if(W(R))return{data:{user:null,session:null},error:R};throw R}}async signInWithSolana(n){var r,i,u,d,f,g,y,v,x,b,_,S;let C,R;if("message"in n)C=n.message,R=n.signature;else{const{chain:B,wallet:G,statement:H,options:q}=n;let Y;if(St())if(typeof G=="object")Y=G;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))Y=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=G}const V=new URL((r=q?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Y&&Y.signIn){const $=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),H?{statement:H}:null));let ee;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")ee=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)ee=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)C=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),R=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${V.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(u=(i=q?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=q?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((f=q?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((g=q?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((y=q?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((v=q?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((b=(x=q?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||b===void 0)&&b.length?["Resources",...q.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const $=await Y.signMessage(new TextEncoder().encode(C),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=$}}try{const{data:B,error:G}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:yn(R)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:qt});if(G)throw G;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new gs}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:G})}catch(B){if(W(B))return{data:{user:null,session:null},error:B};throw B}}async _exchangeCodeForSession(n){const r=await fn(this.storage,`${this.storageKey}-code-verifier`),[i,u]=(r??"").split("/");try{const{data:d,error:f}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:qt});if(await Ha(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new gs}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(W(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:r,provider:i,token:u,access_token:d,nonce:f}=n,g=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:qt}),{data:y,error:v}=g;return v?{data:{user:null,session:null},error:v}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new gs}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:v})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,i,u,d,f;try{if("email"in n){const{email:g,options:y}=n;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await ys(this.storage,this.storageKey));const{error:b}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=y?.data)!==null&&r!==void 0?r:{},create_user:(i=y?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:v,code_challenge_method:x},redirectTo:y?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:g,options:y}=n,{data:v,error:x}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=y?.data)!==null&&u!==void 0?u:{},create_user:(d=y?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(f=y?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:x}}throw new rl("You must provide either an email or phone number.")}catch(g){if(W(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(n){var r,i;try{let u,d;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,d=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:g}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:qt});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const y=f.session,v=f.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:v,session:y},error:null}}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(n){var r,i,u;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await ys(this.storage,this.storageKey)),await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:ub})}catch(d){if(W(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new $a;const{error:u}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:u}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:u,options:d}=n,{error:f}=await te(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:u,options:d}=n,{data:f,error:g}=await te(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new rl("You must provide either an email or phone number and a type")}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Qo:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await fn(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Jo()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(y,v,x)=>(!f&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,v,x))})}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ga}):await this._useSession(async r=>{var i,u,d;const{data:f,error:g}=r;if(g)throw g;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $a}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:Ga})})}catch(r){if(W(r))return Dv(r)&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:u,error:d}=i;if(d)throw d;if(!u.session)throw new $a;const f=u.session;let g=null,y=null;this.flowType==="pkce"&&n.email!=null&&([g,y]=await ys(this.storage,this.storageKey));const{data:v,error:x}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:y}),jwt:f.access_token,xform:Ga});if(x)throw x;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new $a;const r=Date.now()/1e3;let i=r,u=!0,d=null;const{payload:f}=Xo(n.access_token);if(f.exp&&(i=f.exp,u=i<=r),u){const{data:g,error:y}=await this._callRefreshToken(n.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:y}=await this._getUser(n.access_token);if(y)throw y;d={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(r){if(W(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:g}=r;if(g)throw g;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new $a;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!St())throw new il("No browser detected.");if(n.error||n.error_description||n.error_code)throw new il(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new il("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Bm("No code detected.");const{data:H,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:g,expires_at:y,token_type:v}=n;if(!d||!g||!f||!v)throw new il("No session defined in URL");const x=Math.round(Date.now()/1e3),b=parseInt(g);let _=x+b;y&&(_=parseInt(y));const S=_-x;S*1e3<=xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${b}s`);const C=_-b;x-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,_,x):x-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,_,x);const{data:R,error:B}=await this._getUser(d);if(B)throw B;const G={provider_token:i,provider_refresh_token:u,access_token:d,expires_in:b,expires_at:_,refresh_token:f,token_type:v,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:G,redirectType:n.type},error:null}}catch(i){if(W(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:u,error:d}=r;if(d)return{error:d};const f=(i=u.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:g}=await this.admin.signOut(f,n);if(g&&!(Mv(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return n!=="others"&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Yv(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,u;try{const{data:{session:d},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,r={}){let i=null,u=null;this.flowType==="pkce"&&([i,u]=await ys(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(W(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:u}=await this._useSession(async d=>{var f,g,y,v,x;const{data:b,error:_}=d;if(_)throw _;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",S,{headers:this.headers,jwt:(x=(v=b.session)===null||v===void 0?void 0:v.access_token)!==null&&x!==void 0?x:void 0})});if(u)throw u;return St()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(W(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:u,data:{session:d}}=r;if(u)throw u;const{options:f,provider:g,token:y,access_token:v,nonce:x}=n,b=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=d?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:g,id_token:y,access_token:v,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:qt}),{data:_,error:S}=b;return S?{data:{user:null,session:null},error:S}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new gs}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:S})}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,u;const{data:d,error:f}=r;if(f)throw f;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await Jv(async u=>(u>0&&await Xv(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:qt})),(u,d)=>{const f=200*Math.pow(2,u);return d&&Ko(d)&&Date.now()+f-i<xs})}catch(i){if(this._debug(r,"error",i),W(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),St()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const u=await fn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await _s(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f?.user)!==null&&n!==void 0?n:Jo()}else if(u&&!u.user&&!u.user){const f=await fn(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await Ha(this.storage,this.storageKey+"-user"),await _s(this.storage,this.storageKey,u)):u.user=Jo()}if(this._debug(i,"session from storage",u),!this._isValidSession(u)){this._debug(i,"session is not valid"),u!==null&&await this._removeSession();return}const d=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Qo;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${Qo}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Ko(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(i,"error",u),console.error(u);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new $a;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new gl;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new $a;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(u,"error",d),W(d)){const f={data:null,error:d};return Ko(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,i=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,r)}catch(y){d.push(y)}});if(await Promise.all(f),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await _s(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const d=Gm(u);await _s(this.storage,this.storageKey,d)}else{const u=Gm(r);await _s(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await Ha(this.storage,this.storageKey),await Ha(this.storage,this.storageKey+"-code-verifier"),await Ha(this.storage,this.storageKey+"-user"),this.userStorage&&await Ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),xs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((i.expires_at*1e3-n)/xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${xs}ms, refresh threshold is ${sc} ticks`),u<=sc&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof yg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const u=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&u.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,f]=await ys(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(i?.queryParams){const d=new URLSearchParams(i.queryParams);u.push(d.toString())}return i?.skipBrowserRedirect&&u.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:u,error:d}=r;return d?{data:null,error:d}:await te(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,u;const{data:d,error:f}=r;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:y,error:v}=await te(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=d?.session)===null||i===void 0?void 0:i.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&y.type==="totp"&&(!((u=y?.totp)===null||u===void 0)&&u.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:u,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Cb(n.webauthn.credential_response):Ab(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:y}=await te(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:y})})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:u,error:d}=r;if(d)return{data:null,error:d};const f=await te(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Sb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:jb(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=r?.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,i;const{data:{session:u},error:d}=n;if(d)return{data:null,error:d};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Xo(u.access_token);let g=null;f.aal&&(g=f.aal);let y=g;((i=(r=u.user.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(y="aal2");const x=f.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(g=>g.kid===n);if(i)return i;const u=Date.now();if(i=this.jwks.keys.find(g=>g.kid===n),i&&this.jwks_cached_at+Uv>u)return i;const{data:d,error:f}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,i=d.keys.find(g=>g.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:S,error:C}=await this.getSession();if(C||!S.session)return{data:null,error:C};i=S.session.access_token}const{header:u,payload:d,signature:f,raw:{header:g,payload:y}}=Xo(i);r?.allowExpired||tb(d.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!v){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:d,header:u,signature:f},error:null}}const x=ab(u.alg),b=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,b,f,Gv(`${g}.${y}`)))throw new lc("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}}Dr.nextInstanceID=0;const Mb=Dr;class Db extends Mb{constructor(n){super(n)}}var Bb=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(x){try{v(i.next(x))}catch(b){f(b)}}function y(x){try{v(i.throw(x))}catch(b){f(b)}}function v(x){x.done?d(x.value):u(x.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class Lb{constructor(n,r,i){var u,d,f;this.supabaseUrl=n,this.supabaseKey=r;const g=Tv(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const y=`sb-${g.hostname.split(".")[0]}-auth-token`,v={db:vv,realtime:xv,auth:Object.assign(Object.assign({},bv),{storageKey:y}),global:pv},x=Ev(i??{},v);this.storageKey=(u=x.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=x.global.headers)!==null&&d!==void 0?d:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=x.auth)!==null&&f!==void 0?f:{},this.headers,x.global.fetch),this.fetch=jv(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new zp(new URL("rest/v1",g).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new mv(this.storageUrl.href,this.headers,this.fetch,i?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new jp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,i)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Bb(this,void 0,void 0,function*(){var n,r;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:u,userStorage:d,storageKey:f,flowType:g,lock:y,debug:v},x,b){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Db({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:f,autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:u,userStorage:d,flowType:g,lock:y,debug:v,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Ip(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(n,r,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qb=(o,n,r)=>new Lb(o,n,r);function Hb(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Hb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $b="https://xtdudfccgbdanmmncwhn.supabase.co",Gb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",oe=qb($b,Gb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class Vb{createUserFromProfileData(n,r){return{id:n.id,email:n.email||"",displayName:r?.display_name||n.user_metadata?.display_name||n.email?.split("@")[0],username:r?.username||n.user_metadata?.username||n.email?.split("@")[0],profileCompleted:r?.profile_completed||!!n.user_metadata?.profile_completed,createdAt:new Date(n.created_at)}}async mapAuthUserToUser(n){try{const{data:r}=await oe.from("user_profiles").select("display_name, username, profile_completed").eq("id",n.id).single();return r&&typeof r=="object"?this.createUserFromProfileData(n,r):this.createUserFromProfileData(n)}catch{return this.createUserFromProfileData(n)}}async getCurrentUser(){try{const{data:{user:n},error:r}=await oe.auth.getUser();return r||!n?null:await this.mapAuthUserToUser(n)}catch{return null}}async signIn(n,r){try{const{data:i,error:u}=await oe.auth.signInWithPassword({email:n,password:r});return u?{success:!1,error:u.message}:{success:!0,data:{id:i.user.id,email:i.user.email||"",displayName:i.user.user_metadata?.display_name,createdAt:new Date(i.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(n,r){try{const i=`${window.location.origin}${window.location.pathname}`,{data:u,error:d}=await oe.auth.signUp({email:n,password:r,options:{emailRedirectTo:i}});return d?{success:!1,error:d.message}:u.user?{success:!0,data:{id:u.user.id,email:u.user.email||"",displayName:u.user.user_metadata?.display_name,createdAt:new Date(u.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:n}=await oe.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(n){const{data:{subscription:r}}=oe.auth.onAuthStateChange(async(i,u)=>{if(u?.user){const d=await this.mapAuthUserToUser(u.user);n(d)}else n(null)});return()=>r.unsubscribe()}async completeProfile(n,r,i){try{const{error:u}=await oe.from("user_profiles").update({display_name:r,username:i,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",n);if(u)return u.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:u.message};const{data:d,error:f}=await oe.auth.updateUser({data:{display_name:r,username:i,profile_completed:!0}});return f?{success:!1,error:f.message}:{success:!0,data:{id:d.user.id,email:d.user.email||"",displayName:r,username:i,profileCompleted:!0,createdAt:new Date(d.user.created_at)}}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Failed to complete profile"}}}buildProfileUpdates(n,r){const i={updated_at:new Date().toISOString()};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}buildAuthUpdates(n,r){const i={};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}async updateProfile(n,r,i){try{const u=this.buildProfileUpdates(r,i),{error:d}=await oe.from("user_profiles").update(u).eq("id",n);if(d)return d.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:d.message};const f=this.buildAuthUpdates(r,i),{data:g,error:y}=await oe.auth.updateUser({data:f});if(y)return{success:!1,error:y.message};const{data:v}=await oe.from("user_profiles").select("*").eq("id",n).single(),x=v;return{success:!0,data:{id:g.user.id,email:g.user.email||"",displayName:x?.display_name||g.user.user_metadata?.display_name,username:x?.username||g.user.user_metadata?.username,profileCompleted:x?.profile_completed||g.user.user_metadata?.profile_completed||!1,createdAt:new Date(g.user.created_at)}}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Failed to update profile"}}}async changePassword(n,r,i){try{const{data:u}=await oe.auth.getUser();if(!u.user?.email)return{success:!1,error:"User not found"};const{error:d}=await oe.auth.signInWithPassword({email:u.user.email,password:r});if(d)return{success:!1,error:"Current password is incorrect"};const{error:f}=await oe.auth.updateUser({password:i});return f?{success:!1,error:f.message}:{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Failed to change password"}}}async deleteAccount(n){try{const{error:r}=await oe.from("user_profiles").delete().eq("id",n);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class xg{async getCampaigns(n){try{const{data:r,error:i}=await oe.from("campaigns").select(`
          *,
          campaign_members!inner(
            role,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",n).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(d=>({id:d.id,name:d.name,description:d.description||void 0,createdBy:d.created_by,createdAt:new Date(d.created_at),updatedAt:new Date(d.updated_at),userRole:d.campaign_members[0]?.role,memberCount:d.member_count?.[0]?.count||0,isOwner:d.created_by===n}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(n){try{const{data:r,error:i}=await oe.from("campaigns").select("*").eq("id",n).single();return i?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(n,r,i=!1){try{const{data:u,error:d}=await oe.from("campaigns").insert({name:r.name,description:r.description,created_by:n}).select().single();if(d)return{success:!1,error:`Failed to create campaign: ${d.message}`};const{error:f}=await oe.from("campaign_members").insert({campaign_id:u.id,user_id:n,role:"admin"});if(f)return await oe.from("campaigns").delete().eq("id",u.id),{success:!1,error:`Failed to set up campaign admin: ${f.message}`};if(i){const{error:y}=await oe.from("campaign_members").insert({campaign_id:u.id,user_id:n,role:"gm"})}return{success:!0,data:{id:u.id,name:u.name,description:u.description||void 0,createdBy:u.created_by,createdAt:new Date(u.created_at),updatedAt:new Date(u.updated_at)}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(n,r){try{const{error:i}=await oe.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",n);return i?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(n){try{const{error:r}=await oe.from("campaigns").delete().eq("id",n);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(n){try{const{data:r,error:i}=await oe.from("campaign_members").select("id, user_id, role, created_at").eq("campaign_id",n).order("created_at",{ascending:!0});if(i)return{success:!1,error:"Failed to fetch campaign members"};const u=[];for(const d of r)try{const{data:f,error:g}=await oe.from("user_profiles").select("email, display_name, username").eq("id",d.user_id).single();let y,v;if(!g&&f){const x=f;y=x.email||`user_${d.user_id.slice(0,8)}@example.com`,v=x.display_name||x.username||void 0}else y=`user_${d.user_id.slice(0,8)}@example.com`,v=void 0;u.push({id:d.id,userId:d.user_id,email:y,displayName:v,role:d.role,joinedAt:new Date(d.created_at)})}catch{u.push({id:d.id,userId:d.user_id,email:`user_${d.user_id.slice(0,8)}@example.com`,displayName:void 0,role:d.role,joinedAt:new Date(d.created_at)})}return{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(n,r,i){try{const{data:u,error:d}=await oe.from("user_profiles").select("id").eq("email",r).single();if(d||!u)return{success:!1,error:"User not found with that email address"};const{data:f}=await oe.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",u.id).single();if(f)return{success:!1,error:"User is already a member of this campaign"};const{error:g}=await oe.from("campaign_members").insert({campaign_id:n,user_id:u.id,role:i});return g?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(n,r,i){try{const{error:u}=await oe.from("campaign_members").update({role:i}).eq("campaign_id",n).eq("user_id",r);return u?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(n,r){try{const{error:i}=await oe.from("campaign_members").delete().eq("campaign_id",n).eq("user_id",r);return i?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(n,r){try{const{data:i,error:u}=await oe.from("campaign_members").select("role").eq("campaign_id",n).eq("user_id",r).single();return u||!i?{success:!1,error:"User is not a member of this campaign"}:{success:!0,data:i.role}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(n,r){try{const{data:i,error:u}=await oe.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",r).single();return u?{success:!0,data:!1}:{success:!0,data:!!i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(n){try{const{data:r,error:i}=await oe.from("characters").select("*").eq("campaign_id",n).order("created_at",{ascending:!0});return i?{success:!1,error:i.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(n,r,i,u,d){try{const{data:f,error:g}=await oe.from("characters").insert({campaign_id:n,name:i,player_name:u,character_name:d,owner_id:r}).select().single();return g?{success:!1,error:g.message}:{success:!0,data:f}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(n,r){try{const{data:i,error:u}=await oe.from("characters").select("*, campaigns!inner(created_by)").eq("id",n).single();if(u)return{success:!1,error:"Character not found"};if(i.owner_id!==r&&i.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:d}=await oe.from("characters").delete().eq("id",n);return d?{success:!1,error:d.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class pn{static instance;_authRepository;_campaignRepository;_authService;_campaignService;constructor(){this._authRepository=new Vb,this._campaignRepository=new xg,this._authService=new vp(this._authRepository),this._campaignService=new bp(this._campaignRepository,this._authRepository)}static getInstance(){return pn.instance||(pn.instance=new pn),pn.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}}function Yb(){return pn.getInstance().authService}function _g(){return pn.getInstance().campaignService}const yl=()=>{const[o,n]=z.useState(null),[r,i]=z.useState(!0),u=Yb();return z.useEffect(()=>((async()=>{const C=await u.getCurrentUser();console.log("useAuth: getCurrentUser result:",C),n(C),i(!1)})(),u.onAuthStateChange(C=>{console.log("useAuth: onAuthStateChange triggered with user:",C),n(C),i(!1)})),[u]),{user:o,loading:r,signIn:async(_,S)=>{const C=await u.signIn(_,S);return C.success&&C.data?(n(C.data),{success:!0}):{success:!1,error:C.error}},signUp:async(_,S)=>{const C=await u.signUp(_,S);return C.success&&C.data?(n(C.data),{success:!0}):{success:!1,error:C.error}},signOut:async()=>{const _=await u.signOut();return _.success?(n(null),{success:!0}):{success:!1,error:_.error}},completeProfile:async _=>{const S=await u.completeProfile(_);return S.success&&S.data?(n(S.data),{success:!0,user:S.data}):{success:!1,error:S.error}},updateProfile:async _=>{const S=await u.updateProfile(_);return S.success&&S.data?(n(S.data),{success:!0,user:S.data}):{success:!1,error:S.error}},changePassword:async _=>{const S=await u.changePassword(_);return S.success?{success:!0}:{success:!1,error:S.error}},deleteAccount:async()=>{const _=await u.deleteAccount();return _.success?(n(null),{success:!0}):{success:!1,error:_.error}}}};function me({variant:o="default",size:n="md",className:r="",children:i,...u}){const f={default:"",primary:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",danger:"bg-red-600 hover:bg-red-700 text-white border-red-600",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"},g={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},y=["btn",f[o],g[n],r].filter(Boolean).join(" ");return h.jsx("button",{className:y,...u,children:i})}function Qb({icon:o,variant:n="default",className:r="",...i}){const u={default:"btn p-2",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"};return h.jsx("button",{className:`${u[n]} ${r}`,...i,children:o})}const Z=z.forwardRef(({label:o,type:n="text",className:r,required:i=!1,error:u,...d},f)=>{const g="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",y=`input w-full ${u?"border-red-500 focus:border-red-500":""}`,v=()=>{if(n==="textarea"){const b=d;return h.jsx("textarea",{ref:f,className:r||y,required:i,...b})}if(n==="select"){const{children:b,..._}=d;return h.jsx("select",{ref:f,className:r||"select",required:i,..._,children:b})}const x=d;return h.jsx("input",{ref:f,type:n,step:n==="number"?"1":void 0,className:r||y,required:i,...x})};return h.jsxs("div",{children:[o&&h.jsxs("label",{className:g,children:[o," ",i&&"*"]}),v(),u&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u})]})});Z.displayName="FormField";function Kb(){const[o,n]=z.useState("sign_in"),[r,i]=z.useState(""),[u,d]=z.useState(""),[f,g]=z.useState(!1),[y,v]=z.useState(""),{signIn:x,signUp:b}=yl(),_=async C=>{C.preventDefault(),g(!0),v("");try{let R;o==="sign_up"?(R=await b(r,u),R.success?v("Check your email for the confirmation link!"):v(R.error||"Sign up failed")):(R=await x(r,u),R.success||v(R.error||"Sign in failed"))}catch(R){v(R instanceof Error?R.message:"An error occurred")}finally{g(!1)}},S=()=>f?"Loading...":o==="sign_in"?"Sign In":"Sign Up";return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:o==="sign_in"?"Welcome Back":"Create Account"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:o==="sign_in"?"Sign in to your account":"Create a new account"})]}),h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[h.jsx("button",{type:"button",onClick:()=>n("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),h.jsx("button",{type:"button",onClick:()=>n("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),h.jsxs("form",{className:"space-y-4",onSubmit:_,children:[h.jsx(Z,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:r,onChange:C=>i(C.target.value),placeholder:"Enter your email"}),h.jsx(Z,{label:"Password",type:"password",autoComplete:o==="sign_up"?"new-password":"current-password",required:!0,value:u,onChange:C=>d(C.target.value),placeholder:"Enter your password"}),y&&h.jsx("div",{className:`p-3 rounded-xl text-sm ${y.includes("error")||y.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:y}),h.jsx(me,{type:"submit",disabled:f,variant:"primary",className:"w-full justify-center py-3",children:S()})]})]})]})})]})}const Xb=o=>{const n=[];let r="weak";o.length<8&&n.push("Password must be at least 8 characters long");const i=/[a-z]/.test(o),u=/[A-Z]/.test(o),d=/\d/.test(o),f=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);i||n.push("Password must contain at least one lowercase letter"),u||n.push("Password must contain at least one uppercase letter"),d||n.push("Password must contain at least one number"),f||n.push("Password must contain at least one special character");const g=[i,u,d,f].filter(Boolean).length;let y=0;o.length>=12?y=2:o.length>=8&&(y=1);const v=g+y;return v>=5?r="strong":v>=3&&(r="medium"),{isValid:n.length===0,errors:n,strength:r}},Jb=o=>{switch(o){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},Zb=o=>{switch(o){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},Pb=o=>o.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:o.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(o)?/^[_-]|[_-]$/.test(o)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function Ib({onComplete:o,loading:n=!1}){const[r,i]=z.useState(""),[u,d]=z.useState(""),[f,g]=z.useState({}),[y,v]=z.useState(!1),x=()=>{const S={};if(r.trim()?r.trim().length<2?S.displayName="Name must be at least 2 characters long":r.trim().length>50&&(S.displayName="Name must be less than 50 characters long"):S.displayName="Name is required",!u.trim())S.username="Username is required";else{const C=Pb(u.trim());C.isValid||(S.username=C.error||"Invalid username")}return g(S),Object.keys(S).length===0},b=async S=>{if(S.preventDefault(),!!x()){v(!0);try{const C=await o({displayName:r.trim(),username:u.trim().toLowerCase()});!C.success&&C.error&&(C.error.toLowerCase().includes("username")?g({username:C.error}):g({general:C.error}))}catch{g({general:"An unexpected error occurred. Please try again."})}finally{v(!1)}}},_=r.trim()&&u.trim()&&Object.keys(f).length===0;return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Complete Your Profile"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up your profile to start using Traveller Dashboard"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:h.jsx(Ur,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:"Welcome to Traveller Dashboard"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Let's set up your profile to get started"})]}),h.jsx("div",{className:"card",children:h.jsxs("form",{className:"space-y-4",onSubmit:b,children:[h.jsxs("div",{children:[h.jsx(Z,{label:"Your Name",type:"text",required:!0,value:r,onChange:S=>{i(S.target.value),f.displayName&&g(C=>({...C,displayName:""}))},placeholder:"Enter your first name or full name",error:f.displayName}),h.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This is how other players will see you in campaigns"})]}),h.jsxs("div",{children:[h.jsx(Z,{label:"Username",type:"text",required:!0,value:u,onChange:S=>{d(S.target.value),f.username&&g(C=>({...C,username:""}))},placeholder:"Choose a unique username",error:f.username}),h.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),f.general&&h.jsx("div",{className:"p-3 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",children:f.general}),h.jsx(me,{type:"submit",disabled:!_||y||n,variant:"primary",className:"w-full justify-center py-3",children:y||n?"Setting up...":"Complete Profile"})]})}),h.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:h.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const Wb=()=>{const[o,n]=z.useState([]),[r,i]=z.useState(!0),[u,d]=z.useState(null),f=_g(),g=z.useCallback(async()=>{try{i(!0),d(null);const b=await f.getCampaigns();b.success&&b.data?n(b.data):d(b.error||"Failed to fetch campaigns")}catch{d("An unexpected error occurred")}finally{i(!1)}},[f]),y=async b=>{try{d(null);const _=await f.createCampaign(b);return _.success?(await g(),{success:!0}):(d(_.error||"Failed to create campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return d(_),{success:!1,error:_}}},v=async(b,_)=>{try{d(null);const S=await f.updateCampaign(b,_);return S.success?(await g(),{success:!0}):(d(S.error||"Failed to update campaign"),{success:!1,error:S.error})}catch{const S="An unexpected error occurred";return d(S),{success:!1,error:S}}},x=async b=>{try{d(null);const _=await f.deleteCampaign(b);return _.success?(await g(),{success:!0}):(d(_.error||"Failed to delete campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return d(_),{success:!1,error:_}}};return z.useEffect(()=>{g()},[g]),{campaigns:o,loading:r,error:u,fetchCampaigns:g,createCampaign:y,updateCampaign:v,deleteCampaign:x}};function bn(o){const[n,r]=z.useState([]),[i,u]=z.useState(!1),[d,f]=z.useState(null),g=z.useMemo(()=>new xg,[]),y=z.useCallback(async b=>{if(b){u(!0),f(null);try{const _=await g.getCharactersByCampaign(b);if(_.success&&_.data&&_.data.length>0){const S=_.data.map(C=>({id:C.id,campaignId:C.campaign_id,displayName:C.name,playerName:C.player_name||"",characterName:C.character_name||"",ownerId:C.owner_id}));r(S)}else r([])}catch{r([]),f("Database connection failed - no characters available")}finally{u(!1)}}},[g]),v=z.useCallback(async(b,_,S)=>{if(!o)return{success:!1,error:"No campaign selected"};try{const C=`${b} – ${_}`,R=await g.createCharacterForCampaign(o,S,C,b,_);if(R.success&&R.data){const B={id:R.data.id,campaignId:R.data.campaign_id,displayName:R.data.name,playerName:b,characterName:_,ownerId:R.data.owner_id};return r(G=>[...G,B]),{success:!0,data:B}}return{success:!1,error:R.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[o,g]),x=z.useCallback(async(b,_)=>{try{const S=await g.deleteCharacter(b,_);return S.success?(r(C=>C.filter(R=>R.id!==b)),{success:!0}):{success:!1,error:S.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[g]);return z.useEffect(()=>{o?y(o):r([])},[o,y]),{characters:n,loading:i,error:d,createCharacter:v,deleteCharacter:x,refreshCharacters:()=>o&&y(o)}}const Fb=()=>{const[o,n]=z.useState([]),[r,i]=z.useState(!1),[u,d]=z.useState(null),f=_g(),g=async b=>{try{i(!0),d(null);const _=await f.getCampaignMembers(b);if(_.success&&_.data)return n(_.data),{success:!0,data:_.data};const S=_.error||"Failed to fetch members";return d(S),{success:!1,error:S}}catch{const _="An unexpected error occurred";return d(_),{success:!1,error:_}}finally{i(!1)}};return{members:o,loading:r,error:u,fetchMembers:g,addMemberByEmail:async(b,_,S)=>{try{d(null);const C=await f.addMemberByEmail(b,_,S);if(C.success)return await g(b),{success:!0};const R=C.error||"Failed to add member";return d(R),{success:!1,error:R}}catch{const C="An unexpected error occurred";return d(C),{success:!1,error:C}}},updateMemberRole:async(b,_,S)=>{try{d(null);const C=await f.updateMemberRole(b,_,S);if(C.success)return await g(b),{success:!0};const R=C.error||"Failed to update member role";return d(R),{success:!1,error:R}}catch{const C="An unexpected error occurred";return d(C),{success:!1,error:C}}},removeMember:async(b,_)=>{try{d(null);const S=await f.removeMember(b,_);if(S.success)return await g(b),{success:!0};const C=S.error||"Failed to remove member";return d(C),{success:!1,error:C}}catch{const S="An unexpected error occurred";return d(S),{success:!1,error:S}}}}};function zt({isOpen:o,onClose:n,title:r,children:i,maxWidth:u="md"}){if(z.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),z.useEffect(()=>{const f=g=>{g.key==="Escape"&&n()};if(o)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[o,n]),!o)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f=>{f.target===f.currentTarget&&n()},children:h.jsxs("div",{className:`card w-full ${d[u]}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:r}),h.jsx(Qb,{icon:h.jsx(Pm,{size:20}),onClick:n,"aria-label":"Close modal"})]}),i]})})}function Ya({onCancel:o,onConfirm:n,confirmText:r="Confirm",cancelText:i="Cancel",confirmVariant:u="primary",confirmDisabled:d=!1,confirmType:f="button",isLoading:g=!1,children:y}){return y?h.jsx("div",{className:"flex gap-2 mt-6",children:y}):h.jsxs("div",{className:"flex gap-2 mt-6",children:[o&&h.jsx(me,{onClick:o,variant:"ghost",className:"flex-1 justify-center",disabled:g,children:i}),(n||f==="submit")&&h.jsx(me,{onClick:f==="submit"?void 0:n,variant:u,className:"flex-1 justify-center",disabled:g||d,type:f,children:r})]})}function ex({size:o="md",className:n=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return h.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[o]} ${n}`,role:"status","aria-label":"Loading"})}function tx({message:o="Loading..."}){return h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[h.jsx(ex,{size:"lg",className:"mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:o})]})}function ax({campaign:o,onUpdateCampaign:n,onDeleteCampaign:r,onGetMembers:i,onAddMember:u,onRemoveMember:d,onClose:f}){const[g,y]=z.useState(!1),[v,x]=z.useState(!1),[b,_]=z.useState(!1),[S,C]=z.useState(!1),[R,B]=z.useState([]),[G,H]=z.useState(!1),[q,Y]=z.useState(!1),[V,$]=z.useState(o.name),[ee,ge]=z.useState(o.description||""),[we,nt]=z.useState(!1),[se,de]=z.useState(!1),[st,Ze]=z.useState(""),[Pe,U]=z.useState("player"),[L,Q]=z.useState(null),pe=async I=>{if(I.preventDefault(),!!V.trim())try{nt(!0),await n(o.id,{name:V,description:ee||null}),y(!1)}finally{nt(!1)}},ve=async()=>{try{de(!0),await r(o.id),x(!1),f?.()}finally{de(!1)}},Me=async()=>{try{H(!0);const I=await i(o.id);I&&B(I),_(!0)}finally{H(!1)}},Se=async I=>{if(I.preventDefault(),!!st.trim()){Y(!0),Q(null);try{const be=await u(o.id,st.trim(),Pe);if(be.success){const Ie=await i(o.id);Ie&&B(Ie),Ze(""),U("player"),C(!1)}else Q(be.error||"Failed to add member")}catch(be){Q(be instanceof Error?be.message:"An unexpected error occurred")}finally{Y(!1)}}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:o.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o.description||"No description provided"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),h.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[o.member_count||0," member(s)"]})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(me,{onClick:()=>y(!0),className:"flex items-center gap-2 justify-center",children:[h.jsx(oc,{className:"w-4 h-4"}),"Edit Campaign"]}),h.jsxs(me,{onClick:Me,disabled:G,className:"flex items-center gap-2 justify-center",children:[h.jsx(zr,{className:"w-4 h-4"}),G?"Loading...":"Manage Members"]})]})]}),h.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[h.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),h.jsxs(me,{onClick:()=>x(!0),variant:"danger",className:"flex items-center gap-2",children:[h.jsx(cc,{className:"w-4 h-4"}),"Delete Campaign"]})]}),h.jsx(zt,{isOpen:g,onClose:()=>y(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),h.jsx("input",{type:"text",value:V,onChange:I=>$(I.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:ee,onChange:I=>ge(I.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(Ya,{onCancel:()=>y(!1),cancelText:"Cancel",confirmText:we?"Updating...":"Update",confirmDisabled:we||!V.trim(),confirmType:"submit",isLoading:we})]})}),h.jsxs(zt,{isOpen:v,onClose:()=>x(!1),title:"Delete Campaign",children:[h.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',o.name,'"? This action cannot be undone and will remove all campaign data and members.']}),h.jsx(Ya,{onCancel:()=>x(!1),onConfirm:ve,cancelText:"Cancel",confirmText:se?"Deleting...":"Delete",confirmVariant:"danger",isLoading:se})]}),h.jsx(zt,{isOpen:b,onClose:()=>_(!1),title:"Campaign Members",maxWidth:"lg",children:h.jsxs("div",{className:"space-y-4",children:[R.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):h.jsx("div",{className:"space-y-3",children:R.map(I=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:I.user_profiles.display_name||"No Name"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:I.user_profiles.email})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:I.role}),I.role!=="admin"&&h.jsx(me,{size:"sm",variant:"danger",onClick:()=>d(o.id,I.user_id),children:"Remove"})]})]},I.id))}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:h.jsxs(me,{variant:"primary",className:"w-full justify-center",onClick:()=>C(!0),children:[h.jsx(Ur,{className:"w-4 h-4"}),"Add Member"]})})]})}),h.jsx(zt,{isOpen:S,onClose:()=>{C(!1),Ze(""),U("player"),Q(null)},title:"Add Campaign Member",children:h.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),h.jsx("input",{type:"email",value:st,onChange:I=>Ze(I.target.value),className:"input w-full",placeholder:"Enter member's email",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),h.jsxs("select",{value:Pe,onChange:I=>U(I.target.value),className:"input w-full",children:[h.jsx("option",{value:"player",children:"Player"}),h.jsx("option",{value:"gm",children:"Game Master (GM)"}),h.jsx("option",{value:"admin",children:"Administrator"})]})]}),L&&h.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:L})}),h.jsx(Ya,{onCancel:()=>{C(!1),Ze(""),U("player"),Q(null)},cancelText:"Cancel",confirmText:q?"Adding...":"Add Member",confirmDisabled:q||!st.trim(),confirmType:"submit",isLoading:q})]})})]})}function nx(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function sx({campaign:o,onViewCampaign:n,onDeleteCharacter:r}){const{characters:i,loading:u,error:d}=bn(o.id);return u?h.jsxs("div",{className:"animate-pulse p-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):d?h.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",d]}):h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:o.name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," character(s)"]})]}),o.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${nx(o.userRole)}`,children:o.userRole.toUpperCase()})]}),i.length===0?h.jsxs("div",{className:"text-center py-6",children:[h.jsx(zr,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):h.jsx("div",{className:"space-y-3 mb-4",children:i.map(f=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:f.displayName}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",f.playerName]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(me,{size:"sm",onClick:()=>n(o.id),title:"View character details in campaign",children:h.jsx(oc,{className:"w-4 h-4"})}),h.jsx(me,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>r(f.id,f.displayName,o.id),children:h.jsx(cc,{className:"w-4 h-4"})})]})]},f.id))}),h.jsx("div",{className:"flex gap-2",children:h.jsxs(me,{onClick:()=>n(o.id),className:"flex items-center gap-2 flex-1",children:[h.jsx(zr,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function rx({campaigns:o,onViewCampaign:n}){const{user:r}=yl(),[i,u]=z.useState(!1),[d,f]=z.useState(""),[g,y]=z.useState(""),[v,x]=z.useState(""),[b,_]=z.useState(!1),[S,C]=z.useState(null),[R,B]=z.useState(!1),[G,H]=z.useState(null),[q,Y]=z.useState(!1),{createCharacter:V}=bn(d||""),{deleteCharacter:$}=bn(G?.campaignId||""),ee=o.filter(se=>se.memberCount&&se.memberCount>0),ge=async se=>{if(se.preventDefault(),!(!g.trim()||!v.trim()||!d))try{_(!0),C(null);const de=await V(g.trim(),v.trim(),"");de.success?(y(""),x(""),f(""),u(!1)):C(de.error||"Failed to create character")}finally{_(!1)}},we=(se,de,st)=>{H({id:se,name:de,campaignId:st}),B(!0)},nt=async()=>{if(!(!G||!r))try{Y(!0);const se=await $(G.id,r.id);se.success?(B(!1),H(null)):C(se.error||"Failed to delete character")}finally{Y(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:ee.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ee.reduce((se,de)=>se+(de.memberCount||0),0)}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(me,{onClick:()=>u(!0),disabled:o.length===0,className:"flex items-center gap-2 justify-center",children:[h.jsx(Ur,{className:"w-4 h-4"}),"Create New Character"]}),h.jsxs(me,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[h.jsx(oc,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),o.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),ee.length===0?h.jsxs("div",{className:"card text-center py-8",children:[h.jsx(zr,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),h.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),h.jsxs(me,{onClick:()=>u(!0),disabled:o.length===0,className:"flex items-center gap-2",children:[h.jsx(Ur,{className:"w-4 h-4"}),"Create Character"]})]}):h.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:ee.map(se=>h.jsx(sx,{campaign:se,onViewCampaign:n,onDeleteCharacter:we},se.id))})]}),h.jsx(zt,{isOpen:i,onClose:()=>u(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[S&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:S}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:d,onChange:se=>f(se.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),o.map(se=>h.jsx("option",{value:se.id,children:se.name},se.id))]})]}),h.jsx(Z,{label:"Player Name",value:g,onChange:se=>y(se.target.value),placeholder:"e.g., John Smith",required:!0}),h.jsx(Z,{label:"Character Name",value:v,onChange:se=>x(se.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),h.jsx(Ya,{onCancel:()=>u(!1),cancelText:"Cancel",confirmText:b?"Creating...":"Create",confirmDisabled:b||!g.trim()||!v.trim()||!d,confirmType:"submit",isLoading:b})]})}),h.jsx(zt,{isOpen:R,onClose:()=>B(!1),title:"Delete Character",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:h.jsx(cc,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),h.jsxs("div",{className:"flex-grow",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',G?.name,'"?']}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),h.jsx(Ya,{onCancel:()=>B(!1),cancelText:"Cancel",confirmText:q?"Deleting...":"Delete",confirmDisabled:q,onConfirm:nt,confirmVariant:"danger",isLoading:q})]})})]})}function ix({user:o,onSettings:n,onSignOut:r}){const[i,u]=z.useState(!1),d=z.useRef(null);z.useEffect(()=>{const g=y=>{d.current&&!d.current.contains(y.target)&&u(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),z.useEffect(()=>{const g=y=>{y.key==="Escape"&&u(!1)};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[]);const f=o.displayName||o.username||o.email.split("@")[0];return h.jsxs("div",{className:"relative",ref:d,children:[h.jsxs("button",{onClick:()=>u(!i),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-expanded":i,"aria-haspopup":"true",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:h.jsx(ol,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),h.jsx("span",{className:"hidden sm:block max-w-24 truncate",children:f}),h.jsx(Xy,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&h.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-gray-200 dark:border-zinc-700 py-1 z-50",children:[h.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:h.jsx(ol,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:f}),o.username&&h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",o.username]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o.email})]})]})}),h.jsxs("div",{className:"py-1",children:[h.jsxs("button",{onClick:()=>{u(!1),n()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors",children:[h.jsx(Im,{className:"w-4 h-4 mr-3"}),"Account Settings"]}),h.jsxs("button",{onClick:()=>{u(!1),r()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors",children:[h.jsx(Jy,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})}function lx({isOpen:o,onClose:n,user:r,onUpdateProfile:i,onChangePassword:u,onDeleteAccount:d}){const[f,g]=z.useState("profile"),[y,v]=z.useState(!1),[x,b]=z.useState(null),[_,S]=z.useState(r.displayName||""),[C,R]=z.useState(r.username||""),[B,G]=z.useState(""),[H,q]=z.useState(""),[Y,V]=z.useState(""),[$,ee]=z.useState(!1),[ge,we]=z.useState(!1),[nt,se]=z.useState(!1),de=Xb(H),st=async L=>{L.preventDefault(),v(!0),b(null);try{await i({displayName:_.trim()||void 0,username:C.trim()||void 0}),b({type:"success",text:"Profile updated successfully!"})}catch(Q){b({type:"error",text:Q instanceof Error?Q.message:"Failed to update profile"})}finally{v(!1)}},Ze=async L=>{if(L.preventDefault(),v(!0),b(null),!de.isValid){b({type:"error",text:"Please fix the password requirements"}),v(!1);return}if(H!==Y){b({type:"error",text:"New passwords do not match"}),v(!1);return}try{await u({currentPassword:B,newPassword:H}),b({type:"success",text:"Password changed successfully!"}),G(""),q(""),V("")}catch(Q){b({type:"error",text:Q instanceof Error?Q.message:"Failed to change password"})}finally{v(!1)}},Pe=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&d()},U=[{id:"profile",label:"Profile",icon:ol},{id:"password",label:"Password",icon:Zy},{id:"danger",label:"Danger Zone",icon:hm}];return h.jsx(zt,{isOpen:o,onClose:n,title:"Account Settings",maxWidth:"xl",children:h.jsxs("div",{className:"flex h-[32rem]",children:[h.jsx("div",{className:"w-56 border-r border-gray-200 dark:border-zinc-700 pr-6",children:h.jsx("nav",{className:"space-y-1",children:U.map(L=>{const Q=L.icon;return h.jsxs("button",{onClick:()=>g(L.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f===L.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:[h.jsx(Q,{className:"w-4 h-4 mr-3"}),L.label]},L.id)})})}),h.jsxs("div",{className:"flex-1 pl-8",children:[x&&h.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${x.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:x.text}),f==="profile"&&h.jsxs("form",{onSubmit:st,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),h.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsx(Py,{className:"w-4 h-4 text-gray-400 mr-3"}),h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),h.jsx(Z,{label:"Display Name",type:"text",value:_,onChange:L=>S(L.target.value),placeholder:"Enter your display name"}),h.jsx(Z,{label:"Username",type:"text",value:C,onChange:L=>R(L.target.value),placeholder:"Enter your username"}),h.jsx(me,{type:"submit",disabled:y,className:"w-full",children:y?"Updating...":"Update Profile"})]}),f==="password"&&h.jsxs("form",{onSubmit:Ze,className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Z,{label:"Current Password",type:$?"text":"password",value:B,onChange:L=>G(L.target.value),placeholder:"Enter your current password",required:!0}),h.jsx("button",{type:"button",onClick:()=>ee(!$),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:$?h.jsx(zo,{className:"w-4 h-4"}):h.jsx(Mo,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Z,{label:"New Password",type:ge?"text":"password",value:H,onChange:L=>q(L.target.value),placeholder:"Enter your new password",required:!0}),h.jsx("button",{type:"button",onClick:()=>we(!ge),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ge?h.jsx(zo,{className:"w-4 h-4"}):h.jsx(Mo,{className:"w-4 h-4"})})]}),H&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Password Strength:"}),h.jsx("span",{className:`text-sm font-medium ${Jb(de.strength)}`,children:Zb(de.strength)})]}),h.jsx("div",{className:"space-y-1 text-xs",children:de.errors.map((L,Q)=>h.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[h.jsx("span",{className:"mr-2",children:"✗"}),L]},Q))})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Z,{label:"Confirm New Password",type:nt?"text":"password",value:Y,onChange:L=>V(L.target.value),placeholder:"Confirm your new password",required:!0}),h.jsx("button",{type:"button",onClick:()=>se(!nt),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:nt?h.jsx(zo,{className:"w-4 h-4"}):h.jsx(Mo,{className:"w-4 h-4"})})]}),h.jsx(me,{type:"submit",disabled:y||!de.isValid||H!==Y,className:"w-full",children:y?"Changing Password...":"Change Password"})]}),f==="danger"&&h.jsx("div",{className:"space-y-6",children:h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx(hm,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),h.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),h.jsx("div",{className:"mt-4",children:h.jsx(me,{variant:"danger",onClick:Pe,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function ux({isOpen:o,onClose:n,onCreateCampaign:r}){const[i,u]=z.useState(""),[d,f]=z.useState(""),[g,y]=z.useState(!1),[v,x]=z.useState(!1),[b,_]=z.useState([]),[S,C]=z.useState(""),[R,B]=z.useState("player"),G=async V=>{if(V.preventDefault(),!!i.trim())try{x(!0),(await r({name:i.trim(),description:d.trim()||void 0,creatorIsAlsoGM:g,initialMembers:b.length>0?b:void 0})).success&&(u(""),f(""),y(!1),_([]),C(""),B("player"))}finally{x(!1)}},H=()=>{S.trim()&&(b.some(V=>V.email.toLowerCase()===S.toLowerCase())||(_([...b,{email:S.trim(),role:R}]),C(""),B("player")))},q=V=>{_(b.filter(($,ee)=>ee!==V))},Y=()=>{u(""),f(""),y(!1),_([]),C(""),B("player"),n()};return h.jsx(zt,{isOpen:o,onClose:Y,title:"Create New Campaign",maxWidth:"lg",children:h.jsxs("form",{onSubmit:G,className:"space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Campaign Information"}),h.jsx(Z,{label:"Campaign Name",value:i,onChange:V=>u(V.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:d,onChange:V=>f(V.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"creatorIsAlsoGM",checked:g,onChange:V=>y(V.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),h.jsx("label",{htmlFor:"creatorIsAlsoGM",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Also be the Game Master"})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You will always be an Administrator with full campaign control. Check this if you also want to run the game as GM."})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Invite Players (Optional)"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add players to your campaign. They'll need to have accounts to join."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"flex-1",children:h.jsx("input",{type:"email",value:S,onChange:V=>C(V.target.value),placeholder:"player@example.com",className:"input w-full",onKeyDown:V=>{V.key==="Enter"&&(V.preventDefault(),H())}})}),h.jsxs("select",{value:R,onChange:V=>B(V.target.value),className:"input",children:[h.jsx("option",{value:"player",children:"Player"}),h.jsx("option",{value:"gm",children:"GM"}),h.jsx("option",{value:"admin",children:"Admin"})]}),h.jsx(me,{type:"button",onClick:H,disabled:!S.trim(),size:"sm",children:h.jsx(Ur,{className:"w-4 h-4"})})]}),b.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Initial Members (",b.length,")"]}),h.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.map((V,$)=>h.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-50",children:V.email}),h.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:V.role})]}),h.jsx("button",{type:"button",onClick:()=>q($),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:h.jsx(Pm,{className:"w-4 h-4"})})]},$))})]})]}),h.jsx(Ya,{onCancel:Y,cancelText:"Cancel",confirmText:v?"Creating...":"Create Campaign",confirmDisabled:v||!i.trim(),confirmType:"submit",isLoading:v})]})})}function wg(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Po({title:o,description:n,icon:r,onClick:i,disabled:u}){return h.jsx("div",{className:`card p-6 cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 ${u?"opacity-50 cursor-not-allowed":""}`,onClick:u?void 0:i,children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"flex-shrink-0 text-blue-600 dark:text-blue-400",children:r}),h.jsxs("div",{className:"flex-grow",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:o}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:n})]}),h.jsx("div",{className:"flex-shrink-0 text-gray-400 dark:text-gray-500",children:h.jsx(Fy,{className:"w-5 h-5"})})]})})}function ox({campaigns:o,onCampaignSelect:n}){const r=o.sort((i,u)=>u.updatedAt.getTime()-i.updatedAt.getTime()).slice(0,3);return h.jsxs("div",{className:"card p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),o.length>3&&h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," total"]})]}),r.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):h.jsx("div",{className:"space-y-3",children:r.map(i=>h.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer transition-colors",onClick:()=>n(i.id),children:[h.jsxs("div",{className:"flex-grow",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:i.name}),i.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${wg(i.userRole)}`,children:i.userRole.toUpperCase()})]}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.memberCount||0," member(s) • Updated"," ",i.updatedAt.toLocaleDateString()]})]}),h.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:h.jsx(Wy,{className:"w-4 h-4"})})]},i.id))})]})}function cx({campaign:o,onSelect:n,onEdit:r,onSettings:i}){return h.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),o.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${wg(o.userRole)}`,children:o.userRole.toUpperCase()})]}),o.description&&h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2",children:o.description}),h.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:[h.jsxs("span",{children:[o.memberCount||0," member(s)"]}),h.jsxs("span",{children:["Created ",o.createdAt.toLocaleDateString()]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(me,{size:"sm",onClick:()=>n(o.id),className:"flex-1",children:"Enter Campaign"}),h.jsx(me,{size:"sm",onClick:()=>r(o),children:h.jsx(ep,{className:"w-4 h-4"})}),h.jsx(me,{size:"sm",onClick:()=>i(o),children:h.jsx(Im,{className:"w-4 h-4"})})]})]})}function dx({campaign:o,onViewCampaign:n}){const{characters:r,loading:i}=bn(o.id);return i?h.jsx("div",{className:"card",children:h.jsxs("div",{className:"animate-pulse",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})}):h.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),h.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[r.length," CHARACTER",r.length!==1?"S":""]})]}),r.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(u=>h.jsxs("div",{className:"flex items-center text-sm",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),h.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:u.characterName||u.displayName})]},u.id)),r.length>3&&h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",r.length-3," more..."]})]})}),h.jsx(me,{size:"sm",onClick:()=>n(o.id),className:"w-full",children:"View Campaign"})]})}function fx({campaigns:o,onSelect:n,onEdit:r,onSettings:i}){return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(u=>h.jsx(cx,{campaign:u,onSelect:n,onEdit:r,onSettings:i},u.id))})]})}function hx({campaigns:o,onViewCampaign:n}){const r=o.filter(i=>i.memberCount&&i.memberCount>0);return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),r.length===0?h.jsx("div",{className:"card p-6 text-center",children:h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(i=>h.jsx(dx,{campaign:i,onViewCampaign:n},i.id))})]})}function mx({onCampaignSelect:o}){const{campaigns:n,loading:r,error:i,createCampaign:u,updateCampaign:d,deleteCampaign:f}=Wb(),{fetchMembers:g,addMemberByEmail:y,removeMember:v}=Fb(),{signOut:x,user:b,updateProfile:_,changePassword:S,deleteAccount:C}=yl(),[R,B]=z.useState(!1),[G,H]=z.useState(!1),[q,Y]=z.useState(""),[V,$]=z.useState(""),[ee,ge]=z.useState(""),[we,nt]=z.useState(!1),[se,de]=z.useState(null),[st,Ze]=z.useState(!1),[Pe,U]=z.useState(null),[L,Q]=z.useState(""),[pe,ve]=z.useState(""),[Me,Se]=z.useState(!1),[I,be]=z.useState(!1),[Ie,Mt]=z.useState(null),[wn,ha]=z.useState(!1),[ma,Sn]=z.useState(!1),{createCharacter:jn}=bn(q),Ts=async X=>{const Ee=await u(X);return Ee.success&&B(!1),Ee},Lr=async X=>{if(X.preventDefault(),!(!b||!V.trim()||!ee.trim()||!q))try{nt(!0),de(null);const Ee=await jn(V.trim(),ee.trim(),b.id);Ee.success?($(""),ge(""),Y(""),H(!1)):de(Ee.error||"Failed to create character")}finally{nt(!1)}},Xt=()=>{if(n.length===0){de("You need to create a campaign first before adding characters!"),setTimeout(()=>de(null),5e3);return}H(!0)},Ns=X=>{U(X),Q(X.name),ve(X.description||""),Ze(!0)},Os=async X=>{if(X.preventDefault(),!(!Pe||!L.trim()))try{Se(!0),await d(Pe.id,{name:L,description:pe||void 0}),Ze(!1),U(null)}finally{Se(!1)}},pl=X=>{Mt(X),be(!0)},qr=async(X,Ee)=>{await d(X,{name:Ee.name,description:Ee.description||void 0})},Rs=async X=>{(await f(X)).success&&(be(!1),Mt(null))},ks=async X=>{const Ee=await g(X);if(Ee.success&&Ee.data)return Ee.data.map($t=>({id:$t.id,user_id:$t.userId,role:$t.role,user_profiles:{email:$t.email,display_name:$t.displayName||null}}))},Us=async(X,Ee,$t)=>await y(X,Ee,$t),vl=async(X,Ee)=>{await v(X,Ee)},bl=X=>({id:X.id,name:X.name,description:X.description||null,created_at:X.createdAt.toISOString(),created_by:X.createdBy,updated_at:X.updatedAt.toISOString(),role:X.userRole,member_count:X.memberCount});return r?h.jsx(tx,{message:"Loading dashboard..."}):h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),b&&h.jsx(ix,{user:b,onSettings:()=>ha(!0),onSignOut:()=>x()})]})}),h.jsx("div",{className:"p-6 space-y-6",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[(i||se)&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:i||se}),h.jsx("div",{className:"mb-8",children:h.jsx(ox,{campaigns:n,onCampaignSelect:o})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Po,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:h.jsx(Iy,{className:"w-8 h-8"}),onClick:()=>B(!0)}),h.jsx(Po,{title:"Create Character",description:"Add a new character to one of your campaigns",icon:h.jsx(ol,{className:"w-8 h-8"}),onClick:Xt,disabled:n.length===0}),h.jsx(Po,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:h.jsx(zr,{className:"w-8 h-8"}),onClick:()=>Sn(!0),disabled:n.length===0})]}),n.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"Create a campaign first to enable character management features."})]}),n.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(fx,{campaigns:n,onSelect:o,onEdit:Ns,onSettings:pl})}),n.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(hx,{campaigns:n,onViewCampaign:o})})]})}),h.jsx(ux,{isOpen:R,onClose:()=>B(!1),onCreateCampaign:Ts}),h.jsx(zt,{isOpen:G,onClose:()=>H(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:Lr,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:q,onChange:X=>Y(X.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),n.map(X=>h.jsx("option",{value:X.id,children:X.name},X.id))]})]}),h.jsx(Z,{label:"Player Name",value:V,onChange:X=>$(X.target.value),placeholder:"e.g. John Smith",required:!0}),h.jsx(Z,{label:"Character Name",value:ee,onChange:X=>ge(X.target.value),placeholder:"e.g. Lt. Sally Riddle",required:!0}),h.jsx(Ya,{onCancel:()=>H(!1),cancelText:"Cancel",confirmText:we?"Creating...":"Create",confirmDisabled:we||!V.trim()||!ee.trim()||!q,confirmType:"submit",isLoading:we})]})}),h.jsx(zt,{isOpen:st,onClose:()=>Ze(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:Os,className:"space-y-4",children:[h.jsx(Z,{label:"Campaign Name",value:L,onChange:X=>Q(X.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:pe,onChange:X=>ve(X.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(Ya,{onCancel:()=>Ze(!1),cancelText:"Cancel",confirmText:Me?"Updating...":"Update",confirmDisabled:Me||!L.trim(),confirmType:"submit",isLoading:Me})]})}),Ie&&h.jsx(zt,{isOpen:I,onClose:()=>be(!1),title:`Settings - ${Ie.name}`,maxWidth:"xl",children:h.jsx(ax,{campaign:bl(Ie),onUpdateCampaign:qr,onDeleteCampaign:Rs,onGetMembers:ks,onAddMember:Us,onRemoveMember:vl,onClose:()=>be(!1)})}),h.jsx(zt,{isOpen:ma,onClose:()=>Sn(!1),title:"Character Management",maxWidth:"xl",children:h.jsx(rx,{campaigns:n,onViewCampaign:o})}),b&&h.jsx(lx,{isOpen:wn,onClose:()=>ha(!1),user:b,onUpdateProfile:async X=>{const Ee=await _(X);if(!Ee.success&&Ee.error)throw new Error(Ee.error)},onChangePassword:async X=>{const Ee=await S(X);if(!Ee.success&&Ee.error)throw new Error(Ee.error)},onDeleteAccount:()=>{C().then(()=>{ha(!1)})}})]})}const Sg="traveller-ui-state-v1",Zm={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function jg(){try{const o=localStorage.getItem(Sg);if(!o)return Zm;const n=JSON.parse(o);return n.PCs||(n.PCs={}),Object.keys(n.PCs).forEach(r=>{n.PCs[r].Finance||(n.PCs[r].Finance=[]),n.PCs[r].Inventory||(n.PCs[r].Inventory=[]),n.PCs[r].Weapons||(n.PCs[r].Weapons=[]),n.PCs[r].Armour||(n.PCs[r].Armour=[]),n.PCs[r].Ammo||(n.PCs[r].Ammo=[])}),n}catch{return Zm}}function Cg(o){localStorage.setItem(Sg,JSON.stringify(o))}function Va(o){const n=jg();n.PCs[o]||(n.PCs[o]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Cg(n))}function gx(o){const n=z.useCallback((u,d,f)=>{o(g=>{g.PCs[u]||Va(u);const y=g.PCs[u]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...g,PCs:{...g.PCs,[u]:{...y,Ammo:(y.Ammo||[]).map((v,x)=>x===d?f:v)}}}})},[o]),r=z.useCallback((u,d)=>{o(f=>{if(!f.PCs[u])return Va(u),f;const g=f.PCs[u]?.Ammo?.[d];if(!g)return f;const y=Number(g["Rounds Loaded"]||0),v=Number(g["Spare Magazines"]||0),x=Number(g["Loose Rounds"]||0),b=Number(g["Magazine Size"]||0);let _=y,S=v,C=x;if(_>0)_-=1;else if(S>0)S-=1,_=b-1;else if(C>0&&b>0){const G=Math.min(C,b);C-=G,_=G-1}else return f;const R=_+S*b+C,B={...g,"Rounds Loaded":_,"Spare Magazines":S,"Loose Rounds":C,"Total Rounds":R};return{...f,PCs:{...f.PCs,[u]:{...f.PCs[u],Ammo:(f.PCs[u].Ammo||[]).map((G,H)=>H===d?B:G)}}}})},[o]),i=z.useCallback((u,d)=>{o(f=>{if(!f.PCs[u])return Va(u),f;const g=f.PCs[u]?.Ammo?.[d];if(!g)return f;const y=Number(g["Rounds Loaded"]||0),v=Number(g["Spare Magazines"]||0),x=Number(g["Loose Rounds"]||0),b=Number(g["Magazine Size"]||0);let _=y,S=v,C=x;if(S>0&&_<b)S-=1,_=b;else if(C>0&&_<b){const G=b-_,H=Math.min(C,G);C-=H,_+=H}const R=_+S*b+C,B={...g,"Rounds Loaded":_,"Spare Magazines":S,"Loose Rounds":C,"Total Rounds":R};return{...f,PCs:{...f.PCs,[u]:{...f.PCs[u],Ammo:(f.PCs[u].Ammo||[]).map((G,H)=>H===d?B:G)}}}})},[o]);return{updateCharacterAmmo:n,fireRound:r,reloadWeapon:i}}function yx(){const[o,n]=z.useState(jg());z.useEffect(()=>{Cg(o)},[o]);const r=z.useCallback(b=>{n(_=>({..._,Party_Finances:b}))},[]),i=z.useCallback(b=>{n(_=>({..._,Ship_Accounts:b}))},[]),u=z.useCallback(b=>{n(_=>({..._,Ship_Cargo:[..._.Ship_Cargo,b]}))},[]),d=z.useCallback((b,_)=>{n(S=>(S.PCs[b]||Va(b),{...S,PCs:{...S.PCs,[b]:{...S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:_}}}))},[]),f=z.useCallback((b,_)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Inventory:[...C.Inventory,_]}}}})},[]),g=z.useCallback((b,_)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Ammo:[...C.Ammo||[],_]}}}})},[]),y=z.useCallback((b,_)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Weapons:[...C.Weapons||[],_]}}}})},[]),v=z.useCallback((b,_)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Armour:[...C.Armour||[],_]}}}})},[]),x=gx(n);return{state:o,setState:n,updatePartyFinances:r,updateShipAccounts:i,addCargoLeg:u,updateCharacterFinance:d,addCharacterInventory:f,addCharacterAmmo:g,addCharacterWeapon:y,addCharacterArmour:v,...x}}function px(o,n=0){let r=n;return o.map(i=>{const u=i["Amount (Cr)"],d=i.Category;return d==="Income"?r+=u:d==="Expense"&&(r-=u),{...i,"Running Total":r}})}function ul(o,n=0){return o.reduce((r,i)=>{const u=i["Amount (Cr)"],d=i.Category;return d==="Income"?r+u:d==="Expense"?r-u:r},n)}function vx(o,n,r=0){const i=[...o,n];return i.sort((u,d)=>new Date(u.Date).getTime()-new Date(d.Date).getTime()),px(i,r)}function bx(o){const n=[];return o.Description?.trim()||n.push("Description is required"),o.Date||n.push("Date is required"),(o["Amount (Cr)"]===void 0||o["Amount (Cr)"]===null)&&n.push("Amount is required"),typeof o["Amount (Cr)"]=="number"&&o["Amount (Cr)"]<0&&n.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(o.Category||"")||n.push("Category must be Income, Expense, or Transfer"),{isValid:n.length===0,errors:n}}function ll(o){return`${o.toLocaleString()} Cr`}function xx(o){const n=o.reduce((r,i)=>{const u=i["Amount (Cr)"];return i.Category==="Income"?r.totalIncome+=u:i.Category==="Expense"&&(r.totalExpenses+=u),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...n,netChange:n.totalIncome-n.totalExpenses}}function _x(o,n){return z.useMemo(()=>({party:ul(o.Party_Finances,0),ship:ul(o.Ship_Accounts,0),character:ul(o.PCs[n]?.Finance||[],0)}),[o.Party_Finances,o.Ship_Accounts,o.PCs,n])}function wx(o,n){const r=z.useCallback(async u=>{try{const{importXlsx:d}=await vn(async()=>{const{importXlsx:f}=await import("./xlsx-BUvyoub0.js");return{importXlsx:f}},__vite__mapDeps([0,1,2,3]));return await d(u,o),{success:!0}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Unknown error occurred"}}},[o]),i=z.useCallback(async()=>{try{const{exportXlsx:u}=await vn(async()=>{const{exportXlsx:d}=await import("./xlsx-BUvyoub0.js");return{exportXlsx:d}},__vite__mapDeps([0,1,2,3]));return await u(n),{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Unknown error occurred"}}},[n]);return{handleImport:r,handleExport:i}}function Sx({onImport:o,onExport:n}){const r=async d=>{const f=d.target.files?.[0];f&&((await o(f)).success||(d.target.value=""))},i=async()=>{await n()},u=d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.currentTarget.click())};return h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),h.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[h.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:u,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[h.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:r,"data-testid":"file-input"}),h.jsx(tp,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),h.jsxs(me,{onClick:i,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[h.jsx(ap,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const ws=o=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(o)} Cr`,jx=()=>new Date().toISOString().slice(0,10);function Cx({partyBalance:o,shipBalance:n,cargoLegsCount:r,characterCount:i}){return h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${ws(o)}`,children:ws(o)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${ws(n)}`,children:ws(n)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${r}`,children:r})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${i}`,children:i})]})]})}function Ag({tabs:o,active:n,onChange:r}){const i=u=>{const d=o.findIndex(y=>y.id===n);let f=d;switch(u.key){case"ArrowLeft":u.preventDefault(),f=d>0?d-1:o.length-1;break;case"ArrowRight":u.preventDefault(),f=d<o.length-1?d+1:0;break;case"Home":u.preventDefault(),f=0;break;case"End":u.preventDefault(),f=o.length-1;break;default:return}const g=o[f].id;r(g)};return h.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:o.map(u=>h.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${n===u.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>r(u.id),onKeyDown:i,role:"tab","aria-selected":n===u.id,"aria-controls":`tabpanel-${u.id}`,id:`tab-${u.id}`,type:"button",tabIndex:n===u.id?0:-1,"data-testid":`tab-${u.id}`,children:u.label},u.id))})}function _n({title:o,children:n}){return h.jsxs("div",{className:"card space-y-3",children:[h.jsx("div",{className:"font-semibold",children:o}),n]})}function As({columns:o,rows:n}){const r=i=>z.isValidElement(i)?i:String(i??"");return h.jsx("div",{className:"overflow-auto border rounded-2xl",children:h.jsxs("table",{className:"table",children:[h.jsx("thead",{children:h.jsx("tr",{children:o.map(i=>h.jsx("th",{children:i},i))})}),h.jsx("tbody",{children:n.length===0?h.jsx("tr",{children:h.jsx("td",{className:"text-zinc-500 p-3",colSpan:o.length,children:"No rows yet."})}):n.map((i,u)=>h.jsx("tr",{children:o.map(d=>h.jsx("td",{children:r(i[d])},d))},u))})]})})}function Es(o){const[n,r]=z.useState(o),i=z.useCallback((y,v)=>{r(x=>({...x,[y]:v}))},[]),u=z.useCallback(y=>v=>{i(y,v.target.value)},[i]),d=z.useCallback(y=>{r(v=>{const x={...o};return y&&y.forEach(b=>{x[b]=v[b]}),x})},[o]),f=z.useCallback(y=>{r(v=>({...v,...y}))},[]),g=z.useCallback(()=>({...n}),[n]);return{form:n,updateField:i,createInputHandler:u,resetForm:d,updateFields:f,getFormData:g,setForm:r}}const Ax={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function Ex({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Es(Ax),d=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const f=Number(r.Tons),g=Number(r.BuyPP),y=r.SellPP===""?null:Number(r.SellPP),v=r.Fees===""?0:Number(r.Fees),x=y===null?null:(y-g)*f-v;n({"Leg/Route":r.Route,Item:r.Item,Tons:f,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":g,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":y,"Broker (±DM)":r.DM,"Fees/Taxes (Cr)":v,"Profit (Cr)":x}),u()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(_n,{title:"Record Cargo Leg",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Route (Vland → Regina)",value:r.Route,onChange:i("Route")}),h.jsx(Z,{placeholder:"Item",value:r.Item,onChange:i("Item")}),h.jsx(Z,{type:"number",placeholder:"Tons",value:r.Tons,onChange:i("Tons")}),h.jsx(Z,{placeholder:"Purchase World",value:r.BuyWorld,onChange:i("BuyWorld")}),h.jsx(Z,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:r.BuyPP,onChange:i("BuyPP")}),h.jsx(Z,{placeholder:"Sale World (optional)",value:r.SellWorld,onChange:i("SellWorld")}),h.jsx(Z,{type:"number",placeholder:"Sale Price (Cr/ton)",value:r.SellPP,onChange:i("SellPP")}),h.jsx(Z,{placeholder:"Broker DM",value:r.DM,onChange:i("DM")}),h.jsx(Z,{type:"number",placeholder:"Fees/Taxes (Cr)",value:r.Fees,onChange:i("Fees")})]}),h.jsx(me,{className:"mt-2",onClick:d,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),h.jsx(As,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (±DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:o})]})}function Tx({title:o,totalIncome:n,totalExpenses:r,netChange:i,currentBalance:u}){return h.jsx(_n,{title:`${o} Summary`,children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),h.jsx("div",{children:ll(n)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),h.jsx("div",{children:ll(r)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),h.jsx("div",{className:i>=0?"text-green-600":"text-red-600",children:ll(i)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),h.jsx("div",{className:u>=0?"text-green-600":"text-red-600",children:ll(u)})]})]})})}function Nx({title:o,fundName:n,onSubmit:r}){const i={Date:jx(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:u,createInputHandler:d,resetForm:f}=Es(i),[g,y]=z.useState([]),v=()=>{y([]);const x={Date:u.Date,Description:u.Description,Category:u.Category,Subcategory:u.Subcategory,"Amount (Cr)":Number(u.Amount),"Paid By":n,"Paid From (Fund)":n,Notes:u.Notes},b=bx(x);if(!b.isValid){y(b.errors);return}r(x),f(["Date","Category"])};return h.jsxs(_n,{title:`Add ${o} Transaction`,children:[g.length>0&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h.jsx("ul",{className:"list-disc list-inside",children:g.map((x,b)=>h.jsx("li",{children:x},b))})}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{type:"date",value:u.Date,onChange:d("Date")}),h.jsx(Z,{placeholder:"Description",value:u.Description,onChange:d("Description")}),h.jsxs(Z,{type:"select",value:u.Category,onChange:d("Category"),children:[h.jsx("option",{value:"Income",children:"Income"}),h.jsx("option",{value:"Expense",children:"Expense"}),h.jsx("option",{value:"Transfer",children:"Transfer"})]}),h.jsx(Z,{placeholder:"Subcategory",value:u.Subcategory,onChange:d("Subcategory")}),h.jsx(Z,{type:"number",placeholder:"Amount (Cr)",value:u.Amount,onChange:d("Amount")}),h.jsx(Z,{placeholder:"Notes",value:u.Notes,onChange:d("Notes")})]}),h.jsx(me,{className:"mt-2",onClick:v,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function uc({title:o,rows:n,onUpdate:r,fundName:i,initialBalance:u=0,showSummary:d=!0}){const f=ul(n,u),g=xx(n),y=x=>{const b=vx(n,x,u);r(b)},v=n.map(x=>({...x,"Amount (Cr)":x.Category==="Expense"?-Math.abs(x["Amount (Cr)"]):Math.abs(x["Amount (Cr)"])}));return h.jsxs("div",{className:"space-y-4",children:[d&&h.jsx(Tx,{title:o,totalIncome:g.totalIncome,totalExpenses:g.totalExpenses,netChange:g.netChange,currentBalance:f}),h.jsx(Nx,{title:o,fundName:i,onSubmit:y}),h.jsx(As,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:v})]})}function Ox({pc:o,rows:n,onAdd:r}){const i=o.includes(" – ")?o.split(" – ")[1]:o;return h.jsx("div",{className:"space-y-4",children:h.jsx(uc,{title:i,rows:n,onUpdate:r,fundName:`${i} Fund`,initialBalance:0,showSummary:!0})})}const Rx={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function kx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Es(Rx),d=()=>{if(!r.Item||r.Qty==="")return;const f=Number(r.Qty||0),g=Number(r["Unit Mass (kg)"]||0),y=Number(r["Unit Value (Cr)"]||0);n({Item:r.Item,Qty:f,"Unit Mass (kg)":g,"Total Mass (kg)":f*g,"Unit Value (Cr)":y,"Total Value (Cr)":f*y,"Location/Container":r["Location/Container"],Notes:r.Notes}),u()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(_n,{title:"Add Inventory Item",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Item",value:r.Item,onChange:i("Item")}),h.jsx(Z,{type:"number",placeholder:"Qty",value:r.Qty,onChange:i("Qty")}),h.jsx(Z,{type:"number",placeholder:"Unit Mass (kg)",value:r["Unit Mass (kg)"],onChange:i("Unit Mass (kg)")}),h.jsx(Z,{type:"number",placeholder:"Unit Value (Cr)",value:r["Unit Value (Cr)"],onChange:i("Unit Value (Cr)")}),h.jsx(Z,{placeholder:"Location/Container",value:r["Location/Container"],onChange:i("Location/Container")}),h.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(me,{className:"mt-2",onClick:d,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),h.jsx(As,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:o})]})}function Ux({content:o,children:n,position:r="bottom",className:i=""}){const[u,d]=z.useState(!1),f={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},g={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return h.jsxs("div",{className:`relative inline-block ${i}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onFocus:()=>d(!0),onBlur:()=>d(!1),children:[n,u&&h.jsx(h.Fragment,{children:h.jsxs("div",{className:`absolute z-[9999] ${f[r]} transition-opacity duration-200`,children:[h.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:o}),h.jsx("div",{className:`absolute ${g[r]}`})]})})]})}const zx={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Notes:""};function Mx({row:o,index:n,onFireRound:r,onReload:i}){return h.jsxs("div",{className:"flex gap-2",children:[h.jsx(me,{variant:"danger",size:"sm",onClick:()=>r?.(n),disabled:Number(o["Total Rounds"]||0)<=0,title:`Fire one round from ${o.Weapon}`,"aria-label":`Fire one round from ${o.Weapon}`,children:"Fire"}),h.jsx(me,{variant:"primary",size:"sm",onClick:()=>i?.(n),disabled:Number(o["Spare Magazines"]||0)<=0&&Number(o["Loose Rounds"]||0)<=0,title:`Reload ${o.Weapon}`,"aria-label":`Reload ${o.Weapon}`,children:"Reload"})]})}function Dx({rows:o,weapons:n=[],onAdd:r,onFireRound:i,onReload:u}){const{form:d,createInputHandler:f,resetForm:g,updateField:y}=Es(zx),v=()=>{if(!d.Weapon)return;const _=Number(d["Magazine Size"]||0),S=Number(d["Rounds Loaded"]||0),C=Number(d["Spare Magazines"]||0),R=Number(d["Loose Rounds"]||0),B=_*C+S+R;r({Weapon:d.Weapon,"Ammo Type":d["Ammo Type"],"Magazine Size":_,"Rounds Loaded":S,"Spare Magazines":C,"Loose Rounds":R,"Total Rounds":B,Notes:d.Notes}),g()},x=_=>{y("Weapon",_)},b=o.map((_,S)=>({..._,Actions:h.jsx(Mx,{row:_,index:S,onFireRound:i,onReload:u})}));return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(_n,{title:"Add Ammunition Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsxs(Z,{type:"select",value:d.Weapon==="__custom"?"":d.Weapon,onChange:f("Weapon"),children:[h.jsx("option",{value:"",children:"Select Weapon"}),n.map(_=>h.jsxs("option",{value:_.Weapon,children:[_.Weapon," (",_.Type,")"]},_.Weapon)),h.jsx("option",{value:"__custom",children:"--- Custom Weapon ---"})]}),d.Weapon==="__custom"&&h.jsx(Z,{placeholder:"Custom Weapon Name",value:"",onChange:_=>x(_.target.value)}),h.jsx(Z,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:d["Ammo Type"],onChange:f("Ammo Type")}),h.jsx(Z,{type:"number",placeholder:"Magazine Size",value:d["Magazine Size"],onChange:f("Magazine Size")}),h.jsx(Z,{type:"number",placeholder:"Rounds Loaded",value:d["Rounds Loaded"],onChange:f("Rounds Loaded")}),h.jsx(Z,{type:"number",placeholder:"Spare Magazines",value:d["Spare Magazines"],onChange:f("Spare Magazines")}),h.jsx(Z,{type:"number",placeholder:"Loose Rounds",value:d["Loose Rounds"],onChange:f("Loose Rounds")}),h.jsx(Z,{placeholder:"Notes",value:d.Notes,onChange:f("Notes")})]}),h.jsx(me,{className:"mt-2",onClick:v,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),h.jsx(Ux,{content:h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),h.jsxs("ul",{className:"space-y-1 text-sm",children:[h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds → Spare magazines → Loose rounds"]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:h.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:h.jsx(np,{className:"w-5 h-5"})})})]}),h.jsx(As,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:b})]})}const Bx={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function Lx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Es(Bx),d=()=>{r.Weapon&&(n({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),u())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(_n,{title:"Add Weapon Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Weapon Name",value:r.Weapon,onChange:i("Weapon")}),h.jsxs(Z,{type:"select",value:r.Type,onChange:i("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Melee",children:"Melee"}),h.jsx("option",{value:"Pistol",children:"Pistol"}),h.jsx("option",{value:"Rifle",children:"Rifle"}),h.jsx("option",{value:"Shotgun",children:"Shotgun"}),h.jsx("option",{value:"Heavy Weapon",children:"Heavy Weapon"}),h.jsx("option",{value:"Explosive",children:"Explosive"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(Z,{placeholder:"Damage (e.g., 3d6)",value:r.Damage,onChange:i("Damage")}),h.jsx(Z,{placeholder:"Range (e.g., 150m)",value:r.Range,onChange:i("Range")}),h.jsx(Z,{type:"number",placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),h.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),h.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(me,{className:"mt-2",onClick:d,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),h.jsx(As,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:o})]})}const qx={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function Hx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Es(qx),d=()=>{r.Armour&&(n({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),u())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(_n,{title:"Add Armour Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Armour Name",value:r.Armour,onChange:i("Armour")}),h.jsxs(Z,{type:"select",value:r.Type,onChange:i("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Cloth",children:"Cloth"}),h.jsx("option",{value:"Mesh",children:"Mesh"}),h.jsx("option",{value:"Flak Jacket",children:"Flak Jacket"}),h.jsx("option",{value:"Combat Armour",children:"Combat Armour"}),h.jsx("option",{value:"Battle Dress",children:"Battle Dress"}),h.jsx("option",{value:"Powered Armour",children:"Powered Armour"}),h.jsx("option",{value:"Vacc Suit",children:"Vacc Suit"}),h.jsx("option",{value:"Environmental Suit",children:"Environmental Suit"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(Z,{placeholder:"Protection (e.g., +5, 1d6+2)",value:r.Protection,onChange:i("Protection")}),h.jsx(Z,{placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),h.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),h.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(me,{className:"mt-2",onClick:d,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),h.jsx(As,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:o})]})}function $x({campaignId:o,selectedPc:n,onPcChange:r,characterBalance:i,characterFinance:u,characterInventory:d,characterAmmo:f,characterWeapons:g,characterArmour:y,onUpdateFinance:v,onAddInventory:x,onAddAmmo:b,onAddWeapon:_,onAddArmour:S,onFireRound:C,onReloadWeapon:R}){const[B,G]=z.useState("ledger"),{characters:H,loading:q,error:Y}=bn(o),V=H.find($=>$.displayName===n);return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("select",{className:"select",value:n,onChange:$=>r($.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:q,children:q?h.jsx("option",{children:"Loading characters..."}):H.map($=>h.jsx("option",{value:$.displayName,children:$.displayName},$.id))}),Y&&h.jsx("span",{className:"text-xs text-yellow-600",title:Y,children:"⚠️ Offline mode"}),h.jsx("div",{className:"text-sm",children:h.jsxs("span",{"aria-label":`Current character balance: ${ws(i)}`,children:["Current Balance:"," ",h.jsx("span",{className:"font-semibold",children:ws(i)})]})})]}),V&&V.id.startsWith("character-")&&h.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",V.playerName," | Character:"," ",V.characterName]}),h.jsx(Ag,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:B,onChange:$=>G($)}),B==="ledger"&&h.jsx(Ox,{pc:n,rows:u,onAdd:$=>v(n,$)}),B==="inventory"&&h.jsx(kx,{rows:d,onAdd:$=>x(n,$)}),B==="weapons"&&h.jsx(Lx,{rows:g,onAdd:$=>_(n,$)}),B==="armour"&&h.jsx(Hx,{rows:y,onAdd:$=>S(n,$)}),B==="ammo"&&h.jsx(Dx,{rows:f,weapons:g,onAdd:$=>b(n,$),onFireRound:$=>C?.(n,$),onReload:$=>R?.(n,$)})]})}function Gx({campaignId:o,activeTab:n,state:r,selectedCharacterDisplayName:i,characterBalance:u,onCharacterChange:d,onUpdatePartyFinances:f,onUpdateShipAccounts:g,onAddCargoLeg:y,onUpdateCharacterFinance:v,onAddCharacterInventory:x,onAddCharacterAmmo:b,onAddCharacterWeapon:_,onAddCharacterArmour:S,onFireRound:C,onReloadWeapon:R}){return h.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${n}`,id:`tabpanel-${n}`,children:[n==="party"&&h.jsx(uc,{title:"Party",rows:r.Party_Finances,onUpdate:f,fundName:"Party Fund",initialBalance:0,showSummary:!0}),n==="ship"&&h.jsx(uc,{title:"Ship",rows:r.Ship_Accounts,onUpdate:g,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),n==="cargo"&&h.jsx(Ex,{rows:r.Ship_Cargo,onAdd:y}),n==="characters"&&h.jsx($x,{campaignId:o,selectedPc:i,onPcChange:d,characterBalance:u,characterFinance:r.PCs[i]?.Finance||[],characterInventory:r.PCs[i]?.Inventory||[],characterAmmo:r.PCs[i]?.Ammo||[],characterWeapons:r.PCs[i]?.Weapons||[],characterArmour:r.PCs[i]?.Armour||[],onUpdateFinance:v,onAddInventory:x,onAddAmmo:b,onAddWeapon:_,onAddArmour:S,onFireRound:C,onReloadWeapon:R})]})}function Vx({campaignId:o,onBackToCampaigns:n}){const[r,i]=z.useState("party"),{characters:u}=bn(o),[d,f]=z.useState(""),g=d||u[0]?.displayName||"",{state:y,setState:v,updatePartyFinances:x,updateShipAccounts:b,addCargoLeg:_,updateCharacterFinance:S,addCharacterInventory:C,addCharacterAmmo:R,addCharacterWeapon:B,addCharacterArmour:G,fireRound:H,reloadWeapon:q}=yx(),Y=_x(y,g),{handleImport:V,handleExport:$}=wx(v,y);return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:"← Back to Campaigns"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",o]})]})]})})}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsx(Sx,{onImport:V,onExport:$}),h.jsx(Cx,{partyBalance:Y.party,shipBalance:Y.ship,cargoLegsCount:y.Ship_Cargo.length,characterCount:u.length}),h.jsx(Ag,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:ee=>i(ee)}),h.jsx(Gx,{campaignId:o,activeTab:r,state:y,selectedCharacterDisplayName:g,characterBalance:Y.character,onCharacterChange:f,onUpdatePartyFinances:x,onUpdateShipAccounts:b,onAddCargoLeg:_,onUpdateCharacterFinance:S,onAddCharacterInventory:C,onAddCharacterAmmo:R,onAddCharacterWeapon:B,onAddCharacterArmour:G,onFireRound:H,onReloadWeapon:q})]})]})}function Yx(){const{user:o,loading:n,completeProfile:r}=yl(),[i,u]=z.useState(null);return n?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?o.profileCompleted?i?h.jsx(Vx,{campaignId:i,onBackToCampaigns:()=>u(null)}):h.jsx(mx,{onCampaignSelect:u}):h.jsx(Ib,{onComplete:r}):h.jsx(Kb,{})}class Qx extends Wm.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error boundary caught an error:",n,r)}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:h.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),h.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),h.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const Eg=document.getElementById("root");if(!Eg)throw new Error("Failed to find the root element");mp.createRoot(Eg).render(h.jsx(Wm.StrictMode,{children:h.jsx(Qx,{children:h.jsx(Yx,{})})}));export{Zm as D,vn as _};
