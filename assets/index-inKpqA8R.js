const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-Csb2Fy8F.js","assets/icons-DbeUm0Po.js","assets/excel-CRXrONvn.js","assets/vendor-X-tRH5j4.js"])))=>i.map(i=>d[i]);
import{r as S,U as kr,X as np,P as Cl,a as nr,T as Ls,A as sp,b as jl,C as Jv,S as ip,L as Zv,c as eb,d as sg,M as tb,E as au,e as ru,f as lp,g as ab,R as rb,h as nb,D as sb,i as ib,j as op}from"./icons-DbeUm0Po.js";import{g as cp,a as lb}from"./excel-CRXrONvn.js";import{r as ob,a as cb}from"./vendor-X-tRH5j4.js";function ub(i,a){for(var r=0;r<a.length;r++){const s=a[r];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in i)){const c=Object.getOwnPropertyDescriptor(s,o);c&&Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var nu={exports:{}},Ts={};var ig;function db(){if(ig)return Ts;ig=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Ts.Fragment=a,Ts.jsx=r,Ts.jsxs=r,Ts}var lg;function hb(){return lg||(lg=1,nu.exports=db()),nu.exports}var f=hb(),su={exports:{}},ks={},iu={exports:{}},lu={};var og;function fb(){return og||(og=1,(function(i){function a(B,G){var X=B.length;B.push(G);e:for(;0<X;){var xe=X-1>>>1,we=B[xe];if(0<o(we,G))B[xe]=G,B[X]=we,X=xe;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var G=B[0],X=B.pop();if(X!==G){B[0]=X;e:for(var xe=0,we=B.length,Ue=we>>>1;xe<Ue;){var Re=2*(xe+1)-1,ye=B[Re],Se=Re+1,Ee=B[Se];if(0>o(ye,X))Se<we&&0>o(Ee,ye)?(B[xe]=Ee,B[Se]=X,xe=Se):(B[xe]=ye,B[Re]=X,xe=Re);else if(Se<we&&0>o(Ee,X))B[xe]=Ee,B[Se]=X,xe=Se;else break e}}return G}function o(B,G){var X=B.sortIndex-G.sortIndex;return X!==0?X:B.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],p=[],v=1,b=null,_=3,x=!1,C=!1,A=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function H(B){for(var G=r(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=B)s(p),G.sortIndex=G.expirationTime,a(g,G);else break;G=r(p)}}function F(B){if(A=!1,H(B),!C)if(r(g)!==null)C=!0,V||(V=!0,oe());else{var G=r(p);G!==null&&de(F,G.startTime-B)}}var V=!1,te=-1,Y=5,P=-1;function K(){return j?!0:!(i.unstable_now()-P<Y)}function ce(){if(j=!1,V){var B=i.unstable_now();P=B;var G=!0;try{e:{C=!1,A&&(A=!1,T(te),te=-1),x=!0;var X=_;try{t:{for(H(B),b=r(g);b!==null&&!(b.expirationTime>B&&K());){var xe=b.callback;if(typeof xe=="function"){b.callback=null,_=b.priorityLevel;var we=xe(b.expirationTime<=B);if(B=i.unstable_now(),typeof we=="function"){b.callback=we,H(B),G=!0;break t}b===r(g)&&s(g),H(B)}else s(g);b=r(g)}if(b!==null)G=!0;else{var Ue=r(p);Ue!==null&&de(F,Ue.startTime-B),G=!1}}break e}finally{b=null,_=X,x=!1}G=void 0}}finally{G?oe():V=!1}}}var oe;if(typeof O=="function")oe=function(){O(ce)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,I=Q.port2;Q.port1.onmessage=ce,oe=function(){I.postMessage(null)}}else oe=function(){N(ce,0)};function de(B,G){te=N(function(){B(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(B){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var X=_;_=G;try{return B()}finally{_=X}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=_;_=B;try{return G()}finally{_=X}},i.unstable_scheduleCallback=function(B,G,X){var xe=i.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?xe+X:xe):X=xe,B){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=X+we,B={id:v++,callback:G,priorityLevel:B,startTime:X,expirationTime:we,sortIndex:-1},X>xe?(B.sortIndex=X,a(p,B),r(g)===null&&B===r(p)&&(A?(T(te),te=-1):A=!0,de(F,X-xe))):(B.sortIndex=we,a(g,B),C||x||(C=!0,V||(V=!0,oe()))),B},i.unstable_shouldYield=K,i.unstable_wrapCallback=function(B){var G=_;return function(){var X=_;_=G;try{return B.apply(this,arguments)}finally{_=X}}}})(lu)),lu}var cg;function mb(){return cg||(cg=1,iu.exports=fb()),iu.exports}var ug;function gb(){if(ug)return ks;ug=1;var i=mb(),a=ob(),r=cb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,l=t;;){var u=n.return;if(u===null)break;var h=u.alternate;if(h===null){if(l=u.return,l!==null){n=l;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===n)return g(u),e;if(h===l)return g(u),t;h=h.sibling}throw Error(s(188))}if(n.return!==l.return)n=u,l=h;else{for(var y=!1,w=u.child;w;){if(w===n){y=!0,n=u,l=h;break}if(w===l){y=!0,l=u,n=h;break}w=w.sibling}if(!y){for(w=h.child;w;){if(w===n){y=!0,n=h,l=u;break}if(w===l){y=!0,l=h,n=u;break}w=w.sibling}if(!y)throw Error(s(189))}}if(n.alternate!==l)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Symbol.for("react.client.reference");function I(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case O:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return t=e.displayName||null,t!==null?t:I(e.type)||"Memo";case Y:t=e._payload,e=e._init;try{return I(e(t))}catch{}}return null}var de=Array.isArray,B=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},xe=[],we=-1;function Ue(e){return{current:e}}function Re(e){0>we||(e.current=xe[we],xe[we]=null,we--)}function ye(e,t){we++,xe[we]=e.current,e.current=t}var Se=Ue(null),Ee=Ue(null),Ot=Ue(null),Ke=Ue(null);function Vt(e,t){switch(ye(Ot,t),ye(Ee,e),ye(Se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Nm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Nm(t),e=Rm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Re(Se),ye(Se,e)}function Gt(){Re(Se),Re(Ee),Re(Ot)}function Na(e){e.memoizedState!==null&&ye(Ke,e);var t=Se.current,n=Rm(t,e.type);t!==n&&(ye(Ee,e),ye(Se,n))}function se(e){Ee.current===e&&(Re(Se),Re(Ee)),Ke.current===e&&(Re(Ke),As._currentValue=X)}var Ne,me;function He(e){if(Ne===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ne=t&&t[1]||"",me=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+e+me}var Bn=!1;function Dr(e,t){if(!e||Bn)return"";Bn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(U){var z=U}Reflect.construct(e,[],$)}else{try{$.call()}catch(U){z=U}e.call($.prototype)}}else{try{throw Error()}catch(U){z=U}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(U){if(U&&z&&typeof U.stack=="string")return[U.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),y=h[0],w=h[1];if(y&&w){var E=y.split(`
`),M=w.split(`
`);for(u=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;if(l===E.length||u===M.length)for(l=E.length-1,u=M.length-1;1<=l&&0<=u&&E[l]!==M[u];)u--;for(;1<=l&&0<=u;l--,u--)if(E[l]!==M[u]){if(l!==1||u!==1)do if(l--,u--,0>u||E[l]!==M[u]){var L=`
`+E[l].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=l&&0<=u);break}}}finally{Bn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?He(n):""}function Ry(e,t){switch(e.tag){case 26:case 27:case 5:return He(e.type);case 16:return He("Lazy");case 13:return e.child!==t&&t!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Dr(e.type,!1);case 11:return Dr(e.type.render,!1);case 1:return Dr(e.type,!0);case 31:return He("Activity");default:return""}}function nd(e){try{var t="",n=null;do t+=Ry(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Pl=Object.prototype.hasOwnProperty,$l=i.unstable_scheduleCallback,Hl=i.unstable_cancelCallback,Ty=i.unstable_shouldYield,ky=i.unstable_requestPaint,xt=i.unstable_now,Oy=i.unstable_getCurrentPriorityLevel,sd=i.unstable_ImmediatePriority,id=i.unstable_UserBlockingPriority,Ys=i.unstable_NormalPriority,Dy=i.unstable_LowPriority,ld=i.unstable_IdlePriority,My=i.log,zy=i.unstable_setDisableYieldValue,Ln=null,_t=null;function Ra(e){if(typeof My=="function"&&zy(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Ln,e)}catch{}}var wt=Math.clz32?Math.clz32:Ly,Uy=Math.log,By=Math.LN2;function Ly(e){return e>>>=0,e===0?32:31-(Uy(e)/By|0)|0}var Is=256,Qs=262144,Ks=4194304;function lr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ws(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var u=0,h=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~h,l!==0?u=lr(l):(y&=w,y!==0?u=lr(y):n||(n=w&~e,n!==0&&(u=lr(n))))):(w=l&~h,w!==0?u=lr(w):y!==0?u=lr(y):n||(n=l&~e,n!==0&&(u=lr(n)))),u===0?0:t!==0&&t!==u&&(t&h)===0&&(h=u&-u,n=t&-t,h>=n||h===32&&(n&4194048)!==0)?t:u}function qn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function qy(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function od(){var e=Ks;return Ks<<=1,(Ks&62914560)===0&&(Ks=4194304),e}function Vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Py(e,t,n,l,u,h){var y=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var w=e.entanglements,E=e.expirationTimes,M=e.hiddenUpdates;for(n=y&~n;0<n;){var L=31-wt(n),$=1<<L;w[L]=0,E[L]=-1;var z=M[L];if(z!==null)for(M[L]=null,L=0;L<z.length;L++){var U=z[L];U!==null&&(U.lane&=-536870913)}n&=~$}l!==0&&cd(e,l,0),h!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=h&~(y&~t))}function cd(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-wt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function ud(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-wt(n),u=1<<l;u&t|e[l]&t&&(e[l]|=t),n&=~u}}function dd(e,t){var n=t&-t;return n=(n&42)!==0?1:Gl(n),(n&(e.suspendedLanes|t))!==0?0:n}function Gl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function hd(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Jm(e.type))}function fd(e,t){var n=G.p;try{return G.p=e,t()}finally{G.p=n}}var Ta=Math.random().toString(36).slice(2),st="__reactFiber$"+Ta,ft="__reactProps$"+Ta,Mr="__reactContainer$"+Ta,Yl="__reactEvents$"+Ta,$y="__reactListeners$"+Ta,Hy="__reactHandles$"+Ta,md="__reactResources$"+Ta,$n="__reactMarker$"+Ta;function Il(e){delete e[st],delete e[ft],delete e[Yl],delete e[$y],delete e[Hy]}function zr(e){var t=e[st];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mr]||n[st]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Um(e);e!==null;){if(n=e[st])return n;e=Um(e)}return t}e=n,n=e.parentNode}return null}function Ur(e){if(e=e[st]||e[Mr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Hn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Br(e){var t=e[md];return t||(t=e[md]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function rt(e){e[$n]=!0}var gd=new Set,pd={};function or(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(pd[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var Vy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yd={},vd={};function Gy(e){return Pl.call(vd,e)?!0:Pl.call(yd,e)?!1:Vy.test(e)?vd[e]=!0:(yd[e]=!0,!1)}function Xs(e,t,n){if(Gy(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Js(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ia(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fy(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(y){n=""+y,h.call(this,y)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ql(e){if(!e._valueTracker){var t=bd(e)?"checked":"value";e._valueTracker=Fy(e,t,""+e[t])}}function xd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=bd(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Yy=/[\n"\\]/g;function Mt(e){return e.replace(Yy,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Kl(e,t,n,l,u,h,y,w){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?Wl(e,y,Dt(t)):n!=null?Wl(e,y,Dt(n)):l!=null&&e.removeAttribute("value"),u==null&&h!=null&&(e.defaultChecked=!!h),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Dt(w):e.removeAttribute("name")}function _d(e,t,n,l,u,h,y,w){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||n!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Ql(e);return}n=n!=null?""+Dt(n):"",t=t!=null?""+Dt(t):n,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Ql(e)}function Wl(e,t,n){t==="number"&&Zs(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function qr(e,t,n,l){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Dt(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function wd(e,t,n){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Dt(n):""}function Sd(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(s(92));if(de(l)){if(1<l.length)throw Error(s(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=Dt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Ql(e)}function Pr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Iy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Iy.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jd(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in t)l=t[u],t.hasOwnProperty(u)&&n[u]!==l&&Cd(e,u,l)}else for(var h in t)t.hasOwnProperty(h)&&Cd(e,h,t[h])}function Xl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ky=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(e){return Ky.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function la(){}var Jl=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $r=null,Hr=null;function Ad(e){var t=Ur(e);if(t&&(e=t.stateNode)){var n=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(Kl(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var u=l[ft]||null;if(!u)throw Error(s(90));Kl(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&xd(l)}break e;case"textarea":wd(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&qr(e,!!n.multiple,t,!1)}}}var eo=!1;function Ed(e,t,n){if(eo)return e(t,n);eo=!0;try{var l=e(t);return l}finally{if(eo=!1,($r!==null||Hr!==null)&&($i(),$r&&(t=$r,e=Hr,Hr=$r=null,Ad(t),e)))for(t=0;t<e.length;t++)Ad(e[t])}}function Vn(e,t){var n=e.stateNode;if(n===null)return null;var l=n[ft]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(oa)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){to=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{to=!1}var ka=null,ao=null,ti=null;function Nd(){if(ti)return ti;var e,t=ao,n=t.length,l,u="value"in ka?ka.value:ka.textContent,h=u.length;for(e=0;e<n&&t[e]===u[e];e++);var y=n-e;for(l=1;l<=y&&t[n-l]===u[h-l];l++);return ti=u.slice(e,1<l?1-l:void 0)}function ai(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ri(){return!0}function Rd(){return!1}function mt(e){function t(n,l,u,h,y){this._reactName=n,this._targetInst=u,this.type=l,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ri:Rd,this.isPropagationStopped=Rd,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),t}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=mt(cr),Fn=b({},cr,{view:0,detail:0}),Wy=mt(Fn),ro,no,Yn,si=b({},Fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yn&&(Yn&&e.type==="mousemove"?(ro=e.screenX-Yn.screenX,no=e.screenY-Yn.screenY):no=ro=0,Yn=e),ro)},movementY:function(e){return"movementY"in e?e.movementY:no}}),Td=mt(si),Xy=b({},si,{dataTransfer:0}),Jy=mt(Xy),Zy=b({},Fn,{relatedTarget:0}),so=mt(Zy),e0=b({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),t0=mt(e0),a0=b({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r0=mt(a0),n0=b({},cr,{data:0}),kd=mt(n0),s0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l0[e])?!!t[e]:!1}function io(){return o0}var c0=b({},Fn,{key:function(e){if(e.key){var t=s0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(e){return e.type==="keypress"?ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u0=mt(c0),d0=b({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Od=mt(d0),h0=b({},Fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),f0=mt(h0),m0=b({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),g0=mt(m0),p0=b({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y0=mt(p0),v0=b({},cr,{newState:0,oldState:0}),b0=mt(v0),x0=[9,13,27,32],lo=oa&&"CompositionEvent"in window,In=null;oa&&"documentMode"in document&&(In=document.documentMode);var _0=oa&&"TextEvent"in window&&!In,Dd=oa&&(!lo||In&&8<In&&11>=In),Md=" ",zd=!1;function Ud(e,t){switch(e){case"keyup":return x0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function w0(e,t){switch(e){case"compositionend":return Bd(t);case"keypress":return t.which!==32?null:(zd=!0,Md);case"textInput":return e=t.data,e===Md&&zd?null:e;default:return null}}function S0(e,t){if(Vr)return e==="compositionend"||!lo&&Ud(e,t)?(e=Nd(),ti=ao=ka=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dd&&t.locale!=="ko"?null:t.data;default:return null}}var C0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C0[e.type]:t==="textarea"}function qd(e,t,n,l){$r?Hr?Hr.push(l):Hr=[l]:$r=l,t=Qi(t,"onChange"),0<t.length&&(n=new ni("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Qn=null,Kn=null;function j0(e){wm(e,0)}function ii(e){var t=Hn(e);if(xd(t))return e}function Pd(e,t){if(e==="change")return t}var $d=!1;if(oa){var oo;if(oa){var co="oninput"in document;if(!co){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),co=typeof Hd.oninput=="function"}oo=co}else oo=!1;$d=oo&&(!document.documentMode||9<document.documentMode)}function Vd(){Qn&&(Qn.detachEvent("onpropertychange",Gd),Kn=Qn=null)}function Gd(e){if(e.propertyName==="value"&&ii(Kn)){var t=[];qd(t,Kn,e,Zl(e)),Ed(j0,t)}}function A0(e,t,n){e==="focusin"?(Vd(),Qn=t,Kn=n,Qn.attachEvent("onpropertychange",Gd)):e==="focusout"&&Vd()}function E0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(Kn)}function N0(e,t){if(e==="click")return ii(t)}function R0(e,t){if(e==="input"||e==="change")return ii(t)}function T0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:T0;function Wn(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var u=n[l];if(!Pl.call(t,u)||!St(e[u],t[u]))return!1}return!0}function Fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yd(e,t){var n=Fd(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fd(n)}}function Id(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Id(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Zs(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zs(e.document)}return t}function uo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var k0=oa&&"documentMode"in document&&11>=document.documentMode,Gr=null,ho=null,Xn=null,fo=!1;function Kd(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fo||Gr==null||Gr!==Zs(l)||(l=Gr,"selectionStart"in l&&uo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xn&&Wn(Xn,l)||(Xn=l,l=Qi(ho,"onSelect"),0<l.length&&(t=new ni("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Gr)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},mo={},Wd={};oa&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function dr(e){if(mo[e])return mo[e];if(!Fr[e])return e;var t=Fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wd)return mo[e]=t[n];return e}var Xd=dr("animationend"),Jd=dr("animationiteration"),Zd=dr("animationstart"),O0=dr("transitionrun"),D0=dr("transitionstart"),M0=dr("transitioncancel"),eh=dr("transitionend"),th=new Map,go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");go.push("scrollEnd");function Ft(e,t){th.set(e,t),or(t,[e])}var li=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zt=[],Yr=0,po=0;function oi(){for(var e=Yr,t=po=Yr=0;t<e;){var n=zt[t];zt[t++]=null;var l=zt[t];zt[t++]=null;var u=zt[t];zt[t++]=null;var h=zt[t];if(zt[t++]=null,l!==null&&u!==null){var y=l.pending;y===null?u.next=u:(u.next=y.next,y.next=u),l.pending=u}h!==0&&ah(n,u,h)}}function ci(e,t,n,l){zt[Yr++]=e,zt[Yr++]=t,zt[Yr++]=n,zt[Yr++]=l,po|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function yo(e,t,n,l){return ci(e,t,n,l),ui(e)}function hr(e,t){return ci(e,null,null,t),ui(e)}function ah(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var u=!1,h=e.return;h!==null;)h.childLanes|=n,l=h.alternate,l!==null&&(l.childLanes|=n),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(u=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,u&&t!==null&&(u=31-wt(n),e=h.hiddenUpdates,l=e[u],l===null?e[u]=[t]:l.push(t),t.lane=n|536870912),h):null}function ui(e){if(50<bs)throw bs=0,Ac=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ir={};function z0(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,l){return new z0(e,t,n,l)}function vo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ca(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function rh(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function di(e,t,n,l,u,h){var y=0;if(l=e,typeof e=="function")vo(e)&&(y=1);else if(typeof e=="string")y=Pv(e,n,Se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case P:return e=Ct(31,n,t,u),e.elementType=P,e.lanes=h,e;case A:return fr(n.children,u,h,t);case j:y=8,u|=24;break;case N:return e=Ct(12,n,t,u|2),e.elementType=N,e.lanes=h,e;case F:return e=Ct(13,n,t,u),e.elementType=F,e.lanes=h,e;case V:return e=Ct(19,n,t,u),e.elementType=V,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:y=10;break e;case T:y=9;break e;case H:y=11;break e;case te:y=14;break e;case Y:y=16,l=null;break e}y=29,n=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=Ct(y,n,t,u),t.elementType=e,t.type=l,t.lanes=h,t}function fr(e,t,n,l){return e=Ct(7,e,l,t),e.lanes=n,e}function bo(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function nh(e){var t=Ct(18,null,null,0);return t.stateNode=e,t}function xo(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sh=new WeakMap;function Ut(e,t){if(typeof e=="object"&&e!==null){var n=sh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:nd(t)},sh.set(e,t),t)}return{value:e,source:t,stack:nd(t)}}var Qr=[],Kr=0,hi=null,Jn=0,Bt=[],Lt=0,Oa=null,ta=1,aa="";function ua(e,t){Qr[Kr++]=Jn,Qr[Kr++]=hi,hi=e,Jn=t}function ih(e,t,n){Bt[Lt++]=ta,Bt[Lt++]=aa,Bt[Lt++]=Oa,Oa=e;var l=ta;e=aa;var u=32-wt(l)-1;l&=~(1<<u),n+=1;var h=32-wt(t)+u;if(30<h){var y=u-u%5;h=(l&(1<<y)-1).toString(32),l>>=y,u-=y,ta=1<<32-wt(t)+u|n<<u|l,aa=h+e}else ta=1<<h|n<<u|l,aa=e}function _o(e){e.return!==null&&(ua(e,1),ih(e,1,0))}function wo(e){for(;e===hi;)hi=Qr[--Kr],Qr[Kr]=null,Jn=Qr[--Kr],Qr[Kr]=null;for(;e===Oa;)Oa=Bt[--Lt],Bt[Lt]=null,aa=Bt[--Lt],Bt[Lt]=null,ta=Bt[--Lt],Bt[Lt]=null}function lh(e,t){Bt[Lt++]=ta,Bt[Lt++]=aa,Bt[Lt++]=Oa,ta=t.id,aa=t.overflow,Oa=e}var it=null,Le=null,_e=!1,Da=null,qt=!1,So=Error(s(519));function Ma(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zn(Ut(t,e)),So}function oh(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[st]=e,t[ft]=l,n){case"dialog":pe("cancel",t),pe("close",t);break;case"iframe":case"object":case"embed":pe("load",t);break;case"video":case"audio":for(n=0;n<_s.length;n++)pe(_s[n],t);break;case"source":pe("error",t);break;case"img":case"image":case"link":pe("error",t),pe("load",t);break;case"details":pe("toggle",t);break;case"input":pe("invalid",t),_d(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":pe("invalid",t);break;case"textarea":pe("invalid",t),Sd(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Am(t.textContent,n)?(l.popover!=null&&(pe("beforetoggle",t),pe("toggle",t)),l.onScroll!=null&&pe("scroll",t),l.onScrollEnd!=null&&pe("scrollend",t),l.onClick!=null&&(t.onclick=la),t=!0):t=!1,t||Ma(e,!0)}function ch(e){for(it=e.return;it;)switch(it.tag){case 5:case 31:case 13:qt=!1;return;case 27:case 3:qt=!0;return;default:it=it.return}}function Wr(e){if(e!==it)return!1;if(!_e)return ch(e),_e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||$c(e.type,e.memoizedProps)),n=!n),n&&Le&&Ma(e),ch(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Le=zm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Le=zm(e)}else t===27?(t=Le,Qa(e.type)?(e=Yc,Yc=null,Le=e):Le=t):Le=it?$t(e.stateNode.nextSibling):null;return!0}function mr(){Le=it=null,_e=!1}function Co(){var e=Da;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),Da=null),e}function Zn(e){Da===null?Da=[e]:Da.push(e)}var jo=Ue(null),gr=null,da=null;function za(e,t,n){ye(jo,t._currentValue),t._currentValue=n}function ha(e){e._currentValue=jo.current,Re(jo)}function Ao(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t,n,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){var y=u.child;h=h.firstContext;e:for(;h!==null;){var w=h;h=u;for(var E=0;E<t.length;E++)if(w.context===t[E]){h.lanes|=n,w=h.alternate,w!==null&&(w.lanes|=n),Ao(h.return,n,e),l||(y=null);break e}h=w.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(s(341));y.lanes|=n,h=y.alternate,h!==null&&(h.lanes|=n),Ao(y,n,e),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===e){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function Xr(e,t,n,l){e=null;for(var u=t,h=!1;u!==null;){if(!h){if((u.flags&524288)!==0)h=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var w=u.type;St(u.pendingProps.value,y.value)||(e!==null?e.push(w):e=[w])}}else if(u===Ke.current){if(y=u.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(As):e=[As])}u=u.return}e!==null&&Eo(t,e,n,l),t.flags|=262144}function fi(e){for(e=e.firstContext;e!==null;){if(!St(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function pr(e){gr=e,da=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function lt(e){return uh(gr,e)}function mi(e,t){return gr===null&&pr(e),uh(e,t)}function uh(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},da===null){if(e===null)throw Error(s(308));da=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else da=da.next=t;return n}var U0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},B0=i.unstable_scheduleCallback,L0=i.unstable_NormalPriority,We={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function No(){return{controller:new U0,data:new Map,refCount:0}}function es(e){e.refCount--,e.refCount===0&&B0(L0,function(){e.controller.abort()})}var ts=null,Ro=0,Jr=0,Zr=null;function q0(e,t){if(ts===null){var n=ts=[];Ro=0,Jr=Oc(),Zr={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Ro++,t.then(dh,dh),t}function dh(){if(--Ro===0&&ts!==null){Zr!==null&&(Zr.status="fulfilled");var e=ts;ts=null,Jr=0,Zr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function P0(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(u){n.push(u)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var u=0;u<n.length;u++)(0,n[u])(t)},function(u){for(l.status="rejected",l.reason=u,u=0;u<n.length;u++)(0,n[u])(void 0)}),l}var hh=B.S;B.S=function(e,t){Wf=xt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&q0(e,t),hh!==null&&hh(e,t)};var yr=Ue(null);function To(){var e=yr.current;return e!==null?e:ze.pooledCache}function gi(e,t){t===null?ye(yr,yr.current):ye(yr,t.pool)}function fh(){var e=To();return e===null?null:{parent:We._currentValue,pool:e}}var en=Error(s(460)),ko=Error(s(474)),pi=Error(s(542)),yi={then:function(){}};function mh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gh(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(la,la),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yh(e),e;default:if(typeof t.status=="string")t.then(la,la);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=l}},function(l){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yh(e),e}throw br=t,en}}function vr(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(br=n,en):n}}var br=null;function ph(){if(br===null)throw Error(s(459));var e=br;return br=null,e}function yh(e){if(e===en||e===pi)throw Error(s(483))}var tn=null,as=0;function vi(e){var t=as;return as+=1,tn===null&&(tn=[]),gh(tn,e,t)}function rs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function bi(e,t){throw t.$$typeof===_?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function vh(e){function t(k,R){if(e){var D=k.deletions;D===null?(k.deletions=[R],k.flags|=16):D.push(R)}}function n(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function l(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function u(k,R){return k=ca(k,R),k.index=0,k.sibling=null,k}function h(k,R,D){return k.index=D,e?(D=k.alternate,D!==null?(D=D.index,D<R?(k.flags|=67108866,R):D):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function y(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function w(k,R,D,q){return R===null||R.tag!==6?(R=bo(D,k.mode,q),R.return=k,R):(R=u(R,D),R.return=k,R)}function E(k,R,D,q){var ne=D.type;return ne===A?L(k,R,D.props.children,q,D.key):R!==null&&(R.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Y&&vr(ne)===R.type)?(R=u(R,D.props),rs(R,D),R.return=k,R):(R=di(D.type,D.key,D.props,null,k.mode,q),rs(R,D),R.return=k,R)}function M(k,R,D,q){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=xo(D,k.mode,q),R.return=k,R):(R=u(R,D.children||[]),R.return=k,R)}function L(k,R,D,q,ne){return R===null||R.tag!==7?(R=fr(D,k.mode,q,ne),R.return=k,R):(R=u(R,D),R.return=k,R)}function $(k,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=bo(""+R,k.mode,D),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case x:return D=di(R.type,R.key,R.props,null,k.mode,D),rs(D,R),D.return=k,D;case C:return R=xo(R,k.mode,D),R.return=k,R;case Y:return R=vr(R),$(k,R,D)}if(de(R)||oe(R))return R=fr(R,k.mode,D,null),R.return=k,R;if(typeof R.then=="function")return $(k,vi(R),D);if(R.$$typeof===O)return $(k,mi(k,R),D);bi(k,R)}return null}function z(k,R,D,q){var ne=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ne!==null?null:w(k,R,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return D.key===ne?E(k,R,D,q):null;case C:return D.key===ne?M(k,R,D,q):null;case Y:return D=vr(D),z(k,R,D,q)}if(de(D)||oe(D))return ne!==null?null:L(k,R,D,q,null);if(typeof D.then=="function")return z(k,R,vi(D),q);if(D.$$typeof===O)return z(k,R,mi(k,D),q);bi(k,D)}return null}function U(k,R,D,q,ne){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return k=k.get(D)||null,w(R,k,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return k=k.get(q.key===null?D:q.key)||null,E(R,k,q,ne);case C:return k=k.get(q.key===null?D:q.key)||null,M(R,k,q,ne);case Y:return q=vr(q),U(k,R,D,q,ne)}if(de(q)||oe(q))return k=k.get(D)||null,L(R,k,q,ne,null);if(typeof q.then=="function")return U(k,R,D,vi(q),ne);if(q.$$typeof===O)return U(k,R,D,mi(R,q),ne);bi(R,q)}return null}function J(k,R,D,q){for(var ne=null,Ce=null,ee=R,fe=R=0,be=null;ee!==null&&fe<D.length;fe++){ee.index>fe?(be=ee,ee=null):be=ee.sibling;var je=z(k,ee,D[fe],q);if(je===null){ee===null&&(ee=be);break}e&&ee&&je.alternate===null&&t(k,ee),R=h(je,R,fe),Ce===null?ne=je:Ce.sibling=je,Ce=je,ee=be}if(fe===D.length)return n(k,ee),_e&&ua(k,fe),ne;if(ee===null){for(;fe<D.length;fe++)ee=$(k,D[fe],q),ee!==null&&(R=h(ee,R,fe),Ce===null?ne=ee:Ce.sibling=ee,Ce=ee);return _e&&ua(k,fe),ne}for(ee=l(ee);fe<D.length;fe++)be=U(ee,k,fe,D[fe],q),be!==null&&(e&&be.alternate!==null&&ee.delete(be.key===null?fe:be.key),R=h(be,R,fe),Ce===null?ne=be:Ce.sibling=be,Ce=be);return e&&ee.forEach(function(Za){return t(k,Za)}),_e&&ua(k,fe),ne}function ie(k,R,D,q){if(D==null)throw Error(s(151));for(var ne=null,Ce=null,ee=R,fe=R=0,be=null,je=D.next();ee!==null&&!je.done;fe++,je=D.next()){ee.index>fe?(be=ee,ee=null):be=ee.sibling;var Za=z(k,ee,je.value,q);if(Za===null){ee===null&&(ee=be);break}e&&ee&&Za.alternate===null&&t(k,ee),R=h(Za,R,fe),Ce===null?ne=Za:Ce.sibling=Za,Ce=Za,ee=be}if(je.done)return n(k,ee),_e&&ua(k,fe),ne;if(ee===null){for(;!je.done;fe++,je=D.next())je=$(k,je.value,q),je!==null&&(R=h(je,R,fe),Ce===null?ne=je:Ce.sibling=je,Ce=je);return _e&&ua(k,fe),ne}for(ee=l(ee);!je.done;fe++,je=D.next())je=U(ee,k,fe,je.value,q),je!==null&&(e&&je.alternate!==null&&ee.delete(je.key===null?fe:je.key),R=h(je,R,fe),Ce===null?ne=je:Ce.sibling=je,Ce=je);return e&&ee.forEach(function(Xv){return t(k,Xv)}),_e&&ua(k,fe),ne}function Me(k,R,D,q){if(typeof D=="object"&&D!==null&&D.type===A&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case x:e:{for(var ne=D.key;R!==null;){if(R.key===ne){if(ne=D.type,ne===A){if(R.tag===7){n(k,R.sibling),q=u(R,D.props.children),q.return=k,k=q;break e}}else if(R.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Y&&vr(ne)===R.type){n(k,R.sibling),q=u(R,D.props),rs(q,D),q.return=k,k=q;break e}n(k,R);break}else t(k,R);R=R.sibling}D.type===A?(q=fr(D.props.children,k.mode,q,D.key),q.return=k,k=q):(q=di(D.type,D.key,D.props,null,k.mode,q),rs(q,D),q.return=k,k=q)}return y(k);case C:e:{for(ne=D.key;R!==null;){if(R.key===ne)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){n(k,R.sibling),q=u(R,D.children||[]),q.return=k,k=q;break e}else{n(k,R);break}else t(k,R);R=R.sibling}q=xo(D,k.mode,q),q.return=k,k=q}return y(k);case Y:return D=vr(D),Me(k,R,D,q)}if(de(D))return J(k,R,D,q);if(oe(D)){if(ne=oe(D),typeof ne!="function")throw Error(s(150));return D=ne.call(D),ie(k,R,D,q)}if(typeof D.then=="function")return Me(k,R,vi(D),q);if(D.$$typeof===O)return Me(k,R,mi(k,D),q);bi(k,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(n(k,R.sibling),q=u(R,D),q.return=k,k=q):(n(k,R),q=bo(D,k.mode,q),q.return=k,k=q),y(k)):n(k,R)}return function(k,R,D,q){try{as=0;var ne=Me(k,R,D,q);return tn=null,ne}catch(ee){if(ee===en||ee===pi)throw ee;var Ce=Ct(29,ee,null,k.mode);return Ce.lanes=q,Ce.return=k,Ce}finally{}}}var xr=vh(!0),bh=vh(!1),Ua=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ae&2)!==0){var u=l.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),l.pending=t,t=ui(e),ah(e,null,n),t}return ci(e,l,t,n),ui(e)}function ns(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ud(e,n)}}function Mo(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var u=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var y={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};h===null?u=h=y:h=h.next=y,n=n.next}while(n!==null);h===null?u=h=t:h=h.next=t}else u=h=t;n={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var zo=!1;function ss(){if(zo){var e=Zr;if(e!==null)throw e}}function is(e,t,n,l){zo=!1;var u=e.updateQueue;Ua=!1;var h=u.firstBaseUpdate,y=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var E=w,M=E.next;E.next=null,y===null?h=M:y.next=M,y=E;var L=e.alternate;L!==null&&(L=L.updateQueue,w=L.lastBaseUpdate,w!==y&&(w===null?L.firstBaseUpdate=M:w.next=M,L.lastBaseUpdate=E))}if(h!==null){var $=u.baseState;y=0,L=M=E=null,w=h;do{var z=w.lane&-536870913,U=z!==w.lane;if(U?(ve&z)===z:(l&z)===z){z!==0&&z===Jr&&(zo=!0),L!==null&&(L=L.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var J=e,ie=w;z=t;var Me=n;switch(ie.tag){case 1:if(J=ie.payload,typeof J=="function"){$=J.call(Me,$,z);break e}$=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=ie.payload,z=typeof J=="function"?J.call(Me,$,z):J,z==null)break e;$=b({},$,z);break e;case 2:Ua=!0}}z=w.callback,z!==null&&(e.flags|=64,U&&(e.flags|=8192),U=u.callbacks,U===null?u.callbacks=[z]:U.push(z))}else U={lane:z,tag:w.tag,payload:w.payload,callback:w.callback,next:null},L===null?(M=L=U,E=$):L=L.next=U,y|=z;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;U=w,w=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);L===null&&(E=$),u.baseState=E,u.firstBaseUpdate=M,u.lastBaseUpdate=L,h===null&&(u.shared.lanes=0),Va|=y,e.lanes=y,e.memoizedState=$}}function xh(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function _h(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xh(n[e],t)}var an=Ue(null),xi=Ue(0);function wh(e,t){e=_a,ye(xi,e),ye(an,t),_a=e|t.baseLanes}function Uo(){ye(xi,_a),ye(an,an.current)}function Bo(){_a=xi.current,Re(an),Re(xi)}var jt=Ue(null),Pt=null;function qa(e){var t=e.alternate;ye(Ye,Ye.current&1),ye(jt,e),Pt===null&&(t===null||an.current!==null||t.memoizedState!==null)&&(Pt=e)}function Lo(e){ye(Ye,Ye.current),ye(jt,e),Pt===null&&(Pt=e)}function Sh(e){e.tag===22?(ye(Ye,Ye.current),ye(jt,e),Pt===null&&(Pt=e)):Pa()}function Pa(){ye(Ye,Ye.current),ye(jt,jt.current)}function At(e){Re(jt),Pt===e&&(Pt=null),Re(Ye)}var Ye=Ue(0);function _i(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Gc(n)||Fc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fa=0,he=null,Oe=null,Xe=null,wi=!1,rn=!1,_r=!1,Si=0,ls=0,nn=null,$0=0;function Ge(){throw Error(s(321))}function qo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!St(e[n],t[n]))return!1;return!0}function Po(e,t,n,l,u,h){return fa=h,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?lf:tc,_r=!1,h=n(l,u),_r=!1,rn&&(h=jh(t,n,l,u)),Ch(e),h}function Ch(e){B.H=us;var t=Oe!==null&&Oe.next!==null;if(fa=0,Xe=Oe=he=null,wi=!1,ls=0,nn=null,t)throw Error(s(300));e===null||Je||(e=e.dependencies,e!==null&&fi(e)&&(Je=!0))}function jh(e,t,n,l){he=e;var u=0;do{if(rn&&(nn=null),ls=0,rn=!1,25<=u)throw Error(s(301));if(u+=1,Xe=Oe=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}B.H=of,h=t(n,l)}while(rn);return h}function H0(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?os(t):t,e=e.useState()[0],(Oe!==null?Oe.memoizedState:null)!==e&&(he.flags|=1024),t}function $o(){var e=Si!==0;return Si=0,e}function Ho(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Vo(e){if(wi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wi=!1}fa=0,Xe=Oe=he=null,rn=!1,ls=Si=0,nn=null}function ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?he.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ie(){if(Oe===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Xe===null?he.memoizedState:Xe.next;if(t!==null)Xe=t,Oe=e;else{if(e===null)throw he.alternate===null?Error(s(467)):Error(s(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Xe===null?he.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Ci(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function os(e){var t=ls;return ls+=1,nn===null&&(nn=[]),e=gh(nn,e,t),t=he,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?lf:tc),e}function ji(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return os(e);if(e.$$typeof===O)return lt(e)}throw Error(s(438,String(e)))}function Go(e){var t=null,n=he.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=he.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ci(),he.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=K;return t.index++,n}function ma(e,t){return typeof t=="function"?t(e):t}function Ai(e){var t=Ie();return Fo(t,Oe,e)}function Fo(e,t,n){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var u=e.baseQueue,h=l.pending;if(h!==null){if(u!==null){var y=u.next;u.next=h.next,h.next=y}t.baseQueue=u=h,l.pending=null}if(h=e.baseState,u===null)e.memoizedState=h;else{t=u.next;var w=y=null,E=null,M=t,L=!1;do{var $=M.lane&-536870913;if($!==M.lane?(ve&$)===$:(fa&$)===$){var z=M.revertLane;if(z===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),$===Jr&&(L=!0);else if((fa&z)===z){M=M.next,z===Jr&&(L=!0);continue}else $={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},E===null?(w=E=$,y=h):E=E.next=$,he.lanes|=z,Va|=z;$=M.action,_r&&n(h,$),h=M.hasEagerState?M.eagerState:n(h,$)}else z={lane:$,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},E===null?(w=E=z,y=h):E=E.next=z,he.lanes|=$,Va|=$;M=M.next}while(M!==null&&M!==t);if(E===null?y=h:E.next=w,!St(h,e.memoizedState)&&(Je=!0,L&&(n=Zr,n!==null)))throw n;e.memoizedState=h,e.baseState=y,e.baseQueue=E,l.lastRenderedState=h}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Yo(e){var t=Ie(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var l=n.dispatch,u=n.pending,h=t.memoizedState;if(u!==null){n.pending=null;var y=u=u.next;do h=e(h,y.action),y=y.next;while(y!==u);St(h,t.memoizedState)||(Je=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,l]}function Ah(e,t,n){var l=he,u=Ie(),h=_e;if(h){if(n===void 0)throw Error(s(407));n=n()}else n=t();var y=!St((Oe||u).memoizedState,n);if(y&&(u.memoizedState=n,Je=!0),u=u.queue,Ko(Rh.bind(null,l,u,e),[e]),u.getSnapshot!==t||y||Xe!==null&&Xe.memoizedState.tag&1){if(l.flags|=2048,sn(9,{destroy:void 0},Nh.bind(null,l,u,n,t),null),ze===null)throw Error(s(349));h||(fa&127)!==0||Eh(l,t,n)}return n}function Eh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t=Ci(),he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nh(e,t,n,l){t.value=n,t.getSnapshot=l,Th(t)&&kh(e)}function Rh(e,t,n){return n(function(){Th(t)&&kh(e)})}function Th(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!St(e,n)}catch{return!0}}function kh(e){var t=hr(e,2);t!==null&&bt(t,e,2)}function Io(e){var t=ht();if(typeof e=="function"){var n=e;if(e=n(),_r){Ra(!0);try{n()}finally{Ra(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:e},t}function Oh(e,t,n,l){return e.baseState=n,Fo(e,Oe,typeof l=="function"?l:ma)}function V0(e,t,n,l,u){if(Ri(e))throw Error(s(485));if(e=t.action,e!==null){var h={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};B.T!==null?n(!0):h.isTransition=!1,l(h),n=t.pending,n===null?(h.next=t.pending=h,Dh(t,h)):(h.next=n.next,t.pending=n.next=h)}}function Dh(e,t){var n=t.action,l=t.payload,u=e.state;if(t.isTransition){var h=B.T,y={};B.T=y;try{var w=n(u,l),E=B.S;E!==null&&E(y,w),Mh(e,t,w)}catch(M){Qo(e,t,M)}finally{h!==null&&y.types!==null&&(h.types=y.types),B.T=h}}else try{h=n(u,l),Mh(e,t,h)}catch(M){Qo(e,t,M)}}function Mh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){zh(e,t,l)},function(l){return Qo(e,t,l)}):zh(e,t,n)}function zh(e,t,n){t.status="fulfilled",t.value=n,Uh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Dh(e,n)))}function Qo(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Uh(t),t=t.next;while(t!==l)}e.action=null}function Uh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bh(e,t){return t}function Lh(e,t){if(_e){var n=ze.formState;if(n!==null){e:{var l=he;if(_e){if(Le){t:{for(var u=Le,h=qt;u.nodeType!==8;){if(!h){u=null;break t}if(u=$t(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){Le=$t(u.nextSibling),l=u.data==="F!";break e}}Ma(l)}l=!1}l&&(t=n[0])}}return n=ht(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:t},n.queue=l,n=rf.bind(null,he,l),l.dispatch=n,l=Io(!1),h=ec.bind(null,he,!1,l.queue),l=ht(),u={state:t,dispatch:null,action:e,pending:null},l.queue=u,n=V0.bind(null,he,u,h,n),u.dispatch=n,l.memoizedState=e,[t,n,!1]}function qh(e){var t=Ie();return Ph(t,Oe,e)}function Ph(e,t,n){if(t=Fo(e,t,Bh)[0],e=Ai(ma)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=os(t)}catch(y){throw y===en?pi:y}else l=t;t=Ie();var u=t.queue,h=u.dispatch;return n!==t.memoizedState&&(he.flags|=2048,sn(9,{destroy:void 0},G0.bind(null,u,n),null)),[l,h,e]}function G0(e,t){e.action=t}function $h(e){var t=Ie(),n=Oe;if(n!==null)return Ph(t,n,e);Ie(),t=t.memoizedState,n=Ie();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function sn(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=he.updateQueue,t===null&&(t=Ci(),he.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Hh(){return Ie().memoizedState}function Ei(e,t,n,l){var u=ht();he.flags|=e,u.memoizedState=sn(1|t,{destroy:void 0},n,l===void 0?null:l)}function Ni(e,t,n,l){var u=Ie();l=l===void 0?null:l;var h=u.memoizedState.inst;Oe!==null&&l!==null&&qo(l,Oe.memoizedState.deps)?u.memoizedState=sn(t,h,n,l):(he.flags|=e,u.memoizedState=sn(1|t,h,n,l))}function Vh(e,t){Ei(8390656,8,e,t)}function Ko(e,t){Ni(2048,8,e,t)}function F0(e){he.flags|=4;var t=he.updateQueue;if(t===null)t=Ci(),he.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Gh(e){var t=Ie().memoizedState;return F0({ref:t,nextImpl:e}),function(){if((Ae&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Fh(e,t){return Ni(4,2,e,t)}function Yh(e,t){return Ni(4,4,e,t)}function Ih(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qh(e,t,n){n=n!=null?n.concat([e]):null,Ni(4,4,Ih.bind(null,t,e),n)}function Wo(){}function Kh(e,t){var n=Ie();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&qo(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Wh(e,t){var n=Ie();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&qo(t,l[1]))return l[0];if(l=e(),_r){Ra(!0);try{e()}finally{Ra(!1)}}return n.memoizedState=[l,t],l}function Xo(e,t,n){return n===void 0||(fa&1073741824)!==0&&(ve&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Jf(),he.lanes|=e,Va|=e,n)}function Xh(e,t,n,l){return St(n,t)?n:an.current!==null?(e=Xo(e,n,l),St(e,t)||(Je=!0),e):(fa&42)===0||(fa&1073741824)!==0&&(ve&261930)===0?(Je=!0,e.memoizedState=n):(e=Jf(),he.lanes|=e,Va|=e,t)}function Jh(e,t,n,l,u){var h=G.p;G.p=h!==0&&8>h?h:8;var y=B.T,w={};B.T=w,ec(e,!1,t,n);try{var E=u(),M=B.S;if(M!==null&&M(w,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var L=P0(E,l);cs(e,t,L,Rt(e))}else cs(e,t,l,Rt(e))}catch($){cs(e,t,{then:function(){},status:"rejected",reason:$},Rt())}finally{G.p=h,y!==null&&w.types!==null&&(y.types=w.types),B.T=y}}function Y0(){}function Jo(e,t,n,l){if(e.tag!==5)throw Error(s(476));var u=Zh(e).queue;Jh(e,u,t,X,n===null?Y0:function(){return ef(e),n(l)})}function Zh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:X},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ef(e){var t=Zh(e);t.next===null&&(t=e.alternate.memoizedState),cs(e,t.next.queue,{},Rt())}function Zo(){return lt(As)}function tf(){return Ie().memoizedState}function af(){return Ie().memoizedState}function I0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Rt();e=Ba(n);var l=La(t,e,n);l!==null&&(bt(l,t,n),ns(l,t,n)),t={cache:No()},e.payload=t;return}t=t.return}}function Q0(e,t,n){var l=Rt();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ri(e)?nf(t,n):(n=yo(e,t,n,l),n!==null&&(bt(n,e,l),sf(n,t,l)))}function rf(e,t,n){var l=Rt();cs(e,t,n,l)}function cs(e,t,n,l){var u={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ri(e))nf(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var y=t.lastRenderedState,w=h(y,n);if(u.hasEagerState=!0,u.eagerState=w,St(w,y))return ci(e,t,u,0),ze===null&&oi(),!1}catch{}finally{}if(n=yo(e,t,u,l),n!==null)return bt(n,e,l),sf(n,t,l),!0}return!1}function ec(e,t,n,l){if(l={lane:2,revertLane:Oc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ri(e)){if(t)throw Error(s(479))}else t=yo(e,n,l,2),t!==null&&bt(t,e,2)}function Ri(e){var t=e.alternate;return e===he||t!==null&&t===he}function nf(e,t){rn=wi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ud(e,n)}}var us={readContext:lt,use:ji,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};us.useEffectEvent=Ge;var lf={readContext:lt,use:ji,useCallback:function(e,t){return ht().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:Vh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ei(4194308,4,Ih.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ei(4194308,4,e,t)},useInsertionEffect:function(e,t){Ei(4,2,e,t)},useMemo:function(e,t){var n=ht();t=t===void 0?null:t;var l=e();if(_r){Ra(!0);try{e()}finally{Ra(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=ht();if(n!==void 0){var u=n(t);if(_r){Ra(!0);try{n(t)}finally{Ra(!1)}}}else u=t;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=Q0.bind(null,he,e),[l.memoizedState,e]},useRef:function(e){var t=ht();return e={current:e},t.memoizedState=e},useState:function(e){e=Io(e);var t=e.queue,n=rf.bind(null,he,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Wo,useDeferredValue:function(e,t){var n=ht();return Xo(n,e,t)},useTransition:function(){var e=Io(!1);return e=Jh.bind(null,he,e.queue,!0,!1),ht().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=he,u=ht();if(_e){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),ze===null)throw Error(s(349));(ve&127)!==0||Eh(l,t,n)}u.memoizedState=n;var h={value:n,getSnapshot:t};return u.queue=h,Vh(Rh.bind(null,l,h,e),[e]),l.flags|=2048,sn(9,{destroy:void 0},Nh.bind(null,l,h,n,t),null),n},useId:function(){var e=ht(),t=ze.identifierPrefix;if(_e){var n=aa,l=ta;n=(l&~(1<<32-wt(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Si++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=$0++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Zo,useFormState:Lh,useActionState:Lh,useOptimistic:function(e){var t=ht();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ec.bind(null,he,!0,n),n.dispatch=t,[e,t]},useMemoCache:Go,useCacheRefresh:function(){return ht().memoizedState=I0.bind(null,he)},useEffectEvent:function(e){var t=ht(),n={impl:e};return t.memoizedState=n,function(){if((Ae&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},tc={readContext:lt,use:ji,useCallback:Kh,useContext:lt,useEffect:Ko,useImperativeHandle:Qh,useInsertionEffect:Fh,useLayoutEffect:Yh,useMemo:Wh,useReducer:Ai,useRef:Hh,useState:function(){return Ai(ma)},useDebugValue:Wo,useDeferredValue:function(e,t){var n=Ie();return Xh(n,Oe.memoizedState,e,t)},useTransition:function(){var e=Ai(ma)[0],t=Ie().memoizedState;return[typeof e=="boolean"?e:os(e),t]},useSyncExternalStore:Ah,useId:tf,useHostTransitionStatus:Zo,useFormState:qh,useActionState:qh,useOptimistic:function(e,t){var n=Ie();return Oh(n,Oe,e,t)},useMemoCache:Go,useCacheRefresh:af};tc.useEffectEvent=Gh;var of={readContext:lt,use:ji,useCallback:Kh,useContext:lt,useEffect:Ko,useImperativeHandle:Qh,useInsertionEffect:Fh,useLayoutEffect:Yh,useMemo:Wh,useReducer:Yo,useRef:Hh,useState:function(){return Yo(ma)},useDebugValue:Wo,useDeferredValue:function(e,t){var n=Ie();return Oe===null?Xo(n,e,t):Xh(n,Oe.memoizedState,e,t)},useTransition:function(){var e=Yo(ma)[0],t=Ie().memoizedState;return[typeof e=="boolean"?e:os(e),t]},useSyncExternalStore:Ah,useId:tf,useHostTransitionStatus:Zo,useFormState:$h,useActionState:$h,useOptimistic:function(e,t){var n=Ie();return Oe!==null?Oh(n,Oe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Go,useCacheRefresh:af};of.useEffectEvent=Gh;function ac(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:b({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Rt(),u=Ba(l);u.payload=t,n!=null&&(u.callback=n),t=La(e,u,l),t!==null&&(bt(t,e,l),ns(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Rt(),u=Ba(l);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=La(e,u,l),t!==null&&(bt(t,e,l),ns(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rt(),l=Ba(n);l.tag=2,t!=null&&(l.callback=t),t=La(e,l,n),t!==null&&(bt(t,e,n),ns(t,e,n))}};function cf(e,t,n,l,u,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,y):t.prototype&&t.prototype.isPureReactComponent?!Wn(n,l)||!Wn(u,h):!0}function uf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&rc.enqueueReplaceState(t,t.state,null)}function wr(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=b({},n));for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n}function df(e){li(e)}function hf(e){console.error(e)}function ff(e){li(e)}function Ti(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function mf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function nc(e,t,n){return n=Ba(n),n.tag=3,n.payload={element:null},n.callback=function(){Ti(e,t)},n}function gf(e){return e=Ba(e),e.tag=3,e}function pf(e,t,n,l){var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var h=l.value;e.payload=function(){return u(h)},e.callback=function(){mf(t,n,l)}}var y=n.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){mf(t,n,l),typeof u!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function K0(e,t,n,l,u){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Xr(t,n,u,!0),n=jt.current,n!==null){switch(n.tag){case 31:case 13:return Pt===null?Hi():n.alternate===null&&Fe===0&&(Fe=3),n.flags&=-257,n.flags|=65536,n.lanes=u,l===yi?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Rc(e,l,u)),!1;case 22:return n.flags|=65536,l===yi?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Rc(e,l,u)),!1}throw Error(s(435,n.tag))}return Rc(e,l,u),Hi(),!1}if(_e)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,l!==So&&(e=Error(s(422),{cause:l}),Zn(Ut(e,n)))):(l!==So&&(t=Error(s(423),{cause:l}),Zn(Ut(t,n))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=Ut(l,n),u=nc(e.stateNode,l,u),Mo(e,u),Fe!==4&&(Fe=2)),!1;var h=Error(s(520),{cause:l});if(h=Ut(h,n),vs===null?vs=[h]:vs.push(h),Fe!==4&&(Fe=2),t===null)return!0;l=Ut(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=u&-u,n.lanes|=e,e=nc(n.stateNode,l,e),Mo(n,e),!1;case 1:if(t=n.type,h=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ga===null||!Ga.has(h))))return n.flags|=65536,u&=-u,n.lanes|=u,u=gf(u),pf(u,e,n,l),Mo(n,u),!1}n=n.return}while(n!==null);return!1}var sc=Error(s(461)),Je=!1;function ot(e,t,n,l){t.child=e===null?bh(t,null,n,l):xr(t,e.child,n,l)}function yf(e,t,n,l,u){n=n.render;var h=t.ref;if("ref"in l){var y={};for(var w in l)w!=="ref"&&(y[w]=l[w])}else y=l;return pr(t),l=Po(e,t,n,y,h,u),w=$o(),e!==null&&!Je?(Ho(e,t,u),ga(e,t,u)):(_e&&w&&_o(t),t.flags|=1,ot(e,t,l,u),t.child)}function vf(e,t,n,l,u){if(e===null){var h=n.type;return typeof h=="function"&&!vo(h)&&h.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=h,bf(e,t,h,l,u)):(e=di(n.type,null,l,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!fc(e,u)){var y=h.memoizedProps;if(n=n.compare,n=n!==null?n:Wn,n(y,l)&&e.ref===t.ref)return ga(e,t,u)}return t.flags|=1,e=ca(h,l),e.ref=t.ref,e.return=t,t.child=e}function bf(e,t,n,l,u){if(e!==null){var h=e.memoizedProps;if(Wn(h,l)&&e.ref===t.ref)if(Je=!1,t.pendingProps=l=h,fc(e,u))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,ga(e,t,u)}return ic(e,t,n,l,u)}function xf(e,t,n,l){var u=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|n:n,e!==null){for(l=t.child=e.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;l=u&~h}else l=0,t.child=null;return _f(e,t,h,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&gi(t,h!==null?h.cachePool:null),h!==null?wh(t,h):Uo(),Sh(t);else return l=t.lanes=536870912,_f(e,t,h!==null?h.baseLanes|n:n,n,l)}else h!==null?(gi(t,h.cachePool),wh(t,h),Pa(),t.memoizedState=null):(e!==null&&gi(t,null),Uo(),Pa());return ot(e,t,u,n),t.child}function ds(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function _f(e,t,n,l,u){var h=To();return h=h===null?null:{parent:We._currentValue,pool:h},t.memoizedState={baseLanes:n,cachePool:h},e!==null&&gi(t,null),Uo(),Sh(t),e!==null&&Xr(e,t,l,!0),t.childLanes=u,null}function ki(e,t){return t=Di({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function wf(e,t,n){return xr(t,e.child,null,n),e=ki(t,t.pendingProps),e.flags|=2,At(t),t.memoizedState=null,e}function W0(e,t,n){var l=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(_e){if(l.mode==="hidden")return e=ki(t,l),t.lanes=536870912,ds(null,e);if(Lo(t),(e=Le)?(e=Mm(e,qt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Oa!==null?{id:ta,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},n=nh(e),n.return=t,t.child=n,it=t,Le=null)):e=null,e===null)throw Ma(t);return t.lanes=536870912,null}return ki(t,l)}var h=e.memoizedState;if(h!==null){var y=h.dehydrated;if(Lo(t),u)if(t.flags&256)t.flags&=-257,t=wf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Je||Xr(e,t,n,!1),u=(n&e.childLanes)!==0,Je||u){if(l=ze,l!==null&&(y=dd(l,n),y!==0&&y!==h.retryLane))throw h.retryLane=y,hr(e,y),bt(l,e,y),sc;Hi(),t=wf(e,t,n)}else e=h.treeContext,Le=$t(y.nextSibling),it=t,_e=!0,Da=null,qt=!1,e!==null&&lh(t,e),t=ki(t,l),t.flags|=4096;return t}return e=ca(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Oi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ic(e,t,n,l,u){return pr(t),n=Po(e,t,n,l,void 0,u),l=$o(),e!==null&&!Je?(Ho(e,t,u),ga(e,t,u)):(_e&&l&&_o(t),t.flags|=1,ot(e,t,n,u),t.child)}function Sf(e,t,n,l,u,h){return pr(t),t.updateQueue=null,n=jh(t,l,n,u),Ch(e),l=$o(),e!==null&&!Je?(Ho(e,t,h),ga(e,t,h)):(_e&&l&&_o(t),t.flags|=1,ot(e,t,n,h),t.child)}function Cf(e,t,n,l,u){if(pr(t),t.stateNode===null){var h=Ir,y=n.contextType;typeof y=="object"&&y!==null&&(h=lt(y)),h=new n(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=rc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},Oo(t),y=n.contextType,h.context=typeof y=="object"&&y!==null?lt(y):Ir,h.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(ac(t,n,y,l),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&rc.enqueueReplaceState(h,h.state,null),is(t,l,h,u),ss(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var w=t.memoizedProps,E=wr(n,w);h.props=E;var M=h.context,L=n.contextType;y=Ir,typeof L=="object"&&L!==null&&(y=lt(L));var $=n.getDerivedStateFromProps;L=typeof $=="function"||typeof h.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,L||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w||M!==y)&&uf(t,h,l,y),Ua=!1;var z=t.memoizedState;h.state=z,is(t,l,h,u),ss(),M=t.memoizedState,w||z!==M||Ua?(typeof $=="function"&&(ac(t,n,$,l),M=t.memoizedState),(E=Ua||cf(t,n,E,l,z,M,y))?(L||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=M),h.props=l,h.state=M,h.context=y,l=E):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,Do(e,t),y=t.memoizedProps,L=wr(n,y),h.props=L,$=t.pendingProps,z=h.context,M=n.contextType,E=Ir,typeof M=="object"&&M!==null&&(E=lt(M)),w=n.getDerivedStateFromProps,(M=typeof w=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==$||z!==E)&&uf(t,h,l,E),Ua=!1,z=t.memoizedState,h.state=z,is(t,l,h,u),ss();var U=t.memoizedState;y!==$||z!==U||Ua||e!==null&&e.dependencies!==null&&fi(e.dependencies)?(typeof w=="function"&&(ac(t,n,w,l),U=t.memoizedState),(L=Ua||cf(t,n,L,l,z,U,E)||e!==null&&e.dependencies!==null&&fi(e.dependencies))?(M||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,U,E),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,U,E)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=U),h.props=l,h.state=U,h.context=E,l=L):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,Oi(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=xr(t,e.child,null,u),t.child=xr(t,null,n,u)):ot(e,t,n,u),t.memoizedState=h.state,e=t.child):e=ga(e,t,u),e}function jf(e,t,n,l){return mr(),t.flags|=256,ot(e,t,n,l),t.child}var lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oc(e){return{baseLanes:e,cachePool:fh()}}function cc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Nt),e}function Af(e,t,n){var l=t.pendingProps,u=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),y&&(u=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(u?qa(t):Pa(),(e=Le)?(e=Mm(e,qt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Oa!==null?{id:ta,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},n=nh(e),n.return=t,t.child=n,it=t,Le=null)):e=null,e===null)throw Ma(t);return Fc(e)?t.lanes=32:t.lanes=536870912,null}var w=l.children;return l=l.fallback,u?(Pa(),u=t.mode,w=Di({mode:"hidden",children:w},u),l=fr(l,u,n,null),w.return=t,l.return=t,w.sibling=l,t.child=w,l=t.child,l.memoizedState=oc(n),l.childLanes=cc(e,y,n),t.memoizedState=lc,ds(null,l)):(qa(t),uc(t,w))}var E=e.memoizedState;if(E!==null&&(w=E.dehydrated,w!==null)){if(h)t.flags&256?(qa(t),t.flags&=-257,t=dc(e,t,n)):t.memoizedState!==null?(Pa(),t.child=e.child,t.flags|=128,t=null):(Pa(),w=l.fallback,u=t.mode,l=Di({mode:"visible",children:l.children},u),w=fr(w,u,n,null),w.flags|=2,l.return=t,w.return=t,l.sibling=w,t.child=l,xr(t,e.child,null,n),l=t.child,l.memoizedState=oc(n),l.childLanes=cc(e,y,n),t.memoizedState=lc,t=ds(null,l));else if(qa(t),Fc(w)){if(y=w.nextSibling&&w.nextSibling.dataset,y)var M=y.dgst;y=M,l=Error(s(419)),l.stack="",l.digest=y,Zn({value:l,source:null,stack:null}),t=dc(e,t,n)}else if(Je||Xr(e,t,n,!1),y=(n&e.childLanes)!==0,Je||y){if(y=ze,y!==null&&(l=dd(y,n),l!==0&&l!==E.retryLane))throw E.retryLane=l,hr(e,l),bt(y,e,l),sc;Gc(w)||Hi(),t=dc(e,t,n)}else Gc(w)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,Le=$t(w.nextSibling),it=t,_e=!0,Da=null,qt=!1,e!==null&&lh(t,e),t=uc(t,l.children),t.flags|=4096);return t}return u?(Pa(),w=l.fallback,u=t.mode,E=e.child,M=E.sibling,l=ca(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&65011712,M!==null?w=ca(M,w):(w=fr(w,u,n,null),w.flags|=2),w.return=t,l.return=t,l.sibling=w,t.child=l,ds(null,l),l=t.child,w=e.child.memoizedState,w===null?w=oc(n):(u=w.cachePool,u!==null?(E=We._currentValue,u=u.parent!==E?{parent:E,pool:E}:u):u=fh(),w={baseLanes:w.baseLanes|n,cachePool:u}),l.memoizedState=w,l.childLanes=cc(e,y,n),t.memoizedState=lc,ds(e.child,l)):(qa(t),n=e.child,e=n.sibling,n=ca(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=n,t.memoizedState=null,n)}function uc(e,t){return t=Di({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Di(e,t){return e=Ct(22,e,null,t),e.lanes=0,e}function dc(e,t,n){return xr(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ef(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ao(e.return,t,n)}function hc(e,t,n,l,u,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:u,treeForkCount:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=n,y.tailMode=u,y.treeForkCount=h)}function Nf(e,t,n){var l=t.pendingProps,u=l.revealOrder,h=l.tail;l=l.children;var y=Ye.current,w=(y&2)!==0;if(w?(y=y&1|2,t.flags|=128):y&=1,ye(Ye,y),ot(e,t,l,n),l=_e?Jn:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ef(e,n,t);else if(e.tag===19)Ef(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&_i(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),hc(t,!1,u,n,h,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&_i(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}hc(t,!0,n,null,h,l);break;case"together":hc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function ga(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Va|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Xr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=ca(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ca(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fi(e)))}function X0(e,t,n){switch(t.tag){case 3:Vt(t,t.stateNode.containerInfo),za(t,We,e.memoizedState.cache),mr();break;case 27:case 5:Na(t);break;case 4:Vt(t,t.stateNode.containerInfo);break;case 10:za(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Lo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(qa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Af(e,t,n):(qa(t),e=ga(e,t,n),e!==null?e.sibling:null);qa(t);break;case 19:var u=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Xr(e,t,n,!1),l=(n&t.childLanes)!==0),u){if(l)return Nf(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ye(Ye,Ye.current),l)break;return null;case 22:return t.lanes=0,xf(e,t,n,t.pendingProps);case 24:za(t,We,e.memoizedState.cache)}return ga(e,t,n)}function Rf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!fc(e,n)&&(t.flags&128)===0)return Je=!1,X0(e,t,n);Je=(e.flags&131072)!==0}else Je=!1,_e&&(t.flags&1048576)!==0&&ih(t,Jn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=vr(t.elementType),t.type=e,typeof e=="function")vo(e)?(l=wr(e,l),t.tag=1,t=Cf(null,t,e,l,n)):(t.tag=0,t=ic(null,t,e,l,n));else{if(e!=null){var u=e.$$typeof;if(u===H){t.tag=11,t=yf(null,t,e,l,n);break e}else if(u===te){t.tag=14,t=vf(null,t,e,l,n);break e}}throw t=I(e)||e,Error(s(306,t,""))}}return t;case 0:return ic(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,u=wr(l,t.pendingProps),Cf(e,t,l,u,n);case 3:e:{if(Vt(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var h=t.memoizedState;u=h.element,Do(e,t),is(t,l,null,n);var y=t.memoizedState;if(l=y.cache,za(t,We,l),l!==h.cache&&Eo(t,[We],n,!0),ss(),l=y.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=jf(e,t,l,n);break e}else if(l!==u){u=Ut(Error(s(424)),t),Zn(u),t=jf(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=$t(e.firstChild),it=t,_e=!0,Da=null,qt=!0,n=bh(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(mr(),l===u){t=ga(e,t,n);break e}ot(e,t,l,n)}t=t.child}return t;case 26:return Oi(e,t),e===null?(n=Pm(t.type,null,t.pendingProps,null))?t.memoizedState=n:_e||(n=t.type,e=t.pendingProps,l=Ki(Ot.current).createElement(n),l[st]=t,l[ft]=e,ct(l,n,e),rt(l),t.stateNode=l):t.memoizedState=Pm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Na(t),e===null&&_e&&(l=t.stateNode=Bm(t.type,t.pendingProps,Ot.current),it=t,qt=!0,u=Le,Qa(t.type)?(Yc=u,Le=$t(l.firstChild)):Le=u),ot(e,t,t.pendingProps.children,n),Oi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((u=l=Le)&&(l=Ev(l,t.type,t.pendingProps,qt),l!==null?(t.stateNode=l,it=t,Le=$t(l.firstChild),qt=!1,u=!0):u=!1),u||Ma(t)),Na(t),u=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,l=h.children,$c(u,h)?l=null:y!==null&&$c(u,y)&&(t.flags|=32),t.memoizedState!==null&&(u=Po(e,t,H0,null,null,n),As._currentValue=u),Oi(e,t),ot(e,t,l,n),t.child;case 6:return e===null&&_e&&((e=n=Le)&&(n=Nv(n,t.pendingProps,qt),n!==null?(t.stateNode=n,it=t,Le=null,e=!0):e=!1),e||Ma(t)),null;case 13:return Af(e,t,n);case 4:return Vt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=xr(t,null,l,n):ot(e,t,l,n),t.child;case 11:return yf(e,t,t.type,t.pendingProps,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,za(t,t.type,l.value),ot(e,t,l.children,n),t.child;case 9:return u=t.type._context,l=t.pendingProps.children,pr(t),u=lt(u),l=l(u),t.flags|=1,ot(e,t,l,n),t.child;case 14:return vf(e,t,t.type,t.pendingProps,n);case 15:return bf(e,t,t.type,t.pendingProps,n);case 19:return Nf(e,t,n);case 31:return W0(e,t,n);case 22:return xf(e,t,n,t.pendingProps);case 24:return pr(t),l=lt(We),e===null?(u=To(),u===null&&(u=ze,h=No(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=n),u=h),t.memoizedState={parent:l,cache:u},Oo(t),za(t,We,u)):((e.lanes&n)!==0&&(Do(e,t),is(t,null,null,n),ss()),u=e.memoizedState,h=t.memoizedState,u.parent!==l?(u={parent:l,cache:l},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),za(t,We,l)):(l=h.cache,za(t,We,l),l!==u.cache&&Eo(t,[We],n,!0))),ot(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function pa(e){e.flags|=4}function mc(e,t,n,l,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(am())e.flags|=8192;else throw br=yi,ko}else e.flags&=-16777217}function Tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fm(t))if(am())e.flags|=8192;else throw br=yi,ko}function Mi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?od():536870912,e.lanes|=t,un|=t)}function hs(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function J0(e,t,n){var l=t.pendingProps;switch(wo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ha(We),Gt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wr(t)?pa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Co())),qe(t),null;case 26:var u=t.type,h=t.memoizedState;return e===null?(pa(t),h!==null?(qe(t),Tf(t,h)):(qe(t),mc(t,u,null,l,n))):h?h!==e.memoizedState?(pa(t),qe(t),Tf(t,h)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&pa(t),qe(t),mc(t,u,e,l,n)),null;case 27:if(se(t),n=Ot.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return qe(t),null}e=Se.current,Wr(t)?oh(t):(e=Bm(u,l,n),t.stateNode=e,pa(t))}return qe(t),null;case 5:if(se(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return qe(t),null}if(h=Se.current,Wr(t))oh(t);else{var y=Ki(Ot.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?y.createElement(u,{is:l.is}):y.createElement(u)}}h[st]=t,h[ft]=l;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=h;e:switch(ct(h,u,l),u){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&pa(t)}}return qe(t),mc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ot.current,Wr(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,u=it,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[st]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Am(e.nodeValue,n)),e||Ma(t,!0)}else e=Ki(e).createTextNode(l),e[st]=t,t.stateNode=e}return qe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Wr(t),n!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[st]=t}else mr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else n=Co(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(At(t),t):(At(t),null);if((t.flags&128)!==0)throw Error(s(558))}return qe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Wr(t),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[st]=t}else mr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),u=!1}else u=Co(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(At(t),t):(At(t),null)}return At(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Mi(t,t.updateQueue),qe(t),null);case 4:return Gt(),e===null&&Uc(t.stateNode.containerInfo),qe(t),null;case 10:return ha(t.type),qe(t),null;case 19:if(Re(Ye),l=t.memoizedState,l===null)return qe(t),null;if(u=(t.flags&128)!==0,h=l.rendering,h===null)if(u)hs(l,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=_i(e),h!==null){for(t.flags|=128,hs(l,!1),e=h.updateQueue,t.updateQueue=e,Mi(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)rh(n,e),n=n.sibling;return ye(Ye,Ye.current&1|2),_e&&ua(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&xt()>qi&&(t.flags|=128,u=!0,hs(l,!1),t.lanes=4194304)}else{if(!u)if(e=_i(h),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Mi(t,e),hs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!_e)return qe(t),null}else 2*xt()-l.renderingStartTime>qi&&n!==536870912&&(t.flags|=128,u=!0,hs(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=xt(),e.sibling=null,n=Ye.current,ye(Ye,u?n&1|2:n&1),_e&&ua(t,l.treeForkCount),e):(qe(t),null);case 22:case 23:return At(t),Bo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),n=t.updateQueue,n!==null&&Mi(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&Re(yr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ha(We),qe(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Z0(e,t){switch(wo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ha(We),Gt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return se(t),null;case 31:if(t.memoizedState!==null){if(At(t),t.alternate===null)throw Error(s(340));mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(At(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ye),null;case 4:return Gt(),null;case 10:return ha(t.type),null;case 22:case 23:return At(t),Bo(),e!==null&&Re(yr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ha(We),null;case 25:return null;default:return null}}function kf(e,t){switch(wo(t),t.tag){case 3:ha(We),Gt();break;case 26:case 27:case 5:se(t);break;case 4:Gt();break;case 31:t.memoizedState!==null&&At(t);break;case 13:At(t);break;case 19:Re(Ye);break;case 10:ha(t.type);break;case 22:case 23:At(t),Bo(),e!==null&&Re(yr);break;case 24:ha(We)}}function fs(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var u=l.next;n=u;do{if((n.tag&e)===e){l=void 0;var h=n.create,y=n.inst;l=h(),y.destroy=l}n=n.next}while(n!==u)}}catch(w){ke(t,t.return,w)}}function $a(e,t,n){try{var l=t.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&e)===e){var y=l.inst,w=y.destroy;if(w!==void 0){y.destroy=void 0,u=t;var E=n,M=w;try{M()}catch(L){ke(u,E,L)}}}l=l.next}while(l!==h)}}catch(L){ke(t,t.return,L)}}function Of(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{_h(t,n)}catch(l){ke(e,e.return,l)}}}function Df(e,t,n){n.props=wr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){ke(e,t,l)}}function ms(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(u){ke(e,t,u)}}function ra(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(u){ke(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(u){ke(e,t,u)}else n.current=null}function Mf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(u){ke(e,e.return,u)}}function gc(e,t,n){try{var l=e.stateNode;_v(l,e.type,n,t),l[ft]=t}catch(u){ke(e,e.return,u)}}function zf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qa(e.type)||e.tag===4}function pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=la));else if(l!==4&&(l===27&&Qa(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}function zi(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&Qa(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(zi(e,t,n),e=e.sibling;e!==null;)zi(e,t,n),e=e.sibling}function Uf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);ct(t,l,n),t[st]=e,t[ft]=n}catch(h){ke(e,e.return,h)}}var ya=!1,Ze=!1,vc=!1,Bf=typeof WeakSet=="function"?WeakSet:Set,nt=null;function ev(e,t){if(e=e.containerInfo,qc=al,e=Qd(e),uo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var y=0,w=-1,E=-1,M=0,L=0,$=e,z=null;t:for(;;){for(var U;$!==n||u!==0&&$.nodeType!==3||(w=y+u),$!==h||l!==0&&$.nodeType!==3||(E=y+l),$.nodeType===3&&(y+=$.nodeValue.length),(U=$.firstChild)!==null;)z=$,$=U;for(;;){if($===e)break t;if(z===n&&++M===u&&(w=y),z===h&&++L===l&&(E=y),(U=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=U}n=w===-1||E===-1?null:{start:w,end:E}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pc={focusedElem:e,selectionRange:n},al=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){switch(t=nt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)u=e[n],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,n=t,u=h.memoizedProps,h=h.memoizedState,l=n.stateNode;try{var J=wr(n.type,u);e=l.getSnapshotBeforeUpdate(J,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(ie){ke(n,n.return,ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Vc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}}function Lf(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:ba(e,n),l&4&&fs(5,n);break;case 1:if(ba(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(y){ke(n,n.return,y)}else{var u=wr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ke(n,n.return,y)}}l&64&&Of(n),l&512&&ms(n,n.return);break;case 3:if(ba(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{_h(e,t)}catch(y){ke(n,n.return,y)}}break;case 27:t===null&&l&4&&Uf(n);case 26:case 5:ba(e,n),t===null&&l&4&&Mf(n),l&512&&ms(n,n.return);break;case 12:ba(e,n);break;case 31:ba(e,n),l&4&&$f(e,n);break;case 13:ba(e,n),l&4&&Hf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=cv.bind(null,n),Rv(e,n))));break;case 22:if(l=n.memoizedState!==null||ya,!l){t=t!==null&&t.memoizedState!==null||Ze,u=ya;var h=Ze;ya=l,(Ze=t)&&!h?xa(e,n,(n.subtreeFlags&8772)!==0):ba(e,n),ya=u,Ze=h}break;case 30:break;default:ba(e,n)}}function qf(e){var t=e.alternate;t!==null&&(e.alternate=null,qf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Il(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,gt=!1;function va(e,t,n){for(n=n.child;n!==null;)Pf(e,t,n),n=n.sibling}function Pf(e,t,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ln,n)}catch{}switch(n.tag){case 26:Ze||ra(n,t),va(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ze||ra(n,t);var l=Pe,u=gt;Qa(n.type)&&(Pe=n.stateNode,gt=!1),va(e,t,n),Ss(n.stateNode),Pe=l,gt=u;break;case 5:Ze||ra(n,t);case 6:if(l=Pe,u=gt,Pe=null,va(e,t,n),Pe=l,gt=u,Pe!==null)if(gt)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(n.stateNode)}catch(h){ke(n,t,h)}else try{Pe.removeChild(n.stateNode)}catch(h){ke(n,t,h)}break;case 18:Pe!==null&&(gt?(e=Pe,Om(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),vn(e)):Om(Pe,n.stateNode));break;case 4:l=Pe,u=gt,Pe=n.stateNode.containerInfo,gt=!0,va(e,t,n),Pe=l,gt=u;break;case 0:case 11:case 14:case 15:$a(2,n,t),Ze||$a(4,n,t),va(e,t,n);break;case 1:Ze||(ra(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Df(n,t,l)),va(e,t,n);break;case 21:va(e,t,n);break;case 22:Ze=(l=Ze)||n.memoizedState!==null,va(e,t,n),Ze=l;break;default:va(e,t,n)}}function $f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vn(e)}catch(n){ke(t,t.return,n)}}}function Hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vn(e)}catch(n){ke(t,t.return,n)}}function tv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Bf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Bf),t;default:throw Error(s(435,e.tag))}}function Ui(e,t){var n=tv(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var u=uv.bind(null,e,l);l.then(u,u)}})}function pt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var u=n[l],h=e,y=t,w=y;e:for(;w!==null;){switch(w.tag){case 27:if(Qa(w.type)){Pe=w.stateNode,gt=!1;break e}break;case 5:Pe=w.stateNode,gt=!1;break e;case 3:case 4:Pe=w.stateNode.containerInfo,gt=!0;break e}w=w.return}if(Pe===null)throw Error(s(160));Pf(h,y,u),Pe=null,gt=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Vf(t,e),t=t.sibling}var Yt=null;function Vf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pt(t,e),yt(e),l&4&&($a(3,e,e.return),fs(3,e),$a(5,e,e.return));break;case 1:pt(t,e),yt(e),l&512&&(Ze||n===null||ra(n,n.return)),l&64&&ya&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var u=Yt;if(pt(t,e),yt(e),l&512&&(Ze||n===null||ra(n,n.return)),l&4){var h=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":h=u.getElementsByTagName("title")[0],(!h||h[$n]||h[st]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(l),u.head.insertBefore(h,u.querySelector("head > title"))),ct(h,l,n),h[st]=e,rt(h),l=h;break e;case"link":var y=Vm("link","href",u).get(l+(n.href||""));if(y){for(var w=0;w<y.length;w++)if(h=y[w],h.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&h.getAttribute("rel")===(n.rel==null?null:n.rel)&&h.getAttribute("title")===(n.title==null?null:n.title)&&h.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){y.splice(w,1);break t}}h=u.createElement(l),ct(h,l,n),u.head.appendChild(h);break;case"meta":if(y=Vm("meta","content",u).get(l+(n.content||""))){for(w=0;w<y.length;w++)if(h=y[w],h.getAttribute("content")===(n.content==null?null:""+n.content)&&h.getAttribute("name")===(n.name==null?null:n.name)&&h.getAttribute("property")===(n.property==null?null:n.property)&&h.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&h.getAttribute("charset")===(n.charSet==null?null:n.charSet)){y.splice(w,1);break t}}h=u.createElement(l),ct(h,l,n),u.head.appendChild(h);break;default:throw Error(s(468,l))}h[st]=e,rt(h),l=h}e.stateNode=l}else Gm(u,e.type,e.stateNode);else e.stateNode=Hm(u,l,e.memoizedProps);else h!==l?(h===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):h.count--,l===null?Gm(u,e.type,e.stateNode):Hm(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&gc(e,e.memoizedProps,n.memoizedProps)}break;case 27:pt(t,e),yt(e),l&512&&(Ze||n===null||ra(n,n.return)),n!==null&&l&4&&gc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(pt(t,e),yt(e),l&512&&(Ze||n===null||ra(n,n.return)),e.flags&32){u=e.stateNode;try{Pr(u,"")}catch(J){ke(e,e.return,J)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,gc(e,u,n!==null?n.memoizedProps:u)),l&1024&&(vc=!0);break;case 6:if(pt(t,e),yt(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(J){ke(e,e.return,J)}}break;case 3:if(Ji=null,u=Yt,Yt=Wi(t.containerInfo),pt(t,e),Yt=u,yt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{vn(t.containerInfo)}catch(J){ke(e,e.return,J)}vc&&(vc=!1,Gf(e));break;case 4:l=Yt,Yt=Wi(e.stateNode.containerInfo),pt(t,e),yt(e),Yt=l;break;case 12:pt(t,e),yt(e);break;case 31:pt(t,e),yt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ui(e,l)));break;case 13:pt(t,e),yt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Li=xt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ui(e,l)));break;case 22:u=e.memoizedState!==null;var E=n!==null&&n.memoizedState!==null,M=ya,L=Ze;if(ya=M||u,Ze=L||E,pt(t,e),Ze=L,ya=M,yt(e),l&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(n===null||E||ya||Ze||Sr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){E=n=t;try{if(h=E.stateNode,u)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=E.stateNode;var $=E.memoizedProps.style,z=$!=null&&$.hasOwnProperty("display")?$.display:null;w.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(J){ke(E,E.return,J)}}}else if(t.tag===6){if(n===null){E=t;try{E.stateNode.nodeValue=u?"":E.memoizedProps}catch(J){ke(E,E.return,J)}}}else if(t.tag===18){if(n===null){E=t;try{var U=E.stateNode;u?Dm(U,!0):Dm(E.stateNode,!1)}catch(J){ke(E,E.return,J)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Ui(e,n))));break;case 19:pt(t,e),yt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ui(e,l)));break;case 30:break;case 21:break;default:pt(t,e),yt(e)}}function yt(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(zf(l)){n=l;break}l=l.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var u=n.stateNode,h=pc(e);zi(e,h,u);break;case 5:var y=n.stateNode;n.flags&32&&(Pr(y,""),n.flags&=-33);var w=pc(e);zi(e,w,y);break;case 3:case 4:var E=n.stateNode.containerInfo,M=pc(e);yc(e,M,E);break;default:throw Error(s(161))}}catch(L){ke(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Gf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ba(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lf(e,t.alternate,t),t=t.sibling}function Sr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$a(4,t,t.return),Sr(t);break;case 1:ra(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Df(t,t.return,n),Sr(t);break;case 27:Ss(t.stateNode);case 26:case 5:ra(t,t.return),Sr(t);break;case 22:t.memoizedState===null&&Sr(t);break;case 30:Sr(t);break;default:Sr(t)}e=e.sibling}}function xa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,u=e,h=t,y=h.flags;switch(h.tag){case 0:case 11:case 15:xa(u,h,n),fs(4,h);break;case 1:if(xa(u,h,n),l=h,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(M){ke(l,l.return,M)}if(l=h,u=l.updateQueue,u!==null){var w=l.stateNode;try{var E=u.shared.hiddenCallbacks;if(E!==null)for(u.shared.hiddenCallbacks=null,u=0;u<E.length;u++)xh(E[u],w)}catch(M){ke(l,l.return,M)}}n&&y&64&&Of(h),ms(h,h.return);break;case 27:Uf(h);case 26:case 5:xa(u,h,n),n&&l===null&&y&4&&Mf(h),ms(h,h.return);break;case 12:xa(u,h,n);break;case 31:xa(u,h,n),n&&y&4&&$f(u,h);break;case 13:xa(u,h,n),n&&y&4&&Hf(u,h);break;case 22:h.memoizedState===null&&xa(u,h,n),ms(h,h.return);break;case 30:break;default:xa(u,h,n)}t=t.sibling}}function bc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&es(n))}function xc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&es(e))}function It(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ff(e,t,n,l),t=t.sibling}function Ff(e,t,n,l){var u=t.flags;switch(t.tag){case 0:case 11:case 15:It(e,t,n,l),u&2048&&fs(9,t);break;case 1:It(e,t,n,l);break;case 3:It(e,t,n,l),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&es(e)));break;case 12:if(u&2048){It(e,t,n,l),e=t.stateNode;try{var h=t.memoizedProps,y=h.id,w=h.onPostCommit;typeof w=="function"&&w(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){ke(t,t.return,E)}}else It(e,t,n,l);break;case 31:It(e,t,n,l);break;case 13:It(e,t,n,l);break;case 23:break;case 22:h=t.stateNode,y=t.alternate,t.memoizedState!==null?h._visibility&2?It(e,t,n,l):gs(e,t):h._visibility&2?It(e,t,n,l):(h._visibility|=2,ln(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),u&2048&&bc(y,t);break;case 24:It(e,t,n,l),u&2048&&xc(t.alternate,t);break;default:It(e,t,n,l)}}function ln(e,t,n,l,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,y=t,w=n,E=l,M=y.flags;switch(y.tag){case 0:case 11:case 15:ln(h,y,w,E,u),fs(8,y);break;case 23:break;case 22:var L=y.stateNode;y.memoizedState!==null?L._visibility&2?ln(h,y,w,E,u):gs(h,y):(L._visibility|=2,ln(h,y,w,E,u)),u&&M&2048&&bc(y.alternate,y);break;case 24:ln(h,y,w,E,u),u&&M&2048&&xc(y.alternate,y);break;default:ln(h,y,w,E,u)}t=t.sibling}}function gs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,u=l.flags;switch(l.tag){case 22:gs(n,l),u&2048&&bc(l.alternate,l);break;case 24:gs(n,l),u&2048&&xc(l.alternate,l);break;default:gs(n,l)}t=t.sibling}}var ps=8192;function on(e,t,n){if(e.subtreeFlags&ps)for(e=e.child;e!==null;)Yf(e,t,n),e=e.sibling}function Yf(e,t,n){switch(e.tag){case 26:on(e,t,n),e.flags&ps&&e.memoizedState!==null&&$v(n,Yt,e.memoizedState,e.memoizedProps);break;case 5:on(e,t,n);break;case 3:case 4:var l=Yt;Yt=Wi(e.stateNode.containerInfo),on(e,t,n),Yt=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ps,ps=16777216,on(e,t,n),ps=l):on(e,t,n));break;default:on(e,t,n)}}function If(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ys(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];nt=l,Kf(l,e)}If(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qf(e),e=e.sibling}function Qf(e){switch(e.tag){case 0:case 11:case 15:ys(e),e.flags&2048&&$a(9,e,e.return);break;case 3:ys(e);break;case 12:ys(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Bi(e)):ys(e);break;default:ys(e)}}function Bi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];nt=l,Kf(l,e)}If(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$a(8,t,t.return),Bi(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Bi(t));break;default:Bi(t)}e=e.sibling}}function Kf(e,t){for(;nt!==null;){var n=nt;switch(n.tag){case 0:case 11:case 15:$a(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:es(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,nt=l;else e:for(n=e;nt!==null;){l=nt;var u=l.sibling,h=l.return;if(qf(l),l===n){nt=null;break e}if(u!==null){u.return=h,nt=u;break e}nt=h}}}var av={getCacheForType:function(e){var t=lt(We),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return lt(We).controller.signal}},rv=typeof WeakMap=="function"?WeakMap:Map,Ae=0,ze=null,ge=null,ve=0,Te=0,Et=null,Ha=!1,cn=!1,_c=!1,_a=0,Fe=0,Va=0,Cr=0,wc=0,Nt=0,un=0,vs=null,vt=null,Sc=!1,Li=0,Wf=0,qi=1/0,Pi=null,Ga=null,tt=0,Fa=null,dn=null,wa=0,Cc=0,jc=null,Xf=null,bs=0,Ac=null;function Rt(){return(Ae&2)!==0&&ve!==0?ve&-ve:B.T!==null?Oc():hd()}function Jf(){if(Nt===0)if((ve&536870912)===0||_e){var e=Qs;Qs<<=1,(Qs&3932160)===0&&(Qs=262144),Nt=e}else Nt=536870912;return e=jt.current,e!==null&&(e.flags|=32),Nt}function bt(e,t,n){(e===ze&&(Te===2||Te===9)||e.cancelPendingCommit!==null)&&(hn(e,0),Ya(e,ve,Nt,!1)),Pn(e,n),((Ae&2)===0||e!==ze)&&(e===ze&&((Ae&2)===0&&(Cr|=n),Fe===4&&Ya(e,ve,Nt,!1)),na(e))}function Zf(e,t,n){if((Ae&6)!==0)throw Error(s(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||qn(e,t),u=l?iv(e,t):Nc(e,t,!0),h=l;do{if(u===0){cn&&!l&&Ya(e,t,0,!1);break}else{if(n=e.current.alternate,h&&!nv(n)){u=Nc(e,t,!1),h=!1;continue}if(u===2){if(h=t,e.errorRecoveryDisabledLanes&h)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var w=e;u=vs;var E=w.current.memoizedState.isDehydrated;if(E&&(hn(w,y).flags|=256),y=Nc(w,y,!1),y!==2){if(_c&&!E){w.errorRecoveryDisabledLanes|=h,Cr|=h,u=4;break e}h=vt,vt=u,h!==null&&(vt===null?vt=h:vt.push.apply(vt,h))}u=y}if(h=!1,u!==2)continue}}if(u===1){hn(e,0),Ya(e,t,0,!0);break}e:{switch(l=e,h=u,h){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Ya(l,t,Nt,!Ha);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Li+300-xt(),10<u)){if(Ya(l,t,Nt,!Ha),Ws(l,0,!0)!==0)break e;wa=t,l.timeoutHandle=Tm(em.bind(null,l,n,vt,Pi,Sc,t,Nt,Cr,un,Ha,h,"Throttled",-0,0),u);break e}em(l,n,vt,Pi,Sc,t,Nt,Cr,un,Ha,h,null,-0,0)}}break}while(!0);na(e)}function em(e,t,n,l,u,h,y,w,E,M,L,$,z,U){if(e.timeoutHandle=-1,$=t.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:la},Yf(t,h,$);var J=(h&62914560)===h?Li-xt():(h&4194048)===h?Wf-xt():0;if(J=Hv($,J),J!==null){wa=h,e.cancelPendingCommit=J(om.bind(null,e,t,h,n,l,u,y,w,E,L,$,null,z,U)),Ya(e,h,y,!M);return}}om(e,t,h,n,l,u,y,w,E)}function nv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var u=n[l],h=u.getSnapshot;u=u.value;try{if(!St(h(),u))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ya(e,t,n,l){t&=~wc,t&=~Cr,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var u=t;0<u;){var h=31-wt(u),y=1<<h;l[h]=-1,u&=~y}n!==0&&cd(e,n,t)}function $i(){return(Ae&6)===0?(xs(0),!1):!0}function Ec(){if(ge!==null){if(Te===0)var e=ge.return;else e=ge,da=gr=null,Vo(e),tn=null,as=0,e=ge;for(;e!==null;)kf(e.alternate,e),e=e.return;ge=null}}function hn(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Cv(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),wa=0,Ec(),ze=e,ge=n=ca(e.current,null),ve=t,Te=0,Et=null,Ha=!1,cn=qn(e,t),_c=!1,un=Nt=wc=Cr=Va=Fe=0,vt=vs=null,Sc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var u=31-wt(l),h=1<<u;t|=e[u],l&=~h}return _a=t,oi(),n}function tm(e,t){he=null,B.H=us,t===en||t===pi?(t=ph(),Te=3):t===ko?(t=ph(),Te=4):Te=t===sc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,ge===null&&(Fe=1,Ti(e,Ut(t,e.current)))}function am(){var e=jt.current;return e===null?!0:(ve&4194048)===ve?Pt===null:(ve&62914560)===ve||(ve&536870912)!==0?e===Pt:!1}function rm(){var e=B.H;return B.H=us,e===null?us:e}function nm(){var e=B.A;return B.A=av,e}function Hi(){Fe=4,Ha||(ve&4194048)!==ve&&jt.current!==null||(cn=!0),(Va&134217727)===0&&(Cr&134217727)===0||ze===null||Ya(ze,ve,Nt,!1)}function Nc(e,t,n){var l=Ae;Ae|=2;var u=rm(),h=nm();(ze!==e||ve!==t)&&(Pi=null,hn(e,t)),t=!1;var y=Fe;e:do try{if(Te!==0&&ge!==null){var w=ge,E=Et;switch(Te){case 8:Ec(),y=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var M=Te;if(Te=0,Et=null,fn(e,w,E,M),n&&cn){y=0;break e}break;default:M=Te,Te=0,Et=null,fn(e,w,E,M)}}sv(),y=Fe;break}catch(L){tm(e,L)}while(!0);return t&&e.shellSuspendCounter++,da=gr=null,Ae=l,B.H=u,B.A=h,ge===null&&(ze=null,ve=0,oi()),y}function sv(){for(;ge!==null;)sm(ge)}function iv(e,t){var n=Ae;Ae|=2;var l=rm(),u=nm();ze!==e||ve!==t?(Pi=null,qi=xt()+500,hn(e,t)):cn=qn(e,t);e:do try{if(Te!==0&&ge!==null){t=ge;var h=Et;t:switch(Te){case 1:Te=0,Et=null,fn(e,t,h,1);break;case 2:case 9:if(mh(h)){Te=0,Et=null,im(t);break}t=function(){Te!==2&&Te!==9||ze!==e||(Te=7),na(e)},h.then(t,t);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:mh(h)?(Te=0,Et=null,im(t)):(Te=0,Et=null,fn(e,t,h,7));break;case 5:var y=null;switch(ge.tag){case 26:y=ge.memoizedState;case 5:case 27:var w=ge;if(y?Fm(y):w.stateNode.complete){Te=0,Et=null;var E=w.sibling;if(E!==null)ge=E;else{var M=w.return;M!==null?(ge=M,Vi(M)):ge=null}break t}}Te=0,Et=null,fn(e,t,h,5);break;case 6:Te=0,Et=null,fn(e,t,h,6);break;case 8:Ec(),Fe=6;break e;default:throw Error(s(462))}}lv();break}catch(L){tm(e,L)}while(!0);return da=gr=null,B.H=l,B.A=u,Ae=n,ge!==null?0:(ze=null,ve=0,oi(),Fe)}function lv(){for(;ge!==null&&!Ty();)sm(ge)}function sm(e){var t=Rf(e.alternate,e,_a);e.memoizedProps=e.pendingProps,t===null?Vi(e):ge=t}function im(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Sf(n,t,t.pendingProps,t.type,void 0,ve);break;case 11:t=Sf(n,t,t.pendingProps,t.type.render,t.ref,ve);break;case 5:Vo(t);default:kf(n,t),t=ge=rh(t,_a),t=Rf(n,t,_a)}e.memoizedProps=e.pendingProps,t===null?Vi(e):ge=t}function fn(e,t,n,l){da=gr=null,Vo(t),tn=null,as=0;var u=t.return;try{if(K0(e,u,t,n,ve)){Fe=1,Ti(e,Ut(n,e.current)),ge=null;return}}catch(h){if(u!==null)throw ge=u,h;Fe=1,Ti(e,Ut(n,e.current)),ge=null;return}t.flags&32768?(_e||l===1?e=!0:cn||(ve&536870912)!==0?e=!1:(Ha=e=!0,(l===2||l===9||l===3||l===6)&&(l=jt.current,l!==null&&l.tag===13&&(l.flags|=16384))),lm(t,e)):Vi(t)}function Vi(e){var t=e;do{if((t.flags&32768)!==0){lm(t,Ha);return}e=t.return;var n=J0(t.alternate,t,_a);if(n!==null){ge=n;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);Fe===0&&(Fe=5)}function lm(e,t){do{var n=Z0(e.alternate,e);if(n!==null){n.flags&=32767,ge=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ge=e;return}ge=e=n}while(e!==null);Fe=6,ge=null}function om(e,t,n,l,u,h,y,w,E){e.cancelPendingCommit=null;do Gi();while(tt!==0);if((Ae&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(h=t.lanes|t.childLanes,h|=po,Py(e,n,h,y,w,E),e===ze&&(ge=ze=null,ve=0),dn=t,Fa=e,wa=n,Cc=h,jc=u,Xf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dv(Ys,function(){return fm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,u=G.p,G.p=2,y=Ae,Ae|=4;try{ev(e,t,n)}finally{Ae=y,G.p=u,B.T=l}}tt=1,cm(),um(),dm()}}function cm(){if(tt===1){tt=0;var e=Fa,t=dn,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=B.T,B.T=null;var l=G.p;G.p=2;var u=Ae;Ae|=4;try{Vf(t,e);var h=Pc,y=Qd(e.containerInfo),w=h.focusedElem,E=h.selectionRange;if(y!==w&&w&&w.ownerDocument&&Id(w.ownerDocument.documentElement,w)){if(E!==null&&uo(w)){var M=E.start,L=E.end;if(L===void 0&&(L=M),"selectionStart"in w)w.selectionStart=M,w.selectionEnd=Math.min(L,w.value.length);else{var $=w.ownerDocument||document,z=$&&$.defaultView||window;if(z.getSelection){var U=z.getSelection(),J=w.textContent.length,ie=Math.min(E.start,J),Me=E.end===void 0?ie:Math.min(E.end,J);!U.extend&&ie>Me&&(y=Me,Me=ie,ie=y);var k=Yd(w,ie),R=Yd(w,Me);if(k&&R&&(U.rangeCount!==1||U.anchorNode!==k.node||U.anchorOffset!==k.offset||U.focusNode!==R.node||U.focusOffset!==R.offset)){var D=$.createRange();D.setStart(k.node,k.offset),U.removeAllRanges(),ie>Me?(U.addRange(D),U.extend(R.node,R.offset)):(D.setEnd(R.node,R.offset),U.addRange(D))}}}}for($=[],U=w;U=U.parentNode;)U.nodeType===1&&$.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<$.length;w++){var q=$[w];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}al=!!qc,Pc=qc=null}finally{Ae=u,G.p=l,B.T=n}}e.current=t,tt=2}}function um(){if(tt===2){tt=0;var e=Fa,t=dn,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=B.T,B.T=null;var l=G.p;G.p=2;var u=Ae;Ae|=4;try{Lf(e,t.alternate,t)}finally{Ae=u,G.p=l,B.T=n}}tt=3}}function dm(){if(tt===4||tt===3){tt=0,ky();var e=Fa,t=dn,n=wa,l=Xf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?tt=5:(tt=0,dn=Fa=null,hm(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ga=null),Fl(n),t=t.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ln,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=B.T,u=G.p,G.p=2,B.T=null;try{for(var h=e.onRecoverableError,y=0;y<l.length;y++){var w=l[y];h(w.value,{componentStack:w.stack})}}finally{B.T=t,G.p=u}}(wa&3)!==0&&Gi(),na(e),u=e.pendingLanes,(n&261930)!==0&&(u&42)!==0?e===Ac?bs++:(bs=0,Ac=e):bs=0,xs(0)}}function hm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,es(t)))}function Gi(){return cm(),um(),dm(),fm()}function fm(){if(tt!==5)return!1;var e=Fa,t=Cc;Cc=0;var n=Fl(wa),l=B.T,u=G.p;try{G.p=32>n?32:n,B.T=null,n=jc,jc=null;var h=Fa,y=wa;if(tt=0,dn=Fa=null,wa=0,(Ae&6)!==0)throw Error(s(331));var w=Ae;if(Ae|=4,Qf(h.current),Ff(h,h.current,y,n),Ae=w,xs(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ln,h)}catch{}return!0}finally{G.p=u,B.T=l,hm(e,t)}}function mm(e,t,n){t=Ut(n,t),t=nc(e.stateNode,t,2),e=La(e,t,2),e!==null&&(Pn(e,2),na(e))}function ke(e,t,n){if(e.tag===3)mm(e,e,n);else for(;t!==null;){if(t.tag===3){mm(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ga===null||!Ga.has(l))){e=Ut(n,e),n=gf(2),l=La(t,n,2),l!==null&&(pf(n,l,t,e),Pn(l,2),na(l));break}}t=t.return}}function Rc(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new rv;var u=new Set;l.set(t,u)}else u=l.get(t),u===void 0&&(u=new Set,l.set(t,u));u.has(n)||(_c=!0,u.add(n),e=ov.bind(null,e,t,n),t.then(e,e))}function ov(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ze===e&&(ve&n)===n&&(Fe===4||Fe===3&&(ve&62914560)===ve&&300>xt()-Li?(Ae&2)===0&&hn(e,0):wc|=n,un===ve&&(un=0)),na(e)}function gm(e,t){t===0&&(t=od()),e=hr(e,t),e!==null&&(Pn(e,t),na(e))}function cv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gm(e,n)}function uv(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),gm(e,n)}function dv(e,t){return $l(e,t)}var Fi=null,mn=null,Tc=!1,Yi=!1,kc=!1,Ia=0;function na(e){e!==mn&&e.next===null&&(mn===null?Fi=mn=e:mn=mn.next=e),Yi=!0,Tc||(Tc=!0,fv())}function xs(e,t){if(!kc&&Yi){kc=!0;do for(var n=!1,l=Fi;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var h=0;else{var y=l.suspendedLanes,w=l.pingedLanes;h=(1<<31-wt(42|e)+1)-1,h&=u&~(y&~w),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(n=!0,bm(l,h))}else h=ve,h=Ws(l,l===ze?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||qn(l,h)||(n=!0,bm(l,h));l=l.next}while(n);kc=!1}}function hv(){pm()}function pm(){Yi=Tc=!1;var e=0;Ia!==0&&Sv()&&(e=Ia);for(var t=xt(),n=null,l=Fi;l!==null;){var u=l.next,h=ym(l,t);h===0?(l.next=null,n===null?Fi=u:n.next=u,u===null&&(mn=n)):(n=l,(e!==0||(h&3)!==0)&&(Yi=!0)),l=u}tt!==0&&tt!==5||xs(e),Ia!==0&&(Ia=0)}function ym(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var y=31-wt(h),w=1<<y,E=u[y];E===-1?((w&n)===0||(w&l)!==0)&&(u[y]=qy(w,t)):E<=t&&(e.expiredLanes|=w),h&=~w}if(t=ze,n=ve,n=Ws(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Te===2||Te===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Hl(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||qn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Hl(l),Fl(n)){case 2:case 8:n=id;break;case 32:n=Ys;break;case 268435456:n=ld;break;default:n=Ys}return l=vm.bind(null,e),n=$l(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Hl(l),e.callbackPriority=2,e.callbackNode=null,2}function vm(e,t){if(tt!==0&&tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gi()&&e.callbackNode!==n)return null;var l=ve;return l=Ws(e,e===ze?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Zf(e,l,t),ym(e,xt()),e.callbackNode!=null&&e.callbackNode===n?vm.bind(null,e):null)}function bm(e,t){if(Gi())return null;Zf(e,t,!0)}function fv(){jv(function(){(Ae&6)!==0?$l(sd,hv):pm()})}function Oc(){if(Ia===0){var e=Jr;e===0&&(e=Is,Is<<=1,(Is&261888)===0&&(Is=256)),Ia=e}return Ia}function xm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ei(""+e)}function _m(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function mv(e,t,n,l,u){if(t==="submit"&&n&&n.stateNode===u){var h=xm((u[ft]||null).action),y=l.submitter;y&&(t=(t=y[ft]||null)?xm(t.formAction):y.getAttribute("formAction"),t!==null&&(h=t,y=null));var w=new ni("action","action",null,l,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ia!==0){var E=y?_m(u,y):new FormData(u);Jo(n,{pending:!0,data:E,method:u.method,action:h},null,E)}}else typeof h=="function"&&(w.preventDefault(),E=y?_m(u,y):new FormData(u),Jo(n,{pending:!0,data:E,method:u.method,action:h},h,E))},currentTarget:u}]})}}for(var Dc=0;Dc<go.length;Dc++){var Mc=go[Dc],gv=Mc.toLowerCase(),pv=Mc[0].toUpperCase()+Mc.slice(1);Ft(gv,"on"+pv)}Ft(Xd,"onAnimationEnd"),Ft(Jd,"onAnimationIteration"),Ft(Zd,"onAnimationStart"),Ft("dblclick","onDoubleClick"),Ft("focusin","onFocus"),Ft("focusout","onBlur"),Ft(O0,"onTransitionRun"),Ft(D0,"onTransitionStart"),Ft(M0,"onTransitionCancel"),Ft(eh,"onTransitionEnd"),Lr("onMouseEnter",["mouseout","mouseover"]),Lr("onMouseLeave",["mouseout","mouseover"]),Lr("onPointerEnter",["pointerout","pointerover"]),Lr("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_s));function wm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],u=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var y=l.length-1;0<=y;y--){var w=l[y],E=w.instance,M=w.currentTarget;if(w=w.listener,E!==h&&u.isPropagationStopped())break e;h=w,u.currentTarget=M;try{h(u)}catch(L){li(L)}u.currentTarget=null,h=E}else for(y=0;y<l.length;y++){if(w=l[y],E=w.instance,M=w.currentTarget,w=w.listener,E!==h&&u.isPropagationStopped())break e;h=w,u.currentTarget=M;try{h(u)}catch(L){li(L)}u.currentTarget=null,h=E}}}}function pe(e,t){var n=t[Yl];n===void 0&&(n=t[Yl]=new Set);var l=e+"__bubble";n.has(l)||(Sm(t,e,2,!1),n.add(l))}function zc(e,t,n){var l=0;t&&(l|=4),Sm(n,e,l,t)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function Uc(e){if(!e[Ii]){e[Ii]=!0,gd.forEach(function(n){n!=="selectionchange"&&(yv.has(n)||zc(n,!1,e),zc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ii]||(t[Ii]=!0,zc("selectionchange",!1,t))}}function Sm(e,t,n,l){switch(Jm(t)){case 2:var u=Fv;break;case 8:u=Yv;break;default:u=Xc}n=u.bind(null,t,n,e),u=void 0,!to||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function Bc(e,t,n,l,u){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var w=l.stateNode.containerInfo;if(w===u)break;if(y===4)for(y=l.return;y!==null;){var E=y.tag;if((E===3||E===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;w!==null;){if(y=zr(w),y===null)return;if(E=y.tag,E===5||E===6||E===26||E===27){l=h=y;continue e}w=w.parentNode}}l=l.return}Ed(function(){var M=h,L=Zl(n),$=[];e:{var z=th.get(e);if(z!==void 0){var U=ni,J=e;switch(e){case"keypress":if(ai(n)===0)break e;case"keydown":case"keyup":U=u0;break;case"focusin":J="focus",U=so;break;case"focusout":J="blur",U=so;break;case"beforeblur":case"afterblur":U=so;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=f0;break;case Xd:case Jd:case Zd:U=t0;break;case eh:U=g0;break;case"scroll":case"scrollend":U=Wy;break;case"wheel":U=y0;break;case"copy":case"cut":case"paste":U=r0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Od;break;case"toggle":case"beforetoggle":U=b0}var ie=(t&4)!==0,Me=!ie&&(e==="scroll"||e==="scrollend"),k=ie?z!==null?z+"Capture":null:z;ie=[];for(var R=M,D;R!==null;){var q=R;if(D=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||D===null||k===null||(q=Vn(R,k),q!=null&&ie.push(ws(R,q,D))),Me)break;R=R.return}0<ie.length&&(z=new U(z,J,null,n,L),$.push({event:z,listeners:ie}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",z&&n!==Jl&&(J=n.relatedTarget||n.fromElement)&&(zr(J)||J[Mr]))break e;if((U||z)&&(z=L.window===L?L:(z=L.ownerDocument)?z.defaultView||z.parentWindow:window,U?(J=n.relatedTarget||n.toElement,U=M,J=J?zr(J):null,J!==null&&(Me=c(J),ie=J.tag,J!==Me||ie!==5&&ie!==27&&ie!==6)&&(J=null)):(U=null,J=M),U!==J)){if(ie=Td,q="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ie=Od,q="onPointerLeave",k="onPointerEnter",R="pointer"),Me=U==null?z:Hn(U),D=J==null?z:Hn(J),z=new ie(q,R+"leave",U,n,L),z.target=Me,z.relatedTarget=D,q=null,zr(L)===M&&(ie=new ie(k,R+"enter",J,n,L),ie.target=D,ie.relatedTarget=Me,q=ie),Me=q,U&&J)t:{for(ie=vv,k=U,R=J,D=0,q=k;q;q=ie(q))D++;q=0;for(var ne=R;ne;ne=ie(ne))q++;for(;0<D-q;)k=ie(k),D--;for(;0<q-D;)R=ie(R),q--;for(;D--;){if(k===R||R!==null&&k===R.alternate){ie=k;break t}k=ie(k),R=ie(R)}ie=null}else ie=null;U!==null&&Cm($,z,U,ie,!1),J!==null&&Me!==null&&Cm($,Me,J,ie,!0)}}e:{if(z=M?Hn(M):window,U=z.nodeName&&z.nodeName.toLowerCase(),U==="select"||U==="input"&&z.type==="file")var Ce=Pd;else if(Ld(z))if($d)Ce=R0;else{Ce=E0;var ee=A0}else U=z.nodeName,!U||U.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?M&&Xl(M.elementType)&&(Ce=Pd):Ce=N0;if(Ce&&(Ce=Ce(e,M))){qd($,Ce,n,L);break e}ee&&ee(e,z,M),e==="focusout"&&M&&z.type==="number"&&M.memoizedProps.value!=null&&Wl(z,"number",z.value)}switch(ee=M?Hn(M):window,e){case"focusin":(Ld(ee)||ee.contentEditable==="true")&&(Gr=ee,ho=M,Xn=null);break;case"focusout":Xn=ho=Gr=null;break;case"mousedown":fo=!0;break;case"contextmenu":case"mouseup":case"dragend":fo=!1,Kd($,n,L);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":Kd($,n,L)}var fe;if(lo)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Vr?Ud(e,n)&&(be="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(be="onCompositionStart");be&&(Dd&&n.locale!=="ko"&&(Vr||be!=="onCompositionStart"?be==="onCompositionEnd"&&Vr&&(fe=Nd()):(ka=L,ao="value"in ka?ka.value:ka.textContent,Vr=!0)),ee=Qi(M,be),0<ee.length&&(be=new kd(be,e,null,n,L),$.push({event:be,listeners:ee}),fe?be.data=fe:(fe=Bd(n),fe!==null&&(be.data=fe)))),(fe=_0?w0(e,n):S0(e,n))&&(be=Qi(M,"onBeforeInput"),0<be.length&&(ee=new kd("onBeforeInput","beforeinput",null,n,L),$.push({event:ee,listeners:be}),ee.data=fe)),mv($,e,M,n,L)}wm($,t)})}function ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qi(e,t){for(var n=t+"Capture",l=[];e!==null;){var u=e,h=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=Vn(e,n),u!=null&&l.unshift(ws(e,u,h)),u=Vn(e,t),u!=null&&l.push(ws(e,u,h))),e.tag===3)return l;e=e.return}return[]}function vv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Cm(e,t,n,l,u){for(var h=t._reactName,y=[];n!==null&&n!==l;){var w=n,E=w.alternate,M=w.stateNode;if(w=w.tag,E!==null&&E===l)break;w!==5&&w!==26&&w!==27||M===null||(E=M,u?(M=Vn(n,h),M!=null&&y.unshift(ws(n,M,E))):u||(M=Vn(n,h),M!=null&&y.push(ws(n,M,E)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var bv=/\r\n?/g,xv=/\u0000|\uFFFD/g;function jm(e){return(typeof e=="string"?e:""+e).replace(bv,`
`).replace(xv,"")}function Am(e,t){return t=jm(t),jm(e)===t}function De(e,t,n,l,u,h){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Pr(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Pr(e,""+l);break;case"className":Js(e,"class",l);break;case"tabIndex":Js(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(e,n,l);break;case"style":jd(e,l,h);break;case"data":if(t!=="object"){Js(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ei(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(n==="formAction"?(t!=="input"&&De(e,t,"name",u.name,u,null),De(e,t,"formEncType",u.formEncType,u,null),De(e,t,"formMethod",u.formMethod,u,null),De(e,t,"formTarget",u.formTarget,u,null)):(De(e,t,"encType",u.encType,u,null),De(e,t,"method",u.method,u,null),De(e,t,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ei(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=la);break;case"onScroll":l!=null&&pe("scroll",e);break;case"onScrollEnd":l!=null&&pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(n=l.__html,n!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=ei(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":pe("beforetoggle",e),pe("toggle",e),Xs(e,"popover",l);break;case"xlinkActuate":ia(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ia(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ia(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ia(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ia(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ia(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ia(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ia(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ia(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xs(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Qy.get(n)||n,Xs(e,n,l))}}function Lc(e,t,n,l,u,h){switch(n){case"style":jd(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(n=l.__html,n!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof l=="string"?Pr(e,l):(typeof l=="number"||typeof l=="bigint")&&Pr(e,""+l);break;case"onScroll":l!=null&&pe("scroll",e);break;case"onScrollEnd":l!=null&&pe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=la);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pd.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(u=n.endsWith("Capture"),t=n.slice(2,u?n.length-7:void 0),h=e[ft]||null,h=h!=null?h[n]:null,typeof h=="function"&&e.removeEventListener(t,h,u),typeof l=="function")){typeof h!="function"&&h!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,u);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Xs(e,n,l)}}}function ct(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pe("error",e),pe("load",e);var l=!1,u=!1,h;for(h in n)if(n.hasOwnProperty(h)){var y=n[h];if(y!=null)switch(h){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:De(e,t,h,y,n,null)}}u&&De(e,t,"srcSet",n.srcSet,n,null),l&&De(e,t,"src",n.src,n,null);return;case"input":pe("invalid",e);var w=h=y=u=null,E=null,M=null;for(l in n)if(n.hasOwnProperty(l)){var L=n[l];if(L!=null)switch(l){case"name":u=L;break;case"type":y=L;break;case"checked":E=L;break;case"defaultChecked":M=L;break;case"value":h=L;break;case"defaultValue":w=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,t));break;default:De(e,t,l,L,n,null)}}_d(e,h,w,E,M,y,u,!1);return;case"select":pe("invalid",e),l=y=h=null;for(u in n)if(n.hasOwnProperty(u)&&(w=n[u],w!=null))switch(u){case"value":h=w;break;case"defaultValue":y=w;break;case"multiple":l=w;default:De(e,t,u,w,n,null)}t=h,n=y,e.multiple=!!l,t!=null?qr(e,!!l,t,!1):n!=null&&qr(e,!!l,n,!0);return;case"textarea":pe("invalid",e),h=u=l=null;for(y in n)if(n.hasOwnProperty(y)&&(w=n[y],w!=null))switch(y){case"value":l=w;break;case"defaultValue":u=w;break;case"children":h=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:De(e,t,y,w,n,null)}Sd(e,l,u,h);return;case"option":for(E in n)if(n.hasOwnProperty(E)&&(l=n[E],l!=null))switch(E){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:De(e,t,E,l,n,null)}return;case"dialog":pe("beforetoggle",e),pe("toggle",e),pe("cancel",e),pe("close",e);break;case"iframe":case"object":pe("load",e);break;case"video":case"audio":for(l=0;l<_s.length;l++)pe(_s[l],e);break;case"image":pe("error",e),pe("load",e);break;case"details":pe("toggle",e);break;case"embed":case"source":case"link":pe("error",e),pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in n)if(n.hasOwnProperty(M)&&(l=n[M],l!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:De(e,t,M,l,n,null)}return;default:if(Xl(t)){for(L in n)n.hasOwnProperty(L)&&(l=n[L],l!==void 0&&Lc(e,t,L,l,n,void 0));return}}for(w in n)n.hasOwnProperty(w)&&(l=n[w],l!=null&&De(e,t,w,l,n,null))}function _v(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,y=null,w=null,E=null,M=null,L=null;for(U in n){var $=n[U];if(n.hasOwnProperty(U)&&$!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":E=$;default:l.hasOwnProperty(U)||De(e,t,U,null,l,$)}}for(var z in l){var U=l[z];if($=n[z],l.hasOwnProperty(z)&&(U!=null||$!=null))switch(z){case"type":h=U;break;case"name":u=U;break;case"checked":M=U;break;case"defaultChecked":L=U;break;case"value":y=U;break;case"defaultValue":w=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,t));break;default:U!==$&&De(e,t,z,U,l,$)}}Kl(e,y,w,E,M,L,h,u);return;case"select":U=y=w=z=null;for(h in n)if(E=n[h],n.hasOwnProperty(h)&&E!=null)switch(h){case"value":break;case"multiple":U=E;default:l.hasOwnProperty(h)||De(e,t,h,null,l,E)}for(u in l)if(h=l[u],E=n[u],l.hasOwnProperty(u)&&(h!=null||E!=null))switch(u){case"value":z=h;break;case"defaultValue":w=h;break;case"multiple":y=h;default:h!==E&&De(e,t,u,h,l,E)}t=w,n=y,l=U,z!=null?qr(e,!!n,z,!1):!!l!=!!n&&(t!=null?qr(e,!!n,t,!0):qr(e,!!n,n?[]:"",!1));return;case"textarea":U=z=null;for(w in n)if(u=n[w],n.hasOwnProperty(w)&&u!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:De(e,t,w,null,l,u)}for(y in l)if(u=l[y],h=n[y],l.hasOwnProperty(y)&&(u!=null||h!=null))switch(y){case"value":z=u;break;case"defaultValue":U=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==h&&De(e,t,y,u,l,h)}wd(e,z,U);return;case"option":for(var J in n)if(z=n[J],n.hasOwnProperty(J)&&z!=null&&!l.hasOwnProperty(J))switch(J){case"selected":e.selected=!1;break;default:De(e,t,J,null,l,z)}for(E in l)if(z=l[E],U=n[E],l.hasOwnProperty(E)&&z!==U&&(z!=null||U!=null))switch(E){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:De(e,t,E,z,l,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in n)z=n[ie],n.hasOwnProperty(ie)&&z!=null&&!l.hasOwnProperty(ie)&&De(e,t,ie,null,l,z);for(M in l)if(z=l[M],U=n[M],l.hasOwnProperty(M)&&z!==U&&(z!=null||U!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,t));break;default:De(e,t,M,z,l,U)}return;default:if(Xl(t)){for(var Me in n)z=n[Me],n.hasOwnProperty(Me)&&z!==void 0&&!l.hasOwnProperty(Me)&&Lc(e,t,Me,void 0,l,z);for(L in l)z=l[L],U=n[L],!l.hasOwnProperty(L)||z===U||z===void 0&&U===void 0||Lc(e,t,L,z,l,U);return}}for(var k in n)z=n[k],n.hasOwnProperty(k)&&z!=null&&!l.hasOwnProperty(k)&&De(e,t,k,null,l,z);for($ in l)z=l[$],U=n[$],!l.hasOwnProperty($)||z===U||z==null&&U==null||De(e,t,$,z,l,U)}function Em(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var u=n[l],h=u.transferSize,y=u.initiatorType,w=u.duration;if(h&&w&&Em(y)){for(y=0,w=u.responseEnd,l+=1;l<n.length;l++){var E=n[l],M=E.startTime;if(M>w)break;var L=E.transferSize,$=E.initiatorType;L&&Em($)&&(E=E.responseEnd,y+=L*(E<w?1:(w-M)/(E-M)))}if(--l,t+=8*(h+y)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var qc=null,Pc=null;function Ki(e){return e.nodeType===9?e:e.ownerDocument}function Nm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function $c(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hc=null;function Sv(){var e=window.event;return e&&e.type==="popstate"?e===Hc?!1:(Hc=e,!0):(Hc=null,!1)}var Tm=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,jv=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(e){return km.resolve(null).then(e).catch(Av)}:Tm;function Av(e){setTimeout(function(){throw e})}function Qa(e){return e==="head"}function Om(e,t){var n=t,l=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(u),vn(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")Ss(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ss(n);for(var h=n.firstChild;h;){var y=h.nextSibling,w=h.nodeName;h[$n]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=y}}else n==="body"&&Ss(e.ownerDocument.body);n=u}while(n);vn(t)}function Dm(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Vc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vc(n),Il(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ev(e,t,n,l){for(;e.nodeType===1;){var u=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[$n])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function Nv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=$t(e.nextSibling),e===null))return null;return e}function Mm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$t(e.nextSibling),e===null))return null;return e}function Gc(e){return e.data==="$?"||e.data==="$~"}function Fc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Rv(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Yc=null;function zm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return $t(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Um(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Bm(e,t,n){switch(t=Ki(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ss(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Il(e)}var Ht=new Map,Lm=new Set;function Wi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Sa=G.d;G.d={f:Tv,r:kv,D:Ov,C:Dv,L:Mv,m:zv,X:Bv,S:Uv,M:Lv};function Tv(){var e=Sa.f(),t=$i();return e||t}function kv(e){var t=Ur(e);t!==null&&t.tag===5&&t.type==="form"?ef(t):Sa.r(e)}var gn=typeof document>"u"?null:document;function qm(e,t,n){var l=gn;if(l&&typeof t=="string"&&t){var u=Mt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof n=="string"&&(u+='[crossorigin="'+n+'"]'),Lm.has(u)||(Lm.add(u),e={rel:e,crossOrigin:n,href:t},l.querySelector(u)===null&&(t=l.createElement("link"),ct(t,"link",e),rt(t),l.head.appendChild(t)))}}function Ov(e){Sa.D(e),qm("dns-prefetch",e,null)}function Dv(e,t){Sa.C(e,t),qm("preconnect",e,t)}function Mv(e,t,n){Sa.L(e,t,n);var l=gn;if(l&&e&&t){var u='link[rel="preload"][as="'+Mt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(u+='[imagesrcset="'+Mt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(u+='[imagesizes="'+Mt(n.imageSizes)+'"]')):u+='[href="'+Mt(e)+'"]';var h=u;switch(t){case"style":h=pn(e);break;case"script":h=yn(e)}Ht.has(h)||(e=b({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ht.set(h,e),l.querySelector(u)!==null||t==="style"&&l.querySelector(Cs(h))||t==="script"&&l.querySelector(js(h))||(t=l.createElement("link"),ct(t,"link",e),rt(t),l.head.appendChild(t)))}}function zv(e,t){Sa.m(e,t);var n=gn;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+Mt(l)+'"][href="'+Mt(e)+'"]',h=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=yn(e)}if(!Ht.has(h)&&(e=b({rel:"modulepreload",href:e},t),Ht.set(h,e),n.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(js(h)))return}l=n.createElement("link"),ct(l,"link",e),rt(l),n.head.appendChild(l)}}}function Uv(e,t,n){Sa.S(e,t,n);var l=gn;if(l&&e){var u=Br(l).hoistableStyles,h=pn(e);t=t||"default";var y=u.get(h);if(!y){var w={loading:0,preload:null};if(y=l.querySelector(Cs(h)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ht.get(h))&&Ic(e,n);var E=y=l.createElement("link");rt(E),ct(E,"link",e),E._p=new Promise(function(M,L){E.onload=M,E.onerror=L}),E.addEventListener("load",function(){w.loading|=1}),E.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Xi(y,t,l)}y={type:"stylesheet",instance:y,count:1,state:w},u.set(h,y)}}}function Bv(e,t){Sa.X(e,t);var n=gn;if(n&&e){var l=Br(n).hoistableScripts,u=yn(e),h=l.get(u);h||(h=n.querySelector(js(u)),h||(e=b({src:e,async:!0},t),(t=Ht.get(u))&&Qc(e,t),h=n.createElement("script"),rt(h),ct(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(u,h))}}function Lv(e,t){Sa.M(e,t);var n=gn;if(n&&e){var l=Br(n).hoistableScripts,u=yn(e),h=l.get(u);h||(h=n.querySelector(js(u)),h||(e=b({src:e,async:!0,type:"module"},t),(t=Ht.get(u))&&Qc(e,t),h=n.createElement("script"),rt(h),ct(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(u,h))}}function Pm(e,t,n,l){var u=(u=Ot.current)?Wi(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=pn(n.href),n=Br(u).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=pn(n.href);var h=Br(u).hoistableStyles,y=h.get(e);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,y),(h=u.querySelector(Cs(e)))&&!h._p&&(y.instance=h,y.state.loading=5),Ht.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ht.set(e,n),h||qv(u,e,n,y.state))),t&&l===null)throw Error(s(528,""));return y}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=yn(n),n=Br(u).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function pn(e){return'href="'+Mt(e)+'"'}function Cs(e){return'link[rel="stylesheet"]['+e+"]"}function $m(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function qv(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ct(t,"link",n),rt(t),e.head.appendChild(t))}function yn(e){return'[src="'+Mt(e)+'"]'}function js(e){return"script[async]"+e}function Hm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Mt(n.href)+'"]');if(l)return t.instance=l,rt(l),l;var u=b({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),ct(l,"style",u),Xi(l,n.precedence,e),t.instance=l;case"stylesheet":u=pn(n.href);var h=e.querySelector(Cs(u));if(h)return t.state.loading|=4,t.instance=h,rt(h),h;l=$m(n),(u=Ht.get(u))&&Ic(l,u),h=(e.ownerDocument||e).createElement("link"),rt(h);var y=h;return y._p=new Promise(function(w,E){y.onload=w,y.onerror=E}),ct(h,"link",l),t.state.loading|=4,Xi(h,n.precedence,e),t.instance=h;case"script":return h=yn(n.src),(u=e.querySelector(js(h)))?(t.instance=u,rt(u),u):(l=n,(u=Ht.get(h))&&(l=b({},n),Qc(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),rt(u),ct(u,"link",l),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Xi(l,n.precedence,e));return t.instance}function Xi(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,h=u,y=0;y<l.length;y++){var w=l[y];if(w.dataset.precedence===t)h=w;else if(h!==u)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Ic(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Qc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ji=null;function Vm(e,t,n){if(Ji===null){var l=new Map,u=Ji=new Map;u.set(n,l)}else u=Ji,l=u.get(n),l||(l=new Map,u.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),u=0;u<n.length;u++){var h=n[u];if(!(h[$n]||h[st]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(t)||"";y=e+y;var w=l.get(y);w?w.push(h):l.set(y,[h])}}return l}function Gm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Pv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Fm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function $v(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=pn(l.href),h=t.querySelector(Cs(u));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Zi.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=h,rt(h);return}h=t.ownerDocument||t,l=$m(l),(u=Ht.get(u))&&Ic(l,u),h=h.createElement("link"),rt(h);var y=h;y._p=new Promise(function(w,E){y.onload=w,y.onerror=E}),ct(h,"link",l),n.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Zi.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Kc=0;function Hv(e,t){return e.stylesheets&&e.count===0&&tl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Kc===0&&(Kc=62500*wv());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Kc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(u)}}:null}function Zi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var el=null;function tl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,el=new Map,t.forEach(Vv,e),el=null,Zi.call(e))}function Vv(e,t){if(!(t.state.loading&4)){var n=el.get(e);if(n)var l=n.get(null);else{n=new Map,el.set(e,n);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var y=u[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(n.set(y.dataset.precedence,y),l=y)}l&&n.set(null,l)}u=t.instance,y=u.getAttribute("data-precedence"),h=n.get(y)||l,h===l&&n.set(null,u),n.set(y,u),this.count++,l=Zi.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),h?h.parentNode.insertBefore(u,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var As={$$typeof:O,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Gv(e,t,n,l,u,h,y,w,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.hiddenUpdates=Vl(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Ym(e,t,n,l,u,h,y,w,E,M,L,$){return e=new Gv(e,t,n,y,E,M,L,$,w),t=1,h===!0&&(t|=24),h=Ct(3,null,null,t),e.current=h,h.stateNode=e,t=No(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:n,cache:t},Oo(h),e}function Im(e){return e?(e=Ir,e):Ir}function Qm(e,t,n,l,u,h){u=Im(u),l.context===null?l.context=u:l.pendingContext=u,l=Ba(t),l.payload={element:n},h=h===void 0?null:h,h!==null&&(l.callback=h),n=La(e,l,t),n!==null&&(bt(n,e,t),ns(n,e,t))}function Km(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wc(e,t){Km(e,t),(e=e.alternate)&&Km(e,t)}function Wm(e){if(e.tag===13||e.tag===31){var t=hr(e,67108864);t!==null&&bt(t,e,67108864),Wc(e,67108864)}}function Xm(e){if(e.tag===13||e.tag===31){var t=Rt();t=Gl(t);var n=hr(e,t);n!==null&&bt(n,e,t),Wc(e,t)}}var al=!0;function Fv(e,t,n,l){var u=B.T;B.T=null;var h=G.p;try{G.p=2,Xc(e,t,n,l)}finally{G.p=h,B.T=u}}function Yv(e,t,n,l){var u=B.T;B.T=null;var h=G.p;try{G.p=8,Xc(e,t,n,l)}finally{G.p=h,B.T=u}}function Xc(e,t,n,l){if(al){var u=Jc(l);if(u===null)Bc(e,t,l,rl,n),Zm(e,l);else if(Qv(u,e,t,n,l))l.stopPropagation();else if(Zm(e,l),t&4&&-1<Iv.indexOf(e)){for(;u!==null;){var h=Ur(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=lr(h.pendingLanes);if(y!==0){var w=h;for(w.pendingLanes|=2,w.entangledLanes|=2;y;){var E=1<<31-wt(y);w.entanglements[1]|=E,y&=~E}na(h),(Ae&6)===0&&(qi=xt()+500,xs(0))}}break;case 31:case 13:w=hr(h,2),w!==null&&bt(w,h,2),$i(),Wc(h,2)}if(h=Jc(l),h===null&&Bc(e,t,l,rl,n),h===u)break;u=h}u!==null&&l.stopPropagation()}else Bc(e,t,l,null,n)}}function Jc(e){return e=Zl(e),Zc(e)}var rl=null;function Zc(e){if(rl=null,e=zr(e),e!==null){var t=c(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=d(t),e!==null)return e;e=null}else if(n===31){if(e=m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rl=e,null}function Jm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oy()){case sd:return 2;case id:return 8;case Ys:case Dy:return 32;case ld:return 268435456;default:return 32}default:return 32}}var eu=!1,Ka=null,Wa=null,Xa=null,Es=new Map,Ns=new Map,Ja=[],Iv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zm(e,t){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Es.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(t.pointerId)}}function Rs(e,t,n,l,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Ur(t),t!==null&&Wm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Qv(e,t,n,l,u){switch(t){case"focusin":return Ka=Rs(Ka,e,t,n,l,u),!0;case"dragenter":return Wa=Rs(Wa,e,t,n,l,u),!0;case"mouseover":return Xa=Rs(Xa,e,t,n,l,u),!0;case"pointerover":var h=u.pointerId;return Es.set(h,Rs(Es.get(h)||null,e,t,n,l,u)),!0;case"gotpointercapture":return h=u.pointerId,Ns.set(h,Rs(Ns.get(h)||null,e,t,n,l,u)),!0}return!1}function eg(e){var t=zr(e.target);if(t!==null){var n=c(t);if(n!==null){if(t=n.tag,t===13){if(t=d(n),t!==null){e.blockedOn=t,fd(e.priority,function(){Xm(n)});return}}else if(t===31){if(t=m(n),t!==null){e.blockedOn=t,fd(e.priority,function(){Xm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jc(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Jl=l,n.target.dispatchEvent(l),Jl=null}else return t=Ur(n),t!==null&&Wm(t),e.blockedOn=n,!1;t.shift()}return!0}function tg(e,t,n){nl(e)&&n.delete(t)}function Kv(){eu=!1,Ka!==null&&nl(Ka)&&(Ka=null),Wa!==null&&nl(Wa)&&(Wa=null),Xa!==null&&nl(Xa)&&(Xa=null),Es.forEach(tg),Ns.forEach(tg)}function sl(e,t){e.blockedOn===t&&(e.blockedOn=null,eu||(eu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Kv)))}var il=null;function ag(e){il!==e&&(il=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){il===e&&(il=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],u=e[t+2];if(typeof l!="function"){if(Zc(l||n)===null)continue;break}var h=Ur(n);h!==null&&(e.splice(t,3),t-=3,Jo(h,{pending:!0,data:u,method:n.method,action:l},l,u))}}))}function vn(e){function t(E){return sl(E,e)}Ka!==null&&sl(Ka,e),Wa!==null&&sl(Wa,e),Xa!==null&&sl(Xa,e),Es.forEach(t),Ns.forEach(t);for(var n=0;n<Ja.length;n++){var l=Ja[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ja.length&&(n=Ja[0],n.blockedOn===null);)eg(n),n.blockedOn===null&&Ja.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var u=n[l],h=n[l+1],y=u[ft]||null;if(typeof h=="function")y||ag(n);else if(y){var w=null;if(h&&h.hasAttribute("formAction")){if(u=h,y=h[ft]||null)w=y.formAction;else if(Zc(u)!==null)continue}else w=y.action;typeof w=="function"?n[l+1]=w:(n.splice(l,3),l-=3),ag(n)}}}function rg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function tu(e){this._internalRoot=e}ll.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,l=Rt();Qm(n,l,e,t,null,null)},ll.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qm(e.current,2,null,e,null,null),$i(),t[Mr]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=hd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ja.length&&t!==0&&t<Ja[n].priority;n++);Ja.splice(n,0,e),n===0&&eg(e)}};var ng=a.version;if(ng!=="19.2.0")throw Error(s(527,ng,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Wv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{Ln=ol.inject(Wv),_t=ol}catch{}}return ks.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,l="",u=df,h=hf,y=ff;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Ym(e,1,!1,null,null,n,l,null,u,h,y,rg),e[Mr]=t.current,Uc(e),new tu(t)},ks.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var l=!1,u="",h=df,y=hf,w=ff,E=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.formState!==void 0&&(E=n.formState)),t=Ym(e,1,!0,t,n??null,l,u,E,h,y,w,rg),t.context=Im(null),n=t.current,l=Rt(),l=Gl(l),u=Ba(l),u.callback=null,La(n,u,l),n=l,t.current.lanes=n,Pn(t,n),na(t),e[Mr]=t.current,Uc(e),new ll(t)},ks.version="19.2.0",ks}var dg;function pb(){if(dg)return su.exports;dg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),su.exports=gb(),su.exports}var yb=pb();const vb=cp(yb);var hg="popstate";function bb(i={}){function a(s,o){let{pathname:c,search:d,hash:m}=s.location;return wu("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){return typeof o=="string"?o:qs(o)}return _b(a,r,null,i)}function $e(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function Jt(i,a){if(!i){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function xb(){return Math.random().toString(36).substring(2,10)}function fg(i,a){return{usr:i.state,key:i.key,idx:a}}function wu(i,a,r=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof a=="string"?Tn(a):a,state:r,key:a&&a.key||s||xb()}}function qs({pathname:i="/",search:a="",hash:r=""}){return a&&a!=="?"&&(i+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function Tn(i){let a={};if(i){let r=i.indexOf("#");r>=0&&(a.hash=i.substring(r),i=i.substring(0,r));let s=i.indexOf("?");s>=0&&(a.search=i.substring(s),i=i.substring(0,s)),i&&(a.pathname=i)}return a}function _b(i,a,r,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,m="POP",g=null,p=v();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function v(){return(d.state||{idx:null}).idx}function b(){m="POP";let j=v(),N=j==null?null:j-p;p=j,g&&g({action:m,location:A.location,delta:N})}function _(j,N){m="PUSH";let T=wu(A.location,j,N);p=v()+1;let O=fg(T,p),H=A.createHref(T);try{d.pushState(O,"",H)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;o.location.assign(H)}c&&g&&g({action:m,location:A.location,delta:1})}function x(j,N){m="REPLACE";let T=wu(A.location,j,N);p=v();let O=fg(T,p),H=A.createHref(T);d.replaceState(O,"",H),c&&g&&g({action:m,location:A.location,delta:0})}function C(j){return wb(j)}let A={get action(){return m},get location(){return i(o,d)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(hg,b),g=j,()=>{o.removeEventListener(hg,b),g=null}},createHref(j){return a(o,j)},createURL:C,encodeLocation(j){let N=C(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:_,replace:x,go(j){return d.go(j)}};return A}function wb(i,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),$e(r,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:qs(i);return s=s.replace(/ $/,"%20"),!a&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function up(i,a,r="/"){return Sb(i,a,r,!1)}function Sb(i,a,r,s){let o=typeof a=="string"?Tn(a):a,c=Aa(o.pathname||"/",r);if(c==null)return null;let d=dp(i);Cb(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let p=zb(c);m=Db(d[g],p,s)}return m}function dp(i,a=[],r=[],s="",o=!1){let c=(d,m,g=o,p)=>{let v={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&g)return;$e(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let b=ja([s,v.relativePath]),_=r.concat(v);d.children&&d.children.length>0&&($e(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),dp(d.children,a,_,b,g)),!(d.path==null&&!d.index)&&a.push({path:b,score:kb(b,d.index),routesMeta:_})};return i.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let g of hp(d.path))c(d,m,!0,g)}),a}function hp(i){let a=i.split("/");if(a.length===0)return[];let[r,...s]=a,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=hp(s.join("/")),m=[];return m.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...d),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function Cb(i){i.sort((a,r)=>a.score!==r.score?r.score-a.score:Ob(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var jb=/^:[\w-]+$/,Ab=3,Eb=2,Nb=1,Rb=10,Tb=-2,mg=i=>i==="*";function kb(i,a){let r=i.split("/"),s=r.length;return r.some(mg)&&(s+=Tb),a&&(s+=Eb),r.filter(o=>!mg(o)).reduce((o,c)=>o+(jb.test(c)?Ab:c===""?Nb:Rb),s)}function Ob(i,a){return i.length===a.length&&i.slice(0,-1).every((s,o)=>s===a[o])?i[i.length-1]-a[a.length-1]:0}function Db(i,a,r=!1){let{routesMeta:s}=i,o={},c="/",d=[];for(let m=0;m<s.length;++m){let g=s[m],p=m===s.length-1,v=c==="/"?a:a.slice(c.length)||"/",b=Al({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),_=g.route;if(!b&&p&&r&&!s[s.length-1].route.index&&(b=Al({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:ja([c,b.pathname]),pathnameBase:qb(ja([c,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(c=ja([c,b.pathnameBase]))}return d}function Al(i,a){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,s]=Mb(i.path,i.caseSensitive,i.end),o=a.match(r);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((p,{paramName:v,isOptional:b},_)=>{if(v==="*"){let C=m[_]||"";d=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const x=m[_];return b&&!x?p[v]=void 0:p[v]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:i}}function Mb(i,a=!1,r=!0){Jt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),s]}function zb(i){try{return i.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Jt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),i}}function Aa(i,a){if(a==="/")return i;if(!i.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=i.charAt(r);return s&&s!=="/"?null:i.slice(r)||"/"}function Ub(i,a="/"){let{pathname:r,search:s="",hash:o=""}=typeof i=="string"?Tn(i):i;return{pathname:r?r.startsWith("/")?r:Bb(r,a):a,search:Pb(s),hash:$b(o)}}function Bb(i,a){let r=a.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function ou(i,a,r,s){return`Cannot include a '${i}' character in a manually specified \`to.${a}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lb(i){return i.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function qu(i){let a=Lb(i);return a.map((r,s)=>s===a.length-1?r.pathname:r.pathnameBase)}function Pu(i,a,r,s=!1){let o;typeof i=="string"?o=Tn(i):(o={...i},$e(!o.pathname||!o.pathname.includes("?"),ou("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),ou("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),ou("#","search","hash",o)));let c=i===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=r;else{let b=a.length-1;if(!s&&d.startsWith("..")){let _=d.split("/");for(;_[0]==="..";)_.shift(),b-=1;o.pathname=_.join("/")}m=b>=0?a[b]:"/"}let g=Ub(o,m),p=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var ja=i=>i.join("/").replace(/\/\/+/g,"/"),qb=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Pb=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,$b=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Hb(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fp=["POST","PUT","PATCH","DELETE"];new Set(fp);var Vb=["GET",...fp];new Set(Vb);var kn=S.createContext(null);kn.displayName="DataRouter";var Dl=S.createContext(null);Dl.displayName="DataRouterState";S.createContext(!1);var mp=S.createContext({isTransitioning:!1});mp.displayName="ViewTransition";var Gb=S.createContext(new Map);Gb.displayName="Fetchers";var Fb=S.createContext(null);Fb.displayName="Await";var Zt=S.createContext(null);Zt.displayName="Navigation";var Vs=S.createContext(null);Vs.displayName="Location";var ea=S.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var $u=S.createContext(null);$u.displayName="RouteError";function Yb(i,{relative:a}={}){$e(On(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=S.useContext(Zt),{hash:o,pathname:c,search:d}=Gs(i,{relative:a}),m=c;return r!=="/"&&(m=c==="/"?r:ja([r,c])),s.createHref({pathname:m,search:d,hash:o})}function On(){return S.useContext(Vs)!=null}function sr(){return $e(On(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Vs).location}var gp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pp(i){S.useContext(Zt).static||S.useLayoutEffect(i)}function Ml(){let{isDataRoute:i}=S.useContext(ea);return i?ix():Ib()}function Ib(){$e(On(),"useNavigate() may be used only in the context of a <Router> component.");let i=S.useContext(kn),{basename:a,navigator:r}=S.useContext(Zt),{matches:s}=S.useContext(ea),{pathname:o}=sr(),c=JSON.stringify(qu(s)),d=S.useRef(!1);return pp(()=>{d.current=!0}),S.useCallback((g,p={})=>{if(Jt(d.current,gp),!d.current)return;if(typeof g=="number"){r.go(g);return}let v=Pu(g,JSON.parse(c),o,p.relative==="path");i==null&&a!=="/"&&(v.pathname=v.pathname==="/"?a:ja([a,v.pathname])),(p.replace?r.replace:r.push)(v,p.state,p)},[a,r,c,o,i])}S.createContext(null);function Qb(){let{matches:i}=S.useContext(ea),a=i[i.length-1];return a?a.params:{}}function Gs(i,{relative:a}={}){let{matches:r}=S.useContext(ea),{pathname:s}=sr(),o=JSON.stringify(qu(r));return S.useMemo(()=>Pu(i,JSON.parse(o),s,a==="path"),[i,o,s,a])}function Kb(i,a){return yp(i,a)}function yp(i,a,r,s,o){$e(On(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=S.useContext(Zt),{matches:d}=S.useContext(ea),m=d[d.length-1],g=m?m.params:{},p=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let T=b&&b.path||"";vp(p,!b||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let _=sr(),x;if(a){let T=typeof a=="string"?Tn(a):a;$e(v==="/"||T.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${T.pathname}" was given in the \`location\` prop.`),x=T}else x=_;let C=x.pathname||"/",A=C;if(v!=="/"){let T=v.replace(/^\//,"").split("/");A="/"+C.replace(/^\//,"").split("/").slice(T.length).join("/")}let j=up(i,{pathname:A});Jt(b||j!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Jt(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=ex(j&&j.map(T=>Object.assign({},T,{params:Object.assign({},g,T.params),pathname:ja([v,c.encodeLocation?c.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?v:ja([v,c.encodeLocation?c.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),d,r,s,o);return a&&N?S.createElement(Vs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function Wb(){let i=sx(),a=Hb(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:c},"ErrorBoundary")," or"," ",S.createElement("code",{style:c},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},a),r?S.createElement("pre",{style:o},r):null,d)}var Xb=S.createElement(Wb,null),Jb=class extends S.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,a){return a.location!==i.location||a.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:a.error,location:a.location,revalidation:i.revalidation||a.revalidation}}componentDidCatch(i,a){this.props.unstable_onError?this.props.unstable_onError(i,a):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?S.createElement(ea.Provider,{value:this.props.routeContext},S.createElement($u.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zb({routeContext:i,match:a,children:r}){let s=S.useContext(kn);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),S.createElement(ea.Provider,{value:i},r)}function ex(i,a=[],r=null,s=null,o=null){if(i==null){if(!r)return null;if(r.errors)i=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let c=i,d=r?.errors;if(d!=null){let p=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);$e(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let m=!1,g=-1;if(r)for(let p=0;p<c.length;p++){let v=c[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=p),v.route.id){let{loaderData:b,errors:_}=r,x=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!_||_[v.route.id]===void 0);if(v.route.lazy||x){m=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((p,v,b)=>{let _,x=!1,C=null,A=null;r&&(_=d&&v.route.id?d[v.route.id]:void 0,C=v.route.errorElement||Xb,m&&(g<0&&b===0?(vp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):g===b&&(x=!0,A=v.route.hydrateFallbackElement||null)));let j=a.concat(c.slice(0,b+1)),N=()=>{let T;return _?T=C:x?T=A:v.route.Component?T=S.createElement(v.route.Component,null):v.route.element?T=v.route.element:T=p,S.createElement(Zb,{match:v,routeContext:{outlet:p,matches:j,isDataRoute:r!=null},children:T})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?S.createElement(Jb,{location:r.location,revalidation:r.revalidation,component:C,error:_,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:s}):N()},null)}function Hu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tx(i){let a=S.useContext(kn);return $e(a,Hu(i)),a}function ax(i){let a=S.useContext(Dl);return $e(a,Hu(i)),a}function rx(i){let a=S.useContext(ea);return $e(a,Hu(i)),a}function Vu(i){let a=rx(i),r=a.matches[a.matches.length-1];return $e(r.route.id,`${i} can only be used on routes that contain a unique "id"`),r.route.id}function nx(){return Vu("useRouteId")}function sx(){let i=S.useContext($u),a=ax("useRouteError"),r=Vu("useRouteError");return i!==void 0?i:a.errors?.[r]}function ix(){let{router:i}=tx("useNavigate"),a=Vu("useNavigate"),r=S.useRef(!1);return pp(()=>{r.current=!0}),S.useCallback(async(o,c={})=>{Jt(r.current,gp),r.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:a,...c}))},[i,a])}var gg={};function vp(i,a,r){!a&&!gg[i]&&(gg[i]=!0,Jt(!1,r))}S.memo(lx);function lx({routes:i,future:a,state:r,unstable_onError:s}){return yp(i,void 0,r,s,a)}function ox({to:i,replace:a,state:r,relative:s}){$e(On(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=S.useContext(Zt);Jt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=S.useContext(ea),{pathname:d}=sr(),m=Ml(),g=Pu(i,qu(c),d,s==="path"),p=JSON.stringify(g);return S.useEffect(()=>{m(JSON.parse(p),{replace:a,state:r,relative:s})},[m,p,s,a,r]),null}function xl(i){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cx({basename:i="/",children:a=null,location:r,navigationType:s="POP",navigator:o,static:c=!1}){$e(!On(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof r=="string"&&(r=Tn(r));let{pathname:g="/",search:p="",hash:v="",state:b=null,key:_="default"}=r,x=S.useMemo(()=>{let C=Aa(g,d);return C==null?null:{location:{pathname:C,search:p,hash:v,state:b,key:_},navigationType:s}},[d,g,p,v,b,_,s]);return Jt(x!=null,`<Router basename="${d}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:S.createElement(Zt.Provider,{value:m},S.createElement(Vs.Provider,{children:a,value:x}))}function ux({children:i,location:a}){return Kb(Su(i),a)}function Su(i,a=[]){let r=[];return S.Children.forEach(i,(s,o)=>{if(!S.isValidElement(s))return;let c=[...a,o];if(s.type===S.Fragment){r.push.apply(r,Su(s.props.children,c));return}$e(s.type===xl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Su(s.props.children,c)),r.push(d)}),r}var _l="get",wl="application/x-www-form-urlencoded";function zl(i){return i!=null&&typeof i.tagName=="string"}function dx(i){return zl(i)&&i.tagName.toLowerCase()==="button"}function hx(i){return zl(i)&&i.tagName.toLowerCase()==="form"}function fx(i){return zl(i)&&i.tagName.toLowerCase()==="input"}function mx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function gx(i,a){return i.button===0&&(!a||a==="_self")&&!mx(i)}var cl=null;function px(){if(cl===null)try{new FormData(document.createElement("form"),0),cl=!1}catch{cl=!0}return cl}var yx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cu(i){return i!=null&&!yx.has(i)?(Jt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wl}"`),null):i}function vx(i,a){let r,s,o,c,d;if(hx(i)){let m=i.getAttribute("action");s=m?Aa(m,a):null,r=i.getAttribute("method")||_l,o=cu(i.getAttribute("enctype"))||wl,c=new FormData(i)}else if(dx(i)||fx(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?Aa(g,a):null,r=i.getAttribute("formmethod")||m.getAttribute("method")||_l,o=cu(i.getAttribute("formenctype"))||cu(m.getAttribute("enctype"))||wl,c=new FormData(m,i),!px()){let{name:p,type:v,value:b}=i;if(v==="image"){let _=p?`${p}.`:"";c.append(`${_}x`,"0"),c.append(`${_}y`,"0")}else p&&c.append(p,b)}}else{if(zl(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_l,s=null,o=wl,d=i}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:r.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gu(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function bx(i,a,r){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${r}`:a&&Aa(s.pathname,a)==="/"?s.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function xx(i,a){if(i.id in a)return a[i.id];try{let r=await import(i.module);return a[i.id]=r,r}catch(r){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _x(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function wx(i,a,r){let s=await Promise.all(i.map(async o=>{let c=a.routes[o.route.id];if(c){let d=await xx(c,r);return d.links?d.links():[]}return[]}));return Ax(s.flat(1).filter(_x).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function pg(i,a,r,s,o,c){let d=(g,p)=>r[p]?g.route.id!==r[p].route.id:!0,m=(g,p)=>r[p].pathname!==g.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==g.params["*"];return c==="assets"?a.filter((g,p)=>d(g,p)||m(g,p)):c==="data"?a.filter((g,p)=>{let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(d(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Sx(i,a,{includeHydrateFallback:r}={}){return Cx(i.map(s=>{let o=a.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function Cx(i){return[...new Set(i)]}function jx(i){let a={},r=Object.keys(i).sort();for(let s of r)a[s]=i[s];return a}function Ax(i,a){let r=new Set;return new Set(a),i.reduce((s,o)=>{let c=JSON.stringify(jx(o));return r.has(c)||(r.add(c),s.push({key:c,link:o})),s},[])}function bp(){let i=S.useContext(kn);return Gu(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Ex(){let i=S.useContext(Dl);return Gu(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Fu=S.createContext(void 0);Fu.displayName="FrameworkContext";function xp(){let i=S.useContext(Fu);return Gu(i,"You must render this element inside a <HydratedRouter> element"),i}function Nx(i,a){let r=S.useContext(Fu),[s,o]=S.useState(!1),[c,d]=S.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:b}=a,_=S.useRef(null);S.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let A=N=>{N.forEach(T=>{d(T.isIntersecting)})},j=new IntersectionObserver(A,{threshold:.5});return _.current&&j.observe(_.current),()=>{j.disconnect()}}},[i]),S.useEffect(()=>{if(s){let A=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(A)}}},[s]);let x=()=>{o(!0)},C=()=>{o(!1),d(!1)};return r?i!=="intent"?[c,_,{}]:[c,_,{onFocus:Os(m,x),onBlur:Os(g,C),onMouseEnter:Os(p,x),onMouseLeave:Os(v,C),onTouchStart:Os(b,x)}]:[!1,_,{}]}function Os(i,a){return r=>{i&&i(r),r.defaultPrevented||a(r)}}function Rx({page:i,...a}){let{router:r}=bp(),s=S.useMemo(()=>up(r.routes,i,r.basename),[r.routes,i,r.basename]);return s?S.createElement(kx,{page:i,matches:s,...a}):null}function Tx(i){let{manifest:a,routeModules:r}=xp(),[s,o]=S.useState([]);return S.useEffect(()=>{let c=!1;return wx(i,a,r).then(d=>{c||o(d)}),()=>{c=!0}},[i,a,r]),s}function kx({page:i,matches:a,...r}){let s=sr(),{manifest:o,routeModules:c}=xp(),{basename:d}=bp(),{loaderData:m,matches:g}=Ex(),p=S.useMemo(()=>pg(i,a,g,o,s,"data"),[i,a,g,o,s]),v=S.useMemo(()=>pg(i,a,g,o,s,"assets"),[i,a,g,o,s]),b=S.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let C=new Set,A=!1;if(a.forEach(N=>{let T=o.routes[N.route.id];!T||!T.hasLoader||(!p.some(O=>O.route.id===N.route.id)&&N.route.id in m&&c[N.route.id]?.shouldRevalidate||T.hasClientLoader?A=!0:C.add(N.route.id))}),C.size===0)return[];let j=bx(i,d,"data");return A&&C.size>0&&j.searchParams.set("_routes",a.filter(N=>C.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[d,m,s,o,p,a,i,c]),_=S.useMemo(()=>Sx(v,o),[v,o]),x=Tx(v);return S.createElement(S.Fragment,null,b.map(C=>S.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...r})),_.map(C=>S.createElement("link",{key:C,rel:"modulepreload",href:C,...r})),x.map(({key:C,link:A})=>S.createElement("link",{key:C,nonce:r.nonce,...A})))}function Ox(...i){return a=>{i.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var _p=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_p&&(window.__reactRouterVersion="7.9.5")}catch{}function Dx({basename:i,children:a,window:r}){let s=S.useRef();s.current==null&&(s.current=bb({window:r,v5Compat:!0}));let o=s.current,[c,d]=S.useState({action:o.action,location:o.location}),m=S.useCallback(g=>{S.startTransition(()=>d(g))},[d]);return S.useLayoutEffect(()=>o.listen(m),[o,m]),S.createElement(cx,{basename:i,children:a,location:c.location,navigationType:c.action,navigator:o})}var wp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sp=S.forwardRef(function({onClick:a,discover:r="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:m,target:g,to:p,preventScrollReset:v,viewTransition:b,..._},x){let{basename:C}=S.useContext(Zt),A=typeof p=="string"&&wp.test(p),j,N=!1;if(typeof p=="string"&&A&&(j=p,_p))try{let P=new URL(window.location.href),K=p.startsWith("//")?new URL(P.protocol+p):new URL(p),ce=Aa(K.pathname,C);K.origin===P.origin&&ce!=null?p=ce+K.search+K.hash:N=!0}catch{Jt(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=Yb(p,{relative:o}),[O,H,F]=Nx(s,_),V=Bx(p,{replace:d,state:m,target:g,preventScrollReset:v,relative:o,viewTransition:b});function te(P){a&&a(P),P.defaultPrevented||V(P)}let Y=S.createElement("a",{..._,...F,href:j||T,onClick:N||c?a:te,ref:Ox(x,H),target:g,"data-discover":!A&&r==="render"?"true":void 0});return O&&!A?S.createElement(S.Fragment,null,Y,S.createElement(Rx,{page:T})):Y});Sp.displayName="Link";var Mx=S.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:m,children:g,...p},v){let b=Gs(d,{relative:p.relative}),_=sr(),x=S.useContext(Dl),{navigator:C,basename:A}=S.useContext(Zt),j=x!=null&&Hx(b)&&m===!0,N=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,T=_.pathname,O=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(T=T.toLowerCase(),O=O?O.toLowerCase():null,N=N.toLowerCase()),O&&A&&(O=Aa(O,A)||O);const H=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let F=T===N||!o&&T.startsWith(N)&&T.charAt(H)==="/",V=O!=null&&(O===N||!o&&O.startsWith(N)&&O.charAt(N.length)==="/"),te={isActive:F,isPending:V,isTransitioning:j},Y=F?a:void 0,P;typeof s=="function"?P=s(te):P=[s,F?"active":null,V?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let K=typeof c=="function"?c(te):c;return S.createElement(Sp,{...p,"aria-current":Y,className:P,ref:v,style:K,to:d,viewTransition:m},typeof g=="function"?g(te):g)});Mx.displayName="NavLink";var zx=S.forwardRef(({discover:i="render",fetcherKey:a,navigate:r,reloadDocument:s,replace:o,state:c,method:d=_l,action:m,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:b,..._},x)=>{let C=Px(),A=$x(m,{relative:p}),j=d.toLowerCase()==="get"?"get":"post",N=typeof m=="string"&&wp.test(m),T=O=>{if(g&&g(O),O.defaultPrevented)return;O.preventDefault();let H=O.nativeEvent.submitter,F=H?.getAttribute("formmethod")||d;C(H||O.currentTarget,{fetcherKey:a,method:F,navigate:r,replace:o,state:c,relative:p,preventScrollReset:v,viewTransition:b})};return S.createElement("form",{ref:x,method:j,action:A,onSubmit:s?g:T,..._,"data-discover":!N&&i==="render"?"true":void 0})});zx.displayName="Form";function Ux(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cp(i){let a=S.useContext(kn);return $e(a,Ux(i)),a}function Bx(i,{target:a,replace:r,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=Ml(),g=sr(),p=Gs(i,{relative:c});return S.useCallback(v=>{if(gx(v,a)){v.preventDefault();let b=r!==void 0?r:qs(g)===qs(p);m(i,{replace:b,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[g,m,p,r,s,a,i,o,c,d])}var Lx=0,qx=()=>`__${String(++Lx)}__`;function Px(){let{router:i}=Cp("useSubmit"),{basename:a}=S.useContext(Zt),r=nx();return S.useCallback(async(s,o={})=>{let{action:c,method:d,encType:m,formData:g,body:p}=vx(s,a);if(o.navigate===!1){let v=o.fetcherKey||qx();await i.fetch(v,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,a,r])}function $x(i,{relative:a}={}){let{basename:r}=S.useContext(Zt),s=S.useContext(ea);$e(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Gs(i||".",{relative:a})},d=sr();if(i==null){c.search=d.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();c.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:ja([r,c.pathname])),qs(c)}function Hx(i,{relative:a}={}){let r=S.useContext(mp);$e(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Cp("useViewTransitionState"),o=Gs(i,{relative:a});if(!r.isTransitioning)return!1;let c=Aa(r.currentLocation.pathname,s)||r.currentLocation.pathname,d=Aa(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Al(o.pathname,d)!=null||Al(o.pathname,c)!=null}function El(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}function yg(i){if(!i?.trim())return{isValid:!1,error:"Username is required"};const a=i.trim();return a.length<3||a.length>30?{isValid:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(a)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}function Vx(i){if(!i)return{isValid:!1,error:"Password is required"};if(i.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};const a=/[a-z]/.test(i),r=/[A-Z]/.test(i),s=/\d/.test(i),o=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(i);return!a||!r||!s||!o?{isValid:!1,error:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:{isValid:!0}}function vg(i){return i?.trim()?i.length>100?{isValid:!1,error:"Campaign name must be 100 characters or less"}:{isValid:!0}:{isValid:!1,error:"Campaign name is required"}}function bg(i){return["admin","gm","player"].includes(i)}function jp(i){const{isAdmin:a,isGm:r,isPlayer:s}=i;return!(!a&&!r&&!s||r&&s&&!a)}function uu(i){return typeof i=="string"?["admin","gm"].includes(i):i.isAdmin||i.isGm}function Gx(i){return typeof i=="string"?i==="admin":i.isAdmin}function Fx(i){return typeof i=="string"?i==="admin":i.isAdmin}function Ul(i){const a=[];return i.isAdmin&&a.push("Admin"),i.isGm&&a.push("GM"),i.isPlayer&&a.push("Player"),a.length===0?"No roles":a.length===1?a[0]:a.length===2?a.join(" + "):`${a.slice(0,-1).join(", ")} + ${a[a.length-1]}`}function Ds(i,a){return`Only ${a.length===1?`${a[0]}s`:`${a.slice(0,-1).join(", ")} and ${a[a.length-1]}s`} can ${i}`}class Yx{authRepository;constructor(a){this.authRepository=a}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(a,r){return!a||!r?{success:!1,error:"Email and password are required"}:El(a)?this.authRepository.signIn(a,r):{success:!1,error:"Invalid email format"}}async signUp(a,r){return!a||!r?{success:!1,error:"Email and password are required"}:El(a)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(a,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(a){return this.authRepository.onAuthStateChange(a)}async completeProfile(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!a.displayName?.trim())return{success:!1,error:"Display name is required"};const s=yg(a.username);return s.isValid?this.authRepository.completeProfile(r.id,a.displayName.trim(),a.username.trim()):{success:!1,error:s.error}}async updateProfile(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(a.displayName!==void 0&&!a.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(a.username!==void 0){const s=yg(a.username);if(!s.isValid)return{success:!1,error:s.error}}return this.authRepository.updateProfile(r.id,a.displayName?.trim(),a.username?.trim())}async changePassword(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!a.currentPassword)return{success:!1,error:"Current password is required"};const s=Vx(a.newPassword);return s.isValid?this.authRepository.changePassword(r.id,a.currentPassword,a.newPassword):{success:!1,error:s.error}}async deleteAccount(){const a=await this.authRepository.getCurrentUser();return a?this.authRepository.deleteAccount(a.id):{success:!1,error:"User not authenticated"}}}class Ix{campaignRepository;authRepository;constructor(a,r){this.campaignRepository=a,this.authRepository=r}async getCampaigns(){const a=await this.authRepository.getCurrentUser();return a?this.campaignRepository.getCampaigns(a.id):{success:!1,error:"User not authenticated"}}async getCampaign(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const s=await this.campaignRepository.canUserAccessCampaign(a,r.id);return!s.success||!s.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(a)}async createCampaign(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const s=vg(a.name);if(!s.isValid)return{success:!1,error:s.error};const o=a.creatorIsAlsoGM||!1;if(a.initialMembers)for(const d of a.initialMembers){if(!El(d.email))return{success:!1,error:`Invalid email format: ${d.email}`};if(!bg(d.role))return{success:!1,error:`Invalid role: ${d.role}`}}const c=await this.campaignRepository.createCampaign(r.id,{name:a.name.trim(),description:a.description?.trim()},o);if(!c.success)return c;if(a.initialMembers&&a.initialMembers.length>0&&c.data)for(const d of a.initialMembers)await this.campaignRepository.addMemberByEmail(c.data.id,d.email.trim(),d.role);return c}async updateCampaign(a,r){const s=await this.authRepository.getCurrentUser();if(!s)return{success:!1,error:"User not authenticated"};const o=await this.campaignRepository.getUserRole(a,s.id);if(!o.success||!o.data||!Gx(o.data))return{success:!1,error:Ds("update campaigns",["admin"])};if(r.name!==void 0){const d=vg(r.name);if(!d.isValid)return{success:!1,error:d.error}}const c={};return r.name!==void 0&&(c.name=r.name.trim()),r.description!==void 0&&(c.description=r.description?.trim()),this.campaignRepository.updateCampaign(a,c)}async deleteCampaign(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const s=await this.campaignRepository.getUserRole(a,r.id);return!s.success||!s.data||!Fx(s.data)?{success:!1,error:Ds("delete campaigns",["admin"])}:this.campaignRepository.deleteCampaign(a)}async getCampaignMembers(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const s=await this.campaignRepository.canUserAccessCampaign(a,r.id);return!s.success||!s.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(a)}async addMemberByEmail(a,r,s){const o=await this.authRepository.getCurrentUser();if(!o)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(a,o.id);return!c.success||!c.data||!uu(c.data)?{success:!1,error:Ds("add members",["admin","gm"])}:r?.trim()?El(r)?bg(s)?this.campaignRepository.addMemberByEmail(a,r.trim(),s):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(a,r,s){const o=await this.authRepository.getCurrentUser();if(!o)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(a,o.id);return!c.success||!c.data||!uu(c.data)?{success:!1,error:Ds("update member roles",["admin","gm"])}:jp(s)?this.campaignRepository.updateMemberRole(a,r,s):{success:!1,error:"Invalid role combination. Must have at least one role and cannot be GM+Player without Admin."}}async removeMember(a,r){const s=await this.authRepository.getCurrentUser();if(!s)return{success:!1,error:"User not authenticated"};const o=await this.campaignRepository.getUserRole(a,s.id);return!o.success||!o.data||!uu(o.data)?{success:!1,error:Ds("remove members",["admin","gm"])}:this.campaignRepository.removeMember(a,r)}}var Cu=function(i,a){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},Cu(i,a)};function Ap(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Cu(i,a);function r(){this.constructor=i}i.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var Nl=function(){return Nl=Object.assign||function(a){for(var r,s=1,o=arguments.length;s<o;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(a[c]=r[c])}return a},Nl.apply(this,arguments)};function Dn(i,a){var r={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.indexOf(s)<0&&(r[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)a.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(r[s[o]]=i[s[o]]);return r}function Ep(i,a,r,s){var o=arguments.length,c=o<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,r):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,a,r,s);else for(var m=i.length-1;m>=0;m--)(d=i[m])&&(c=(o<3?d(c):o>3?d(a,r,c):d(a,r))||c);return o>3&&c&&Object.defineProperty(a,r,c),c}function Np(i,a){return function(r,s){a(r,s,i)}}function Rp(i,a,r,s,o,c){function d(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var m=s.kind,g=m==="getter"?"get":m==="setter"?"set":"value",p=!a&&i?s.static?i:i.prototype:null,v=a||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),b,_=!1,x=r.length-1;x>=0;x--){var C={};for(var A in s)C[A]=A==="access"?{}:s[A];for(var A in s.access)C.access[A]=s.access[A];C.addInitializer=function(N){if(_)throw new TypeError("Cannot add initializers after decoration has completed");c.push(d(N||null))};var j=(0,r[x])(m==="accessor"?{get:v.get,set:v.set}:v[g],C);if(m==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(b=d(j.get))&&(v.get=b),(b=d(j.set))&&(v.set=b),(b=d(j.init))&&o.unshift(b)}else(b=d(j))&&(m==="field"?o.unshift(b):v[g]=b)}p&&Object.defineProperty(p,s.name,v),_=!0}function Tp(i,a,r){for(var s=arguments.length>2,o=0;o<a.length;o++)r=s?a[o].call(i,r):a[o].call(i);return s?r:void 0}function kp(i){return typeof i=="symbol"?i:"".concat(i)}function Op(i,a,r){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:r?"".concat(r," ",a):a})}function Dp(i,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,a)}function ae(i,a,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(v){try{p(s.next(v))}catch(b){d(b)}}function g(v){try{p(s.throw(v))}catch(b){d(b)}}function p(v){v.done?c(v.value):o(v.value).then(m,g)}p((s=s.apply(i,a||[])).next())})}function Mp(i,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=m(0),d.throw=m(1),d.return=m(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){r.label=p[1];break}if(p[0]===6&&r.label<c[1]){r.label=c[1],c=p;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(p);break}c[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(i,r)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Bl=Object.create?(function(i,a,r,s){s===void 0&&(s=r);var o=Object.getOwnPropertyDescriptor(a,r);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(i,s,o)}):(function(i,a,r,s){s===void 0&&(s=r),i[s]=a[r]});function zp(i,a){for(var r in i)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&Bl(a,i,r)}function Rl(i){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&i[a],s=0;if(r)return r.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yu(i,a){var r=typeof Symbol=="function"&&i[Symbol.iterator];if(!r)return i;var s=r.call(i),o,c=[],d;try{for(;(a===void 0||a-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(m){d={error:m}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(d)throw d.error}}return c}function Up(){for(var i=[],a=0;a<arguments.length;a++)i=i.concat(Yu(arguments[a]));return i}function Bp(){for(var i=0,a=0,r=arguments.length;a<r;a++)i+=arguments[a].length;for(var s=Array(i),o=0,a=0;a<r;a++)for(var c=arguments[a],d=0,m=c.length;d<m;d++,o++)s[o]=c[d];return s}function Lp(i,a,r){if(r||arguments.length===2)for(var s=0,o=a.length,c;s<o;s++)(c||!(s in a))&&(c||(c=Array.prototype.slice.call(a,0,s)),c[s]=a[s]);return i.concat(c||Array.prototype.slice.call(a))}function Nn(i){return this instanceof Nn?(this.v=i,this):new Nn(i)}function qp(i,a,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(i,a||[]),o,c=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(x){return function(C){return Promise.resolve(C).then(x,b)}}function m(x,C){s[x]&&(o[x]=function(A){return new Promise(function(j,N){c.push([x,A,j,N])>1||g(x,A)})},C&&(o[x]=C(o[x])))}function g(x,C){try{p(s[x](C))}catch(A){_(c[0][3],A)}}function p(x){x.value instanceof Nn?Promise.resolve(x.value.v).then(v,b):_(c[0][2],x)}function v(x){g("next",x)}function b(x){g("throw",x)}function _(x,C){x(C),c.shift(),c.length&&g(c[0][0],c[0][1])}}function Pp(i){var a,r;return a={},s("next"),s("throw",function(o){throw o}),s("return"),a[Symbol.iterator]=function(){return this},a;function s(o,c){a[o]=i[o]?function(d){return(r=!r)?{value:Nn(i[o](d)),done:!1}:c?c(d):d}:c}}function $p(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i[Symbol.asyncIterator],r;return a?a.call(i):(i=typeof Rl=="function"?Rl(i):i[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(c){r[c]=i[c]&&function(d){return new Promise(function(m,g){d=i[c](d),o(m,g,d.done,d.value)})}}function o(c,d,m,g){Promise.resolve(g).then(function(p){c({value:p,done:m})},d)}}function Hp(i,a){return Object.defineProperty?Object.defineProperty(i,"raw",{value:a}):i.raw=a,i}var Qx=Object.create?(function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}):function(i,a){i.default=a},ju=function(i){return ju=Object.getOwnPropertyNames||function(a){var r=[];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[r.length]=s);return r},ju(i)};function Vp(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var r=ju(i),s=0;s<r.length;s++)r[s]!=="default"&&Bl(a,i,r[s]);return Qx(a,i),a}function Gp(i){return i&&i.__esModule?i:{default:i}}function Fp(i,a,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?i!==a||!s:!a.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(i):s?s.value:a.get(i)}function Yp(i,a,r,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?i!==a||!o:!a.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(i,r):o?o.value=r:a.set(i,r),r}function Ip(i,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?a===i:i.has(a)}function Qp(i,a,r){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var s,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=a[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=a[Symbol.dispose],r&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(c){return Promise.reject(c)}}),i.stack.push({value:a,dispose:s,async:r})}else r&&i.stack.push({async:!0});return a}var Kx=typeof SuppressedError=="function"?SuppressedError:function(i,a,r){var s=new Error(r);return s.name="SuppressedError",s.error=i,s.suppressed=a,s};function Kp(i){function a(c){i.error=i.hasError?new Kx(c,i.error,"An error was suppressed during disposal."):c,i.hasError=!0}var r,s=0;function o(){for(;r=i.stack.pop();)try{if(!r.async&&s===1)return s=0,i.stack.push(r),Promise.resolve().then(o);if(r.dispose){var c=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(c).then(o,function(d){return a(d),o()})}else s|=1}catch(d){a(d)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function Wp(i,a){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,o,c,d){return s?a?".jsx":".js":o&&(!c||!d)?r:o+c+"."+d.toLowerCase()+"js"}):i}const Wx={__extends:Ap,__assign:Nl,__rest:Dn,__decorate:Ep,__param:Np,__esDecorate:Rp,__runInitializers:Tp,__propKey:kp,__setFunctionName:Op,__metadata:Dp,__awaiter:ae,__generator:Mp,__createBinding:Bl,__exportStar:zp,__values:Rl,__read:Yu,__spread:Up,__spreadArrays:Bp,__spreadArray:Lp,__await:Nn,__asyncGenerator:qp,__asyncDelegator:Pp,__asyncValues:$p,__makeTemplateObject:Hp,__importStar:Vp,__importDefault:Gp,__classPrivateFieldGet:Fp,__classPrivateFieldSet:Yp,__classPrivateFieldIn:Ip,__addDisposableResource:Qp,__disposeResources:Kp,__rewriteRelativeImportExtension:Wp},Xx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Qp,get __assign(){return Nl},__asyncDelegator:Pp,__asyncGenerator:qp,__asyncValues:$p,__await:Nn,__awaiter:ae,__classPrivateFieldGet:Fp,__classPrivateFieldIn:Ip,__classPrivateFieldSet:Yp,__createBinding:Bl,__decorate:Ep,__disposeResources:Kp,__esDecorate:Rp,__exportStar:zp,__extends:Ap,__generator:Mp,__importDefault:Gp,__importStar:Vp,__makeTemplateObject:Hp,__metadata:Dp,__param:Np,__propKey:kp,__read:Yu,__rest:Dn,__rewriteRelativeImportExtension:Wp,__runInitializers:Tp,__setFunctionName:Op,__spread:Up,__spreadArray:Lp,__spreadArrays:Bp,__values:Rl,default:Wx},Symbol.toStringTag,{value:"Module"})),Jx=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);class Iu extends Error{constructor(a,r="FunctionsError",s){super(a),this.name=r,this.context=s}}class xg extends Iu{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class _g extends Iu{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class wg extends Iu{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Au;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Au||(Au={}));class Zx{constructor(a,{headers:r={},customFetch:s,region:o=Au.Any}={}){this.url=a,this.headers=r,this.region=o,this.fetch=Jx(s)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return ae(this,arguments,void 0,function*(r,s={}){var o;try{const{headers:c,method:d,body:m,signal:g}=s;let p={},{region:v}=s;v||(v=this.region);const b=new URL(`${this.url}/${r}`);v&&v!=="any"&&(p["x-region"]=v,b.searchParams.set("forceFunctionRegion",v));let _;m&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=m):typeof m=="string"?(p["Content-Type"]="text/plain",_=m):typeof FormData<"u"&&m instanceof FormData?_=m:(p["Content-Type"]="application/json",_=JSON.stringify(m)):_=m;const x=yield this.fetch(b.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),c),body:_,signal:g}).catch(N=>{throw N.name==="AbortError"?N:new xg(N)}),C=x.headers.get("x-relay-error");if(C&&C==="true")throw new _g(x);if(!x.ok)throw new wg(x);let A=((o=x.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),j;return A==="application/json"?j=yield x.json():A==="application/octet-stream"||A==="application/pdf"?j=yield x.blob():A==="text/event-stream"?j=x:A==="multipart/form-data"?j=yield x.formData():j=yield x.text(),{data:j,error:null,response:x}}catch(c){return c instanceof Error&&c.name==="AbortError"?{data:null,error:new xg(c)}:{data:null,error:c,response:c instanceof wg||c instanceof _g?c.context:void 0}}})}}var ut={};const Mn=lb(Xx);var ul={},dl={},hl={},fl={},ml={},gl={},Sg;function Xp(){if(Sg)return gl;Sg=1,Object.defineProperty(gl,"__esModule",{value:!0});class i extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return gl.default=i,gl}var Cg;function Jp(){if(Cg)return ml;Cg=1,Object.defineProperty(ml,"__esModule",{value:!0});const a=Mn.__importDefault(Xp());class r{constructor(o){var c,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(c=o.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=new Headers(this.headers),this.headers.set(o,c),this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let m=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,v,b,_;let x=null,C=null,A=null,j=g.status,N=g.statusText;if(g.ok){if(this.method!=="HEAD"){const F=await g.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?C=F:C=JSON.parse(F))}const O=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),H=(b=g.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");O&&H&&H.length>1&&(A=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(x={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,A=null,j=406,N="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const O=await g.text();try{x=JSON.parse(O),Array.isArray(x)&&g.status===404&&(C=[],x=null,j=200,N="OK")}catch{g.status===404&&O===""?(j=204,N="No Content"):x={message:O}}if(x&&this.isMaybeSingle&&(!((_=x?.details)===null||_===void 0)&&_.includes("0 rows"))&&(x=null,j=200,N="OK"),x&&this.shouldThrowOnError)throw new a.default(x)}return{error:x,data:C,count:A,status:j,statusText:N}});return this.shouldThrowOnError||(m=m.catch(g=>{var p,v,b;return{error:{message:`${(p=g?.name)!==null&&p!==void 0?p:"FetchError"}: ${g?.message}`,details:`${(v=g?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(b=g?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),m.then(o,c)}returns(){return this}overrideTypes(){return this}}return ml.default=r,ml}var jg;function Zp(){if(jg)return fl;jg=1,Object.defineProperty(fl,"__esModule",{value:!0});const a=Mn.__importDefault(Jp());class r extends a.default{select(o){let c=!1;const d=(o??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:m,referencedTable:g=m}={}){const p=g?`${g}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:m=d}={}){const g=typeof m>"u"?"offset":`${m}.offset`,p=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(p,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:m=!1,wal:g=!1,format:p="text"}={}){var v;const b=[o?"analyze":null,c?"verbose":null,d?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),_=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${b};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return fl.default=r,fl}var Ag;function Qu(){if(Ag)return hl;Ag=1,Object.defineProperty(hl,"__esModule",{value:!0});const a=Mn.__importDefault(Zp()),r=new RegExp("[,()]");class s extends a.default{eq(c,d){return this.url.searchParams.append(c,`eq.${d}`),this}neq(c,d){return this.url.searchParams.append(c,`neq.${d}`),this}gt(c,d){return this.url.searchParams.append(c,`gt.${d}`),this}gte(c,d){return this.url.searchParams.append(c,`gte.${d}`),this}lt(c,d){return this.url.searchParams.append(c,`lt.${d}`),this}lte(c,d){return this.url.searchParams.append(c,`lte.${d}`),this}like(c,d){return this.url.searchParams.append(c,`like.${d}`),this}likeAllOf(c,d){return this.url.searchParams.append(c,`like(all).{${d.join(",")}}`),this}likeAnyOf(c,d){return this.url.searchParams.append(c,`like(any).{${d.join(",")}}`),this}ilike(c,d){return this.url.searchParams.append(c,`ilike.${d}`),this}ilikeAllOf(c,d){return this.url.searchParams.append(c,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(c,d){return this.url.searchParams.append(c,`ilike(any).{${d.join(",")}}`),this}is(c,d){return this.url.searchParams.append(c,`is.${d}`),this}in(c,d){const m=Array.from(new Set(d)).map(g=>typeof g=="string"&&r.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(c,`in.(${m})`),this}contains(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cs.{${d.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(d)}`),this}containedBy(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cd.{${d.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(d)}`),this}rangeGt(c,d){return this.url.searchParams.append(c,`sr.${d}`),this}rangeGte(c,d){return this.url.searchParams.append(c,`nxl.${d}`),this}rangeLt(c,d){return this.url.searchParams.append(c,`sl.${d}`),this}rangeLte(c,d){return this.url.searchParams.append(c,`nxr.${d}`),this}rangeAdjacent(c,d){return this.url.searchParams.append(c,`adj.${d}`),this}overlaps(c,d){return typeof d=="string"?this.url.searchParams.append(c,`ov.${d}`):this.url.searchParams.append(c,`ov.{${d.join(",")}}`),this}textSearch(c,d,{config:m,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const v=m===void 0?"":`(${m})`;return this.url.searchParams.append(c,`${p}fts${v}.${d}`),this}match(c){return Object.entries(c).forEach(([d,m])=>{this.url.searchParams.append(d,`eq.${m}`)}),this}not(c,d,m){return this.url.searchParams.append(c,`not.${d}.${m}`),this}or(c,{foreignTable:d,referencedTable:m=d}={}){const g=m?`${m}.or`:"or";return this.url.searchParams.append(g,`(${c})`),this}filter(c,d,m){return this.url.searchParams.append(c,`${d}.${m}`),this}}return hl.default=s,hl}var Eg;function ey(){if(Eg)return dl;Eg=1,Object.defineProperty(dl,"__esModule",{value:!0});const a=Mn.__importDefault(Qu());class r{constructor(o,{headers:c={},schema:d,fetch:m}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=m}select(o,c){const{head:d=!1,count:m}=c??{},g=d?"HEAD":"GET";let p=!1;const v=(o??"*").split("").map(b=>/\s/.test(b)&&!p?"":(b==='"'&&(p=!p),b)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var m;const g="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(p.length>0){const v=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:m,defaultToNull:g=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((_,x)=>_.concat(Object.keys(x)),[]);if(b.length>0){const _=[...new Set(b)].map(x=>`"${x}"`);this.url.searchParams.set("columns",_.join(","))}}return new a.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:c}={}){var d;const m="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new a.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return dl.default=r,dl}var Ng;function e_(){if(Ng)return ul;Ng=1,Object.defineProperty(ul,"__esModule",{value:!0});const i=Mn,a=i.__importDefault(ey()),r=i.__importDefault(Qu());class s{constructor(c,{headers:d={},schema:m,fetch:g}={}){this.url=c,this.headers=new Headers(d),this.schemaName=m,this.fetch=g}from(c){const d=new URL(`${this.url}/${c}`);return new a.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new s(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:m=!1,get:g=!1,count:p}={}){var v;let b;const _=new URL(`${this.url}/rpc/${c}`);let x;m||g?(b=m?"HEAD":"GET",Object.entries(d).filter(([A,j])=>j!==void 0).map(([A,j])=>[A,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([A,j])=>{_.searchParams.append(A,j)})):(b="POST",x=d);const C=new Headers(this.headers);return p&&C.set("Prefer",`count=${p}`),new r.default({method:b,url:_,headers:C,schema:this.schemaName,body:x,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return ul.default=s,ul}var Rg;function t_(){if(Rg)return ut;Rg=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const i=Mn,a=i.__importDefault(e_());ut.PostgrestClient=a.default;const r=i.__importDefault(ey());ut.PostgrestQueryBuilder=r.default;const s=i.__importDefault(Qu());ut.PostgrestFilterBuilder=s.default;const o=i.__importDefault(Zp());ut.PostgrestTransformBuilder=o.default;const c=i.__importDefault(Jp());ut.PostgrestBuilder=c.default;const d=i.__importDefault(Xp());return ut.PostgrestError=d.default,ut.default={PostgrestClient:a.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:d.default},ut}var ty=t_();const ay=cp(ty),a_=ub({__proto__:null,default:ay},[ty]),{PostgrestClient:r_,PostgrestQueryBuilder:GC,PostgrestFilterBuilder:FC,PostgrestTransformBuilder:YC,PostgrestBuilder:IC,PostgrestError:QC}=ay||a_;class n_{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const s=this.getWebSocketConstructor();return new s(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const s_="2.80.0",i_=`realtime-js/${s_}`,l_="1.0.0",Eu=1e4,o_=1e3,c_=100;var zs;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(zs||(zs={}));var at;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(at||(at={}));var Xt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Xt||(Xt={}));var Nu;(function(i){i.websocket="websocket"})(Nu||(Nu={}));var Nr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Nr||(Nr={}));class u_{constructor(){this.HEADER_LENGTH=1}decode(a,r){return a.constructor===ArrayBuffer?r(this._binaryDecode(a)):r(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const r=new DataView(a),s=new TextDecoder;return this._decodeBroadcast(a,r,s)}_decodeBroadcast(a,r,s){const o=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const m=s.decode(a.slice(d,d+o));d=d+o;const g=s.decode(a.slice(d,d+c));d=d+c;const p=JSON.parse(s.decode(a.slice(d,a.byteLength)));return{ref:null,topic:m,event:g,payload:p}}}class ry{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Be||(Be={}));const Tg=(i,a,r={})=>{var s;const o=(s=r.skipTypes)!==null&&s!==void 0?s:[];return a?Object.keys(a).reduce((c,d)=>(c[d]=d_(d,i,a,o),c),{}):{}},d_=(i,a,r,s)=>{const o=a.find(m=>m.name===i),c=o?.type,d=r[i];return c&&!s.includes(c)?ny(c,d):Ru(d)},ny=(i,a)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return g_(a,r)}switch(i){case Be.bool:return h_(a);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return f_(a);case Be.json:case Be.jsonb:return m_(a);case Be.timestamp:return p_(a);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return Ru(a);default:return Ru(a)}},Ru=i=>i,h_=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},f_=i=>{if(typeof i=="string"){const a=parseFloat(i);if(!Number.isNaN(a))return a}return i},m_=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(a){return console.log(`JSON parse error: ${a}`),i}return i},g_=(i,a)=>{if(typeof i!="string")return i;const r=i.length-1,s=i[r];if(i[0]==="{"&&s==="}"){let c;const d=i.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(m=>ny(a,m))}return i},p_=i=>typeof i=="string"?i.replace(" ","T"):i,sy=i=>{const a=new URL(i);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class du{constructor(a,r,s={},o=Eu){this.channel=a,this.event=r,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var s;return this._hasReceived(a)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(s=>s.status===a).forEach(s=>s.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var kg;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(kg||(kg={}));class Us{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Us.syncState(this.state,o,c,d),this.pendingDiffs.forEach(g=>{this.state=Us.syncDiff(this.state,g,c,d)}),this.pendingDiffs=[],m()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Us.syncDiff(this.state,o,c,d),m())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,s,o){const c=this.cloneDeep(a),d=this.transformState(r),m={},g={};return this.map(c,(p,v)=>{d[p]||(g[p]=v)}),this.map(d,(p,v)=>{const b=c[p];if(b){const _=v.map(j=>j.presence_ref),x=b.map(j=>j.presence_ref),C=v.filter(j=>x.indexOf(j.presence_ref)<0),A=b.filter(j=>_.indexOf(j.presence_ref)<0);C.length>0&&(m[p]=C),A.length>0&&(g[p]=A)}else m[p]=v}),this.syncDiff(c,{joins:m,leaves:g},s,o)}static syncDiff(a,r,s,o){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(m,g)=>{var p;const v=(p=a[m])!==null&&p!==void 0?p:[];if(a[m]=this.cloneDeep(g),v.length>0){const b=a[m].map(x=>x.presence_ref),_=v.filter(x=>b.indexOf(x.presence_ref)<0);a[m].unshift(..._)}s(m,v,g)}),this.map(d,(m,g)=>{let p=a[m];if(!p)return;const v=g.map(b=>b.presence_ref);p=p.filter(b=>v.indexOf(b.presence_ref)<0),a[m]=p,o(m,p,g),p.length===0&&delete a[m]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(s=>r(s,a[s]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,s)=>{const o=a[s];return"metas"in o?r[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[s]=o,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Og;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Og||(Og={}));var Bs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Bs||(Bs={}));var Ca;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ca||(Ca={}));class Ku{constructor(a,r={config:{}},s){var o,c;if(this.topic=a,this.params=r,this.socket=s,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new du(this,Xt.join,this.params,this.timeout),this.rejoinTimer=new ry(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xt.reply,{},(d,m)=>{this._trigger(this._replyEventName(m),d)}),this.presence=new Us(this),this.broadcastEndpointURL=sy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,r=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==at.closed){const{config:{broadcast:d,presence:m,private:g}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(x=>x.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Bs.PRESENCE]&&this.bindings[Bs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,b={},_={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(x=>a?.(Ca.CHANNEL_ERROR,x)),this._onClose(()=>a?.(Ca.CLOSED)),this.updateJoinPayload(Object.assign({config:_},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var C;if(this.socket.setAuth(),x===void 0){a?.(Ca.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,j=(C=A?.length)!==null&&C!==void 0?C:0,N=[];for(let T=0;T<j;T++){const O=A[T],{filter:{event:H,schema:F,table:V,filter:te}}=O,Y=x&&x[T];if(Y&&Y.event===H&&Y.schema===F&&Y.table===V&&Y.filter===te)N.push(Object.assign(Object.assign({},O),{id:Y.id}));else{this.unsubscribe(),this.state=at.errored,a?.(Ca.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,a&&a(Ca.SUBSCRIBED);return}}).receive("error",x=>{this.state=at.errored,a?.(Ca.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{a?.(Ca.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,s){return this.state===at.joined&&a===Bs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,r,s)}async httpSend(a,r,s={}){var o;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const p=await m.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(a,r={}){var s,o;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,m,g;const p=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((g=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=at.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new du(this,Xt.leave,{},a),s.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=at.closed,this.bindings={}}async _fetchWithTimeout(a,r,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),d=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),d}_push(a,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new du(this,a,r,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>c_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,s){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,s){var o,c;const d=a.toLocaleLowerCase(),{close:m,error:g,leave:p,join:v}=Xt;if(s&&[m,g,p,v].indexOf(d)>=0&&s!==this._joinRef())return;let _=this._onMessage(d,r,s);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var C,A,j;return((C=x.filter)===null||C===void 0?void 0:C.event)==="*"||((j=(A=x.filter)===null||A===void 0?void 0:A.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===d}).map(x=>x.callback(_,s)):(c=this.bindings[d])===null||c===void 0||c.filter(x=>{var C,A,j,N,T,O;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in x){const H=x.id,F=(C=x.filter)===null||C===void 0?void 0:C.event;return H&&((A=r.ids)===null||A===void 0?void 0:A.includes(H))&&(F==="*"||F?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const H=(T=(N=x?.filter)===null||N===void 0?void 0:N.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return H==="*"||H===((O=r?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===d}).map(x=>{if(typeof _=="object"&&"ids"in _){const C=_.data,{schema:A,table:j,commit_timestamp:N,type:T,errors:O}=C;_=Object.assign(Object.assign({},{schema:A,table:j,commit_timestamp:N,eventType:T,new:{},old:{},errors:O}),this._getPayloadRecords(C))}x.callback(_,s)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,s){const o=a.toLocaleLowerCase(),c={type:o,filter:r,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(a,r){const s=a.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&Ku.isEqual(o.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const s in a)if(a[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Xt.close,{},a)}_onError(a){this._on(Xt.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=Tg(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=Tg(a.columns,a.old_record)),r}}const hu=()=>{},pl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},y_=[1e3,2e3,5e3,1e4],v_=1e4,b_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x_{constructor(a,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eu,this.transport=null,this.heartbeatIntervalMs=pl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hu,this.ref=0,this.reconnectTimer=null,this.logger=hu,this.conn=null,this.sendBuffer=[],this.serializer=new u_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${Nu.websocket}`,this.httpEndpoint=sy(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n_.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l_}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},a?this.conn.close(a,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,s){this.logger(a,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case zs.connecting:return Nr.Connecting;case zs.open:return Nr.Open;case zs.closing:return Nr.Closing;default:return Nr.Closed}}isConnected(){return this.connectionState()===Nr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const s=`realtime:${a}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new Ku(`realtime:${a}`,r,this);return this.channels.push(c),c}}push(a){const{topic:r,event:s,payload:o,ref:c}=a,d=()=>{this.encode(a,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${r} ${s} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(o_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(s=>s.topic===a&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:c,ref:d}=r,m=d?`(${d})`:"",g=c.status||"";this.log("receive",`${g} ${s} ${o} ${m}`.trim(),c),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,c,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Xt.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const s=a.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${a}${s}${o}`}_workerObjectUrl(a){let r;if(a)r=a;else{const s=new Blob([b_],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r;a?r=a:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:i_};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Xt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(s=>{try{s(r)}catch(o){this.log("error",`error in ${a} callback`,o)}})}catch(s){this.log("error",`error triggering ${a} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new ry(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,s,o,c,d,m,g,p,v;if(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=a?.timeout)!==null&&s!==void 0?s:Eu,this.heartbeatIntervalMs=(o=a?.heartbeatIntervalMs)!==null&&o!==void 0?o:pl.HEARTBEAT_INTERVAL,this.worker=(c=a?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=a?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=a?.heartbeatCallback)!==null&&m!==void 0?m:hu,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=a?.reconnectAfterMs)!==null&&g!==void 0?g:(b=>y_[b-1]||v_),this.encode=(p=a?.encode)!==null&&p!==void 0?p:((b,_)=>_(JSON.stringify(b))),this.decode=(v=a?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class Wu extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function Ve(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class __ extends Wu{constructor(a,r,s){super(a),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tu extends Wu{constructor(a,r){super(a),this.name="StorageUnknownError",this.originalError=r}}const Xu=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),w_=()=>Response,ku=i=>{if(Array.isArray(i))return i.map(r=>ku(r));if(typeof i=="function"||i!==Object(i))return i;const a={};return Object.entries(i).forEach(([r,s])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));a[o]=ku(s)}),a},S_=i=>{if(typeof i!="object"||i===null)return!1;const a=Object.getPrototypeOf(i);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},fu=i=>{var a;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(a=i.error)===null||a===void 0?void 0:a.message)||JSON.stringify(i)},C_=(i,a,r)=>ae(void 0,void 0,void 0,function*(){const s=yield w_();i instanceof s&&!r?.noResolveJson?i.json().then(o=>{const c=i.status||500,d=o?.statusCode||c+"";a(new __(fu(o),c,d))}).catch(o=>{a(new Tu(fu(o),o))}):a(new Tu(fu(i),i))}),j_=(i,a,r,s)=>{const o={method:i,headers:a?.headers||{}};return i==="GET"||!s?o:(S_(s)?(o.headers=Object.assign({"Content-Type":"application/json"},a?.headers),o.body=JSON.stringify(s)):o.body=s,a?.duplex&&(o.duplex=a.duplex),Object.assign(Object.assign({},o),r))};function Fs(i,a,r,s,o,c){return ae(this,void 0,void 0,function*(){return new Promise((d,m)=>{i(r,j_(a,s,o,c)).then(g=>{if(!g.ok)throw g;return s?.noResolveJson?g:g.json()}).then(g=>d(g)).catch(g=>C_(g,m,s))})})}function Ps(i,a,r,s){return ae(this,void 0,void 0,function*(){return Fs(i,"GET",a,r,s)})}function Wt(i,a,r,s,o){return ae(this,void 0,void 0,function*(){return Fs(i,"POST",a,s,o,r)})}function Ou(i,a,r,s,o){return ae(this,void 0,void 0,function*(){return Fs(i,"PUT",a,s,o,r)})}function A_(i,a,r,s){return ae(this,void 0,void 0,function*(){return Fs(i,"HEAD",a,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Ju(i,a,r,s,o){return ae(this,void 0,void 0,function*(){return Fs(i,"DELETE",a,s,o,r)})}class E_{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r}then(a,r){return this.execute().then(a,r)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}}var iy;class N_{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r,this[iy]="BlobDownloadBuilder",this.promise=null}asStream(){return new E_(this.downloadFn,this.shouldThrowOnError)}then(a,r){return this.getPromise().then(a,r)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}}iy=Symbol.toStringTag;const R_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class T_{constructor(a,r={},s,o){this.shouldThrowOnError=!1,this.url=a,this.headers=r,this.bucketId=s,this.fetch=Xu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,r,s,o){return ae(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},Dg),o);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),g&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(g))):(c=s,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),o?.headers&&(m=Object.assign(Object.assign({},m),o.headers));const p=this._removeEmptyFolders(r),v=this._getFinalPath(p),b=yield(a=="PUT"?Ou:Wt)(this.fetch,`${this.url}/object/${v}`,c,Object.assign({headers:m},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}upload(a,r,s){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,r,s)})}uploadToSignedUrl(a,r,s,o){return ae(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(a),d=this._getFinalPath(c),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",r);try{let g;const p=Object.assign({upsert:Dg.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",p.cacheControl)):(g=s,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const b=yield Ou(this.fetch,m.toString(),g,{headers:v});return{data:{path:c,fullPath:b.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Ve(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(a,r){return ae(this,void 0,void 0,function*(){try{let s=this._getFinalPath(a);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const c=yield Wt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),d=new URL(this.url+c.url),m=d.searchParams.get("token");if(!m)throw new Wu("No token returned by API");return{data:{signedUrl:d.toString(),path:a,token:m},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}update(a,r,s){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,r,s)})}move(a,r,s){return ae(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}copy(a,r,s){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}createSignedUrl(a,r,s){return ae(this,void 0,void 0,function*(){try{let o=this._getFinalPath(a),c=yield Wt(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}createSignedUrls(a,r,s){return ae(this,void 0,void 0,function*(){try{const o=yield Wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:a},{headers:this.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}download(a,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),d=c?`?${c}`:"",m=this._getFinalPath(a),g=()=>Ps(this.fetch,`${this.url}/${o}/${m}${d}`,{headers:this.headers,noResolveJson:!0});return new N_(g,this.shouldThrowOnError)}info(a){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{const s=yield Ps(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ku(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}exists(a){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{return yield A_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s)&&s instanceof Tu){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(a,r){const s=this._getFinalPath(a),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const m=typeof r?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(r?.transform||{});g!==""&&o.push(g);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${s}${p}`)}}}remove(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Ju(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}list(a,r,s){return ae(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},R_),r),{prefix:a||""});return{data:yield Wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}listV2(a,r){return ae(this,void 0,void 0,function*(){try{const s=Object.assign({},a);return{data:yield Wt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const r=[];return a.width&&r.push(`width=${a.width}`),a.height&&r.push(`height=${a.height}`),a.resize&&r.push(`resize=${a.resize}`),a.format&&r.push(`format=${a.format}`),a.quality&&r.push(`quality=${a.quality}`),r.join("&")}}const ly="2.80.0",oy={"X-Client-Info":`storage-js/${ly}`};class k_{constructor(a,r={},s,o){this.shouldThrowOnError=!1;const c=new URL(a);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oy),r),this.fetch=Xu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return ae(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(a);return{data:yield Ps(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}getBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}createBucket(a){return ae(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Wt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}updateBucket(a,r){return ae(this,void 0,void 0,function*(){try{return{data:yield Ou(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}emptyBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Ju(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(a){const r={};return a&&("limit"in a&&(r.limit=String(a.limit)),"offset"in a&&(r.offset=String(a.offset)),a.search&&(r.search=a.search),a.sortColumn&&(r.sortColumn=a.sortColumn),a.sortOrder&&(r.sortOrder=a.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class O_{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oy),r),this.fetch=Xu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}listBuckets(a){return ae(this,void 0,void 0,function*(){try{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const s=r.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Ps(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Ju(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}}const Zu={"X-Client-Info":`storage-js/${ly}`,"Content-Type":"application/json"};class cy extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class mu extends cy{constructor(a,r,s){super(a),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class D_ extends cy{constructor(a,r){super(a),this.name="StorageVectorsUnknownError",this.originalError=r}}var Mg;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Mg||(Mg={}));const ed=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),M_=i=>{if(typeof i!="object"||i===null)return!1;const a=Object.getPrototypeOf(i);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},zg=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),z_=(i,a,r)=>ae(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!r?.noResolveJson){const o=i.status||500,c=i;if(typeof c.json=="function")c.json().then(d=>{const m=d?.statusCode||d?.code||o+"";a(new mu(zg(d),o,m))}).catch(()=>{const d=o+"",m=c.statusText||`HTTP ${o} error`;a(new mu(m,o,d))});else{const d=o+"",m=c.statusText||`HTTP ${o} error`;a(new mu(m,o,d))}}else a(new D_(zg(i),i))}),U_=(i,a,r,s)=>{const o={method:i,headers:a?.headers||{}};return s?(M_(s)?(o.headers=Object.assign({"Content-Type":"application/json"},a?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),r)):o};function B_(i,a,r,s,o,c){return ae(this,void 0,void 0,function*(){return new Promise((d,m)=>{i(r,U_(a,s,o,c)).then(g=>{if(!g.ok)throw g;if(s?.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>d(g)).catch(g=>z_(g,m,s))})})}function kt(i,a,r,s,o){return ae(this,void 0,void 0,function*(){return B_(i,"POST",a,s,o,r)})}class L_{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zu),r),this.fetch=ed(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return ae(this,void 0,void 0,function*(){try{return{data:(yield kt(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}getIndex(a,r){return ae(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tt(s))return{data:null,error:s};throw s}})}listIndexes(a){return ae(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}deleteIndex(a,r){return ae(this,void 0,void 0,function*(){try{return{data:(yield kt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tt(s))return{data:null,error:s};throw s}})}}class q_{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zu),r),this.fetch=ed(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return ae(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield kt(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}getVectors(a){return ae(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}listVectors(a){return ae(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield kt(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}queryVectors(a){return ae(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}deleteVectors(a){return ae(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield kt(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}}class P_{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zu),r),this.fetch=ed(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:(yield kt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}getBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}listBuckets(){return ae(this,arguments,void 0,function*(a={}){try{return{data:yield kt(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:(yield kt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}}class $_ extends P_{constructor(a,r={}){super(a,r.headers||{},r.fetch)}from(a){return new H_(this.url,this.headers,a,this.fetch)}}class H_ extends L_{constructor(a,r,s,o){super(a,r,o),this.vectorBucketName=s}createIndex(a){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(r={}){return a.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new V_(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class V_ extends q_{constructor(a,r,s,o,c){super(a,r,c),this.vectorBucketName=s,this.indexName=o}putVectors(a){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(r={}){return a.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class G_ extends k_{constructor(a,r={},s,o){super(a,r,s,o)}from(a){return new T_(this.url,this.headers,a,this.fetch)}get vectors(){return new $_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new O_(this.url+"/iceberg",this.headers,this.fetch)}}const F_="2.80.0";let Ms="";typeof Deno<"u"?Ms="deno":typeof document<"u"?Ms="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ms="react-native":Ms="node";const Y_={"X-Client-Info":`supabase-js-${Ms}/${F_}`},I_={headers:Y_},Q_={schema:"public"},K_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W_={},X_=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),J_=()=>Headers,Z_=(i,a,r)=>{const s=X_(r),o=J_();return async(c,d)=>{var m;const g=(m=await a())!==null&&m!==void 0?m:i;let p=new o(d?.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(c,Object.assign(Object.assign({},d),{headers:p}))}};function ew(i){return i.endsWith("/")?i:i+"/"}function tw(i,a){var r,s;const{db:o,auth:c,realtime:d,global:m}=i,{db:g,auth:p,realtime:v,global:b}=a,_={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},v),d),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(r=b?.headers)!==null&&r!==void 0?r:{}),(s=m?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return i.accessToken?_.accessToken=i.accessToken:delete _.accessToken,_}function aw(i){const a=i?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ew(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const uy="2.80.0",Cn=30*1e3,Du=3,gu=Du*Cn,rw="http://localhost:9999",nw="supabase.auth.token",sw={"X-Client-Info":`gotrue-js/${uy}`},Mu="X-Supabase-Api-Version",dy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lw=600*1e3;class $s extends Error{constructor(a,r,s){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function re(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class ow extends $s{constructor(a,r,s){super(a,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function cw(i){return re(i)&&i.name==="AuthApiError"}class Rr extends $s{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class ir extends $s{constructor(a,r,s,o){super(a,s,o),this.name=r,this.status=s}}class Qt extends ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uw(i){return re(i)&&i.name==="AuthSessionMissingError"}class bn extends ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yl extends ir{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class vl extends ir{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dw(i){return re(i)&&i.name==="AuthImplicitGrantRedirectError"}class Ug extends ir{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zu extends ir{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function pu(i){return re(i)&&i.name==="AuthRetryableFetchError"}class Bg extends ir{constructor(a,r,s){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Uu extends ir{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lg=` 	
\r=`.split(""),hw=(()=>{const i=new Array(128);for(let a=0;a<i.length;a+=1)i[a]=-1;for(let a=0;a<Lg.length;a+=1)i[Lg[a].charCodeAt(0)]=-2;for(let a=0;a<Tl.length;a+=1)i[Tl[a].charCodeAt(0)]=a;return i})();function qg(i,a,r){if(i!==null)for(a.queue=a.queue<<8|i,a.queuedBits+=8;a.queuedBits>=6;){const s=a.queue>>a.queuedBits-6&63;r(Tl[s]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const s=a.queue>>a.queuedBits-6&63;r(Tl[s]),a.queuedBits-=6}}function hy(i,a,r){const s=hw[i];if(s>-1)for(a.queue=a.queue<<6|s,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Pg(i){const a=[],r=d=>{a.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{gw(d,s,r)};for(let d=0;d<i.length;d+=1)hy(i.charCodeAt(d),o,c);return a.join("")}function fw(i,a){if(i<=127){a(i);return}else if(i<=2047){a(192|i>>6),a(128|i&63);return}else if(i<=65535){a(224|i>>12),a(128|i>>6&63),a(128|i&63);return}else if(i<=1114111){a(240|i>>18),a(128|i>>12&63),a(128|i>>6&63),a(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function mw(i,a){for(let r=0;r<i.length;r+=1){let s=i.charCodeAt(r);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(i.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}fw(s,a)}}function gw(i,a,r){if(a.utf8seq===0){if(i<=127){r(i);return}for(let s=1;s<6;s+=1)if((i>>7-s&1)===0){a.utf8seq=s;break}if(a.utf8seq===2)a.codepoint=i&31;else if(a.utf8seq===3)a.codepoint=i&15;else if(a.utf8seq===4)a.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|i&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function En(i){const a=[],r={queue:0,queuedBits:0},s=o=>{a.push(o)};for(let o=0;o<i.length;o+=1)hy(i.charCodeAt(o),r,s);return new Uint8Array(a)}function pw(i){const a=[];return mw(i,r=>a.push(r)),new Uint8Array(a)}function Tr(i){const a=[],r={queue:0,queuedBits:0},s=o=>{a.push(o)};return i.forEach(o=>qg(o,r,s)),qg(null,r,s),a.join("")}function yw(i){return Math.round(Date.now()/1e3)+i}function vw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const a=Math.random()*16|0;return(i=="x"?a:a&3|8).toString(16)})}const dt=()=>typeof window<"u"&&typeof document<"u",jr={tested:!1,writable:!1},fy=()=>{if(!dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jr.tested)return jr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),jr.tested=!0,jr.writable=!0}catch{jr.tested=!0,jr.writable=!1}return jr.writable};function bw(i){const a={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{a[c]=o})}catch{}return r.searchParams.forEach((s,o)=>{a[o]=s}),a}const my=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),xw=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",jn=async(i,a,r)=>{await i.setItem(a,JSON.stringify(r))},Ar=async(i,a)=>{const r=await i.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},er=async(i,a)=>{await i.removeItem(a)};class Ll{constructor(){this.promise=new Ll.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}Ll.promiseConstructor=Promise;function yu(i){const a=i.split(".");if(a.length!==3)throw new Uu("Invalid JWT structure");for(let s=0;s<a.length;s++)if(!iw.test(a[s]))throw new Uu("JWT not in base64url format");return{header:JSON.parse(Pg(a[0])),payload:JSON.parse(Pg(a[1])),signature:En(a[2]),raw:{header:a[0],payload:a[1]}}}async function _w(i){return await new Promise(a=>{setTimeout(()=>a(null),i)})}function ww(i,a){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await i(c);if(!a(c,null,d)){s(d);return}}catch(d){if(!a(c,d)){o(d);return}}})()})}function Sw(i){return("0"+i.toString(16)).substr(-2)}function Cw(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(a),Array.from(a,Sw).join("")}async function jw(i){const r=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function Aw(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await jw(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xn(i,a,r=!1){const s=Cw();let o=s;r&&(o+="/PASSWORD_RECOVERY"),await jn(i,`${a}-code-verifier`,o);const c=await Aw(s);return[c,s===c?"plain":"s256"]}const Ew=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nw(i){const a=i.headers.get(Mu);if(!a||!a.match(Ew))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Rw(i){if(!i)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(i<=a)throw new Error("JWT has expired")}function Tw(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _n(i){if(!kw.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vu(){const i={};return new Proxy(i,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ow(i,a){return new Proxy(i,{get:(r,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const c=s.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,o)}return!a.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(r,s,o)}})}function $g(i){return JSON.parse(JSON.stringify(i))}const Er=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Dw=[502,503,504];async function Hg(i){var a;if(!xw(i))throw new zu(Er(i),0);if(Dw.includes(i.status))throw new zu(Er(i),i.status);let r;try{r=await i.json()}catch(c){throw new Rr(Er(c),c)}let s;const o=Nw(i);if(o&&o.getTime()>=dy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Bg(Er(r),i.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(s==="session_not_found")throw new Qt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new Bg(Er(r),i.status,r.weak_password.reasons);throw new ow(Er(r),i.status||500,s)}const Mw=(i,a,r,s)=>{const o={method:i,headers:a?.headers||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),r))};async function le(i,a,r,s){var o;const c=Object.assign({},s?.headers);c[Mu]||(c[Mu]=dy["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const d=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(d.redirect_to=s.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await zw(i,a,r+m,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(g):{data:Object.assign({},g),error:null}}async function zw(i,a,r,s,o,c){const d=Mw(a,s,o,c);let m;try{m=await i(r,Object.assign({},d))}catch(g){throw console.error(g),new zu(Er(g),0)}if(m.ok||await Hg(m),s?.noResolveJson)return m;try{return await m.json()}catch(g){await Hg(g)}}function Kt(i){var a;let r=null;Lw(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=yw(i.expires_in)));const s=(a=i.user)!==null&&a!==void 0?a:i;return{data:{session:r,user:s},error:null}}function Vg(i){const a=Kt(i);return!a.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(a.data.weak_password=i.weak_password),a}function tr(i){var a;return{data:{user:(a=i.user)!==null&&a!==void 0?a:i},error:null}}function Uw(i){return{data:i,error:null}}function Bw(i){const{action_link:a,email_otp:r,hashed_token:s,redirect_to:o,verification_type:c}=i,d=Dn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:r,hashed_token:s,redirect_to:o,verification_type:c},g=Object.assign({},d);return{data:{properties:m,user:g},error:null}}function Gg(i){return i}function Lw(i){return i.access_token&&i.refresh_token&&i.expires_in}const bu=["global","local","others"];class qw{constructor({url:a="",headers:r={},fetch:s}){this.url=a,this.headers=r,this.fetch=my(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,r=bu[0]){if(bu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bu.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(a,r={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:tr})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async generateLink(a){try{const{options:r}=a,s=Dn(a,["options"]),o=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Bw,redirectTo:r?.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:tr})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,s,o,c,d,m,g;try{const p={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=a?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Gg});if(v.error)throw v.error;const b=await v.json(),_=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,x=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(C=>{const A=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(C.split(";")[1].split("=")[1]);p[`${j}Page`]=A}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(re(p))return{data:{users:[]},error:p};throw p}}async getUserById(a){_n(a);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:tr})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){_n(a);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:tr})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async deleteUser(a,r=!1){_n(a);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:tr})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async _listFactors(a){_n(a.userId);try{const{data:r,error:s}=await le(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:s}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(a){_n(a.userId),_n(a.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _listOAuthClients(a){var r,s,o,c,d,m,g;try{const p={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=a?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Gg});if(v.error)throw v.error;const b=await v.json(),_=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,x=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(C=>{const A=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(C.split(";")[1].split("=")[1]);p[`${j}Page`]=A}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(re(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(a){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _getOAuthClient(a){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(a,r){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(a){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(a){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}}function Fg(i={}){return{getItem:a=>i[a]||null,setItem:(a,r)=>{i[a]=r},removeItem:a=>{delete i[a]}}}const wn={debug:!!(globalThis&&fy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gy extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Pw extends gy{}async function $w(i,a,r){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,a);const s=new globalThis.AbortController;return a>0&&setTimeout(()=>{s.abort(),wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await r()}finally{wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(a===0)throw wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Pw(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(wn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Hw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function py(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Vw(i){return parseInt(i,16)}function Gw(i){const a=new TextEncoder().encode(i);return"0x"+Array.from(a,s=>s.toString(16).padStart(2,"0")).join("")}function Fw(i){var a;const{chainId:r,domain:s,expirationTime:o,issuedAt:c=new Date,nonce:d,notBefore:m,requestId:g,resources:p,scheme:v,uri:b,version:_}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((a=i.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const x=py(i.address),C=v?`${v}://${s}`:s,A=i.statement?`${i.statement}
`:"",j=`${C} wants you to sign in with your Ethereum account:
${x}

${A}`;let N=`URI: ${b}
Version: ${_}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(o&&(N+=`
Expiration Time: ${o.toISOString()}`),m&&(N+=`
Not Before: ${m.toISOString()}`),g&&(N+=`
Request ID: ${g}`),p){let T=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);T+=`
- ${O}`}N+=T}return`${j}
${N}`}class et extends Error{constructor({message:a,code:r,cause:s,name:o}){var c;super(a,{cause:s}),this.__isWebAuthnError=!0,this.name=(c=o??(s instanceof Error?s.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class kl extends et{constructor(a,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:a}),this.name="WebAuthnUnknownError",this.originalError=r}}function Yw({error:i,options:a}){var r,s,o;const{publicKey:c}=a;if(!c)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(a.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(a.mediation==="conditional"&&((s=c.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new et({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return c.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const d=window.location.hostname;if(yy(d)){if(c.rp.id!==d)return new et({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Iw({error:i,options:a}){const{publicKey:r}=a;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(a.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new et({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const s=window.location.hostname;if(yy(s)){if(r.rpId!==s)return new et({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Qw{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Kw=new Qw;function Ww(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:a,user:r,excludeCredentials:s}=i,o=Dn(i,["challenge","user","excludeCredentials"]),c=En(a).buffer,d=Object.assign(Object.assign({},r),{id:En(r.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:c,user:d});if(s&&s.length>0){m.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];m.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:En(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function Xw(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:a,allowCredentials:r}=i,s=Dn(i,["challenge","allowCredentials"]),o=En(a).buffer,c=Object.assign(Object.assign({},s),{challenge:o});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const m=r[d];c.allowCredentials[d]=Object.assign(Object.assign({},m),{id:En(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return c}function Jw(i){var a;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:Tr(new Uint8Array(i.response.attestationObject)),clientDataJSON:Tr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Zw(i){var a;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,s=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Tr(new Uint8Array(o.authenticatorData)),clientDataJSON:Tr(new Uint8Array(o.clientDataJSON)),signature:Tr(new Uint8Array(o.signature)),userHandle:o.userHandle?Tr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function yy(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Yg(){var i,a;return!!(dt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function eS(i){try{const a=await navigator.credentials.create(i);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new kl("Browser returned unexpected credential type",a)}:{data:null,error:new kl("Empty credential response",a)}}catch(a){return{data:null,error:Yw({error:a,options:i})}}}async function tS(i){try{const a=await navigator.credentials.get(i);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new kl("Browser returned unexpected credential type",a)}:{data:null,error:new kl("Empty credential response",a)}}catch(a){return{data:null,error:Iw({error:a,options:i})}}}const aS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},rS={userVerification:"preferred",hints:["security-key"]};function Ol(...i){const a=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of i)if(o)for(const c in o){const d=o[c];if(d!==void 0)if(Array.isArray(d))s[c]=d;else if(r(d))s[c]=d;else if(a(d)){const m=s[c];a(m)?s[c]=Ol(m,d):s[c]=Ol(d)}else s[c]=d}return s}function nS(i,a){return Ol(aS,i,a||{})}function sS(i,a){return Ol(rS,i,a||{})}class iS{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:r,friendlyName:s,signal:o},c){try{const{data:d,error:m}=await this.client.mfa.challenge({factorId:a,webauthn:r});if(!d)return{data:null,error:m};const g=o??Kw.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=nS(d.webauthn.credential_options.publicKey,c?.create),{data:v,error:b}=await eS({publicKey:p,signal:g});return v?{data:{factorId:a,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const p=sS(d.webauthn.credential_options.publicKey,c?.request),{data:v,error:b}=await tS(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:g}));return v?{data:{factorId:a,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new Rr("Unexpected error in challenge",d)}}}async _verify({challengeId:a,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:a,webauthn:s})}async _authenticate({factorId:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}},c){if(!r)return{data:null,error:new $s("rpId is required for WebAuthn authentication")};try{if(!Yg())return{data:null,error:new Rr("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this.challenge({factorId:a,webauthn:{rpId:r,rpOrigins:s},signal:o},{request:c});if(!d)return{data:null,error:m};const{webauthn:g}=d;return this._verify({factorId:a,challengeId:d.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:s,credential_response:g.credential_response}})}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new Rr("Unexpected error in authenticate",d)}}}async _register({friendlyName:a,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o},c){if(!r)return{data:null,error:new $s("rpId is required for WebAuthn registration")};try{if(!Yg())return{data:null,error:new Rr("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this._enroll({friendlyName:a});if(!d)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===a&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:m};const{data:g,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:o},{create:c});return g?this._verify({factorId:d.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new Rr("Unexpected error in register",d)}}}}Hw();const lS={url:rw,storageKey:nw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ig(i,a,r){return await r()}const Sn={};class Hs{get jwks(){var a,r;return(r=(a=Sn[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){Sn[this.storageKey]=Object.assign(Object.assign({},Sn[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=Sn[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Sn[this.storageKey]=Object.assign(Object.assign({},Sn[this.storageKey]),{cachedAt:a})}constructor(a){var r,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},lS),a);if(this.storageKey=c.storageKey,this.instanceID=(r=Hs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&dt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new qw({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=my(c.fetch),this.lock=c.lock||Ig,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:dt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=$w:this.lock=Ig,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:fy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${uy}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let r={},s="none";if(dt()&&(r=bw(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),dt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),dw(c)){const g=(a=c.details)===null||a===void 0?void 0:a.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return re(r)?this._returnResult({error:r}):this._returnResult({error:new Rr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,s,o;try{const c=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=a?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Kt}),{data:d,error:m}=c;if(m||!d)return this._returnResult({data:{user:null,session:null},error:m});const g=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(c){if(re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(a){var r,s,o;try{let c;if("email"in a){const{email:v,password:b,options:_}=a;let x=null,C=null;this.flowType==="pkce"&&([x,C]=await xn(this.storage,this.storageKey)),c=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:b,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:x,code_challenge_method:C},xform:Kt})}else if("phone"in a){const{phone:v,password:b,options:_}=a;c=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(s=_?.data)!==null&&s!==void 0?s:{},channel:(o=_?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Kt})}else throw new yl("You must provide either an email or phone number and a password");const{data:d,error:m}=c;if(m||!d)return this._returnResult({data:{user:null,session:null},error:m});const g=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(c){if(re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(a){try{let r;if("email"in a){const{email:c,password:d,options:m}=a;r=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Vg})}else if("phone"in a){const{phone:c,password:d,options:m}=a;r=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Vg})}else throw new yl("You must provide either an email or phone number and a password");const{data:s,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const c=new bn;return this._returnResult({data:{user:null,session:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(a){var r,s,o,c;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=a.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=a.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=a.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;switch(r){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(a){var r,s,o,c,d,m,g,p,v,b,_;let x,C;if("message"in a)x=a.message,C=a.signature;else{const{chain:A,wallet:j,statement:N,options:T}=a;let O;if(dt())if(typeof j=="object")O=j;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")O=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=j}const H=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href),F=await O.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=py(F[0]);let te=(s=T?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!te){const P=await O.request({method:"eth_chainId"});te=Vw(P)}const Y={domain:H.host,address:V,statement:N,uri:H.href,version:"1",chainId:te,nonce:(o=T?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(c=T?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(m=T?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=T?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=T?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=T?.signInWithEthereum)===null||v===void 0?void 0:v.resources};x=Fw(Y),C=await O.request({method:"personal_sign",params:[Gw(x),V]})}try{const{data:A,error:j}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:C},!((b=a.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=a.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Kt});if(j)throw j;if(!A||!A.session||!A.user){const N=new bn;return this._returnResult({data:{user:null,session:null},error:N})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:j})}catch(A){if(re(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(a){var r,s,o,c,d,m,g,p,v,b,_,x;let C,A;if("message"in a)C=a.message,A=a.signature;else{const{chain:j,wallet:N,statement:T,options:O}=a;let H;if(dt())if(typeof N=="object")H=N;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))H=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=N}const F=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in H&&H.signIn){const V=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),T?{statement:T}:null));let te;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")te=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)te=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)C=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),A=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${F.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(o=(s=O?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=O?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((g=O?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((b=(v=O?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...O.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const V=await H.signMessage(new TextEncoder().encode(C),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=V}}try{const{data:j,error:N}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Tr(A)},!((_=a.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=a.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Kt});if(N)throw N;if(!j||!j.session||!j.user){const T=new bn;return this._returnResult({data:{user:null,session:null},error:T})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:N})}catch(j){if(re(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(a){const r=await Ar(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(r??"").split("/");try{const{data:c,error:d}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:s},xform:Kt});if(await er(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const m=new bn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(re(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(a){try{const{options:r,provider:s,token:o,access_token:c,nonce:d}=a,m=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Kt}),{data:g,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new bn;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(a){var r,s,o,c,d;try{if("email"in a){const{email:m,options:g}=a;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await xn(this.storage,this.storageKey));const{error:b}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(s=g?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in a){const{phone:m,options:g}=a,{data:p,error:v}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(d=g?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:v})}throw new yl("You must provide either an email or phone number.")}catch(m){if(re(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(a){var r,s;try{let o,c;"options"in a&&(o=(r=a.options)===null||r===void 0?void 0:r.redirectTo,c=(s=a.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:m}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Kt});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,p=d.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(a){var r,s,o;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await xn(this.storage,this.storageKey));const m=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(s=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=a?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:Uw});return this._returnResult(m)}catch(c){if(re(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:s}=a;if(s)throw s;if(!r)throw new Qt;const{error:o}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(a){if(re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:s,type:o,options:c}=a,{error:d}=await le(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in a){const{phone:s,type:o,options:c}=a,{data:d,error:m}=await le(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:m})}throw new yl("You must provide either an email or phone number and a type")}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await Ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const s=a.expires_at?a.expires_at*1e3-Date.now()<gu:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",a.expires_at),!s){if(this.userStorage){const d=await Ar(this.userStorage,this.storageKey+"-user");d?.user?a.user=d.user:a.user=vu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};a.user=Ow(a.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:o,error:c}=await this._callRefreshToken(a.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:tr}):await this._useSession(async r=>{var s,o,c;const{data:d,error:m}=r;if(m)throw m;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:tr})})}catch(r){if(re(r))return uw(r)&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Qt;const d=o.session;let m=null,g=null;this.flowType==="pkce"&&a.email!=null&&([m,g]=await xn(this.storage,this.storageKey));const{data:p,error:v}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:g}),jwt:d.access_token,xform:tr});if(v)throw v;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(s){if(re(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Qt;const r=Date.now()/1e3;let s=r,o=!0,c=null;const{payload:d}=yu(a.access_token);if(d.exp&&(s=d.exp,o=s<=r),o){const{data:m,error:g}=await this._callRefreshToken(a.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:g}=await this._getUser(a.access_token);if(g)throw g;c={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var s;if(!a){const{data:d,error:m}=r;if(m)throw m;a=(s=d.session)!==null&&s!==void 0?s:void 0}if(!a?.refresh_token)throw new Qt;const{data:o,error:c}=await this._callRefreshToken(a.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(a,r){try{if(!dt())throw new vl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new vl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Ug("No code detected.");const{data:T,error:O}=await this._exchangeCodeForSession(a.code);if(O)throw O;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:m,expires_at:g,token_type:p}=a;if(!c||!m||!d||!p)throw new vl("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(m);let _=v+b;g&&(_=parseInt(g));const x=_-v;x*1e3<=Cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${b}s`);const C=_-b;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,_,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,_,v);const{data:A,error:j}=await this._getUser(c);if(j)throw j;const N={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:b,expires_at:_,refresh_token:d,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:a.type},error:null})}catch(s){if(re(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await Ar(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return this._returnResult({error:c});const d=(s=o.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:m}=await this.admin.signOut(d,a);if(m&&!(cw(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return a!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const r=vw(),s={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(a){return await this._useSession(async r=>{var s,o;try{const{data:{session:c},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(a))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",a,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",c),console.error(c)}})}async resetPasswordForEmail(a,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await xn(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(re(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var a;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var r;try{const{data:s,error:o}=await this._useSession(async c=>{var d,m,g,p,v;const{data:b,error:_}=c;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(d=a.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=a.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return dt()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:a.provider,url:s?.url},error:null})}catch(s){if(re(s))return this._returnResult({data:{provider:a.provider,url:null},error:s});throw s}}async linkIdentityIdToken(a){return await this._useSession(async r=>{var s;try{const{error:o,data:{session:c}}=r;if(o)throw o;const{options:d,provider:m,token:g,access_token:p,nonce:v}=a,b=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=c?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:m,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Kt}),{data:_,error:x}=b;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new bn}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(a){try{return await this._useSession(async r=>{var s,o;const{data:c,error:d}=r;if(d)throw d;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await ww(async o=>(o>0&&await _w(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:Kt})),(o,c)=>{const d=200*Math.pow(2,o);return c&&pu(c)&&Date.now()+d-s<Cn})}catch(s){if(this._debug(r,"error",s),re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",s),dt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:a,url:s},error:null}}async _recoverAndRefresh(){var a,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Ar(this.storage,this.storageKey);if(o&&this.userStorage){let d=await Ar(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await jn(this.userStorage,this.storageKey+"-user",d)),o.user=(a=d?.user)!==null&&a!==void 0?a:vu()}else if(o&&!o.user&&!o.user){const d=await Ar(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await er(this.storage,this.storageKey+"-user"),await jn(this.storage,this.storageKey,o)):o.user=vu()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gu;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${gu}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),pu(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(o.access_token);!m&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(a){var r,s;if(!a)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ll;const{data:c,error:d}=await this._refreshAccessToken(a);if(d)throw d;if(!c.session)throw new Qt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={data:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(o,"error",c),re(c)){const d={data:null,error:c};return pu(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(a,r,s=!0){const o=`#_notifyAllSubscribers(${a})`;this._debug(o,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:a,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,r)}catch(g){c.push(g)}});if(await Promise.all(d),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const r=Object.assign({},a),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await jn(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=$g(o);await jn(this.storage,this.storageKey,c)}else{const o=$g(r);await jn(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await er(this.storage,this.storageKey),await er(this.storage,this.storageKey+"-code-verifier"),await er(this.storage,this.storageKey+"-user"),this.userStorage&&await er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&dt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Cn);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-a)/Cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Cn}ms, refresh threshold is ${Du} ticks`),o<=Du&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof gy)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,s){const o=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,d]=await xn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(m.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${a}?${o.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;return c?this._returnResult({data:null,error:c}):await le(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(a){try{return await this._useSession(async r=>{var s,o;const{data:c,error:d}=r;if(d)return this._returnResult({data:null,error:d});const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:g,error:p}=await le(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(a.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?Jw(a.webauthn.credential_response):Zw(a.webauthn.credential_response)})}:{code:a.code}),{data:m,error:g}=await le(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:d,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const d=await le(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(d.error)return d;const{data:m}=d;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Ww(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Xw(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(a){const{data:r,error:s}=await this._challenge({factorId:a.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){var a;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(a=r?.factors)!==null&&a!==void 0?a:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var a,r;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=yu(s.access_token);let d=null;c.aal&&(d=c.aal);let m=d;((r=(a=s.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const p=c.amr||[];return{data:{currentLevel:d,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(a,r){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Qt});const d=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&dt()&&!r?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(a,r){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Qt});const d=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&dt()&&!r?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(a,r={keys:[]}){let s=r.keys.find(m=>m.kid===a);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(m=>m.kid===a),s&&this.jwks_cached_at+lw>o)return s;const{data:c,error:d}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(m=>m.kid===a),!s)?null:s}async getClaims(a,r={}){try{let s=a;if(!s){const{data:x,error:C}=await this.getSession();if(C||!x.session)return this._returnResult({data:null,error:C});s=x.session.access_token}const{header:o,payload:c,signature:d,raw:{header:m,payload:g}}=yu(s);r?.allowExpired||Rw(c.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:c,header:o,signature:d},error:null}}const v=Tw(o.alg),b=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,d,pw(`${m}.${g}`)))throw new Uu("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}}Hs.nextInstanceID={};const oS=Hs;class cS extends oS{constructor(a){super(a)}}class uS{constructor(a,r,s){var o,c,d;this.supabaseUrl=a,this.supabaseKey=r;const m=aw(a);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:Q_,realtime:W_,auth:Object.assign(Object.assign({},K_),{storageKey:g}),global:I_},v=tw(s??{},p);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=v.auth)!==null&&d!==void 0?d:{},this.headers,v.global.fetch),this.fetch=Z_(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new r_(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new G_(this.storageUrl.href,this.headers,this.fetch,s?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Zx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,r,s)}channel(a,r={config:{}}){return this.realtime.channel(a,r)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,storageKey:d,flowType:m,lock:g,debug:p,throwOnError:v},b,_){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cS({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),b),storageKey:d,autoRefreshToken:a,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,flowType:m,lock:g,debug:p,throwOnError:v,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new x_(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(a,r,s){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dS=(i,a,r)=>new uS(i,a,r);function hS(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const a=i.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}hS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fS="https://xtdudfccgbdanmmncwhn.supabase.co",mS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",W=dS(fS,mS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),gS=Object.freeze(Object.defineProperty({__proto__:null,supabase:W},Symbol.toStringTag,{value:"Module"}));class pS{supabase;constructor(a){this.supabase=a}async getCharacters(a){try{const{data:r,error:s}=await this.supabase.from("characters").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:(r||[]).map(c=>({id:c.id,campaignId:c.campaign_id,name:c.name,playerName:c.player_name,characterName:c.character_name,ownerId:c.owner_id,createdAt:new Date(c.created_at),updatedAt:new Date(c.updated_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get characters"}}}async getCharacter(a){try{const{data:r,error:s}=await this.supabase.from("characters").select("*").eq("id",a).single();if(s)throw s;return{success:!0,data:{id:r.id,campaignId:r.campaign_id,name:r.name,playerName:r.player_name,characterName:r.character_name,ownerId:r.owner_id,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character"}}}async createCharacter(a,r){try{const{data:s,error:o}=await this.supabase.from("characters").insert({campaign_id:r.campaignId,name:r.name,player_name:r.playerName,character_name:r.characterName,owner_id:a}).select().single();if(o)throw o;return{success:!0,data:{id:s.id,campaignId:s.campaign_id,name:s.name,playerName:s.player_name,characterName:s.character_name,ownerId:s.owner_id,createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to create character"}}}async updateCharacter(a,r){try{const s={updated_at:new Date().toISOString()};r.name!==void 0&&(s.name=r.name),r.playerName!==void 0&&(s.player_name=r.playerName),r.characterName!==void 0&&(s.character_name=r.characterName);const{error:o}=await this.supabase.from("characters").update(s).eq("id",a);if(o)throw o;return{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update character"}}}async deleteCharacter(a){try{const{error:r}=await this.supabase.from("characters").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character"}}}async getCharacterFinance(a){try{const{data:r,error:s}=await this.supabase.from("character_finance").select("*").eq("character_id",a).order("transaction_date",{ascending:!1});if(s)throw s;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,description:c.description,amount:parseFloat(c.amount),transactionDate:new Date(c.transaction_date),createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character finances"}}}async addCharacterFinance(a,r,s){try{const{data:o,error:c}=await this.supabase.from("character_finance").insert({character_id:a,description:r,amount:s}).select().single();if(c)throw c;return{success:!0,data:{id:o.id,characterId:o.character_id,description:o.description,amount:parseFloat(o.amount),transactionDate:new Date(o.transaction_date),createdAt:new Date(o.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to add character finance"}}}async updateCharacterFinance(a,r,s){try{const o={};r!==void 0&&(o.description=r),s!==void 0&&(o.amount=s);const{error:c}=await this.supabase.from("character_finance").update(o).eq("id",a);if(c)throw c;return{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to update character finance"}}}async deleteCharacterFinance(a){try{const{error:r}=await this.supabase.from("character_finance").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character finance"}}}async getCharacterInventory(a){try{const{data:r,error:s}=await this.supabase.from("character_inventory").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,itemName:c.item_name,quantity:c.quantity,weight:c.weight?parseFloat(c.weight):void 0,value:c.value?parseFloat(c.value):void 0,description:c.description,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character inventory"}}}async addCharacterInventory(a,r){try{const{data:s,error:o}=await this.supabase.from("character_inventory").insert({character_id:a,item_name:r.itemName,quantity:r.quantity,weight:r.weight,value:r.value,description:r.description}).select().single();if(o)throw o;return{success:!0,data:{id:s.id,characterId:s.character_id,itemName:s.item_name,quantity:s.quantity,weight:s.weight?parseFloat(s.weight):void 0,value:s.value?parseFloat(s.value):void 0,description:s.description,createdAt:new Date(s.created_at)}}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to add character inventory"}}}async updateCharacterInventory(a,r){try{const s={};r.itemName!==void 0&&(s.item_name=r.itemName),r.quantity!==void 0&&(s.quantity=r.quantity),r.weight!==void 0&&(s.weight=r.weight),r.value!==void 0&&(s.value=r.value),r.description!==void 0&&(s.description=r.description);const{error:o}=await this.supabase.from("character_inventory").update(s).eq("id",a);if(o)throw o;return{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update character inventory"}}}async deleteCharacterInventory(a){try{const{error:r}=await this.supabase.from("character_inventory").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character inventory"}}}async getCharacterWeapons(a){try{const{data:r,error:s}=await this.supabase.from("character_weapons").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,name:c.name,damage:c.damage,range:c.range,weight:c.weight?parseFloat(c.weight):void 0,cost:c.cost?parseFloat(c.cost):void 0,notes:c.notes,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character weapons"}}}async addCharacterWeapon(a,r){try{const{data:s,error:o}=await this.supabase.from("character_weapons").insert({character_id:a,name:r.name,damage:r.damage,range:r.range,weight:r.weight,cost:r.cost,notes:r.notes}).select().single();if(o)throw o;return{success:!0,data:{id:s.id,characterId:s.character_id,name:s.name,damage:s.damage,range:s.range,weight:s.weight?parseFloat(s.weight):void 0,cost:s.cost?parseFloat(s.cost):void 0,notes:s.notes,createdAt:new Date(s.created_at)}}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to add character weapon"}}}async updateCharacterWeapon(a,r){try{const s={};r.name!==void 0&&(s.name=r.name),r.damage!==void 0&&(s.damage=r.damage),r.range!==void 0&&(s.range=r.range),r.weight!==void 0&&(s.weight=r.weight),r.cost!==void 0&&(s.cost=r.cost),r.notes!==void 0&&(s.notes=r.notes);const{error:o}=await this.supabase.from("character_weapons").update(s).eq("id",a);if(o)throw o;return{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update character weapon"}}}async deleteCharacterWeapon(a){try{const{error:r}=await this.supabase.from("character_weapons").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character weapon"}}}async getCharacterArmour(a){try{const{data:r,error:s}=await this.supabase.from("character_armour").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,name:c.name,protection:c.protection,weight:c.weight?parseFloat(c.weight):void 0,cost:c.cost?parseFloat(c.cost):void 0,notes:c.notes,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character armour"}}}async addCharacterArmour(a,r){try{const{data:s,error:o}=await this.supabase.from("character_armour").insert({character_id:a,name:r.name,protection:r.protection,weight:r.weight,cost:r.cost,notes:r.notes}).select().single();if(o)throw o;return{success:!0,data:{id:s.id,characterId:s.character_id,name:s.name,protection:s.protection,weight:s.weight?parseFloat(s.weight):void 0,cost:s.cost?parseFloat(s.cost):void 0,notes:s.notes,createdAt:new Date(s.created_at)}}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to add character armour"}}}async updateCharacterArmour(a,r){try{const s={};r.name!==void 0&&(s.name=r.name),r.protection!==void 0&&(s.protection=r.protection),r.weight!==void 0&&(s.weight=r.weight),r.cost!==void 0&&(s.cost=r.cost),r.notes!==void 0&&(s.notes=r.notes);const{error:o}=await this.supabase.from("character_armour").update(s).eq("id",a);if(o)throw o;return{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update character armour"}}}async deleteCharacterArmour(a){try{const{error:r}=await this.supabase.from("character_armour").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character armour"}}}async getCharacterAmmo(a){try{const{data:r,error:s}=await this.supabase.from("character_ammo").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,type:c.type,quantity:c.quantity,maxQuantity:c.max_quantity,weaponCompatibility:c.weapon_compatibility,notes:c.notes,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character ammo"}}}async addCharacterAmmo(a,r){try{const{data:s,error:o}=await this.supabase.from("character_ammo").insert({character_id:a,type:r.type,quantity:r.quantity,max_quantity:r.maxQuantity,weapon_compatibility:r.weaponCompatibility,notes:r.notes}).select().single();if(o)throw o;return{success:!0,data:{id:s.id,characterId:s.character_id,type:s.type,quantity:s.quantity,maxQuantity:s.max_quantity,weaponCompatibility:s.weapon_compatibility,notes:s.notes,createdAt:new Date(s.created_at)}}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to add character ammo"}}}async updateCharacterAmmo(a,r){try{const s={};r.type!==void 0&&(s.type=r.type),r.quantity!==void 0&&(s.quantity=r.quantity),r.maxQuantity!==void 0&&(s.max_quantity=r.maxQuantity),r.weaponCompatibility!==void 0&&(s.weapon_compatibility=r.weaponCompatibility),r.notes!==void 0&&(s.notes=r.notes);const{error:o}=await this.supabase.from("character_ammo").update(s).eq("id",a);if(o)throw o;return{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update character ammo"}}}async deleteCharacterAmmo(a){try{const{error:r}=await this.supabase.from("character_ammo").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character ammo"}}}}class yS{createUserFromProfileData(a,r){return{id:a.id,email:a.email||"",displayName:r?.display_name||a.user_metadata?.display_name||a.email?.split("@")[0],username:r?.username||a.user_metadata?.username||a.email?.split("@")[0],profileCompleted:r?.profile_completed||!!a.user_metadata?.profile_completed,createdAt:new Date(a.created_at)}}async mapAuthUserToUser(a){try{const{data:r}=await W.from("user_profiles").select("display_name, username, profile_completed").eq("id",a.id).single();return r&&typeof r=="object"?this.createUserFromProfileData(a,r):this.createUserFromProfileData(a)}catch{return this.createUserFromProfileData(a)}}async getCurrentUser(){try{const{data:{user:a},error:r}=await W.auth.getUser();return r||!a?null:await this.mapAuthUserToUser(a)}catch{return null}}async signIn(a,r){try{const{data:s,error:o}=await W.auth.signInWithPassword({email:a,password:r});return o?{success:!1,error:o.message}:{success:!0,data:{id:s.user.id,email:s.user.email||"",displayName:s.user.user_metadata?.display_name,createdAt:new Date(s.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(a,r){try{const s=window.location.origin,o=s.includes("github.io")?`${s}/`:`${s}/traveller-dashboard/`,{data:c,error:d}=await W.auth.signUp({email:a,password:r,options:{emailRedirectTo:o}});return d?{success:!1,error:d.message}:c.user?{success:!0,data:{id:c.user.id,email:c.user.email||"",displayName:c.user.user_metadata?.display_name,createdAt:new Date(c.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:a}=await W.auth.signOut();return a?{success:!1,error:a.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(a){const{data:{subscription:r}}=W.auth.onAuthStateChange(async(s,o)=>{if(o?.user){const c=await this.mapAuthUserToUser(o.user);a(c)}else a(null)});return()=>r.unsubscribe()}async completeProfile(a,r,s){try{const{error:o}=await W.from("user_profiles").update({display_name:r,username:s,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",a);if(o)return o.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:o.message};const{data:c,error:d}=await W.auth.updateUser({data:{display_name:r,username:s,profile_completed:!0}});return d?{success:!1,error:d.message}:{success:!0,data:{id:c.user.id,email:c.user.email||"",displayName:r,username:s,profileCompleted:!0,createdAt:new Date(c.user.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to complete profile"}}}buildProfileUpdates(a,r){const s={updated_at:new Date().toISOString()};return a!==void 0&&(s.display_name=a),r!==void 0&&(s.username=r),s}buildAuthUpdates(a,r){const s={};return a!==void 0&&(s.display_name=a),r!==void 0&&(s.username=r),s}async updateProfile(a,r,s){try{const o=this.buildProfileUpdates(r,s),{error:c}=await W.from("user_profiles").update(o).eq("id",a);if(c)return c.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:c.message};const d=this.buildAuthUpdates(r,s),{data:m,error:g}=await W.auth.updateUser({data:d});if(g)return{success:!1,error:g.message};const{data:p}=await W.from("user_profiles").select("*").eq("id",a).single(),v=p;return{success:!0,data:{id:m.user.id,email:m.user.email||"",displayName:v?.display_name||m.user.user_metadata?.display_name,username:v?.username||m.user.user_metadata?.username,profileCompleted:v?.profile_completed||m.user.user_metadata?.profile_completed||!1,createdAt:new Date(m.user.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to update profile"}}}async changePassword(a,r,s){try{const{data:o}=await W.auth.getUser();if(!o.user?.email)return{success:!1,error:"User not found"};const{error:c}=await W.auth.signInWithPassword({email:o.user.email,password:r});if(c)return{success:!1,error:"Current password is incorrect"};const{error:d}=await W.auth.updateUser({password:s});return d?{success:!1,error:d.message}:{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to change password"}}}async deleteAccount(a){try{const{error:r}=await W.from("user_profiles").delete().eq("id",a);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class vy{async getCampaigns(a){try{const{data:r,error:s}=await W.from("campaigns").select(`
          *,
          campaign_members!inner(
            is_admin,
            is_gm,
            is_player,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",a).order("created_at",{ascending:!1});return s?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(c=>{const d=c.campaign_members[0];return{id:c.id,name:c.name,description:c.description||void 0,createdBy:c.created_by,createdAt:new Date(c.created_at||Date.now()),updatedAt:new Date(c.updated_at||Date.now()),userRoles:d?{isAdmin:d.is_admin||!1,isGm:d.is_gm||!1,isPlayer:d.is_player||!1}:{isAdmin:!1,isGm:!1,isPlayer:!1},memberCount:c.member_count?.[0]?.count||0,isOwner:c.created_by===a}})}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(a){try{const{data:r,error:s}=await W.from("campaigns").select("*").eq("id",a).single();return s?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at||Date.now()),updatedAt:new Date(r.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(a,r,s=!1){try{const{data:o,error:c}=await W.from("campaigns").insert({name:r.name,description:r.description,created_by:a}).select().single();if(c)return{success:!1,error:`Failed to create campaign: ${c.message}`};const{error:d}=await W.from("campaign_members").insert({campaign_id:o.id,user_id:a,role:"admin"});if(d)return await W.from("campaigns").delete().eq("id",o.id),{success:!1,error:`Failed to set up campaign admin: ${d.message}`};if(s){const{error:g}=await W.from("campaign_members").insert({campaign_id:o.id,user_id:a,role:"gm"})}return{success:!0,data:{id:o.id,name:o.name,description:o.description||void 0,createdBy:o.created_by,createdAt:new Date(o.created_at||Date.now()),updatedAt:new Date(o.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(a,r){try{const{error:s}=await W.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",a);return s?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(a){try{const{error:r}=await W.from("campaigns").delete().eq("id",a);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(a){try{const{data:r,error:s}=await W.from("campaign_members").select("id, user_id, is_admin, is_gm, is_player, created_at").eq("campaign_id",a).order("created_at",{ascending:!0});if(s)return{success:!1,error:"Failed to fetch campaign members"};const o=[];for(const c of r){const d=c;try{const{data:m,error:g}=await W.from("user_profiles").select("*").eq("id",d.user_id).single();let p,v,b;if(!g&&m){const _=m;p=_.email||"",v=_.display_name||void 0,b=_.username||void 0}else p=`user_${d.user_id.slice(0,8)}@example.com`,v=void 0,b=void 0;o.push({id:d.id,userId:d.user_id,email:p,displayName:v,username:b,roles:{isAdmin:d.is_admin||!1,isGm:d.is_gm||!1,isPlayer:d.is_player||!1},joinedAt:new Date(d.created_at)})}catch{o.push({id:d.id,userId:d.user_id,email:`user_${d.user_id.slice(0,8)}@example.com`,displayName:void 0,username:void 0,roles:{isAdmin:d.is_admin||!1,isGm:d.is_gm||!1,isPlayer:d.is_player||!1},joinedAt:new Date(d.created_at)})}}return{success:!0,data:o}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(a,r,s){try{const{data:o,error:c}=await W.from("user_profiles").select("id").eq("email",r).single();if(c||!o){if(!(await W.auth.getUser()).data.user)return{success:!1,error:"You must be logged in to send invitations"};try{const{data:p,error:v}=await W.functions.invoke("invite-user",{body:{email:r,campaignId:a,role:s,campaignName:void 0}});return v?{success:!1,error:`Failed to send invitation: ${v.message||JSON.stringify(v)}`}:p?.error?{success:!1,error:`${p.error}${p.details?`: ${p.details}`:""}`}:{success:!0}}catch(p){return{success:!1,error:`Failed to send invitation: ${p instanceof Error?p.message:"Unknown error"}`}}}const{data:d}=await W.from("campaign_members").select("id").eq("campaign_id",a).eq("user_id",o.id).single();if(d)return{success:!1,error:"User is already a member of this campaign"};const{error:m}=await W.from("campaign_members").insert({campaign_id:a,user_id:o.id,role:s});return m?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(a,r,s){try{const{error:o}=await W.from("campaign_members").update({is_admin:s.isAdmin,is_gm:s.isGm,is_player:s.isPlayer}).eq("campaign_id",a).eq("user_id",r);return o?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(a,r){try{const{error:s}=await W.from("campaign_members").delete().eq("campaign_id",a).eq("user_id",r);return s?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createPendingInvitation(a,r,s,o){try{const{data:c}=await W.from("pending_invitations").select("id").eq("email",r).eq("campaign_id",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(c)return{success:!1,error:"An invitation has already been sent to this email address for this campaign"};const{data:d}=await W.from("campaigns").select("name").eq("id",a).single(),{data:m}=await W.from("user_profiles").select("display_name, email").eq("id",o).single(),{data:g,error:p}=await W.from("pending_invitations").insert({email:r,campaign_id:a,invited_by:o,role:s}).select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at
        `).single();return p?{success:!1,error:"Failed to create invitation"}:(await W.rpc("send_campaign_invitation",{p_email:r,p_campaign_id:a,p_campaign_name:d?.name||"Unknown Campaign",p_inviter_name:m?.display_name||m?.email||"Unknown User",p_role:s}),{success:!0,data:{id:g.id,email:g.email,campaignId:g.campaign_id,campaignName:d?.name,invitedBy:g.invited_by,inviterName:m?.display_name||m?.email,role:g.role,createdAt:new Date(g.created_at||""),expiresAt:new Date(g.expires_at||""),acceptedAt:g.accepted_at?new Date(g.accepted_at):void 0}})}catch{return{success:!1,error:"An unexpected error occurred"}}}async getPendingInvitations(a){try{const{data:r,error:s}=await W.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("campaign_id",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return s?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(c=>({id:c.id,email:c.email,campaignId:c.campaign_id,campaignName:c.campaigns?.name,invitedBy:c.invited_by,inviterName:void 0,role:c.role,createdAt:new Date(c.created_at||""),expiresAt:new Date(c.expires_at||""),acceptedAt:c.accepted_at?new Date(c.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserPendingInvitations(a){try{const{data:r,error:s}=await W.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("email",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return s?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(c=>({id:c.id,email:c.email,campaignId:c.campaign_id,campaignName:c.campaigns?.name,invitedBy:c.invited_by,inviterName:void 0,role:c.role,createdAt:new Date(c.created_at||""),expiresAt:new Date(c.expires_at||""),acceptedAt:c.accepted_at?new Date(c.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptPendingInvitation(a,r){try{const{data:s,error:o}=await W.from("pending_invitations").select("*").eq("id",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(o||!s)return{success:!1,error:"Invitation not found or expired"};const{data:c}=await W.from("campaign_members").select("id").eq("campaign_id",s.campaign_id).eq("user_id",r).single();if(c)return await W.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",a),{success:!1,error:"You are already a member of this campaign"};const{error:d}=await W.from("campaign_members").insert({campaign_id:s.campaign_id,user_id:r,is_admin:s.role==="admin",is_gm:s.role==="gm",is_player:s.role==="player"});if(d)return{success:!1,error:"Failed to add you to the campaign"};const{error:m}=await W.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",a);return{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declinePendingInvitation(a){try{const{error:r}=await W.from("pending_invitations").delete().eq("id",a);return r?{success:!1,error:"Failed to decline invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async cancelPendingInvitation(a){try{const{error:r}=await W.from("pending_invitations").delete().eq("id",a);return r?{success:!1,error:"Failed to cancel invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(a,r){try{const s=await this.getUserRoles(a,r);if(!s.success||!s.data)return{success:!1,error:s.error||"User is not a member of this campaign"};const o=s.data;let c;return o.isAdmin?c="admin":o.isGm?c="gm":c="player",{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRoles(a,r){try{const{data:s,error:o}=await W.from("campaign_members").select("is_admin, is_gm, is_player").eq("campaign_id",a).eq("user_id",r).single();if(o||!s)return{success:!1,error:"User is not a member of this campaign"};const c=s;return{success:!0,data:{isAdmin:c.is_admin||!1,isGm:c.is_gm||!1,isPlayer:c.is_player||!1}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(a,r){try{const{data:s,error:o}=await W.from("campaign_members").select("id").eq("campaign_id",a).eq("user_id",r).single();return o?{success:!0,data:!1}:{success:!0,data:!!s}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(a){try{const{data:r,error:s}=await W.from("characters").select("*").eq("campaign_id",a).order("created_at",{ascending:!0});return s?{success:!1,error:s.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(a,r,s,o,c){try{const{data:d,error:m}=await W.from("characters").insert({campaign_id:a,name:s,player_name:o,character_name:c,owner_id:r}).select().single();return m?{success:!1,error:m.message}:{success:!0,data:d}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createStandaloneCharacter(a,r,s,o){try{const{data:c,error:d}=await W.rpc("create_standalone_character",{user_id:a,char_name:r,player_name:s||void 0,character_name:o||void 0});return d?{success:!1,error:d.message}:{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getStandaloneCharacters(a){try{const{data:r,error:s}=await W.from("characters").select("*").eq("owner_id",a).is("campaign_id",null).order("created_at",{ascending:!1});return s?{success:!1,error:s.message}:{success:!0,data:(r||[]).map(c=>({id:c.id,name:c.name,player_name:c.player_name||void 0,character_name:c.character_name||void 0,owner_id:c.owner_id||"",created_at:c.created_at||"",updated_at:c.updated_at||""}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteStandaloneCharacter(a,r){try{const{data:s,error:o}=await W.from("characters").select("owner_id, campaign_id").eq("id",a).single();if(o||!s)return{success:!1,error:"Character not found"};if(s.campaign_id!==null)return{success:!1,error:"This is not a standalone character"};if(s.owner_id!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:c}=await W.from("characters").delete().eq("id",a);return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async assignCharacterToCampaign(a,r,s){try{const{data:o,error:c}=await W.from("characters").select("owner_id, campaign_id").eq("id",a).single();if(c||!o)return{success:!1,error:"Character not found"};if(o.owner_id!==s)return{success:!1,error:"You don't have permission to move this character"};if(o.campaign_id!==null)return{success:!1,error:"Character is already assigned to a campaign"};const{data:d,error:m}=await W.from("campaign_members").select("id").eq("campaign_id",r).eq("user_id",s).single();if(m||!d)return{success:!1,error:"You are not a member of this campaign"};const{error:g}=await W.from("characters").update({campaign_id:r}).eq("id",a);return g?{success:!1,error:g.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaignInvitation(a,r,s,o){try{const{data:c,error:d}=await W.rpc("create_campaign_invitation",{p_campaign_id:a,p_invited_email:r,p_invited_by:s,p_roles_offered:JSON.stringify(o)});return d?{success:!1,error:d.message}:{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserInvitations(a){try{const{data:r,error:s}=await W.rpc("get_user_invitations",{p_user_email:a});return s?{success:!1,error:s.message}:{success:!0,data:Array.isArray(r)?r.map(c=>({id:c.id,campaignId:c.campaign_id,campaignName:c.campaign_name,invitedEmail:c.invited_email,invitedBy:c.invited_by,invitedByName:c.inviter_name,rolesOffered:typeof c.roles_offered=="string"?JSON.parse(c.roles_offered):c.roles_offered,status:c.status,expiresAt:c.expires_at?new Date(c.expires_at):null,createdAt:new Date(c.created_at),acceptedAt:c.accepted_at?new Date(c.accepted_at):null})):[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptCampaignInvitation(a,r){try{const{data:s,error:o}=await W.rpc("accept_campaign_invitation",{p_invitation_id:a,p_user_id:r});return o?{success:!1,error:o.message}:{success:!0,data:s}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declineCampaignInvitation(a){try{const{data:r,error:s}=await W.rpc("decline_campaign_invitation",{p_invitation_id:a});return s?{success:!1,error:s.message}:{success:!0,data:r}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(a,r){try{const{data:s,error:o}=await W.from("characters").select("owner_id, campaign_id, campaigns!inner(created_by)").eq("id",a).single();if(o)return{success:!1,error:"Character not found"};if(s.owner_id!==r&&s.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:c}=await W.from("characters").delete().eq("id",a);return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class vS{supabase;constructor(a){this.supabase=a}async getCampaignFinances(a){const{data:r,error:s}=await this.supabase.from("campaign_finances").select("*").eq("campaign_id",a).order("transaction_date",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({id:o.id,Date:o.transaction_date,Description:o.description,Category:o.category,Subcategory:o.subcategory,"Amount (Cr)":parseFloat(o.amount),"Paid By":o.paid_by,"Paid From (Fund)":o.paid_from_fund,"Running Total":o.running_total?parseFloat(o.running_total):void 0,Notes:o.notes}))}async addCampaignFinance(a,r){const{data:s,error:o}=await this.supabase.from("campaign_finances").insert({campaign_id:a,transaction_date:r.Date,description:r.Description,category:r.Category,subcategory:r.Subcategory,amount:r["Amount (Cr)"],paid_by:r["Paid By"],paid_from_fund:r["Paid From (Fund)"],notes:r.Notes}).select().single();if(o)throw o;return{id:s.id,Date:s.transaction_date,Description:s.description,Category:s.category,Subcategory:s.subcategory,"Amount (Cr)":parseFloat(s.amount),"Paid By":s.paid_by,"Paid From (Fund)":s.paid_from_fund,"Running Total":s.running_total?parseFloat(s.running_total):void 0,Notes:s.notes}}async updateCampaignFinance(a,r){const s={};r.Date&&(s.transaction_date=r.Date),r.Description&&(s.description=r.Description),r.Category&&(s.category=r.Category),r.Subcategory!==void 0&&(s.subcategory=r.Subcategory),r["Amount (Cr)"]!==void 0&&(s.amount=r["Amount (Cr)"]),r["Paid By"]!==void 0&&(s.paid_by=r["Paid By"]),r["Paid From (Fund)"]!==void 0&&(s.paid_from_fund=r["Paid From (Fund)"]),r.Notes!==void 0&&(s.notes=r.Notes);const{error:o}=await this.supabase.from("campaign_finances").update(s).eq("id",a);if(o)throw o}async deleteCampaignFinance(a){const{error:r}=await this.supabase.from("campaign_finances").delete().eq("id",a);if(r)throw r}async getShipFinances(a){const{data:r,error:s}=await this.supabase.from("ship_finances").select("*").eq("campaign_id",a).order("transaction_date",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({id:o.id,Date:o.transaction_date,Description:o.description,Category:o.category,Subcategory:o.subcategory,"Amount (Cr)":parseFloat(o.amount),"Paid By":o.paid_by,"Paid From (Fund)":o.paid_from_fund,"Running Total":o.running_total?parseFloat(o.running_total):void 0,Notes:o.notes}))}async addShipFinance(a,r){const{data:s,error:o}=await this.supabase.from("ship_finances").insert({campaign_id:a,transaction_date:r.Date,description:r.Description,category:r.Category,subcategory:r.Subcategory,amount:r["Amount (Cr)"],paid_by:r["Paid By"],paid_from_fund:r["Paid From (Fund)"],notes:r.Notes}).select().single();if(o)throw o;return{id:s.id,Date:s.transaction_date,Description:s.description,Category:s.category,Subcategory:s.subcategory,"Amount (Cr)":parseFloat(s.amount),"Paid By":s.paid_by,"Paid From (Fund)":s.paid_from_fund,"Running Total":s.running_total?parseFloat(s.running_total):void 0,Notes:s.notes}}async updateShipFinance(a,r){const s={};r.Date&&(s.transaction_date=r.Date),r.Description&&(s.description=r.Description),r.Category&&(s.category=r.Category),r.Subcategory!==void 0&&(s.subcategory=r.Subcategory),r["Amount (Cr)"]!==void 0&&(s.amount=r["Amount (Cr)"]),r["Paid By"]!==void 0&&(s.paid_by=r["Paid By"]),r["Paid From (Fund)"]!==void 0&&(s.paid_from_fund=r["Paid From (Fund)"]),r.Notes!==void 0&&(s.notes=r.Notes);const{error:o}=await this.supabase.from("ship_finances").update(s).eq("id",a);if(o)throw o}async deleteShipFinance(a){const{error:r}=await this.supabase.from("ship_finances").delete().eq("id",a);if(r)throw r}async getShipCargo(a){const{data:r,error:s}=await this.supabase.from("ship_cargo").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({"Leg/Route":o.leg_route,Item:o.item,Tons:parseFloat(o.tons),"Purchase World":o.purchase_world,"Purchase Price (Cr/ton)":parseFloat(o.purchase_price_per_ton),"Sale World":o.sale_world,"Sale Price (Cr/ton)":o.sale_price_per_ton?parseFloat(o.sale_price_per_ton):null,"Broker (DM)":o.broker_dm,"Fees/Taxes (Cr)":o.fees_taxes?parseFloat(o.fees_taxes):void 0,"Profit (Cr)":o.profit?parseFloat(o.profit):null}))}async addShipCargo(a,r){const{data:s,error:o}=await this.supabase.from("ship_cargo").insert({campaign_id:a,leg_route:r["Leg/Route"],item:r.Item,tons:r.Tons,purchase_world:r["Purchase World"],purchase_price_per_ton:r["Purchase Price (Cr/ton)"],sale_world:r["Sale World"],sale_price_per_ton:r["Sale Price (Cr/ton)"],broker_dm:r["Broker (DM)"],fees_taxes:r["Fees/Taxes (Cr)"],profit:r["Profit (Cr)"]}).select().single();if(o)throw o;return{"Leg/Route":s.leg_route,Item:s.item,Tons:parseFloat(s.tons),"Purchase World":s.purchase_world,"Purchase Price (Cr/ton)":parseFloat(s.purchase_price_per_ton),"Sale World":s.sale_world,"Sale Price (Cr/ton)":s.sale_price_per_ton?parseFloat(s.sale_price_per_ton):null,"Broker (DM)":s.broker_dm,"Fees/Taxes (Cr)":s.fees_taxes?parseFloat(s.fees_taxes):void 0,"Profit (Cr)":s.profit?parseFloat(s.profit):null}}async updateShipCargo(a,r){const s={};r["Leg/Route"]&&(s.leg_route=r["Leg/Route"]),r.Item&&(s.item=r.Item),r.Tons!==void 0&&(s.tons=r.Tons),r["Purchase World"]&&(s.purchase_world=r["Purchase World"]),r["Purchase Price (Cr/ton)"]!==void 0&&(s.purchase_price_per_ton=r["Purchase Price (Cr/ton)"]),r["Sale World"]!==void 0&&(s.sale_world=r["Sale World"]),r["Sale Price (Cr/ton)"]!==void 0&&(s.sale_price_per_ton=r["Sale Price (Cr/ton)"]),r["Broker (DM)"]!==void 0&&(s.broker_dm=r["Broker (DM)"]),r["Fees/Taxes (Cr)"]!==void 0&&(s.fees_taxes=r["Fees/Taxes (Cr)"]),r["Profit (Cr)"]!==void 0&&(s.profit=r["Profit (Cr)"]);const{error:o}=await this.supabase.from("ship_cargo").update(s).eq("id",a);if(o)throw o}async deleteShipCargo(a){const{error:r}=await this.supabase.from("ship_cargo").delete().eq("id",a);if(r)throw r}async getShipMaintenance(a){const{data:r,error:s}=await this.supabase.from("ship_maintenance").select("*").eq("campaign_id",a).order("maintenance_date",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({Date:o.maintenance_date,Type:o.type,Description:o.description,"Cost (Cr)":o.cost?parseFloat(o.cost):void 0,Location:o.location,Notes:o.notes}))}async addShipMaintenance(a,r){const{data:s,error:o}=await this.supabase.from("ship_maintenance").insert({campaign_id:a,maintenance_date:r.Date,type:r.Type,description:r.Description,cost:r["Cost (Cr)"],location:r.Location,notes:r.Notes}).select().single();if(o)throw o;return{Date:s.maintenance_date,Type:s.type,Description:s.description,"Cost (Cr)":s.cost?parseFloat(s.cost):void 0,Location:s.location,Notes:s.notes}}async updateShipMaintenance(a,r){const s={};r.Date&&(s.maintenance_date=r.Date),r.Type&&(s.type=r.Type),r.Description&&(s.description=r.Description),r["Cost (Cr)"]!==void 0&&(s.cost=r["Cost (Cr)"]),r.Location!==void 0&&(s.location=r.Location),r.Notes!==void 0&&(s.notes=r.Notes);const{error:o}=await this.supabase.from("ship_maintenance").update(s).eq("id",a);if(o)throw o}async deleteShipMaintenance(a){const{error:r}=await this.supabase.from("ship_maintenance").delete().eq("id",a);if(r)throw r}async getCampaignLoans(a){const{data:r,error:s}=await this.supabase.from("campaign_loans").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({"Loan Type":o.loan_type,Principal:parseFloat(o.principal),"Interest Rate":o.interest_rate?parseFloat(o.interest_rate):void 0,"Monthly Payment":o.monthly_payment?parseFloat(o.monthly_payment):void 0,"Remaining Balance":o.remaining_balance?parseFloat(o.remaining_balance):void 0,Notes:o.notes}))}async addCampaignLoan(a,r){const{data:s,error:o}=await this.supabase.from("campaign_loans").insert({campaign_id:a,loan_type:r["Loan Type"],principal:r.Principal,interest_rate:r["Interest Rate"],monthly_payment:r["Monthly Payment"],remaining_balance:r["Remaining Balance"],notes:r.Notes}).select().single();if(o)throw o;return{"Loan Type":s.loan_type,Principal:parseFloat(s.principal),"Interest Rate":s.interest_rate?parseFloat(s.interest_rate):void 0,"Monthly Payment":s.monthly_payment?parseFloat(s.monthly_payment):void 0,"Remaining Balance":s.remaining_balance?parseFloat(s.remaining_balance):void 0,Notes:s.notes}}async updateCampaignLoan(a,r){const s={};r["Loan Type"]&&(s.loan_type=r["Loan Type"]),r.Principal!==void 0&&(s.principal=r.Principal),r["Interest Rate"]!==void 0&&(s.interest_rate=r["Interest Rate"]),r["Monthly Payment"]!==void 0&&(s.monthly_payment=r["Monthly Payment"]),r["Remaining Balance"]!==void 0&&(s.remaining_balance=r["Remaining Balance"]),r.Notes!==void 0&&(s.notes=r.Notes);const{error:o}=await this.supabase.from("campaign_loans").update(s).eq("id",a);if(o)throw o}async deleteCampaignLoan(a){const{error:r}=await this.supabase.from("campaign_loans").delete().eq("id",a);if(r)throw r}async getPartyInventory(a){const{data:r,error:s}=await this.supabase.from("party_inventory").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({Item:o.item,Qty:o.quantity,"Unit Mass (kg)":o.unit_mass_kg?parseFloat(o.unit_mass_kg):void 0,"Total Mass (kg)":o.total_mass_kg?parseFloat(o.total_mass_kg):void 0,"Unit Value (Cr)":o.unit_value?parseFloat(o.unit_value):void 0,"Total Value (Cr)":o.total_value?parseFloat(o.total_value):void 0,"Location/Container":o.location_container,Notes:o.notes}))}async addPartyInventoryItem(a,r){const{data:s,error:o}=await this.supabase.from("party_inventory").insert({campaign_id:a,item:r.Item,quantity:r.Qty,unit_mass_kg:r["Unit Mass (kg)"],total_mass_kg:r["Total Mass (kg)"],unit_value:r["Unit Value (Cr)"],total_value:r["Total Value (Cr)"],location_container:r["Location/Container"],notes:r.Notes}).select().single();if(o)throw o;return{Item:s.item,Qty:s.quantity,"Unit Mass (kg)":s.unit_mass_kg?parseFloat(s.unit_mass_kg):void 0,"Total Mass (kg)":s.total_mass_kg?parseFloat(s.total_mass_kg):void 0,"Unit Value (Cr)":s.unit_value?parseFloat(s.unit_value):void 0,"Total Value (Cr)":s.total_value?parseFloat(s.total_value):void 0,"Location/Container":s.location_container,Notes:s.notes}}async updatePartyInventoryItem(a,r){const s={};r.Item&&(s.item=r.Item),r.Qty!==void 0&&(s.quantity=r.Qty),r["Unit Mass (kg)"]!==void 0&&(s.unit_mass_kg=r["Unit Mass (kg)"]),r["Total Mass (kg)"]!==void 0&&(s.total_mass_kg=r["Total Mass (kg)"]),r["Unit Value (Cr)"]!==void 0&&(s.unit_value=r["Unit Value (Cr)"]),r["Total Value (Cr)"]!==void 0&&(s.total_value=r["Total Value (Cr)"]),r["Location/Container"]!==void 0&&(s.location_container=r["Location/Container"]),r.Notes!==void 0&&(s.notes=r.Notes);const{error:o}=await this.supabase.from("party_inventory").update(s).eq("id",a);if(o)throw o}async deletePartyInventoryItem(a){const{error:r}=await this.supabase.from("party_inventory").delete().eq("id",a);if(r)throw r}async getCampaignAmmo(a){const{data:r,error:s}=await this.supabase.from("campaign_ammo").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(s)throw s;return(r||[]).map(o=>({Weapon:o.weapon,"Ammo Type":o.ammo_type,"Magazine Size":o.magazine_size,"Rounds Loaded":o.rounds_loaded,"Spare Magazines":o.spare_magazines,"Loose Rounds":o.loose_rounds,"Total Rounds":o.total_rounds,Cost:o.cost?parseFloat(o.cost):void 0,Notes:o.notes}))}async addCampaignAmmo(a,r){const{data:s,error:o}=await this.supabase.from("campaign_ammo").insert({campaign_id:a,weapon:r.Weapon,ammo_type:r["Ammo Type"],magazine_size:r["Magazine Size"]?.toString(),rounds_loaded:r["Rounds Loaded"]?.toString(),spare_magazines:r["Spare Magazines"]?.toString(),loose_rounds:r["Loose Rounds"]?.toString(),total_rounds:r["Total Rounds"],cost:r.Cost,notes:r.Notes}).select().single();if(o)throw o;return{Weapon:s.weapon,"Ammo Type":s.ammo_type,"Magazine Size":s.magazine_size,"Rounds Loaded":s.rounds_loaded,"Spare Magazines":s.spare_magazines,"Loose Rounds":s.loose_rounds,"Total Rounds":s.total_rounds,Cost:s.cost?parseFloat(s.cost):void 0,Notes:s.notes}}async updateCampaignAmmo(a,r){const s={};r.Weapon&&(s.weapon=r.Weapon),r["Ammo Type"]!==void 0&&(s.ammo_type=r["Ammo Type"]),r["Magazine Size"]!==void 0&&(s.magazine_size=r["Magazine Size"]?.toString()),r["Rounds Loaded"]!==void 0&&(s.rounds_loaded=r["Rounds Loaded"]?.toString()),r["Spare Magazines"]!==void 0&&(s.spare_magazines=r["Spare Magazines"]?.toString()),r["Loose Rounds"]!==void 0&&(s.loose_rounds=r["Loose Rounds"]?.toString()),r["Total Rounds"]!==void 0&&(s.total_rounds=r["Total Rounds"]),r.Cost!==void 0&&(s.cost=r.Cost),r.Notes!==void 0&&(s.notes=r.Notes);const{error:o}=await this.supabase.from("campaign_ammo").update(s).eq("id",a);if(o)throw o}async deleteCampaignAmmo(a){const{error:r}=await this.supabase.from("campaign_ammo").delete().eq("id",a);if(r)throw r}async getAllCampaignData(a){const[r,s,o,c,d,m,g]=await Promise.all([this.getCampaignFinances(a),this.getShipFinances(a),this.getShipCargo(a),this.getShipMaintenance(a),this.getCampaignLoans(a),this.getPartyInventory(a),this.getCampaignAmmo(a)]);return{finances:r,shipFinances:s,cargo:o,maintenance:c,loans:d,partyInventory:m,ammo:g}}}class sa{static instance;_authRepository;_campaignRepository;_campaignDataRepository;_characterRepository;_authService;_campaignService;constructor(){this._authRepository=new yS,this._campaignRepository=new vy,this._campaignDataRepository=new vS(W),this._characterRepository=new pS(W),this._authService=new Yx(this._authRepository),this._campaignService=new Ix(this._campaignRepository,this._authRepository)}static getInstance(){return sa.instance||(sa.instance=new sa),sa.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}get campaignDataRepository(){return this._campaignDataRepository}get characterRepository(){return this._characterRepository}}function bS(){return sa.getInstance().authService}function by(){return sa.getInstance().campaignService}function td(){return sa.getInstance().campaignRepository}function xS(){return sa.getInstance().campaignDataRepository}function _S(){return sa.getInstance().characterRepository}const Ea=()=>{const[i,a]=S.useState(null),[r,s]=S.useState(!0),o=bS();return S.useEffect(()=>((async()=>{const C=await o.getCurrentUser();console.log("useAuth: getCurrentUser result:",C),a(C),s(!1)})(),o.onAuthStateChange(C=>{console.log("useAuth: onAuthStateChange triggered with user:",C),a(C),s(!1)})),[o]),{user:i,loading:r,signIn:async(_,x)=>{const C=await o.signIn(_,x);return C.success&&C.data?(a(C.data),{success:!0}):{success:!1,error:C.error}},signUp:async(_,x)=>{const C=await o.signUp(_,x);return C.success&&C.data?(a(C.data),{success:!0}):{success:!1,error:C.error}},signOut:async()=>{const _=await o.signOut();return _.success?(a(null),{success:!0}):{success:!1,error:_.error}},completeProfile:async _=>{const x=await o.completeProfile(_);return x.success&&x.data?(a(x.data),{success:!0,user:x.data}):{success:!1,error:x.error}},updateProfile:async _=>{const x=await o.updateProfile(_);return x.success&&x.data?(a(x.data),{success:!0,user:x.data}):{success:!1,error:x.error}},changePassword:async _=>{const x=await o.changePassword(_);return x.success?{success:!0}:{success:!1,error:x.error}},deleteAccount:async()=>{const _=await o.deleteAccount();return _.success?(a(null),{success:!0}):{success:!1,error:_.error}}}},wS=()=>{S.useEffect(()=>{const i=async(r,s)=>{if(r==="SIGNED_IN"&&s?.user){const o=s.user,c=new URLSearchParams(window.location.search),d=c.get("invited_to_campaign"),m=c.get("role"),g=d||o.user_metadata?.campaign_id,p=m||o.user_metadata?.role;if(g&&p)try{const{error:v}=await W.from("campaign_members").insert({campaign_id:g,user_id:o.id,is_admin:p==="admin",is_gm:p==="gm",is_player:p==="player"});if(!v){const b=window.location.pathname;window.history.replaceState({},"",b)}}catch{}}},{data:{subscription:a}}=W.auth.onAuthStateChange(i);return()=>{a.unsubscribe()}},[])};function ue({variant:i="default",size:a="md",className:r="",children:s,...o}){const d={default:"",primary:"bg-blue-600 hover:bg-blue-700 hover:shadow-lg hover:-translate-y-0.5 text-white border-blue-600 transition-all duration-200",danger:"bg-red-600 hover:bg-red-700 hover:shadow-lg hover:-translate-y-0.5 text-white border-red-600 transition-all duration-200",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-sm transition-all duration-200"},m={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},g=["btn",d[i],m[a],r].filter(Boolean).join(" ");return f.jsx("button",{className:g,...o,children:s})}function SS({icon:i,variant:a="default",className:r="",...s}){const o={default:"btn p-2 hover:scale-110 transition-all duration-200",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:scale-110 transition-all duration-200"};return f.jsx("button",{className:`${o[a]} ${r}`,...s,children:i})}const Z=S.forwardRef(({label:i,type:a="text",className:r,required:s=!1,error:o,...c},d)=>{const m="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",g=`input w-full ${o?"border-red-500 focus:border-red-500":""}`,p=()=>{if(a==="textarea"){const b=c;return f.jsx("textarea",{ref:d,className:r||g,required:s,...b})}if(a==="select"){const{children:b,..._}=c;return f.jsx("select",{ref:d,className:r||"select",required:s,..._,children:b})}const v=c;return f.jsx("input",{ref:d,type:a,step:a==="number"?"1":void 0,className:r||g,required:s,...v})};return f.jsxs("div",{children:[i&&f.jsxs("label",{className:m,children:[i," ",s&&"*"]}),p(),o&&f.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o})]})});Z.displayName="FormField";function CS(){const[i,a]=S.useState("sign_in"),[r,s]=S.useState(""),[o,c]=S.useState(""),[d,m]=S.useState(!1),[g,p]=S.useState(""),{signIn:v,signUp:b}=Ea(),_=async C=>{C.preventDefault(),m(!0),p("");try{let A;i==="sign_up"?(A=await b(r,o),A.success?p("Check your email for the confirmation link!"):p(A.error||"Sign up failed")):(A=await v(r,o),A.success||p(A.error||"Sign in failed"))}catch(A){p(A instanceof Error?A.message:"An error occurred")}finally{m(!1)}},x=()=>d?"Loading...":i==="sign_in"?"Sign In":"Sign Up";return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),f.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:i==="sign_in"?"Welcome Back":"Create Account"}),f.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:i==="sign_in"?"Sign in to your account":"Create a new account"})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[f.jsx("button",{type:"button",onClick:()=>a("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${i==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),f.jsx("button",{type:"button",onClick:()=>a("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${i==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),f.jsxs("form",{className:"space-y-4",onSubmit:_,children:[f.jsx(Z,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:r,onChange:C=>s(C.target.value),placeholder:"Enter your email"}),f.jsx(Z,{label:"Password",type:"password",autoComplete:i==="sign_up"?"new-password":"current-password",required:!0,value:o,onChange:C=>c(C.target.value),placeholder:"Enter your password"}),g&&f.jsx("div",{className:`p-3 rounded-xl text-sm ${g.includes("error")||g.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:g}),f.jsx(ue,{type:"submit",disabled:d,variant:"primary",className:"w-full justify-center py-3",children:x()})]})]})]})})]})}const jS=i=>{const a=[];let r="weak";i.length<8&&a.push("Password must be at least 8 characters long");const s=/[a-z]/.test(i),o=/[A-Z]/.test(i),c=/\d/.test(i),d=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(i);s||a.push("Password must contain at least one lowercase letter"),o||a.push("Password must contain at least one uppercase letter"),c||a.push("Password must contain at least one number"),d||a.push("Password must contain at least one special character");const m=[s,o,c,d].filter(Boolean).length;let g=0;i.length>=12?g=2:i.length>=8&&(g=1);const p=m+g;return p>=5?r="strong":p>=3&&(r="medium"),{isValid:a.length===0,errors:a,strength:r}},AS=i=>{switch(i){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},ES=i=>{switch(i){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},NS=i=>i.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:i.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(i)?/^[_-]|[_-]$/.test(i)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function RS({onComplete:i,loading:a=!1}){const[r,s]=S.useState(""),[o,c]=S.useState(""),[d,m]=S.useState({}),[g,p]=S.useState(!1),v=()=>{const x={};if(r.trim()?r.trim().length<2?x.displayName="Name must be at least 2 characters long":r.trim().length>50&&(x.displayName="Name must be less than 50 characters long"):x.displayName="Name is required",!o.trim())x.username="Username is required";else{const C=NS(o.trim());C.isValid||(x.username=C.error||"Invalid username")}return m(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!v()){p(!0);try{const C=await i({displayName:r.trim(),username:o.trim().toLowerCase()});!C.success&&C.error&&(C.error.toLowerCase().includes("username")?m({username:C.error}):m({general:C.error}))}catch{m({general:"An unexpected error occurred. Please try again."})}finally{p(!1)}}},_=r.trim()&&o.trim()&&Object.keys(d).length===0;return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Complete Your Profile"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up your profile to start using Traveller Dashboard"})]})}),f.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:f.jsx(kr,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:"Welcome to Traveller Dashboard"}),f.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Let's set up your profile to get started"})]}),f.jsx("div",{className:"card",children:f.jsxs("form",{className:"space-y-4",onSubmit:b,children:[f.jsxs("div",{children:[f.jsx(Z,{label:"Your Name",type:"text",required:!0,value:r,onChange:x=>{s(x.target.value),d.displayName&&m(C=>({...C,displayName:""}))},placeholder:"Enter your first name or full name",error:d.displayName}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This is how other players will see you in campaigns"})]}),f.jsxs("div",{children:[f.jsx(Z,{label:"Username",type:"text",required:!0,value:o,onChange:x=>{c(x.target.value),d.username&&m(C=>({...C,username:""}))},placeholder:"Choose a unique username",error:d.username}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),d.general&&f.jsx("div",{className:"p-3 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",children:d.general}),f.jsx(ue,{type:"submit",disabled:!_||g||a,variant:"primary",className:"w-full justify-center py-3",children:g||a?"Setting up...":"Complete Profile"})]})}),f.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:f.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const TS=()=>{const[i,a]=S.useState([]),[r,s]=S.useState(!0),[o,c]=S.useState(null),d=by(),m=S.useCallback(async()=>{try{s(!0),c(null);const b=await d.getCampaigns();b.success&&b.data?a(b.data):c(b.error||"Failed to fetch campaigns")}catch{c("An unexpected error occurred")}finally{s(!1)}},[d]),g=async b=>{try{c(null);const _=await d.createCampaign(b);return _.success?(await m(),{success:!0}):(c(_.error||"Failed to create campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return c(_),{success:!1,error:_}}},p=async(b,_)=>{try{c(null);const x=await d.updateCampaign(b,_);return x.success?(await m(),{success:!0}):(c(x.error||"Failed to update campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return c(x),{success:!1,error:x}}},v=async b=>{try{c(null);const _=await d.deleteCampaign(b);return _.success?(await m(),{success:!0}):(c(_.error||"Failed to delete campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return c(_),{success:!1,error:_}}};return S.useEffect(()=>{m()},[m]),{campaigns:i,loading:r,error:o,fetchCampaigns:m,createCampaign:g,updateCampaign:p,deleteCampaign:v}};function ql(){const[i,a]=S.useState([]),[r,s]=S.useState(!1),[o,c]=S.useState(null),d=S.useCallback(async(_,...x)=>{s(!0),c(null);try{const C=await _(...x);if(C.success&&C.data!==void 0)return a(C.data),{success:!0,data:C.data};const A=C.error||"Operation failed";return c(A),{success:!1,error:A}}catch(C){const A=C instanceof Error?C.message:"An unexpected error occurred";return c(A),{success:!1,error:A}}finally{s(!1)}},[]),m=S.useCallback(_=>{a(x=>[...x,_])},[]),g=S.useCallback((_,x)=>{a(C=>C.map((A,j)=>j===_?x:A))},[]),p=S.useCallback(_=>{a(x=>x.filter((C,A)=>A!==_))},[]),v=S.useCallback(()=>{a([]),c(null),s(!1)},[]),b=S.useCallback(()=>{c(null)},[]);return{items:i,loading:r,error:o,execute:d,addItem:m,updateItem:g,removeItem:p,reset:v,clearError:b,setItems:a}}const kS=()=>{const{items:i,loading:a,error:r,execute:s}=ql(),o=S.useMemo(()=>by(),[]),c=S.useCallback(async p=>await s(async b=>{const _=await o.getCampaignMembers(b);return _.success&&_.data?{success:!0,data:_.data}:{success:!1,error:_.error||"Failed to fetch members"}},p),[o,s]),d=S.useCallback(async(p,v,b)=>{try{const _=await o.addMemberByEmail(p,v,b);return _.success?(await c(p),{success:!0}):{success:!1,error:_.error||"Failed to add member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]),m=S.useCallback(async(p,v,b)=>{try{const _=await o.updateMemberRole(p,v,b);return _.success?(await c(p),{success:!0}):{success:!1,error:_.error||"Failed to update member role"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]),g=S.useCallback(async(p,v)=>{try{const b=await o.removeMember(p,v);return b.success?(await c(p),{success:!0}):{success:!1,error:b.error||"Failed to remove member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]);return{members:i,loading:a,error:r,fetchMembers:c,addMemberByEmail:d,updateMemberRole:m,removeMember:g}};function OS({size:i="md",className:a=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return f.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[i]} ${a}`,role:"status","aria-label":"Loading"})}function DS({message:i="Loading..."}){return f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[f.jsx(OS,{size:"lg",className:"mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:i})]})}function Qe({isOpen:i,onClose:a,title:r,children:s,maxWidth:o="md"}){if(S.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i]),S.useEffect(()=>{const d=m=>{m.key==="Escape"&&a()};if(i)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[i,a]),!i)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:d=>{d.target===d.currentTarget&&a()},children:f.jsxs("div",{className:`card w-full ${c[o]}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:r}),f.jsx(SS,{icon:f.jsx(np,{size:20}),onClick:a,"aria-label":"Close modal"})]}),s]})})}function rr({onCancel:i,onConfirm:a,confirmText:r="Confirm",cancelText:s="Cancel",confirmVariant:o="primary",confirmDisabled:c=!1,confirmType:d="button",isLoading:m=!1,children:g}){return g?f.jsx("div",{className:"flex gap-2 mt-6",children:g}):f.jsxs("div",{className:"flex gap-2 mt-6",children:[i&&f.jsx(ue,{onClick:i,variant:"ghost",className:"flex-1 justify-center",disabled:m,children:s}),(a||d==="submit")&&f.jsx(ue,{onClick:d==="submit"?void 0:a,variant:o,className:"flex-1 justify-center",disabled:m||c,type:d,children:r})]})}function Qg({roles:i,onChange:a,disabled:r=!1,showError:s=!0}){const o=(m,g)=>{const p={...i,[m]:g};a(p)},c=jp(i),d=i.isGm&&i.isPlayer&&!i.isAdmin;return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:i.isAdmin,onChange:m=>o("isAdmin",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Administrator"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can manage campaign settings and members)"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:i.isGm,onChange:m=>o("isGm",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game Master (GM)"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can run game sessions)"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:i.isPlayer,onChange:m=>o("isPlayer",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Player"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can create and play characters)"})]})]}),f.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current roles:"," ",f.jsx("span",{className:"font-medium text-gray-900 dark:text-zinc-50",children:Ul(i)})]})}),s&&!c&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:f.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[!i.isAdmin&&!i.isGm&&!i.isPlayer&&"Must select at least one role.",d&&"Cannot be both GM and Player without Administrator privileges. This prevents conflicts of interest."]})})]})}function MS({campaign:i,onUpdateCampaign:a,onDeleteCampaign:r,onGetMembers:s,onAddMember:o,onUpdateMemberRole:c,onRemoveMember:d,onClose:m}){const[g,p]=S.useState(!1),[v,b]=S.useState(!1),[_,x]=S.useState(!1),[C,A]=S.useState(!1),[j,N]=S.useState([]),[T,O]=S.useState(!1),[H,F]=S.useState(!1),[V,te]=S.useState(null),[Y,P]=S.useState(i.name),[K,ce]=S.useState(i.description||""),[oe,Q]=S.useState(!1),[I,de]=S.useState(!1),[B,G]=S.useState(""),[X,xe]=S.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),[we,Ue]=S.useState(null),Re=async me=>{if(me.preventDefault(),!!Y.trim())try{Q(!0),await a(i.id,{name:Y,description:K||null}),p(!1)}finally{Q(!1)}},ye=async()=>{try{de(!0),await r(i.id),b(!1),m?.()}finally{de(!1)}},Se=async()=>{try{const me=await s(i.id);me&&N(me)}catch{}},Ee=async()=>{if(j.length>0&&!_){x(!0);return}try{O(!0);const me=await s(i.id);me&&N(me),x(!0)}finally{O(!1)}},Ot=async me=>{if(me.preventDefault(),!!B.trim()){F(!0),Ue(null);try{const He=await o(i.id,B,X);He.success?(G(""),xe({isAdmin:!1,isGm:!1,isPlayer:!0}),A(!1),Se()):Ue(He.error||"Failed to add member")}catch(He){Ue(He instanceof Error?He.message:"Failed to add member")}finally{F(!1)}}},[Ke,Vt]=S.useState(null),[Gt,Na]=S.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),se=async me=>{if(!Ke)return;const He=Ke.user_id||Ke.userId;if(He){te(He);try{if((await c(i.id,He,me)).success){const Dr=await s(i.id);Dr&&N(Dr),Vt(null)}}finally{te(null)}}},Ne=me=>{Vt(me),Na(me.roles)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),f.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:i.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.description||"No description provided"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),f.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[i.member_count||0," member(s)"]})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs(ue,{onClick:()=>p(!0),className:"flex items-center gap-2 justify-center",children:[f.jsx(Cl,{className:"w-4 h-4"}),"Edit Campaign"]}),f.jsxs(ue,{onClick:Ee,disabled:T,className:"flex items-center gap-2 justify-center",children:[f.jsx(nr,{className:"w-4 h-4"}),T?"Loading...":"Manage Members"]})]})]}),f.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[f.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),f.jsxs(ue,{onClick:()=>b(!0),variant:"danger",className:"flex items-center gap-2",children:[f.jsx(Ls,{className:"w-4 h-4"}),"Delete Campaign"]})]}),f.jsx(Qe,{isOpen:g,onClose:()=>p(!1),title:"Edit Campaign",children:f.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),f.jsx("input",{type:"text",value:Y,onChange:me=>P(me.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:K,onChange:me=>ce(me.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsx(rr,{onCancel:()=>p(!1),cancelText:"Cancel",confirmText:oe?"Updating...":"Update",confirmDisabled:oe||!Y.trim(),confirmType:"submit",isLoading:oe})]})}),f.jsxs(Qe,{isOpen:v,onClose:()=>b(!1),title:"Delete Campaign",children:[f.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',i.name,'"? This action cannot be undone and will remove all campaign data and members.']}),f.jsx(rr,{onCancel:()=>b(!1),onConfirm:ye,cancelText:"Cancel",confirmText:I?"Deleting...":"Delete",confirmVariant:"danger",isLoading:I})]}),f.jsx(Qe,{isOpen:_,onClose:()=>x(!1),title:"Campaign Members",maxWidth:"lg",children:f.jsxs("div",{className:"space-y-4",children:[j.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):f.jsx("div",{className:"space-y-3",children:j.map(me=>f.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:me.user_profiles?.display_name||me.displayName||"No Name"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:me.user_profiles?.email||me.email})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"flex flex-wrap gap-1",children:f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:Ul(me.roles)})}),f.jsx(ue,{size:"sm",variant:"ghost",onClick:()=>Ne(me),disabled:V===me.user_id,children:f.jsx(Cl,{className:"w-3 h-3"})}),V===me.user_id&&f.jsx("span",{className:"text-xs text-gray-500",children:"Updating..."}),!me.roles.isAdmin&&f.jsx(ue,{size:"sm",variant:"danger",onClick:()=>{const He=me.user_id||me.userId;He&&d(i.id,He)},children:f.jsx(Ls,{className:"w-3 h-3"})})]})]},me.id))}),f.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:f.jsxs(ue,{variant:"primary",className:"w-full justify-center",onClick:()=>A(!0),children:[f.jsx(kr,{className:"w-4 h-4"}),"Add Member"]})})]})}),f.jsx(Qe,{isOpen:C,onClose:()=>{A(!1),G(""),xe({isAdmin:!1,isGm:!1,isPlayer:!0}),Ue(null)},title:"Add Campaign Member",children:f.jsxs("form",{onSubmit:Ot,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),f.jsx("input",{type:"email",value:B,onChange:me=>G(me.target.value),className:"input w-full",placeholder:"Enter member's email",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles"}),f.jsx(Qg,{roles:X,onChange:xe})]}),we&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:f.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:we})}),f.jsx(rr,{onCancel:()=>{A(!1),G(""),xe({isAdmin:!1,isGm:!1,isPlayer:!0}),Ue(null)},cancelText:"Cancel",confirmText:H?"Adding...":"Add Member",confirmDisabled:H||!B.trim(),confirmType:"submit",isLoading:H})]})}),Ke&&f.jsx(Qe,{isOpen:!!Ke,onClose:()=>Vt(null),title:`Edit Roles - ${Ke.user_profiles?.display_name||Ke.displayName||Ke.user_profiles?.email||Ke.email}`,children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Roles"}),f.jsx(Qg,{roles:Gt,onChange:Na,disabled:V===Ke.user_id})]}),f.jsx(rr,{onCancel:()=>Vt(null),cancelText:"Cancel",confirmText:V===Ke.user_id?"Updating...":"Update Roles",confirmDisabled:V===Ke.user_id,onConfirm:()=>se(Gt),isLoading:V===Ke.user_id})]})})]})}function Rn(i){const{items:a,loading:r,error:s,execute:o,setItems:c}=ql(),d=S.useMemo(()=>new vy,[]),m=S.useCallback(async v=>{if(!v)return;await o(async _=>{const x=await d.getCharactersByCampaign(_);return x.success&&x.data&&x.data.length>0?{success:!0,data:x.data.map(A=>({id:A.id,campaignId:A.campaign_id||"",displayName:A.name,playerName:A.player_name||"",characterName:A.character_name||"",ownerId:A.owner_id||void 0}))}:{success:!0,data:[]}},v)},[d,o]),g=S.useCallback(async(v,b,_)=>{if(!i)return{success:!1,error:"No campaign selected"};try{const x=`${v}  ${b}`,C=await d.createCharacterForCampaign(i,_,x,v,b);if(C.success&&C.data){const A={id:C.data.id,campaignId:C.data.campaign_id||"",displayName:C.data.name,playerName:v,characterName:b,ownerId:C.data.owner_id||void 0};return c(j=>[...j,A]),{success:!0,data:A}}return{success:!1,error:C.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[i,d,c]),p=S.useCallback(async(v,b)=>{try{const _=await d.deleteCharacter(v,b);return _.success?(c(x=>x.filter(C=>C.id!==v)),{success:!0}):{success:!1,error:_.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[d,c]);return S.useEffect(()=>{i?m(i):c([])},[i,m,c]),{characters:a,loading:r,error:s,createCharacter:g,deleteCharacter:p,refreshCharacters:()=>i&&m(i)}}function ad(i){const{items:a,loading:r,error:s,execute:o,setItems:c}=ql(),d=S.useMemo(()=>td(),[]),m=S.useCallback(async v=>{if(!v)return;await o(async _=>{const x=await d.getStandaloneCharacters(_);return x.success&&x.data?{success:!0,data:x.data.map(A=>({id:A.id,campaignId:null,displayName:A.name,playerName:A.player_name||"",characterName:A.character_name||"",ownerId:A.owner_id}))}:{success:!1,error:x.error||"Failed to load characters"}},v)},[d,o]),g=S.useCallback(async(v,b,_)=>{try{const x=`${v}  ${b}`,C=await d.createStandaloneCharacter(_,x,v,b);if(C.success&&C.data){const A={id:C.data.id,campaignId:null,displayName:C.data.name,playerName:C.data.player_name||v,characterName:C.data.character_name||b,ownerId:C.data.owner_id};return c(j=>[A,...j]),{success:!0,data:A}}return{success:!1,error:C.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[d,c]),p=S.useCallback(async(v,b)=>{try{const _=await d.deleteStandaloneCharacter(v,b);return _.success?(c(x=>x.filter(C=>C.id!==v)),{success:!0}):{success:!1,error:_.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[d,c]);return S.useEffect(()=>{i?m(i):c([])},[i,m,c]),{characters:a,loading:r,error:s,createCharacter:g,deleteCharacter:p,refreshCharacters:()=>i&&m(i)}}function xy({isOpen:i,onClose:a,campaigns:r,onAssignmentComplete:s}){const{user:o}=Ea(),{characters:c,loading:d,error:m,refreshCharacters:g}=ad(o?.id),[p,v]=S.useState([]),[b,_]=S.useState(null),x=S.useMemo(()=>r.filter(N=>N.userRoles.isAdmin||N.userRoles.isPlayer),[r]),C=async(N,T)=>{if(o){_(null),v(O=>[...O.filter(H=>H.characterId!==N),{characterId:N,campaignId:T,loading:!0}]);try{const H=await td().assignCharacterToCampaign(N,T,o.id);H.success?(await g(),v(F=>F.filter(V=>V.characterId!==N)),s?.()):(_(H.error||"Failed to assign character to campaign"),v(F=>F.filter(V=>V.characterId!==N)))}catch{_("An unexpected error occurred while assigning character"),v(O=>O.filter(H=>H.characterId!==N))}}},A=N=>p.some(T=>T.characterId===N&&T.loading),j=N=>p.find(T=>T.characterId===N)?.campaignId;return d?f.jsx(Qe,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"}),f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-2/3"})]})}):m?f.jsx(Qe,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-8",children:[f.jsxs("p",{children:["Error loading characters: ",m]}),f.jsx(ue,{onClick:g,variant:"primary",className:"mt-4",children:"Retry"})]})}):c.length===0?f.jsx(Qe,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[f.jsx(nr,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),f.jsx("p",{className:"text-lg font-medium mb-2",children:"No Standalone Characters"}),f.jsx("p",{className:"text-sm",children:"You don't have any standalone characters to assign to campaigns."}),f.jsx("p",{className:"text-sm mt-1",children:"Create some characters first, then come back to assign them!"})]})}):x.length===0?f.jsx(Qe,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:f.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[f.jsx(kr,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),f.jsx("p",{className:"text-lg font-medium mb-2",children:"No Available Campaigns"}),f.jsx("p",{className:"text-sm",children:"You're not a member of any campaigns where you can add characters."}),f.jsx("p",{className:"text-sm mt-1",children:"Join a campaign as a player or create your own to assign characters!"})]})}):f.jsx(Qe,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",maxWidth:"lg",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Assign your standalone characters to campaigns where you're a member. Once assigned, characters will appear in the campaign's character list."}),b&&f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:f.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:b})}),f.jsx("div",{className:"space-y-4",children:c.map(N=>f.jsx("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 mb-1",children:N.displayName}),f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:N.playerName&&N.characterName&&f.jsxs(f.Fragment,{children:["Player: ",N.playerName,"  Character:"," ",N.characterName]})})]}),f.jsx("div",{className:"flex-shrink-0 ml-4",children:A(N.id)?f.jsxs("div",{className:"flex items-center text-sm text-blue-600 dark:text-blue-400",children:[f.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"}),"Assigning..."]}):f.jsxs("select",{className:"text-sm border rounded px-3 py-2 bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-zinc-50",value:j(N.id)||"",onChange:T=>{T.target.value&&C(N.id,T.target.value)},children:[f.jsx("option",{value:"",children:"Select Campaign..."}),x.map(T=>f.jsxs("option",{value:T.id,children:[T.name," (",T.userRoles.isAdmin?"Admin":"Player",")"]},T.id))]})})]})},N.id))}),f.jsx("div",{className:"border-t pt-4",children:f.jsx(ue,{onClick:a,className:"w-full",children:"Done"})})]})})}function zS(i){return i.isAdmin?"admin":i.isGm?"gm":i.isPlayer?"player":"unknown"}function US(i){const a=[];return i.isAdmin&&a.push("ADMIN"),i.isGm&&a.push("GM"),i.isPlayer&&a.push("PLAYER"),a.join(" + ")}function BS(i){const a=zS(i);return a==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":a==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function LS({campaign:i,onViewCampaign:a,onDeleteCharacter:r}){const{characters:s,loading:o,error:c}=Rn(i.id);return o?f.jsxs("div",{className:"animate-pulse p-4",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),f.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):c?f.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",c]}):f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:i.name}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.length," character(s)"]})]}),i.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${BS(i.userRoles)}`,children:US(i.userRoles)})]}),s.length===0?f.jsxs("div",{className:"text-center py-6",children:[f.jsx(nr,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):f.jsx("div",{className:"space-y-3 mb-4",children:s.map(d=>f.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:d.displayName}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",d.playerName]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ue,{size:"sm",onClick:()=>a(i.id),title:"View character details in campaign",children:f.jsx(Cl,{className:"w-4 h-4"})}),f.jsx(ue,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>r(d.id,d.displayName,i.id),children:f.jsx(Ls,{className:"w-4 h-4"})})]})]},d.id))}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(ue,{onClick:()=>a(i.id),className:"flex items-center gap-2 flex-1",children:[f.jsx(nr,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function qS({campaigns:i,onShowAssignment:a}){const{user:r}=Ea(),{characters:s,loading:o,error:c,refreshCharacters:d}=ad(r?.id),m=i.filter(g=>g.userRoles.isAdmin||g.userRoles.isPlayer);return o?f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Your Standalone Characters"}),f.jsxs("div",{className:"animate-pulse space-y-3",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})]}):c?f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Your Standalone Characters"}),f.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm",children:["Error loading characters: ",c,f.jsx(ue,{onClick:d,variant:"ghost",size:"sm",className:"ml-2",children:"Retry"})]})]}):f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Your Standalone Characters"}),s.length>0&&m.length>0&&f.jsxs(ue,{onClick:a,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[f.jsx(sp,{className:"w-4 h-4"}),"Assign to Campaigns"]})]}),s.length===0?f.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[f.jsx(nr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),f.jsx("p",{className:"text-sm",children:"No standalone characters yet."}),f.jsx("p",{className:"text-xs mt-1",children:"Characters created outside of campaigns will appear here."})]}):f.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:s.map(g=>f.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50 dark:bg-zinc-800 dark:border-zinc-700",children:[f.jsx("div",{className:"font-medium text-gray-900 dark:text-zinc-50 text-sm mb-1",children:g.displayName}),f.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Player: ",g.playerName]}),f.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Character: ",g.characterName]}),f.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Available for assignment"})]},g.id))}),s.length>0&&m.length===0&&f.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mt-3",children:f.jsxs("p",{className:"text-amber-600 dark:text-amber-400 text-sm",children:["You have ",s.length," standalone character(s), but you're not a member of any campaigns where you can assign them."]})})]})}function PS({campaigns:i,onViewCampaign:a}){const{user:r}=Ea(),[s,o]=S.useState(!1),[c,d]=S.useState(""),[m,g]=S.useState(""),[p,v]=S.useState(""),[b,_]=S.useState(!1),[x,C]=S.useState(null),[A,j]=S.useState(!1),[N,T]=S.useState(null),[O,H]=S.useState(!1),[F,V]=S.useState(!1),{createCharacter:te}=Rn(c||""),{deleteCharacter:Y}=Rn(N?.campaignId||""),P=i.filter(Q=>Q.memberCount&&Q.memberCount>0),K=async Q=>{if(Q.preventDefault(),!(!m.trim()||!p.trim()||!c))try{_(!0),C(null);const I=await te(m.trim(),p.trim(),"");I.success?(g(""),v(""),d(""),o(!1)):C(I.error||"Failed to create character")}finally{_(!1)}},ce=(Q,I,de)=>{T({id:Q,name:I,campaignId:de}),j(!0)},oe=async()=>{if(!(!N||!r))try{H(!0);const Q=await Y(N.id,r.id);Q.success?(j(!1),T(null)):C(Q.error||"Failed to delete character")}finally{H(!1)}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:i.length}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:P.length}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:P.reduce((Q,I)=>Q+(I.memberCount||0),0)}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs(ue,{onClick:()=>o(!0),disabled:i.length===0,className:"flex items-center gap-2 justify-center",children:[f.jsx(kr,{className:"w-4 h-4"}),"Create New Character"]}),f.jsxs(ue,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[f.jsx(Cl,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),i.length===0&&f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),f.jsx(qS,{campaigns:i,onShowAssignment:()=>V(!0)}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),P.length===0?f.jsxs("div",{className:"card text-center py-8",children:[f.jsx(nr,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),f.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),f.jsxs(ue,{onClick:()=>o(!0),disabled:i.length===0,className:"flex items-center gap-2",children:[f.jsx(kr,{className:"w-4 h-4"}),"Create Character"]})]}):f.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:P.map(Q=>f.jsx(LS,{campaign:Q,onViewCampaign:a,onDeleteCharacter:ce},Q.id))})]}),f.jsx(Qe,{isOpen:s,onClose:()=>o(!1),title:"Create New Character",children:f.jsxs("form",{onSubmit:K,className:"space-y-4",children:[x&&f.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:x}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),f.jsxs("select",{value:c,onChange:Q=>d(Q.target.value),className:"input w-full",required:!0,children:[f.jsx("option",{value:"",children:"Select a campaign"}),i.map(Q=>f.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),f.jsx(Z,{label:"Player Name",value:m,onChange:Q=>g(Q.target.value),placeholder:"e.g., John Smith",required:!0}),f.jsx(Z,{label:"Character Name",value:p,onChange:Q=>v(Q.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),f.jsx(rr,{onCancel:()=>o(!1),cancelText:"Cancel",confirmText:b?"Creating...":"Create",confirmDisabled:b||!m.trim()||!p.trim()||!c,confirmType:"submit",isLoading:b})]})}),f.jsx(Qe,{isOpen:A,onClose:()=>j(!1),title:"Delete Character",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:f.jsx(Ls,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),f.jsxs("div",{className:"flex-grow",children:[f.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',N?.name,'"?']}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),f.jsx(rr,{onCancel:()=>j(!1),cancelText:"Cancel",confirmText:O?"Deleting...":"Delete",confirmDisabled:O,onConfirm:oe,confirmVariant:"danger",isLoading:O})]})}),f.jsx(xy,{isOpen:F,onClose:()=>V(!1),campaigns:i,onAssignmentComplete:()=>{window.location.reload()}})]})}function $S({characters:i,currentUserId:a,onDeleteCharacter:r}){return i.length===0?f.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[f.jsx(nr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),f.jsx("p",{children:"No standalone characters yet."}),f.jsx("p",{className:"text-sm mt-1",children:"Create your first character to get started!"})]}):f.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:i.map(s=>f.jsxs("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 truncate",children:s.displayName}),s.ownerId===a&&f.jsx(ue,{onClick:()=>r(s.id,s.displayName),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 p-1 h-auto",title:"Delete character",children:f.jsx(Ls,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Player:"})," ",s.playerName]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Character:"})," ",s.characterName]}),f.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Available for campaign invitations"})]})]},s.id))})}function HS({campaigns:i=[]}){const[a,r]=S.useState(!1),[s,o]=S.useState(""),[c,d]=S.useState(""),[m,g]=S.useState(!1),[p,v]=S.useState(null),[b,_]=S.useState(!1),[x,C]=S.useState(null),[A,j]=S.useState(!1),{user:N}=Ea(),{characters:T,loading:O,error:H,createCharacter:F,deleteCharacter:V,refreshCharacters:te}=ad(N?.id),Y=async Q=>{if(Q.preventDefault(),v(null),!N){v("You must be logged in to create a character");return}if(!s.trim()){v("Player name is required");return}if(!c.trim()){v("Character name is required");return}g(!0);try{const I=await F(s.trim(),c.trim(),N.id);I.success?(r(!1),o(""),d(""),v(null)):v(I.error||"Failed to create character")}catch{v("An unexpected error occurred")}finally{g(!1)}},P=(Q,I)=>{C({id:Q,name:I}),_(!0)},K=async()=>{if(x&&N)try{const Q=await V(x.id,N.id);Q.success?(_(!1),C(null)):v(Q.error||"Failed to delete character")}catch{v("An unexpected error occurred while deleting character")}},ce=()=>{r(!1),o(""),d(""),v(null)},oe=()=>{r(!0),o(""),d(""),v(null)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50",children:"Your Characters"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Create characters that can be used in any campaign when invited."})]}),f.jsxs("div",{className:"flex gap-3",children:[i.length>0&&f.jsxs(ue,{onClick:()=>j(!0),variant:"ghost",className:"flex items-center gap-2",children:[f.jsx(sp,{className:"w-4 h-4"}),"Assign to Campaigns"]}),f.jsxs(ue,{onClick:oe,className:"flex items-center gap-2",children:[f.jsx(kr,{className:"w-4 h-4"}),"Create Character"]})]})]}),f.jsxs("div",{className:"card",children:[O&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:f.jsx("p",{children:"Loading characters..."})}),!O&&H&&f.jsxs("div",{className:"text-center py-6 text-red-600 dark:text-red-400",children:[f.jsxs("p",{children:["Error: ",H]}),f.jsx(ue,{onClick:te,variant:"ghost",size:"sm",className:"mt-2",children:"Try Again"})]}),!O&&!H&&f.jsx($S,{characters:T,currentUserId:N?.id,onDeleteCharacter:P})]}),f.jsx(Qe,{isOpen:a,onClose:ce,title:"Create New Character",children:f.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[f.jsx(Z,{label:"Player Name",value:s,onChange:Q=>o(Q.target.value),placeholder:"e.g., John Smith",required:!0}),f.jsx(Z,{label:"Character Name",value:c,onChange:Q=>d(Q.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),p&&f.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm",children:p}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(ue,{type:"button",variant:"ghost",onClick:ce,disabled:m,children:"Cancel"}),f.jsx(ue,{type:"submit",disabled:m||!s.trim()||!c.trim(),children:m?"Creating...":"Create Character"})]})]})}),f.jsx(Qe,{isOpen:b,onClose:()=>_(!1),title:"Delete Character",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',x?.name,'"? This action cannot be undone.']}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(ue,{variant:"ghost",onClick:()=>_(!1),children:"Cancel"}),f.jsx(ue,{variant:"danger",onClick:K,children:"Delete Character"})]})]})}),f.jsx(xy,{isOpen:A,onClose:()=>j(!1),campaigns:i,onAssignmentComplete:()=>{te()}})]})}function VS({user:i,onSettings:a,onSignOut:r}){const[s,o]=S.useState(!1),c=S.useRef(null);S.useEffect(()=>{const m=g=>{c.current&&!c.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),S.useEffect(()=>{const m=g=>{g.key==="Escape"&&o(!1)};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[]);const d=i.displayName||i.username||i.email.split("@")[0];return f.jsxs("div",{className:"relative",ref:c,children:[f.jsxs("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 hover:shadow-sm rounded-lg transition-all duration-200","aria-expanded":s,"aria-haspopup":"true",children:[f.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:f.jsx(jl,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),f.jsx("span",{className:"hidden sm:block max-w-24 truncate",children:d}),f.jsx(Jv,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),s&&f.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-gray-200 dark:border-zinc-700 py-1 z-50",children:[f.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-700",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:f.jsx(jl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:d}),i.username&&f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",i.username]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:i.email})]})]})}),f.jsxs("div",{className:"py-1",children:[f.jsxs("button",{onClick:()=>{o(!1),a()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-300 transition-all duration-200",children:[f.jsx(ip,{className:"w-4 h-4 mr-3 transition-transform duration-200 hover:rotate-45"}),"Account Settings"]}),f.jsxs("button",{onClick:()=>{o(!1),r()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-200",children:[f.jsx(Zv,{className:"w-4 h-4 mr-3 transition-transform duration-200 hover:translate-x-1"}),"Sign Out"]})]})]})]})}function GS({isOpen:i,onClose:a,user:r,onUpdateProfile:s,onChangePassword:o,onDeleteAccount:c}){const[d,m]=S.useState("profile"),[g,p]=S.useState(!1),[v,b]=S.useState(null),[_,x]=S.useState(r.displayName||""),[C,A]=S.useState(r.username||""),[j,N]=S.useState(""),[T,O]=S.useState(""),[H,F]=S.useState(""),[V,te]=S.useState(!1),[Y,P]=S.useState(!1),[K,ce]=S.useState(!1),oe=jS(T),Q=async G=>{G.preventDefault(),p(!0),b(null);try{await s({displayName:_.trim()||void 0,username:C.trim()||void 0}),b({type:"success",text:"Profile updated successfully!"})}catch(X){b({type:"error",text:X instanceof Error?X.message:"Failed to update profile"})}finally{p(!1)}},I=async G=>{if(G.preventDefault(),p(!0),b(null),!oe.isValid){b({type:"error",text:"Please fix the password requirements"}),p(!1);return}if(T!==H){b({type:"error",text:"New passwords do not match"}),p(!1);return}try{await o({currentPassword:j,newPassword:T}),b({type:"success",text:"Password changed successfully!"}),N(""),O(""),F("")}catch(X){b({type:"error",text:X instanceof Error?X.message:"Failed to change password"})}finally{p(!1)}},de=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&c()},B=[{id:"profile",label:"Profile",icon:jl},{id:"password",label:"Password",icon:eb},{id:"danger",label:"Danger Zone",icon:sg}];return f.jsx(Qe,{isOpen:i,onClose:a,title:"Account Settings",maxWidth:"xl",children:f.jsxs("div",{className:"flex h-[32rem]",children:[f.jsx("div",{className:"w-56 border-r border-gray-200 dark:border-zinc-700 pr-6",children:f.jsx("nav",{className:"space-y-1",children:B.map(G=>{const X=G.icon;return f.jsxs("button",{onClick:()=>m(G.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${d===G.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:[f.jsx(X,{className:"w-4 h-4 mr-3"}),G.label]},G.id)})})}),f.jsxs("div",{className:"flex-1 pl-8",children:[v&&f.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${v.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:v.text}),d==="profile"&&f.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),f.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[f.jsx(tb,{className:"w-4 h-4 text-gray-400 mr-3"}),f.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),f.jsx(Z,{label:"Display Name",type:"text",value:_,onChange:G=>x(G.target.value),placeholder:"Enter your display name"}),f.jsx(Z,{label:"Username",type:"text",value:C,onChange:G=>A(G.target.value),placeholder:"Enter your username"}),f.jsx(ue,{type:"submit",disabled:g,className:"w-full",children:g?"Updating...":"Update Profile"})]}),d==="password"&&f.jsxs("form",{onSubmit:I,className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Z,{label:"Current Password",type:V?"text":"password",value:j,onChange:G=>N(G.target.value),placeholder:"Enter your current password",required:!0}),f.jsx("button",{type:"button",onClick:()=>te(!V),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:V?f.jsx(au,{className:"w-4 h-4"}):f.jsx(ru,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"relative",children:[f.jsx(Z,{label:"New Password",type:Y?"text":"password",value:T,onChange:G=>O(G.target.value),placeholder:"Enter your new password",required:!0}),f.jsx("button",{type:"button",onClick:()=>P(!Y),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:Y?f.jsx(au,{className:"w-4 h-4"}):f.jsx(ru,{className:"w-4 h-4"})})]}),T&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Password Strength:"}),f.jsx("span",{className:`text-sm font-medium ${AS(oe.strength)}`,children:ES(oe.strength)})]}),f.jsx("div",{className:"space-y-1 text-xs",children:oe.errors.map((G,X)=>f.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[f.jsx("span",{className:"mr-2",children:""}),G]},X))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(Z,{label:"Confirm New Password",type:K?"text":"password",value:H,onChange:G=>F(G.target.value),placeholder:"Confirm your new password",required:!0}),f.jsx("button",{type:"button",onClick:()=>ce(!K),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:K?f.jsx(au,{className:"w-4 h-4"}):f.jsx(ru,{className:"w-4 h-4"})})]}),f.jsx(ue,{type:"submit",disabled:g||!oe.isValid||T!==H,className:"w-full",children:g?"Changing Password...":"Change Password"})]}),d==="danger"&&f.jsx("div",{className:"space-y-6",children:f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(sg,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),f.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),f.jsx("div",{className:"mt-4",children:f.jsx(ue,{variant:"danger",onClick:de,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function FS({isOpen:i,onClose:a,onCreateCampaign:r}){const[s,o]=S.useState(""),[c,d]=S.useState(""),[m,g]=S.useState(!1),[p,v]=S.useState(!1),[b,_]=S.useState([]),[x,C]=S.useState(""),[A,j]=S.useState("player"),N=async F=>{if(F.preventDefault(),!!s.trim())try{v(!0),(await r({name:s.trim(),description:c.trim()||void 0,creatorIsAlsoGM:m,initialMembers:b.length>0?b:void 0})).success&&(o(""),d(""),g(!1),_([]),C(""),j("player"))}finally{v(!1)}},T=()=>{x.trim()&&(b.some(F=>F.email.toLowerCase()===x.toLowerCase())||(_([...b,{email:x.trim(),role:A}]),C(""),j("player")))},O=F=>{_(b.filter((V,te)=>te!==F))},H=()=>{o(""),d(""),g(!1),_([]),C(""),j("player"),a()};return f.jsx(Qe,{isOpen:i,onClose:H,title:"Create New Campaign",maxWidth:"lg",children:f.jsxs("form",{onSubmit:N,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Campaign Information"}),f.jsx(Z,{label:"Campaign Name",value:s,onChange:F=>o(F.target.value),placeholder:"Enter campaign name",required:!0}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:c,onChange:F=>d(F.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",id:"creatorIsAlsoGM",checked:m,onChange:F=>g(F.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),f.jsx("label",{htmlFor:"creatorIsAlsoGM",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Also be the Game Master"})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You will always be an Administrator with full campaign control. Check this if you also want to run the game as GM."})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Invite Players (Optional)"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add players to your campaign. They'll need to have accounts to join."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{type:"email",value:x,onChange:F=>C(F.target.value),placeholder:"player@example.com",className:"input w-full",onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),T())}})}),f.jsxs("select",{value:A,onChange:F=>j(F.target.value),className:"input",children:[f.jsx("option",{value:"player",children:"Player"}),f.jsx("option",{value:"gm",children:"GM"}),f.jsx("option",{value:"admin",children:"Admin"})]}),f.jsx(ue,{type:"button",onClick:T,disabled:!x.trim(),size:"sm",children:f.jsx(kr,{className:"w-4 h-4"})})]}),b.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Initial Members (",b.length,")"]}),f.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.map((F,V)=>f.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-50",children:F.email}),f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:F.role})]}),f.jsx("button",{type:"button",onClick:()=>O(V),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:f.jsx(np,{className:"w-4 h-4"})})]},V))})]})]}),f.jsx(rr,{onCancel:H,cancelText:"Cancel",confirmText:p?"Creating...":"Create Campaign",confirmDisabled:p||!s.trim(),confirmType:"submit",isLoading:p})]})})}const YS="modulepreload",IS=function(i){return"/traveller-dashboard/"+i},Kg={},Bu=function(a,r,s){let o=Promise.resolve();if(r&&r.length>0){let g=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");o=g(r.map(p=>{if(p=IS(p),p in Kg)return;Kg[p]=!0;const v=p.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":YS,v||(_.as="script"),_.crossOrigin="",_.href=p,m&&_.setAttribute("nonce",m),document.head.appendChild(_),v)return new Promise((x,C)=>{_.addEventListener("load",x),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return a().catch(c)})},QS=()=>{const{user:i}=Ea(),{items:a,loading:r,error:s,execute:o,setItems:c}=ql(),d=S.useMemo(()=>td(),[]),m=S.useCallback(async()=>{if(!i?.email)return;await o(async()=>{const _=await d.getUserInvitations(i.email);return _.success?{success:!0,data:_.data||[]}:_.error?.includes("function")&&_.error?.includes("does not exist")?{success:!0,data:[]}:{success:!1,error:_.error||"Failed to load invitations"}})},[i?.email,d,o]),g=S.useCallback(async b=>{if(!i)return{success:!1,error:"User not found"};try{const _=await d.acceptCampaignInvitation(b,i.id);return _.success&&c(x=>x.filter(C=>C.id!==b)),_}catch{return{success:!1,error:"Failed to accept invitation"}}},[i,d,c]),p=S.useCallback(async b=>{try{const _=await d.declineCampaignInvitation(b);return _.success&&c(x=>x.filter(C=>C.id!==b)),_}catch{return{success:!1,error:"Failed to decline invitation"}}},[d,c]),v=S.useCallback(async(b,_)=>{if(!i)return{success:!1,error:"User not found"};try{const x=await g(b);if(!x.success)return x;const C=a.find(N=>N.id===b);if(!C)return{success:!1,error:"Invitation not found"};const{supabase:A}=await Bu(async()=>{const{supabase:N}=await Promise.resolve().then(()=>gS);return{supabase:N}},[]),{error:j}=await A.from("characters").update({campaign_id:C.campaignId}).eq("id",_).eq("owner_id",i.id);return j?{success:!1,error:"Failed to assign character to campaign"}:{success:!0}}catch{return{success:!1,error:"Failed to accept invitation and assign character"}}},[i,a,g]);return S.useEffect(()=>{m()},[m]),{invitations:a,loading:r,error:s,acceptInvitation:g,declineInvitation:p,assignCharacterAndAccept:v,refreshInvitations:m}},KS=({onInvitationAccepted:i})=>{const{user:a}=Ea(),{invitations:r,loading:s,error:o,acceptInvitation:c,declineInvitation:d,assignCharacterAndAccept:m}=QS(),[g,p]=S.useState([]),[v,b]=S.useState(!1),[_,x]=S.useState(null),[C,A]=S.useState(""),[j,N]=S.useState(!1),T=S.useCallback(async()=>{if(a)try{const{data:P,error:K}=await W.from("characters").select("id, name, campaign_id").eq("owner_id",a.id).is("campaign_id",null);!K&&P&&p(P)}catch{}},[a]);S.useEffect(()=>{T()},[T]);const O=async P=>{N(!0);try{(await c(P.id)).success&&i?.()}finally{N(!1)}},H=P=>{x(P),b(!0)},F=async()=>{if(!(!_||!C)){N(!0);try{(await m(_.id,C)).success&&(b(!1),x(null),A(""),await T(),i?.())}finally{N(!1)}}},V=async P=>{N(!0);try{await d(P)}finally{N(!1)}},te=P=>{const K=[];return P.isAdmin&&K.push("Admin"),P.isGm&&K.push("GM"),P.isPlayer&&K.push("Player"),K.length>0?K.join(", "):"Player"},Y=P=>P?P.toLocaleDateString():"No expiration";return s?f.jsx("div",{className:"text-center py-4",children:"Loading invitations..."}):o?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"Campaign Invitations"}),f.jsx("p",{className:"text-red-600",children:o})]}):r.length===0?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"No pending invitations"}),f.jsx("p",{children:"You don't have any pending campaign invitations at the moment."})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Invitations"}),r.map(P=>f.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg",children:P.campaignName||"Unknown Campaign"}),f.jsxs("p",{className:"text-gray-600 text-sm",children:["Invited by ",P.invitedByName||"Unknown User"]})]}),f.jsxs("div",{className:"text-right text-sm text-gray-500",children:[f.jsxs("div",{children:["Expires: ",Y(P.expiresAt)]}),f.jsxs("div",{children:["Roles: ",te(P.rolesOffered)]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{onClick:()=>O(P),disabled:j,className:"bg-green-600 hover:bg-green-700",children:"Accept"}),g.length>0&&f.jsx(ue,{onClick:()=>H(P),disabled:j,className:"bg-blue-600 hover:bg-blue-700",children:"Accept & Assign Character"}),f.jsx(ue,{onClick:()=>V(P.id),disabled:j,variant:"default",children:"Decline"})]})]},P.id)),f.jsx(Qe,{isOpen:v,onClose:()=>{b(!1),x(null),A("")},title:"Accept Invitation & Assign Character",children:f.jsxs("div",{className:"space-y-4",children:[_&&f.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[f.jsx("h4",{className:"font-medium",children:_.campaignName}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Roles: ",te(_.rolesOffered)]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"character-select",className:"block text-sm font-medium mb-2",children:"Select a character to assign:"}),f.jsxs("select",{id:"character-select",value:C,onChange:P=>A(P.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"",children:"Choose a character..."}),g.map(P=>f.jsx("option",{value:P.id,children:P.name},P.id))]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[f.jsx(ue,{onClick:()=>{b(!1),x(null),A("")},variant:"default",disabled:j,children:"Cancel"}),f.jsx(ue,{onClick:F,disabled:j||!C,className:"bg-green-600 hover:bg-green-700",children:"Accept & Assign"})]})]})})]})},rd=i=>i.isAdmin?"admin":i.isGm?"gm":"player";function _y(i){return i==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":i==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function xu({title:i,description:a,icon:r,onClick:s,disabled:o=!1}){return f.jsx("button",{onClick:s,disabled:o,className:"card p-6 text-left hover:shadow-lg hover:shadow-blue-100 dark:hover:shadow-blue-900/20 hover:border-blue-300 dark:hover:border-blue-600 hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-none",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"text-blue-600 dark:text-blue-400 transition-transform duration-200 hover:scale-110",children:r}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-zinc-50 transition-colors duration-200",children:i}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-200",children:a})]})]})})}function WS({campaigns:i,onCampaignSelect:a}){const r=i.sort((s,o)=>o.updatedAt.getTime()-s.updatedAt.getTime()).slice(0,3);return f.jsxs("div",{className:"card p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),i.length>3&&f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," total"]})]}),r.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):f.jsx("div",{className:"space-y-3",children:r.map(s=>f.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 hover:shadow-sm cursor-pointer transition-all duration-200",onClick:()=>a(s.id),children:[f.jsxs("div",{className:"flex-grow",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:s.name}),s.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_y(rd(s.userRoles))}`,children:Ul(s.userRoles)})]}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.memberCount||0," member(s)  Updated"," ",s.updatedAt.toLocaleDateString()]})]}),f.jsx(lp,{className:"w-4 h-4 text-gray-400 transition-transform duration-200 group-hover:translate-x-1"})]},s.id))})]})}function XS({campaign:i,onSelect:a,onEdit:r,onSettings:s}){const o=rd(i.userRoles);return f.jsxs("div",{className:"card p-6 hover:shadow-lg hover:shadow-gray-100 dark:hover:shadow-gray-900/20 hover:border-blue-300 dark:hover:border-blue-600 hover:-translate-y-1 transition-all duration-200",children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:i.name}),i.description&&f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:i.description})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_y(o)}`,children:Ul(i.userRoles)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.memberCount||0," member(s)"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>r(i),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Edit Campaign",children:f.jsx(ab,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>s(i),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Campaign Settings",children:f.jsx(ip,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>a(i.id),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Enter Campaign",children:f.jsx(lp,{className:"w-4 h-4"})})]})]})]})}function JS({campaign:i,onViewCampaign:a}){const{characters:r}=Rn(i.id);return f.jsxs("div",{className:"card p-6 hover:shadow-lg hover:shadow-gray-100 dark:hover:shadow-gray-900/20 hover:border-green-300 dark:hover:border-green-600 hover:-translate-y-1 transition-all duration-200",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:i.name}),f.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[r.length," CHARACTER",r.length!==1?"S":""]})]}),r.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(s=>f.jsxs("div",{className:"flex items-center text-sm",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),f.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:s.characterName||s.displayName})]},s.id)),r.length>3&&f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-4",children:["+",r.length-3," more characters"]})]})}),f.jsx("button",{onClick:()=>a(i.id),className:"w-full text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 font-medium py-2 px-3 rounded-md transition-all duration-200 hover:shadow-sm",children:"View Campaign "})]})}function ZS({campaigns:i,onSelect:a,onEdit:r,onSettings:s}){return f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(o=>f.jsx(XS,{campaign:o,onSelect:a,onEdit:r,onSettings:s},o.id))})]})}function eC({campaigns:i,onViewCampaign:a}){const r=i.filter(s=>s.memberCount&&s.memberCount>0);return f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),r.length===0?f.jsx("div",{className:"card p-6 text-center",children:f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(s=>f.jsx(JS,{campaign:s,onViewCampaign:a},s.id))})]})}function tC(){const i=Ml(),{campaigns:a,loading:r,error:s,createCampaign:o,updateCampaign:c,deleteCampaign:d}=TS(),{fetchMembers:m,addMemberByEmail:g,removeMember:p,updateMemberRole:v}=kS(),{signOut:b,user:_,updateProfile:x,changePassword:C,deleteAccount:A}=Ea(),[j,N]=S.useState(!1),[T,O]=S.useState(!1),[H,F]=S.useState(!1),[V,te]=S.useState(!1),[Y,P]=S.useState(!1),[K,ce]=S.useState(!1),[oe,Q]=S.useState(null),[I,de]=S.useState(""),[B,G]=S.useState(""),[X,xe]=S.useState(!1),[we,Ue]=S.useState(null),Re=async se=>{const Ne=await o(se);return Ne.success&&N(!1),Ne},ye=se=>{Q(se),de(se.name),G(se.description||""),O(!0)},Se=async se=>{if(se.preventDefault(),!!oe){xe(!0);try{(await c(oe.id,{name:I.trim(),description:B.trim()||void 0})).success&&(O(!1),Q(null))}finally{xe(!1)}}},Ee=se=>{Ue(se),F(!0)},Ot=async(se,Ne,me)=>{const He=rd(me);return await g(se,Ne,He)},Ke=async(se,Ne)=>{await p(se,Ne)},Vt=async(se,Ne,me)=>await v(se,Ne,me),Gt=se=>({id:se.id,name:se.name,description:se.description||null,created_at:se.createdAt.toISOString(),created_by:se.createdBy,updated_at:se.updatedAt.toISOString(),userRoles:se.userRoles,member_count:se.memberCount}),Na=async se=>{const Ne=await m(se);return Ne.success?Ne.data:void 0};return r?f.jsx(DS,{message:"Loading dashboard..."}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),_&&f.jsx(VS,{user:_,onSettings:()=>ce(!0),onSignOut:()=>b()})]})}),f.jsx("div",{className:"p-6 space-y-6",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[s&&f.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:s}),f.jsx("div",{className:"mb-8",children:f.jsx(KS,{onInvitationAccepted:()=>{}})}),f.jsx("div",{className:"mb-8",children:f.jsx(WS,{campaigns:a,onCampaignSelect:se=>i(`/campaign/${se}`)})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[f.jsx(xu,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:f.jsx(rb,{className:"w-8 h-8"}),onClick:()=>N(!0)}),f.jsx(xu,{title:"Your Characters",description:"Create and manage your standalone characters",icon:f.jsx(jl,{className:"w-8 h-8"}),onClick:()=>P(!0)}),f.jsx(xu,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:f.jsx(nr,{className:"w-8 h-8"}),onClick:()=>te(!0)})]})]}),a.length>0&&f.jsx("div",{className:"mb-8",children:f.jsx(ZS,{campaigns:a,onSelect:se=>i(`/campaign/${se}`),onEdit:ye,onSettings:Ee})}),a.length>0&&f.jsx("div",{className:"mb-8",children:f.jsx(eC,{campaigns:a,onViewCampaign:se=>i(`/campaign/${se}`)})})]})}),f.jsx(FS,{isOpen:j,onClose:()=>N(!1),onCreateCampaign:Re}),f.jsx(Qe,{isOpen:T,onClose:()=>O(!1),title:"Edit Campaign",children:f.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[f.jsx(Z,{label:"Campaign Name",value:I,onChange:se=>de(se.target.value),placeholder:"Enter campaign name",required:!0}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:B,onChange:se=>G(se.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsx(rr,{onCancel:()=>O(!1),cancelText:"Cancel",confirmText:X?"Updating...":"Update Campaign",confirmDisabled:X||!I.trim(),confirmType:"submit",isLoading:X})]})}),we&&f.jsx(Qe,{isOpen:H,onClose:()=>F(!1),title:"Campaign Settings",maxWidth:"xl",children:f.jsx(MS,{campaign:Gt(we),onClose:()=>F(!1),onGetMembers:Na,onAddMember:Ot,onRemoveMember:Ke,onUpdateMemberRole:Vt,onUpdateCampaign:async(se,Ne)=>{await c(se,{name:Ne.name,description:Ne.description||void 0})},onDeleteCampaign:async se=>{(await d(se)).success&&(F(!1),Ue(null))}})}),f.jsx(Qe,{isOpen:V,onClose:()=>te(!1),title:"Character Management",maxWidth:"xl",children:f.jsx(PS,{campaigns:a,onViewCampaign:se=>{te(!1),i(`/campaign/${se}`)}})}),f.jsx(Qe,{isOpen:Y,onClose:()=>P(!1),title:"Your Characters",maxWidth:"xl",children:f.jsx(HS,{campaigns:a})}),_&&f.jsx(GS,{isOpen:K,onClose:()=>ce(!1),user:_,onUpdateProfile:async se=>{const Ne=await x(se);if(!Ne.success&&Ne.error)throw new Error(Ne.error)},onChangePassword:async se=>{const Ne=await C(se);if(!Ne.success&&Ne.error)throw new Error(Ne.error)},onDeleteAccount:()=>{A().then(()=>{ce(!1)})}})]})}const wy="traveller-ui-state-v1",Wg={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function Sy(){try{const i=localStorage.getItem(wy);if(!i)return Wg;const a=JSON.parse(i);return a.PCs||(a.PCs={}),Object.keys(a.PCs).forEach(r=>{a.PCs[r].Finance||(a.PCs[r].Finance=[]),a.PCs[r].Inventory||(a.PCs[r].Inventory=[]),a.PCs[r].Weapons||(a.PCs[r].Weapons=[]),a.PCs[r].Armour||(a.PCs[r].Armour=[]),a.PCs[r].Ammo||(a.PCs[r].Ammo=[])}),a}catch{return Wg}}function Cy(i){localStorage.setItem(wy,JSON.stringify(i))}function ar(i){const a=Sy();a.PCs[i]||(a.PCs[i]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Cy(a))}const aC=[{name:"Autopistol",type:"Slug Pistol",damage:"3d6-3",range:"10m",mass:1,cost:200,magazine:15,traits:["Auto 2"],tl:5,notes:"Common sidearm",source:"Core Rulebook"},{name:"Revolver",type:"Slug Pistol",damage:"3d6-3",range:"10m",mass:1,cost:150,magazine:6,traits:[],tl:4,notes:"Reliable, simple design",source:"Core Rulebook"},{name:"Snub Pistol",type:"Slug Pistol",damage:"3d6-3",range:"5m",mass:.5,cost:150,magazine:6,traits:["Zero-G"],tl:8,notes:"Designed for spacecraft use",source:"Core Rulebook"},{name:"Body Pistol",type:"Slug Pistol",damage:"3d6-3",range:"5m",mass:.25,cost:500,magazine:6,traits:[],tl:7,notes:"Easily concealed, non-metallic",source:"Core Rulebook"},{name:"Accelerator Rifle",type:"Slug Rifle",damage:"3d6",range:"250m",mass:4,cost:900,magazine:15,traits:["Auto 2","Scope"],tl:9,notes:"Magnetically accelerated projectiles",source:"Core Rulebook"},{name:"Advanced Combat Rifle",type:"Slug Rifle",damage:"3d6",range:"250m",mass:4,cost:1e3,magazine:40,traits:["Auto 3","Scope"],tl:9,notes:"Modern military standard",source:"Core Rulebook"},{name:"Assault Rifle",type:"Slug Rifle",damage:"3d6",range:"200m",mass:4,cost:300,magazine:30,traits:["Auto 3"],tl:7,notes:"Common military weapon",source:"Core Rulebook"},{name:"Autorifle",type:"Slug Rifle",damage:"3d6",range:"200m",mass:5,cost:200,magazine:20,traits:["Auto 2"],tl:6,notes:"Early automatic rifle",source:"Core Rulebook"},{name:"Rifle",type:"Slug Rifle",damage:"3d6",range:"250m",mass:4,cost:200,magazine:10,traits:[],tl:5,notes:"Standard bolt-action rifle",source:"Core Rulebook"},{name:"Shotgun",type:"Slug Rifle",damage:"4d6",range:"20m",range_long:"50m",mass:4,cost:200,magazine:10,traits:["Bulky"],tl:4,notes:"Can fire shot or slugs",source:"Core Rulebook"},{name:"Gauss Rifle",type:"Energy Rifle",damage:"4d6",range:"500m",mass:4,cost:1500,magazine:80,traits:["AP 3","Auto 3","Scope"],tl:12,notes:"Electromagnetically accelerated",source:"Core Rulebook"},{name:"Gauss Pistol",type:"Energy Pistol",damage:"3d6",range:"50m",mass:.5,cost:500,magazine:40,traits:["AP 3"],tl:12,notes:"Compact gauss weapon",source:"Core Rulebook"},{name:"Laser Carbine",type:"Energy Rifle",damage:"4d6",range:"250m",mass:4,cost:2500,magazine:50,traits:["Zero-G"],tl:9,notes:"Lightweight laser weapon",source:"Core Rulebook"},{name:"Laser Rifle",type:"Energy Rifle",damage:"5d6",range:"300m",mass:5,cost:3500,magazine:100,traits:["Zero-G"],tl:9,notes:"Standard energy weapon",source:"Core Rulebook"},{name:"Laser Pistol",type:"Energy Pistol",damage:"3d6+3",range:"50m",mass:2,cost:1500,magazine:50,traits:["Zero-G"],tl:9,notes:"Personal energy weapon",source:"Core Rulebook"},{name:"Plasma Rifle",type:"Energy Rifle",damage:"6d6",range:"100m",mass:6,cost:7e3,magazine:10,traits:["AP 10","Bulky","Blast 3"],tl:11,notes:"Superheated plasma bolts",source:"Core Rulebook"},{name:"Plasma Pistol",type:"Energy Pistol",damage:"4d6",range:"20m",mass:2,cost:4e3,magazine:10,traits:["AP 5","Blast 1"],tl:11,notes:"Compact plasma weapon",source:"Core Rulebook"},{name:"Stunner",type:"Energy Pistol",damage:"2d6 (stun)",range:"10m",mass:1,cost:500,magazine:100,traits:["Stun","Zero-G"],tl:8,notes:"Non-lethal energy weapon",source:"Core Rulebook"},{name:"Neural Disruptor",type:"Energy Pistol",damage:"Special",range:"5m",mass:.5,cost:2500,magazine:20,traits:["Stun","Illegal"],tl:11,notes:"Disrupts neural activity",source:"Core Rulebook"},{name:"Grenade Launcher",type:"Heavy Weapon",damage:"Varies",range:"250m",mass:6,cost:400,magazine:6,traits:["Bulky"],tl:7,notes:"Fires grenades",source:"Core Rulebook"},{name:"RAM Grenade Launcher",type:"Heavy Weapon",damage:"Varies",range:"250m",mass:5,cost:800,magazine:6,traits:["Bulky","Auto 3"],tl:8,notes:"Rocket Assisted Multi-purpose",source:"Core Rulebook"},{name:"Machine Gun",type:"Heavy Weapon",damage:"3d6",range:"500m",mass:10,cost:1200,magazine:100,traits:["Auto 4","Bulky"],tl:7,notes:"Crew-served weapon",source:"Core Rulebook"},{name:"Advanced Machine Gun",type:"Heavy Weapon",damage:"3d6+2",range:"600m",mass:8,cost:1800,magazine:100,traits:["Auto 4","Bulky"],tl:8,notes:"Improved crew-served weapon",source:"Core Rulebook"},{name:"PGMP (Plasma Gun, Man Portable)",type:"Heavy Weapon",damage:"1d6 x 10",range:"300m",mass:8,cost:2e4,magazine:10,traits:["AP 20","Bulky","Blast 6"],tl:13,notes:"Man-portable plasma cannon",source:"Core Rulebook"},{name:"FGMP (Fusion Gun, Man Portable)",type:"Heavy Weapon",damage:"2d6 x 10",range:"300m",mass:12,cost:5e4,magazine:20,traits:["AP 30","Bulky","Blast 9","Radiation"],tl:14,notes:"Man-portable fusion weapon",source:"Core Rulebook"},{name:"Rocket Launcher",type:"Heavy Weapon",damage:"Varies",range:"500m",mass:8,cost:2e3,magazine:1,traits:["Bulky"],tl:7,notes:"Anti-vehicle weapon",source:"Core Rulebook"},{name:"Flamethrower",type:"Heavy Weapon",damage:"4d6",range:"20m",mass:12,cost:500,magazine:10,traits:["Bulky","Blast 3","Fire"],tl:6,notes:"Area effect flame weapon",source:"Core Rulebook"},{name:"Dagger",type:"Blade",damage:"1d6+2",range:"Melee",mass:.25,cost:10,magazine:null,traits:[],tl:1,notes:"Small blade weapon",source:"Core Rulebook"},{name:"Knife",type:"Blade",damage:"1d6+2",range:"Melee",mass:.25,cost:10,magazine:null,traits:[],tl:1,notes:"Utility/combat knife",source:"Core Rulebook"},{name:"Cutlass",type:"Blade",damage:"2d6+2",range:"Melee",mass:1,cost:100,magazine:null,traits:[],tl:2,notes:"Curved sword",source:"Core Rulebook"},{name:"Sword",type:"Blade",damage:"3d6",range:"Melee",mass:1,cost:200,magazine:null,traits:[],tl:2,notes:"Standard sword",source:"Core Rulebook"},{name:"Blade",type:"Blade",damage:"2d6+4",range:"Melee",mass:2,cost:250,magazine:null,traits:[],tl:4,notes:"Modern combat blade",source:"Core Rulebook"},{name:"Club",type:"Bludgeon",damage:"2d6",range:"Melee",mass:1,cost:5,magazine:null,traits:[],tl:0,notes:"Simple bludgeon",source:"Core Rulebook"},{name:"Improvised Weapon",type:"Bludgeon",damage:"1d6",range:"Melee",mass:1,cost:0,magazine:null,traits:[],tl:0,notes:"Any makeshift weapon",source:"Core Rulebook"},{name:"Broadsword",type:"Blade",damage:"4d6",range:"Melee",mass:2,cost:500,magazine:null,traits:["Bulky"],tl:3,notes:"Large two-handed sword",source:"Core Rulebook"},{name:"Polearm",type:"Blade",damage:"3d6+3",range:"Melee (reach)",mass:3,cost:100,magazine:null,traits:["Bulky","Reach"],tl:2,notes:"Spear, halberd, etc.",source:"Core Rulebook"},{name:"Pike",type:"Blade",damage:"3d6+2",range:"Melee (reach)",mass:4,cost:40,magazine:null,traits:["Bulky","Reach"],tl:2,notes:"Very long spear",source:"Core Rulebook"},{name:"Frag Grenade",type:"Grenade",damage:"5d6",range:"Thrown (20m)",mass:.5,cost:30,magazine:null,traits:["Blast 6"],tl:6,notes:"Fragmentation grenade",source:"Core Rulebook"},{name:"Smoke Grenade",type:"Grenade",damage:"None",range:"Thrown (20m)",mass:.25,cost:15,magazine:null,traits:["Smoke","Blast 6"],tl:6,notes:"Creates smoke screen",source:"Core Rulebook"},{name:"Stun Grenade",type:"Grenade",damage:"3d6 (stun)",range:"Thrown (20m)",mass:.25,cost:30,magazine:null,traits:["Stun","Blast 3"],tl:7,notes:"Non-lethal grenade",source:"Core Rulebook"},{name:"Aerosol Grenade",type:"Grenade",damage:"Special",range:"Thrown (20m)",mass:.25,cost:20,magazine:null,traits:["Blast 6"],tl:7,notes:"Disperses chemical agent",source:"Core Rulebook"},{name:"Snare Pistol",type:"Special",damage:"Special",range:"10m",mass:.5,cost:150,magazine:1,traits:["Entangle"],tl:8,notes:"Fires entangling net",source:"Core Rulebook"},{name:"Shotgun Pistol",type:"Slug Pistol",damage:"3d6",range:"10m",mass:1.5,cost:150,magazine:4,traits:[],tl:5,notes:"Compact shotgun",source:"Core Rulebook"},{name:"Submachine Gun",type:"Slug Rifle",damage:"3d6-3",range:"30m",mass:2.5,cost:250,magazine:30,traits:["Auto 3"],tl:6,notes:"Compact automatic weapon",source:"Core Rulebook"},{name:"Carbine",type:"Slug Rifle",damage:"3d6",range:"100m",mass:3,cost:200,magazine:10,traits:[],tl:5,notes:"Shortened rifle",source:"Core Rulebook"},{name:"Crossbow",type:"Projectile",damage:"3d6",range:"50m",mass:2,cost:75,magazine:1,traits:["Silent"],tl:2,notes:"Mechanical bow",source:"Core Rulebook"},{name:"Bow",type:"Projectile",damage:"2d6",range:"75m",mass:1,cost:60,magazine:1,traits:["Silent"],tl:1,notes:"Traditional bow",source:"Core Rulebook"}],rC=["Slug Pistol","Slug Rifle","Energy Pistol","Energy Rifle","Heavy Weapon","Blade","Bludgeon","Grenade","Projectile","Special"],nC={AP:"Armor Piercing - Reduces armor protection",Auto:"Automatic fire - Can fire multiple shots",Blast:"Area effect - Damages everything in radius",Bulky:"Large and cumbersome weapon",Fire:"Sets targets ablaze",Illegal:"Banned by most governments",Radiation:"Causes radiation damage",Reach:"Extended melee range",Scope:"Includes targeting scope",Silent:"Makes no noise when fired",Smoke:"Creates concealing smoke",Stun:"Non-lethal incapacitation","Zero-G":"Functions normally in zero gravity",Entangle:"Restricts target movement"},jy={weapons:aC,weaponTypes:rC,traits:nC};function sC(i){const a=S.useCallback((o,c,d)=>{i(m=>{m.PCs[o]||ar(o);const g=m.PCs[o]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...m,PCs:{...m.PCs,[o]:{...g,Ammo:(g.Ammo||[]).map((p,v)=>v===c?d:p)}}}})},[i]),r=S.useCallback((o,c)=>{i(d=>{if(!d.PCs[o])return ar(o),d;const m=d.PCs[o]?.Ammo?.[c];if(!m)return d;const g=Number(m["Rounds Loaded"]||0),p=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),b=Number(m["Magazine Size"]||0);let _=g,x=p,C=v;if(_>0)_-=1;else if(x>0)x-=1,_=b-1;else if(C>0&&b>0){const N=Math.min(C,b);C-=N,_=N-1}else return d;const A=_+x*b+C,j={...m,"Rounds Loaded":_,"Spare Magazines":x,"Loose Rounds":C,"Total Rounds":A};return{...d,PCs:{...d.PCs,[o]:{...d.PCs[o],Ammo:(d.PCs[o].Ammo||[]).map((N,T)=>T===c?j:N)}}}})},[i]),s=S.useCallback((o,c)=>{i(d=>{if(!d.PCs[o])return ar(o),d;const m=d.PCs[o]?.Ammo?.[c];if(!m)return d;const g=Number(m["Rounds Loaded"]||0),p=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),b=Number(m["Magazine Size"]||0);let _=g,x=p,C=v;if(x>0&&_<b)x-=1,_=b;else if(C>0&&_<b){const N=b-_,T=Math.min(C,N);C-=T,_+=T}const A=_+x*b+C,j={...m,"Rounds Loaded":_,"Spare Magazines":x,"Loose Rounds":C,"Total Rounds":A};return{...d,PCs:{...d.PCs,[o]:{...d.PCs[o],Ammo:(d.PCs[o].Ammo||[]).map((N,T)=>T===c?j:N)}}}})},[i]);return{updateCharacterAmmo:a,fireRound:r,reloadWeapon:s}}function iC(){const[i,a]=S.useState(Sy());S.useEffect(()=>{Cy(i)},[i]);const r=S.useCallback(b=>{a(_=>({..._,Party_Finances:b}))},[]),s=S.useCallback(b=>{a(_=>({..._,Ship_Accounts:b}))},[]),o=S.useCallback(b=>{a(_=>({..._,Ship_Cargo:[..._.Ship_Cargo,b]}))},[]),c=S.useCallback((b,_)=>{a(x=>(x.PCs[b]||ar(b),{...x,PCs:{...x.PCs,[b]:{...x.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:_}}}))},[]),d=S.useCallback((b,_)=>{a(x=>{x.PCs[b]||ar(b);const C=x.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...x,PCs:{...x.PCs,[b]:{...C,Inventory:[...C.Inventory,_]}}}})},[]),m=S.useCallback((b,_)=>{a(x=>{x.PCs[b]||ar(b);const C=x.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},A=C.Ammo||[],j=C.Finance||[],N=A.findIndex(H=>H.Weapon===_.Weapon&&H["Ammo Type"]===_["Ammo Type"]);let T;if(N>=0){T=[...A];const H=T[N];T[N]={...H,"Spare Magazines":Number(H["Spare Magazines"]||0)+Number(_["Spare Magazines"]||0),"Loose Rounds":Number(H["Loose Rounds"]||0)+Number(_["Loose Rounds"]||0)}}else T=[...A,_];let O=j;if(_.Cost&&_.Cost>0){const H={Date:new Date().toISOString().split("T")[0],Description:`Purchased ${_["Ammo Type"]} for ${_.Weapon}`,Category:"Expense",Subcategory:"Ammo","Amount (Cr)":Math.abs(_.Cost),"Paid By":b,Notes:_.Notes||""};O=[...j,H]}return{...x,PCs:{...x.PCs,[b]:{...C,Ammo:T,Finance:O}}}})},[]),g=S.useCallback((b,_)=>{a(x=>{x.PCs[b]||ar(b);const C=x.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},A=jy.weapons.find(T=>T.name===_.Weapon);let j=C.Ammo||[];A&&A.magazine!==null&&A.magazine>0&&j.findIndex(O=>O.Weapon===_.Weapon)===-1&&(j=[...j,{Weapon:_.Weapon,"Ammo Type":_.Type||"","Magazine Size":A.magazine,"Rounds Loaded":0,"Spare Magazines":0,"Loose Rounds":0,Notes:"Auto-created with weapon"}]);let N=C.Finance||[];if(_.Cost&&_.Cost>0){const T={Date:new Date().toISOString().split("T")[0],Description:`Purchased ${_.Weapon}`,Category:"Expense",Subcategory:"Weapons","Amount (Cr)":Math.abs(_.Cost),"Paid By":b,Notes:_.Notes||""};N=[...N,T]}return{...x,PCs:{...x.PCs,[b]:{...C,Weapons:[...C.Weapons||[],_],Ammo:j,Finance:N}}}})},[]),p=S.useCallback((b,_)=>{a(x=>{x.PCs[b]||ar(b);const C=x.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};let A=C.Finance||[];if(_.Cost&&_.Cost>0){const j={Date:new Date().toISOString().split("T")[0],Description:`Purchased ${_.Armour}`,Category:"Expense",Subcategory:"Armour","Amount (Cr)":Math.abs(_.Cost),"Paid By":b,Notes:_.Notes||""};A=[...A,j]}return{...x,PCs:{...x.PCs,[b]:{...C,Armour:[...C.Armour||[],_],Finance:A}}}})},[]),v=sC(a);return{state:i,setState:a,updatePartyFinances:r,updateShipAccounts:s,addCargoLeg:o,updateCharacterFinance:c,addCharacterInventory:d,addCharacterAmmo:m,addCharacterWeapon:g,addCharacterArmour:p,...v}}function lC(i){const[a,r]=S.useState([]),[s,o]=S.useState([]),[c,d]=S.useState([]),[m,g]=S.useState([]),[p,v]=S.useState([]),[b,_]=S.useState([]),[x,C]=S.useState([]),[A,j]=S.useState(!0),[N,T]=S.useState(null),O=xS();S.useEffect(()=>{if(!i){j(!1);return}(async()=>{try{j(!0),T(null);const I=await O.getAllCampaignData(i);r(I.finances),o(I.shipFinances),d(I.cargo),g(I.maintenance),v(I.loans),_(I.partyInventory),C(I.ammo)}catch(I){console.error("Failed to load campaign data:",I),T(I instanceof Error?I:new Error("Failed to load campaign data"))}finally{j(!1)}})()},[i]);const H=S.useCallback(async Q=>{if(i)try{const I=Q.filter(de=>!!de.id).map(de=>O.updateCampaignFinance(de.id,de));await Promise.all(I),r(Q)}catch(I){throw console.error("Failed to update party finances:",I),I}},[i,O]),F=S.useCallback(async Q=>{if(i)try{const I=await O.addCampaignFinance(i,Q);r(de=>[I,...de])}catch(I){throw console.error("Failed to add party finance:",I),I}},[i,O]),V=S.useCallback(async Q=>{if(i)try{const I=Q.filter(de=>!!de.id).map(de=>O.updateShipFinance(de.id,de));await Promise.all(I),o(Q)}catch(I){throw console.error("Failed to update ship finances:",I),I}},[i,O]),te=S.useCallback(async Q=>{if(i)try{const I=await O.addShipFinance(i,Q);o(de=>[I,...de])}catch(I){throw console.error("Failed to add ship finance:",I),I}},[i,O]),Y=S.useCallback(async Q=>{if(i)try{const I=await O.addShipCargo(i,Q);d(de=>[I,...de])}catch(I){throw console.error("Failed to add cargo:",I),I}},[i,O]),P=S.useCallback(async Q=>{if(i)try{const I=await O.addShipMaintenance(i,Q);g(de=>[I,...de])}catch(I){throw console.error("Failed to add maintenance:",I),I}},[i,O]),K=S.useCallback(async Q=>{if(i)try{const I=await O.addCampaignLoan(i,Q);v(de=>[I,...de])}catch(I){throw console.error("Failed to add loan:",I),I}},[i,O]),ce=S.useCallback(async Q=>{if(i)try{const I=await O.addPartyInventoryItem(i,Q);_(de=>[I,...de])}catch(I){throw console.error("Failed to add party inventory item:",I),I}},[i,O]),oe=S.useCallback(async Q=>{if(i)try{const I=await O.addCampaignAmmo(i,Q);C(de=>[I,...de])}catch(I){throw console.error("Failed to add campaign ammo:",I),I}},[i,O]);return{partyFinances:a,shipFinances:s,shipCargo:c,shipMaintenance:m,loans:p,partyInventory:b,campaignAmmo:x,isLoading:A,error:N,updatePartyFinances:H,addPartyFinance:F,updateShipAccounts:V,addShipFinance:te,addCargoLeg:Y,addShipMaintenance:P,addLoan:K,addPartyInventoryItem:ce,addCampaignAmmo:oe}}function oC(i){const[a,r]=S.useState([]),[s,o]=S.useState([]),[c,d]=S.useState([]),[m,g]=S.useState([]),[p,v]=S.useState([]),[b,_]=S.useState(!0),[x,C]=S.useState(null),A=_S();S.useEffect(()=>{if(!i){_(!1),r([]),o([]),d([]),g([]),v([]);return}(async()=>{try{_(!0),C(null);const[P,K,ce,oe,Q]=await Promise.all([A.getCharacterFinance(i),A.getCharacterInventory(i),A.getCharacterWeapons(i),A.getCharacterArmour(i),A.getCharacterAmmo(i)]);P.success&&P.data&&r(P.data.map(Xg)),K.success&&K.data&&o(K.data.map(Jg)),ce.success&&ce.data&&d(ce.data.map(Zg)),oe.success&&oe.data&&g(oe.data.map(ep)),Q.success&&Q.data&&v(Q.data.map(tp))}catch(P){console.error("Failed to load character data:",P),C(P instanceof Error?P:new Error("Failed to load character data"))}finally{_(!1)}})()},[i]);const j=S.useCallback(async Y=>{i&&r(Y)},[i]),N=S.useCallback(async(Y,P)=>{if(i)try{const K=await A.addCharacterFinance(i,Y,P);if(K.success&&K.data){const ce=Xg(K.data);r(oe=>[ce,...oe])}}catch(K){throw console.error("Failed to add finance:",K),K}},[i,A]),T=S.useCallback(async Y=>{if(i)try{const P={itemName:Y.Item,quantity:Y.Qty||1,weight:Y["Unit Mass (kg)"],value:Y["Unit Value (Cr)"],description:Y.Notes},K=await A.addCharacterInventory(i,P);if(K.success&&K.data){const ce=Jg(K.data);o(oe=>[...oe,ce])}}catch(P){throw console.error("Failed to add inventory:",P),P}},[i,A]),O=S.useCallback(async Y=>{if(i)try{const P={name:Y.Weapon,damage:Y.Damage,range:Y.Range,weight:typeof Y.Mass=="number"?Y.Mass:void 0,cost:Y.Cost,notes:Y.Notes},K=await A.addCharacterWeapon(i,P);if(K.success&&K.data){const ce=Zg(K.data);d(oe=>[...oe,ce])}}catch(P){throw console.error("Failed to add weapon:",P),P}},[i,A]),H=S.useCallback(async Y=>{if(i)try{const P={name:Y.Armour,protection:typeof Y.Protection=="number"?Y.Protection:void 0,weight:typeof Y.Mass=="number"?Y.Mass:void 0,cost:Y.Cost,notes:Y.Notes},K=await A.addCharacterArmour(i,P);if(K.success&&K.data){const ce=ep(K.data);g(oe=>[...oe,ce])}}catch(P){throw console.error("Failed to add armour:",P),P}},[i,A]),F=S.useCallback(async Y=>{if(i)try{const P={type:Y.Weapon,quantity:Y["Total Rounds"]||0,maxQuantity:typeof Y["Magazine Size"]=="number"?Y["Magazine Size"]:void 0,weaponCompatibility:Y["Ammo Type"],notes:Y.Notes},K=await A.addCharacterAmmo(i,P);if(K.success&&K.data){const ce=tp(K.data);v(oe=>[...oe,ce])}}catch(P){throw console.error("Failed to add ammo:",P),P}},[i,A]),V=S.useCallback(async Y=>{if(!i||Y<0||Y>=p.length)return;const P=p[Y],K=P["Total Rounds"]||0;if(K<=0)return;const ce=[...p];ce[Y]={...P,"Total Rounds":K-1},v(ce)},[i,p]),te=S.useCallback(async Y=>{if(!i||Y<0||Y>=p.length)return;const P=p[Y],K=typeof P["Magazine Size"]=="number"?P["Magazine Size"]:0,ce=[...p];ce[Y]={...P,"Rounds Loaded":K},v(ce)},[i,p]);return{finance:a,inventory:s,weapons:c,armour:m,ammo:p,isLoading:b,error:x,updateFinance:j,addFinance:N,addInventory:T,addWeapon:O,addArmour:H,addAmmo:F,fireRound:V,reloadWeapon:te}}function Xg(i){return{Date:i.transactionDate.toISOString().split("T")[0],Description:i.description,Category:"Income",Subcategory:void 0,"Amount (Cr)":i.amount,"Paid By":void 0,"Paid From (Fund)":void 0,"Running Total":void 0,Notes:void 0}}function Jg(i){return{Item:i.itemName,Qty:i.quantity,"Unit Mass (kg)":i.weight,"Total Mass (kg)":i.weight?i.weight*i.quantity:void 0,"Unit Value (Cr)":i.value,"Total Value (Cr)":i.value?i.value*i.quantity:void 0,"Location/Container":void 0,Notes:i.description}}function Zg(i){return{Weapon:i.name,Type:void 0,Damage:i.damage,Range:i.range,Mass:i.weight,Cost:i.cost,Notes:i.notes}}function ep(i){return{Armour:i.name,Type:void 0,Protection:i.protection,Mass:i.weight,Cost:i.cost,Notes:i.notes}}function tp(i){return{Weapon:i.type,"Ammo Type":i.weaponCompatibility,"Magazine Size":i.maxQuantity,"Rounds Loaded":void 0,"Spare Magazines":void 0,"Loose Rounds":void 0,"Total Rounds":i.quantity,Cost:void 0,Notes:i.notes}}function cC(i,a=0){let r=a;return i.map(s=>{const o=s["Amount (Cr)"],c=s.Category;return c==="Income"?r+=o:c==="Expense"&&(r-=o),{...s,"Running Total":r}})}function Sl(i,a=0){return i.reduce((r,s)=>{const o=s["Amount (Cr)"],c=s.Category;return c==="Income"?r+o:c==="Expense"?r-o:r},a)}function uC(i,a,r=0){const s=[...i,a];return s.sort((o,c)=>new Date(o.Date).getTime()-new Date(c.Date).getTime()),cC(s,r)}function dC(i){const a=[];return i.Description?.trim()||a.push("Description is required"),i.Date||a.push("Date is required"),(i["Amount (Cr)"]===void 0||i["Amount (Cr)"]===null)&&a.push("Amount is required"),typeof i["Amount (Cr)"]=="number"&&i["Amount (Cr)"]<0&&a.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(i.Category||"")||a.push("Category must be Income, Expense, or Transfer"),{isValid:a.length===0,errors:a}}function bl(i){return`${i.toLocaleString()} Cr`}function hC(i){const a=i.reduce((r,s)=>{const o=s["Amount (Cr)"];return s.Category==="Income"?r.totalIncome+=o:s.Category==="Expense"&&(r.totalExpenses+=o),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...a,netChange:a.totalIncome-a.totalExpenses}}function fC(i,a){return S.useMemo(()=>({party:Sl(i.Party_Finances,0),ship:Sl(i.Ship_Accounts,0),character:Sl(i.PCs[a]?.Finance||[],0)}),[i.Party_Finances,i.Ship_Accounts,i.PCs,a])}function mC(i,a){const r=S.useCallback(async o=>{try{const{importXlsx:c}=await Bu(async()=>{const{importXlsx:d}=await import("./xlsx-Csb2Fy8F.js");return{importXlsx:d}},__vite__mapDeps([0,1,2,3]));return await c(o,i),{success:!0}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}},[i]),s=S.useCallback(async()=>{try{const{exportXlsx:o}=await Bu(async()=>{const{exportXlsx:c}=await import("./xlsx-Csb2Fy8F.js");return{exportXlsx:c}},__vite__mapDeps([0,1,2,3]));return await o(a),{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}},[a]);return{handleImport:r,handleExport:s}}function gC({onImport:i,onExport:a}){const r=async c=>{const d=c.target.files?.[0];d&&((await i(d)).success||(c.target.value=""))},s=async()=>{await a()},o=c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.currentTarget.click())};return f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),f.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[f.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:o,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[f.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:r,"data-testid":"file-input"}),f.jsx(nb,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),f.jsxs(ue,{onClick:s,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[f.jsx(sb,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const An=i=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(i)} Cr`,pC=()=>new Date().toISOString().slice(0,10);function yC({partyBalance:i,shipBalance:a,cargoLegsCount:r,characterCount:s}){return f.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${An(i)}`,children:An(i)})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${An(a)}`,children:An(a)})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${r}`,children:r})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${s}`,children:s})]})]})}function Ay({tabs:i,active:a,onChange:r}){const s=o=>{const c=i.findIndex(g=>g.id===a);let d=c;switch(o.key){case"ArrowLeft":o.preventDefault(),d=c>0?c-1:i.length-1;break;case"ArrowRight":o.preventDefault(),d=c<i.length-1?c+1:0;break;case"Home":o.preventDefault(),d=0;break;case"End":o.preventDefault(),d=i.length-1;break;default:return}const m=i[d].id;r(m)};return f.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:i.map(o=>f.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${a===o.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>r(o.id),onKeyDown:s,role:"tab","aria-selected":a===o.id,"aria-controls":`tabpanel-${o.id}`,id:`tab-${o.id}`,type:"button",tabIndex:a===o.id?0:-1,"data-testid":`tab-${o.id}`,children:o.label},o.id))})}function Or({title:i,children:a}){return f.jsxs("div",{className:"card space-y-3",children:[f.jsx("div",{className:"font-semibold",children:i}),a]})}function zn({columns:i,rows:a}){const r=s=>S.isValidElement(s)?s:String(s??"");return f.jsx("div",{className:"overflow-auto border rounded-2xl",children:f.jsxs("table",{className:"table",children:[f.jsx("thead",{children:f.jsx("tr",{children:i.map(s=>f.jsx("th",{children:s},s))})}),f.jsx("tbody",{children:a.length===0?f.jsx("tr",{children:f.jsx("td",{className:"text-zinc-500 p-3",colSpan:i.length,children:"No rows yet."})}):a.map((s,o)=>f.jsx("tr",{children:i.map(c=>f.jsx("td",{children:r(s[c])},c))},o))})]})})}function Un(i){const[a,r]=S.useState(i),s=S.useCallback((g,p)=>{r(v=>({...v,[g]:p}))},[]),o=S.useCallback(g=>p=>{s(g,p.target.value)},[s]),c=S.useCallback(g=>{r(p=>{const v={...i};return g&&g.forEach(b=>{v[b]=p[b]}),v})},[i]),d=S.useCallback(g=>{r(p=>({...p,...g}))},[]),m=S.useCallback(()=>({...a}),[a]);return{form:a,updateField:s,createInputHandler:o,resetForm:c,updateFields:d,getFormData:m,setForm:r}}const vC={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function bC({rows:i,onAdd:a}){const{form:r,createInputHandler:s,resetForm:o}=Un(vC),c=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const d=Number(r.Tons),m=Number(r.BuyPP),g=r.SellPP===""?null:Number(r.SellPP),p=r.Fees===""?0:Number(r.Fees),v=g===null?null:(g-m)*d-p;a({"Leg/Route":r.Route,Item:r.Item,Tons:d,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":m,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":g,"Broker (DM)":r.DM,"Fees/Taxes (Cr)":p,"Profit (Cr)":v}),o()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Or,{title:"Record Cargo Leg",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(Z,{placeholder:"Route (Vland  Regina)",value:r.Route,onChange:s("Route")}),f.jsx(Z,{placeholder:"Item",value:r.Item,onChange:s("Item")}),f.jsx(Z,{type:"number",placeholder:"Tons",value:r.Tons,onChange:s("Tons")}),f.jsx(Z,{placeholder:"Purchase World",value:r.BuyWorld,onChange:s("BuyWorld")}),f.jsx(Z,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:r.BuyPP,onChange:s("BuyPP")}),f.jsx(Z,{placeholder:"Sale World (optional)",value:r.SellWorld,onChange:s("SellWorld")}),f.jsx(Z,{type:"number",placeholder:"Sale Price (Cr/ton)",value:r.SellPP,onChange:s("SellPP")}),f.jsx(Z,{placeholder:"Broker DM",value:r.DM,onChange:s("DM")}),f.jsx(Z,{type:"number",placeholder:"Fees/Taxes (Cr)",value:r.Fees,onChange:s("Fees")})]}),f.jsx(ue,{className:"mt-2",onClick:c,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),f.jsx(zn,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:i})]})}function xC({title:i,totalIncome:a,totalExpenses:r,netChange:s,currentBalance:o}){return f.jsx(Or,{title:`${i} Summary`,children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),f.jsx("div",{children:bl(a)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),f.jsx("div",{children:bl(r)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),f.jsx("div",{className:s>=0?"text-green-600":"text-red-600",children:bl(s)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),f.jsx("div",{className:o>=0?"text-green-600":"text-red-600",children:bl(o)})]})]})})}function _C({title:i,fundName:a,onSubmit:r}){const s={Date:pC(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:o,createInputHandler:c,resetForm:d}=Un(s),[m,g]=S.useState([]),p=()=>{g([]);const v={Date:o.Date,Description:o.Description,Category:o.Category,Subcategory:o.Subcategory,"Amount (Cr)":Number(o.Amount),"Paid By":a,"Paid From (Fund)":a,Notes:o.Notes},b=dC(v);if(!b.isValid){g(b.errors);return}r(v),d(["Date","Category"])};return f.jsxs(Or,{title:`Add ${i} Transaction`,children:[m.length>0&&f.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:f.jsx("ul",{className:"list-disc list-inside",children:m.map((v,b)=>f.jsx("li",{children:v},b))})}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(Z,{type:"date",value:o.Date,onChange:c("Date")}),f.jsx(Z,{placeholder:"Description",value:o.Description,onChange:c("Description")}),f.jsxs(Z,{type:"select",value:o.Category,onChange:c("Category"),children:[f.jsx("option",{value:"Income",children:"Income"}),f.jsx("option",{value:"Expense",children:"Expense"}),f.jsx("option",{value:"Transfer",children:"Transfer"})]}),f.jsx(Z,{placeholder:"Subcategory",value:o.Subcategory,onChange:c("Subcategory")}),f.jsx(Z,{type:"number",placeholder:"Amount (Cr)",value:o.Amount,onChange:c("Amount")}),f.jsx(Z,{placeholder:"Notes",value:o.Notes,onChange:c("Notes")})]}),f.jsx(ue,{className:"mt-2",onClick:p,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function Lu({title:i,rows:a,onUpdate:r,fundName:s,initialBalance:o=0,showSummary:c=!0}){const d=Sl(a,o),m=hC(a),g=v=>{const b=uC(a,v,o);r(b)},p=a.map(v=>({...v,"Amount (Cr)":v.Category==="Expense"?-Math.abs(v["Amount (Cr)"]):Math.abs(v["Amount (Cr)"])}));return f.jsxs("div",{className:"space-y-4",children:[c&&f.jsx(xC,{title:i,totalIncome:m.totalIncome,totalExpenses:m.totalExpenses,netChange:m.netChange,currentBalance:d}),f.jsx(_C,{title:i,fundName:s,onSubmit:g}),f.jsx(zn,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:p})]})}function wC({pc:i,rows:a,onAdd:r}){const s=i.includes("  ")?i.split("  ")[1]:i;return f.jsx("div",{className:"space-y-4",children:f.jsx(Lu,{title:s,rows:a,onUpdate:r,fundName:`${s} Fund`,initialBalance:0,showSummary:!0})})}const SC={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function CC({rows:i,onAdd:a}){const{form:r,createInputHandler:s,resetForm:o}=Un(SC),c=()=>{if(!r.Item||r.Qty==="")return;const d=Number(r.Qty||0),m=Number(r["Unit Mass (kg)"]||0),g=Number(r["Unit Value (Cr)"]||0);a({Item:r.Item,Qty:d,"Unit Mass (kg)":m,"Total Mass (kg)":d*m,"Unit Value (Cr)":g,"Total Value (Cr)":d*g,"Location/Container":r["Location/Container"],Notes:r.Notes}),o()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Or,{title:"Add Inventory Item",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(Z,{placeholder:"Item",value:r.Item,onChange:s("Item")}),f.jsx(Z,{type:"number",placeholder:"Qty",value:r.Qty,onChange:s("Qty")}),f.jsx(Z,{type:"number",placeholder:"Unit Mass (kg)",value:r["Unit Mass (kg)"],onChange:s("Unit Mass (kg)")}),f.jsx(Z,{type:"number",placeholder:"Unit Value (Cr)",value:r["Unit Value (Cr)"],onChange:s("Unit Value (Cr)")}),f.jsx(Z,{placeholder:"Location/Container",value:r["Location/Container"],onChange:s("Location/Container")}),f.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:s("Notes")})]}),f.jsx(ue,{className:"mt-2",onClick:c,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),f.jsx(zn,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:i})]})}function jC({content:i,children:a,position:r="bottom",className:s=""}){const[o,c]=S.useState(!1),d={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},m={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return f.jsxs("div",{className:`relative inline-block ${s}`,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),children:[a,o&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:`absolute z-[9999] ${d[r]} transition-opacity duration-200`,children:[f.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:i}),f.jsx("div",{className:`absolute ${m[r]}`})]})})]})}function Ey(){const i=S.useMemo(()=>jy,[]);return{getAllWeapons:()=>i.weapons,getWeaponsByType:g=>i.weapons.filter(p=>p.type===g),getWeaponByName:g=>i.weapons.find(p=>p.name===g),getWeaponTypes:()=>i.weaponTypes,getWeaponsByTechLevel:(g,p)=>i.weapons.filter(v=>p!==void 0?v.tl>=g&&v.tl<=p:v.tl>=g),getTraitDescription:g=>i.traits[g],sortWeaponsByCost:(g=!0)=>{const p=[...i.weapons].sort((v,b)=>v.cost-b.cost);return g?p:p.reverse()},weaponTypes:i.weaponTypes,traits:i.traits}}const ap={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Cost:"",Notes:""};function AC({row:i,index:a,onFireRound:r,onReload:s}){return f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{variant:"danger",size:"sm",onClick:()=>r?.(a),disabled:Number(i["Total Rounds"]||0)<=0,title:`Fire one round from ${i.Weapon}`,"aria-label":`Fire one round from ${i.Weapon}`,children:"Fire"}),f.jsx(ue,{variant:"primary",size:"sm",onClick:()=>s?.(a),disabled:Number(i["Spare Magazines"]||0)<=0&&Number(i["Loose Rounds"]||0)<=0,title:`Reload ${i.Weapon}`,"aria-label":`Reload ${i.Weapon}`,children:"Reload"})]})}function EC({rows:i,weapons:a=[],onAdd:r,onFireRound:s,onReload:o}){const{form:c,createInputHandler:d,resetForm:m,updateField:g,setForm:p}=Un(ap),{getAllWeapons:v,getWeaponByName:b}=Ey(),_=j=>{if(!j||j===""||j==="__custom")return;const N=b(j);N&&N.magazine!==null?p({...c,Weapon:N.name,"Magazine Size":N.magazine.toString(),"Ammo Type":N.type}):g("Weapon",j)},x=()=>{if(!c.Weapon)return;const j=Number(c["Magazine Size"]||0),N=Number(c["Rounds Loaded"]||0),T=Number(c["Spare Magazines"]||0),O=Number(c["Loose Rounds"]||0),H=j*T+N+O;r({Weapon:c.Weapon,"Ammo Type":c["Ammo Type"],"Magazine Size":j,"Rounds Loaded":N,"Spare Magazines":T,"Loose Rounds":O,"Total Rounds":H,Cost:c.Cost?Number(c.Cost):void 0,Notes:c.Notes}),m()},C=j=>{g("Weapon",j)},A=i.map((j,N)=>({...j,Actions:f.jsx(AC,{row:j,index:N,onFireRound:s,onReload:o})}));return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Or,{title:"Add Ammunition Entry",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs(Z,{type:"select",value:c.Weapon==="__custom"?"__custom":c.Weapon,onChange:j=>{const N=j.target.value;N==="__custom"?p({...ap,Weapon:"__custom"}):(d("Weapon")(j),_(N))},children:[f.jsx("option",{value:"",children:"Select Weapon"}),f.jsx("optgroup",{label:"Your Weapons",children:a.map(j=>f.jsxs("option",{value:j.Weapon,children:[j.Weapon," (",j.Type,")"]},j.Weapon))}),f.jsx("optgroup",{label:"Traveller Weapons Database",children:v().filter(j=>j.magazine!==null).map(j=>f.jsxs("option",{value:j.name,children:[j.name," (",j.type,") - Mag: ",j.magazine]},j.name))}),f.jsx("optgroup",{label:"Custom",children:f.jsx("option",{value:"__custom",children:"Enter Custom Weapon"})})]}),c.Weapon==="__custom"&&f.jsx(Z,{placeholder:"Custom Weapon Name",value:"",onChange:j=>C(j.target.value)}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(Z,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:c["Ammo Type"],onChange:d("Ammo Type")}),f.jsx(Z,{type:"number",placeholder:"Magazine Size",value:c["Magazine Size"],onChange:d("Magazine Size")}),f.jsx(Z,{type:"number",placeholder:"Rounds Loaded",value:c["Rounds Loaded"],onChange:d("Rounds Loaded")}),f.jsx(Z,{type:"number",placeholder:"Spare Magazines",value:c["Spare Magazines"],onChange:d("Spare Magazines")}),f.jsx(Z,{type:"number",placeholder:"Loose Rounds",value:c["Loose Rounds"],onChange:d("Loose Rounds")}),f.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:c.Cost,onChange:d("Cost")}),f.jsx(Z,{placeholder:"Notes",value:c.Notes,onChange:d("Notes")})]})]}),f.jsx(ue,{className:"mt-2",onClick:x,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),f.jsx(jC,{content:f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),f.jsxs("ul",{className:"space-y-1 text-sm",children:[f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds  Spare magazines  Loose rounds"]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:f.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:f.jsx(ib,{className:"w-5 h-5"})})})]}),f.jsx(zn,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:A})]})}const rp={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function NC({rows:i,onAdd:a}){const{form:r,createInputHandler:s,resetForm:o,setForm:c}=Un(rp),{getAllWeapons:d,getWeaponTypes:m,getWeaponByName:g}=Ey(),[p,v]=S.useState("All"),b=x=>{if(!x||x===""){o();return}const C=g(x);if(C){const A=C.range_long?`${C.range} - ${C.range_long}`:C.range;c({Weapon:C.name,Type:C.type,Damage:C.damage,Range:A,Mass:C.mass.toString(),Cost:C.cost.toString(),Notes:C.notes})}},_=()=>{r.Weapon&&(a({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),o())};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Or,{title:"Add Weapon Entry",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs(Z,{type:"select",value:p,onChange:x=>v(x.target.value),children:[f.jsx("option",{value:"All",children:"All Rulebooks"}),f.jsx("option",{value:"Core Rulebook",children:"Core Rulebook"}),f.jsx("option",{value:"High Guard",children:"High Guard"}),f.jsx("option",{value:"Central Supply Catalogue",children:"Central Supply Catalogue"}),f.jsx("option",{value:"Mercenary",children:"Mercenary"}),f.jsx("option",{value:"Other",children:"Other"})]}),f.jsxs(Z,{type:"select",value:r.Weapon==="custom"?"custom":r.Weapon,onChange:x=>{x.target.value==="custom"?c({...rp,Weapon:"custom"}):(s("Weapon")(x),b(x.target.value))},children:[f.jsx("option",{value:"",children:"Select from Database or Enter Custom"}),f.jsx("optgroup",{label:"Traveller Weapons Database",children:d().filter(x=>p==="All"||x.source===p).map(x=>f.jsxs("option",{value:x.name,children:[x.name," (",x.type,") - ",x.cost," Cr"]},x.name))}),f.jsx("optgroup",{label:"Custom",children:f.jsx("option",{value:"custom",children:"Enter Custom Weapon"})})]}),r.Weapon==="custom"&&f.jsx(Z,{placeholder:"Custom Weapon Name",value:"",onChange:x=>{c({...r,Weapon:x.target.value})}}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsxs(Z,{type:"select",value:r.Type,onChange:s("Type"),children:[f.jsx("option",{value:"",children:"Select Type"}),m().map(x=>f.jsx("option",{value:x,children:x},x))]}),f.jsx(Z,{placeholder:"Damage (e.g., 3d6)",value:r.Damage,onChange:s("Damage")}),f.jsx(Z,{placeholder:"Range (e.g., 150m)",value:r.Range,onChange:s("Range")}),f.jsx(Z,{type:"number",placeholder:"Mass (kg)",value:r.Mass,onChange:s("Mass")}),f.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:s("Cost")}),f.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:s("Notes")})]})]}),f.jsx(ue,{className:"mt-2",onClick:_,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),f.jsx(zn,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:i.map(x=>({...x,Range:x.Range?`${x.Range}`:"",Mass:x.Mass?`${x.Mass} kg`:""}))})]})}const RC=[{name:"Jack",type:"Light",protection:1,mass:1,cost:50,tl:1,traits:[],notes:"Leather jacket or heavy clothing",source:"Core Rulebook"},{name:"Cloth",type:"Light",protection:5,mass:2,cost:250,tl:7,traits:[],notes:"Ballistic cloth armor",source:"Core Rulebook"},{name:"Mesh",type:"Light",protection:6,mass:2,cost:150,tl:6,traits:[],notes:"Flexible metal mesh",source:"Core Rulebook"},{name:"Flak Jacket",type:"Light",protection:7,mass:3,cost:100,tl:5,traits:["Bulky"],notes:"Heavy protective vest",source:"Core Rulebook"},{name:"Ablat",type:"Light",protection:3,mass:2,cost:75,tl:9,traits:["Ablative"],notes:"Ablative armor against energy weapons",source:"Core Rulebook"},{name:"Reflec",type:"Light",protection:10,protectionType:"vs lasers",mass:.5,cost:1500,tl:10,traits:["Laser Only"],notes:"Reflective coating, only protects vs lasers",source:"Core Rulebook"},{name:"Combat Armour (TL 11)",type:"Medium",protection:13,mass:6,cost:5e3,tl:11,traits:[],notes:"Military-grade powered armor",source:"Core Rulebook"},{name:"Combat Armour (TL 13)",type:"Medium",protection:15,mass:5,cost:8e3,tl:13,traits:[],notes:"Advanced military armor",source:"Core Rulebook"},{name:"Hostile Environment Vacc Suit",type:"Vacc Suit",protection:8,mass:12,cost:7e3,tl:8,traits:["Environment"],notes:"Protects against vacuum and hostile environments",source:"Core Rulebook"},{name:"Vacc Suit (Standard)",type:"Vacc Suit",protection:6,mass:10,cost:4e3,tl:8,traits:["Environment"],notes:"Standard vacuum protection",source:"Core Rulebook"},{name:"HEV Suit",type:"Vacc Suit",protection:8,mass:12,cost:9e3,tl:10,traits:["Environment","Sealed"],notes:"Hazardous Environment Vacc Suit",source:"Core Rulebook"},{name:"Battle Dress (TL 13)",type:"Heavy",protection:18,mass:20,cost:2e5,tl:13,traits:["Powered","Sealed","Environment"],notes:"Fully powered combat armor with life support",source:"Core Rulebook"},{name:"Battle Dress (TL 14)",type:"Heavy",protection:20,mass:18,cost:25e4,tl:14,traits:["Powered","Sealed","Environment"],notes:"Advanced powered armor",source:"Core Rulebook"},{name:"Boarding Armour",type:"Medium",protection:11,mass:8,cost:4500,tl:9,traits:["Zero-G"],notes:"Designed for ship boarding operations",source:"Core Rulebook"},{name:"Diplo Vest",type:"Light",protection:4,mass:.5,cost:500,tl:9,traits:["Concealed"],notes:"Easily concealed diplomatic protection",source:"Core Rulebook"},{name:"Hostile Environment Suit",type:"Environment",protection:6,mass:8,cost:3e3,tl:8,traits:["Environment","Sealed"],notes:"Protection from hostile atmospheres",source:"Core Rulebook"},{name:"NBC Suit",type:"Environment",protection:3,mass:4,cost:500,tl:6,traits:["NBC"],notes:"Nuclear, Biological, Chemical protection",source:"Core Rulebook"},{name:"Protec Suit",type:"Environment",protection:2,mass:3,cost:300,tl:5,traits:["NBC"],notes:"Basic hazmat protection",source:"Core Rulebook"},{name:"Shield",type:"Shield",protection:2,mass:2,cost:20,tl:1,traits:["Melee"],notes:"Personal shield, +2 vs melee attacks",source:"Core Rulebook"},{name:"Riot Shield",type:"Shield",protection:3,mass:3,cost:100,tl:5,traits:["Melee","Bulky"],notes:"Large shield for riot control",source:"Core Rulebook"},{name:"Combat Helmet",type:"Accessory",protection:2,mass:1,cost:100,tl:7,traits:[],notes:"Head protection only",source:"Core Rulebook"},{name:"Respirator",type:"Accessory",protection:0,mass:.5,cost:100,tl:6,traits:["Breathing"],notes:"Filters air, no armor value",source:"Core Rulebook"},{name:"Breather Mask",type:"Accessory",protection:0,mass:.2,cost:150,tl:8,traits:["Breathing"],notes:"Compact air filter",source:"Core Rulebook"},{name:"Skinsuit",type:"Undersuit",protection:0,mass:2,cost:200,tl:8,traits:[],notes:"Worn under armor, provides life support interface",source:"Core Rulebook"},{name:"TL 10 Cloth",type:"Light",protection:7,mass:1.5,cost:500,tl:10,traits:[],notes:"Advanced ballistic cloth",source:"Core Rulebook"},{name:"TL 12 Cloth",type:"Light",protection:9,mass:1,cost:1e3,tl:12,traits:[],notes:"High-tech ballistic protection",source:"Core Rulebook"},{name:"Boarding Vacc Suit",type:"Vacc Suit",protection:9,mass:10,cost:8e3,tl:10,traits:["Environment","Zero-G"],notes:"Armored vacc suit for combat",source:"Core Rulebook"},{name:"Thruster Pack",type:"Accessory",protection:0,mass:5,cost:2e3,tl:9,traits:["Zero-G"],notes:"Personal maneuvering in zero-G",source:"Core Rulebook"},{name:"Gravitic Compensator",type:"Accessory",protection:0,mass:6,cost:1e4,tl:12,traits:[],notes:"Reduces effective weight of armor",source:"Core Rulebook"}],TC=["Light","Medium","Heavy","Vacc Suit","Environment","Shield","Accessory","Undersuit"],kC={Ablative:"Degrades with use, protects better against energy weapons",Bulky:"Difficult to move in, may impose penalties",Concealed:"Can be hidden under normal clothing",Environment:"Protects against environmental hazards","Laser Only":"Only provides protection against laser weapons",Melee:"Provides bonus against melee attacks",NBC:"Protection against Nuclear, Biological, Chemical threats",Powered:"Powered armor system, enhances strength",Sealed:"Provides sealed environment","Zero-G":"Optimized for zero gravity operations",Breathing:"Provides air filtration or supply"},OC={armour:RC,armourTypes:TC,traits:kC};function DC(){const i=S.useMemo(()=>OC,[]);return{getAllArmour:()=>i.armour,getArmourByType:p=>i.armour.filter(v=>v.type===p),getArmourByName:p=>i.armour.find(v=>v.name===p),getArmourTypes:()=>i.armourTypes,getArmourByTechLevel:(p,v)=>i.armour.filter(b=>v!==void 0?b.tl>=p&&b.tl<=v:b.tl>=p),getTraitDescription:p=>i.traits[p],sortArmourByCost:(p=!0)=>{const v=[...i.armour].sort((b,_)=>b.cost-_.cost);return p?v:v.reverse()},sortArmourByProtection:(p=!0)=>{const v=[...i.armour].sort((b,_)=>b.protection-_.protection);return p?v:v.reverse()},armourTypes:i.armourTypes,traits:i.traits}}const _u={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function MC({rows:i,onAdd:a}){const{form:r,createInputHandler:s,resetForm:o,setForm:c}=Un(_u),{getAllArmour:d,getArmourTypes:m,getArmourByName:g}=DC(),[p,v]=S.useState("All"),b=x=>{if(!x||x===""){o();return}if(x==="custom"){c({..._u,Armour:"custom"});return}const C=g(x);if(C){const A=C.protectionType?`${C.protection} (${C.protectionType})`:C.protection.toString();c({Armour:C.name,Type:C.type,Protection:A,Mass:C.mass.toString(),Cost:C.cost.toString(),Notes:C.notes})}},_=()=>{r.Armour&&(a({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),o())};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Or,{title:"Add Armour Entry",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs(Z,{type:"select",value:p,onChange:x=>v(x.target.value),children:[f.jsx("option",{value:"All",children:"All Rulebooks"}),f.jsx("option",{value:"Core Rulebook",children:"Core Rulebook"}),f.jsx("option",{value:"High Guard",children:"High Guard"}),f.jsx("option",{value:"Central Supply Catalogue",children:"Central Supply Catalogue"}),f.jsx("option",{value:"Mercenary",children:"Mercenary"}),f.jsx("option",{value:"Other",children:"Other"})]}),f.jsxs(Z,{type:"select",value:r.Armour==="custom"?"custom":r.Armour,onChange:x=>{x.target.value==="custom"?c({..._u,Armour:"custom"}):(s("Armour")(x),b(x.target.value))},children:[f.jsx("option",{value:"",children:"Select from Database or Enter Custom"}),f.jsx("optgroup",{label:"Traveller Armour Database",children:d().filter(x=>p==="All"||x.source===p).map(x=>f.jsxs("option",{value:x.name,children:[x.name," (",x.type,") - Protection:"," ",x.protection," - ",x.cost," Cr"]},x.name))}),f.jsx("optgroup",{label:"Custom",children:f.jsx("option",{value:"custom",children:"Enter Custom Armour"})})]}),r.Armour==="custom"&&f.jsx(Z,{placeholder:"Custom Armour Name",value:"",onChange:x=>{c({...r,Armour:x.target.value})}}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsxs(Z,{type:"select",value:r.Type,onChange:s("Type"),children:[f.jsx("option",{value:"",children:"Select Type"}),m().map(x=>f.jsx("option",{value:x,children:x},x))]}),f.jsx(Z,{placeholder:"Protection (e.g., +5, 1d6+2)",value:r.Protection,onChange:s("Protection")}),f.jsx(Z,{placeholder:"Mass (kg)",value:r.Mass,onChange:s("Mass")}),f.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:s("Cost")}),f.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:s("Notes")})]})]}),f.jsx(ue,{className:"mt-2",onClick:_,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),f.jsx(zn,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:i.map(x=>({...x,Mass:x.Mass?`${x.Mass} kg`:""}))})]})}function zC({campaignId:i,selectedPc:a,onPcChange:r,characterBalance:s,characterFinance:o,characterInventory:c,characterAmmo:d,characterWeapons:m,characterArmour:g,onUpdateFinance:p,onAddInventory:v,onAddAmmo:b,onAddWeapon:_,onAddArmour:x,onFireRound:C,onReloadWeapon:A}){const[j,N]=S.useState("ledger"),{characters:T,loading:O,error:H}=Rn(i),F=T.find(V=>V.displayName===a);return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("select",{className:"select",value:a,onChange:V=>r(V.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:O,children:O?f.jsx("option",{children:"Loading characters..."}):T.map(V=>f.jsx("option",{value:V.displayName,children:V.displayName},V.id))}),H&&f.jsx("span",{className:"text-xs text-yellow-600",title:H,children:" Offline mode"}),f.jsx("div",{className:"text-sm",children:f.jsxs("span",{"aria-label":`Current character balance: ${An(s)}`,children:["Current Balance:"," ",f.jsx("span",{className:"font-semibold",children:An(s)})]})})]}),F&&F.id.startsWith("character-")&&f.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",F.playerName," | Character:"," ",F.characterName]}),f.jsx(Ay,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:j,onChange:V=>N(V)}),j==="ledger"&&f.jsx(wC,{pc:a,rows:o,onAdd:V=>p(a,V)}),j==="inventory"&&f.jsx(CC,{rows:c,onAdd:V=>v(a,V)}),j==="weapons"&&f.jsx(NC,{rows:m,onAdd:V=>_(a,V)}),j==="armour"&&f.jsx(MC,{rows:g,onAdd:V=>x(a,V)}),j==="ammo"&&f.jsx(EC,{rows:d,weapons:m,onAdd:V=>b(a,V),onFireRound:V=>C?.(a,V),onReload:V=>A?.(a,V)})]})}function UC({campaignId:i,activeTab:a,partyFinances:r,shipFinances:s,shipCargo:o,characterFinance:c,characterInventory:d,characterWeapons:m,characterArmour:g,characterAmmo:p,selectedCharacterDisplayName:v,characterBalance:b,onCharacterChange:_,onUpdatePartyFinances:x,onUpdateShipAccounts:C,onAddCargoLeg:A,onUpdateCharacterFinance:j,onAddCharacterInventory:N,onAddCharacterAmmo:T,onAddCharacterWeapon:O,onAddCharacterArmour:H,onFireRound:F,onReloadWeapon:V}){return f.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${a}`,id:`tabpanel-${a}`,children:[a==="party"&&f.jsx(Lu,{title:"Party",rows:r,onUpdate:x,fundName:"Party Fund",initialBalance:0,showSummary:!0}),a==="ship"&&f.jsx(Lu,{title:"Ship",rows:s,onUpdate:C,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),a==="cargo"&&f.jsx(bC,{rows:o,onAdd:A}),a==="characters"&&f.jsx(zC,{campaignId:i,selectedPc:v,onPcChange:_,characterBalance:b,characterFinance:c,characterInventory:d,characterAmmo:p,characterWeapons:m,characterArmour:g,onUpdateFinance:j,onAddInventory:N,onAddAmmo:T,onAddWeapon:O,onAddArmour:H,onFireRound:F,onReloadWeapon:V})]})}function BC(){const{campaignId:i}=Qb(),a=Ml(),[r,s]=S.useState("party"),{characters:o}=Rn(i||""),[c,d]=S.useState(""),m=c||o[0]?.displayName||"",g=S.useMemo(()=>o.find(Ee=>Ee.displayName===m)?.id,[o,m]),{partyFinances:p,shipFinances:v,shipCargo:b,updatePartyFinances:_,updateShipAccounts:x,addCargoLeg:C}=lC(i),{finance:A,inventory:j,weapons:N,armour:T,ammo:O,updateFinance:H,addInventory:F,addAmmo:V,addWeapon:te,addArmour:Y,fireRound:P,reloadWeapon:K}=oC(g),{state:ce,setState:oe}=iC(),Q=S.useMemo(()=>m?{[m]:{Finance:A,Inventory:j,Weapons:N,Armour:T,Ammo:O}}:{},[m,A,j,N,T,O]),I=fC({Party_Finances:p,Ship_Accounts:v,PCs:Q},m),{handleImport:de,handleExport:B}=mC(oe,ce),G=(Se,Ee)=>{H(Ee)},X=(Se,Ee)=>{F(Ee)},xe=(Se,Ee)=>{V(Ee)},we=(Se,Ee)=>{te(Ee)},Ue=(Se,Ee)=>{Y(Ee)},Re=(Se,Ee)=>{P(Ee)},ye=(Se,Ee)=>{K(Ee)};return i?f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>a("/"),className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:" Back to Campaigns"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",i]})]})]})})}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx(gC,{onImport:de,onExport:B}),f.jsx(yC,{partyBalance:I.party,shipBalance:I.ship,cargoLegsCount:b.length,characterCount:o.length}),f.jsx(Ay,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:Se=>s(Se)}),f.jsx(UC,{campaignId:i||"",activeTab:r,partyFinances:p,shipFinances:v,shipCargo:b,characterFinance:A,characterInventory:j,characterWeapons:N,characterArmour:T,characterAmmo:O,selectedCharacterDisplayName:m,characterBalance:I.character,onCharacterChange:d,onUpdatePartyFinances:_,onUpdateShipAccounts:x,onAddCargoLeg:C,onUpdateCharacterFinance:G,onAddCharacterInventory:X,onAddCharacterAmmo:xe,onAddCharacterWeapon:we,onAddCharacterArmour:Ue,onFireRound:Re,onReloadWeapon:ye})]})]}):(a("/"),null)}function LC(){const{user:i,loading:a,completeProfile:r}=Ea();return wS(),a?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):i?i.profileCompleted?f.jsxs(ux,{children:[f.jsx(xl,{path:"/",element:f.jsx(tC,{})}),f.jsx(xl,{path:"/campaign/:campaignId",element:f.jsx(BC,{})}),f.jsx(xl,{path:"*",element:f.jsx(ox,{to:"/",replace:!0})})]}):f.jsx(RS,{onComplete:r}):f.jsx(CS,{})}function qC(){return f.jsx(Dx,{basename:"/traveller-dashboard",children:f.jsx(LC,{})})}class PC extends op.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,r){console.error("Error boundary caught an error:",a,r)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:f.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[f.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),f.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),f.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),f.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const Ny=document.getElementById("root");if(!Ny)throw new Error("Failed to find the root element");vb.createRoot(Ny).render(f.jsx(op.StrictMode,{children:f.jsx(PC,{children:f.jsx(qC,{})})}));export{Wg as D,Bu as _};
