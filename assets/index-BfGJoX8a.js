const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-B5CGZNLg.js","assets/icons-Bw6bOHsG.js","assets/excel-Du8kUxR_.js","assets/vendor-Dfoqj1Wf.js"])))=>i.map(i=>d[i]);
import{r as R,U as As,X as Im,P as il,a as Es,T as kr,b as ll,C as Wy,S as Wm,L as Fy,c as ep,d as fm,M as tp,E as Ro,e as ko,R as ap,f as np,g as sp,h as rp,i as ip,D as lp,j as cp,k as Fm}from"./icons-Bw6bOHsG.js";import{g as eg,a as op}from"./excel-Du8kUxR_.js";import{r as up,a as dp}from"./vendor-Dfoqj1Wf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();var Uo={exports:{}},Cr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function fp(){if(hm)return Cr;hm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var g in c)g!=="key"&&(u[g]=c[g])}else u=c;return c=u.ref,{$$typeof:o,type:i,key:h,ref:c!==void 0?c:null,props:u}}return Cr.Fragment=n,Cr.jsx=r,Cr.jsxs=r,Cr}var mm;function hp(){return mm||(mm=1,Uo.exports=fp()),Uo.exports}var f=hp(),zo={exports:{}},Ar={},Mo={exports:{}},Do={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function mp(){return gm||(gm=1,(function(o){function n(M,H){var X=M.length;M.push(H);e:for(;0<X;){var ye=X-1>>>1,_e=M[ye];if(0<c(_e,H))M[ye]=H,M[X]=_e,X=ye;else break e}}function r(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var H=M[0],X=M.pop();if(X!==H){M[0]=X;e:for(var ye=0,_e=M.length,ke=_e>>>1;ye<ke;){var Ee=2*(ye+1)-1,ge=M[Ee],ze=Ee+1,ct=M[ze];if(0>c(ge,X))ze<_e&&0>c(ct,ge)?(M[ye]=ct,M[ze]=X,ye=ze):(M[ye]=ge,M[Ee]=X,ye=Ee);else if(ze<_e&&0>c(ct,X))M[ye]=ct,M[ze]=X,ye=ze;else break e}}return H}function c(M,H){var X=M.sortIndex-H.sortIndex;return X!==0?X:M.id-H.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();o.unstable_now=function(){return h.now()-g}}var y=[],p=[],x=1,b=null,_=3,w=!1,j=!1,N=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function V(M){for(var H=r(p);H!==null;){if(H.callback===null)i(p);else if(H.startTime<=M)i(p),H.sortIndex=H.expirationTime,n(y,H);else break;H=r(p)}}function Y(M){if(N=!1,V(M),!j)if(r(y)!==null)j=!0,G||(G=!0,be());else{var H=r(p);H!==null&&Ie(Y,H.startTime-M)}}var G=!1,F=-1,le=5,Z=-1;function oe(){return U?!0:!(o.unstable_now()-Z<le)}function se(){if(U=!1,G){var M=o.unstable_now();Z=M;var H=!0;try{e:{j=!1,N&&(N=!1,L(F),F=-1),w=!0;var X=_;try{t:{for(V(M),b=r(y);b!==null&&!(b.expirationTime>M&&oe());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,_=b.priorityLevel;var _e=ye(b.expirationTime<=M);if(M=o.unstable_now(),typeof _e=="function"){b.callback=_e,V(M),H=!0;break t}b===r(y)&&i(y),V(M)}else i(y);b=r(y)}if(b!==null)H=!0;else{var ke=r(p);ke!==null&&Ie(Y,ke.startTime-M),H=!1}}break e}finally{b=null,_=X,w=!1}H=void 0}}finally{H?be():G=!1}}}var be;if(typeof q=="function")be=function(){q(se)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,lt=nt.port2;nt.port1.onmessage=se,be=function(){lt.postMessage(null)}}else be=function(){$(se,0)};function Ie(M,H){F=$(function(){M(o.unstable_now())},H)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(M){M.callback=null},o.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<M?Math.floor(1e3/M):5},o.unstable_getCurrentPriorityLevel=function(){return _},o.unstable_next=function(M){switch(_){case 1:case 2:case 3:var H=3;break;default:H=_}var X=_;_=H;try{return M()}finally{_=X}},o.unstable_requestPaint=function(){U=!0},o.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=_;_=M;try{return H()}finally{_=X}},o.unstable_scheduleCallback=function(M,H,X){var ye=o.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,M){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=X+_e,M={id:x++,callback:H,priorityLevel:M,startTime:X,expirationTime:_e,sortIndex:-1},X>ye?(M.sortIndex=X,n(p,M),r(y)===null&&M===r(p)&&(N?(L(F),F=-1):N=!0,Ie(Y,X-ye))):(M.sortIndex=_e,n(y,M),j||w||(j=!0,G||(G=!0,be()))),M},o.unstable_shouldYield=oe,o.unstable_wrapCallback=function(M){var H=_;return function(){var X=_;_=H;try{return M.apply(this,arguments)}finally{_=X}}}})(Do)),Do}var ym;function gp(){return ym||(ym=1,Mo.exports=mp()),Mo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function yp(){if(pm)return Ar;pm=1;var o=gp(),n=up(),r=dp();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(u(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var l=a.return;if(l===null)break;var d=l.alternate;if(d===null){if(s=l.return,s!==null){a=s;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===a)return y(l),e;if(d===s)return y(l),t;d=d.sibling}throw Error(i(188))}if(a.return!==s.return)a=l,s=d;else{for(var m=!1,v=l.child;v;){if(v===a){m=!0,a=l,s=d;break}if(v===s){m=!0,s=l,a=d;break}v=v.sibling}if(!m){for(v=d.child;v;){if(v===a){m=!0,a=d,s=l;break}if(v===s){m=!0,s=d,a=l;break}v=v.sibling}if(!m)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Symbol.for("react.client.reference");function lt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===nt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case $:return"Profiler";case U:return"StrictMode";case Y:return"Suspense";case G:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case q:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:lt(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return lt(e(t))}catch{}}return null}var Ie=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ye=[],_e=-1;function ke(e){return{current:e}}function Ee(e){0>_e||(e.current=ye[_e],ye[_e]=null,_e--)}function ge(e,t){_e++,ye[_e]=e.current,e.current=t}var ze=ke(null),ct=ke(null),Nt=ke(null),Xe=ke(null);function qt(e,t){switch(ge(Nt,t),ge(ct,e),ge(ze,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mh(t),e=Dh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ee(ze),ge(ze,e)}function Ht(){Ee(ze),Ee(ct),Ee(Nt)}function ya(e){e.memoizedState!==null&&ge(Xe,e);var t=ze.current,a=Dh(t,e.type);t!==a&&(ge(ct,e),ge(ze,a))}function pa(e){ct.current===e&&(Ee(ze),Ee(ct)),Xe.current===e&&(Ee(Xe),_r._currentValue=X)}var Ia,Q;function ce(e){if(Ia===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ia=t&&t[1]||"",Q=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ia+e+Q}var st=!1;function An(e,t){if(!e||st)return"";st=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(k){var O=k}Reflect.construct(e,[],B)}else{try{B.call()}catch(k){O=k}e.call(B.prototype)}}else{try{throw Error()}catch(k){O=k}(B=e())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(k){if(k&&O&&typeof k.stack=="string")return[k.stack,O.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),m=d[0],v=d[1];if(m&&v){var S=m.split(`
`),T=v.split(`
`);for(l=s=0;s<S.length&&!S[s].includes("DetermineComponentFrameRoot");)s++;for(;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;if(s===S.length||l===T.length)for(s=S.length-1,l=T.length-1;1<=s&&0<=l&&S[s]!==T[l];)l--;for(;1<=s&&0<=l;s--,l--)if(S[s]!==T[l]){if(s!==1||l!==1)do if(s--,l--,0>l||S[s]!==T[l]){var z=`
`+S[s].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=s&&0<=l);break}}}finally{st=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ce(a):""}function uu(e,t){switch(e.tag){case 26:case 27:case 5:return ce(e.type);case 16:return ce("Lazy");case 13:return e.child!==t&&t!==null?ce("Suspense Fallback"):ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return An(e.type,!1);case 11:return An(e.type.render,!1);case 1:return An(e.type,!0);case 31:return ce("Activity");default:return""}}function du(e){try{var t="",a=null;do t+=uu(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var gl=Object.prototype.hasOwnProperty,yl=o.unstable_scheduleCallback,pl=o.unstable_cancelCallback,Og=o.unstable_shouldYield,Rg=o.unstable_requestPaint,pt=o.unstable_now,kg=o.unstable_getCurrentPriorityLevel,fu=o.unstable_ImmediatePriority,hu=o.unstable_UserBlockingPriority,Dr=o.unstable_NormalPriority,Ug=o.unstable_LowPriority,mu=o.unstable_IdlePriority,zg=o.log,Mg=o.unstable_setDisableYieldValue,Us=null,vt=null;function va(e){if(typeof zg=="function"&&Mg(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Us,e)}catch{}}var bt=Math.clz32?Math.clz32:Lg,Dg=Math.log,Bg=Math.LN2;function Lg(e){return e>>>=0,e===0?32:31-(Dg(e)/Bg|0)|0}var Br=256,Lr=262144,qr=4194304;function Wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hr(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var l=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var v=s&134217727;return v!==0?(s=v&~d,s!==0?l=Wa(s):(m&=v,m!==0?l=Wa(m):a||(a=v&~e,a!==0&&(l=Wa(a))))):(v=s&~d,v!==0?l=Wa(v):m!==0?l=Wa(m):a||(a=s&~e,a!==0&&(l=Wa(a)))),l===0?0:t!==0&&t!==l&&(t&d)===0&&(d=l&-l,a=t&-t,d>=a||d===32&&(a&4194048)!==0)?t:l}function zs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function qg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gu(){var e=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),e}function vl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ms(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hg(e,t,a,s,l,d){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,T=e.hiddenUpdates;for(a=m&~a;0<a;){var z=31-bt(a),B=1<<z;v[z]=0,S[z]=-1;var O=T[z];if(O!==null)for(T[z]=null,z=0;z<O.length;z++){var k=O[z];k!==null&&(k.lane&=-536870913)}a&=~B}s!==0&&yu(e,s,0),d!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~t))}function yu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-bt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function pu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-bt(a),l=1<<s;l&t|e[s]&t&&(e[s]|=t),a&=~l}}function vu(e,t){var a=t&-t;return a=(a&42)!==0?1:bl(a),(a&(e.suspendedLanes|t))!==0?0:a}function bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bu(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:rm(e.type))}function xu(e,t){var a=H.p;try{return H.p=e,t()}finally{H.p=a}}var ba=Math.random().toString(36).slice(2),We="__reactFiber$"+ba,ot="__reactProps$"+ba,En="__reactContainer$"+ba,_l="__reactEvents$"+ba,Gg="__reactListeners$"+ba,$g="__reactHandles$"+ba,_u="__reactResources$"+ba,Ds="__reactMarker$"+ba;function wl(e){delete e[We],delete e[ot],delete e[_l],delete e[Gg],delete e[$g]}function Nn(e){var t=e[We];if(t)return t;for(var a=e.parentNode;a;){if(t=a[En]||a[We]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Vh(e);e!==null;){if(a=e[We])return a;e=Vh(e)}return t}e=a,a=e.parentNode}return null}function Tn(e){if(e=e[We]||e[En]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Bs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function On(e){var t=e[_u];return t||(t=e[_u]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[Ds]=!0}var wu=new Set,Su={};function Fa(e,t){Rn(e,t),Rn(e+"Capture",t)}function Rn(e,t){for(Su[e]=t,e=0;e<t.length;e++)wu.add(t[e])}var Vg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ju={},Cu={};function Yg(e){return gl.call(Cu,e)?!0:gl.call(ju,e)?!1:Vg.test(e)?Cu[e]=!0:(ju[e]=!0,!1)}function Gr(e,t,a){if(Yg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function $r(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function It(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Tt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Au(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qg(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,d=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){a=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sl(e){if(!e._valueTracker){var t=Au(e)?"checked":"value";e._valueTracker=Qg(e,t,""+e[t])}}function Eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Au(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kg=/[\n"\\]/g;function Ot(e){return e.replace(Kg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function jl(e,t,a,s,l,d,m,v){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Tt(t)):e.value!==""+Tt(t)&&(e.value=""+Tt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Cl(e,m,Tt(t)):a!=null?Cl(e,m,Tt(a)):s!=null&&e.removeAttribute("value"),l==null&&d!=null&&(e.defaultChecked=!!d),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Tt(v):e.removeAttribute("name")}function Nu(e,t,a,s,l,d,m,v){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Sl(e);return}a=a!=null?""+Tt(a):"",t=t!=null?""+Tt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=v?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Sl(e)}function Cl(e,t,a){t==="number"&&Vr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function kn(e,t,a,s){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Tt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Tu(e,t,a){if(t!=null&&(t=""+Tt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Tt(a):""}function Ou(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(i(92));if(Ie(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Tt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Sl(e)}function Un(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Xg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ru(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Xg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ku(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&a[l]!==s&&Ru(e,l,s)}else for(var d in t)t.hasOwnProperty(d)&&Ru(e,d,t[d])}function Al(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yr(e){return Zg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Wt(){}var El=null;function Nl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zn=null,Mn=null;function Uu(e){var t=Tn(e);if(t&&(e=t.stateNode)){var a=e[ot]||null;e:switch(e=t.stateNode,t.type){case"input":if(jl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ot(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var l=s[ot]||null;if(!l)throw Error(i(90));jl(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Eu(s)}break e;case"textarea":Tu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&kn(e,!!a.multiple,t,!1)}}}var Tl=!1;function zu(e,t,a){if(Tl)return e(t,a);Tl=!0;try{var s=e(t);return s}finally{if(Tl=!1,(zn!==null||Mn!==null)&&(Ri(),zn&&(t=zn,e=Mn,Mn=zn=null,Uu(t),e)))for(t=0;t<e.length;t++)Uu(e[t])}}function Ls(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ot]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=!1;if(Ft)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){Ol=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{Ol=!1}var xa=null,Rl=null,Qr=null;function Mu(){if(Qr)return Qr;var e,t=Rl,a=t.length,s,l="value"in xa?xa.value:xa.textContent,d=l.length;for(e=0;e<a&&t[e]===l[e];e++);var m=a-e;for(s=1;s<=m&&t[a-s]===l[d-s];s++);return Qr=l.slice(e,1<s?1-s:void 0)}function Kr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xr(){return!0}function Du(){return!1}function ut(e){function t(a,s,l,d,m){this._reactName=a,this._targetInst=l,this.type=s,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Xr:Du,this.isPropagationStopped=Du,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),t}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jr=ut(en),Hs=b({},en,{view:0,detail:0}),Pg=ut(Hs),kl,Ul,Gs,Zr=b({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ml,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gs&&(Gs&&e.type==="mousemove"?(kl=e.screenX-Gs.screenX,Ul=e.screenY-Gs.screenY):Ul=kl=0,Gs=e),kl)},movementY:function(e){return"movementY"in e?e.movementY:Ul}}),Bu=ut(Zr),Ig=b({},Zr,{dataTransfer:0}),Wg=ut(Ig),Fg=b({},Hs,{relatedTarget:0}),zl=ut(Fg),e0=b({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),t0=ut(e0),a0=b({},en,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n0=ut(a0),s0=b({},en,{data:0}),Lu=ut(s0),r0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l0[e])?!!t[e]:!1}function Ml(){return c0}var o0=b({},Hs,{key:function(e){if(e.key){var t=r0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ml,charCode:function(e){return e.type==="keypress"?Kr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u0=ut(o0),d0=b({},Zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=ut(d0),f0=b({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ml}),h0=ut(f0),m0=b({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),g0=ut(m0),y0=b({},Zr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),p0=ut(y0),v0=b({},en,{newState:0,oldState:0}),b0=ut(v0),x0=[9,13,27,32],Dl=Ft&&"CompositionEvent"in window,$s=null;Ft&&"documentMode"in document&&($s=document.documentMode);var _0=Ft&&"TextEvent"in window&&!$s,Hu=Ft&&(!Dl||$s&&8<$s&&11>=$s),Gu=" ",$u=!1;function Vu(e,t){switch(e){case"keyup":return x0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dn=!1;function w0(e,t){switch(e){case"compositionend":return Yu(t);case"keypress":return t.which!==32?null:($u=!0,Gu);case"textInput":return e=t.data,e===Gu&&$u?null:e;default:return null}}function S0(e,t){if(Dn)return e==="compositionend"||!Dl&&Vu(e,t)?(e=Mu(),Qr=Rl=xa=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hu&&t.locale!=="ko"?null:t.data;default:return null}}var j0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!j0[e.type]:t==="textarea"}function Ku(e,t,a,s){zn?Mn?Mn.push(s):Mn=[s]:zn=s,t=Li(t,"onChange"),0<t.length&&(a=new Jr("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Vs=null,Ys=null;function C0(e){Th(e,0)}function Pr(e){var t=Bs(e);if(Eu(t))return e}function Xu(e,t){if(e==="change")return t}var Ju=!1;if(Ft){var Bl;if(Ft){var Ll="oninput"in document;if(!Ll){var Zu=document.createElement("div");Zu.setAttribute("oninput","return;"),Ll=typeof Zu.oninput=="function"}Bl=Ll}else Bl=!1;Ju=Bl&&(!document.documentMode||9<document.documentMode)}function Pu(){Vs&&(Vs.detachEvent("onpropertychange",Iu),Ys=Vs=null)}function Iu(e){if(e.propertyName==="value"&&Pr(Ys)){var t=[];Ku(t,Ys,e,Nl(e)),zu(C0,t)}}function A0(e,t,a){e==="focusin"?(Pu(),Vs=t,Ys=a,Vs.attachEvent("onpropertychange",Iu)):e==="focusout"&&Pu()}function E0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pr(Ys)}function N0(e,t){if(e==="click")return Pr(t)}function T0(e,t){if(e==="input"||e==="change")return Pr(t)}function O0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:O0;function Qs(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var l=a[s];if(!gl.call(t,l)||!xt(e[l],t[l]))return!1}return!0}function Wu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fu(e,t){var a=Wu(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wu(a)}}function ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function td(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Vr(e.document)}return t}function ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var R0=Ft&&"documentMode"in document&&11>=document.documentMode,Bn=null,Hl=null,Ks=null,Gl=!1;function ad(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gl||Bn==null||Bn!==Vr(s)||(s=Bn,"selectionStart"in s&&ql(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ks&&Qs(Ks,s)||(Ks=s,s=Li(Hl,"onSelect"),0<s.length&&(t=new Jr("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Bn)))}function tn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ln={animationend:tn("Animation","AnimationEnd"),animationiteration:tn("Animation","AnimationIteration"),animationstart:tn("Animation","AnimationStart"),transitionrun:tn("Transition","TransitionRun"),transitionstart:tn("Transition","TransitionStart"),transitioncancel:tn("Transition","TransitionCancel"),transitionend:tn("Transition","TransitionEnd")},$l={},nd={};Ft&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete Ln.animationend.animation,delete Ln.animationiteration.animation,delete Ln.animationstart.animation),"TransitionEvent"in window||delete Ln.transitionend.transition);function an(e){if($l[e])return $l[e];if(!Ln[e])return e;var t=Ln[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in nd)return $l[e]=t[a];return e}var sd=an("animationend"),rd=an("animationiteration"),id=an("animationstart"),k0=an("transitionrun"),U0=an("transitionstart"),z0=an("transitioncancel"),ld=an("transitionend"),cd=new Map,Vl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vl.push("scrollEnd");function Gt(e,t){cd.set(e,t),Fa(t,[e])}var Ir=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rt=[],qn=0,Yl=0;function Wr(){for(var e=qn,t=Yl=qn=0;t<e;){var a=Rt[t];Rt[t++]=null;var s=Rt[t];Rt[t++]=null;var l=Rt[t];Rt[t++]=null;var d=Rt[t];if(Rt[t++]=null,s!==null&&l!==null){var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}d!==0&&od(a,l,d)}}function Fr(e,t,a,s){Rt[qn++]=e,Rt[qn++]=t,Rt[qn++]=a,Rt[qn++]=s,Yl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ql(e,t,a,s){return Fr(e,t,a,s),ei(e)}function nn(e,t){return Fr(e,null,null,t),ei(e)}function od(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var l=!1,d=e.return;d!==null;)d.childLanes|=a,s=d.alternate,s!==null&&(s.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(l=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,l&&t!==null&&(l=31-bt(a),e=d.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=a|536870912),d):null}function ei(e){if(50<mr)throw mr=0,eo=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hn={};function M0(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,a,s){return new M0(e,t,a,s)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,t){var a=e.alternate;return a===null?(a=_t(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ud(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ti(e,t,a,s,l,d){var m=0;if(s=e,typeof e=="function")Kl(e)&&(m=1);else if(typeof e=="string")m=Hy(e,a,ze.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=_t(31,a,t,l),e.elementType=Z,e.lanes=d,e;case N:return sn(a.children,l,d,t);case U:m=8,l|=24;break;case $:return e=_t(12,a,t,l|2),e.elementType=$,e.lanes=d,e;case Y:return e=_t(13,a,t,l),e.elementType=Y,e.lanes=d,e;case G:return e=_t(19,a,t,l),e.elementType=G,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:m=10;break e;case L:m=9;break e;case V:m=11;break e;case F:m=14;break e;case le:m=16,s=null;break e}m=29,a=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=_t(m,a,t,l),t.elementType=e,t.type=s,t.lanes=d,t}function sn(e,t,a,s){return e=_t(7,e,s,t),e.lanes=a,e}function Xl(e,t,a){return e=_t(6,e,null,t),e.lanes=a,e}function dd(e){var t=_t(18,null,null,0);return t.stateNode=e,t}function Jl(e,t,a){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fd=new WeakMap;function kt(e,t){if(typeof e=="object"&&e!==null){var a=fd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:du(t)},fd.set(e,t),t)}return{value:e,source:t,stack:du(t)}}var Gn=[],$n=0,ai=null,Xs=0,Ut=[],zt=0,_a=null,Kt=1,Xt="";function ta(e,t){Gn[$n++]=Xs,Gn[$n++]=ai,ai=e,Xs=t}function hd(e,t,a){Ut[zt++]=Kt,Ut[zt++]=Xt,Ut[zt++]=_a,_a=e;var s=Kt;e=Xt;var l=32-bt(s)-1;s&=~(1<<l),a+=1;var d=32-bt(t)+l;if(30<d){var m=l-l%5;d=(s&(1<<m)-1).toString(32),s>>=m,l-=m,Kt=1<<32-bt(t)+l|a<<l|s,Xt=d+e}else Kt=1<<d|a<<l|s,Xt=e}function Zl(e){e.return!==null&&(ta(e,1),hd(e,1,0))}function Pl(e){for(;e===ai;)ai=Gn[--$n],Gn[$n]=null,Xs=Gn[--$n],Gn[$n]=null;for(;e===_a;)_a=Ut[--zt],Ut[zt]=null,Xt=Ut[--zt],Ut[zt]=null,Kt=Ut[--zt],Ut[zt]=null}function md(e,t){Ut[zt++]=Kt,Ut[zt++]=Xt,Ut[zt++]=_a,Kt=t.id,Xt=t.overflow,_a=e}var Fe=null,Oe=null,me=!1,wa=null,Mt=!1,Il=Error(i(519));function Sa(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Js(kt(t,e)),Il}function gd(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[We]=e,t[ot]=s,a){case"dialog":de("cancel",t),de("close",t);break;case"iframe":case"object":case"embed":de("load",t);break;case"video":case"audio":for(a=0;a<yr.length;a++)de(yr[a],t);break;case"source":de("error",t);break;case"img":case"image":case"link":de("error",t),de("load",t);break;case"details":de("toggle",t);break;case"input":de("invalid",t),Nu(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":de("invalid",t);break;case"textarea":de("invalid",t),Ou(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Uh(t.textContent,a)?(s.popover!=null&&(de("beforetoggle",t),de("toggle",t)),s.onScroll!=null&&de("scroll",t),s.onScrollEnd!=null&&de("scrollend",t),s.onClick!=null&&(t.onclick=Wt),t=!0):t=!1,t||Sa(e,!0)}function yd(e){for(Fe=e.return;Fe;)switch(Fe.tag){case 5:case 31:case 13:Mt=!1;return;case 27:case 3:Mt=!0;return;default:Fe=Fe.return}}function Vn(e){if(e!==Fe)return!1;if(!me)return yd(e),me=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||yo(e.type,e.memoizedProps)),a=!a),a&&Oe&&Sa(e),yd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Oe=$h(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Oe=$h(e)}else t===27?(t=Oe,Ba(e.type)?(e=_o,_o=null,Oe=e):Oe=t):Oe=Fe?Bt(e.stateNode.nextSibling):null;return!0}function rn(){Oe=Fe=null,me=!1}function Wl(){var e=wa;return e!==null&&(mt===null?mt=e:mt.push.apply(mt,e),wa=null),e}function Js(e){wa===null?wa=[e]:wa.push(e)}var Fl=ke(null),ln=null,aa=null;function ja(e,t,a){ge(Fl,t._currentValue),t._currentValue=a}function na(e){e._currentValue=Fl.current,Ee(Fl)}function ec(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function tc(e,t,a,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var d=l.dependencies;if(d!==null){var m=l.child;d=d.firstContext;e:for(;d!==null;){var v=d;d=l;for(var S=0;S<t.length;S++)if(v.context===t[S]){d.lanes|=a,v=d.alternate,v!==null&&(v.lanes|=a),ec(d.return,a,e),s||(m=null);break e}d=v.next}}else if(l.tag===18){if(m=l.return,m===null)throw Error(i(341));m.lanes|=a,d=m.alternate,d!==null&&(d.lanes|=a),ec(m,a,e),m=null}else m=l.child;if(m!==null)m.return=l;else for(m=l;m!==null;){if(m===e){m=null;break}if(l=m.sibling,l!==null){l.return=m.return,m=l;break}m=m.return}l=m}}function Yn(e,t,a,s){e=null;for(var l=t,d=!1;l!==null;){if(!d){if((l.flags&524288)!==0)d=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var m=l.alternate;if(m===null)throw Error(i(387));if(m=m.memoizedProps,m!==null){var v=l.type;xt(l.pendingProps.value,m.value)||(e!==null?e.push(v):e=[v])}}else if(l===Xe.current){if(m=l.alternate,m===null)throw Error(i(387));m.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(_r):e=[_r])}l=l.return}e!==null&&tc(t,e,a,s),t.flags|=262144}function ni(e){for(e=e.firstContext;e!==null;){if(!xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cn(e){ln=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function et(e){return pd(ln,e)}function si(e,t){return ln===null&&cn(e),pd(e,t)}function pd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},aa===null){if(e===null)throw Error(i(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return a}var D0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},B0=o.unstable_scheduleCallback,L0=o.unstable_NormalPriority,qe={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ac(){return{controller:new D0,data:new Map,refCount:0}}function Zs(e){e.refCount--,e.refCount===0&&B0(L0,function(){e.controller.abort()})}var Ps=null,nc=0,Qn=0,Kn=null;function q0(e,t){if(Ps===null){var a=Ps=[];nc=0,Qn=io(),Kn={status:"pending",value:void 0,then:function(s){a.push(s)}}}return nc++,t.then(vd,vd),t}function vd(){if(--nc===0&&Ps!==null){Kn!==null&&(Kn.status="fulfilled");var e=Ps;Ps=null,Qn=0,Kn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function H0(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),s}var bd=M.S;M.S=function(e,t){nh=pt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&q0(e,t),bd!==null&&bd(e,t)};var on=ke(null);function sc(){var e=on.current;return e!==null?e:Ne.pooledCache}function ri(e,t){t===null?ge(on,on.current):ge(on,t.pool)}function xd(){var e=sc();return e===null?null:{parent:qe._currentValue,pool:e}}var Xn=Error(i(460)),rc=Error(i(474)),ii=Error(i(542)),li={then:function(){}};function _d(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Wt,Wt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jd(e),e;default:if(typeof t.status=="string")t.then(Wt,Wt);else{if(e=Ne,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jd(e),e}throw dn=t,Xn}}function un(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(dn=a,Xn):a}}var dn=null;function Sd(){if(dn===null)throw Error(i(459));var e=dn;return dn=null,e}function jd(e){if(e===Xn||e===ii)throw Error(i(483))}var Jn=null,Is=0;function ci(e){var t=Is;return Is+=1,Jn===null&&(Jn=[]),wd(Jn,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function oi(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Cd(e){function t(A,C){if(e){var E=A.deletions;E===null?(A.deletions=[C],A.flags|=16):E.push(C)}}function a(A,C){if(!e)return null;for(;C!==null;)t(A,C),C=C.sibling;return null}function s(A){for(var C=new Map;A!==null;)A.key!==null?C.set(A.key,A):C.set(A.index,A),A=A.sibling;return C}function l(A,C){return A=ea(A,C),A.index=0,A.sibling=null,A}function d(A,C,E){return A.index=E,e?(E=A.alternate,E!==null?(E=E.index,E<C?(A.flags|=67108866,C):E):(A.flags|=67108866,C)):(A.flags|=1048576,C)}function m(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function v(A,C,E,D){return C===null||C.tag!==6?(C=Xl(E,A.mode,D),C.return=A,C):(C=l(C,E),C.return=A,C)}function S(A,C,E,D){var I=E.type;return I===N?z(A,C,E.props.children,D,E.key):C!==null&&(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===le&&un(I)===C.type)?(C=l(C,E.props),Ws(C,E),C.return=A,C):(C=ti(E.type,E.key,E.props,null,A.mode,D),Ws(C,E),C.return=A,C)}function T(A,C,E,D){return C===null||C.tag!==4||C.stateNode.containerInfo!==E.containerInfo||C.stateNode.implementation!==E.implementation?(C=Jl(E,A.mode,D),C.return=A,C):(C=l(C,E.children||[]),C.return=A,C)}function z(A,C,E,D,I){return C===null||C.tag!==7?(C=sn(E,A.mode,D,I),C.return=A,C):(C=l(C,E),C.return=A,C)}function B(A,C,E){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Xl(""+C,A.mode,E),C.return=A,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case w:return E=ti(C.type,C.key,C.props,null,A.mode,E),Ws(E,C),E.return=A,E;case j:return C=Jl(C,A.mode,E),C.return=A,C;case le:return C=un(C),B(A,C,E)}if(Ie(C)||be(C))return C=sn(C,A.mode,E,null),C.return=A,C;if(typeof C.then=="function")return B(A,ci(C),E);if(C.$$typeof===q)return B(A,si(A,C),E);oi(A,C)}return null}function O(A,C,E,D){var I=C!==null?C.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return I!==null?null:v(A,C,""+E,D);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case w:return E.key===I?S(A,C,E,D):null;case j:return E.key===I?T(A,C,E,D):null;case le:return E=un(E),O(A,C,E,D)}if(Ie(E)||be(E))return I!==null?null:z(A,C,E,D,null);if(typeof E.then=="function")return O(A,C,ci(E),D);if(E.$$typeof===q)return O(A,C,si(A,E),D);oi(A,E)}return null}function k(A,C,E,D,I){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(E)||null,v(C,A,""+D,I);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case w:return A=A.get(D.key===null?E:D.key)||null,S(C,A,D,I);case j:return A=A.get(D.key===null?E:D.key)||null,T(C,A,D,I);case le:return D=un(D),k(A,C,E,D,I)}if(Ie(D)||be(D))return A=A.get(E)||null,z(C,A,D,I,null);if(typeof D.then=="function")return k(A,C,E,ci(D),I);if(D.$$typeof===q)return k(A,C,E,si(C,D),I);oi(C,D)}return null}function K(A,C,E,D){for(var I=null,pe=null,J=C,ie=C=0,he=null;J!==null&&ie<E.length;ie++){J.index>ie?(he=J,J=null):he=J.sibling;var ve=O(A,J,E[ie],D);if(ve===null){J===null&&(J=he);break}e&&J&&ve.alternate===null&&t(A,J),C=d(ve,C,ie),pe===null?I=ve:pe.sibling=ve,pe=ve,J=he}if(ie===E.length)return a(A,J),me&&ta(A,ie),I;if(J===null){for(;ie<E.length;ie++)J=B(A,E[ie],D),J!==null&&(C=d(J,C,ie),pe===null?I=J:pe.sibling=J,pe=J);return me&&ta(A,ie),I}for(J=s(J);ie<E.length;ie++)he=k(J,A,ie,E[ie],D),he!==null&&(e&&he.alternate!==null&&J.delete(he.key===null?ie:he.key),C=d(he,C,ie),pe===null?I=he:pe.sibling=he,pe=he);return e&&J.forEach(function($a){return t(A,$a)}),me&&ta(A,ie),I}function ee(A,C,E,D){if(E==null)throw Error(i(151));for(var I=null,pe=null,J=C,ie=C=0,he=null,ve=E.next();J!==null&&!ve.done;ie++,ve=E.next()){J.index>ie?(he=J,J=null):he=J.sibling;var $a=O(A,J,ve.value,D);if($a===null){J===null&&(J=he);break}e&&J&&$a.alternate===null&&t(A,J),C=d($a,C,ie),pe===null?I=$a:pe.sibling=$a,pe=$a,J=he}if(ve.done)return a(A,J),me&&ta(A,ie),I;if(J===null){for(;!ve.done;ie++,ve=E.next())ve=B(A,ve.value,D),ve!==null&&(C=d(ve,C,ie),pe===null?I=ve:pe.sibling=ve,pe=ve);return me&&ta(A,ie),I}for(J=s(J);!ve.done;ie++,ve=E.next())ve=k(J,A,ie,ve.value,D),ve!==null&&(e&&ve.alternate!==null&&J.delete(ve.key===null?ie:ve.key),C=d(ve,C,ie),pe===null?I=ve:pe.sibling=ve,pe=ve);return e&&J.forEach(function(Iy){return t(A,Iy)}),me&&ta(A,ie),I}function Ae(A,C,E,D){if(typeof E=="object"&&E!==null&&E.type===N&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case w:e:{for(var I=E.key;C!==null;){if(C.key===I){if(I=E.type,I===N){if(C.tag===7){a(A,C.sibling),D=l(C,E.props.children),D.return=A,A=D;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===le&&un(I)===C.type){a(A,C.sibling),D=l(C,E.props),Ws(D,E),D.return=A,A=D;break e}a(A,C);break}else t(A,C);C=C.sibling}E.type===N?(D=sn(E.props.children,A.mode,D,E.key),D.return=A,A=D):(D=ti(E.type,E.key,E.props,null,A.mode,D),Ws(D,E),D.return=A,A=D)}return m(A);case j:e:{for(I=E.key;C!==null;){if(C.key===I)if(C.tag===4&&C.stateNode.containerInfo===E.containerInfo&&C.stateNode.implementation===E.implementation){a(A,C.sibling),D=l(C,E.children||[]),D.return=A,A=D;break e}else{a(A,C);break}else t(A,C);C=C.sibling}D=Jl(E,A.mode,D),D.return=A,A=D}return m(A);case le:return E=un(E),Ae(A,C,E,D)}if(Ie(E))return K(A,C,E,D);if(be(E)){if(I=be(E),typeof I!="function")throw Error(i(150));return E=I.call(E),ee(A,C,E,D)}if(typeof E.then=="function")return Ae(A,C,ci(E),D);if(E.$$typeof===q)return Ae(A,C,si(A,E),D);oi(A,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,C!==null&&C.tag===6?(a(A,C.sibling),D=l(C,E),D.return=A,A=D):(a(A,C),D=Xl(E,A.mode,D),D.return=A,A=D),m(A)):a(A,C)}return function(A,C,E,D){try{Is=0;var I=Ae(A,C,E,D);return Jn=null,I}catch(J){if(J===Xn||J===ii)throw J;var pe=_t(29,J,null,A.mode);return pe.lanes=D,pe.return=A,pe}finally{}}}var fn=Cd(!0),Ad=Cd(!1),Ca=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ea(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(xe&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=ei(e),od(e,null,a),t}return Fr(e,s,t,a),ei(e)}function Fs(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,pu(e,a)}}function cc(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var l=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?l=d=m:d=d.next=m,a=a.next}while(a!==null);d===null?l=d=t:d=d.next=t}else l=d=t;a={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var oc=!1;function er(){if(oc){var e=Kn;if(e!==null)throw e}}function tr(e,t,a,s){oc=!1;var l=e.updateQueue;Ca=!1;var d=l.firstBaseUpdate,m=l.lastBaseUpdate,v=l.shared.pending;if(v!==null){l.shared.pending=null;var S=v,T=S.next;S.next=null,m===null?d=T:m.next=T,m=S;var z=e.alternate;z!==null&&(z=z.updateQueue,v=z.lastBaseUpdate,v!==m&&(v===null?z.firstBaseUpdate=T:v.next=T,z.lastBaseUpdate=S))}if(d!==null){var B=l.baseState;m=0,z=T=S=null,v=d;do{var O=v.lane&-536870913,k=O!==v.lane;if(k?(fe&O)===O:(s&O)===O){O!==0&&O===Qn&&(oc=!0),z!==null&&(z=z.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var K=e,ee=v;O=t;var Ae=a;switch(ee.tag){case 1:if(K=ee.payload,typeof K=="function"){B=K.call(Ae,B,O);break e}B=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=ee.payload,O=typeof K=="function"?K.call(Ae,B,O):K,O==null)break e;B=b({},B,O);break e;case 2:Ca=!0}}O=v.callback,O!==null&&(e.flags|=64,k&&(e.flags|=8192),k=l.callbacks,k===null?l.callbacks=[O]:k.push(O))}else k={lane:O,tag:v.tag,payload:v.payload,callback:v.callback,next:null},z===null?(T=z=k,S=B):z=z.next=k,m|=O;if(v=v.next,v===null){if(v=l.shared.pending,v===null)break;k=v,v=k.next,k.next=null,l.lastBaseUpdate=k,l.shared.pending=null}}while(!0);z===null&&(S=B),l.baseState=S,l.firstBaseUpdate=T,l.lastBaseUpdate=z,d===null&&(l.shared.lanes=0),ka|=m,e.lanes=m,e.memoizedState=B}}function Ed(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Nd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ed(a[e],t)}var Zn=ke(null),ui=ke(0);function Td(e,t){e=fa,ge(ui,e),ge(Zn,t),fa=e|t.baseLanes}function uc(){ge(ui,fa),ge(Zn,Zn.current)}function dc(){fa=ui.current,Ee(Zn),Ee(ui)}var wt=ke(null),Dt=null;function Na(e){var t=e.alternate;ge(Be,Be.current&1),ge(wt,e),Dt===null&&(t===null||Zn.current!==null||t.memoizedState!==null)&&(Dt=e)}function fc(e){ge(Be,Be.current),ge(wt,e),Dt===null&&(Dt=e)}function Od(e){e.tag===22?(ge(Be,Be.current),ge(wt,e),Dt===null&&(Dt=e)):Ta()}function Ta(){ge(Be,Be.current),ge(wt,wt.current)}function St(e){Ee(wt),Dt===e&&(Dt=null),Ee(Be)}var Be=ke(0);function di(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bo(a)||xo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=0,re=null,je=null,He=null,fi=!1,Pn=!1,hn=!1,hi=0,ar=0,In=null,G0=0;function Me(){throw Error(i(321))}function hc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!xt(e[a],t[a]))return!1;return!0}function mc(e,t,a,s,l,d){return sa=d,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?mf:Tc,hn=!1,d=a(s,l),hn=!1,Pn&&(d=kd(t,a,s,l)),Rd(e),d}function Rd(e){M.H=rr;var t=je!==null&&je.next!==null;if(sa=0,He=je=re=null,fi=!1,ar=0,In=null,t)throw Error(i(300));e===null||Ge||(e=e.dependencies,e!==null&&ni(e)&&(Ge=!0))}function kd(e,t,a,s){re=e;var l=0;do{if(Pn&&(In=null),ar=0,Pn=!1,25<=l)throw Error(i(301));if(l+=1,He=je=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}M.H=gf,d=t(a,s)}while(Pn);return d}function $0(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?nr(t):t,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(re.flags|=1024),t}function gc(){var e=hi!==0;return hi=0,e}function yc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function pc(e){if(fi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fi=!1}sa=0,He=je=re=null,Pn=!1,ar=hi=0,In=null}function it(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?re.memoizedState=He=e:He=He.next=e,He}function Le(){if(je===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=He===null?re.memoizedState:He.next;if(t!==null)He=t,je=e;else{if(e===null)throw re.alternate===null?Error(i(467)):Error(i(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},He===null?re.memoizedState=He=e:He=He.next=e}return He}function mi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nr(e){var t=ar;return ar+=1,In===null&&(In=[]),e=wd(In,e,t),t=re,(He===null?t.memoizedState:He.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?mf:Tc),e}function gi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return nr(e);if(e.$$typeof===q)return et(e)}throw Error(i(438,String(e)))}function vc(e){var t=null,a=re.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=re.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=mi(),re.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=oe;return t.index++,a}function ra(e,t){return typeof t=="function"?t(e):t}function yi(e){var t=Le();return bc(t,je,e)}function bc(e,t,a){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=a;var l=e.baseQueue,d=s.pending;if(d!==null){if(l!==null){var m=l.next;l.next=d.next,d.next=m}t.baseQueue=l=d,s.pending=null}if(d=e.baseState,l===null)e.memoizedState=d;else{t=l.next;var v=m=null,S=null,T=t,z=!1;do{var B=T.lane&-536870913;if(B!==T.lane?(fe&B)===B:(sa&B)===B){var O=T.revertLane;if(O===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),B===Qn&&(z=!0);else if((sa&O)===O){T=T.next,O===Qn&&(z=!0);continue}else B={lane:0,revertLane:T.revertLane,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},S===null?(v=S=B,m=d):S=S.next=B,re.lanes|=O,ka|=O;B=T.action,hn&&a(d,B),d=T.hasEagerState?T.eagerState:a(d,B)}else O={lane:B,revertLane:T.revertLane,gesture:T.gesture,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},S===null?(v=S=O,m=d):S=S.next=O,re.lanes|=B,ka|=B;T=T.next}while(T!==null&&T!==t);if(S===null?m=d:S.next=v,!xt(d,e.memoizedState)&&(Ge=!0,z&&(a=Kn,a!==null)))throw a;e.memoizedState=d,e.baseState=m,e.baseQueue=S,s.lastRenderedState=d}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function xc(e){var t=Le(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,l=a.pending,d=t.memoizedState;if(l!==null){a.pending=null;var m=l=l.next;do d=e(d,m.action),m=m.next;while(m!==l);xt(d,t.memoizedState)||(Ge=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),a.lastRenderedState=d}return[d,s]}function Ud(e,t,a){var s=re,l=Le(),d=me;if(d){if(a===void 0)throw Error(i(407));a=a()}else a=t();var m=!xt((je||l).memoizedState,a);if(m&&(l.memoizedState=a,Ge=!0),l=l.queue,Sc(Dd.bind(null,s,l,e),[e]),l.getSnapshot!==t||m||He!==null&&He.memoizedState.tag&1){if(s.flags|=2048,Wn(9,{destroy:void 0},Md.bind(null,s,l,a,t),null),Ne===null)throw Error(i(349));d||(sa&127)!==0||zd(s,t,a)}return a}function zd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=re.updateQueue,t===null?(t=mi(),re.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Md(e,t,a,s){t.value=a,t.getSnapshot=s,Bd(t)&&Ld(e)}function Dd(e,t,a){return a(function(){Bd(t)&&Ld(e)})}function Bd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!xt(e,a)}catch{return!0}}function Ld(e){var t=nn(e,2);t!==null&&gt(t,e,2)}function _c(e){var t=it();if(typeof e=="function"){var a=e;if(e=a(),hn){va(!0);try{a()}finally{va(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t}function qd(e,t,a,s){return e.baseState=a,bc(e,je,typeof s=="function"?s:ra)}function V0(e,t,a,s,l){if(bi(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};M.T!==null?a(!0):d.isTransition=!1,s(d),a=t.pending,a===null?(d.next=t.pending=d,Hd(t,d)):(d.next=a.next,t.pending=a.next=d)}}function Hd(e,t){var a=t.action,s=t.payload,l=e.state;if(t.isTransition){var d=M.T,m={};M.T=m;try{var v=a(l,s),S=M.S;S!==null&&S(m,v),Gd(e,t,v)}catch(T){wc(e,t,T)}finally{d!==null&&m.types!==null&&(d.types=m.types),M.T=d}}else try{d=a(l,s),Gd(e,t,d)}catch(T){wc(e,t,T)}}function Gd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){$d(e,t,s)},function(s){return wc(e,t,s)}):$d(e,t,a)}function $d(e,t,a){t.status="fulfilled",t.value=a,Vd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Hd(e,a)))}function wc(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Vd(t),t=t.next;while(t!==s)}e.action=null}function Vd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yd(e,t){return t}function Qd(e,t){if(me){var a=Ne.formState;if(a!==null){e:{var s=re;if(me){if(Oe){t:{for(var l=Oe,d=Mt;l.nodeType!==8;){if(!d){l=null;break t}if(l=Bt(l.nextSibling),l===null){l=null;break t}}d=l.data,l=d==="F!"||d==="F"?l:null}if(l){Oe=Bt(l.nextSibling),s=l.data==="F!";break e}}Sa(s)}s=!1}s&&(t=a[0])}}return a=it(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:t},a.queue=s,a=df.bind(null,re,s),s.dispatch=a,s=_c(!1),d=Nc.bind(null,re,!1,s.queue),s=it(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,a=V0.bind(null,re,l,d,a),l.dispatch=a,s.memoizedState=e,[t,a,!1]}function Kd(e){var t=Le();return Xd(t,je,e)}function Xd(e,t,a){if(t=bc(e,t,Yd)[0],e=yi(ra)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=nr(t)}catch(m){throw m===Xn?ii:m}else s=t;t=Le();var l=t.queue,d=l.dispatch;return a!==t.memoizedState&&(re.flags|=2048,Wn(9,{destroy:void 0},Y0.bind(null,l,a),null)),[s,d,e]}function Y0(e,t){e.action=t}function Jd(e){var t=Le(),a=je;if(a!==null)return Xd(t,a,e);Le(),t=t.memoizedState,a=Le();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Wn(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=re.updateQueue,t===null&&(t=mi(),re.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Zd(){return Le().memoizedState}function pi(e,t,a,s){var l=it();re.flags|=e,l.memoizedState=Wn(1|t,{destroy:void 0},a,s===void 0?null:s)}function vi(e,t,a,s){var l=Le();s=s===void 0?null:s;var d=l.memoizedState.inst;je!==null&&s!==null&&hc(s,je.memoizedState.deps)?l.memoizedState=Wn(t,d,a,s):(re.flags|=e,l.memoizedState=Wn(1|t,d,a,s))}function Pd(e,t){pi(8390656,8,e,t)}function Sc(e,t){vi(2048,8,e,t)}function Q0(e){re.flags|=4;var t=re.updateQueue;if(t===null)t=mi(),re.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Id(e){var t=Le().memoizedState;return Q0({ref:t,nextImpl:e}),function(){if((xe&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Wd(e,t){return vi(4,2,e,t)}function Fd(e,t){return vi(4,4,e,t)}function ef(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tf(e,t,a){a=a!=null?a.concat([e]):null,vi(4,4,ef.bind(null,t,e),a)}function jc(){}function af(e,t){var a=Le();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&hc(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function nf(e,t){var a=Le();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&hc(t,s[1]))return s[0];if(s=e(),hn){va(!0);try{e()}finally{va(!1)}}return a.memoizedState=[s,t],s}function Cc(e,t,a){return a===void 0||(sa&1073741824)!==0&&(fe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=rh(),re.lanes|=e,ka|=e,a)}function sf(e,t,a,s){return xt(a,t)?a:Zn.current!==null?(e=Cc(e,a,s),xt(e,t)||(Ge=!0),e):(sa&42)===0||(sa&1073741824)!==0&&(fe&261930)===0?(Ge=!0,e.memoizedState=a):(e=rh(),re.lanes|=e,ka|=e,t)}function rf(e,t,a,s,l){var d=H.p;H.p=d!==0&&8>d?d:8;var m=M.T,v={};M.T=v,Nc(e,!1,t,a);try{var S=l(),T=M.S;if(T!==null&&T(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var z=H0(S,s);sr(e,t,z,At(e))}else sr(e,t,s,At(e))}catch(B){sr(e,t,{then:function(){},status:"rejected",reason:B},At())}finally{H.p=d,m!==null&&v.types!==null&&(m.types=v.types),M.T=m}}function K0(){}function Ac(e,t,a,s){if(e.tag!==5)throw Error(i(476));var l=lf(e).queue;rf(e,l,t,X,a===null?K0:function(){return cf(e),a(s)})}function lf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:X},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cf(e){var t=lf(e);t.next===null&&(t=e.alternate.memoizedState),sr(e,t.next.queue,{},At())}function Ec(){return et(_r)}function of(){return Le().memoizedState}function uf(){return Le().memoizedState}function X0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=At();e=Aa(a);var s=Ea(t,e,a);s!==null&&(gt(s,t,a),Fs(s,t,a)),t={cache:ac()},e.payload=t;return}t=t.return}}function J0(e,t,a){var s=At();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bi(e)?ff(t,a):(a=Ql(e,t,a,s),a!==null&&(gt(a,e,s),hf(a,t,s)))}function df(e,t,a){var s=At();sr(e,t,a,s)}function sr(e,t,a,s){var l={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bi(e))ff(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,v=d(m,a);if(l.hasEagerState=!0,l.eagerState=v,xt(v,m))return Fr(e,t,l,0),Ne===null&&Wr(),!1}catch{}finally{}if(a=Ql(e,t,l,s),a!==null)return gt(a,e,s),hf(a,t,s),!0}return!1}function Nc(e,t,a,s){if(s={lane:2,revertLane:io(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},bi(e)){if(t)throw Error(i(479))}else t=Ql(e,a,s,2),t!==null&&gt(t,e,2)}function bi(e){var t=e.alternate;return e===re||t!==null&&t===re}function ff(e,t){Pn=fi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function hf(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,pu(e,a)}}var rr={readContext:et,use:gi,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me};rr.useEffectEvent=Me;var mf={readContext:et,use:gi,useCallback:function(e,t){return it().memoizedState=[e,t===void 0?null:t],e},useContext:et,useEffect:Pd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,pi(4194308,4,ef.bind(null,t,e),a)},useLayoutEffect:function(e,t){return pi(4194308,4,e,t)},useInsertionEffect:function(e,t){pi(4,2,e,t)},useMemo:function(e,t){var a=it();t=t===void 0?null:t;var s=e();if(hn){va(!0);try{e()}finally{va(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=it();if(a!==void 0){var l=a(t);if(hn){va(!0);try{a(t)}finally{va(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=J0.bind(null,re,e),[s.memoizedState,e]},useRef:function(e){var t=it();return e={current:e},t.memoizedState=e},useState:function(e){e=_c(e);var t=e.queue,a=df.bind(null,re,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jc,useDeferredValue:function(e,t){var a=it();return Cc(a,e,t)},useTransition:function(){var e=_c(!1);return e=rf.bind(null,re,e.queue,!0,!1),it().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=re,l=it();if(me){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Ne===null)throw Error(i(349));(fe&127)!==0||zd(s,t,a)}l.memoizedState=a;var d={value:a,getSnapshot:t};return l.queue=d,Pd(Dd.bind(null,s,d,e),[e]),s.flags|=2048,Wn(9,{destroy:void 0},Md.bind(null,s,d,a,t),null),a},useId:function(){var e=it(),t=Ne.identifierPrefix;if(me){var a=Xt,s=Kt;a=(s&~(1<<32-bt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=hi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=G0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ec,useFormState:Qd,useActionState:Qd,useOptimistic:function(e){var t=it();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Nc.bind(null,re,!0,a),a.dispatch=t,[e,t]},useMemoCache:vc,useCacheRefresh:function(){return it().memoizedState=X0.bind(null,re)},useEffectEvent:function(e){var t=it(),a={impl:e};return t.memoizedState=a,function(){if((xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Tc={readContext:et,use:gi,useCallback:af,useContext:et,useEffect:Sc,useImperativeHandle:tf,useInsertionEffect:Wd,useLayoutEffect:Fd,useMemo:nf,useReducer:yi,useRef:Zd,useState:function(){return yi(ra)},useDebugValue:jc,useDeferredValue:function(e,t){var a=Le();return sf(a,je.memoizedState,e,t)},useTransition:function(){var e=yi(ra)[0],t=Le().memoizedState;return[typeof e=="boolean"?e:nr(e),t]},useSyncExternalStore:Ud,useId:of,useHostTransitionStatus:Ec,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,t){var a=Le();return qd(a,je,e,t)},useMemoCache:vc,useCacheRefresh:uf};Tc.useEffectEvent=Id;var gf={readContext:et,use:gi,useCallback:af,useContext:et,useEffect:Sc,useImperativeHandle:tf,useInsertionEffect:Wd,useLayoutEffect:Fd,useMemo:nf,useReducer:xc,useRef:Zd,useState:function(){return xc(ra)},useDebugValue:jc,useDeferredValue:function(e,t){var a=Le();return je===null?Cc(a,e,t):sf(a,je.memoizedState,e,t)},useTransition:function(){var e=xc(ra)[0],t=Le().memoizedState;return[typeof e=="boolean"?e:nr(e),t]},useSyncExternalStore:Ud,useId:of,useHostTransitionStatus:Ec,useFormState:Jd,useActionState:Jd,useOptimistic:function(e,t){var a=Le();return je!==null?qd(a,je,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:vc,useCacheRefresh:uf};gf.useEffectEvent=Id;function Oc(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Rc={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=At(),l=Aa(s);l.payload=t,a!=null&&(l.callback=a),t=Ea(e,l,s),t!==null&&(gt(t,e,s),Fs(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=At(),l=Aa(s);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=Ea(e,l,s),t!==null&&(gt(t,e,s),Fs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=At(),s=Aa(a);s.tag=2,t!=null&&(s.callback=t),t=Ea(e,s,a),t!==null&&(gt(t,e,a),Fs(t,e,a))}};function yf(e,t,a,s,l,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,m):t.prototype&&t.prototype.isPureReactComponent?!Qs(a,s)||!Qs(l,d):!0}function pf(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&Rc.enqueueReplaceState(t,t.state,null)}function mn(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function vf(e){Ir(e)}function bf(e){console.error(e)}function xf(e){Ir(e)}function xi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function _f(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function kc(e,t,a){return a=Aa(a),a.tag=3,a.payload={element:null},a.callback=function(){xi(e,t)},a}function wf(e){return e=Aa(e),e.tag=3,e}function Sf(e,t,a,s){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var d=s.value;e.payload=function(){return l(d)},e.callback=function(){_f(t,a,s)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){_f(t,a,s),typeof l!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})})}function Z0(e,t,a,s,l){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Yn(t,a,l,!0),a=wt.current,a!==null){switch(a.tag){case 31:case 13:return Dt===null?ki():a.alternate===null&&De===0&&(De=3),a.flags&=-257,a.flags|=65536,a.lanes=l,s===li?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),no(e,s,l)),!1;case 22:return a.flags|=65536,s===li?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),no(e,s,l)),!1}throw Error(i(435,a.tag))}return no(e,s,l),ki(),!1}if(me)return t=wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==Il&&(e=Error(i(422),{cause:s}),Js(kt(e,a)))):(s!==Il&&(t=Error(i(423),{cause:s}),Js(kt(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=kt(s,a),l=kc(e.stateNode,s,l),cc(e,l),De!==4&&(De=2)),!1;var d=Error(i(520),{cause:s});if(d=kt(d,a),hr===null?hr=[d]:hr.push(d),De!==4&&(De=2),t===null)return!0;s=kt(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=kc(a.stateNode,s,e),cc(a,e),!1;case 1:if(t=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ua===null||!Ua.has(d))))return a.flags|=65536,l&=-l,a.lanes|=l,l=wf(l),Sf(l,e,a,s),cc(a,l),!1}a=a.return}while(a!==null);return!1}var Uc=Error(i(461)),Ge=!1;function tt(e,t,a,s){t.child=e===null?Ad(t,null,a,s):fn(t,e.child,a,s)}function jf(e,t,a,s,l){a=a.render;var d=t.ref;if("ref"in s){var m={};for(var v in s)v!=="ref"&&(m[v]=s[v])}else m=s;return cn(t),s=mc(e,t,a,m,d,l),v=gc(),e!==null&&!Ge?(yc(e,t,l),ia(e,t,l)):(me&&v&&Zl(t),t.flags|=1,tt(e,t,s,l),t.child)}function Cf(e,t,a,s,l){if(e===null){var d=a.type;return typeof d=="function"&&!Kl(d)&&d.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=d,Af(e,t,d,s,l)):(e=ti(a.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Gc(e,l)){var m=d.memoizedProps;if(a=a.compare,a=a!==null?a:Qs,a(m,s)&&e.ref===t.ref)return ia(e,t,l)}return t.flags|=1,e=ea(d,s),e.ref=t.ref,e.return=t,t.child=e}function Af(e,t,a,s,l){if(e!==null){var d=e.memoizedProps;if(Qs(d,s)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=s=d,Gc(e,l))(e.flags&131072)!==0&&(Ge=!0);else return t.lanes=e.lanes,ia(e,t,l)}return zc(e,t,a,s,l)}function Ef(e,t,a,s){var l=s.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~d}else s=0,t.child=null;return Nf(e,t,d,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ri(t,d!==null?d.cachePool:null),d!==null?Td(t,d):uc(),Od(t);else return s=t.lanes=536870912,Nf(e,t,d!==null?d.baseLanes|a:a,a,s)}else d!==null?(ri(t,d.cachePool),Td(t,d),Ta(),t.memoizedState=null):(e!==null&&ri(t,null),uc(),Ta());return tt(e,t,l,a),t.child}function ir(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Nf(e,t,a,s,l){var d=sc();return d=d===null?null:{parent:qe._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&ri(t,null),uc(),Od(t),e!==null&&Yn(e,t,s,!0),t.childLanes=l,null}function _i(e,t){return t=Si({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Tf(e,t,a){return fn(t,e.child,null,a),e=_i(t,t.pendingProps),e.flags|=2,St(t),t.memoizedState=null,e}function P0(e,t,a){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(me){if(s.mode==="hidden")return e=_i(t,s),t.lanes=536870912,ir(null,e);if(fc(t),(e=Oe)?(e=Gh(e,Mt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_a!==null?{id:Kt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},a=dd(e),a.return=t,t.child=a,Fe=t,Oe=null)):e=null,e===null)throw Sa(t);return t.lanes=536870912,null}return _i(t,s)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(fc(t),l)if(t.flags&256)t.flags&=-257,t=Tf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Ge||Yn(e,t,a,!1),l=(a&e.childLanes)!==0,Ge||l){if(s=Ne,s!==null&&(m=vu(s,a),m!==0&&m!==d.retryLane))throw d.retryLane=m,nn(e,m),gt(s,e,m),Uc;ki(),t=Tf(e,t,a)}else e=d.treeContext,Oe=Bt(m.nextSibling),Fe=t,me=!0,wa=null,Mt=!1,e!==null&&md(t,e),t=_i(t,s),t.flags|=4096;return t}return e=ea(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function wi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function zc(e,t,a,s,l){return cn(t),a=mc(e,t,a,s,void 0,l),s=gc(),e!==null&&!Ge?(yc(e,t,l),ia(e,t,l)):(me&&s&&Zl(t),t.flags|=1,tt(e,t,a,l),t.child)}function Of(e,t,a,s,l,d){return cn(t),t.updateQueue=null,a=kd(t,s,a,l),Rd(e),s=gc(),e!==null&&!Ge?(yc(e,t,d),ia(e,t,d)):(me&&s&&Zl(t),t.flags|=1,tt(e,t,a,d),t.child)}function Rf(e,t,a,s,l){if(cn(t),t.stateNode===null){var d=Hn,m=a.contextType;typeof m=="object"&&m!==null&&(d=et(m)),d=new a(s,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rc,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=s,d.state=t.memoizedState,d.refs={},ic(t),m=a.contextType,d.context=typeof m=="object"&&m!==null?et(m):Hn,d.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Oc(t,a,m,s),d.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&Rc.enqueueReplaceState(d,d.state,null),tr(t,s,d,l),er(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){d=t.stateNode;var v=t.memoizedProps,S=mn(a,v);d.props=S;var T=d.context,z=a.contextType;m=Hn,typeof z=="object"&&z!==null&&(m=et(z));var B=a.getDerivedStateFromProps;z=typeof B=="function"||typeof d.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v||T!==m)&&pf(t,d,s,m),Ca=!1;var O=t.memoizedState;d.state=O,tr(t,s,d,l),er(),T=t.memoizedState,v||O!==T||Ca?(typeof B=="function"&&(Oc(t,a,B,s),T=t.memoizedState),(S=Ca||yf(t,a,S,s,O,T,m))?(z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=T),d.props=s,d.state=T,d.context=m,s=S):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{d=t.stateNode,lc(e,t),m=t.memoizedProps,z=mn(a,m),d.props=z,B=t.pendingProps,O=d.context,T=a.contextType,S=Hn,typeof T=="object"&&T!==null&&(S=et(T)),v=a.getDerivedStateFromProps,(T=typeof v=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==B||O!==S)&&pf(t,d,s,S),Ca=!1,O=t.memoizedState,d.state=O,tr(t,s,d,l),er();var k=t.memoizedState;m!==B||O!==k||Ca||e!==null&&e.dependencies!==null&&ni(e.dependencies)?(typeof v=="function"&&(Oc(t,a,v,s),k=t.memoizedState),(z=Ca||yf(t,a,z,s,O,k,S)||e!==null&&e.dependencies!==null&&ni(e.dependencies))?(T||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,k,S),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,k,S)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=k),d.props=s,d.state=k,d.context=S,s=z):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),s=!1)}return d=s,wi(e,t),s=(t.flags&128)!==0,d||s?(d=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&s?(t.child=fn(t,e.child,null,l),t.child=fn(t,null,a,l)):tt(e,t,a,l),t.memoizedState=d.state,e=t.child):e=ia(e,t,l),e}function kf(e,t,a,s){return rn(),t.flags|=256,tt(e,t,a,s),t.child}var Mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dc(e){return{baseLanes:e,cachePool:xd()}}function Bc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ct),e}function Uf(e,t,a){var s=t.pendingProps,l=!1,d=(t.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(Be.current&2)!==0),m&&(l=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(me){if(l?Na(t):Ta(),(e=Oe)?(e=Gh(e,Mt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_a!==null?{id:Kt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},a=dd(e),a.return=t,t.child=a,Fe=t,Oe=null)):e=null,e===null)throw Sa(t);return xo(e)?t.lanes=32:t.lanes=536870912,null}var v=s.children;return s=s.fallback,l?(Ta(),l=t.mode,v=Si({mode:"hidden",children:v},l),s=sn(s,l,a,null),v.return=t,s.return=t,v.sibling=s,t.child=v,s=t.child,s.memoizedState=Dc(a),s.childLanes=Bc(e,m,a),t.memoizedState=Mc,ir(null,s)):(Na(t),Lc(t,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(d)t.flags&256?(Na(t),t.flags&=-257,t=qc(e,t,a)):t.memoizedState!==null?(Ta(),t.child=e.child,t.flags|=128,t=null):(Ta(),v=s.fallback,l=t.mode,s=Si({mode:"visible",children:s.children},l),v=sn(v,l,a,null),v.flags|=2,s.return=t,v.return=t,s.sibling=v,t.child=s,fn(t,e.child,null,a),s=t.child,s.memoizedState=Dc(a),s.childLanes=Bc(e,m,a),t.memoizedState=Mc,t=ir(null,s));else if(Na(t),xo(v)){if(m=v.nextSibling&&v.nextSibling.dataset,m)var T=m.dgst;m=T,s=Error(i(419)),s.stack="",s.digest=m,Js({value:s,source:null,stack:null}),t=qc(e,t,a)}else if(Ge||Yn(e,t,a,!1),m=(a&e.childLanes)!==0,Ge||m){if(m=Ne,m!==null&&(s=vu(m,a),s!==0&&s!==S.retryLane))throw S.retryLane=s,nn(e,s),gt(m,e,s),Uc;bo(v)||ki(),t=qc(e,t,a)}else bo(v)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Oe=Bt(v.nextSibling),Fe=t,me=!0,wa=null,Mt=!1,e!==null&&md(t,e),t=Lc(t,s.children),t.flags|=4096);return t}return l?(Ta(),v=s.fallback,l=t.mode,S=e.child,T=S.sibling,s=ea(S,{mode:"hidden",children:s.children}),s.subtreeFlags=S.subtreeFlags&65011712,T!==null?v=ea(T,v):(v=sn(v,l,a,null),v.flags|=2),v.return=t,s.return=t,s.sibling=v,t.child=s,ir(null,s),s=t.child,v=e.child.memoizedState,v===null?v=Dc(a):(l=v.cachePool,l!==null?(S=qe._currentValue,l=l.parent!==S?{parent:S,pool:S}:l):l=xd(),v={baseLanes:v.baseLanes|a,cachePool:l}),s.memoizedState=v,s.childLanes=Bc(e,m,a),t.memoizedState=Mc,ir(e.child,s)):(Na(t),a=e.child,e=a.sibling,a=ea(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Lc(e,t){return t=Si({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Si(e,t){return e=_t(22,e,null,t),e.lanes=0,e}function qc(e,t,a){return fn(t,e.child,null,a),e=Lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zf(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ec(e.return,t,a)}function Hc(e,t,a,s,l,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:l,treeForkCount:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=a,m.tailMode=l,m.treeForkCount=d)}function Mf(e,t,a){var s=t.pendingProps,l=s.revealOrder,d=s.tail;s=s.children;var m=Be.current,v=(m&2)!==0;if(v?(m=m&1|2,t.flags|=128):m&=1,ge(Be,m),tt(e,t,s,a),s=me?Xs:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zf(e,a,t);else if(e.tag===19)zf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&di(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Hc(t,!1,l,a,d,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&di(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Hc(t,!0,a,null,d,s);break;case"together":Hc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ka|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Yn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=ea(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ea(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Gc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ni(e)))}function I0(e,t,a){switch(t.tag){case 3:qt(t,t.stateNode.containerInfo),ja(t,qe,e.memoizedState.cache),rn();break;case 27:case 5:ya(t);break;case 4:qt(t,t.stateNode.containerInfo);break;case 10:ja(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Na(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Uf(e,t,a):(Na(t),e=ia(e,t,a),e!==null?e.sibling:null);Na(t);break;case 19:var l=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Yn(e,t,a,!1),s=(a&t.childLanes)!==0),l){if(s)return Mf(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ge(Be,Be.current),s)break;return null;case 22:return t.lanes=0,Ef(e,t,a,t.pendingProps);case 24:ja(t,qe,e.memoizedState.cache)}return ia(e,t,a)}function Df(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ge=!0;else{if(!Gc(e,a)&&(t.flags&128)===0)return Ge=!1,I0(e,t,a);Ge=(e.flags&131072)!==0}else Ge=!1,me&&(t.flags&1048576)!==0&&hd(t,Xs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=un(t.elementType),t.type=e,typeof e=="function")Kl(e)?(s=mn(e,s),t.tag=1,t=Rf(null,t,e,s,a)):(t.tag=0,t=zc(null,t,e,s,a));else{if(e!=null){var l=e.$$typeof;if(l===V){t.tag=11,t=jf(null,t,e,s,a);break e}else if(l===F){t.tag=14,t=Cf(null,t,e,s,a);break e}}throw t=lt(e)||e,Error(i(306,t,""))}}return t;case 0:return zc(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,l=mn(s,t.pendingProps),Rf(e,t,s,l,a);case 3:e:{if(qt(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var d=t.memoizedState;l=d.element,lc(e,t),tr(t,s,null,a);var m=t.memoizedState;if(s=m.cache,ja(t,qe,s),s!==d.cache&&tc(t,[qe],a,!0),er(),s=m.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=kf(e,t,s,a);break e}else if(s!==l){l=kt(Error(i(424)),t),Js(l),t=kf(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Oe=Bt(e.firstChild),Fe=t,me=!0,wa=null,Mt=!0,a=Ad(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(rn(),s===l){t=ia(e,t,a);break e}tt(e,t,s,a)}t=t.child}return t;case 26:return wi(e,t),e===null?(a=Xh(t.type,null,t.pendingProps,null))?t.memoizedState=a:me||(a=t.type,e=t.pendingProps,s=qi(Nt.current).createElement(a),s[We]=t,s[ot]=e,at(s,a,e),Je(s),t.stateNode=s):t.memoizedState=Xh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ya(t),e===null&&me&&(s=t.stateNode=Yh(t.type,t.pendingProps,Nt.current),Fe=t,Mt=!0,l=Oe,Ba(t.type)?(_o=l,Oe=Bt(s.firstChild)):Oe=l),tt(e,t,t.pendingProps.children,a),wi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&me&&((l=s=Oe)&&(s=Ey(s,t.type,t.pendingProps,Mt),s!==null?(t.stateNode=s,Fe=t,Oe=Bt(s.firstChild),Mt=!1,l=!0):l=!1),l||Sa(t)),ya(t),l=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,s=d.children,yo(l,d)?s=null:m!==null&&yo(l,m)&&(t.flags|=32),t.memoizedState!==null&&(l=mc(e,t,$0,null,null,a),_r._currentValue=l),wi(e,t),tt(e,t,s,a),t.child;case 6:return e===null&&me&&((e=a=Oe)&&(a=Ny(a,t.pendingProps,Mt),a!==null?(t.stateNode=a,Fe=t,Oe=null,e=!0):e=!1),e||Sa(t)),null;case 13:return Uf(e,t,a);case 4:return qt(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=fn(t,null,s,a):tt(e,t,s,a),t.child;case 11:return jf(e,t,t.type,t.pendingProps,a);case 7:return tt(e,t,t.pendingProps,a),t.child;case 8:return tt(e,t,t.pendingProps.children,a),t.child;case 12:return tt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,ja(t,t.type,s.value),tt(e,t,s.children,a),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,cn(t),l=et(l),s=s(l),t.flags|=1,tt(e,t,s,a),t.child;case 14:return Cf(e,t,t.type,t.pendingProps,a);case 15:return Af(e,t,t.type,t.pendingProps,a);case 19:return Mf(e,t,a);case 31:return P0(e,t,a);case 22:return Ef(e,t,a,t.pendingProps);case 24:return cn(t),s=et(qe),e===null?(l=sc(),l===null&&(l=Ne,d=ac(),l.pooledCache=d,d.refCount++,d!==null&&(l.pooledCacheLanes|=a),l=d),t.memoizedState={parent:s,cache:l},ic(t),ja(t,qe,l)):((e.lanes&a)!==0&&(lc(e,t),tr(t,null,null,a),er()),l=e.memoizedState,d=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),ja(t,qe,s)):(s=d.cache,ja(t,qe,s),s!==l.cache&&tc(t,[qe],a,!0))),tt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function la(e){e.flags|=4}function $c(e,t,a,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(oh())e.flags|=8192;else throw dn=li,rc}else e.flags&=-16777217}function Bf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Wh(t))if(oh())e.flags|=8192;else throw dn=li,rc}function ji(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gu():536870912,e.lanes|=t,as|=t)}function lr(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function W0(e,t,a){var s=t.pendingProps;switch(Pl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Re(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),na(qe),Ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Vn(t)?la(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wl())),Re(t),null;case 26:var l=t.type,d=t.memoizedState;return e===null?(la(t),d!==null?(Re(t),Bf(t,d)):(Re(t),$c(t,l,null,s,a))):d?d!==e.memoizedState?(la(t),Re(t),Bf(t,d)):(Re(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&la(t),Re(t),$c(t,l,e,s,a)),null;case 27:if(pa(t),a=Nt.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&la(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Re(t),null}e=ze.current,Vn(t)?gd(t):(e=Yh(l,s,a),t.stateNode=e,la(t))}return Re(t),null;case 5:if(pa(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&la(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Re(t),null}if(d=ze.current,Vn(t))gd(t);else{var m=qi(Nt.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?d.multiple=!0:s.size&&(d.size=s.size);break;default:d=typeof s.is=="string"?m.createElement(l,{is:s.is}):m.createElement(l)}}d[We]=t,d[ot]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=d;e:switch(at(d,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&la(t)}}return Re(t),$c(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&la(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=Nt.current,Vn(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,l=Fe,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[We]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Uh(e.nodeValue,a)),e||Sa(t,!0)}else e=qi(e).createTextNode(s),e[We]=t,t.stateNode=e}return Re(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Vn(t),a!==null){if(e===null){if(!s)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[We]=t}else rn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Re(t),e=!1}else a=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(St(t),t):(St(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Re(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Vn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[We]=t}else rn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Re(t),l=!1}else l=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(St(t),t):(St(t),null)}return St(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ji(t,t.updateQueue),Re(t),null);case 4:return Ht(),e===null&&uo(t.stateNode.containerInfo),Re(t),null;case 10:return na(t.type),Re(t),null;case 19:if(Ee(Be),s=t.memoizedState,s===null)return Re(t),null;if(l=(t.flags&128)!==0,d=s.rendering,d===null)if(l)lr(s,!1);else{if(De!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=di(e),d!==null){for(t.flags|=128,lr(s,!1),e=d.updateQueue,t.updateQueue=e,ji(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ud(a,e),a=a.sibling;return ge(Be,Be.current&1|2),me&&ta(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&pt()>Ti&&(t.flags|=128,l=!0,lr(s,!1),t.lanes=4194304)}else{if(!l)if(e=di(d),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,ji(t,e),lr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!me)return Re(t),null}else 2*pt()-s.renderingStartTime>Ti&&a!==536870912&&(t.flags|=128,l=!0,lr(s,!1),t.lanes=4194304);s.isBackwards?(d.sibling=t.child,t.child=d):(e=s.last,e!==null?e.sibling=d:t.child=d,s.last=d)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,a=Be.current,ge(Be,l?a&1|2:a&1),me&&ta(t,s.treeForkCount),e):(Re(t),null);case 22:case 23:return St(t),dc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),a=t.updateQueue,a!==null&&ji(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Ee(on),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),na(qe),Re(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function F0(e,t){switch(Pl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(qe),Ht(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return pa(t),null;case 31:if(t.memoizedState!==null){if(St(t),t.alternate===null)throw Error(i(340));rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(St(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Be),null;case 4:return Ht(),null;case 10:return na(t.type),null;case 22:case 23:return St(t),dc(),e!==null&&Ee(on),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(qe),null;case 25:return null;default:return null}}function Lf(e,t){switch(Pl(t),t.tag){case 3:na(qe),Ht();break;case 26:case 27:case 5:pa(t);break;case 4:Ht();break;case 31:t.memoizedState!==null&&St(t);break;case 13:St(t);break;case 19:Ee(Be);break;case 10:na(t.type);break;case 22:case 23:St(t),dc(),e!==null&&Ee(on);break;case 24:na(qe)}}function cr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var l=s.next;a=l;do{if((a.tag&e)===e){s=void 0;var d=a.create,m=a.inst;s=d(),m.destroy=s}a=a.next}while(a!==l)}}catch(v){Se(t,t.return,v)}}function Oa(e,t,a){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var d=l.next;s=d;do{if((s.tag&e)===e){var m=s.inst,v=m.destroy;if(v!==void 0){m.destroy=void 0,l=t;var S=a,T=v;try{T()}catch(z){Se(l,S,z)}}}s=s.next}while(s!==d)}}catch(z){Se(t,t.return,z)}}function qf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Nd(t,a)}catch(s){Se(e,e.return,s)}}}function Hf(e,t,a){a.props=mn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Se(e,t,s)}}function or(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(l){Se(e,t,l)}}function Jt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(l){Se(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){Se(e,t,l)}else a.current=null}function Gf(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(l){Se(e,e.return,l)}}function Vc(e,t,a){try{var s=e.stateNode;_y(s,e.type,a,t),s[ot]=t}catch(l){Se(e,e.return,l)}}function $f(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ba(e.type)||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qc(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Wt));else if(s!==4&&(s===27&&Ba(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Qc(e,t,a),e=e.sibling;e!==null;)Qc(e,t,a),e=e.sibling}function Ci(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ba(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ci(e,t,a),e=e.sibling;e!==null;)Ci(e,t,a),e=e.sibling}function Vf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);at(t,s,a),t[We]=e,t[ot]=a}catch(d){Se(e,e.return,d)}}var ca=!1,$e=!1,Kc=!1,Yf=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function ey(e,t){if(e=e.containerInfo,mo=Ki,e=td(e),ql(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var l=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var m=0,v=-1,S=-1,T=0,z=0,B=e,O=null;t:for(;;){for(var k;B!==a||l!==0&&B.nodeType!==3||(v=m+l),B!==d||s!==0&&B.nodeType!==3||(S=m+s),B.nodeType===3&&(m+=B.nodeValue.length),(k=B.firstChild)!==null;)O=B,B=k;for(;;){if(B===e)break t;if(O===a&&++T===l&&(v=m),O===d&&++z===s&&(S=m),(k=B.nextSibling)!==null)break;B=O,O=B.parentNode}B=k}a=v===-1||S===-1?null:{start:v,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(go={focusedElem:e,selectionRange:a},Ki=!1,Ze=t;Ze!==null;)if(t=Ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ze=e;else for(;Ze!==null;){switch(t=Ze,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=t,l=d.memoizedProps,d=d.memoizedState,s=a.stateNode;try{var K=mn(a.type,l);e=s.getSnapshotBeforeUpdate(K,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(ee){Se(a,a.return,ee)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)vo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Ze=e;break}Ze=t.return}}function Qf(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:ua(e,a),s&4&&cr(5,a);break;case 1:if(ua(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){Se(a,a.return,m)}else{var l=mn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Se(a,a.return,m)}}s&64&&qf(a),s&512&&or(a,a.return);break;case 3:if(ua(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Nd(e,t)}catch(m){Se(a,a.return,m)}}break;case 27:t===null&&s&4&&Vf(a);case 26:case 5:ua(e,a),t===null&&s&4&&Gf(a),s&512&&or(a,a.return);break;case 12:ua(e,a);break;case 31:ua(e,a),s&4&&Jf(e,a);break;case 13:ua(e,a),s&4&&Zf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=oy.bind(null,a),Ty(e,a))));break;case 22:if(s=a.memoizedState!==null||ca,!s){t=t!==null&&t.memoizedState!==null||$e,l=ca;var d=$e;ca=s,($e=t)&&!d?da(e,a,(a.subtreeFlags&8772)!==0):ua(e,a),ca=l,$e=d}break;case 30:break;default:ua(e,a)}}function Kf(e){var t=e.alternate;t!==null&&(e.alternate=null,Kf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&wl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,dt=!1;function oa(e,t,a){for(a=a.child;a!==null;)Xf(e,t,a),a=a.sibling}function Xf(e,t,a){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Us,a)}catch{}switch(a.tag){case 26:$e||Jt(a,t),oa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$e||Jt(a,t);var s=Ue,l=dt;Ba(a.type)&&(Ue=a.stateNode,dt=!1),oa(e,t,a),vr(a.stateNode),Ue=s,dt=l;break;case 5:$e||Jt(a,t);case 6:if(s=Ue,l=dt,Ue=null,oa(e,t,a),Ue=s,dt=l,Ue!==null)if(dt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(a.stateNode)}catch(d){Se(a,t,d)}else try{Ue.removeChild(a.stateNode)}catch(d){Se(a,t,d)}break;case 18:Ue!==null&&(dt?(e=Ue,qh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),us(e)):qh(Ue,a.stateNode));break;case 4:s=Ue,l=dt,Ue=a.stateNode.containerInfo,dt=!0,oa(e,t,a),Ue=s,dt=l;break;case 0:case 11:case 14:case 15:Oa(2,a,t),$e||Oa(4,a,t),oa(e,t,a);break;case 1:$e||(Jt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Hf(a,t,s)),oa(e,t,a);break;case 21:oa(e,t,a);break;case 22:$e=(s=$e)||a.memoizedState!==null,oa(e,t,a),$e=s;break;default:oa(e,t,a)}}function Jf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{us(e)}catch(a){Se(t,t.return,a)}}}function Zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{us(e)}catch(a){Se(t,t.return,a)}}function ty(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yf),t;default:throw Error(i(435,e.tag))}}function Ai(e,t){var a=ty(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var l=uy.bind(null,e,s);s.then(l,l)}})}function ft(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var l=a[s],d=e,m=t,v=m;e:for(;v!==null;){switch(v.tag){case 27:if(Ba(v.type)){Ue=v.stateNode,dt=!1;break e}break;case 5:Ue=v.stateNode,dt=!1;break e;case 3:case 4:Ue=v.stateNode.containerInfo,dt=!0;break e}v=v.return}if(Ue===null)throw Error(i(160));Xf(d,m,l),Ue=null,dt=!1,d=l.alternate,d!==null&&(d.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Pf(t,e),t=t.sibling}var $t=null;function Pf(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ft(t,e),ht(e),s&4&&(Oa(3,e,e.return),cr(3,e),Oa(5,e,e.return));break;case 1:ft(t,e),ht(e),s&512&&($e||a===null||Jt(a,a.return)),s&64&&ca&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var l=$t;if(ft(t,e),ht(e),s&512&&($e||a===null||Jt(a,a.return)),s&4){var d=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":d=l.getElementsByTagName("title")[0],(!d||d[Ds]||d[We]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=l.createElement(s),l.head.insertBefore(d,l.querySelector("head > title"))),at(d,s,a),d[We]=e,Je(d),s=d;break e;case"link":var m=Ph("link","href",l).get(s+(a.href||""));if(m){for(var v=0;v<m.length;v++)if(d=m[v],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(v,1);break t}}d=l.createElement(s),at(d,s,a),l.head.appendChild(d);break;case"meta":if(m=Ph("meta","content",l).get(s+(a.content||""))){for(v=0;v<m.length;v++)if(d=m[v],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(v,1);break t}}d=l.createElement(s),at(d,s,a),l.head.appendChild(d);break;default:throw Error(i(468,s))}d[We]=e,Je(d),s=d}e.stateNode=s}else Ih(l,e.type,e.stateNode);else e.stateNode=Zh(l,s,e.memoizedProps);else d!==s?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,s===null?Ih(l,e.type,e.stateNode):Zh(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Vc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ft(t,e),ht(e),s&512&&($e||a===null||Jt(a,a.return)),a!==null&&s&4&&Vc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ft(t,e),ht(e),s&512&&($e||a===null||Jt(a,a.return)),e.flags&32){l=e.stateNode;try{Un(l,"")}catch(K){Se(e,e.return,K)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,Vc(e,l,a!==null?a.memoizedProps:l)),s&1024&&(Kc=!0);break;case 6:if(ft(t,e),ht(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(K){Se(e,e.return,K)}}break;case 3:if($i=null,l=$t,$t=Hi(t.containerInfo),ft(t,e),$t=l,ht(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(K){Se(e,e.return,K)}Kc&&(Kc=!1,If(e));break;case 4:s=$t,$t=Hi(e.stateNode.containerInfo),ft(t,e),ht(e),$t=s;break;case 12:ft(t,e),ht(e);break;case 31:ft(t,e),ht(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ai(e,s)));break;case 13:ft(t,e),ht(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ni=pt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ai(e,s)));break;case 22:l=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,T=ca,z=$e;if(ca=T||l,$e=z||S,ft(t,e),$e=z,ca=T,ht(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||S||ca||$e||gn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(d=S.stateNode,l)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=S.stateNode;var B=S.memoizedProps.style,O=B!=null&&B.hasOwnProperty("display")?B.display:null;v.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(K){Se(S,S.return,K)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=l?"":S.memoizedProps}catch(K){Se(S,S.return,K)}}}else if(t.tag===18){if(a===null){S=t;try{var k=S.stateNode;l?Hh(k,!0):Hh(S.stateNode,!1)}catch(K){Se(S,S.return,K)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Ai(e,a))));break;case 19:ft(t,e),ht(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ai(e,s)));break;case 30:break;case 21:break;default:ft(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if($f(s)){a=s;break}s=s.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var l=a.stateNode,d=Yc(e);Ci(e,d,l);break;case 5:var m=a.stateNode;a.flags&32&&(Un(m,""),a.flags&=-33);var v=Yc(e);Ci(e,v,m);break;case 3:case 4:var S=a.stateNode.containerInfo,T=Yc(e);Qc(e,T,S);break;default:throw Error(i(161))}}catch(z){Se(e,e.return,z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function If(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;If(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ua(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qf(e,t.alternate,t),t=t.sibling}function gn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Oa(4,t,t.return),gn(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Hf(t,t.return,a),gn(t);break;case 27:vr(t.stateNode);case 26:case 5:Jt(t,t.return),gn(t);break;case 22:t.memoizedState===null&&gn(t);break;case 30:gn(t);break;default:gn(t)}e=e.sibling}}function da(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,d=t,m=d.flags;switch(d.tag){case 0:case 11:case 15:da(l,d,a),cr(4,d);break;case 1:if(da(l,d,a),s=d,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(T){Se(s,s.return,T)}if(s=d,l=s.updateQueue,l!==null){var v=s.stateNode;try{var S=l.shared.hiddenCallbacks;if(S!==null)for(l.shared.hiddenCallbacks=null,l=0;l<S.length;l++)Ed(S[l],v)}catch(T){Se(s,s.return,T)}}a&&m&64&&qf(d),or(d,d.return);break;case 27:Vf(d);case 26:case 5:da(l,d,a),a&&s===null&&m&4&&Gf(d),or(d,d.return);break;case 12:da(l,d,a);break;case 31:da(l,d,a),a&&m&4&&Jf(l,d);break;case 13:da(l,d,a),a&&m&4&&Zf(l,d);break;case 22:d.memoizedState===null&&da(l,d,a),or(d,d.return);break;case 30:break;default:da(l,d,a)}t=t.sibling}}function Xc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Zs(a))}function Jc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zs(e))}function Vt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wf(e,t,a,s),t=t.sibling}function Wf(e,t,a,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Vt(e,t,a,s),l&2048&&cr(9,t);break;case 1:Vt(e,t,a,s);break;case 3:Vt(e,t,a,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zs(e)));break;case 12:if(l&2048){Vt(e,t,a,s),e=t.stateNode;try{var d=t.memoizedProps,m=d.id,v=d.onPostCommit;typeof v=="function"&&v(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Se(t,t.return,S)}}else Vt(e,t,a,s);break;case 31:Vt(e,t,a,s);break;case 13:Vt(e,t,a,s);break;case 23:break;case 22:d=t.stateNode,m=t.alternate,t.memoizedState!==null?d._visibility&2?Vt(e,t,a,s):ur(e,t):d._visibility&2?Vt(e,t,a,s):(d._visibility|=2,Fn(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Xc(m,t);break;case 24:Vt(e,t,a,s),l&2048&&Jc(t.alternate,t);break;default:Vt(e,t,a,s)}}function Fn(e,t,a,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,m=t,v=a,S=s,T=m.flags;switch(m.tag){case 0:case 11:case 15:Fn(d,m,v,S,l),cr(8,m);break;case 23:break;case 22:var z=m.stateNode;m.memoizedState!==null?z._visibility&2?Fn(d,m,v,S,l):ur(d,m):(z._visibility|=2,Fn(d,m,v,S,l)),l&&T&2048&&Xc(m.alternate,m);break;case 24:Fn(d,m,v,S,l),l&&T&2048&&Jc(m.alternate,m);break;default:Fn(d,m,v,S,l)}t=t.sibling}}function ur(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,l=s.flags;switch(s.tag){case 22:ur(a,s),l&2048&&Xc(s.alternate,s);break;case 24:ur(a,s),l&2048&&Jc(s.alternate,s);break;default:ur(a,s)}t=t.sibling}}var dr=8192;function es(e,t,a){if(e.subtreeFlags&dr)for(e=e.child;e!==null;)Ff(e,t,a),e=e.sibling}function Ff(e,t,a){switch(e.tag){case 26:es(e,t,a),e.flags&dr&&e.memoizedState!==null&&Gy(a,$t,e.memoizedState,e.memoizedProps);break;case 5:es(e,t,a);break;case 3:case 4:var s=$t;$t=Hi(e.stateNode.containerInfo),es(e,t,a),$t=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=dr,dr=16777216,es(e,t,a),dr=s):es(e,t,a));break;default:es(e,t,a)}}function eh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ze=s,ah(s,e)}eh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)th(e),e=e.sibling}function th(e){switch(e.tag){case 0:case 11:case 15:fr(e),e.flags&2048&&Oa(9,e,e.return);break;case 3:fr(e);break;case 12:fr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ei(e)):fr(e);break;default:fr(e)}}function Ei(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ze=s,ah(s,e)}eh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Oa(8,t,t.return),Ei(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ei(t));break;default:Ei(t)}e=e.sibling}}function ah(e,t){for(;Ze!==null;){var a=Ze;switch(a.tag){case 0:case 11:case 15:Oa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Zs(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Ze=s;else e:for(a=e;Ze!==null;){s=Ze;var l=s.sibling,d=s.return;if(Kf(s),s===a){Ze=null;break e}if(l!==null){l.return=d,Ze=l;break e}Ze=d}}}var ay={getCacheForType:function(e){var t=et(qe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return et(qe).controller.signal}},ny=typeof WeakMap=="function"?WeakMap:Map,xe=0,Ne=null,ue=null,fe=0,we=0,jt=null,Ra=!1,ts=!1,Zc=!1,fa=0,De=0,ka=0,yn=0,Pc=0,Ct=0,as=0,hr=null,mt=null,Ic=!1,Ni=0,nh=0,Ti=1/0,Oi=null,Ua=null,Qe=0,za=null,ns=null,ha=0,Wc=0,Fc=null,sh=null,mr=0,eo=null;function At(){return(xe&2)!==0&&fe!==0?fe&-fe:M.T!==null?io():bu()}function rh(){if(Ct===0)if((fe&536870912)===0||me){var e=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),Ct=e}else Ct=536870912;return e=wt.current,e!==null&&(e.flags|=32),Ct}function gt(e,t,a){(e===Ne&&(we===2||we===9)||e.cancelPendingCommit!==null)&&(ss(e,0),Ma(e,fe,Ct,!1)),Ms(e,a),((xe&2)===0||e!==Ne)&&(e===Ne&&((xe&2)===0&&(yn|=a),De===4&&Ma(e,fe,Ct,!1)),Zt(e))}function ih(e,t,a){if((xe&6)!==0)throw Error(i(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||zs(e,t),l=s?iy(e,t):ao(e,t,!0),d=s;do{if(l===0){ts&&!s&&Ma(e,t,0,!1);break}else{if(a=e.current.alternate,d&&!sy(a)){l=ao(e,t,!1),d=!1;continue}if(l===2){if(d=t,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var v=e;l=hr;var S=v.current.memoizedState.isDehydrated;if(S&&(ss(v,m).flags|=256),m=ao(v,m,!1),m!==2){if(Zc&&!S){v.errorRecoveryDisabledLanes|=d,yn|=d,l=4;break e}d=mt,mt=l,d!==null&&(mt===null?mt=d:mt.push.apply(mt,d))}l=m}if(d=!1,l!==2)continue}}if(l===1){ss(e,0),Ma(e,t,0,!0);break}e:{switch(s=e,d=l,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ma(s,t,Ct,!Ra);break e;case 2:mt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(l=Ni+300-pt(),10<l)){if(Ma(s,t,Ct,!Ra),Hr(s,0,!0)!==0)break e;ha=t,s.timeoutHandle=Bh(lh.bind(null,s,a,mt,Oi,Ic,t,Ct,yn,as,Ra,d,"Throttled",-0,0),l);break e}lh(s,a,mt,Oi,Ic,t,Ct,yn,as,Ra,d,null,-0,0)}}break}while(!0);Zt(e)}function lh(e,t,a,s,l,d,m,v,S,T,z,B,O,k){if(e.timeoutHandle=-1,B=t.subtreeFlags,B&8192||(B&16785408)===16785408){B={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wt},Ff(t,d,B);var K=(d&62914560)===d?Ni-pt():(d&4194048)===d?nh-pt():0;if(K=$y(B,K),K!==null){ha=d,e.cancelPendingCommit=K(gh.bind(null,e,t,d,a,s,l,m,v,S,z,B,null,O,k)),Ma(e,d,m,!T);return}}gh(e,t,d,a,s,l,m,v,S)}function sy(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var l=a[s],d=l.getSnapshot;l=l.value;try{if(!xt(d(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ma(e,t,a,s){t&=~Pc,t&=~yn,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var d=31-bt(l),m=1<<d;s[d]=-1,l&=~m}a!==0&&yu(e,a,t)}function Ri(){return(xe&6)===0?(gr(0),!1):!0}function to(){if(ue!==null){if(we===0)var e=ue.return;else e=ue,aa=ln=null,pc(e),Jn=null,Is=0,e=ue;for(;e!==null;)Lf(e.alternate,e),e=e.return;ue=null}}function ss(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,jy(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ha=0,to(),Ne=e,ue=a=ea(e.current,null),fe=t,we=0,jt=null,Ra=!1,ts=zs(e,t),Zc=!1,as=Ct=Pc=yn=ka=De=0,mt=hr=null,Ic=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-bt(s),d=1<<l;t|=e[l],s&=~d}return fa=t,Wr(),a}function ch(e,t){re=null,M.H=rr,t===Xn||t===ii?(t=Sd(),we=3):t===rc?(t=Sd(),we=4):we=t===Uc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,jt=t,ue===null&&(De=1,xi(e,kt(t,e.current)))}function oh(){var e=wt.current;return e===null?!0:(fe&4194048)===fe?Dt===null:(fe&62914560)===fe||(fe&536870912)!==0?e===Dt:!1}function uh(){var e=M.H;return M.H=rr,e===null?rr:e}function dh(){var e=M.A;return M.A=ay,e}function ki(){De=4,Ra||(fe&4194048)!==fe&&wt.current!==null||(ts=!0),(ka&134217727)===0&&(yn&134217727)===0||Ne===null||Ma(Ne,fe,Ct,!1)}function ao(e,t,a){var s=xe;xe|=2;var l=uh(),d=dh();(Ne!==e||fe!==t)&&(Oi=null,ss(e,t)),t=!1;var m=De;e:do try{if(we!==0&&ue!==null){var v=ue,S=jt;switch(we){case 8:to(),m=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(t=!0);var T=we;if(we=0,jt=null,rs(e,v,S,T),a&&ts){m=0;break e}break;default:T=we,we=0,jt=null,rs(e,v,S,T)}}ry(),m=De;break}catch(z){ch(e,z)}while(!0);return t&&e.shellSuspendCounter++,aa=ln=null,xe=s,M.H=l,M.A=d,ue===null&&(Ne=null,fe=0,Wr()),m}function ry(){for(;ue!==null;)fh(ue)}function iy(e,t){var a=xe;xe|=2;var s=uh(),l=dh();Ne!==e||fe!==t?(Oi=null,Ti=pt()+500,ss(e,t)):ts=zs(e,t);e:do try{if(we!==0&&ue!==null){t=ue;var d=jt;t:switch(we){case 1:we=0,jt=null,rs(e,t,d,1);break;case 2:case 9:if(_d(d)){we=0,jt=null,hh(t);break}t=function(){we!==2&&we!==9||Ne!==e||(we=7),Zt(e)},d.then(t,t);break e;case 3:we=7;break e;case 4:we=5;break e;case 7:_d(d)?(we=0,jt=null,hh(t)):(we=0,jt=null,rs(e,t,d,7));break;case 5:var m=null;switch(ue.tag){case 26:m=ue.memoizedState;case 5:case 27:var v=ue;if(m?Wh(m):v.stateNode.complete){we=0,jt=null;var S=v.sibling;if(S!==null)ue=S;else{var T=v.return;T!==null?(ue=T,Ui(T)):ue=null}break t}}we=0,jt=null,rs(e,t,d,5);break;case 6:we=0,jt=null,rs(e,t,d,6);break;case 8:to(),De=6;break e;default:throw Error(i(462))}}ly();break}catch(z){ch(e,z)}while(!0);return aa=ln=null,M.H=s,M.A=l,xe=a,ue!==null?0:(Ne=null,fe=0,Wr(),De)}function ly(){for(;ue!==null&&!Og();)fh(ue)}function fh(e){var t=Df(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?Ui(e):ue=t}function hh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Of(a,t,t.pendingProps,t.type,void 0,fe);break;case 11:t=Of(a,t,t.pendingProps,t.type.render,t.ref,fe);break;case 5:pc(t);default:Lf(a,t),t=ue=ud(t,fa),t=Df(a,t,fa)}e.memoizedProps=e.pendingProps,t===null?Ui(e):ue=t}function rs(e,t,a,s){aa=ln=null,pc(t),Jn=null,Is=0;var l=t.return;try{if(Z0(e,l,t,a,fe)){De=1,xi(e,kt(a,e.current)),ue=null;return}}catch(d){if(l!==null)throw ue=l,d;De=1,xi(e,kt(a,e.current)),ue=null;return}t.flags&32768?(me||s===1?e=!0:ts||(fe&536870912)!==0?e=!1:(Ra=e=!0,(s===2||s===9||s===3||s===6)&&(s=wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),mh(t,e)):Ui(t)}function Ui(e){var t=e;do{if((t.flags&32768)!==0){mh(t,Ra);return}e=t.return;var a=W0(t.alternate,t,fa);if(a!==null){ue=a;return}if(t=t.sibling,t!==null){ue=t;return}ue=t=e}while(t!==null);De===0&&(De=5)}function mh(e,t){do{var a=F0(e.alternate,e);if(a!==null){a.flags&=32767,ue=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ue=e;return}ue=e=a}while(e!==null);De=6,ue=null}function gh(e,t,a,s,l,d,m,v,S){e.cancelPendingCommit=null;do zi();while(Qe!==0);if((xe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=Yl,Hg(e,a,d,m,v,S),e===Ne&&(ue=Ne=null,fe=0),ns=t,za=e,ha=a,Wc=d,Fc=l,sh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dy(Dr,function(){return xh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=M.T,M.T=null,l=H.p,H.p=2,m=xe,xe|=4;try{ey(e,t,a)}finally{xe=m,H.p=l,M.T=s}}Qe=1,yh(),ph(),vh()}}function yh(){if(Qe===1){Qe=0;var e=za,t=ns,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var s=H.p;H.p=2;var l=xe;xe|=4;try{Pf(t,e);var d=go,m=td(e.containerInfo),v=d.focusedElem,S=d.selectionRange;if(m!==v&&v&&v.ownerDocument&&ed(v.ownerDocument.documentElement,v)){if(S!==null&&ql(v)){var T=S.start,z=S.end;if(z===void 0&&(z=T),"selectionStart"in v)v.selectionStart=T,v.selectionEnd=Math.min(z,v.value.length);else{var B=v.ownerDocument||document,O=B&&B.defaultView||window;if(O.getSelection){var k=O.getSelection(),K=v.textContent.length,ee=Math.min(S.start,K),Ae=S.end===void 0?ee:Math.min(S.end,K);!k.extend&&ee>Ae&&(m=Ae,Ae=ee,ee=m);var A=Fu(v,ee),C=Fu(v,Ae);if(A&&C&&(k.rangeCount!==1||k.anchorNode!==A.node||k.anchorOffset!==A.offset||k.focusNode!==C.node||k.focusOffset!==C.offset)){var E=B.createRange();E.setStart(A.node,A.offset),k.removeAllRanges(),ee>Ae?(k.addRange(E),k.extend(C.node,C.offset)):(E.setEnd(C.node,C.offset),k.addRange(E))}}}}for(B=[],k=v;k=k.parentNode;)k.nodeType===1&&B.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<B.length;v++){var D=B[v];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Ki=!!mo,go=mo=null}finally{xe=l,H.p=s,M.T=a}}e.current=t,Qe=2}}function ph(){if(Qe===2){Qe=0;var e=za,t=ns,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var s=H.p;H.p=2;var l=xe;xe|=4;try{Qf(e,t.alternate,t)}finally{xe=l,H.p=s,M.T=a}}Qe=3}}function vh(){if(Qe===4||Qe===3){Qe=0,Rg();var e=za,t=ns,a=ha,s=sh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Qe=5:(Qe=0,ns=za=null,bh(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ua=null),xl(a),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Us,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=M.T,l=H.p,H.p=2,M.T=null;try{for(var d=e.onRecoverableError,m=0;m<s.length;m++){var v=s[m];d(v.value,{componentStack:v.stack})}}finally{M.T=t,H.p=l}}(ha&3)!==0&&zi(),Zt(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===eo?mr++:(mr=0,eo=e):mr=0,gr(0)}}function bh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Zs(t)))}function zi(){return yh(),ph(),vh(),xh()}function xh(){if(Qe!==5)return!1;var e=za,t=Wc;Wc=0;var a=xl(ha),s=M.T,l=H.p;try{H.p=32>a?32:a,M.T=null,a=Fc,Fc=null;var d=za,m=ha;if(Qe=0,ns=za=null,ha=0,(xe&6)!==0)throw Error(i(331));var v=xe;if(xe|=4,th(d.current),Wf(d,d.current,m,a),xe=v,gr(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Us,d)}catch{}return!0}finally{H.p=l,M.T=s,bh(e,t)}}function _h(e,t,a){t=kt(a,t),t=kc(e.stateNode,t,2),e=Ea(e,t,2),e!==null&&(Ms(e,2),Zt(e))}function Se(e,t,a){if(e.tag===3)_h(e,e,a);else for(;t!==null;){if(t.tag===3){_h(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ua===null||!Ua.has(s))){e=kt(a,e),a=wf(2),s=Ea(t,a,2),s!==null&&(Sf(a,s,t,e),Ms(s,2),Zt(s));break}}t=t.return}}function no(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new ny;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(a)||(Zc=!0,l.add(a),e=cy.bind(null,e,t,a),t.then(e,e))}function cy(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ne===e&&(fe&a)===a&&(De===4||De===3&&(fe&62914560)===fe&&300>pt()-Ni?(xe&2)===0&&ss(e,0):Pc|=a,as===fe&&(as=0)),Zt(e)}function wh(e,t){t===0&&(t=gu()),e=nn(e,t),e!==null&&(Ms(e,t),Zt(e))}function oy(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),wh(e,a)}function uy(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),wh(e,a)}function dy(e,t){return yl(e,t)}var Mi=null,is=null,so=!1,Di=!1,ro=!1,Da=0;function Zt(e){e!==is&&e.next===null&&(is===null?Mi=is=e:is=is.next=e),Di=!0,so||(so=!0,hy())}function gr(e,t){if(!ro&&Di){ro=!0;do for(var a=!1,s=Mi;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var d=0;else{var m=s.suspendedLanes,v=s.pingedLanes;d=(1<<31-bt(42|e)+1)-1,d&=l&~(m&~v),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Ah(s,d))}else d=fe,d=Hr(s,s===Ne?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||zs(s,d)||(a=!0,Ah(s,d));s=s.next}while(a);ro=!1}}function fy(){Sh()}function Sh(){Di=so=!1;var e=0;Da!==0&&Sy()&&(e=Da);for(var t=pt(),a=null,s=Mi;s!==null;){var l=s.next,d=jh(s,t);d===0?(s.next=null,a===null?Mi=l:a.next=l,l===null&&(is=a)):(a=s,(e!==0||(d&3)!==0)&&(Di=!0)),s=l}Qe!==0&&Qe!==5||gr(e),Da!==0&&(Da=0)}function jh(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-bt(d),v=1<<m,S=l[m];S===-1?((v&a)===0||(v&s)!==0)&&(l[m]=qg(v,t)):S<=t&&(e.expiredLanes|=v),d&=~v}if(t=Ne,a=fe,a=Hr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(we===2||we===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&pl(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||zs(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&pl(s),xl(a)){case 2:case 8:a=hu;break;case 32:a=Dr;break;case 268435456:a=mu;break;default:a=Dr}return s=Ch.bind(null,e),a=yl(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&pl(s),e.callbackPriority=2,e.callbackNode=null,2}function Ch(e,t){if(Qe!==0&&Qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zi()&&e.callbackNode!==a)return null;var s=fe;return s=Hr(e,e===Ne?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(ih(e,s,t),jh(e,pt()),e.callbackNode!=null&&e.callbackNode===a?Ch.bind(null,e):null)}function Ah(e,t){if(zi())return null;ih(e,t,!0)}function hy(){Cy(function(){(xe&6)!==0?yl(fu,fy):Sh()})}function io(){if(Da===0){var e=Qn;e===0&&(e=Br,Br<<=1,(Br&261888)===0&&(Br=256)),Da=e}return Da}function Eh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yr(""+e)}function Nh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function my(e,t,a,s,l){if(t==="submit"&&a&&a.stateNode===l){var d=Eh((l[ot]||null).action),m=s.submitter;m&&(t=(t=m[ot]||null)?Eh(t.formAction):m.getAttribute("formAction"),t!==null&&(d=t,m=null));var v=new Jr("action","action",null,s,l);e.push({event:v,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Da!==0){var S=m?Nh(l,m):new FormData(l);Ac(a,{pending:!0,data:S,method:l.method,action:d},null,S)}}else typeof d=="function"&&(v.preventDefault(),S=m?Nh(l,m):new FormData(l),Ac(a,{pending:!0,data:S,method:l.method,action:d},d,S))},currentTarget:l}]})}}for(var lo=0;lo<Vl.length;lo++){var co=Vl[lo],gy=co.toLowerCase(),yy=co[0].toUpperCase()+co.slice(1);Gt(gy,"on"+yy)}Gt(sd,"onAnimationEnd"),Gt(rd,"onAnimationIteration"),Gt(id,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(k0,"onTransitionRun"),Gt(U0,"onTransitionStart"),Gt(z0,"onTransitionCancel"),Gt(ld,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),py=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yr));function Th(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],l=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var m=s.length-1;0<=m;m--){var v=s[m],S=v.instance,T=v.currentTarget;if(v=v.listener,S!==d&&l.isPropagationStopped())break e;d=v,l.currentTarget=T;try{d(l)}catch(z){Ir(z)}l.currentTarget=null,d=S}else for(m=0;m<s.length;m++){if(v=s[m],S=v.instance,T=v.currentTarget,v=v.listener,S!==d&&l.isPropagationStopped())break e;d=v,l.currentTarget=T;try{d(l)}catch(z){Ir(z)}l.currentTarget=null,d=S}}}}function de(e,t){var a=t[_l];a===void 0&&(a=t[_l]=new Set);var s=e+"__bubble";a.has(s)||(Oh(t,e,2,!1),a.add(s))}function oo(e,t,a){var s=0;t&&(s|=4),Oh(a,e,s,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function uo(e){if(!e[Bi]){e[Bi]=!0,wu.forEach(function(a){a!=="selectionchange"&&(py.has(a)||oo(a,!1,e),oo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bi]||(t[Bi]=!0,oo("selectionchange",!1,t))}}function Oh(e,t,a,s){switch(rm(t)){case 2:var l=Qy;break;case 8:l=Ky;break;default:l=Ao}a=l.bind(null,t,a,e),l=void 0,!Ol||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function fo(e,t,a,s,l){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var v=s.stateNode.containerInfo;if(v===l)break;if(m===4)for(m=s.return;m!==null;){var S=m.tag;if((S===3||S===4)&&m.stateNode.containerInfo===l)return;m=m.return}for(;v!==null;){if(m=Nn(v),m===null)return;if(S=m.tag,S===5||S===6||S===26||S===27){s=d=m;continue e}v=v.parentNode}}s=s.return}zu(function(){var T=d,z=Nl(a),B=[];e:{var O=cd.get(e);if(O!==void 0){var k=Jr,K=e;switch(e){case"keypress":if(Kr(a)===0)break e;case"keydown":case"keyup":k=u0;break;case"focusin":K="focus",k=zl;break;case"focusout":K="blur",k=zl;break;case"beforeblur":case"afterblur":k=zl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=h0;break;case sd:case rd:case id:k=t0;break;case ld:k=g0;break;case"scroll":case"scrollend":k=Pg;break;case"wheel":k=p0;break;case"copy":case"cut":case"paste":k=n0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=qu;break;case"toggle":case"beforetoggle":k=b0}var ee=(t&4)!==0,Ae=!ee&&(e==="scroll"||e==="scrollend"),A=ee?O!==null?O+"Capture":null:O;ee=[];for(var C=T,E;C!==null;){var D=C;if(E=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||E===null||A===null||(D=Ls(C,A),D!=null&&ee.push(pr(C,D,E))),Ae)break;C=C.return}0<ee.length&&(O=new k(O,K,null,a,z),B.push({event:O,listeners:ee}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",O&&a!==El&&(K=a.relatedTarget||a.fromElement)&&(Nn(K)||K[En]))break e;if((k||O)&&(O=z.window===z?z:(O=z.ownerDocument)?O.defaultView||O.parentWindow:window,k?(K=a.relatedTarget||a.toElement,k=T,K=K?Nn(K):null,K!==null&&(Ae=u(K),ee=K.tag,K!==Ae||ee!==5&&ee!==27&&ee!==6)&&(K=null)):(k=null,K=T),k!==K)){if(ee=Bu,D="onMouseLeave",A="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ee=qu,D="onPointerLeave",A="onPointerEnter",C="pointer"),Ae=k==null?O:Bs(k),E=K==null?O:Bs(K),O=new ee(D,C+"leave",k,a,z),O.target=Ae,O.relatedTarget=E,D=null,Nn(z)===T&&(ee=new ee(A,C+"enter",K,a,z),ee.target=E,ee.relatedTarget=Ae,D=ee),Ae=D,k&&K)t:{for(ee=vy,A=k,C=K,E=0,D=A;D;D=ee(D))E++;D=0;for(var I=C;I;I=ee(I))D++;for(;0<E-D;)A=ee(A),E--;for(;0<D-E;)C=ee(C),D--;for(;E--;){if(A===C||C!==null&&A===C.alternate){ee=A;break t}A=ee(A),C=ee(C)}ee=null}else ee=null;k!==null&&Rh(B,O,k,ee,!1),K!==null&&Ae!==null&&Rh(B,Ae,K,ee,!0)}}e:{if(O=T?Bs(T):window,k=O.nodeName&&O.nodeName.toLowerCase(),k==="select"||k==="input"&&O.type==="file")var pe=Xu;else if(Qu(O))if(Ju)pe=T0;else{pe=E0;var J=A0}else k=O.nodeName,!k||k.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?T&&Al(T.elementType)&&(pe=Xu):pe=N0;if(pe&&(pe=pe(e,T))){Ku(B,pe,a,z);break e}J&&J(e,O,T),e==="focusout"&&T&&O.type==="number"&&T.memoizedProps.value!=null&&Cl(O,"number",O.value)}switch(J=T?Bs(T):window,e){case"focusin":(Qu(J)||J.contentEditable==="true")&&(Bn=J,Hl=T,Ks=null);break;case"focusout":Ks=Hl=Bn=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,ad(B,a,z);break;case"selectionchange":if(R0)break;case"keydown":case"keyup":ad(B,a,z)}var ie;if(Dl)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Dn?Vu(e,a)&&(he="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(he="onCompositionStart");he&&(Hu&&a.locale!=="ko"&&(Dn||he!=="onCompositionStart"?he==="onCompositionEnd"&&Dn&&(ie=Mu()):(xa=z,Rl="value"in xa?xa.value:xa.textContent,Dn=!0)),J=Li(T,he),0<J.length&&(he=new Lu(he,e,null,a,z),B.push({event:he,listeners:J}),ie?he.data=ie:(ie=Yu(a),ie!==null&&(he.data=ie)))),(ie=_0?w0(e,a):S0(e,a))&&(he=Li(T,"onBeforeInput"),0<he.length&&(J=new Lu("onBeforeInput","beforeinput",null,a,z),B.push({event:J,listeners:he}),J.data=ie)),my(B,e,T,a,z)}Th(B,t)})}function pr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Li(e,t){for(var a=t+"Capture",s=[];e!==null;){var l=e,d=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||d===null||(l=Ls(e,a),l!=null&&s.unshift(pr(e,l,d)),l=Ls(e,t),l!=null&&s.push(pr(e,l,d))),e.tag===3)return s;e=e.return}return[]}function vy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rh(e,t,a,s,l){for(var d=t._reactName,m=[];a!==null&&a!==s;){var v=a,S=v.alternate,T=v.stateNode;if(v=v.tag,S!==null&&S===s)break;v!==5&&v!==26&&v!==27||T===null||(S=T,l?(T=Ls(a,d),T!=null&&m.unshift(pr(a,T,S))):l||(T=Ls(a,d),T!=null&&m.push(pr(a,T,S)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var by=/\r\n?/g,xy=/\u0000|\uFFFD/g;function kh(e){return(typeof e=="string"?e:""+e).replace(by,`
`).replace(xy,"")}function Uh(e,t){return t=kh(t),kh(e)===t}function Ce(e,t,a,s,l,d){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Un(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Un(e,""+s);break;case"className":$r(e,"class",s);break;case"tabIndex":$r(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(e,a,s);break;case"style":ku(e,s,d);break;case"data":if(t!=="object"){$r(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Yr(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(t!=="input"&&Ce(e,t,"name",l.name,l,null),Ce(e,t,"formEncType",l.formEncType,l,null),Ce(e,t,"formMethod",l.formMethod,l,null),Ce(e,t,"formTarget",l.formTarget,l,null)):(Ce(e,t,"encType",l.encType,l,null),Ce(e,t,"method",l.method,l,null),Ce(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Yr(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Wt);break;case"onScroll":s!=null&&de("scroll",e);break;case"onScrollEnd":s!=null&&de("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Yr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":de("beforetoggle",e),de("toggle",e),Gr(e,"popover",s);break;case"xlinkActuate":It(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":It(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":It(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":It(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":It(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":It(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":It(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":It(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":It(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Gr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jg.get(a)||a,Gr(e,a,s))}}function ho(e,t,a,s,l,d){switch(a){case"style":ku(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Un(e,s):(typeof s=="number"||typeof s=="bigint")&&Un(e,""+s);break;case"onScroll":s!=null&&de("scroll",e);break;case"onScrollEnd":s!=null&&de("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Wt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Su.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),d=e[ot]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(t,d,l),typeof s=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,l);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Gr(e,a,s)}}}function at(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":de("error",e),de("load",e);var s=!1,l=!1,d;for(d in a)if(a.hasOwnProperty(d)){var m=a[d];if(m!=null)switch(d){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ce(e,t,d,m,a,null)}}l&&Ce(e,t,"srcSet",a.srcSet,a,null),s&&Ce(e,t,"src",a.src,a,null);return;case"input":de("invalid",e);var v=d=m=l=null,S=null,T=null;for(s in a)if(a.hasOwnProperty(s)){var z=a[s];if(z!=null)switch(s){case"name":l=z;break;case"type":m=z;break;case"checked":S=z;break;case"defaultChecked":T=z;break;case"value":d=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,t));break;default:Ce(e,t,s,z,a,null)}}Nu(e,d,v,S,T,m,l,!1);return;case"select":de("invalid",e),s=m=d=null;for(l in a)if(a.hasOwnProperty(l)&&(v=a[l],v!=null))switch(l){case"value":d=v;break;case"defaultValue":m=v;break;case"multiple":s=v;default:Ce(e,t,l,v,a,null)}t=d,a=m,e.multiple=!!s,t!=null?kn(e,!!s,t,!1):a!=null&&kn(e,!!s,a,!0);return;case"textarea":de("invalid",e),d=l=s=null;for(m in a)if(a.hasOwnProperty(m)&&(v=a[m],v!=null))switch(m){case"value":s=v;break;case"defaultValue":l=v;break;case"children":d=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:Ce(e,t,m,v,a,null)}Ou(e,s,l,d);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(s=a[S],s!=null))switch(S){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ce(e,t,S,s,a,null)}return;case"dialog":de("beforetoggle",e),de("toggle",e),de("cancel",e),de("close",e);break;case"iframe":case"object":de("load",e);break;case"video":case"audio":for(s=0;s<yr.length;s++)de(yr[s],e);break;case"image":de("error",e),de("load",e);break;case"details":de("toggle",e);break;case"embed":case"source":case"link":de("error",e),de("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(T in a)if(a.hasOwnProperty(T)&&(s=a[T],s!=null))switch(T){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ce(e,t,T,s,a,null)}return;default:if(Al(t)){for(z in a)a.hasOwnProperty(z)&&(s=a[z],s!==void 0&&ho(e,t,z,s,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(s=a[v],s!=null&&Ce(e,t,v,s,a,null))}function _y(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,d=null,m=null,v=null,S=null,T=null,z=null;for(k in a){var B=a[k];if(a.hasOwnProperty(k)&&B!=null)switch(k){case"checked":break;case"value":break;case"defaultValue":S=B;default:s.hasOwnProperty(k)||Ce(e,t,k,null,s,B)}}for(var O in s){var k=s[O];if(B=a[O],s.hasOwnProperty(O)&&(k!=null||B!=null))switch(O){case"type":d=k;break;case"name":l=k;break;case"checked":T=k;break;case"defaultChecked":z=k;break;case"value":m=k;break;case"defaultValue":v=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(137,t));break;default:k!==B&&Ce(e,t,O,k,s,B)}}jl(e,m,v,S,T,z,d,l);return;case"select":k=m=v=O=null;for(d in a)if(S=a[d],a.hasOwnProperty(d)&&S!=null)switch(d){case"value":break;case"multiple":k=S;default:s.hasOwnProperty(d)||Ce(e,t,d,null,s,S)}for(l in s)if(d=s[l],S=a[l],s.hasOwnProperty(l)&&(d!=null||S!=null))switch(l){case"value":O=d;break;case"defaultValue":v=d;break;case"multiple":m=d;default:d!==S&&Ce(e,t,l,d,s,S)}t=v,a=m,s=k,O!=null?kn(e,!!a,O,!1):!!s!=!!a&&(t!=null?kn(e,!!a,t,!0):kn(e,!!a,a?[]:"",!1));return;case"textarea":k=O=null;for(v in a)if(l=a[v],a.hasOwnProperty(v)&&l!=null&&!s.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ce(e,t,v,null,s,l)}for(m in s)if(l=s[m],d=a[m],s.hasOwnProperty(m)&&(l!=null||d!=null))switch(m){case"value":O=l;break;case"defaultValue":k=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(i(91));break;default:l!==d&&Ce(e,t,m,l,s,d)}Tu(e,O,k);return;case"option":for(var K in a)if(O=a[K],a.hasOwnProperty(K)&&O!=null&&!s.hasOwnProperty(K))switch(K){case"selected":e.selected=!1;break;default:Ce(e,t,K,null,s,O)}for(S in s)if(O=s[S],k=a[S],s.hasOwnProperty(S)&&O!==k&&(O!=null||k!=null))switch(S){case"selected":e.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Ce(e,t,S,O,s,k)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in a)O=a[ee],a.hasOwnProperty(ee)&&O!=null&&!s.hasOwnProperty(ee)&&Ce(e,t,ee,null,s,O);for(T in s)if(O=s[T],k=a[T],s.hasOwnProperty(T)&&O!==k&&(O!=null||k!=null))switch(T){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(137,t));break;default:Ce(e,t,T,O,s,k)}return;default:if(Al(t)){for(var Ae in a)O=a[Ae],a.hasOwnProperty(Ae)&&O!==void 0&&!s.hasOwnProperty(Ae)&&ho(e,t,Ae,void 0,s,O);for(z in s)O=s[z],k=a[z],!s.hasOwnProperty(z)||O===k||O===void 0&&k===void 0||ho(e,t,z,O,s,k);return}}for(var A in a)O=a[A],a.hasOwnProperty(A)&&O!=null&&!s.hasOwnProperty(A)&&Ce(e,t,A,null,s,O);for(B in s)O=s[B],k=a[B],!s.hasOwnProperty(B)||O===k||O==null&&k==null||Ce(e,t,B,O,s,k)}function zh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var l=a[s],d=l.transferSize,m=l.initiatorType,v=l.duration;if(d&&v&&zh(m)){for(m=0,v=l.responseEnd,s+=1;s<a.length;s++){var S=a[s],T=S.startTime;if(T>v)break;var z=S.transferSize,B=S.initiatorType;z&&zh(B)&&(S=S.responseEnd,m+=z*(S<v?1:(v-T)/(S-T)))}if(--s,t+=8*(d+m)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var mo=null,go=null;function qi(e){return e.nodeType===9?e:e.ownerDocument}function Mh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var po=null;function Sy(){var e=window.event;return e&&e.type==="popstate"?e===po?!1:(po=e,!0):(po=null,!1)}var Bh=typeof setTimeout=="function"?setTimeout:void 0,jy=typeof clearTimeout=="function"?clearTimeout:void 0,Lh=typeof Promise=="function"?Promise:void 0,Cy=typeof queueMicrotask=="function"?queueMicrotask:typeof Lh<"u"?function(e){return Lh.resolve(null).then(e).catch(Ay)}:Bh;function Ay(e){setTimeout(function(){throw e})}function Ba(e){return e==="head"}function qh(e,t){var a=t,s=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(l),us(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")vr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,vr(a);for(var d=a.firstChild;d;){var m=d.nextSibling,v=d.nodeName;d[Ds]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=m}}else a==="body"&&vr(e.ownerDocument.body);a=l}while(a);us(t)}function Hh(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function vo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vo(a),wl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ey(e,t,a,s){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ds])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function Ny(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bt(e.nextSibling),e===null))return null;return e}function Gh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bt(e.nextSibling),e===null))return null;return e}function bo(e){return e.data==="$?"||e.data==="$~"}function xo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ty(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _o=null;function $h(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Bt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Vh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Yh(e,t,a){switch(t=qi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function vr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);wl(e)}var Lt=new Map,Qh=new Set;function Hi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ma=H.d;H.d={f:Oy,r:Ry,D:ky,C:Uy,L:zy,m:My,X:By,S:Dy,M:Ly};function Oy(){var e=ma.f(),t=Ri();return e||t}function Ry(e){var t=Tn(e);t!==null&&t.tag===5&&t.type==="form"?cf(t):ma.r(e)}var ls=typeof document>"u"?null:document;function Kh(e,t,a){var s=ls;if(s&&typeof t=="string"&&t){var l=Ot(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),Qh.has(l)||(Qh.add(l),e={rel:e,crossOrigin:a,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),at(t,"link",e),Je(t),s.head.appendChild(t)))}}function ky(e){ma.D(e),Kh("dns-prefetch",e,null)}function Uy(e,t){ma.C(e,t),Kh("preconnect",e,t)}function zy(e,t,a){ma.L(e,t,a);var s=ls;if(s&&e&&t){var l='link[rel="preload"][as="'+Ot(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Ot(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Ot(a.imageSizes)+'"]')):l+='[href="'+Ot(e)+'"]';var d=l;switch(t){case"style":d=cs(e);break;case"script":d=os(e)}Lt.has(d)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Lt.set(d,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(br(d))||t==="script"&&s.querySelector(xr(d))||(t=s.createElement("link"),at(t,"link",e),Je(t),s.head.appendChild(t)))}}function My(e,t){ma.m(e,t);var a=ls;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Ot(s)+'"][href="'+Ot(e)+'"]',d=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=os(e)}if(!Lt.has(d)&&(e=b({rel:"modulepreload",href:e},t),Lt.set(d,e),a.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xr(d)))return}s=a.createElement("link"),at(s,"link",e),Je(s),a.head.appendChild(s)}}}function Dy(e,t,a){ma.S(e,t,a);var s=ls;if(s&&e){var l=On(s).hoistableStyles,d=cs(e);t=t||"default";var m=l.get(d);if(!m){var v={loading:0,preload:null};if(m=s.querySelector(br(d)))v.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Lt.get(d))&&wo(e,a);var S=m=s.createElement("link");Je(S),at(S,"link",e),S._p=new Promise(function(T,z){S.onload=T,S.onerror=z}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Gi(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:v},l.set(d,m)}}}function By(e,t){ma.X(e,t);var a=ls;if(a&&e){var s=On(a).hoistableScripts,l=os(e),d=s.get(l);d||(d=a.querySelector(xr(l)),d||(e=b({src:e,async:!0},t),(t=Lt.get(l))&&So(e,t),d=a.createElement("script"),Je(d),at(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(l,d))}}function Ly(e,t){ma.M(e,t);var a=ls;if(a&&e){var s=On(a).hoistableScripts,l=os(e),d=s.get(l);d||(d=a.querySelector(xr(l)),d||(e=b({src:e,async:!0,type:"module"},t),(t=Lt.get(l))&&So(e,t),d=a.createElement("script"),Je(d),at(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(l,d))}}function Xh(e,t,a,s){var l=(l=Nt.current)?Hi(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=cs(a.href),a=On(l).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=cs(a.href);var d=On(l).hoistableStyles,m=d.get(e);if(m||(l=l.ownerDocument||l,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=l.querySelector(br(e)))&&!d._p&&(m.instance=d,m.state.loading=5),Lt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Lt.set(e,a),d||qy(l,e,a,m.state))),t&&s===null)throw Error(i(528,""));return m}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=os(a),a=On(l).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function cs(e){return'href="'+Ot(e)+'"'}function br(e){return'link[rel="stylesheet"]['+e+"]"}function Jh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function qy(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),at(t,"link",a),Je(t),e.head.appendChild(t))}function os(e){return'[src="'+Ot(e)+'"]'}function xr(e){return"script[async]"+e}function Zh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Ot(a.href)+'"]');if(s)return t.instance=s,Je(s),s;var l=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Je(s),at(s,"style",l),Gi(s,a.precedence,e),t.instance=s;case"stylesheet":l=cs(a.href);var d=e.querySelector(br(l));if(d)return t.state.loading|=4,t.instance=d,Je(d),d;s=Jh(a),(l=Lt.get(l))&&wo(s,l),d=(e.ownerDocument||e).createElement("link"),Je(d);var m=d;return m._p=new Promise(function(v,S){m.onload=v,m.onerror=S}),at(d,"link",s),t.state.loading|=4,Gi(d,a.precedence,e),t.instance=d;case"script":return d=os(a.src),(l=e.querySelector(xr(d)))?(t.instance=l,Je(l),l):(s=a,(l=Lt.get(d))&&(s=b({},a),So(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),Je(l),at(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Gi(s,a.precedence,e));return t.instance}function Gi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,d=l,m=0;m<s.length;m++){var v=s[m];if(v.dataset.precedence===t)d=v;else if(d!==l)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function wo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function So(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $i=null;function Ph(e,t,a){if($i===null){var s=new Map,l=$i=new Map;l.set(a,s)}else l=$i,s=l.get(a),s||(s=new Map,l.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var d=a[l];if(!(d[Ds]||d[We]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(t)||"";m=e+m;var v=s.get(m);v?v.push(d):s.set(m,[d])}}return s}function Ih(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Hy(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Wh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Gy(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=cs(s.href),d=t.querySelector(br(l));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Vi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=d,Je(d);return}d=t.ownerDocument||t,s=Jh(s),(l=Lt.get(l))&&wo(s,l),d=d.createElement("link"),Je(d);var m=d;m._p=new Promise(function(v,S){m.onload=v,m.onerror=S}),at(d,"link",s),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Vi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var jo=0;function $y(e,t){return e.stylesheets&&e.count===0&&Qi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Qi(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&jo===0&&(jo=62500*wy());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qi(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>jo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function Vi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yi=null;function Qi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yi=new Map,t.forEach(Vy,e),Yi=null,Vi.call(e))}function Vy(e,t){if(!(t.state.loading&4)){var a=Yi.get(e);if(a)var s=a.get(null);else{a=new Map,Yi.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<l.length;d++){var m=l[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),s=m)}s&&a.set(null,s)}l=t.instance,m=l.getAttribute("data-precedence"),d=a.get(m)||s,d===s&&a.set(null,l),a.set(m,l),this.count++,s=Vi.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),d?d.parentNode.insertBefore(l,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var _r={$$typeof:q,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Yy(e,t,a,s,l,d,m,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.hiddenUpdates=vl(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Fh(e,t,a,s,l,d,m,v,S,T,z,B){return e=new Yy(e,t,a,m,S,T,z,B,v),t=1,d===!0&&(t|=24),d=_t(3,null,null,t),e.current=d,d.stateNode=e,t=ac(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:s,isDehydrated:a,cache:t},ic(d),e}function em(e){return e?(e=Hn,e):Hn}function tm(e,t,a,s,l,d){l=em(l),s.context===null?s.context=l:s.pendingContext=l,s=Aa(t),s.payload={element:a},d=d===void 0?null:d,d!==null&&(s.callback=d),a=Ea(e,s,t),a!==null&&(gt(a,e,t),Fs(a,e,t))}function am(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Co(e,t){am(e,t),(e=e.alternate)&&am(e,t)}function nm(e){if(e.tag===13||e.tag===31){var t=nn(e,67108864);t!==null&&gt(t,e,67108864),Co(e,67108864)}}function sm(e){if(e.tag===13||e.tag===31){var t=At();t=bl(t);var a=nn(e,t);a!==null&&gt(a,e,t),Co(e,t)}}var Ki=!0;function Qy(e,t,a,s){var l=M.T;M.T=null;var d=H.p;try{H.p=2,Ao(e,t,a,s)}finally{H.p=d,M.T=l}}function Ky(e,t,a,s){var l=M.T;M.T=null;var d=H.p;try{H.p=8,Ao(e,t,a,s)}finally{H.p=d,M.T=l}}function Ao(e,t,a,s){if(Ki){var l=Eo(s);if(l===null)fo(e,t,s,Xi,a),im(e,s);else if(Jy(l,e,t,a,s))s.stopPropagation();else if(im(e,s),t&4&&-1<Xy.indexOf(e)){for(;l!==null;){var d=Tn(l);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=Wa(d.pendingLanes);if(m!==0){var v=d;for(v.pendingLanes|=2,v.entangledLanes|=2;m;){var S=1<<31-bt(m);v.entanglements[1]|=S,m&=~S}Zt(d),(xe&6)===0&&(Ti=pt()+500,gr(0))}}break;case 31:case 13:v=nn(d,2),v!==null&&gt(v,d,2),Ri(),Co(d,2)}if(d=Eo(s),d===null&&fo(e,t,s,Xi,a),d===l)break;l=d}l!==null&&s.stopPropagation()}else fo(e,t,s,null,a)}}function Eo(e){return e=Nl(e),No(e)}var Xi=null;function No(e){if(Xi=null,e=Nn(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xi=e,null}function rm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kg()){case fu:return 2;case hu:return 8;case Dr:case Ug:return 32;case mu:return 268435456;default:return 32}default:return 32}}var To=!1,La=null,qa=null,Ha=null,wr=new Map,Sr=new Map,Ga=[],Xy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function im(e,t){switch(e){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(t.pointerId)}}function jr(e,t,a,s,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:d,targetContainers:[l]},t!==null&&(t=Tn(t),t!==null&&nm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Jy(e,t,a,s,l){switch(t){case"focusin":return La=jr(La,e,t,a,s,l),!0;case"dragenter":return qa=jr(qa,e,t,a,s,l),!0;case"mouseover":return Ha=jr(Ha,e,t,a,s,l),!0;case"pointerover":var d=l.pointerId;return wr.set(d,jr(wr.get(d)||null,e,t,a,s,l)),!0;case"gotpointercapture":return d=l.pointerId,Sr.set(d,jr(Sr.get(d)||null,e,t,a,s,l)),!0}return!1}function lm(e){var t=Nn(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,xu(e.priority,function(){sm(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,xu(e.priority,function(){sm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Eo(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);El=s,a.target.dispatchEvent(s),El=null}else return t=Tn(a),t!==null&&nm(t),e.blockedOn=a,!1;t.shift()}return!0}function cm(e,t,a){Ji(e)&&a.delete(t)}function Zy(){To=!1,La!==null&&Ji(La)&&(La=null),qa!==null&&Ji(qa)&&(qa=null),Ha!==null&&Ji(Ha)&&(Ha=null),wr.forEach(cm),Sr.forEach(cm)}function Zi(e,t){e.blockedOn===t&&(e.blockedOn=null,To||(To=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Zy)))}var Pi=null;function om(e){Pi!==e&&(Pi=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Pi===e&&(Pi=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(No(s||a)===null)continue;break}var d=Tn(a);d!==null&&(e.splice(t,3),t-=3,Ac(d,{pending:!0,data:l,method:a.method,action:s},s,l))}}))}function us(e){function t(S){return Zi(S,e)}La!==null&&Zi(La,e),qa!==null&&Zi(qa,e),Ha!==null&&Zi(Ha,e),wr.forEach(t),Sr.forEach(t);for(var a=0;a<Ga.length;a++){var s=Ga[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ga.length&&(a=Ga[0],a.blockedOn===null);)lm(a),a.blockedOn===null&&Ga.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var l=a[s],d=a[s+1],m=l[ot]||null;if(typeof d=="function")m||om(a);else if(m){var v=null;if(d&&d.hasAttribute("formAction")){if(l=d,m=d[ot]||null)v=m.formAction;else if(No(l)!==null)continue}else v=m.action;typeof v=="function"?a[s+1]=v:(a.splice(s,3),s-=3),om(a)}}}function um(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return l=m})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Oo(e){this._internalRoot=e}Ii.prototype.render=Oo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,s=At();tm(a,s,e,t,null,null)},Ii.prototype.unmount=Oo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tm(e.current,2,null,e,null,null),Ri(),t[En]=null}};function Ii(e){this._internalRoot=e}Ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=bu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ga.length&&t!==0&&t<Ga[a].priority;a++);Ga.splice(a,0,e),a===0&&lm(e)}};var dm=n.version;if(dm!=="19.2.0")throw Error(i(527,dm,"19.2.0"));H.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Py={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wi.isDisabled&&Wi.supportsFiber)try{Us=Wi.inject(Py),vt=Wi}catch{}}return Ar.createRoot=function(e,t){if(!c(e))throw Error(i(299));var a=!1,s="",l=vf,d=bf,m=xf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Fh(e,1,!1,null,null,a,s,null,l,d,m,um),e[En]=t.current,uo(e),new Oo(t)},Ar.hydrateRoot=function(e,t,a){if(!c(e))throw Error(i(299));var s=!1,l="",d=vf,m=bf,v=xf,S=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=Fh(e,1,!0,t,a??null,s,l,S,d,m,v,um),t.context=em(null),a=t.current,s=At(),s=bl(s),l=Aa(s),l.callback=null,Ea(a,l,s),a=s,t.current.lanes=a,Ms(t,a),Zt(t),e[En]=t.current,uo(e),new Ii(t)},Ar.version="19.2.0",Ar}var vm;function pp(){if(vm)return zo.exports;vm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),zo.exports=yp(),zo.exports}var vp=pp();const bp=eg(vp);function cl(o){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)}function bm(o){if(!o?.trim())return{isValid:!1,error:"Username is required"};const n=o.trim();return n.length<3||n.length>30?{isValid:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(n)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}function xp(o){if(!o)return{isValid:!1,error:"Password is required"};if(o.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};const n=/[a-z]/.test(o),r=/[A-Z]/.test(o),i=/\d/.test(o),c=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);return!n||!r||!i||!c?{isValid:!1,error:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:{isValid:!0}}function xm(o){return o?.trim()?o.length>100?{isValid:!1,error:"Campaign name must be 100 characters or less"}:{isValid:!0}:{isValid:!1,error:"Campaign name is required"}}function _m(o){return["admin","gm","player"].includes(o)}function tg(o){const{isAdmin:n,isGm:r,isPlayer:i}=o;return!(!n&&!r&&!i||r&&i&&!n)}function Bo(o){return typeof o=="string"?["admin","gm"].includes(o):o.isAdmin||o.isGm}function _p(o){return typeof o=="string"?o==="admin":o.isAdmin}function wp(o){return typeof o=="string"?o==="admin":o.isAdmin}function hl(o){const n=[];return o.isAdmin&&n.push("Admin"),o.isGm&&n.push("GM"),o.isPlayer&&n.push("Player"),n.length===0?"No roles":n.length===1?n[0]:n.length===2?n.join(" + "):`${n.slice(0,-1).join(", ")} + ${n[n.length-1]}`}function Er(o,n){return`Only ${n.length===1?`${n[0]}s`:`${n.slice(0,-1).join(", ")} and ${n[n.length-1]}s`} can ${o}`}class Sp{authRepository;constructor(n){this.authRepository=n}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:cl(n)?this.authRepository.signIn(n,r):{success:!1,error:"Invalid email format"}}async signUp(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:cl(n)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(n,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(n){return this.authRepository.onAuthStateChange(n)}async completeProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.displayName?.trim())return{success:!1,error:"Display name is required"};const i=bm(n.username);return i.isValid?this.authRepository.completeProfile(r.id,n.displayName.trim(),n.username.trim()):{success:!1,error:i.error}}async updateProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(n.displayName!==void 0&&!n.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(n.username!==void 0){const i=bm(n.username);if(!i.isValid)return{success:!1,error:i.error}}return this.authRepository.updateProfile(r.id,n.displayName?.trim(),n.username?.trim())}async changePassword(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.currentPassword)return{success:!1,error:"Current password is required"};const i=xp(n.newPassword);return i.isValid?this.authRepository.changePassword(r.id,n.currentPassword,n.newPassword):{success:!1,error:i.error}}async deleteAccount(){const n=await this.authRepository.getCurrentUser();return n?this.authRepository.deleteAccount(n.id):{success:!1,error:"User not authenticated"}}}class jp{campaignRepository;authRepository;constructor(n,r){this.campaignRepository=n,this.authRepository=r}async getCampaigns(){const n=await this.authRepository.getCurrentUser();return n?this.campaignRepository.getCampaigns(n.id):{success:!1,error:"User not authenticated"}}async getCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(n)}async createCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=xm(n.name);if(!i.isValid)return{success:!1,error:i.error};const c=n.creatorIsAlsoGM||!1;if(n.initialMembers)for(const h of n.initialMembers){if(!cl(h.email))return{success:!1,error:`Invalid email format: ${h.email}`};if(!_m(h.role))return{success:!1,error:`Invalid role: ${h.role}`}}const u=await this.campaignRepository.createCampaign(r.id,{name:n.name.trim(),description:n.description?.trim()},c);if(!u.success)return u;if(n.initialMembers&&n.initialMembers.length>0&&u.data)for(const h of n.initialMembers)await this.campaignRepository.addMemberByEmail(u.data.id,h.email.trim(),h.role);return u}async updateCampaign(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(n,i.id);if(!c.success||!c.data||!_p(c.data))return{success:!1,error:Er("update campaigns",["admin"])};if(r.name!==void 0){const h=xm(r.name);if(!h.isValid)return{success:!1,error:h.error}}const u={};return r.name!==void 0&&(u.name=r.name.trim()),r.description!==void 0&&(u.description=r.description?.trim()),this.campaignRepository.updateCampaign(n,u)}async deleteCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.getUserRole(n,r.id);return!i.success||!i.data||!wp(i.data)?{success:!1,error:Er("delete campaigns",["admin"])}:this.campaignRepository.deleteCampaign(n)}async getCampaignMembers(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(n)}async addMemberByEmail(n,r,i){const c=await this.authRepository.getCurrentUser();if(!c)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,c.id);return!u.success||!u.data||!Bo(u.data)?{success:!1,error:Er("add members",["admin","gm"])}:r?.trim()?cl(r)?_m(i)?this.campaignRepository.addMemberByEmail(n,r.trim(),i):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(n,r,i){const c=await this.authRepository.getCurrentUser();if(!c)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,c.id);return!u.success||!u.data||!Bo(u.data)?{success:!1,error:Er("update member roles",["admin","gm"])}:tg(i)?this.campaignRepository.updateMemberRole(n,r,i):{success:!1,error:"Invalid role combination. Must have at least one role and cannot be GM+Player without Admin."}}async removeMember(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(n,i.id);return!c.success||!c.data||!Bo(c.data)?{success:!1,error:Er("remove members",["admin","gm"])}:this.campaignRepository.removeMember(n,r)}}const Cp="modulepreload",Ap=function(o){return"/traveller-dashboard/"+o},wm={},Za=function(n,r,i){let c=Promise.resolve();if(r&&r.length>0){let y=function(p){return Promise.all(p.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");c=y(r.map(p=>{if(p=Ap(p),p in wm)return;wm[p]=!0;const x=p.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":Cp,x||(_.as="script"),_.crossOrigin="",_.href=p,g&&_.setAttribute("nonce",g),document.head.appendChild(_),x)return new Promise((w,j)=>{_.addEventListener("load",w),_.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return c.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return n().catch(u)})},Ep=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Os);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)};class ru extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class Sm extends ru{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class jm extends ru{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Cm extends ru{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Xo;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Xo||(Xo={}));var Np=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};class Tp{constructor(n,{headers:r={},customFetch:i,region:c=Xo.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=Ep(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Np(this,arguments,void 0,function*(r,i={}){var c;try{const{headers:u,method:h,body:g,signal:y}=i;let p={},{region:x}=i;x||(x=this.region);const b=new URL(`${this.url}/${r}`);x&&x!=="any"&&(p["x-region"]=x,b.searchParams.set("forceFunctionRegion",x));let _;g&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=g):typeof g=="string"?(p["Content-Type"]="text/plain",_=g):typeof FormData<"u"&&g instanceof FormData?_=g:(p["Content-Type"]="application/json",_=JSON.stringify(g)));const w=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),u),body:_,signal:y}).catch($=>{throw $.name==="AbortError"?$:new Sm($)}),j=w.headers.get("x-relay-error");if(j&&j==="true")throw new jm(w);if(!w.ok)throw new Cm(w);let N=((c=w.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),U;return N==="application/json"?U=yield w.json():N==="application/octet-stream"?U=yield w.blob():N==="text/event-stream"?U=w:N==="multipart/form-data"?U=yield w.formData():U=yield w.text(),{data:U,error:null,response:w}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new Sm(u)}:{data:null,error:u,response:u instanceof Cm||u instanceof jm?u.context:void 0}}})}}var Pe={},ds={},fs={},hs={},ms={},gs={},Op=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ns=Op();const Rp=Ns.fetch,ag=Ns.fetch.bind(Ns),ng=Ns.Headers,kp=Ns.Request,Up=Ns.Response,Os=Object.freeze(Object.defineProperty({__proto__:null,Headers:ng,Request:kp,Response:Up,default:ag,fetch:Rp},Symbol.toStringTag,{value:"Module"})),zp=op(Os);var Fi={},Am;function sg(){if(Am)return Fi;Am=1,Object.defineProperty(Fi,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Fi.default=o,Fi}var Em;function rg(){if(Em)return gs;Em=1;var o=gs&&gs.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(gs,"__esModule",{value:!0});const n=o(zp),r=o(sg());class i{constructor(u){var h,g;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(g=u.isMaybeSingle)!==null&&g!==void 0?g:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let y=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,b,_,w;let j=null,N=null,U=null,$=p.status,L=p.statusText;if(p.ok){if(this.method!=="HEAD"){const G=await p.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?N=G:N=JSON.parse(G))}const V=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),Y=(_=p.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");V&&Y&&Y.length>1&&(U=parseInt(Y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(j={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,U=null,$=406,L="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const V=await p.text();try{j=JSON.parse(V),Array.isArray(j)&&p.status===404&&(N=[],j=null,$=200,L="OK")}catch{p.status===404&&V===""?($=204,L="No Content"):j={message:V}}if(j&&this.isMaybeSingle&&(!((w=j?.details)===null||w===void 0)&&w.includes("0 rows"))&&(j=null,$=200,L="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:N,count:U,status:$,statusText:L}});return this.shouldThrowOnError||(y=y.catch(p=>{var x,b,_;return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:`${(b=p?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(_=p?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),y.then(u,h)}returns(){return this}overrideTypes(){return this}}return gs.default=i,gs}var Nm;function ig(){if(Nm)return ms;Nm=1;var o=ms&&ms.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ms,"__esModule",{value:!0});const n=o(rg());class r extends n.default{select(c){let u=!1;const h=(c??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:g,referencedTable:y=g}={}){const p=y?`${y}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:g=h}={}){const y=typeof g>"u"?"offset":`${g}.offset`,p=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${c}`),this.url.searchParams.set(p,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:g=!1,wal:y=!1,format:p="text"}={}){var x;const b=[c?"analyze":null,u?"verbose":null,h?"settings":null,g?"buffers":null,y?"wal":null].filter(Boolean).join("|"),_=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${b};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return ms.default=r,ms}var Tm;function iu(){if(Tm)return hs;Tm=1;var o=hs&&hs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(hs,"__esModule",{value:!0});const n=o(ig());class r extends n.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const h=Array.from(new Set(u)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:h,type:g}={}){let y="";g==="plain"?y="pl":g==="phrase"?y="ph":g==="websearch"&&(y="w");const p=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${y}fts${p}.${u}`),this}match(c){return Object.entries(c).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(c,u,h){return this.url.searchParams.append(c,`not.${u}.${h}`),this}or(c,{foreignTable:u,referencedTable:h=u}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${c})`),this}filter(c,u,h){return this.url.searchParams.append(c,`${u}.${h}`),this}}return hs.default=r,hs}var Om;function lg(){if(Om)return fs;Om=1;var o=fs&&fs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(fs,"__esModule",{value:!0});const n=o(iu());class r{constructor(c,{headers:u={},schema:h,fetch:g}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=g}select(c,u){const{head:h=!1,count:g}=u??{},y=h?"HEAD":"GET";let p=!1;const x=(c??"*").split("").map(b=>/\s/.test(b)&&!p?"":(b==='"'&&(p=!p),b)).join("");return this.url.searchParams.set("select",x),g&&this.headers.append("Prefer",`count=${g}`),new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var g;const y="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const p=c.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(p.length>0){const x=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:g,defaultToNull:y=!0}={}){var p;const x="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),g&&this.headers.append("Prefer",`count=${g}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const b=c.reduce((_,w)=>_.concat(Object.keys(w)),[]);if(b.length>0){const _=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(c,{count:u}={}){var h;const g="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return fs.default=r,fs}var Rm;function Mp(){if(Rm)return ds;Rm=1;var o=ds&&ds.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ds,"__esModule",{value:!0});const n=o(lg()),r=o(iu());class i{constructor(u,{headers:h={},schema:g,fetch:y}={}){this.url=u,this.headers=new Headers(h),this.schemaName=g,this.fetch=y}from(u){const h=new URL(`${this.url}/${u}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:g=!1,get:y=!1,count:p}={}){var x;let b;const _=new URL(`${this.url}/rpc/${u}`);let w;g||y?(b=g?"HEAD":"GET",Object.entries(h).filter(([N,U])=>U!==void 0).map(([N,U])=>[N,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([N,U])=>{_.searchParams.append(N,U)})):(b="POST",w=h);const j=new Headers(this.headers);return p&&j.set("Prefer",`count=${p}`),new r.default({method:b,url:_,headers:j,schema:this.schemaName,body:w,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return ds.default=i,ds}var km;function Dp(){if(km)return Pe;km=1;var o=Pe&&Pe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.PostgrestError=Pe.PostgrestBuilder=Pe.PostgrestTransformBuilder=Pe.PostgrestFilterBuilder=Pe.PostgrestQueryBuilder=Pe.PostgrestClient=void 0;const n=o(Mp());Pe.PostgrestClient=n.default;const r=o(lg());Pe.PostgrestQueryBuilder=r.default;const i=o(iu());Pe.PostgrestFilterBuilder=i.default;const c=o(ig());Pe.PostgrestTransformBuilder=c.default;const u=o(rg());Pe.PostgrestBuilder=u.default;const h=o(sg());return Pe.PostgrestError=h.default,Pe.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},Pe}var Bp=Dp();const Lp=eg(Bp),{PostgrestClient:qp,PostgrestQueryBuilder:c_,PostgrestFilterBuilder:o_,PostgrestTransformBuilder:u_,PostgrestBuilder:d_,PostgrestError:f_}=Lp;class Hp{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Gp="2.75.0",$p=`realtime-js/${Gp}`,Vp="1.0.0",Jo=1e4,Yp=1e3,Qp=100;var Tr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Tr||(Tr={}));var Ke;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Ke||(Ke={}));var Qt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Qt||(Qt={}));var Zo;(function(o){o.websocket="websocket"})(Zo||(Zo={}));var xn;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(xn||(xn={}));class Kp{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,r,i)}_decodeBroadcast(n,r,i){const c=r.getUint8(1),u=r.getUint8(2);let h=this.HEADER_LENGTH+2;const g=i.decode(n.slice(h,h+c));h=h+c;const y=i.decode(n.slice(h,h+u));h=h+u;const p=JSON.parse(i.decode(n.slice(h,n.byteLength)));return{ref:null,topic:g,event:y,payload:p}}}class cg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Te||(Te={}));const Um=(o,n,r={})=>{var i;const c=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((u,h)=>(u[h]=Xp(h,o,n,c),u),{}):{}},Xp=(o,n,r,i)=>{const c=n.find(g=>g.name===o),u=c?.type,h=r[o];return u&&!i.includes(u)?og(u,h):Po(h)},og=(o,n)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return Ip(n,r)}switch(o){case Te.bool:return Jp(n);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return Zp(n);case Te.json:case Te.jsonb:return Pp(n);case Te.timestamp:return Wp(n);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return Po(n);default:return Po(n)}},Po=o=>o,Jp=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Zp=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Pp=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Ip=(o,n)=>{if(typeof o!="string")return o;const r=o.length-1,i=o[r];if(o[0]==="{"&&i==="}"){let u;const h=o.slice(1,r);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(g=>og(n,g))}return o},Wp=o=>typeof o=="string"?o.replace(" ","T"):o,ug=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Lo{constructor(n,r,i={},c=Jo){this.channel=n,this.event=r,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var zm;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(zm||(zm={}));class Or{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Or.syncState(this.state,c,u,h),this.pendingDiffs.forEach(y=>{this.state=Or.syncDiff(this.state,y,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Or.syncDiff(this.state,c,u,h),g())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,c){const u=this.cloneDeep(n),h=this.transformState(r),g={},y={};return this.map(u,(p,x)=>{h[p]||(y[p]=x)}),this.map(h,(p,x)=>{const b=u[p];if(b){const _=x.map(U=>U.presence_ref),w=b.map(U=>U.presence_ref),j=x.filter(U=>w.indexOf(U.presence_ref)<0),N=b.filter(U=>_.indexOf(U.presence_ref)<0);j.length>0&&(g[p]=j),N.length>0&&(y[p]=N)}else g[p]=x}),this.syncDiff(u,{joins:g,leaves:y},i,c)}static syncDiff(n,r,i,c){const{joins:u,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(g,y)=>{var p;const x=(p=n[g])!==null&&p!==void 0?p:[];if(n[g]=this.cloneDeep(y),x.length>0){const b=n[g].map(w=>w.presence_ref),_=x.filter(w=>b.indexOf(w.presence_ref)<0);n[g].unshift(..._)}i(g,x,y)}),this.map(h,(g,y)=>{let p=n[g];if(!p)return;const x=y.map(b=>b.presence_ref);p=p.filter(b=>x.indexOf(b.presence_ref)<0),n[g]=p,c(g,p,y),p.length===0&&delete n[g]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const c=n[i];return"metas"in c?r[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[i]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mm;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Mm||(Mm={}));var Rr;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Rr||(Rr={}));var ga;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(ga||(ga={}));class lu{constructor(n,r={config:{}},i){var c,u;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Lo(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new cg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new Or(this),this.broadcastEndpointURL=ug(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:h,presence:g,private:y}}=this.params,p=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&c!==void 0?c:[],x=!!this.bindings[Rr.PRESENCE]&&this.bindings[Rr.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,b={},_={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:x}),postgres_changes:p,private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>n?.(ga.CHANNEL_ERROR,w)),this._onClose(()=>n?.(ga.CLOSED)),this.updateJoinPayload(Object.assign({config:_},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var j;if(this.socket.setAuth(),w===void 0){n?.(ga.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,U=(j=N?.length)!==null&&j!==void 0?j:0,$=[];for(let L=0;L<U;L++){const q=N[L],{filter:{event:V,schema:Y,table:G,filter:F}}=q,le=w&&w[L];if(le&&le.event===V&&le.schema===Y&&le.table===G&&le.filter===F)$.push(Object.assign(Object.assign({},q),{id:le.id}));else{this.unsubscribe(),this.state=Ke.errored,n?.(ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,n&&n(ga.SUBSCRIBED);return}}).receive("error",w=>{this.state=Ke.errored,n?.(ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n?.(ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===Ke.joined&&n===Rr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,i)}async send(n,r={}){var i,c;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:h}=n,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=p.body)===null||c===void 0?void 0:c.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,g,y;const p=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((y=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&u("ok"),p.receive("ok",()=>u("ok")),p.receive("error",()=>u("error")),p.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ke.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new Lo(this,Qt.leave,{},n),i.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ke.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),h=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(u),h}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Lo(this,n,r,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Qp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var c,u;const h=n.toLocaleLowerCase(),{close:g,error:y,leave:p,join:x}=Qt;if(i&&[g,y,p,x].indexOf(h)>=0&&i!==this._joinRef())return;let _=this._onMessage(h,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(w=>{var j,N,U;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((U=(N=w.filter)===null||N===void 0?void 0:N.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===h}).map(w=>w.callback(_,i)):(u=this.bindings[h])===null||u===void 0||u.filter(w=>{var j,N,U,$,L,q;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const V=w.id,Y=(j=w.filter)===null||j===void 0?void 0:j.event;return V&&((N=r.ids)===null||N===void 0?void 0:N.includes(V))&&(Y==="*"||Y?.toLocaleLowerCase()===((U=r.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const V=(L=($=w?.filter)===null||$===void 0?void 0:$.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return V==="*"||V===((q=r?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof _=="object"&&"ids"in _){const j=_.data,{schema:N,table:U,commit_timestamp:$,type:L,errors:q}=j;_=Object.assign(Object.assign({},{schema:N,table:U,commit_timestamp:$,eventType:L,new:{},old:{},errors:q}),this._getPayloadRecords(j))}w.callback(_,i)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const c=n.toLocaleLowerCase(),u={type:c,filter:r,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&lu.isEqual(c.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Qt.close,{},n)}_onError(n){this._on(Qt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Um(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Um(n.columns,n.old_record)),r}}const qo=()=>{},el={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fp=[1e3,2e3,5e3,1e4],ev=1e4,tv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class av{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jo,this.transport=null,this.heartbeatIntervalMs=el.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qo,this.ref=0,this.reconnectTimer=null,this.logger=qo,this.conn=null,this.sendBuffer=[],this.serializer=new Kp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...h)=>Za(async()=>{const{default:g}=await Promise.resolve().then(()=>Os);return{default:g}},void 0).then(({default:g})=>g(...h)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Zo.websocket}`,this.httpEndpoint=ug(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hp.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vp}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return xn.Connecting;case Tr.open:return xn.Open;case Tr.closing:return xn.Closing;default:return xn.Closed}}isConnected(){return this.connectionState()===xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new lu(`realtime:${n}`,r,this);return this.channels.push(u),u}}push(n){const{topic:r,event:i,payload:c,ref:u}=n,h=()=>{this.encode(n,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${r} ${i} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Yp,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},el.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:u,ref:h}=r,g=h?`(${h})`:"",y=u.status||"";this.log("receive",`${y} ${i} ${c} ${g}`.trim(),u),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(c,u,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Qt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${i}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([tv],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const c={access_token:r,version:$p};r&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(Qt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new cg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},el.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,c,u,h,g,y,p,x;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Jo,this.heartbeatIntervalMs=(c=n?.heartbeatIntervalMs)!==null&&c!==void 0?c:el.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:qo,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n?.reconnectAfterMs)!==null&&y!==void 0?y:(b=>Fp[b-1]||ev),this.encode=(p=n?.encode)!==null&&p!==void 0?p:((b,_)=>_(JSON.stringify(b))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class cu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ye(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class nv extends cu{constructor(n,r,i){super(n),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Io extends cu{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var sv=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};const dg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Os);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},rv=()=>sv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Za(()=>Promise.resolve().then(()=>Os),void 0)).Response:Response}),Wo=o=>{if(Array.isArray(o))return o.map(r=>Wo(r));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([r,i])=>{const c=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[c]=Wo(i)}),n},iv=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var Sn=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};const Ho=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),lv=(o,n,r)=>Sn(void 0,void 0,void 0,function*(){const i=yield rv();o instanceof i&&!r?.noResolveJson?o.json().then(c=>{const u=o.status||500,h=c?.statusCode||u+"";n(new nv(Ho(c),u,h))}).catch(c=>{n(new Io(Ho(c),c))}):n(new Io(Ho(o),o))}),cv=(o,n,r,i)=>{const c={method:o,headers:n?.headers||{}};return o==="GET"||!i?c:(iv(i)?(c.headers=Object.assign({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(i)):c.body=i,n?.duplex&&(c.duplex=n.duplex),Object.assign(Object.assign({},c),r))};function Mr(o,n,r,i,c,u){return Sn(this,void 0,void 0,function*(){return new Promise((h,g)=>{o(r,cv(n,i,c,u)).then(y=>{if(!y.ok)throw y;return i?.noResolveJson?y:y.json()}).then(y=>h(y)).catch(y=>lv(y,g,i))})})}function ol(o,n,r,i){return Sn(this,void 0,void 0,function*(){return Mr(o,"GET",n,r,i)})}function Pt(o,n,r,i,c){return Sn(this,void 0,void 0,function*(){return Mr(o,"POST",n,i,c,r)})}function Fo(o,n,r,i,c){return Sn(this,void 0,void 0,function*(){return Mr(o,"PUT",n,i,c,r)})}function ov(o,n,r,i){return Sn(this,void 0,void 0,function*(){return Mr(o,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function fg(o,n,r,i,c){return Sn(this,void 0,void 0,function*(){return Mr(o,"DELETE",n,i,c,r)})}var uv=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};class dv{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return uv(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}}var fv=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};class hv{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}asStream(){return new dv(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.execute().then(n,r)}execute(){return fv(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}}var yt=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};const mv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gv{constructor(n,r={},i,c){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=i,this.fetch=dg(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,i,c){return yt(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Dm),c);let g=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const y=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),y&&u.append("metadata",this.encodeMetadata(y)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",h.cacheControl),y&&u.append("metadata",this.encodeMetadata(y))):(u=i,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,y&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),c?.headers&&(g=Object.assign(Object.assign({},g),c.headers));const p=this._removeEmptyFolders(r),x=this._getFinalPath(p),b=yield(n=="PUT"?Fo:Pt)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:g},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:b.Id,fullPath:b.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ye(u))return{data:null,error:u};throw u}})}upload(n,r,i){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,i)})}uploadToSignedUrl(n,r,i,c){return yt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",r);try{let y;const p=Object.assign({upsert:Dm.upsert},c),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(y=new FormData,y.append("cacheControl",p.cacheControl),y.append("",i)):typeof FormData<"u"&&i instanceof FormData?(y=i,y.append("cacheControl",p.cacheControl)):(y=i,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const b=yield Fo(this.fetch,g.toString(),y,{headers:x});return{data:{path:u,fullPath:b.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(Ye(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(n,r){return yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const c=Object.assign({},this.headers);r?.upsert&&(c["x-upsert"]="true");const u=yield Pt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),h=new URL(this.url+u.url),g=h.searchParams.get("token");if(!g)throw new cu("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:g},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}update(n,r,i){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,i)})}move(n,r,i){return yt(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}copy(n,r,i){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}createSignedUrl(n,r,i){return yt(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),u=yield Pt(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}createSignedUrls(n,r,i){return yt(this,void 0,void 0,function*(){try{const c=yield Pt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}download(n,r){const c=typeof r?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(r?.transform||{}),h=u?`?${u}`:"",g=this._getFinalPath(n),y=()=>ol(this.fetch,`${this.url}/${c}/${g}${h}`,{headers:this.headers,noResolveJson:!0});return new hv(y,this.shouldThrowOnError)}info(n){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const i=yield ol(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Wo(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}exists(n){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield ov(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i)&&i instanceof Io){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,r){const i=this._getFinalPath(n),c=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&c.push(u);const g=typeof r?.transform<"u"?"render/image":"object",y=this.transformOptsToQueryString(r?.transform||{});y!==""&&c.push(y);let p=c.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${p}`)}}}remove(n){return yt(this,void 0,void 0,function*(){try{return{data:yield fg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}list(n,r,i){return yt(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},mv),r),{prefix:n||""});return{data:yield Pt(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}listV2(n,r){return yt(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield Pt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const yv="2.75.0",pv={"X-Client-Info":`storage-js/${yv}`};var ys=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};class vv{constructor(n,r={},i,c){this.shouldThrowOnError=!1;const u=new URL(n);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pv),r),this.fetch=dg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ys(this,void 0,void 0,function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}getBucket(n){return ys(this,void 0,void 0,function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}createBucket(n){return ys(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield Pt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ye(c))return{data:null,error:c};throw c}})}updateBucket(n,r){return ys(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}emptyBucket(n){return ys(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}deleteBucket(n){return ys(this,void 0,void 0,function*(){try{return{data:yield fg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}}class bv extends vv{constructor(n,r={},i,c){super(n,r,i,c)}from(n){return new gv(this.url,this.headers,n,this.fetch)}}const xv="2.75.0";let Nr="";typeof Deno<"u"?Nr="deno":typeof document<"u"?Nr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nr="react-native":Nr="node";const _v={"X-Client-Info":`supabase-js-${Nr}/${xv}`},wv={headers:_v},Sv={schema:"public"},jv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cv={};var Av=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};const Ev=o=>{let n;return o?n=o:typeof fetch>"u"?n=ag:n=fetch,(...r)=>n(...r)},Nv=()=>typeof Headers>"u"?ng:Headers,Tv=(o,n,r)=>{const i=Ev(r),c=Nv();return(u,h)=>Av(void 0,void 0,void 0,function*(){var g;const y=(g=yield n())!==null&&g!==void 0?g:o;let p=new c(h?.headers);return p.has("apikey")||p.set("apikey",o),p.has("Authorization")||p.set("Authorization",`Bearer ${y}`),i(u,Object.assign(Object.assign({},h),{headers:p}))})};var Ov=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};function Rv(o){return o.endsWith("/")?o:o+"/"}function kv(o,n){var r,i;const{db:c,auth:u,realtime:h,global:g}=o,{db:y,auth:p,realtime:x,global:b}=n,_={db:Object.assign(Object.assign({},y),c),auth:Object.assign(Object.assign({},p),u),realtime:Object.assign(Object.assign({},x),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),g),{headers:Object.assign(Object.assign({},(r=b?.headers)!==null&&r!==void 0?r:{}),(i=g?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Ov(this,void 0,void 0,function*(){return""})};return o.accessToken?_.accessToken=o.accessToken:delete _.accessToken,_}function Uv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Rv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hg="2.75.0",ws=30*1e3,eu=3,Go=eu*ws,zv="http://localhost:9999",Mv="supabase.auth.token",Dv={"X-Client-Info":`gotrue-js/${hg}`},tu="X-Supabase-Api-Version",mg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lv=600*1e3;class Ur extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function W(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class qv extends Ur{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function Hv(o){return W(o)&&o.name==="AuthApiError"}class _n extends Ur{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Pa extends Ur{constructor(n,r,i,c){super(n,i,c),this.name=r,this.status=i}}class Ya extends Pa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gv(o){return W(o)&&o.name==="AuthSessionMissingError"}class ps extends Pa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tl extends Pa{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class al extends Pa{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $v(o){return W(o)&&o.name==="AuthImplicitGrantRedirectError"}class Bm extends Pa{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class au extends Pa{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function $o(o){return W(o)&&o.name==="AuthRetryableFetchError"}class Lm extends Pa{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class nu extends Pa{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qm=` 	
\r=`.split(""),Vv=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<qm.length;n+=1)o[qm[n].charCodeAt(0)]=-2;for(let n=0;n<ul.length;n+=1)o[ul[n].charCodeAt(0)]=n;return o})();function Hm(o,n,r){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(ul[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(ul[i]),n.queuedBits-=6}}function gg(o,n,r){const i=Vv[o];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Gm(o){const n=[],r=h=>{n.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{Kv(h,i,r)};for(let h=0;h<o.length;h+=1)gg(o.charCodeAt(h),c,u);return n.join("")}function Yv(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Qv(o,n){for(let r=0;r<o.length;r+=1){let i=o.charCodeAt(r);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(o.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}Yv(i,n)}}function Kv(o,n,r){if(n.utf8seq===0){if(o<=127){r(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Cs(o){const n=[],r={queue:0,queuedBits:0},i=c=>{n.push(c)};for(let c=0;c<o.length;c+=1)gg(o.charCodeAt(c),r,i);return new Uint8Array(n)}function Xv(o){const n=[];return Qv(o,r=>n.push(r)),new Uint8Array(n)}function wn(o){const n=[],r={queue:0,queuedBits:0},i=c=>{n.push(c)};return o.forEach(c=>Hm(c,r,i)),Hm(null,r,i),n.join("")}function Jv(o){return Math.round(Date.now()/1e3)+o}function Zv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const Et=()=>typeof window<"u"&&typeof document<"u",pn={tested:!1,writable:!1},yg=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pn.tested)return pn.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),pn.tested=!0,pn.writable=!0}catch{pn.tested=!0,pn.writable=!1}return pn.writable};function Pv(o){const n={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,u)=>{n[u]=c})}catch{}return r.searchParams.forEach((i,c)=>{n[c]=i}),n}const pg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Os);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Iv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Ss=async(o,n,r)=>{await o.setItem(n,JSON.stringify(r))},vn=async(o,n)=>{const r=await o.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Va=async(o,n)=>{await o.removeItem(n)};class ml{constructor(){this.promise=new ml.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}ml.promiseConstructor=Promise;function Vo(o){const n=o.split(".");if(n.length!==3)throw new nu("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!Bv.test(n[i]))throw new nu("JWT not in base64url format");return{header:JSON.parse(Gm(n[0])),payload:JSON.parse(Gm(n[1])),signature:Cs(n[2]),raw:{header:n[0],payload:n[1]}}}async function Wv(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Fv(o,n){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await o(u);if(!n(u,null,h)){i(h);return}}catch(h){if(!n(u,h)){c(h);return}}})()})}function eb(o){return("0"+o.toString(16)).substr(-2)}function tb(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let c="";for(let u=0;u<56;u++)c+=r.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(n),Array.from(n,eb).join("")}async function ab(o){const r=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function nb(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await ab(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vs(o,n,r=!1){const i=tb();let c=i;r&&(c+="/PASSWORD_RECOVERY"),await Ss(o,`${n}-code-verifier`,c);const u=await nb(i);return[u,i===u?"plain":"s256"]}const sb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rb(o){const n=o.headers.get(tu);if(!n||!n.match(sb))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function ib(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function lb(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bs(o){if(!cb.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yo(){const o={};return new Proxy(o,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $m(o){return JSON.parse(JSON.stringify(o))}var ob=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(o);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(o,i[c])&&(r[i[c]]=o[i[c]]);return r};const bn=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),ub=[502,503,504];async function Vm(o){var n;if(!Iv(o))throw new au(bn(o),0);if(ub.includes(o.status))throw new au(bn(o),o.status);let r;try{r=await o.json()}catch(u){throw new _n(bn(u),u)}let i;const c=rb(o);if(c&&c.getTime()>=mg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Lm(bn(r),o.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Ya}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Lm(bn(r),o.status,r.weak_password.reasons);throw new qv(bn(r),o.status||500,i)}const db=(o,n,r,i)=>{const c={method:o,headers:n?.headers||{}};return o==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),r))};async function ne(o,n,r,i){var c;const u=Object.assign({},i?.headers);u[tu]||(u[tu]=mg["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const h=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",y=await fb(o,n,r+g,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(y):{data:Object.assign({},y),error:null}}async function fb(o,n,r,i,c,u){const h=db(n,i,c,u);let g;try{g=await o(r,Object.assign({},h))}catch(y){throw console.error(y),new au(bn(y),0)}if(g.ok||await Vm(g),i?.noResolveJson)return g;try{return await g.json()}catch(y){await Vm(y)}}function Yt(o){var n;let r=null;gb(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=Jv(o.expires_in)));const i=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:r,user:i},error:null}}function Ym(o){const n=Yt(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=o.weak_password),n}function Qa(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function hb(o){return{data:o,error:null}}function mb(o){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u}=o,h=ob(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u},y=Object.assign({},h);return{data:{properties:g,user:y},error:null}}function Qm(o){return o}function gb(o){return o.access_token&&o.refresh_token&&o.expires_in}const Qo=["global","local","others"];var yb=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(o);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(o,i[c])&&(r[i[c]]=o[i[c]]);return r};class pb{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=pg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Qo[0]){if(Qo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qo.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qa})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=yb(n,["options"]),c=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:mb,redirectTo:r?.redirectTo})}catch(r){if(W(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Qa})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,c,u,h,g,y;try{const p={nextPage:null,lastPage:0,total:0},x=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Qm});if(x.error)throw x.error;const b=await x.json(),_=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(y=(g=x.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return w.length>0&&(w.forEach(j=>{const N=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(j.split(";")[1].split("=")[1]);p[`${U}Page`]=N}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(W(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){bs(n);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Qa})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){bs(n);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Qa})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){bs(n);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qa})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){bs(n.userId);try{const{data:r,error:i}=await ne(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:i}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteFactor(n){bs(n.userId),bs(n.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,c,u,h,g,y;try{const p={nextPage:null,lastPage:0,total:0},x=await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Qm});if(x.error)throw x.error;const b=await x.json(),_=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(y=(g=x.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return w.length>0&&(w.forEach(j=>{const N=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(j.split(";")[1].split("=")[1]);p[`${U}Page`]=N}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(W(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}}function Km(o={}){return{getItem:n=>o[n]||null,setItem:(n,r)=>{o[n]=r},removeItem:n=>{delete o[n]}}}const xs={debug:!!(globalThis&&yg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class vb extends vg{}async function bb(o,n,r){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,c.name);try{return await r()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,c.name)}}else{if(n===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new vb(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(xs.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function xb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bg(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function _b(o){return parseInt(o,16)}function wb(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Sb(o){var n;const{chainId:r,domain:i,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:y,resources:p,scheme:x,uri:b,version:_}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const w=bg(o.address),j=x?`${x}://${i}`:i,N=o.statement?`${o.statement}
`:"",U=`${j} wants you to sign in with your Ethereum account:
${w}

${N}`;let $=`URI: ${b}
Version: ${_}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&($+=`
Expiration Time: ${c.toISOString()}`),g&&($+=`
Not Before: ${g.toISOString()}`),y&&($+=`
Request ID: ${y}`),p){let L=`
Resources:`;for(const q of p){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);L+=`
- ${q}`}$+=L}return`${U}
${$}`}class Ve extends Error{constructor({message:n,code:r,cause:i,name:c}){var u;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=c??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class dl extends Ve{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function jb({error:o,options:n}){var r,i,c;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Ve({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const h=window.location.hostname;if(_g(h)){if(u.rp.id!==h)return new Ve({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function Cb({error:o,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Ve({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const i=window.location.hostname;if(_g(i)){if(r.rpId!==i)return new Ve({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}var xg=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(o);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(o,i[c])&&(r[i[c]]=o[i[c]]);return r};class Ab{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Eb=new Ab;function Nb(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:r,excludeCredentials:i}=o,c=xg(o,["challenge","user","excludeCredentials"]),u=Cs(n).buffer,h=Object.assign(Object.assign({},r),{id:Cs(r.id).buffer}),g=Object.assign(Object.assign({},c),{challenge:u,user:h});if(i&&i.length>0){g.excludeCredentials=new Array(i.length);for(let y=0;y<i.length;y++){const p=i[y];g.excludeCredentials[y]=Object.assign(Object.assign({},p),{id:Cs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function Tb(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:r}=o,i=xg(o,["challenge","allowCredentials"]),c=Cs(n).buffer,u=Object.assign(Object.assign({},i),{challenge:c});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const g=r[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:Cs(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function Ob(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:wn(new Uint8Array(o.response.attestationObject)),clientDataJSON:wn(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Rb(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,i=o.getClientExtensionResults(),c=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:wn(new Uint8Array(c.authenticatorData)),clientDataJSON:wn(new Uint8Array(c.clientDataJSON)),signature:wn(new Uint8Array(c.signature)),userHandle:c.userHandle?wn(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function _g(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Xm(){var o,n;return!!(Et()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function kb(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new dl("Browser returned unexpected credential type",n)}:{data:null,error:new dl("Empty credential response",n)}}catch(n){return{data:null,error:jb({error:n,options:o})}}}async function Ub(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new dl("Browser returned unexpected credential type",n)}:{data:null,error:new dl("Empty credential response",n)}}catch(n){return{data:null,error:Cb({error:n,options:o})}}}const zb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Mb={userVerification:"preferred",hints:["security-key"]};function fl(...o){const n=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),r=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),i={};for(const c of o)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))i[u]=h;else if(r(h))i[u]=h;else if(n(h)){const g=i[u];n(g)?i[u]=fl(g,h):i[u]=fl(h)}else i[u]=h}return i}function Db(o,n){return fl(zb,o,n||{})}function Bb(o,n){return fl(Mb,o,n||{})}class Lb{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:c},u){try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!h)return{data:null,error:g};const y=c??Eb.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:p}=h.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(h.webauthn.type){case"create":{const p=Db(h.webauthn.credential_options.publicKey,u?.create),{data:x,error:b}=await kb({publicKey:p,signal:y});return x?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}case"request":{const p=Bb(h.webauthn.credential_options.publicKey,u?.request),{data:x,error:b}=await Ub(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:p,signal:y}));return x?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}}}catch(h){return W(h)?{data:null,error:h}:{data:null,error:new _n("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}},u){if(!r)return{data:null,error:new Ur("rpId is required for WebAuthn authentication")};try{if(!Xm())return{data:null,error:new _n("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:c},{request:u});if(!h)return{data:null,error:g};const{webauthn:y}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:i,credential_response:y.credential_response}})}catch(h){return W(h)?{data:null,error:h}:{data:null,error:new _n("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c},u){if(!r)return{data:null,error:new Ur("rpId is required for WebAuthn registration")};try{if(!Xm())return{data:null,error:new _n("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(x=>{var b;return(b=x.data)===null||b===void 0?void 0:b.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:g};const{data:y,error:p}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:c},{create:u});return y?this._verify({factorId:h.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:i,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:p}}catch(h){return W(h)?{data:null,error:h}:{data:null,error:new _n("Unexpected error in register",h)}}}}xb();const qb={url:zv,storageKey:Mv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Dv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jm(o,n,r){return await r()}const _s={};class zr{get jwks(){var n,r;return(r=(n=_s[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=_s[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{cachedAt:n})}constructor(n){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zr.nextInstanceID,zr.nextInstanceID+=1,this.instanceID>0&&Et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},qb),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new pb({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=pg(c.fetch),this.lock=c.lock||Jm,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Et()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=bb:this.lock=Jm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Lb(this)},this.persistSession?(c.storage?this.storage=c.storage:yg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Km(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Km(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Pv(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Et()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(r,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),$v(u)){const y=(n=u.details)===null||n===void 0?void 0:n.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?{error:r}:{error:new _n("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,c;try{const u=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=n?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Yt}),{data:h,error:g}=u;if(g||!h)return{data:{user:null,session:null},error:g};const y=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var r,i,c;try{let u;if("email"in n){const{email:x,password:b,options:_}=n;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await vs(this.storage,this.storageKey)),u=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:x,password:b,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:w,code_challenge_method:j},xform:Yt})}else if("phone"in n){const{phone:x,password:b,options:_}=n;u=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:b,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(c=_?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Yt})}else throw new tl("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return{data:{user:null,session:null},error:g};const y=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let r;if("email"in n){const{email:u,password:h,options:g}=n;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ym})}else if("phone"in n){const{phone:u,password:h,options:g}=n;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ym})}else throw new tl("You must provide either an email or phone number and a password");const{data:i,error:c}=r;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ps}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,i,c,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,c,u,h,g,y,p,x,b,_;let w,j;if("message"in n)w=n.message,j=n.signature;else{const{chain:N,wallet:U,statement:$,options:L}=n;let q;if(Et())if(typeof U=="object")q=U;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")q=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=U}const V=new URL((r=L?.url)!==null&&r!==void 0?r:window.location.href),Y=await q.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=bg(Y[0]);let F=(i=L?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const Z=await q.request({method:"eth_chainId"});F=_b(Z)}const le={domain:V.host,address:G,statement:$,uri:V.href,version:"1",chainId:F,nonce:(c=L?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=L?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=L?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(x=L?.signInWithEthereum)===null||x===void 0?void 0:x.resources};w=Sb(le),j=await q.request({method:"personal_sign",params:[wb(w),G]})}try{const{data:N,error:U}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:j},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Yt});if(U)throw U;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new ps}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:U})}catch(N){if(W(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithSolana(n){var r,i,c,u,h,g,y,p,x,b,_,w;let j,N;if("message"in n)j=n.message,N=n.signature;else{const{chain:U,wallet:$,statement:L,options:q}=n;let V;if(Et())if(typeof $=="object")V=$;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))V=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=$}const Y=new URL((r=q?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in V&&V.signIn){const G=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),L?{statement:L}:null));let F;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")F=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)F=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)j=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),N=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${Y.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(c=(i=q?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=q?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((h=q?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((g=q?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((y=q?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((p=q?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((b=(x=q?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||b===void 0)&&b.length?["Resources",...q.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const G=await V.signMessage(new TextEncoder().encode(j),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=G}}try{const{data:U,error:$}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:wn(N)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Yt});if($)throw $;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new ps}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:$})}catch(U){if(W(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(n){const r=await vn(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(r??"").split("/");try{const{data:u,error:h}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Yt});if(await Va(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ps}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(W(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:r,provider:i,token:c,access_token:u,nonce:h}=n,g=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Yt}),{data:y,error:p}=g;return p?{data:{user:null,session:null},error:p}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new ps}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:p})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,i,c,u,h;try{if("email"in n){const{email:g,options:y}=n;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await vs(this.storage,this.storageKey));const{error:b}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=y?.data)!==null&&r!==void 0?r:{},create_user:(i=y?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:y?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:g,options:y}=n,{data:p,error:x}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=y?.data)!==null&&c!==void 0?c:{},create_user:(u=y?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(h=y?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new tl("You must provide either an email or phone number.")}catch(g){if(W(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(n){var r,i;try{let c,u;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:g}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:Yt});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const y=h.session,p=h.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(c){if(W(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var r,i,c;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await vs(this.storage,this.storageKey)),await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=n?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:hb})}catch(u){if(W(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Ya;const{error:c}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:c,options:u}=n,{error:h}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:i,type:c,options:u}=n,{data:h,error:g}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:g}}throw new tl("You must provide either an email or phone number and a type")}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Go:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const h=await vn(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Yo()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(y,p,x)=>(!h&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,p,x))})}return{data:{session:n},error:null}}const{data:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Qa}):await this._useSession(async r=>{var i,c,u;const{data:h,error:g}=r;if(g)throw g;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ya}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Qa})})}catch(r){if(W(r))return Gv(r)&&(await this._removeSession(),await Va(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new Ya;const h=c.session;let g=null,y=null;this.flowType==="pkce"&&n.email!=null&&([g,y]=await vs(this.storage,this.storageKey));const{data:p,error:x}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:y}),jwt:h.access_token,xform:Qa});if(x)throw x;return h.user=p.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ya;const r=Date.now()/1e3;let i=r,c=!0,u=null;const{payload:h}=Vo(n.access_token);if(h.exp&&(i=h.exp,c=i<=r),c){const{data:g,error:y}=await this._callRefreshToken(n.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:y}=await this._getUser(n.access_token);if(y)throw y;u={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(r){if(W(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:h,error:g}=r;if(g)throw g;n=(i=h.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Ya;const{data:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!Et())throw new al("No browser detected.");if(n.error||n.error_description||n.error_code)throw new al(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new al("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Bm("No code detected.");const{data:L,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:g,expires_at:y,token_type:p}=n;if(!u||!g||!h||!p)throw new al("No session defined in URL");const x=Math.round(Date.now()/1e3),b=parseInt(g);let _=x+b;y&&(_=parseInt(y));const w=_-x;w*1e3<=ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const j=_-b;x-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,_,x):x-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,_,x);const{data:N,error:U}=await this._getUser(u);if(U)throw U;const $={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:b,expires_at:_,refresh_token:h,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:n.type},error:null}}catch(i){if(W(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await vn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{error:u};const h=(i=c.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:g}=await this.admin.signOut(h,n);if(g&&!(Hv(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return n!=="others"&&(await this._removeSession(),await Va(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Zv(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,c;try{const{data:{session:u},error:h}=r;if(h)throw h;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,r={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await vs(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(W(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:c}=await this._useSession(async u=>{var h,g,y,p,x;const{data:b,error:_}=u;if(_)throw _;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",w,{headers:this.headers,jwt:(x=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(c)throw c;return Et()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(W(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:c,data:{session:u}}=r;if(c)throw c;const{options:h,provider:g,token:y,access_token:p,nonce:x}=n,b=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:g,id_token:y,access_token:p,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Yt}),{data:_,error:w}=b;return w?{data:{user:null,session:null},error:w}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new ps}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:w})}catch(c){if(W(c))return{data:{user:null,session:null},error:c};throw c}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,c;const{data:u,error:h}=r;if(h)throw h;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await Fv(async c=>(c>0&&await Wv(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Yt})),(c,u)=>{const h=200*Math.pow(2,c);return u&&$o(u)&&Date.now()+h-i<ws})}catch(i){if(this._debug(r,"error",i),W(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),Et()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await vn(this.storage,this.storageKey);if(c&&this.userStorage){let h=await vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await Ss(this.userStorage,this.storageKey+"-user",h)),c.user=(n=h?.user)!==null&&n!==void 0?n:Yo()}else if(c&&!c.user&&!c.user){const h=await vn(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await Va(this.storage,this.storageKey+"-user"),await Ss(this.storage,this.storageKey,c)):c.user=Yo()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Go;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Go}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),$o(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(c.access_token);!g&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Ya;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new ml;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new Ya;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(c,"error",u),W(u)){const h={data:null,error:u};return $o(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,i=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,r)}catch(y){u.push(y)}});if(await Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Ss(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const u=$m(c);await Ss(this.storage,this.storageKey,u)}else{const c=$m(r);await Ss(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Va(this.storage,this.storageKey),await Va(this.storage,this.storageKey+"-code-verifier"),await Va(this.storage,this.storageKey+"-user"),this.userStorage&&await Va(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Et()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ws);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-n)/ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ws}ms, refresh threshold is ${eu} ticks`),c<=eu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof vg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const c=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,h]=await vs(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(g.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;return u?{data:null,error:u}:await ne(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,c;const{data:u,error:h}=r;if(h)return{data:null,error:h};const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:y,error:p}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(n.factorType==="totp"&&y.type==="totp"&&(!((c=y?.totp)===null||c===void 0)&&c.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{data:null,error:u};const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Ob(n.webauthn.credential_response):Rb(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:y}=await ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:y})})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{data:null,error:u};const h=await ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Nb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Tb(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=r?.factors)!==null&&n!==void 0?n:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,i;const{data:{session:c},error:u}=n;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Vo(c.access_token);let g=null;h.aal&&(g=h.aal);let y=g;((i=(r=c.user.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(y="aal2");const x=h.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(g=>g.kid===n);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(g=>g.kid===n),i&&this.jwks_cached_at+Lv>c)return i;const{data:u,error:h}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(g=>g.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:w,error:j}=await this.getSession();if(j||!w.session)return{data:null,error:j};i=w.session.access_token}const{header:c,payload:u,signature:h,raw:{header:g,payload:y}}=Vo(i);r?.allowExpired||ib(u.exp);const p=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:u,header:c,signature:h},error:null}}const x=lb(c.alg),b=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,b,h,Xv(`${g}.${y}`)))throw new nu("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}}zr.nextInstanceID=0;const Hb=zr;class Gb extends Hb{constructor(n){super(n)}}var $b=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(x){try{p(i.next(x))}catch(b){h(b)}}function y(x){try{p(i.throw(x))}catch(b){h(b)}}function p(x){x.done?u(x.value):c(x.value).then(g,y)}p((i=i.apply(o,n||[])).next())})};class Vb{constructor(n,r,i){var c,u,h;this.supabaseUrl=n,this.supabaseKey=r;const g=Uv(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const y=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:Sv,realtime:Cv,auth:Object.assign(Object.assign({},jv),{storageKey:y}),global:wv},x=kv(i??{},p);this.storageKey=(c=x.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=x.auth)!==null&&h!==void 0?h:{},this.headers,x.global.fetch),this.fetch=Tv(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new qp(new URL("rest/v1",g).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new bv(this.storageUrl.href,this.headers,this.fetch,i?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new Tp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,i)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return $b(this,void 0,void 0,function*(){var n,r;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:c,userStorage:u,storageKey:h,flowType:g,lock:y,debug:p},x,b){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gb({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:h,autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:c,userStorage:u,flowType:g,lock:y,debug:p,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new av(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(n,r,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Yb=(o,n,r)=>new Vb(o,n,r);function Qb(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Qb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Kb="https://xtdudfccgbdanmmncwhn.supabase.co",Xb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",te=Yb(Kb,Xb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Jb=Object.freeze(Object.defineProperty({__proto__:null,supabase:te},Symbol.toStringTag,{value:"Module"}));class Zb{createUserFromProfileData(n,r){return{id:n.id,email:n.email||"",displayName:r?.display_name||n.user_metadata?.display_name||n.email?.split("@")[0],username:r?.username||n.user_metadata?.username||n.email?.split("@")[0],profileCompleted:r?.profile_completed||!!n.user_metadata?.profile_completed,createdAt:new Date(n.created_at)}}async mapAuthUserToUser(n){try{const{data:r}=await te.from("user_profiles").select("display_name, username, profile_completed").eq("id",n.id).single();return r&&typeof r=="object"?this.createUserFromProfileData(n,r):this.createUserFromProfileData(n)}catch{return this.createUserFromProfileData(n)}}async getCurrentUser(){try{const{data:{user:n},error:r}=await te.auth.getUser();return r||!n?null:await this.mapAuthUserToUser(n)}catch{return null}}async signIn(n,r){try{const{data:i,error:c}=await te.auth.signInWithPassword({email:n,password:r});return c?{success:!1,error:c.message}:{success:!0,data:{id:i.user.id,email:i.user.email||"",displayName:i.user.user_metadata?.display_name,createdAt:new Date(i.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(n,r){try{const i=`${window.location.origin}${window.location.pathname}`,{data:c,error:u}=await te.auth.signUp({email:n,password:r,options:{emailRedirectTo:i}});return u?{success:!1,error:u.message}:c.user?{success:!0,data:{id:c.user.id,email:c.user.email||"",displayName:c.user.user_metadata?.display_name,createdAt:new Date(c.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:n}=await te.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(n){const{data:{subscription:r}}=te.auth.onAuthStateChange(async(i,c)=>{if(c?.user){const u=await this.mapAuthUserToUser(c.user);n(u)}else n(null)});return()=>r.unsubscribe()}async completeProfile(n,r,i){try{const{error:c}=await te.from("user_profiles").update({display_name:r,username:i,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",n);if(c)return c.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:c.message};const{data:u,error:h}=await te.auth.updateUser({data:{display_name:r,username:i,profile_completed:!0}});return h?{success:!1,error:h.message}:{success:!0,data:{id:u.user.id,email:u.user.email||"",displayName:r,username:i,profileCompleted:!0,createdAt:new Date(u.user.created_at)}}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to complete profile"}}}buildProfileUpdates(n,r){const i={updated_at:new Date().toISOString()};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}buildAuthUpdates(n,r){const i={};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}async updateProfile(n,r,i){try{const c=this.buildProfileUpdates(r,i),{error:u}=await te.from("user_profiles").update(c).eq("id",n);if(u)return u.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:u.message};const h=this.buildAuthUpdates(r,i),{data:g,error:y}=await te.auth.updateUser({data:h});if(y)return{success:!1,error:y.message};const{data:p}=await te.from("user_profiles").select("*").eq("id",n).single(),x=p;return{success:!0,data:{id:g.user.id,email:g.user.email||"",displayName:x?.display_name||g.user.user_metadata?.display_name,username:x?.username||g.user.user_metadata?.username,profileCompleted:x?.profile_completed||g.user.user_metadata?.profile_completed||!1,createdAt:new Date(g.user.created_at)}}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to update profile"}}}async changePassword(n,r,i){try{const{data:c}=await te.auth.getUser();if(!c.user?.email)return{success:!1,error:"User not found"};const{error:u}=await te.auth.signInWithPassword({email:c.user.email,password:r});if(u)return{success:!1,error:"Current password is incorrect"};const{error:h}=await te.auth.updateUser({password:i});return h?{success:!1,error:h.message}:{success:!0}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to change password"}}}async deleteAccount(n){try{const{error:r}=await te.from("user_profiles").delete().eq("id",n);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class wg{async getCampaigns(n){try{const{data:r,error:i}=await te.from("campaigns").select(`
          *,
          campaign_members!inner(
            is_admin,
            is_gm,
            is_player,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",n).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(u=>{const h=u.campaign_members[0];return{id:u.id,name:u.name,description:u.description||void 0,createdBy:u.created_by,createdAt:new Date(u.created_at||Date.now()),updatedAt:new Date(u.updated_at||Date.now()),userRoles:h?{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1}:{isAdmin:!1,isGm:!1,isPlayer:!1},memberCount:u.member_count?.[0]?.count||0,isOwner:u.created_by===n}})}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(n){try{const{data:r,error:i}=await te.from("campaigns").select("*").eq("id",n).single();return i?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at||Date.now()),updatedAt:new Date(r.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(n,r,i=!1){try{const{data:c,error:u}=await te.from("campaigns").insert({name:r.name,description:r.description,created_by:n}).select().single();if(u)return{success:!1,error:`Failed to create campaign: ${u.message}`};const{error:h}=await te.from("campaign_members").insert({campaign_id:c.id,user_id:n,role:"admin"});if(h)return await te.from("campaigns").delete().eq("id",c.id),{success:!1,error:`Failed to set up campaign admin: ${h.message}`};if(i){const{error:y}=await te.from("campaign_members").insert({campaign_id:c.id,user_id:n,role:"gm"})}return{success:!0,data:{id:c.id,name:c.name,description:c.description||void 0,createdBy:c.created_by,createdAt:new Date(c.created_at||Date.now()),updatedAt:new Date(c.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(n,r){try{const{error:i}=await te.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",n);return i?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(n){try{const{error:r}=await te.from("campaigns").delete().eq("id",n);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(n){try{const{data:r,error:i}=await te.from("campaign_members").select("id, user_id, is_admin, is_gm, is_player, created_at").eq("campaign_id",n).order("created_at",{ascending:!0});if(i)return{success:!1,error:"Failed to fetch campaign members"};const c=[];for(const u of r){const h=u;try{const{data:g,error:y}=await te.from("user_profiles").select("email, display_name, username").eq("id",h.user_id).single();let p,x;if(!y&&g){const b=g;p=b.email||`user_${h.user_id.slice(0,8)}@example.com`,x=b.display_name||b.username||void 0}else p=`user_${h.user_id.slice(0,8)}@example.com`,x=void 0;c.push({id:h.id,userId:h.user_id,email:p,displayName:x,roles:{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1},joinedAt:new Date(h.created_at)})}catch{c.push({id:h.id,userId:h.user_id,email:`user_${h.user_id.slice(0,8)}@example.com`,displayName:void 0,roles:{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1},joinedAt:new Date(h.created_at)})}}return{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(n,r,i){try{const{data:c,error:u}=await te.from("user_profiles").select("id").eq("email",r).single();if(u||!c)return{success:!1,error:"User not found with that email address"};const{data:h}=await te.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",c.id).single();if(h)return{success:!1,error:"User is already a member of this campaign"};const{error:g}=await te.from("campaign_members").insert({campaign_id:n,user_id:c.id,role:i});return g?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(n,r,i){try{const{error:c}=await te.from("campaign_members").update({is_admin:i.isAdmin,is_gm:i.isGm,is_player:i.isPlayer}).eq("campaign_id",n).eq("user_id",r);return c?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(n,r){try{const{error:i}=await te.from("campaign_members").delete().eq("campaign_id",n).eq("user_id",r);return i?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(n,r){try{const i=await this.getUserRoles(n,r);if(!i.success||!i.data)return{success:!1,error:i.error||"User is not a member of this campaign"};const c=i.data;let u;return c.isAdmin?u="admin":c.isGm?u="gm":u="player",{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRoles(n,r){try{const{data:i,error:c}=await te.from("campaign_members").select("is_admin, is_gm, is_player").eq("campaign_id",n).eq("user_id",r).single();if(c||!i)return{success:!1,error:"User is not a member of this campaign"};const u=i;return{success:!0,data:{isAdmin:u.is_admin||!1,isGm:u.is_gm||!1,isPlayer:u.is_player||!1}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(n,r){try{const{data:i,error:c}=await te.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",r).single();return c?{success:!0,data:!1}:{success:!0,data:!!i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(n){try{const{data:r,error:i}=await te.from("characters").select("*").eq("campaign_id",n).order("created_at",{ascending:!0});return i?{success:!1,error:i.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(n,r,i,c,u){try{const{data:h,error:g}=await te.from("characters").insert({campaign_id:n,name:i,player_name:c,character_name:u,owner_id:r}).select().single();return g?{success:!1,error:g.message}:{success:!0,data:h}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createStandaloneCharacter(n,r,i,c){try{const{data:u,error:h}=await te.rpc("create_standalone_character",{user_id:n,char_name:r,player_name:i||void 0,character_name:c||void 0});return h?{success:!1,error:h.message}:{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getStandaloneCharacters(n){try{const{data:r,error:i}=await te.from("characters").select("*").eq("owner_id",n).is("campaign_id",null).order("created_at",{ascending:!1});return i?{success:!1,error:i.message}:{success:!0,data:(r||[]).map(u=>({id:u.id,name:u.name,player_name:u.player_name||void 0,character_name:u.character_name||void 0,owner_id:u.owner_id||"",created_at:u.created_at||"",updated_at:u.updated_at||""}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteStandaloneCharacter(n,r){try{const{data:i,error:c}=await te.from("characters").select("owner_id, campaign_id").eq("id",n).single();if(c||!i)return{success:!1,error:"Character not found"};if(i.campaign_id!==null)return{success:!1,error:"This is not a standalone character"};if(i.owner_id!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:u}=await te.from("characters").delete().eq("id",n);return u?{success:!1,error:u.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaignInvitation(n,r,i,c){try{const{data:u,error:h}=await te.rpc("create_campaign_invitation",{p_campaign_id:n,p_invited_email:r,p_invited_by:i,p_roles_offered:JSON.stringify(c)});return h?{success:!1,error:h.message}:{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserInvitations(n){try{const{data:r,error:i}=await te.rpc("get_user_invitations",{p_user_email:n});return i?{success:!1,error:i.message}:{success:!0,data:Array.isArray(r)?r.map(u=>({id:u.id,campaignId:u.campaign_id,campaignName:u.campaign_name,invitedEmail:u.invited_email,invitedBy:u.invited_by,invitedByName:u.inviter_name,rolesOffered:typeof u.roles_offered=="string"?JSON.parse(u.roles_offered):u.roles_offered,status:u.status,expiresAt:u.expires_at?new Date(u.expires_at):null,createdAt:new Date(u.created_at),acceptedAt:u.accepted_at?new Date(u.accepted_at):null})):[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptCampaignInvitation(n,r){try{const{data:i,error:c}=await te.rpc("accept_campaign_invitation",{p_invitation_id:n,p_user_id:r});return c?{success:!1,error:c.message}:{success:!0,data:i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declineCampaignInvitation(n){try{const{data:r,error:i}=await te.rpc("decline_campaign_invitation",{p_invitation_id:n});return i?{success:!1,error:i.message}:{success:!0,data:r}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(n,r){try{const{data:i,error:c}=await te.from("characters").select("owner_id, campaign_id, campaigns!inner(created_by)").eq("id",n).single();if(c)return{success:!1,error:"Character not found"};if(i.owner_id!==r&&i.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:u}=await te.from("characters").delete().eq("id",n);return u?{success:!1,error:u.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class Xa{static instance;_authRepository;_campaignRepository;_authService;_campaignService;constructor(){this._authRepository=new Zb,this._campaignRepository=new wg,this._authService=new Sp(this._authRepository),this._campaignService=new jp(this._campaignRepository,this._authRepository)}static getInstance(){return Xa.instance||(Xa.instance=new Xa),Xa.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}}function Pb(){return Xa.getInstance().authService}function Sg(){return Xa.getInstance().campaignService}function sl(){return Xa.getInstance().campaignRepository}const jn=()=>{const[o,n]=R.useState(null),[r,i]=R.useState(!0),c=Pb();return R.useEffect(()=>((async()=>{const j=await c.getCurrentUser();console.log("useAuth: getCurrentUser result:",j),n(j),i(!1)})(),c.onAuthStateChange(j=>{console.log("useAuth: onAuthStateChange triggered with user:",j),n(j),i(!1)})),[c]),{user:o,loading:r,signIn:async(_,w)=>{const j=await c.signIn(_,w);return j.success&&j.data?(n(j.data),{success:!0}):{success:!1,error:j.error}},signUp:async(_,w)=>{const j=await c.signUp(_,w);return j.success&&j.data?(n(j.data),{success:!0}):{success:!1,error:j.error}},signOut:async()=>{const _=await c.signOut();return _.success?(n(null),{success:!0}):{success:!1,error:_.error}},completeProfile:async _=>{const w=await c.completeProfile(_);return w.success&&w.data?(n(w.data),{success:!0,user:w.data}):{success:!1,error:w.error}},updateProfile:async _=>{const w=await c.updateProfile(_);return w.success&&w.data?(n(w.data),{success:!0,user:w.data}):{success:!1,error:w.error}},changePassword:async _=>{const w=await c.changePassword(_);return w.success?{success:!0}:{success:!1,error:w.error}},deleteAccount:async()=>{const _=await c.deleteAccount();return _.success?(n(null),{success:!0}):{success:!1,error:_.error}}}};function ae({variant:o="default",size:n="md",className:r="",children:i,...c}){const h={default:"",primary:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",danger:"bg-red-600 hover:bg-red-700 text-white border-red-600",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"},g={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},y=["btn",h[o],g[n],r].filter(Boolean).join(" ");return f.jsx("button",{className:y,...c,children:i})}function Ib({icon:o,variant:n="default",className:r="",...i}){const c={default:"btn p-2",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"};return f.jsx("button",{className:`${c[n]} ${r}`,...i,children:o})}const P=R.forwardRef(({label:o,type:n="text",className:r,required:i=!1,error:c,...u},h)=>{const g="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",y=`input w-full ${c?"border-red-500 focus:border-red-500":""}`,p=()=>{if(n==="textarea"){const b=u;return f.jsx("textarea",{ref:h,className:r||y,required:i,...b})}if(n==="select"){const{children:b,..._}=u;return f.jsx("select",{ref:h,className:r||"select",required:i,..._,children:b})}const x=u;return f.jsx("input",{ref:h,type:n,step:n==="number"?"1":void 0,className:r||y,required:i,...x})};return f.jsxs("div",{children:[o&&f.jsxs("label",{className:g,children:[o," ",i&&"*"]}),p(),c&&f.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c})]})});P.displayName="FormField";function Wb(){const[o,n]=R.useState("sign_in"),[r,i]=R.useState(""),[c,u]=R.useState(""),[h,g]=R.useState(!1),[y,p]=R.useState(""),{signIn:x,signUp:b}=jn(),_=async j=>{j.preventDefault(),g(!0),p("");try{let N;o==="sign_up"?(N=await b(r,c),N.success?p("Check your email for the confirmation link!"):p(N.error||"Sign up failed")):(N=await x(r,c),N.success||p(N.error||"Sign in failed"))}catch(N){p(N instanceof Error?N.message:"An error occurred")}finally{g(!1)}},w=()=>h?"Loading...":o==="sign_in"?"Sign In":"Sign Up";return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),f.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:o==="sign_in"?"Welcome Back":"Create Account"}),f.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:o==="sign_in"?"Sign in to your account":"Create a new account"})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[f.jsx("button",{type:"button",onClick:()=>n("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),f.jsx("button",{type:"button",onClick:()=>n("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),f.jsxs("form",{className:"space-y-4",onSubmit:_,children:[f.jsx(P,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:r,onChange:j=>i(j.target.value),placeholder:"Enter your email"}),f.jsx(P,{label:"Password",type:"password",autoComplete:o==="sign_up"?"new-password":"current-password",required:!0,value:c,onChange:j=>u(j.target.value),placeholder:"Enter your password"}),y&&f.jsx("div",{className:`p-3 rounded-xl text-sm ${y.includes("error")||y.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:y}),f.jsx(ae,{type:"submit",disabled:h,variant:"primary",className:"w-full justify-center py-3",children:w()})]})]})]})})]})}const Fb=o=>{const n=[];let r="weak";o.length<8&&n.push("Password must be at least 8 characters long");const i=/[a-z]/.test(o),c=/[A-Z]/.test(o),u=/\d/.test(o),h=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);i||n.push("Password must contain at least one lowercase letter"),c||n.push("Password must contain at least one uppercase letter"),u||n.push("Password must contain at least one number"),h||n.push("Password must contain at least one special character");const g=[i,c,u,h].filter(Boolean).length;let y=0;o.length>=12?y=2:o.length>=8&&(y=1);const p=g+y;return p>=5?r="strong":p>=3&&(r="medium"),{isValid:n.length===0,errors:n,strength:r}},ex=o=>{switch(o){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},tx=o=>{switch(o){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},ax=o=>o.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:o.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(o)?/^[_-]|[_-]$/.test(o)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function nx({onComplete:o,loading:n=!1}){const[r,i]=R.useState(""),[c,u]=R.useState(""),[h,g]=R.useState({}),[y,p]=R.useState(!1),x=()=>{const w={};if(r.trim()?r.trim().length<2?w.displayName="Name must be at least 2 characters long":r.trim().length>50&&(w.displayName="Name must be less than 50 characters long"):w.displayName="Name is required",!c.trim())w.username="Username is required";else{const j=ax(c.trim());j.isValid||(w.username=j.error||"Invalid username")}return g(w),Object.keys(w).length===0},b=async w=>{if(w.preventDefault(),!!x()){p(!0);try{const j=await o({displayName:r.trim(),username:c.trim().toLowerCase()});!j.success&&j.error&&(j.error.toLowerCase().includes("username")?g({username:j.error}):g({general:j.error}))}catch{g({general:"An unexpected error occurred. Please try again."})}finally{p(!1)}}},_=r.trim()&&c.trim()&&Object.keys(h).length===0;return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Complete Your Profile"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up your profile to start using Traveller Dashboard"})]})}),f.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:f.jsx(As,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:"Welcome to Traveller Dashboard"}),f.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Let's set up your profile to get started"})]}),f.jsx("div",{className:"card",children:f.jsxs("form",{className:"space-y-4",onSubmit:b,children:[f.jsxs("div",{children:[f.jsx(P,{label:"Your Name",type:"text",required:!0,value:r,onChange:w=>{i(w.target.value),h.displayName&&g(j=>({...j,displayName:""}))},placeholder:"Enter your first name or full name",error:h.displayName}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This is how other players will see you in campaigns"})]}),f.jsxs("div",{children:[f.jsx(P,{label:"Username",type:"text",required:!0,value:c,onChange:w=>{u(w.target.value),h.username&&g(j=>({...j,username:""}))},placeholder:"Choose a unique username",error:h.username}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),h.general&&f.jsx("div",{className:"p-3 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",children:h.general}),f.jsx(ae,{type:"submit",disabled:!_||y||n,variant:"primary",className:"w-full justify-center py-3",children:y||n?"Setting up...":"Complete Profile"})]})}),f.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:f.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const sx=()=>{const[o,n]=R.useState([]),[r,i]=R.useState(!0),[c,u]=R.useState(null),h=Sg(),g=R.useCallback(async()=>{try{i(!0),u(null);const b=await h.getCampaigns();b.success&&b.data?n(b.data):u(b.error||"Failed to fetch campaigns")}catch{u("An unexpected error occurred")}finally{i(!1)}},[h]),y=async b=>{try{u(null);const _=await h.createCampaign(b);return _.success?(await g(),{success:!0}):(u(_.error||"Failed to create campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return u(_),{success:!1,error:_}}},p=async(b,_)=>{try{u(null);const w=await h.updateCampaign(b,_);return w.success?(await g(),{success:!0}):(u(w.error||"Failed to update campaign"),{success:!1,error:w.error})}catch{const w="An unexpected error occurred";return u(w),{success:!1,error:w}}},x=async b=>{try{u(null);const _=await h.deleteCampaign(b);return _.success?(await g(),{success:!0}):(u(_.error||"Failed to delete campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return u(_),{success:!1,error:_}}};return R.useEffect(()=>{g()},[g]),{campaigns:o,loading:r,error:c,fetchCampaigns:g,createCampaign:y,updateCampaign:p,deleteCampaign:x}};function Ts(o){const[n,r]=R.useState([]),[i,c]=R.useState(!1),[u,h]=R.useState(null),g=R.useMemo(()=>new wg,[]),y=R.useCallback(async b=>{if(b){c(!0),h(null);try{const _=await g.getCharactersByCampaign(b);if(_.success&&_.data&&_.data.length>0){const w=_.data.map(j=>({id:j.id,campaignId:j.campaign_id||"",displayName:j.name,playerName:j.player_name||"",characterName:j.character_name||"",ownerId:j.owner_id||void 0}));r(w)}else r([])}catch{r([]),h("Database connection failed - no characters available")}finally{c(!1)}}},[g]),p=R.useCallback(async(b,_,w)=>{if(!o)return{success:!1,error:"No campaign selected"};try{const j=`${b}  ${_}`,N=await g.createCharacterForCampaign(o,w,j,b,_);if(N.success&&N.data){const U={id:N.data.id,campaignId:N.data.campaign_id||"",displayName:N.data.name,playerName:b,characterName:_,ownerId:N.data.owner_id||void 0};return r($=>[...$,U]),{success:!0,data:U}}return{success:!1,error:N.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[o,g]),x=R.useCallback(async(b,_)=>{try{const w=await g.deleteCharacter(b,_);return w.success?(r(j=>j.filter(N=>N.id!==b)),{success:!0}):{success:!1,error:w.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[g]);return R.useEffect(()=>{o?y(o):r([])},[o,y]),{characters:n,loading:i,error:u,createCharacter:p,deleteCharacter:x,refreshCharacters:()=>o&&y(o)}}const rx=()=>{const[o,n]=R.useState([]),[r,i]=R.useState(!1),[c,u]=R.useState(null),h=Sg(),g=async b=>{try{i(!0),u(null);const _=await h.getCampaignMembers(b);if(_.success&&_.data)return n(_.data),{success:!0,data:_.data};const w=_.error||"Failed to fetch members";return u(w),{success:!1,error:w}}catch{const _="An unexpected error occurred";return u(_),{success:!1,error:_}}finally{i(!1)}};return{members:o,loading:r,error:c,fetchMembers:g,addMemberByEmail:async(b,_,w)=>{try{u(null);const j=await h.addMemberByEmail(b,_,w);if(j.success)return await g(b),{success:!0};const N=j.error||"Failed to add member";return u(N),{success:!1,error:N}}catch{const j="An unexpected error occurred";return u(j),{success:!1,error:j}}},updateMemberRole:async(b,_,w)=>{try{u(null);const j=await h.updateMemberRole(b,_,w);if(j.success)return await g(b),{success:!0};const N=j.error||"Failed to update member role";return u(N),{success:!1,error:N}}catch{const j="An unexpected error occurred";return u(j),{success:!1,error:j}}},removeMember:async(b,_)=>{try{u(null);const w=await h.removeMember(b,_);if(w.success)return await g(b),{success:!0};const j=w.error||"Failed to remove member";return u(j),{success:!1,error:j}}catch{const w="An unexpected error occurred";return u(w),{success:!1,error:w}}}}};function rt({isOpen:o,onClose:n,title:r,children:i,maxWidth:c="md"}){if(R.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),R.useEffect(()=>{const h=g=>{g.key==="Escape"&&n()};if(o)return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[o,n]),!o)return null;const u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:h=>{h.target===h.currentTarget&&n()},children:f.jsxs("div",{className:`card w-full ${u[c]}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:r}),f.jsx(Ib,{icon:f.jsx(Im,{size:20}),onClick:n,"aria-label":"Close modal"})]}),i]})})}function Ja({onCancel:o,onConfirm:n,confirmText:r="Confirm",cancelText:i="Cancel",confirmVariant:c="primary",confirmDisabled:u=!1,confirmType:h="button",isLoading:g=!1,children:y}){return y?f.jsx("div",{className:"flex gap-2 mt-6",children:y}):f.jsxs("div",{className:"flex gap-2 mt-6",children:[o&&f.jsx(ae,{onClick:o,variant:"ghost",className:"flex-1 justify-center",disabled:g,children:i}),(n||h==="submit")&&f.jsx(ae,{onClick:h==="submit"?void 0:n,variant:c,className:"flex-1 justify-center",disabled:g||u,type:h,children:r})]})}function ix({size:o="md",className:n=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return f.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[o]} ${n}`,role:"status","aria-label":"Loading"})}function lx({message:o="Loading..."}){return f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[f.jsx(ix,{size:"lg",className:"mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:o})]})}function Zm({roles:o,onChange:n,disabled:r=!1,showError:i=!0}){const c=(g,y)=>{const p={...o,[g]:y};n(p)},u=tg(o),h=o.isGm&&o.isPlayer&&!o.isAdmin;return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:o.isAdmin,onChange:g=>c("isAdmin",g.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Administrator"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can manage campaign settings and members)"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:o.isGm,onChange:g=>c("isGm",g.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game Master (GM)"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can run game sessions)"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:o.isPlayer,onChange:g=>c("isPlayer",g.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Player"}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can create and play characters)"})]})]}),f.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current roles:"," ",f.jsx("span",{className:"font-medium text-gray-900 dark:text-zinc-50",children:hl(o)})]})}),i&&!u&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:f.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[!o.isAdmin&&!o.isGm&&!o.isPlayer&&"Must select at least one role.",h&&"Cannot be both GM and Player without Administrator privileges. This prevents conflicts of interest."]})})]})}function cx({campaign:o,onUpdateCampaign:n,onDeleteCampaign:r,onGetMembers:i,onAddMember:c,onUpdateMemberRole:u,onRemoveMember:h,onClose:g}){const[y,p]=R.useState(!1),[x,b]=R.useState(!1),[_,w]=R.useState(!1),[j,N]=R.useState(!1),[U,$]=R.useState([]),[L,q]=R.useState(!1),[V,Y]=R.useState(!1),[G,F]=R.useState(null),[le,Z]=R.useState(o.name),[oe,se]=R.useState(o.description||""),[be,nt]=R.useState(!1),[lt,Ie]=R.useState(!1),[M,H]=R.useState(""),[X,ye]=R.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),[_e,ke]=R.useState(null),Ee=async Q=>{if(Q.preventDefault(),!!le.trim())try{nt(!0),await n(o.id,{name:le,description:oe||null}),p(!1)}finally{nt(!1)}},ge=async()=>{try{Ie(!0),await r(o.id),b(!1),g?.()}finally{Ie(!1)}},ze=async()=>{try{const Q=await i(o.id);Q&&$(Q)}catch{}},ct=async()=>{if(U.length>0&&!_){w(!0);return}try{q(!0);const Q=await i(o.id);Q&&$(Q),w(!0)}finally{q(!1)}},Nt=async Q=>{if(Q.preventDefault(),!!M.trim()){Y(!0),ke(null);try{const ce=await c(o.id,M,X);ce.success?(H(""),ye({isAdmin:!1,isGm:!1,isPlayer:!0}),N(!1),ze()):ke(ce.error||"Failed to add member")}catch(ce){ke(ce instanceof Error?ce.message:"Failed to add member")}finally{Y(!1)}}},[Xe,qt]=R.useState(null),[Ht,ya]=R.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),pa=async Q=>{if(Xe){F(Xe.user_id);try{if((await u(o.id,Xe.user_id,Q)).success){const st=await i(o.id);st&&$(st),qt(null)}}finally{F(null)}}},Ia=Q=>{qt(Q),ya(Q.roles)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),f.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:o.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o.description||"No description provided"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),f.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[o.member_count||0," member(s)"]})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs(ae,{onClick:()=>p(!0),className:"flex items-center gap-2 justify-center",children:[f.jsx(il,{className:"w-4 h-4"}),"Edit Campaign"]}),f.jsxs(ae,{onClick:ct,disabled:L,className:"flex items-center gap-2 justify-center",children:[f.jsx(Es,{className:"w-4 h-4"}),L?"Loading...":"Manage Members"]})]})]}),f.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[f.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),f.jsxs(ae,{onClick:()=>b(!0),variant:"danger",className:"flex items-center gap-2",children:[f.jsx(kr,{className:"w-4 h-4"}),"Delete Campaign"]})]}),f.jsx(rt,{isOpen:y,onClose:()=>p(!1),title:"Edit Campaign",children:f.jsxs("form",{onSubmit:Ee,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),f.jsx("input",{type:"text",value:le,onChange:Q=>Z(Q.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:oe,onChange:Q=>se(Q.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsx(Ja,{onCancel:()=>p(!1),cancelText:"Cancel",confirmText:be?"Updating...":"Update",confirmDisabled:be||!le.trim(),confirmType:"submit",isLoading:be})]})}),f.jsxs(rt,{isOpen:x,onClose:()=>b(!1),title:"Delete Campaign",children:[f.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',o.name,'"? This action cannot be undone and will remove all campaign data and members.']}),f.jsx(Ja,{onCancel:()=>b(!1),onConfirm:ge,cancelText:"Cancel",confirmText:lt?"Deleting...":"Delete",confirmVariant:"danger",isLoading:lt})]}),f.jsx(rt,{isOpen:_,onClose:()=>w(!1),title:"Campaign Members",maxWidth:"lg",children:f.jsxs("div",{className:"space-y-4",children:[U.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):f.jsx("div",{className:"space-y-3",children:U.map(Q=>f.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:Q.user_profiles.display_name||"No Name"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:Q.user_profiles.email})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"flex flex-wrap gap-1",children:f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:hl(Q.roles)})}),f.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>Ia(Q),disabled:G===Q.user_id,children:f.jsx(il,{className:"w-3 h-3"})}),G===Q.user_id&&f.jsx("span",{className:"text-xs text-gray-500",children:"Updating..."}),!Q.roles.isAdmin&&f.jsx(ae,{size:"sm",variant:"danger",onClick:()=>h(o.id,Q.user_id),children:f.jsx(kr,{className:"w-3 h-3"})})]})]},Q.id))}),f.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:f.jsxs(ae,{variant:"primary",className:"w-full justify-center",onClick:()=>N(!0),children:[f.jsx(As,{className:"w-4 h-4"}),"Add Member"]})})]})}),f.jsx(rt,{isOpen:j,onClose:()=>{N(!1),H(""),ye({isAdmin:!1,isGm:!1,isPlayer:!0}),ke(null)},title:"Add Campaign Member",children:f.jsxs("form",{onSubmit:Nt,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),f.jsx("input",{type:"email",value:M,onChange:Q=>H(Q.target.value),className:"input w-full",placeholder:"Enter member's email",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles"}),f.jsx(Zm,{roles:X,onChange:ye})]}),_e&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:f.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:_e})}),f.jsx(Ja,{onCancel:()=>{N(!1),H(""),ye({isAdmin:!1,isGm:!1,isPlayer:!0}),ke(null)},cancelText:"Cancel",confirmText:V?"Adding...":"Add Member",confirmDisabled:V||!M.trim(),confirmType:"submit",isLoading:V})]})}),Xe&&f.jsx(rt,{isOpen:!!Xe,onClose:()=>qt(null),title:`Edit Roles - ${Xe.user_profiles.display_name||Xe.user_profiles.email}`,children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Roles"}),f.jsx(Zm,{roles:Ht,onChange:ya,disabled:G===Xe.user_id})]}),f.jsx(Ja,{onCancel:()=>qt(null),cancelText:"Cancel",confirmText:G===Xe.user_id?"Updating...":"Update Roles",confirmDisabled:G===Xe.user_id,onConfirm:()=>pa(Ht),isLoading:G===Xe.user_id})]})})]})}function ox(o){return o.isAdmin?"admin":o.isGm?"gm":o.isPlayer?"player":"unknown"}function ux(o){const n=[];return o.isAdmin&&n.push("ADMIN"),o.isGm&&n.push("GM"),o.isPlayer&&n.push("PLAYER"),n.join(" + ")}function dx(o){const n=ox(o);return n==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":n==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function fx({campaign:o,onViewCampaign:n,onDeleteCharacter:r}){const{characters:i,loading:c,error:u}=Ts(o.id);return c?f.jsxs("div",{className:"animate-pulse p-4",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),f.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):u?f.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",u]}):f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:o.name}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," character(s)"]})]}),o.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${dx(o.userRoles)}`,children:ux(o.userRoles)})]}),i.length===0?f.jsxs("div",{className:"text-center py-6",children:[f.jsx(Es,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):f.jsx("div",{className:"space-y-3 mb-4",children:i.map(h=>f.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:h.displayName}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",h.playerName]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ae,{size:"sm",onClick:()=>n(o.id),title:"View character details in campaign",children:f.jsx(il,{className:"w-4 h-4"})}),f.jsx(ae,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>r(h.id,h.displayName,o.id),children:f.jsx(kr,{className:"w-4 h-4"})})]})]},h.id))}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(ae,{onClick:()=>n(o.id),className:"flex items-center gap-2 flex-1",children:[f.jsx(Es,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function hx({campaigns:o,onViewCampaign:n}){const{user:r}=jn(),[i,c]=R.useState(!1),[u,h]=R.useState(""),[g,y]=R.useState(""),[p,x]=R.useState(""),[b,_]=R.useState(!1),[w,j]=R.useState(null),[N,U]=R.useState(!1),[$,L]=R.useState(null),[q,V]=R.useState(!1),{createCharacter:Y}=Ts(u||""),{deleteCharacter:G}=Ts($?.campaignId||""),F=o.filter(se=>se.memberCount&&se.memberCount>0),le=async se=>{if(se.preventDefault(),!(!g.trim()||!p.trim()||!u))try{_(!0),j(null);const be=await Y(g.trim(),p.trim(),"");be.success?(y(""),x(""),h(""),c(!1)):j(be.error||"Failed to create character")}finally{_(!1)}},Z=(se,be,nt)=>{L({id:se,name:be,campaignId:nt}),U(!0)},oe=async()=>{if(!(!$||!r))try{V(!0);const se=await G($.id,r.id);se.success?(U(!1),L(null)):j(se.error||"Failed to delete character")}finally{V(!1)}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:F.length}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:F.reduce((se,be)=>se+(be.memberCount||0),0)}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs(ae,{onClick:()=>c(!0),disabled:o.length===0,className:"flex items-center gap-2 justify-center",children:[f.jsx(As,{className:"w-4 h-4"}),"Create New Character"]}),f.jsxs(ae,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[f.jsx(il,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),o.length===0&&f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),F.length===0?f.jsxs("div",{className:"card text-center py-8",children:[f.jsx(Es,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),f.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),f.jsxs(ae,{onClick:()=>c(!0),disabled:o.length===0,className:"flex items-center gap-2",children:[f.jsx(As,{className:"w-4 h-4"}),"Create Character"]})]}):f.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:F.map(se=>f.jsx(fx,{campaign:se,onViewCampaign:n,onDeleteCharacter:Z},se.id))})]}),f.jsx(rt,{isOpen:i,onClose:()=>c(!1),title:"Create New Character",children:f.jsxs("form",{onSubmit:le,className:"space-y-4",children:[w&&f.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:w}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),f.jsxs("select",{value:u,onChange:se=>h(se.target.value),className:"input w-full",required:!0,children:[f.jsx("option",{value:"",children:"Select a campaign"}),o.map(se=>f.jsx("option",{value:se.id,children:se.name},se.id))]})]}),f.jsx(P,{label:"Player Name",value:g,onChange:se=>y(se.target.value),placeholder:"e.g., John Smith",required:!0}),f.jsx(P,{label:"Character Name",value:p,onChange:se=>x(se.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),f.jsx(Ja,{onCancel:()=>c(!1),cancelText:"Cancel",confirmText:b?"Creating...":"Create",confirmDisabled:b||!g.trim()||!p.trim()||!u,confirmType:"submit",isLoading:b})]})}),f.jsx(rt,{isOpen:N,onClose:()=>U(!1),title:"Delete Character",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:f.jsx(kr,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),f.jsxs("div",{className:"flex-grow",children:[f.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',$?.name,'"?']}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),f.jsx(Ja,{onCancel:()=>U(!1),cancelText:"Cancel",confirmText:q?"Deleting...":"Delete",confirmDisabled:q,onConfirm:oe,confirmVariant:"danger",isLoading:q})]})})]})}function mx(o){const[n,r]=R.useState([]),[i,c]=R.useState(!1),[u,h]=R.useState(null),g=R.useCallback(async x=>{if(x){c(!0),h(null);try{const _=await sl().getStandaloneCharacters(x);if(_.success&&_.data){const w=_.data.map(j=>({id:j.id,campaignId:null,displayName:j.name,playerName:j.player_name||"",characterName:j.character_name||"",ownerId:j.owner_id}));r(w)}else h(_.error||"Failed to load characters"),r([])}catch{h("Database connection failed - no characters available"),r([])}finally{c(!1)}}},[]),y=R.useCallback(async(x,b,_)=>{try{const w=sl(),j=`${x}  ${b}`,N=await w.createStandaloneCharacter(_,j,x,b);if(N.success&&N.data){const U={id:N.data.id,campaignId:null,displayName:N.data.name,playerName:N.data.player_name||x,characterName:N.data.character_name||b,ownerId:N.data.owner_id};return r($=>[U,...$]),{success:!0,data:U}}return{success:!1,error:N.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[]),p=R.useCallback(async(x,b)=>{try{const w=await sl().deleteStandaloneCharacter(x,b);return w.success?(r(j=>j.filter(N=>N.id!==x)),{success:!0}):{success:!1,error:w.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[]);return R.useEffect(()=>{o?g(o):r([])},[o,g]),{characters:n,loading:i,error:u,createCharacter:y,deleteCharacter:p,refreshCharacters:()=>o&&g(o)}}function gx({characters:o,currentUserId:n,onDeleteCharacter:r}){return o.length===0?f.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[f.jsx(Es,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),f.jsx("p",{children:"No standalone characters yet."}),f.jsx("p",{className:"text-sm mt-1",children:"Create your first character to get started!"})]}):f.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:o.map(i=>f.jsxs("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 truncate",children:i.displayName}),i.ownerId===n&&f.jsx(ae,{onClick:()=>r(i.id,i.displayName),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 p-1 h-auto",title:"Delete character",children:f.jsx(kr,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Player:"})," ",i.playerName]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Character:"})," ",i.characterName]}),f.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Available for campaign invitations"})]})]},i.id))})}function yx(){const[o,n]=R.useState(!1),[r,i]=R.useState(""),[c,u]=R.useState(""),[h,g]=R.useState(!1),[y,p]=R.useState(null),[x,b]=R.useState(!1),[_,w]=R.useState(null),{user:j}=jn(),{characters:N,loading:U,error:$,createCharacter:L,deleteCharacter:q,refreshCharacters:V}=mx(j?.id),Y=async oe=>{if(oe.preventDefault(),p(null),!j){p("You must be logged in to create a character");return}if(!r.trim()){p("Player name is required");return}if(!c.trim()){p("Character name is required");return}g(!0);try{const se=await L(r.trim(),c.trim(),j.id);se.success?(n(!1),i(""),u(""),p(null)):p(se.error||"Failed to create character")}catch{p("An unexpected error occurred")}finally{g(!1)}},G=(oe,se)=>{w({id:oe,name:se}),b(!0)},F=async()=>{if(_&&j)try{const oe=await q(_.id,j.id);oe.success?(b(!1),w(null)):p(oe.error||"Failed to delete character")}catch{p("An unexpected error occurred while deleting character")}},le=()=>{n(!1),i(""),u(""),p(null)},Z=()=>{n(!0),i(""),u(""),p(null)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50",children:"Your Characters"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Create characters that can be used in any campaign when invited."})]}),f.jsxs(ae,{onClick:Z,className:"flex items-center gap-2",children:[f.jsx(As,{className:"w-4 h-4"}),"Create Character"]})]}),f.jsxs("div",{className:"card",children:[U&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:f.jsx("p",{children:"Loading characters..."})}),!U&&$&&f.jsxs("div",{className:"text-center py-6 text-red-600 dark:text-red-400",children:[f.jsxs("p",{children:["Error: ",$]}),f.jsx(ae,{onClick:V,variant:"ghost",size:"sm",className:"mt-2",children:"Try Again"})]}),!U&&!$&&f.jsx(gx,{characters:N,currentUserId:j?.id,onDeleteCharacter:G})]}),f.jsx(rt,{isOpen:o,onClose:le,title:"Create New Character",children:f.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[f.jsx(P,{label:"Player Name",value:r,onChange:oe=>i(oe.target.value),placeholder:"e.g., John Smith",required:!0}),f.jsx(P,{label:"Character Name",value:c,onChange:oe=>u(oe.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),y&&f.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm",children:y}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(ae,{type:"button",variant:"ghost",onClick:le,disabled:h,children:"Cancel"}),f.jsx(ae,{type:"submit",disabled:h||!r.trim()||!c.trim(),children:h?"Creating...":"Create Character"})]})]})}),f.jsx(rt,{isOpen:x,onClose:()=>b(!1),title:"Delete Character",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',_?.name,'"? This action cannot be undone.']}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(ae,{variant:"ghost",onClick:()=>b(!1),children:"Cancel"}),f.jsx(ae,{variant:"danger",onClick:F,children:"Delete Character"})]})]})})]})}function px({user:o,onSettings:n,onSignOut:r}){const[i,c]=R.useState(!1),u=R.useRef(null);R.useEffect(()=>{const g=y=>{u.current&&!u.current.contains(y.target)&&c(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),R.useEffect(()=>{const g=y=>{y.key==="Escape"&&c(!1)};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[]);const h=o.displayName||o.username||o.email.split("@")[0];return f.jsxs("div",{className:"relative",ref:u,children:[f.jsxs("button",{onClick:()=>c(!i),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-expanded":i,"aria-haspopup":"true",children:[f.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:f.jsx(ll,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),f.jsx("span",{className:"hidden sm:block max-w-24 truncate",children:h}),f.jsx(Wy,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&f.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-gray-200 dark:border-zinc-700 py-1 z-50",children:[f.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-700",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:f.jsx(ll,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:h}),o.username&&f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",o.username]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o.email})]})]})}),f.jsxs("div",{className:"py-1",children:[f.jsxs("button",{onClick:()=>{c(!1),n()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors",children:[f.jsx(Wm,{className:"w-4 h-4 mr-3"}),"Account Settings"]}),f.jsxs("button",{onClick:()=>{c(!1),r()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors",children:[f.jsx(Fy,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})}function vx({isOpen:o,onClose:n,user:r,onUpdateProfile:i,onChangePassword:c,onDeleteAccount:u}){const[h,g]=R.useState("profile"),[y,p]=R.useState(!1),[x,b]=R.useState(null),[_,w]=R.useState(r.displayName||""),[j,N]=R.useState(r.username||""),[U,$]=R.useState(""),[L,q]=R.useState(""),[V,Y]=R.useState(""),[G,F]=R.useState(!1),[le,Z]=R.useState(!1),[oe,se]=R.useState(!1),be=Fb(L),nt=async H=>{H.preventDefault(),p(!0),b(null);try{await i({displayName:_.trim()||void 0,username:j.trim()||void 0}),b({type:"success",text:"Profile updated successfully!"})}catch(X){b({type:"error",text:X instanceof Error?X.message:"Failed to update profile"})}finally{p(!1)}},lt=async H=>{if(H.preventDefault(),p(!0),b(null),!be.isValid){b({type:"error",text:"Please fix the password requirements"}),p(!1);return}if(L!==V){b({type:"error",text:"New passwords do not match"}),p(!1);return}try{await c({currentPassword:U,newPassword:L}),b({type:"success",text:"Password changed successfully!"}),$(""),q(""),Y("")}catch(X){b({type:"error",text:X instanceof Error?X.message:"Failed to change password"})}finally{p(!1)}},Ie=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&u()},M=[{id:"profile",label:"Profile",icon:ll},{id:"password",label:"Password",icon:ep},{id:"danger",label:"Danger Zone",icon:fm}];return f.jsx(rt,{isOpen:o,onClose:n,title:"Account Settings",maxWidth:"xl",children:f.jsxs("div",{className:"flex h-[32rem]",children:[f.jsx("div",{className:"w-56 border-r border-gray-200 dark:border-zinc-700 pr-6",children:f.jsx("nav",{className:"space-y-1",children:M.map(H=>{const X=H.icon;return f.jsxs("button",{onClick:()=>g(H.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${h===H.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:[f.jsx(X,{className:"w-4 h-4 mr-3"}),H.label]},H.id)})})}),f.jsxs("div",{className:"flex-1 pl-8",children:[x&&f.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${x.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:x.text}),h==="profile"&&f.jsxs("form",{onSubmit:nt,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),f.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[f.jsx(tp,{className:"w-4 h-4 text-gray-400 mr-3"}),f.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),f.jsx(P,{label:"Display Name",type:"text",value:_,onChange:H=>w(H.target.value),placeholder:"Enter your display name"}),f.jsx(P,{label:"Username",type:"text",value:j,onChange:H=>N(H.target.value),placeholder:"Enter your username"}),f.jsx(ae,{type:"submit",disabled:y,className:"w-full",children:y?"Updating...":"Update Profile"})]}),h==="password"&&f.jsxs("form",{onSubmit:lt,className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(P,{label:"Current Password",type:G?"text":"password",value:U,onChange:H=>$(H.target.value),placeholder:"Enter your current password",required:!0}),f.jsx("button",{type:"button",onClick:()=>F(!G),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:G?f.jsx(Ro,{className:"w-4 h-4"}):f.jsx(ko,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"relative",children:[f.jsx(P,{label:"New Password",type:le?"text":"password",value:L,onChange:H=>q(H.target.value),placeholder:"Enter your new password",required:!0}),f.jsx("button",{type:"button",onClick:()=>Z(!le),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:le?f.jsx(Ro,{className:"w-4 h-4"}):f.jsx(ko,{className:"w-4 h-4"})})]}),L&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Password Strength:"}),f.jsx("span",{className:`text-sm font-medium ${ex(be.strength)}`,children:tx(be.strength)})]}),f.jsx("div",{className:"space-y-1 text-xs",children:be.errors.map((H,X)=>f.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[f.jsx("span",{className:"mr-2",children:""}),H]},X))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(P,{label:"Confirm New Password",type:oe?"text":"password",value:V,onChange:H=>Y(H.target.value),placeholder:"Confirm your new password",required:!0}),f.jsx("button",{type:"button",onClick:()=>se(!oe),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:oe?f.jsx(Ro,{className:"w-4 h-4"}):f.jsx(ko,{className:"w-4 h-4"})})]}),f.jsx(ae,{type:"submit",disabled:y||!be.isValid||L!==V,className:"w-full",children:y?"Changing Password...":"Change Password"})]}),h==="danger"&&f.jsx("div",{className:"space-y-6",children:f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(fm,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),f.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),f.jsx("div",{className:"mt-4",children:f.jsx(ae,{variant:"danger",onClick:Ie,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function bx({isOpen:o,onClose:n,onCreateCampaign:r}){const[i,c]=R.useState(""),[u,h]=R.useState(""),[g,y]=R.useState(!1),[p,x]=R.useState(!1),[b,_]=R.useState([]),[w,j]=R.useState(""),[N,U]=R.useState("player"),$=async Y=>{if(Y.preventDefault(),!!i.trim())try{x(!0),(await r({name:i.trim(),description:u.trim()||void 0,creatorIsAlsoGM:g,initialMembers:b.length>0?b:void 0})).success&&(c(""),h(""),y(!1),_([]),j(""),U("player"))}finally{x(!1)}},L=()=>{w.trim()&&(b.some(Y=>Y.email.toLowerCase()===w.toLowerCase())||(_([...b,{email:w.trim(),role:N}]),j(""),U("player")))},q=Y=>{_(b.filter((G,F)=>F!==Y))},V=()=>{c(""),h(""),y(!1),_([]),j(""),U("player"),n()};return f.jsx(rt,{isOpen:o,onClose:V,title:"Create New Campaign",maxWidth:"lg",children:f.jsxs("form",{onSubmit:$,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Campaign Information"}),f.jsx(P,{label:"Campaign Name",value:i,onChange:Y=>c(Y.target.value),placeholder:"Enter campaign name",required:!0}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:u,onChange:Y=>h(Y.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",id:"creatorIsAlsoGM",checked:g,onChange:Y=>y(Y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),f.jsx("label",{htmlFor:"creatorIsAlsoGM",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Also be the Game Master"})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You will always be an Administrator with full campaign control. Check this if you also want to run the game as GM."})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Invite Players (Optional)"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add players to your campaign. They'll need to have accounts to join."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{type:"email",value:w,onChange:Y=>j(Y.target.value),placeholder:"player@example.com",className:"input w-full",onKeyDown:Y=>{Y.key==="Enter"&&(Y.preventDefault(),L())}})}),f.jsxs("select",{value:N,onChange:Y=>U(Y.target.value),className:"input",children:[f.jsx("option",{value:"player",children:"Player"}),f.jsx("option",{value:"gm",children:"GM"}),f.jsx("option",{value:"admin",children:"Admin"})]}),f.jsx(ae,{type:"button",onClick:L,disabled:!w.trim(),size:"sm",children:f.jsx(As,{className:"w-4 h-4"})})]}),b.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Initial Members (",b.length,")"]}),f.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.map((Y,G)=>f.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-50",children:Y.email}),f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:Y.role})]}),f.jsx("button",{type:"button",onClick:()=>q(G),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:f.jsx(Im,{className:"w-4 h-4"})})]},G))})]})]}),f.jsx(Ja,{onCancel:V,cancelText:"Cancel",confirmText:p?"Creating...":"Create Campaign",confirmDisabled:p||!i.trim(),confirmType:"submit",isLoading:p})]})})}const xx=()=>{const{user:o}=jn(),[n,r]=R.useState([]),[i,c]=R.useState(!0),[u,h]=R.useState(null),g=sl(),y=R.useCallback(async()=>{if(!o?.email){c(!1);return}try{c(!0),h(null);const _=await g.getUserInvitations(o.email);_.success?r(_.data||[]):_.error?.includes("function")&&_.error?.includes("does not exist")?r([]):h(_.error||"Failed to load invitations")}catch{r([]),h(null)}finally{c(!1)}},[o?.email,g]),p=R.useCallback(async _=>{if(!o)return{success:!1,error:"User not found"};try{const w=await g.acceptCampaignInvitation(_,o.id);return w.success&&r(j=>j.filter(N=>N.id!==_)),w}catch{return{success:!1,error:"Failed to accept invitation"}}},[o,g]),x=R.useCallback(async _=>{try{const w=await g.declineCampaignInvitation(_);return w.success&&r(j=>j.filter(N=>N.id!==_)),w}catch{return{success:!1,error:"Failed to decline invitation"}}},[g]),b=R.useCallback(async(_,w)=>{if(!o)return{success:!1,error:"User not found"};try{const j=await p(_);if(!j.success)return j;const N=n.find(L=>L.id===_);if(!N)return{success:!1,error:"Invitation not found"};const{supabase:U}=await Za(async()=>{const{supabase:L}=await Promise.resolve().then(()=>Jb);return{supabase:L}},void 0),{error:$}=await U.from("characters").update({campaign_id:N.campaignId}).eq("id",w).eq("owner_id",o.id);return $?{success:!1,error:"Failed to assign character to campaign"}:{success:!0}}catch{return{success:!1,error:"Failed to accept invitation and assign character"}}},[o,n,p]);return R.useEffect(()=>{y()},[y]),{invitations:n,loading:i,error:u,acceptInvitation:p,declineInvitation:x,assignCharacterAndAccept:b,refreshInvitations:y}},_x=({onInvitationAccepted:o})=>{const{user:n}=jn(),{invitations:r,loading:i,error:c,acceptInvitation:u,declineInvitation:h,assignCharacterAndAccept:g}=xx(),[y,p]=R.useState([]),[x,b]=R.useState(!1),[_,w]=R.useState(null),[j,N]=R.useState(""),[U,$]=R.useState(!1),L=R.useCallback(async()=>{if(n)try{const{data:Z,error:oe}=await te.from("characters").select("id, name, campaign_id").eq("owner_id",n.id).is("campaign_id",null);!oe&&Z&&p(Z)}catch{}},[n]);R.useEffect(()=>{L()},[L]);const q=async Z=>{$(!0);try{(await u(Z.id)).success&&o?.()}finally{$(!1)}},V=Z=>{w(Z),b(!0)},Y=async()=>{if(!(!_||!j)){$(!0);try{(await g(_.id,j)).success&&(b(!1),w(null),N(""),await L(),o?.())}finally{$(!1)}}},G=async Z=>{$(!0);try{await h(Z)}finally{$(!1)}},F=Z=>{const oe=[];return Z.isAdmin&&oe.push("Admin"),Z.isGm&&oe.push("GM"),Z.isPlayer&&oe.push("Player"),oe.length>0?oe.join(", "):"Player"},le=Z=>Z?Z.toLocaleDateString():"No expiration";return i?f.jsx("div",{className:"text-center py-4",children:"Loading invitations..."}):c?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"Campaign Invitations"}),f.jsx("p",{className:"text-red-600",children:c})]}):r.length===0?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"No pending invitations"}),f.jsx("p",{children:"You don't have any pending campaign invitations at the moment."})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Invitations"}),r.map(Z=>f.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg",children:Z.campaignName||"Unknown Campaign"}),f.jsxs("p",{className:"text-gray-600 text-sm",children:["Invited by ",Z.invitedByName||"Unknown User"]})]}),f.jsxs("div",{className:"text-right text-sm text-gray-500",children:[f.jsxs("div",{children:["Expires: ",le(Z.expiresAt)]}),f.jsxs("div",{children:["Roles: ",F(Z.rolesOffered)]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ae,{onClick:()=>q(Z),disabled:U,className:"bg-green-600 hover:bg-green-700",children:"Accept"}),y.length>0&&f.jsx(ae,{onClick:()=>V(Z),disabled:U,className:"bg-blue-600 hover:bg-blue-700",children:"Accept & Assign Character"}),f.jsx(ae,{onClick:()=>G(Z.id),disabled:U,variant:"default",children:"Decline"})]})]},Z.id)),f.jsx(rt,{isOpen:x,onClose:()=>{b(!1),w(null),N("")},title:"Accept Invitation & Assign Character",children:f.jsxs("div",{className:"space-y-4",children:[_&&f.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[f.jsx("h4",{className:"font-medium",children:_.campaignName}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Roles: ",F(_.rolesOffered)]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"character-select",className:"block text-sm font-medium mb-2",children:"Select a character to assign:"}),f.jsxs("select",{id:"character-select",value:j,onChange:Z=>N(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"",children:"Choose a character..."}),y.map(Z=>f.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[f.jsx(ae,{onClick:()=>{b(!1),w(null),N("")},variant:"default",disabled:U,children:"Cancel"}),f.jsx(ae,{onClick:Y,disabled:U||!j,className:"bg-green-600 hover:bg-green-700",children:"Accept & Assign"})]})]})})]})},ou=o=>o.isAdmin?"admin":o.isGm?"gm":"player";function jg(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Ko({title:o,description:n,icon:r,onClick:i,disabled:c}){return f.jsx("div",{className:`card p-6 cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 ${c?"opacity-50 cursor-not-allowed":""}`,onClick:c?void 0:i,children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"flex-shrink-0 text-blue-600 dark:text-blue-400",children:r}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:o}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:n})]}),f.jsx("div",{className:"flex-shrink-0 text-gray-400 dark:text-gray-500",children:f.jsx(sp,{className:"w-5 h-5"})})]})})}function wx({campaigns:o,onCampaignSelect:n}){const r=o.sort((i,c)=>c.updatedAt.getTime()-i.updatedAt.getTime()).slice(0,3);return f.jsxs("div",{className:"card p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),o.length>3&&f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," total"]})]}),r.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):f.jsx("div",{className:"space-y-3",children:r.map(i=>f.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer transition-colors",onClick:()=>n(i.id),children:[f.jsxs("div",{className:"flex-grow",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:i.name}),i.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${jg(ou(i.userRoles))}`,children:hl(i.userRoles)})]}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.memberCount||0," member(s)  Updated"," ",i.updatedAt.toLocaleDateString()]})]}),f.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:f.jsx(np,{className:"w-4 h-4"})})]},i.id))})]})}function Sx({campaign:o,onSelect:n,onEdit:r,onSettings:i}){return f.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),o.userRoles&&f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${jg(ou(o.userRoles))}`,children:hl(o.userRoles)})]}),o.description&&f.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2",children:o.description}),f.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:[f.jsxs("span",{children:[o.memberCount||0," member(s)"]}),f.jsxs("span",{children:["Created ",o.createdAt.toLocaleDateString()]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ae,{size:"sm",onClick:()=>n(o.id),className:"flex-1",children:"Enter Campaign"}),f.jsx(ae,{size:"sm",onClick:()=>r(o),children:f.jsx(rp,{className:"w-4 h-4"})}),f.jsx(ae,{size:"sm",onClick:()=>i(o),children:f.jsx(Wm,{className:"w-4 h-4"})})]})]})}function jx({campaign:o,onViewCampaign:n}){const{characters:r,loading:i}=Ts(o.id);return i?f.jsx("div",{className:"card",children:f.jsxs("div",{className:"animate-pulse",children:[f.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),f.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})}):f.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),f.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[r.length," CHARACTER",r.length!==1?"S":""]})]}),r.length===0?f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(c=>f.jsxs("div",{className:"flex items-center text-sm",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),f.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:c.characterName||c.displayName})]},c.id)),r.length>3&&f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",r.length-3," more..."]})]})}),f.jsx(ae,{size:"sm",onClick:()=>n(o.id),className:"w-full",children:"View Campaign"})]})}function Cx({campaigns:o,onSelect:n,onEdit:r,onSettings:i}){return f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(c=>f.jsx(Sx,{campaign:c,onSelect:n,onEdit:r,onSettings:i},c.id))})]})}function Ax({campaigns:o,onViewCampaign:n}){const r=o.filter(i=>i.memberCount&&i.memberCount>0);return f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),r.length===0?f.jsx("div",{className:"card p-6 text-center",children:f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(i=>f.jsx(jx,{campaign:i,onViewCampaign:n},i.id))})]})}function Ex({onCampaignSelect:o}){const{campaigns:n,loading:r,error:i,createCampaign:c,updateCampaign:u,deleteCampaign:h}=sx(),{fetchMembers:g,addMemberByEmail:y,removeMember:p,updateMemberRole:x}=rx(),{signOut:b,user:_,updateProfile:w,changePassword:j,deleteAccount:N}=jn(),[U,$]=R.useState(!1),[L,q]=R.useState(!1),[V,Y]=R.useState(null),[G,F]=R.useState(""),[le,Z]=R.useState(""),[oe,se]=R.useState(!1),[be,nt]=R.useState(!1),[lt,Ie]=R.useState(null),[M,H]=R.useState(!1),[X,ye]=R.useState(!1),[_e,ke]=R.useState(!1),Ee=async Q=>{const ce=await c(Q);return ce.success&&$(!1),ce},ge=Q=>{Y(Q),F(Q.name),Z(Q.description||""),q(!0)},ze=async Q=>{if(Q.preventDefault(),!(!V||!G.trim()))try{se(!0),await u(V.id,{name:G,description:le||void 0}),q(!1),Y(null)}finally{se(!1)}},ct=Q=>{Ie(Q),nt(!0)},Nt=async(Q,ce)=>{await u(Q,{name:ce.name,description:ce.description||void 0})},Xe=async Q=>{(await h(Q)).success&&(nt(!1),Ie(null))},qt=async Q=>{const ce=await g(Q);if(ce.success&&ce.data)return ce.data.map(st=>({id:st.id,user_id:st.userId,roles:st.roles,user_profiles:{email:st.email,display_name:st.displayName||null}}))},Ht=async(Q,ce,st)=>{const An=ou(st);return await y(Q,ce,An)},ya=async(Q,ce)=>{await p(Q,ce)},pa=async(Q,ce,st)=>await x(Q,ce,st),Ia=Q=>({id:Q.id,name:Q.name,description:Q.description||null,created_at:Q.createdAt.toISOString(),created_by:Q.createdBy,updated_at:Q.updatedAt.toISOString(),userRoles:Q.userRoles,member_count:Q.memberCount});return r?f.jsx(lx,{message:"Loading dashboard..."}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),_&&f.jsx(px,{user:_,onSettings:()=>H(!0),onSignOut:()=>b()})]})}),f.jsx("div",{className:"p-6 space-y-6",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[i&&f.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:i}),f.jsx("div",{className:"mb-8",children:f.jsx(_x,{onInvitationAccepted:()=>{}})}),f.jsx("div",{className:"mb-8",children:f.jsx(wx,{campaigns:n,onCampaignSelect:o})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[f.jsx(Ko,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:f.jsx(ap,{className:"w-8 h-8"}),onClick:()=>$(!0)}),f.jsx(Ko,{title:"Your Characters",description:"Create and manage your standalone characters",icon:f.jsx(ll,{className:"w-8 h-8"}),onClick:()=>ye(!0)}),f.jsx(Ko,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:f.jsx(Es,{className:"w-8 h-8"}),onClick:()=>ke(!0)})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"You can create standalone characters anytime, or create a campaign to enable campaign-specific features."})]}),n.length>0&&f.jsx("div",{className:"mb-8",children:f.jsx(Cx,{campaigns:n,onSelect:o,onEdit:ge,onSettings:ct})}),n.length>0&&f.jsx("div",{className:"mb-8",children:f.jsx(Ax,{campaigns:n,onViewCampaign:o})})]})}),f.jsx(bx,{isOpen:U,onClose:()=>$(!1),onCreateCampaign:Ee}),f.jsx(rt,{isOpen:L,onClose:()=>q(!1),title:"Edit Campaign",children:f.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[f.jsx(P,{label:"Campaign Name",value:G,onChange:Q=>F(Q.target.value),placeholder:"Enter campaign name",required:!0}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),f.jsx("textarea",{value:le,onChange:Q=>Z(Q.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),f.jsx(Ja,{onCancel:()=>q(!1),cancelText:"Cancel",confirmText:oe?"Updating...":"Update",confirmDisabled:oe||!G.trim(),confirmType:"submit",isLoading:oe})]})}),lt&&f.jsx(rt,{isOpen:be,onClose:()=>nt(!1),title:`Settings - ${lt.name}`,maxWidth:"xl",children:f.jsx(cx,{campaign:Ia(lt),onUpdateCampaign:Nt,onDeleteCampaign:Xe,onGetMembers:qt,onAddMember:Ht,onUpdateMemberRole:pa,onRemoveMember:ya,onClose:()=>nt(!1)})}),f.jsx(rt,{isOpen:_e,onClose:()=>ke(!1),title:"Character Management",maxWidth:"xl",children:f.jsx(hx,{campaigns:n,onViewCampaign:o})}),f.jsx(rt,{isOpen:X,onClose:()=>ye(!1),title:"Your Characters",maxWidth:"xl",children:f.jsx(yx,{})}),_&&f.jsx(vx,{isOpen:M,onClose:()=>H(!1),user:_,onUpdateProfile:async Q=>{const ce=await w(Q);if(!ce.success&&ce.error)throw new Error(ce.error)},onChangePassword:async Q=>{const ce=await j(Q);if(!ce.success&&ce.error)throw new Error(ce.error)},onDeleteAccount:()=>{N().then(()=>{H(!1)})}})]})}const Cg="traveller-ui-state-v1",Pm={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function Ag(){try{const o=localStorage.getItem(Cg);if(!o)return Pm;const n=JSON.parse(o);return n.PCs||(n.PCs={}),Object.keys(n.PCs).forEach(r=>{n.PCs[r].Finance||(n.PCs[r].Finance=[]),n.PCs[r].Inventory||(n.PCs[r].Inventory=[]),n.PCs[r].Weapons||(n.PCs[r].Weapons=[]),n.PCs[r].Armour||(n.PCs[r].Armour=[]),n.PCs[r].Ammo||(n.PCs[r].Ammo=[])}),n}catch{return Pm}}function Eg(o){localStorage.setItem(Cg,JSON.stringify(o))}function Ka(o){const n=Ag();n.PCs[o]||(n.PCs[o]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Eg(n))}function Nx(o){const n=R.useCallback((c,u,h)=>{o(g=>{g.PCs[c]||Ka(c);const y=g.PCs[c]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...g,PCs:{...g.PCs,[c]:{...y,Ammo:(y.Ammo||[]).map((p,x)=>x===u?h:p)}}}})},[o]),r=R.useCallback((c,u)=>{o(h=>{if(!h.PCs[c])return Ka(c),h;const g=h.PCs[c]?.Ammo?.[u];if(!g)return h;const y=Number(g["Rounds Loaded"]||0),p=Number(g["Spare Magazines"]||0),x=Number(g["Loose Rounds"]||0),b=Number(g["Magazine Size"]||0);let _=y,w=p,j=x;if(_>0)_-=1;else if(w>0)w-=1,_=b-1;else if(j>0&&b>0){const $=Math.min(j,b);j-=$,_=$-1}else return h;const N=_+w*b+j,U={...g,"Rounds Loaded":_,"Spare Magazines":w,"Loose Rounds":j,"Total Rounds":N};return{...h,PCs:{...h.PCs,[c]:{...h.PCs[c],Ammo:(h.PCs[c].Ammo||[]).map(($,L)=>L===u?U:$)}}}})},[o]),i=R.useCallback((c,u)=>{o(h=>{if(!h.PCs[c])return Ka(c),h;const g=h.PCs[c]?.Ammo?.[u];if(!g)return h;const y=Number(g["Rounds Loaded"]||0),p=Number(g["Spare Magazines"]||0),x=Number(g["Loose Rounds"]||0),b=Number(g["Magazine Size"]||0);let _=y,w=p,j=x;if(w>0&&_<b)w-=1,_=b;else if(j>0&&_<b){const $=b-_,L=Math.min(j,$);j-=L,_+=L}const N=_+w*b+j,U={...g,"Rounds Loaded":_,"Spare Magazines":w,"Loose Rounds":j,"Total Rounds":N};return{...h,PCs:{...h.PCs,[c]:{...h.PCs[c],Ammo:(h.PCs[c].Ammo||[]).map(($,L)=>L===u?U:$)}}}})},[o]);return{updateCharacterAmmo:n,fireRound:r,reloadWeapon:i}}function Tx(){const[o,n]=R.useState(Ag());R.useEffect(()=>{Eg(o)},[o]);const r=R.useCallback(b=>{n(_=>({..._,Party_Finances:b}))},[]),i=R.useCallback(b=>{n(_=>({..._,Ship_Accounts:b}))},[]),c=R.useCallback(b=>{n(_=>({..._,Ship_Cargo:[..._.Ship_Cargo,b]}))},[]),u=R.useCallback((b,_)=>{n(w=>(w.PCs[b]||Ka(b),{...w,PCs:{...w.PCs,[b]:{...w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:_}}}))},[]),h=R.useCallback((b,_)=>{n(w=>{w.PCs[b]||Ka(b);const j=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[b]:{...j,Inventory:[...j.Inventory,_]}}}})},[]),g=R.useCallback((b,_)=>{n(w=>{w.PCs[b]||Ka(b);const j=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[b]:{...j,Ammo:[...j.Ammo||[],_]}}}})},[]),y=R.useCallback((b,_)=>{n(w=>{w.PCs[b]||Ka(b);const j=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[b]:{...j,Weapons:[...j.Weapons||[],_]}}}})},[]),p=R.useCallback((b,_)=>{n(w=>{w.PCs[b]||Ka(b);const j=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[b]:{...j,Armour:[...j.Armour||[],_]}}}})},[]),x=Nx(n);return{state:o,setState:n,updatePartyFinances:r,updateShipAccounts:i,addCargoLeg:c,updateCharacterFinance:u,addCharacterInventory:h,addCharacterAmmo:g,addCharacterWeapon:y,addCharacterArmour:p,...x}}function Ox(o,n=0){let r=n;return o.map(i=>{const c=i["Amount (Cr)"],u=i.Category;return u==="Income"?r+=c:u==="Expense"&&(r-=c),{...i,"Running Total":r}})}function rl(o,n=0){return o.reduce((r,i)=>{const c=i["Amount (Cr)"],u=i.Category;return u==="Income"?r+c:u==="Expense"?r-c:r},n)}function Rx(o,n,r=0){const i=[...o,n];return i.sort((c,u)=>new Date(c.Date).getTime()-new Date(u.Date).getTime()),Ox(i,r)}function kx(o){const n=[];return o.Description?.trim()||n.push("Description is required"),o.Date||n.push("Date is required"),(o["Amount (Cr)"]===void 0||o["Amount (Cr)"]===null)&&n.push("Amount is required"),typeof o["Amount (Cr)"]=="number"&&o["Amount (Cr)"]<0&&n.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(o.Category||"")||n.push("Category must be Income, Expense, or Transfer"),{isValid:n.length===0,errors:n}}function nl(o){return`${o.toLocaleString()} Cr`}function Ux(o){const n=o.reduce((r,i)=>{const c=i["Amount (Cr)"];return i.Category==="Income"?r.totalIncome+=c:i.Category==="Expense"&&(r.totalExpenses+=c),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...n,netChange:n.totalIncome-n.totalExpenses}}function zx(o,n){return R.useMemo(()=>({party:rl(o.Party_Finances,0),ship:rl(o.Ship_Accounts,0),character:rl(o.PCs[n]?.Finance||[],0)}),[o.Party_Finances,o.Ship_Accounts,o.PCs,n])}function Mx(o,n){const r=R.useCallback(async c=>{try{const{importXlsx:u}=await Za(async()=>{const{importXlsx:h}=await import("./xlsx-B5CGZNLg.js");return{importXlsx:h}},__vite__mapDeps([0,1,2,3]));return await u(c,o),{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Unknown error occurred"}}},[o]),i=R.useCallback(async()=>{try{const{exportXlsx:c}=await Za(async()=>{const{exportXlsx:u}=await import("./xlsx-B5CGZNLg.js");return{exportXlsx:u}},__vite__mapDeps([0,1,2,3]));return await c(n),{success:!0}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}},[n]);return{handleImport:r,handleExport:i}}function Dx({onImport:o,onExport:n}){const r=async u=>{const h=u.target.files?.[0];h&&((await o(h)).success||(u.target.value=""))},i=async()=>{await n()},c=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),u.currentTarget.click())};return f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),f.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[f.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:c,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[f.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:r,"data-testid":"file-input"}),f.jsx(ip,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),f.jsxs(ae,{onClick:i,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[f.jsx(lp,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const js=o=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(o)} Cr`,Bx=()=>new Date().toISOString().slice(0,10);function Lx({partyBalance:o,shipBalance:n,cargoLegsCount:r,characterCount:i}){return f.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${js(o)}`,children:js(o)})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${js(n)}`,children:js(n)})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${r}`,children:r})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),f.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${i}`,children:i})]})]})}function Ng({tabs:o,active:n,onChange:r}){const i=c=>{const u=o.findIndex(y=>y.id===n);let h=u;switch(c.key){case"ArrowLeft":c.preventDefault(),h=u>0?u-1:o.length-1;break;case"ArrowRight":c.preventDefault(),h=u<o.length-1?u+1:0;break;case"Home":c.preventDefault(),h=0;break;case"End":c.preventDefault(),h=o.length-1;break;default:return}const g=o[h].id;r(g)};return f.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:o.map(c=>f.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${n===c.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>r(c.id),onKeyDown:i,role:"tab","aria-selected":n===c.id,"aria-controls":`tabpanel-${c.id}`,id:`tab-${c.id}`,type:"button",tabIndex:n===c.id?0:-1,"data-testid":`tab-${c.id}`,children:c.label},c.id))})}function Cn({title:o,children:n}){return f.jsxs("div",{className:"card space-y-3",children:[f.jsx("div",{className:"font-semibold",children:o}),n]})}function Rs({columns:o,rows:n}){const r=i=>R.isValidElement(i)?i:String(i??"");return f.jsx("div",{className:"overflow-auto border rounded-2xl",children:f.jsxs("table",{className:"table",children:[f.jsx("thead",{children:f.jsx("tr",{children:o.map(i=>f.jsx("th",{children:i},i))})}),f.jsx("tbody",{children:n.length===0?f.jsx("tr",{children:f.jsx("td",{className:"text-zinc-500 p-3",colSpan:o.length,children:"No rows yet."})}):n.map((i,c)=>f.jsx("tr",{children:o.map(u=>f.jsx("td",{children:r(i[u])},u))},c))})]})})}function ks(o){const[n,r]=R.useState(o),i=R.useCallback((y,p)=>{r(x=>({...x,[y]:p}))},[]),c=R.useCallback(y=>p=>{i(y,p.target.value)},[i]),u=R.useCallback(y=>{r(p=>{const x={...o};return y&&y.forEach(b=>{x[b]=p[b]}),x})},[o]),h=R.useCallback(y=>{r(p=>({...p,...y}))},[]),g=R.useCallback(()=>({...n}),[n]);return{form:n,updateField:i,createInputHandler:c,resetForm:u,updateFields:h,getFormData:g,setForm:r}}const qx={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function Hx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:c}=ks(qx),u=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const h=Number(r.Tons),g=Number(r.BuyPP),y=r.SellPP===""?null:Number(r.SellPP),p=r.Fees===""?0:Number(r.Fees),x=y===null?null:(y-g)*h-p;n({"Leg/Route":r.Route,Item:r.Item,Tons:h,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":g,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":y,"Broker (DM)":r.DM,"Fees/Taxes (Cr)":p,"Profit (Cr)":x}),c()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Cn,{title:"Record Cargo Leg",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(P,{placeholder:"Route (Vland  Regina)",value:r.Route,onChange:i("Route")}),f.jsx(P,{placeholder:"Item",value:r.Item,onChange:i("Item")}),f.jsx(P,{type:"number",placeholder:"Tons",value:r.Tons,onChange:i("Tons")}),f.jsx(P,{placeholder:"Purchase World",value:r.BuyWorld,onChange:i("BuyWorld")}),f.jsx(P,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:r.BuyPP,onChange:i("BuyPP")}),f.jsx(P,{placeholder:"Sale World (optional)",value:r.SellWorld,onChange:i("SellWorld")}),f.jsx(P,{type:"number",placeholder:"Sale Price (Cr/ton)",value:r.SellPP,onChange:i("SellPP")}),f.jsx(P,{placeholder:"Broker DM",value:r.DM,onChange:i("DM")}),f.jsx(P,{type:"number",placeholder:"Fees/Taxes (Cr)",value:r.Fees,onChange:i("Fees")})]}),f.jsx(ae,{className:"mt-2",onClick:u,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),f.jsx(Rs,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:o})]})}function Gx({title:o,totalIncome:n,totalExpenses:r,netChange:i,currentBalance:c}){return f.jsx(Cn,{title:`${o} Summary`,children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),f.jsx("div",{children:nl(n)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),f.jsx("div",{children:nl(r)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),f.jsx("div",{className:i>=0?"text-green-600":"text-red-600",children:nl(i)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),f.jsx("div",{className:c>=0?"text-green-600":"text-red-600",children:nl(c)})]})]})})}function $x({title:o,fundName:n,onSubmit:r}){const i={Date:Bx(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:c,createInputHandler:u,resetForm:h}=ks(i),[g,y]=R.useState([]),p=()=>{y([]);const x={Date:c.Date,Description:c.Description,Category:c.Category,Subcategory:c.Subcategory,"Amount (Cr)":Number(c.Amount),"Paid By":n,"Paid From (Fund)":n,Notes:c.Notes},b=kx(x);if(!b.isValid){y(b.errors);return}r(x),h(["Date","Category"])};return f.jsxs(Cn,{title:`Add ${o} Transaction`,children:[g.length>0&&f.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:f.jsx("ul",{className:"list-disc list-inside",children:g.map((x,b)=>f.jsx("li",{children:x},b))})}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(P,{type:"date",value:c.Date,onChange:u("Date")}),f.jsx(P,{placeholder:"Description",value:c.Description,onChange:u("Description")}),f.jsxs(P,{type:"select",value:c.Category,onChange:u("Category"),children:[f.jsx("option",{value:"Income",children:"Income"}),f.jsx("option",{value:"Expense",children:"Expense"}),f.jsx("option",{value:"Transfer",children:"Transfer"})]}),f.jsx(P,{placeholder:"Subcategory",value:c.Subcategory,onChange:u("Subcategory")}),f.jsx(P,{type:"number",placeholder:"Amount (Cr)",value:c.Amount,onChange:u("Amount")}),f.jsx(P,{placeholder:"Notes",value:c.Notes,onChange:u("Notes")})]}),f.jsx(ae,{className:"mt-2",onClick:p,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function su({title:o,rows:n,onUpdate:r,fundName:i,initialBalance:c=0,showSummary:u=!0}){const h=rl(n,c),g=Ux(n),y=x=>{const b=Rx(n,x,c);r(b)},p=n.map(x=>({...x,"Amount (Cr)":x.Category==="Expense"?-Math.abs(x["Amount (Cr)"]):Math.abs(x["Amount (Cr)"])}));return f.jsxs("div",{className:"space-y-4",children:[u&&f.jsx(Gx,{title:o,totalIncome:g.totalIncome,totalExpenses:g.totalExpenses,netChange:g.netChange,currentBalance:h}),f.jsx($x,{title:o,fundName:i,onSubmit:y}),f.jsx(Rs,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:p})]})}function Vx({pc:o,rows:n,onAdd:r}){const i=o.includes("  ")?o.split("  ")[1]:o;return f.jsx("div",{className:"space-y-4",children:f.jsx(su,{title:i,rows:n,onUpdate:r,fundName:`${i} Fund`,initialBalance:0,showSummary:!0})})}const Yx={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function Qx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:c}=ks(Yx),u=()=>{if(!r.Item||r.Qty==="")return;const h=Number(r.Qty||0),g=Number(r["Unit Mass (kg)"]||0),y=Number(r["Unit Value (Cr)"]||0);n({Item:r.Item,Qty:h,"Unit Mass (kg)":g,"Total Mass (kg)":h*g,"Unit Value (Cr)":y,"Total Value (Cr)":h*y,"Location/Container":r["Location/Container"],Notes:r.Notes}),c()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Cn,{title:"Add Inventory Item",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(P,{placeholder:"Item",value:r.Item,onChange:i("Item")}),f.jsx(P,{type:"number",placeholder:"Qty",value:r.Qty,onChange:i("Qty")}),f.jsx(P,{type:"number",placeholder:"Unit Mass (kg)",value:r["Unit Mass (kg)"],onChange:i("Unit Mass (kg)")}),f.jsx(P,{type:"number",placeholder:"Unit Value (Cr)",value:r["Unit Value (Cr)"],onChange:i("Unit Value (Cr)")}),f.jsx(P,{placeholder:"Location/Container",value:r["Location/Container"],onChange:i("Location/Container")}),f.jsx(P,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),f.jsx(ae,{className:"mt-2",onClick:u,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),f.jsx(Rs,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:o})]})}function Kx({content:o,children:n,position:r="bottom",className:i=""}){const[c,u]=R.useState(!1),h={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},g={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return f.jsxs("div",{className:`relative inline-block ${i}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onFocus:()=>u(!0),onBlur:()=>u(!1),children:[n,c&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:`absolute z-[9999] ${h[r]} transition-opacity duration-200`,children:[f.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:o}),f.jsx("div",{className:`absolute ${g[r]}`})]})})]})}const Xx={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Notes:""};function Jx({row:o,index:n,onFireRound:r,onReload:i}){return f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ae,{variant:"danger",size:"sm",onClick:()=>r?.(n),disabled:Number(o["Total Rounds"]||0)<=0,title:`Fire one round from ${o.Weapon}`,"aria-label":`Fire one round from ${o.Weapon}`,children:"Fire"}),f.jsx(ae,{variant:"primary",size:"sm",onClick:()=>i?.(n),disabled:Number(o["Spare Magazines"]||0)<=0&&Number(o["Loose Rounds"]||0)<=0,title:`Reload ${o.Weapon}`,"aria-label":`Reload ${o.Weapon}`,children:"Reload"})]})}function Zx({rows:o,weapons:n=[],onAdd:r,onFireRound:i,onReload:c}){const{form:u,createInputHandler:h,resetForm:g,updateField:y}=ks(Xx),p=()=>{if(!u.Weapon)return;const _=Number(u["Magazine Size"]||0),w=Number(u["Rounds Loaded"]||0),j=Number(u["Spare Magazines"]||0),N=Number(u["Loose Rounds"]||0),U=_*j+w+N;r({Weapon:u.Weapon,"Ammo Type":u["Ammo Type"],"Magazine Size":_,"Rounds Loaded":w,"Spare Magazines":j,"Loose Rounds":N,"Total Rounds":U,Notes:u.Notes}),g()},x=_=>{y("Weapon",_)},b=o.map((_,w)=>({..._,Actions:f.jsx(Jx,{row:_,index:w,onFireRound:i,onReload:c})}));return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Cn,{title:"Add Ammunition Entry",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsxs(P,{type:"select",value:u.Weapon==="__custom"?"":u.Weapon,onChange:h("Weapon"),children:[f.jsx("option",{value:"",children:"Select Weapon"}),n.map(_=>f.jsxs("option",{value:_.Weapon,children:[_.Weapon," (",_.Type,")"]},_.Weapon)),f.jsx("option",{value:"__custom",children:"--- Custom Weapon ---"})]}),u.Weapon==="__custom"&&f.jsx(P,{placeholder:"Custom Weapon Name",value:"",onChange:_=>x(_.target.value)}),f.jsx(P,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:u["Ammo Type"],onChange:h("Ammo Type")}),f.jsx(P,{type:"number",placeholder:"Magazine Size",value:u["Magazine Size"],onChange:h("Magazine Size")}),f.jsx(P,{type:"number",placeholder:"Rounds Loaded",value:u["Rounds Loaded"],onChange:h("Rounds Loaded")}),f.jsx(P,{type:"number",placeholder:"Spare Magazines",value:u["Spare Magazines"],onChange:h("Spare Magazines")}),f.jsx(P,{type:"number",placeholder:"Loose Rounds",value:u["Loose Rounds"],onChange:h("Loose Rounds")}),f.jsx(P,{placeholder:"Notes",value:u.Notes,onChange:h("Notes")})]}),f.jsx(ae,{className:"mt-2",onClick:p,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),f.jsx(Kx,{content:f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),f.jsxs("ul",{className:"space-y-1 text-sm",children:[f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds  Spare magazines  Loose rounds"]}),f.jsxs("li",{children:[" ",f.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:f.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:f.jsx(cp,{className:"w-5 h-5"})})})]}),f.jsx(Rs,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:b})]})}const Px={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function Ix({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:c}=ks(Px),u=()=>{r.Weapon&&(n({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),c())};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Cn,{title:"Add Weapon Entry",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(P,{placeholder:"Weapon Name",value:r.Weapon,onChange:i("Weapon")}),f.jsxs(P,{type:"select",value:r.Type,onChange:i("Type"),children:[f.jsx("option",{value:"",children:"Select Type"}),f.jsx("option",{value:"Melee",children:"Melee"}),f.jsx("option",{value:"Pistol",children:"Pistol"}),f.jsx("option",{value:"Rifle",children:"Rifle"}),f.jsx("option",{value:"Shotgun",children:"Shotgun"}),f.jsx("option",{value:"Heavy Weapon",children:"Heavy Weapon"}),f.jsx("option",{value:"Explosive",children:"Explosive"}),f.jsx("option",{value:"Other",children:"Other"})]}),f.jsx(P,{placeholder:"Damage (e.g., 3d6)",value:r.Damage,onChange:i("Damage")}),f.jsx(P,{placeholder:"Range (e.g., 150m)",value:r.Range,onChange:i("Range")}),f.jsx(P,{type:"number",placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),f.jsx(P,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),f.jsx(P,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),f.jsx(ae,{className:"mt-2",onClick:u,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),f.jsx(Rs,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:o})]})}const Wx={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function Fx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:c}=ks(Wx),u=()=>{r.Armour&&(n({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),c())};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Cn,{title:"Add Armour Entry",children:[f.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[f.jsx(P,{placeholder:"Armour Name",value:r.Armour,onChange:i("Armour")}),f.jsxs(P,{type:"select",value:r.Type,onChange:i("Type"),children:[f.jsx("option",{value:"",children:"Select Type"}),f.jsx("option",{value:"Cloth",children:"Cloth"}),f.jsx("option",{value:"Mesh",children:"Mesh"}),f.jsx("option",{value:"Flak Jacket",children:"Flak Jacket"}),f.jsx("option",{value:"Combat Armour",children:"Combat Armour"}),f.jsx("option",{value:"Battle Dress",children:"Battle Dress"}),f.jsx("option",{value:"Powered Armour",children:"Powered Armour"}),f.jsx("option",{value:"Vacc Suit",children:"Vacc Suit"}),f.jsx("option",{value:"Environmental Suit",children:"Environmental Suit"}),f.jsx("option",{value:"Other",children:"Other"})]}),f.jsx(P,{placeholder:"Protection (e.g., +5, 1d6+2)",value:r.Protection,onChange:i("Protection")}),f.jsx(P,{placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),f.jsx(P,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),f.jsx(P,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),f.jsx(ae,{className:"mt-2",onClick:u,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),f.jsx(Rs,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:o})]})}function e_({campaignId:o,selectedPc:n,onPcChange:r,characterBalance:i,characterFinance:c,characterInventory:u,characterAmmo:h,characterWeapons:g,characterArmour:y,onUpdateFinance:p,onAddInventory:x,onAddAmmo:b,onAddWeapon:_,onAddArmour:w,onFireRound:j,onReloadWeapon:N}){const[U,$]=R.useState("ledger"),{characters:L,loading:q,error:V}=Ts(o),Y=L.find(G=>G.displayName===n);return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("select",{className:"select",value:n,onChange:G=>r(G.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:q,children:q?f.jsx("option",{children:"Loading characters..."}):L.map(G=>f.jsx("option",{value:G.displayName,children:G.displayName},G.id))}),V&&f.jsx("span",{className:"text-xs text-yellow-600",title:V,children:" Offline mode"}),f.jsx("div",{className:"text-sm",children:f.jsxs("span",{"aria-label":`Current character balance: ${js(i)}`,children:["Current Balance:"," ",f.jsx("span",{className:"font-semibold",children:js(i)})]})})]}),Y&&Y.id.startsWith("character-")&&f.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",Y.playerName," | Character:"," ",Y.characterName]}),f.jsx(Ng,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:U,onChange:G=>$(G)}),U==="ledger"&&f.jsx(Vx,{pc:n,rows:c,onAdd:G=>p(n,G)}),U==="inventory"&&f.jsx(Qx,{rows:u,onAdd:G=>x(n,G)}),U==="weapons"&&f.jsx(Ix,{rows:g,onAdd:G=>_(n,G)}),U==="armour"&&f.jsx(Fx,{rows:y,onAdd:G=>w(n,G)}),U==="ammo"&&f.jsx(Zx,{rows:h,weapons:g,onAdd:G=>b(n,G),onFireRound:G=>j?.(n,G),onReload:G=>N?.(n,G)})]})}function t_({campaignId:o,activeTab:n,state:r,selectedCharacterDisplayName:i,characterBalance:c,onCharacterChange:u,onUpdatePartyFinances:h,onUpdateShipAccounts:g,onAddCargoLeg:y,onUpdateCharacterFinance:p,onAddCharacterInventory:x,onAddCharacterAmmo:b,onAddCharacterWeapon:_,onAddCharacterArmour:w,onFireRound:j,onReloadWeapon:N}){return f.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${n}`,id:`tabpanel-${n}`,children:[n==="party"&&f.jsx(su,{title:"Party",rows:r.Party_Finances,onUpdate:h,fundName:"Party Fund",initialBalance:0,showSummary:!0}),n==="ship"&&f.jsx(su,{title:"Ship",rows:r.Ship_Accounts,onUpdate:g,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),n==="cargo"&&f.jsx(Hx,{rows:r.Ship_Cargo,onAdd:y}),n==="characters"&&f.jsx(e_,{campaignId:o,selectedPc:i,onPcChange:u,characterBalance:c,characterFinance:r.PCs[i]?.Finance||[],characterInventory:r.PCs[i]?.Inventory||[],characterAmmo:r.PCs[i]?.Ammo||[],characterWeapons:r.PCs[i]?.Weapons||[],characterArmour:r.PCs[i]?.Armour||[],onUpdateFinance:p,onAddInventory:x,onAddAmmo:b,onAddWeapon:_,onAddArmour:w,onFireRound:j,onReloadWeapon:N})]})}function a_({campaignId:o,onBackToCampaigns:n}){const[r,i]=R.useState("party"),{characters:c}=Ts(o),[u,h]=R.useState(""),g=u||c[0]?.displayName||"",{state:y,setState:p,updatePartyFinances:x,updateShipAccounts:b,addCargoLeg:_,updateCharacterFinance:w,addCharacterInventory:j,addCharacterAmmo:N,addCharacterWeapon:U,addCharacterArmour:$,fireRound:L,reloadWeapon:q}=Tx(),V=zx(y,g),{handleImport:Y,handleExport:G}=Mx(p,y);return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[f.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:f.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:" Back to Campaigns"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",o]})]})]})})}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx(Dx,{onImport:Y,onExport:G}),f.jsx(Lx,{partyBalance:V.party,shipBalance:V.ship,cargoLegsCount:y.Ship_Cargo.length,characterCount:c.length}),f.jsx(Ng,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:F=>i(F)}),f.jsx(t_,{campaignId:o,activeTab:r,state:y,selectedCharacterDisplayName:g,characterBalance:V.character,onCharacterChange:h,onUpdatePartyFinances:x,onUpdateShipAccounts:b,onAddCargoLeg:_,onUpdateCharacterFinance:w,onAddCharacterInventory:j,onAddCharacterAmmo:N,onAddCharacterWeapon:U,onAddCharacterArmour:$,onFireRound:L,onReloadWeapon:q})]})]})}function n_(){const{user:o,loading:n,completeProfile:r}=jn(),[i,c]=R.useState(null);return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),f.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?o.profileCompleted?i?f.jsx(a_,{campaignId:i,onBackToCampaigns:()=>c(null)}):f.jsx(Ex,{onCampaignSelect:c}):f.jsx(nx,{onComplete:r}):f.jsx(Wb,{})}class s_ extends Fm.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error boundary caught an error:",n,r)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:f.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[f.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),f.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),f.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),f.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const Tg=document.getElementById("root");if(!Tg)throw new Error("Failed to find the root element");bp.createRoot(Tg).render(f.jsx(Fm.StrictMode,{children:f.jsx(s_,{children:f.jsx(n_,{})})}));export{Pm as D,Za as _};
