const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-Cw2h6NaQ.js","assets/icons-X6aC-CQb.js","assets/excel-CRXrONvn.js","assets/vendor-X-tRH5j4.js"])))=>i.map(i=>d[i]);
import{r as C,U as Ln,X as Rl,P as cp,a as Bn,T as xl,A as fb,C as $u,S as mb,b as mg,R as pg,c as Tl,d as pb,D as gb,W as gg,e as yb,f as Hu,g as yg,h as vg,i as Za,j as vb,L as bb,Z as xb,k as wb,I as _b,l as Sb,m as Cb,n as bg,o as xg,p as jb,q as Nb,M as Ab,G as Eb,B as Rb,s as Tb,t as kb,u as Ob,v as Db,w as Mb,x as Ub,y as up,z as dp,E as zb,F as eu,H as tu,J as Lb,K as Bb,N as qb,O as wg}from"./icons-X6aC-CQb.js";import{g as _g,a as Pb}from"./excel-CRXrONvn.js";import{r as $b,a as Hb}from"./vendor-X-tRH5j4.js";function Vb(i,a){for(var r=0;r<a.length;r++){const n=a[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in i)){const c=Object.getOwnPropertyDescriptor(n,o);c&&Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var au={exports:{}},jn={};var hp;function Fb(){if(hp)return jn;hp=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(n,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:n,key:h,ref:o!==void 0?o:null,props:c}}return jn.Fragment=a,jn.jsx=r,jn.jsxs=r,jn}var fp;function Gb(){return fp||(fp=1,au.exports=Fb()),au.exports}var u=Gb(),ru={exports:{}},Nn={},su={exports:{}},nu={};var mp;function Ib(){return mp||(mp=1,(function(i){function a(L,Q){var re=L.length;L.push(Q);e:for(;0<re;){var te=re-1>>>1,J=L[te];if(0<o(J,Q))L[te]=Q,L[re]=J,re=te;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var Q=L[0],re=L.pop();if(re!==Q){L[0]=re;e:for(var te=0,J=L.length,Ne=J>>>1;te<Ne;){var Ae=2*(te+1)-1,K=L[Ae],me=Ae+1,et=L[me];if(0>o(K,re))me<J&&0>o(et,K)?(L[te]=et,L[me]=re,te=me):(L[te]=K,L[Ae]=re,te=Ae);else if(me<J&&0>o(et,re))L[te]=et,L[me]=re,te=me;else break e}}return Q}function o(L,Q){var re=L.sortIndex-Q.sortIndex;return re!==0?re:L.id-Q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var p=[],g=[],v=1,b=null,x=3,w=!1,S=!1,N=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var Q=r(g);Q!==null;){if(Q.callback===null)n(g);else if(Q.startTime<=L)n(g),Q.sortIndex=Q.expirationTime,a(p,Q);else break;Q=r(g)}}function V(L){if(N=!1,B(L),!S)if(r(p)!==null)S=!0,G||(G=!0,ce());else{var Q=r(g);Q!==null&&pe(V,Q.startTime-L)}}var G=!1,I=-1,Y=5,P=-1;function X(){return j?!0:!(i.unstable_now()-P<Y)}function de(){if(j=!1,G){var L=i.unstable_now();P=L;var Q=!0;try{e:{S=!1,N&&(N=!1,R(I),I=-1),w=!0;var re=x;try{t:{for(B(L),b=r(p);b!==null&&!(b.expirationTime>L&&X());){var te=b.callback;if(typeof te=="function"){b.callback=null,x=b.priorityLevel;var J=te(b.expirationTime<=L);if(L=i.unstable_now(),typeof J=="function"){b.callback=J,B(L),Q=!0;break t}b===r(p)&&n(p),B(L)}else n(p);b=r(p)}if(b!==null)Q=!0;else{var Ne=r(g);Ne!==null&&pe(V,Ne.startTime-L),Q=!1}}break e}finally{b=null,x=re,w=!1}Q=void 0}}finally{Q?ce():G=!1}}}var ce;if(typeof k=="function")ce=function(){k(de)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,F=ie.port2;ie.port1.onmessage=de,ce=function(){F.postMessage(null)}}else ce=function(){A(de,0)};function pe(L,Q){I=A(function(){L(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(L){L.callback=null},i.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<L?Math.floor(1e3/L):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(L){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var re=x;x=Q;try{return L()}finally{x=re}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var re=x;x=L;try{return Q()}finally{x=re}},i.unstable_scheduleCallback=function(L,Q,re){var te=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?te+re:te):re=te,L){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=re+J,L={id:v++,callback:Q,priorityLevel:L,startTime:re,expirationTime:J,sortIndex:-1},re>te?(L.sortIndex=re,a(g,L),r(p)===null&&L===r(g)&&(N?(R(I),I=-1):N=!0,pe(V,re-te))):(L.sortIndex=J,a(p,L),S||w||(S=!0,G||(G=!0,ce()))),L},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(L){var Q=x;return function(){var re=x;x=Q;try{return L.apply(this,arguments)}finally{x=re}}}})(nu)),nu}var pp;function Yb(){return pp||(pp=1,su.exports=Ib()),su.exports}var gp;function Qb(){if(gp)return Nn;gp=1;var i=Yb(),a=$b(),r=Hb();function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(n(188))}function g(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,l=t;;){var d=s.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){s=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===s)return p(d),e;if(f===l)return p(d),t;f=f.sibling}throw Error(n(188))}if(s.return!==l.return)s=d,l=f;else{for(var y=!1,_=d.child;_;){if(_===s){y=!0,s=d,l=f;break}if(_===l){y=!0,l=d,s=f;break}_=_.sibling}if(!y){for(_=f.child;_;){if(_===s){y=!0,s=f,l=d;break}if(_===l){y=!0,l=f,s=d;break}_=_.sibling}if(!y)throw Error(n(189))}}if(s.alternate!==l)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),k=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Symbol.for("react.client.reference");function F(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case A:return"Profiler";case j:return"StrictMode";case V:return"Suspense";case G:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case k:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return t=e.displayName||null,t!==null?t:F(e.type)||"Memo";case Y:t=e._payload,e=e._init;try{return F(e(t))}catch{}}return null}var pe=Array.isArray,L=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},te=[],J=-1;function Ne(e){return{current:e}}function Ae(e){0>J||(e.current=te[J],te[J]=null,J--)}function K(e,t){J++,te[J]=e.current,e.current=t}var me=Ne(null),et=Ne(null),ze=Ne(null),we=Ne(null);function ra(e,t){switch(K(ze,t),K(et,e),K(me,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Om(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Om(t),e=Dm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ae(me),K(me,e)}function sa(){Ae(me),Ae(et),Ae(ze)}function Nr(e){e.memoizedState!==null&&K(we,e);var t=me.current,s=Dm(t,e.type);t!==s&&(K(et,e),K(me,s))}function Ar(e){et.current===e&&(Ae(me),Ae(et)),we.current===e&&(Ae(we),wn._currentValue=re)}var ks,ve;function Ie(e){if(ks===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ks=t&&t[1]||"",ve=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+e+ve}var Vn=!1;function Er(e,t){if(!e||Vn)return"";Vn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(z){var U=z}Reflect.construct(e,[],H)}else{try{H.call()}catch(z){U=z}e.call(H.prototype)}}else{try{throw Error()}catch(z){U=z}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(z){if(z&&U&&typeof z.stack=="string")return[z.stack,U.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),y=f[0],_=f[1];if(y&&_){var E=y.split(`
`),M=_.split(`
`);for(d=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;if(l===E.length||d===M.length)for(l=E.length-1,d=M.length-1;1<=l&&0<=d&&E[l]!==M[d];)d--;for(;1<=l&&0<=d;l--,d--)if(E[l]!==M[d]){if(l!==1||d!==1)do if(l--,d--,0>d||E[l]!==M[d]){var q=`
`+E[l].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=l&&0<=d);break}}}finally{Vn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ie(s):""}function Fy(e,t){switch(e.tag){case 26:case 27:case 5:return Ie(e.type);case 16:return Ie("Lazy");case 13:return e.child!==t&&t!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return Er(e.type,!1);case 11:return Er(e.type.render,!1);case 1:return Er(e.type,!0);case 31:return Ie("Activity");default:return""}}function od(e){try{var t="",s=null;do t+=Fy(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Bl=Object.prototype.hasOwnProperty,ql=i.unstable_scheduleCallback,Pl=i.unstable_cancelCallback,Gy=i.unstable_shouldYield,Iy=i.unstable_requestPaint,bt=i.unstable_now,Yy=i.unstable_getCurrentPriorityLevel,cd=i.unstable_ImmediatePriority,ud=i.unstable_UserBlockingPriority,Fn=i.unstable_NormalPriority,Qy=i.unstable_LowPriority,dd=i.unstable_IdlePriority,Ky=i.log,Xy=i.unstable_setDisableYieldValue,Os=null,xt=null;function Na(e){if(typeof Ky=="function"&&Xy(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Os,e)}catch{}}var wt=Math.clz32?Math.clz32:Zy,Wy=Math.log,Jy=Math.LN2;function Zy(e){return e>>>=0,e===0?32:31-(Wy(e)/Jy|0)|0}var Gn=256,In=262144,Yn=4194304;function ar(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qn(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~f,l!==0?d=ar(l):(y&=_,y!==0?d=ar(y):s||(s=_&~e,s!==0&&(d=ar(s))))):(_=l&~f,_!==0?d=ar(_):y!==0?d=ar(y):s||(s=l&~e,s!==0&&(d=ar(s)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,s=t&-t,f>=s||f===32&&(s&4194048)!==0)?t:d}function Ds(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function e0(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hd(){var e=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),e}function $l(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ms(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function t0(e,t,s,l,d,f){var y=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var _=e.entanglements,E=e.expirationTimes,M=e.hiddenUpdates;for(s=y&~s;0<s;){var q=31-wt(s),H=1<<q;_[q]=0,E[q]=-1;var U=M[q];if(U!==null)for(M[q]=null,q=0;q<U.length;q++){var z=U[q];z!==null&&(z.lane&=-536870913)}s&=~H}l!==0&&fd(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function fd(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-wt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function md(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-wt(s),d=1<<l;d&t|e[l]&t&&(e[l]|=t),s&=~d}}function pd(e,t){var s=t&-t;return s=(s&42)!==0?1:Hl(s),(s&(e.suspendedLanes|t))!==0?0:s}function Hl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gd(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:ap(e.type))}function yd(e,t){var s=Q.p;try{return Q.p=e,t()}finally{Q.p=s}}var Aa=Math.random().toString(36).slice(2),st="__reactFiber$"+Aa,ht="__reactProps$"+Aa,Rr="__reactContainer$"+Aa,Fl="__reactEvents$"+Aa,a0="__reactListeners$"+Aa,r0="__reactHandles$"+Aa,vd="__reactResources$"+Aa,Us="__reactMarker$"+Aa;function Gl(e){delete e[st],delete e[ht],delete e[Fl],delete e[a0],delete e[r0]}function Tr(e){var t=e[st];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Rr]||s[st]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Pm(e);e!==null;){if(s=e[st])return s;e=Pm(e)}return t}e=s,s=e.parentNode}return null}function kr(e){if(e=e[st]||e[Rr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function zs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(n(33))}function Or(e){var t=e[vd];return t||(t=e[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tt(e){e[Us]=!0}var bd=new Set,xd={};function rr(e,t){Dr(e,t),Dr(e+"Capture",t)}function Dr(e,t){for(xd[e]=t,e=0;e<t.length;e++)bd.add(t[e])}var s0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wd={},_d={};function n0(e){return Bl.call(_d,e)?!0:Bl.call(wd,e)?!1:s0.test(e)?_d[e]=!0:(wd[e]=!0,!1)}function Kn(e,t,s){if(n0(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Xn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function na(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function kt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i0(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){s=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Il(e){if(!e._valueTracker){var t=Sd(e)?"checked":"value";e._valueTracker=i0(e,t,""+e[t])}}function Cd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Sd(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Wn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var l0=/[\n"\\]/g;function Ot(e){return e.replace(l0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Yl(e,t,s,l,d,f,y,_){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kt(t)):e.value!==""+kt(t)&&(e.value=""+kt(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?Ql(e,y,kt(t)):s!=null?Ql(e,y,kt(s)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+kt(_):e.removeAttribute("name")}function jd(e,t,s,l,d,f,y,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Il(e);return}s=s!=null?""+kt(s):"",t=t!=null?""+kt(t):s,_||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Il(e)}function Ql(e,t,s){t==="number"&&Wn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Mr(e,t,s,l){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&l&&(e[s].defaultSelected=!0)}else{for(s=""+kt(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Nd(e,t,s){if(t!=null&&(t=""+kt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+kt(s):""}function Ad(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(n(92));if(pe(l)){if(1<l.length)throw Error(n(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=kt(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),Il(e)}function Ur(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var o0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ed(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||o0.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Rd(e,t,s){if(t!=null&&typeof t!="object")throw Error(n(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&s[d]!==l&&Ed(e,d,l)}else for(var f in t)t.hasOwnProperty(f)&&Ed(e,f,t[f])}function Kl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jn(e){return u0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ia(){}var Xl=null;function Wl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zr=null,Lr=null;function Td(e){var t=kr(e);if(t&&(e=t.stateNode)){var s=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(Yl(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ot(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var d=l[ht]||null;if(!d)throw Error(n(90));Yl(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&Cd(l)}break e;case"textarea":Nd(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Mr(e,!!s.multiple,t,!1)}}}var Jl=!1;function kd(e,t,s){if(Jl)return e(t,s);Jl=!0;try{var l=e(t);return l}finally{if(Jl=!1,(zr!==null||Lr!==null)&&(qi(),zr&&(t=zr,e=Lr,Lr=zr=null,Td(t),e)))for(t=0;t<e.length;t++)Td(e[t])}}function Ls(e,t){var s=e.stateNode;if(s===null)return null;var l=s[ht]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=!1;if(la)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Zl=!1}var Ea=null,eo=null,Zn=null;function Od(){if(Zn)return Zn;var e,t=eo,s=t.length,l,d="value"in Ea?Ea.value:Ea.textContent,f=d.length;for(e=0;e<s&&t[e]===d[e];e++);var y=s-e;for(l=1;l<=y&&t[s-l]===d[f-l];l++);return Zn=d.slice(e,1<l?1-l:void 0)}function ei(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function Dd(){return!1}function ft(e){function t(s,l,d,f,y){this._reactName=s,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ti:Dd,this.isPropagationStopped=Dd,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),t}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=ft(sr),qs=b({},sr,{view:0,detail:0}),d0=ft(qs),to,ao,Ps,ri=b({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:so,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ps&&(Ps&&e.type==="mousemove"?(to=e.screenX-Ps.screenX,ao=e.screenY-Ps.screenY):ao=to=0,Ps=e),to)},movementY:function(e){return"movementY"in e?e.movementY:ao}}),Md=ft(ri),h0=b({},ri,{dataTransfer:0}),f0=ft(h0),m0=b({},qs,{relatedTarget:0}),ro=ft(m0),p0=b({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),g0=ft(p0),y0=b({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v0=ft(y0),b0=b({},sr,{data:0}),Ud=ft(b0),x0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_0[e])?!!t[e]:!1}function so(){return S0}var C0=b({},qs,{key:function(e){if(e.key){var t=x0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?w0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:so,charCode:function(e){return e.type==="keypress"?ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j0=ft(C0),N0=b({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zd=ft(N0),A0=b({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:so}),E0=ft(A0),R0=b({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),T0=ft(R0),k0=b({},ri,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O0=ft(k0),D0=b({},sr,{newState:0,oldState:0}),M0=ft(D0),U0=[9,13,27,32],no=la&&"CompositionEvent"in window,$s=null;la&&"documentMode"in document&&($s=document.documentMode);var z0=la&&"TextEvent"in window&&!$s,Ld=la&&(!no||$s&&8<$s&&11>=$s),Bd=" ",qd=!1;function Pd(e,t){switch(e){case"keyup":return U0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $d(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Br=!1;function L0(e,t){switch(e){case"compositionend":return $d(t);case"keypress":return t.which!==32?null:(qd=!0,Bd);case"textInput":return e=t.data,e===Bd&&qd?null:e;default:return null}}function B0(e,t){if(Br)return e==="compositionend"||!no&&Pd(e,t)?(e=Od(),Zn=eo=Ea=null,Br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ld&&t.locale!=="ko"?null:t.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q0[e.type]:t==="textarea"}function Vd(e,t,s,l){zr?Lr?Lr.push(l):Lr=[l]:zr=l,t=Ii(t,"onChange"),0<t.length&&(s=new ai("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Hs=null,Vs=null;function P0(e){Nm(e,0)}function si(e){var t=zs(e);if(Cd(t))return e}function Fd(e,t){if(e==="change")return t}var Gd=!1;if(la){var io;if(la){var lo="oninput"in document;if(!lo){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),lo=typeof Id.oninput=="function"}io=lo}else io=!1;Gd=io&&(!document.documentMode||9<document.documentMode)}function Yd(){Hs&&(Hs.detachEvent("onpropertychange",Qd),Vs=Hs=null)}function Qd(e){if(e.propertyName==="value"&&si(Vs)){var t=[];Vd(t,Vs,e,Wl(e)),kd(P0,t)}}function $0(e,t,s){e==="focusin"?(Yd(),Hs=t,Vs=s,Hs.attachEvent("onpropertychange",Qd)):e==="focusout"&&Yd()}function H0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return si(Vs)}function V0(e,t){if(e==="click")return si(t)}function F0(e,t){if(e==="input"||e==="change")return si(t)}function G0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:G0;function Fs(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var d=s[l];if(!Bl.call(t,d)||!_t(e[d],t[d]))return!1}return!0}function Kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xd(e,t){var s=Kd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Kd(s)}}function Wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wn(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Wn(e.document)}return t}function oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var I0=la&&"documentMode"in document&&11>=document.documentMode,qr=null,co=null,Gs=null,uo=!1;function Zd(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;uo||qr==null||qr!==Wn(l)||(l=qr,"selectionStart"in l&&oo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Gs&&Fs(Gs,l)||(Gs=l,l=Ii(co,"onSelect"),0<l.length&&(t=new ai("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=qr)))}function nr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Pr={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionrun:nr("Transition","TransitionRun"),transitionstart:nr("Transition","TransitionStart"),transitioncancel:nr("Transition","TransitionCancel"),transitionend:nr("Transition","TransitionEnd")},ho={},eh={};la&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function ir(e){if(ho[e])return ho[e];if(!Pr[e])return e;var t=Pr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in eh)return ho[e]=t[s];return e}var th=ir("animationend"),ah=ir("animationiteration"),rh=ir("animationstart"),Y0=ir("transitionrun"),Q0=ir("transitionstart"),K0=ir("transitioncancel"),sh=ir("transitionend"),nh=new Map,fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fo.push("scrollEnd");function $t(e,t){nh.set(e,t),rr(t,[e])}var ni=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Dt=[],$r=0,mo=0;function ii(){for(var e=$r,t=mo=$r=0;t<e;){var s=Dt[t];Dt[t++]=null;var l=Dt[t];Dt[t++]=null;var d=Dt[t];Dt[t++]=null;var f=Dt[t];if(Dt[t++]=null,l!==null&&d!==null){var y=l.pending;y===null?d.next=d:(d.next=y.next,y.next=d),l.pending=d}f!==0&&ih(s,d,f)}}function li(e,t,s,l){Dt[$r++]=e,Dt[$r++]=t,Dt[$r++]=s,Dt[$r++]=l,mo|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function po(e,t,s,l){return li(e,t,s,l),oi(e)}function lr(e,t){return li(e,null,null,t),oi(e)}function ih(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var d=!1,f=e.return;f!==null;)f.childLanes|=s,l=f.alternate,l!==null&&(l.childLanes|=s),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-wt(s),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=s|536870912),f):null}function oi(e){if(50<mn)throw mn=0,Cc=null,Error(n(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hr={};function X0(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,s,l){return new X0(e,t,s,l)}function go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oa(e,t){var s=e.alternate;return s===null?(s=St(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function lh(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ci(e,t,s,l,d,f){var y=0;if(l=e,typeof e=="function")go(e)&&(y=1);else if(typeof e=="string")y=tb(e,s,me.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case P:return e=St(31,s,t,d),e.elementType=P,e.lanes=f,e;case N:return or(s.children,d,f,t);case j:y=8,d|=24;break;case A:return e=St(12,s,t,d|2),e.elementType=A,e.lanes=f,e;case V:return e=St(13,s,t,d),e.elementType=V,e.lanes=f,e;case G:return e=St(19,s,t,d),e.elementType=G,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:y=10;break e;case R:y=9;break e;case B:y=11;break e;case I:y=14;break e;case Y:y=16,l=null;break e}y=29,s=Error(n(130,e===null?"null":typeof e,"")),l=null}return t=St(y,s,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function or(e,t,s,l){return e=St(7,e,l,t),e.lanes=s,e}function yo(e,t,s){return e=St(6,e,null,t),e.lanes=s,e}function oh(e){var t=St(18,null,null,0);return t.stateNode=e,t}function vo(e,t,s){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ch=new WeakMap;function Mt(e,t){if(typeof e=="object"&&e!==null){var s=ch.get(e);return s!==void 0?s:(t={value:e,source:t,stack:od(t)},ch.set(e,t),t)}return{value:e,source:t,stack:od(t)}}var Vr=[],Fr=0,ui=null,Is=0,Ut=[],zt=0,Ra=null,Jt=1,Zt="";function ca(e,t){Vr[Fr++]=Is,Vr[Fr++]=ui,ui=e,Is=t}function uh(e,t,s){Ut[zt++]=Jt,Ut[zt++]=Zt,Ut[zt++]=Ra,Ra=e;var l=Jt;e=Zt;var d=32-wt(l)-1;l&=~(1<<d),s+=1;var f=32-wt(t)+d;if(30<f){var y=d-d%5;f=(l&(1<<y)-1).toString(32),l>>=y,d-=y,Jt=1<<32-wt(t)+d|s<<d|l,Zt=f+e}else Jt=1<<f|s<<d|l,Zt=e}function bo(e){e.return!==null&&(ca(e,1),uh(e,1,0))}function xo(e){for(;e===ui;)ui=Vr[--Fr],Vr[Fr]=null,Is=Vr[--Fr],Vr[Fr]=null;for(;e===Ra;)Ra=Ut[--zt],Ut[zt]=null,Zt=Ut[--zt],Ut[zt]=null,Jt=Ut[--zt],Ut[zt]=null}function dh(e,t){Ut[zt++]=Jt,Ut[zt++]=Zt,Ut[zt++]=Ra,Jt=t.id,Zt=t.overflow,Ra=e}var nt=null,Le=null,_e=!1,Ta=null,Lt=!1,wo=Error(n(519));function ka(e){var t=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ys(Mt(t,e)),wo}function hh(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[st]=e,t[ht]=l,s){case"dialog":ye("cancel",t),ye("close",t);break;case"iframe":case"object":case"embed":ye("load",t);break;case"video":case"audio":for(s=0;s<gn.length;s++)ye(gn[s],t);break;case"source":ye("error",t);break;case"img":case"image":case"link":ye("error",t),ye("load",t);break;case"details":ye("toggle",t);break;case"input":ye("invalid",t),jd(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ye("invalid",t);break;case"textarea":ye("invalid",t),Ad(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Tm(t.textContent,s)?(l.popover!=null&&(ye("beforetoggle",t),ye("toggle",t)),l.onScroll!=null&&ye("scroll",t),l.onScrollEnd!=null&&ye("scrollend",t),l.onClick!=null&&(t.onclick=ia),t=!0):t=!1,t||ka(e,!0)}function fh(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 31:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:nt=nt.return}}function Gr(e){if(e!==nt)return!1;if(!_e)return fh(e),_e=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||qc(e.type,e.memoizedProps)),s=!s),s&&Le&&ka(e),fh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));Le=qm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));Le=qm(e)}else t===27?(t=Le,Ga(e.type)?(e=Fc,Fc=null,Le=e):Le=t):Le=nt?qt(e.stateNode.nextSibling):null;return!0}function cr(){Le=nt=null,_e=!1}function _o(){var e=Ta;return e!==null&&(yt===null?yt=e:yt.push.apply(yt,e),Ta=null),e}function Ys(e){Ta===null?Ta=[e]:Ta.push(e)}var So=Ne(null),ur=null,ua=null;function Oa(e,t,s){K(So,t._currentValue),t._currentValue=s}function da(e){e._currentValue=So.current,Ae(So)}function Co(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function jo(e,t,s,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var y=d.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=d;for(var E=0;E<t.length;E++)if(_.context===t[E]){f.lanes|=s,_=f.alternate,_!==null&&(_.lanes|=s),Co(f.return,s,e),l||(y=null);break e}f=_.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(n(341));y.lanes|=s,f=y.alternate,f!==null&&(f.lanes|=s),Co(y,s,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function Ir(e,t,s,l){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(n(387));if(y=y.memoizedProps,y!==null){var _=d.type;_t(d.pendingProps.value,y.value)||(e!==null?e.push(_):e=[_])}}else if(d===we.current){if(y=d.alternate,y===null)throw Error(n(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(wn):e=[wn])}d=d.return}e!==null&&jo(t,e,s,l),t.flags|=262144}function di(e){for(e=e.firstContext;e!==null;){if(!_t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function dr(e){ur=e,ua=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return mh(ur,e)}function hi(e,t){return ur===null&&dr(e),mh(e,t)}function mh(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ua===null){if(e===null)throw Error(n(308));ua=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ua=ua.next=t;return s}var W0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},J0=i.unstable_scheduleCallback,Z0=i.unstable_NormalPriority,Ye={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function No(){return{controller:new W0,data:new Map,refCount:0}}function Qs(e){e.refCount--,e.refCount===0&&J0(Z0,function(){e.controller.abort()})}var Ks=null,Ao=0,Yr=0,Qr=null;function ev(e,t){if(Ks===null){var s=Ks=[];Ao=0,Yr=Tc(),Qr={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Ao++,t.then(ph,ph),t}function ph(){if(--Ao===0&&Ks!==null){Qr!==null&&(Qr.status="fulfilled");var e=Ks;Ks=null,Yr=0,Qr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function tv(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<s.length;d++)(0,s[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),l}var gh=L.S;L.S=function(e,t){em=bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ev(e,t),gh!==null&&gh(e,t)};var hr=Ne(null);function Eo(){var e=hr.current;return e!==null?e:Me.pooledCache}function fi(e,t){t===null?K(hr,hr.current):K(hr,t.pool)}function yh(){var e=Eo();return e===null?null:{parent:Ye._currentValue,pool:e}}var Kr=Error(n(460)),Ro=Error(n(474)),mi=Error(n(542)),pi={then:function(){}};function vh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function bh(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(ia,ia),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wh(e),e;default:if(typeof t.status=="string")t.then(ia,ia);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wh(e),e}throw mr=t,Kr}}function fr(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(mr=s,Kr):s}}var mr=null;function xh(){if(mr===null)throw Error(n(459));var e=mr;return mr=null,e}function wh(e){if(e===Kr||e===mi)throw Error(n(483))}var Xr=null,Xs=0;function gi(e){var t=Xs;return Xs+=1,Xr===null&&(Xr=[]),bh(Xr,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yi(e,t){throw t.$$typeof===x?Error(n(525)):(e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _h(e){function t(O,T){if(e){var D=O.deletions;D===null?(O.deletions=[T],O.flags|=16):D.push(T)}}function s(O,T){if(!e)return null;for(;T!==null;)t(O,T),T=T.sibling;return null}function l(O){for(var T=new Map;O!==null;)O.key!==null?T.set(O.key,O):T.set(O.index,O),O=O.sibling;return T}function d(O,T){return O=oa(O,T),O.index=0,O.sibling=null,O}function f(O,T,D){return O.index=D,e?(D=O.alternate,D!==null?(D=D.index,D<T?(O.flags|=67108866,T):D):(O.flags|=67108866,T)):(O.flags|=1048576,T)}function y(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function _(O,T,D,$){return T===null||T.tag!==6?(T=yo(D,O.mode,$),T.return=O,T):(T=d(T,D),T.return=O,T)}function E(O,T,D,$){var ne=D.type;return ne===N?q(O,T,D.props.children,$,D.key):T!==null&&(T.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Y&&fr(ne)===T.type)?(T=d(T,D.props),Ws(T,D),T.return=O,T):(T=ci(D.type,D.key,D.props,null,O.mode,$),Ws(T,D),T.return=O,T)}function M(O,T,D,$){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=vo(D,O.mode,$),T.return=O,T):(T=d(T,D.children||[]),T.return=O,T)}function q(O,T,D,$,ne){return T===null||T.tag!==7?(T=or(D,O.mode,$,ne),T.return=O,T):(T=d(T,D),T.return=O,T)}function H(O,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=yo(""+T,O.mode,D),T.return=O,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case w:return D=ci(T.type,T.key,T.props,null,O.mode,D),Ws(D,T),D.return=O,D;case S:return T=vo(T,O.mode,D),T.return=O,T;case Y:return T=fr(T),H(O,T,D)}if(pe(T)||ce(T))return T=or(T,O.mode,D,null),T.return=O,T;if(typeof T.then=="function")return H(O,gi(T),D);if(T.$$typeof===k)return H(O,hi(O,T),D);yi(O,T)}return null}function U(O,T,D,$){var ne=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ne!==null?null:_(O,T,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case w:return D.key===ne?E(O,T,D,$):null;case S:return D.key===ne?M(O,T,D,$):null;case Y:return D=fr(D),U(O,T,D,$)}if(pe(D)||ce(D))return ne!==null?null:q(O,T,D,$,null);if(typeof D.then=="function")return U(O,T,gi(D),$);if(D.$$typeof===k)return U(O,T,hi(O,D),$);yi(O,D)}return null}function z(O,T,D,$,ne){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return O=O.get(D)||null,_(T,O,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return O=O.get($.key===null?D:$.key)||null,E(T,O,$,ne);case S:return O=O.get($.key===null?D:$.key)||null,M(T,O,$,ne);case Y:return $=fr($),z(O,T,D,$,ne)}if(pe($)||ce($))return O=O.get(D)||null,q(T,O,$,ne,null);if(typeof $.then=="function")return z(O,T,D,gi($),ne);if($.$$typeof===k)return z(O,T,D,hi(T,$),ne);yi(T,$)}return null}function Z(O,T,D,$){for(var ne=null,Se=null,ee=T,fe=T=0,xe=null;ee!==null&&fe<D.length;fe++){ee.index>fe?(xe=ee,ee=null):xe=ee.sibling;var Ce=U(O,ee,D[fe],$);if(Ce===null){ee===null&&(ee=xe);break}e&&ee&&Ce.alternate===null&&t(O,ee),T=f(Ce,T,fe),Se===null?ne=Ce:Se.sibling=Ce,Se=Ce,ee=xe}if(fe===D.length)return s(O,ee),_e&&ca(O,fe),ne;if(ee===null){for(;fe<D.length;fe++)ee=H(O,D[fe],$),ee!==null&&(T=f(ee,T,fe),Se===null?ne=ee:Se.sibling=ee,Se=ee);return _e&&ca(O,fe),ne}for(ee=l(ee);fe<D.length;fe++)xe=z(ee,O,fe,D[fe],$),xe!==null&&(e&&xe.alternate!==null&&ee.delete(xe.key===null?fe:xe.key),T=f(xe,T,fe),Se===null?ne=xe:Se.sibling=xe,Se=xe);return e&&ee.forEach(function(Xa){return t(O,Xa)}),_e&&ca(O,fe),ne}function le(O,T,D,$){if(D==null)throw Error(n(151));for(var ne=null,Se=null,ee=T,fe=T=0,xe=null,Ce=D.next();ee!==null&&!Ce.done;fe++,Ce=D.next()){ee.index>fe?(xe=ee,ee=null):xe=ee.sibling;var Xa=U(O,ee,Ce.value,$);if(Xa===null){ee===null&&(ee=xe);break}e&&ee&&Xa.alternate===null&&t(O,ee),T=f(Xa,T,fe),Se===null?ne=Xa:Se.sibling=Xa,Se=Xa,ee=xe}if(Ce.done)return s(O,ee),_e&&ca(O,fe),ne;if(ee===null){for(;!Ce.done;fe++,Ce=D.next())Ce=H(O,Ce.value,$),Ce!==null&&(T=f(Ce,T,fe),Se===null?ne=Ce:Se.sibling=Ce,Se=Ce);return _e&&ca(O,fe),ne}for(ee=l(ee);!Ce.done;fe++,Ce=D.next())Ce=z(ee,O,fe,Ce.value,$),Ce!==null&&(e&&Ce.alternate!==null&&ee.delete(Ce.key===null?fe:Ce.key),T=f(Ce,T,fe),Se===null?ne=Ce:Se.sibling=Ce,Se=Ce);return e&&ee.forEach(function(hb){return t(O,hb)}),_e&&ca(O,fe),ne}function De(O,T,D,$){if(typeof D=="object"&&D!==null&&D.type===N&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case w:e:{for(var ne=D.key;T!==null;){if(T.key===ne){if(ne=D.type,ne===N){if(T.tag===7){s(O,T.sibling),$=d(T,D.props.children),$.return=O,O=$;break e}}else if(T.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Y&&fr(ne)===T.type){s(O,T.sibling),$=d(T,D.props),Ws($,D),$.return=O,O=$;break e}s(O,T);break}else t(O,T);T=T.sibling}D.type===N?($=or(D.props.children,O.mode,$,D.key),$.return=O,O=$):($=ci(D.type,D.key,D.props,null,O.mode,$),Ws($,D),$.return=O,O=$)}return y(O);case S:e:{for(ne=D.key;T!==null;){if(T.key===ne)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){s(O,T.sibling),$=d(T,D.children||[]),$.return=O,O=$;break e}else{s(O,T);break}else t(O,T);T=T.sibling}$=vo(D,O.mode,$),$.return=O,O=$}return y(O);case Y:return D=fr(D),De(O,T,D,$)}if(pe(D))return Z(O,T,D,$);if(ce(D)){if(ne=ce(D),typeof ne!="function")throw Error(n(150));return D=ne.call(D),le(O,T,D,$)}if(typeof D.then=="function")return De(O,T,gi(D),$);if(D.$$typeof===k)return De(O,T,hi(O,D),$);yi(O,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(s(O,T.sibling),$=d(T,D),$.return=O,O=$):(s(O,T),$=yo(D,O.mode,$),$.return=O,O=$),y(O)):s(O,T)}return function(O,T,D,$){try{Xs=0;var ne=De(O,T,D,$);return Xr=null,ne}catch(ee){if(ee===Kr||ee===mi)throw ee;var Se=St(29,ee,null,O.mode);return Se.lanes=$,Se.return=O,Se}finally{}}}var pr=_h(!0),Sh=_h(!1),Da=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ko(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ma(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=oi(e),ih(e,null,s),t}return li(e,l,t,s),oi(e)}function Js(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,md(e,s)}}function Oo(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var d=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?d=f=y:f=f.next=y,s=s.next}while(s!==null);f===null?d=f=t:f=f.next=t}else d=f=t;s={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Do=!1;function Zs(){if(Do){var e=Qr;if(e!==null)throw e}}function en(e,t,s,l){Do=!1;var d=e.updateQueue;Da=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var E=_,M=E.next;E.next=null,y===null?f=M:y.next=M,y=E;var q=e.alternate;q!==null&&(q=q.updateQueue,_=q.lastBaseUpdate,_!==y&&(_===null?q.firstBaseUpdate=M:_.next=M,q.lastBaseUpdate=E))}if(f!==null){var H=d.baseState;y=0,q=M=E=null,_=f;do{var U=_.lane&-536870913,z=U!==_.lane;if(z?(be&U)===U:(l&U)===U){U!==0&&U===Yr&&(Do=!0),q!==null&&(q=q.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Z=e,le=_;U=t;var De=s;switch(le.tag){case 1:if(Z=le.payload,typeof Z=="function"){H=Z.call(De,H,U);break e}H=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=le.payload,U=typeof Z=="function"?Z.call(De,H,U):Z,U==null)break e;H=b({},H,U);break e;case 2:Da=!0}}U=_.callback,U!==null&&(e.flags|=64,z&&(e.flags|=8192),z=d.callbacks,z===null?d.callbacks=[U]:z.push(U))}else z={lane:U,tag:_.tag,payload:_.payload,callback:_.callback,next:null},q===null?(M=q=z,E=H):q=q.next=z,y|=U;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;z=_,_=z.next,z.next=null,d.lastBaseUpdate=z,d.shared.pending=null}}while(!0);q===null&&(E=H),d.baseState=E,d.firstBaseUpdate=M,d.lastBaseUpdate=q,f===null&&(d.shared.lanes=0),Pa|=y,e.lanes=y,e.memoizedState=H}}function Ch(e,t){if(typeof e!="function")throw Error(n(191,e));e.call(t)}function jh(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Ch(s[e],t)}var Wr=Ne(null),vi=Ne(0);function Nh(e,t){e=xa,K(vi,e),K(Wr,t),xa=e|t.baseLanes}function Mo(){K(vi,xa),K(Wr,Wr.current)}function Uo(){xa=vi.current,Ae(Wr),Ae(vi)}var Ct=Ne(null),Bt=null;function za(e){var t=e.alternate;K(Fe,Fe.current&1),K(Ct,e),Bt===null&&(t===null||Wr.current!==null||t.memoizedState!==null)&&(Bt=e)}function zo(e){K(Fe,Fe.current),K(Ct,e),Bt===null&&(Bt=e)}function Ah(e){e.tag===22?(K(Fe,Fe.current),K(Ct,e),Bt===null&&(Bt=e)):La()}function La(){K(Fe,Fe.current),K(Ct,Ct.current)}function jt(e){Ae(Ct),Bt===e&&(Bt=null),Ae(Fe)}var Fe=Ne(0);function bi(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Hc(s)||Vc(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ha=0,he=null,ke=null,Qe=null,xi=!1,Jr=!1,gr=!1,wi=0,tn=0,Zr=null,av=0;function He(){throw Error(n(321))}function Lo(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!_t(e[s],t[s]))return!1;return!0}function Bo(e,t,s,l,d,f){return ha=f,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=e===null||e.memoizedState===null?df:Zo,gr=!1,f=s(l,d),gr=!1,Jr&&(f=Rh(t,s,l,d)),Eh(e),f}function Eh(e){L.H=sn;var t=ke!==null&&ke.next!==null;if(ha=0,Qe=ke=he=null,xi=!1,tn=0,Zr=null,t)throw Error(n(300));e===null||Ke||(e=e.dependencies,e!==null&&di(e)&&(Ke=!0))}function Rh(e,t,s,l){he=e;var d=0;do{if(Jr&&(Zr=null),tn=0,Jr=!1,25<=d)throw Error(n(301));if(d+=1,Qe=ke=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}L.H=hf,f=t(s,l)}while(Jr);return f}function rv(){var e=L.H,t=e.useState()[0];return t=typeof t.then=="function"?an(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(he.flags|=1024),t}function qo(){var e=wi!==0;return wi=0,e}function Po(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function $o(e){if(xi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xi=!1}ha=0,Qe=ke=he=null,Jr=!1,tn=wi=0,Zr=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?he.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ge(){if(ke===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Qe===null?he.memoizedState:Qe.next;if(t!==null)Qe=t,ke=e;else{if(e===null)throw he.alternate===null?Error(n(467)):Error(n(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Qe===null?he.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function _i(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function an(e){var t=tn;return tn+=1,Zr===null&&(Zr=[]),e=bh(Zr,e,t),t=he,(Qe===null?t.memoizedState:Qe.next)===null&&(t=t.alternate,L.H=t===null||t.memoizedState===null?df:Zo),e}function Si(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return an(e);if(e.$$typeof===k)return it(e)}throw Error(n(438,String(e)))}function Ho(e){var t=null,s=he.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=he.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=_i(),he.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=X;return t.index++,s}function fa(e,t){return typeof t=="function"?t(e):t}function Ci(e){var t=Ge();return Vo(t,ke,e)}function Vo(e,t,s){var l=e.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}t.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var _=y=null,E=null,M=t,q=!1;do{var H=M.lane&-536870913;if(H!==M.lane?(be&H)===H:(ha&H)===H){var U=M.revertLane;if(U===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),H===Yr&&(q=!0);else if((ha&U)===U){M=M.next,U===Yr&&(q=!0);continue}else H={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},E===null?(_=E=H,y=f):E=E.next=H,he.lanes|=U,Pa|=U;H=M.action,gr&&s(f,H),f=M.hasEagerState?M.eagerState:s(f,H)}else U={lane:H,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},E===null?(_=E=U,y=f):E=E.next=U,he.lanes|=H,Pa|=H;M=M.next}while(M!==null&&M!==t);if(E===null?y=f:E.next=_,!_t(f,e.memoizedState)&&(Ke=!0,q&&(s=Qr,s!==null)))throw s;e.memoizedState=f,e.baseState=y,e.baseQueue=E,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Fo(e){var t=Ge(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var l=s.dispatch,d=s.pending,f=t.memoizedState;if(d!==null){s.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);_t(f,t.memoizedState)||(Ke=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,l]}function Th(e,t,s){var l=he,d=Ge(),f=_e;if(f){if(s===void 0)throw Error(n(407));s=s()}else s=t();var y=!_t((ke||d).memoizedState,s);if(y&&(d.memoizedState=s,Ke=!0),d=d.queue,Yo(Dh.bind(null,l,d,e),[e]),d.getSnapshot!==t||y||Qe!==null&&Qe.memoizedState.tag&1){if(l.flags|=2048,es(9,{destroy:void 0},Oh.bind(null,l,d,s,t),null),Me===null)throw Error(n(349));f||(ha&127)!==0||kh(l,t,s)}return s}function kh(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=he.updateQueue,t===null?(t=_i(),he.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Oh(e,t,s,l){t.value=s,t.getSnapshot=l,Mh(t)&&Uh(e)}function Dh(e,t,s){return s(function(){Mh(t)&&Uh(e)})}function Mh(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!_t(e,s)}catch{return!0}}function Uh(e){var t=lr(e,2);t!==null&&vt(t,e,2)}function Go(e){var t=dt();if(typeof e=="function"){var s=e;if(e=s(),gr){Na(!0);try{s()}finally{Na(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function zh(e,t,s,l){return e.baseState=s,Vo(e,ke,typeof l=="function"?l:fa)}function sv(e,t,s,l,d){if(Ai(e))throw Error(n(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};L.T!==null?s(!0):f.isTransition=!1,l(f),s=t.pending,s===null?(f.next=t.pending=f,Lh(t,f)):(f.next=s.next,t.pending=s.next=f)}}function Lh(e,t){var s=t.action,l=t.payload,d=e.state;if(t.isTransition){var f=L.T,y={};L.T=y;try{var _=s(d,l),E=L.S;E!==null&&E(y,_),Bh(e,t,_)}catch(M){Io(e,t,M)}finally{f!==null&&y.types!==null&&(f.types=y.types),L.T=f}}else try{f=s(d,l),Bh(e,t,f)}catch(M){Io(e,t,M)}}function Bh(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){qh(e,t,l)},function(l){return Io(e,t,l)}):qh(e,t,s)}function qh(e,t,s){t.status="fulfilled",t.value=s,Ph(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Lh(e,s)))}function Io(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Ph(t),t=t.next;while(t!==l)}e.action=null}function Ph(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $h(e,t){return t}function Hh(e,t){if(_e){var s=Me.formState;if(s!==null){e:{var l=he;if(_e){if(Le){t:{for(var d=Le,f=Lt;d.nodeType!==8;){if(!f){d=null;break t}if(d=qt(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Le=qt(d.nextSibling),l=d.data==="F!";break e}}ka(l)}l=!1}l&&(t=s[0])}}return s=dt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$h,lastRenderedState:t},s.queue=l,s=of.bind(null,he,l),l.dispatch=s,l=Go(!1),f=Jo.bind(null,he,!1,l.queue),l=dt(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,s=sv.bind(null,he,d,f,s),d.dispatch=s,l.memoizedState=e,[t,s,!1]}function Vh(e){var t=Ge();return Fh(t,ke,e)}function Fh(e,t,s){if(t=Vo(e,t,$h)[0],e=Ci(fa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=an(t)}catch(y){throw y===Kr?mi:y}else l=t;t=Ge();var d=t.queue,f=d.dispatch;return s!==t.memoizedState&&(he.flags|=2048,es(9,{destroy:void 0},nv.bind(null,d,s),null)),[l,f,e]}function nv(e,t){e.action=t}function Gh(e){var t=Ge(),s=ke;if(s!==null)return Fh(t,s,e);Ge(),t=t.memoizedState,s=Ge();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function es(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=he.updateQueue,t===null&&(t=_i(),he.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function Ih(){return Ge().memoizedState}function ji(e,t,s,l){var d=dt();he.flags|=e,d.memoizedState=es(1|t,{destroy:void 0},s,l===void 0?null:l)}function Ni(e,t,s,l){var d=Ge();l=l===void 0?null:l;var f=d.memoizedState.inst;ke!==null&&l!==null&&Lo(l,ke.memoizedState.deps)?d.memoizedState=es(t,f,s,l):(he.flags|=e,d.memoizedState=es(1|t,f,s,l))}function Yh(e,t){ji(8390656,8,e,t)}function Yo(e,t){Ni(2048,8,e,t)}function iv(e){he.flags|=4;var t=he.updateQueue;if(t===null)t=_i(),he.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Qh(e){var t=Ge().memoizedState;return iv({ref:t,nextImpl:e}),function(){if((je&2)!==0)throw Error(n(440));return t.impl.apply(void 0,arguments)}}function Kh(e,t){return Ni(4,2,e,t)}function Xh(e,t){return Ni(4,4,e,t)}function Wh(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jh(e,t,s){s=s!=null?s.concat([e]):null,Ni(4,4,Wh.bind(null,t,e),s)}function Qo(){}function Zh(e,t){var s=Ge();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&Lo(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function ef(e,t){var s=Ge();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&Lo(t,l[1]))return l[0];if(l=e(),gr){Na(!0);try{e()}finally{Na(!1)}}return s.memoizedState=[l,t],l}function Ko(e,t,s){return s===void 0||(ha&1073741824)!==0&&(be&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=am(),he.lanes|=e,Pa|=e,s)}function tf(e,t,s,l){return _t(s,t)?s:Wr.current!==null?(e=Ko(e,s,l),_t(e,t)||(Ke=!0),e):(ha&42)===0||(ha&1073741824)!==0&&(be&261930)===0?(Ke=!0,e.memoizedState=s):(e=am(),he.lanes|=e,Pa|=e,t)}function af(e,t,s,l,d){var f=Q.p;Q.p=f!==0&&8>f?f:8;var y=L.T,_={};L.T=_,Jo(e,!1,t,s);try{var E=d(),M=L.S;if(M!==null&&M(_,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var q=tv(E,l);rn(e,t,q,Et(e))}else rn(e,t,l,Et(e))}catch(H){rn(e,t,{then:function(){},status:"rejected",reason:H},Et())}finally{Q.p=f,y!==null&&_.types!==null&&(y.types=_.types),L.T=y}}function lv(){}function Xo(e,t,s,l){if(e.tag!==5)throw Error(n(476));var d=rf(e).queue;af(e,d,t,re,s===null?lv:function(){return sf(e),s(l)})}function rf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:re},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sf(e){var t=rf(e);t.next===null&&(t=e.alternate.memoizedState),rn(e,t.next.queue,{},Et())}function Wo(){return it(wn)}function nf(){return Ge().memoizedState}function lf(){return Ge().memoizedState}function ov(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Et();e=Ma(s);var l=Ua(t,e,s);l!==null&&(vt(l,t,s),Js(l,t,s)),t={cache:No()},e.payload=t;return}t=t.return}}function cv(e,t,s){var l=Et();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ai(e)?cf(t,s):(s=po(e,t,s,l),s!==null&&(vt(s,e,l),uf(s,t,l)))}function of(e,t,s){var l=Et();rn(e,t,s,l)}function rn(e,t,s,l){var d={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ai(e))cf(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,_=f(y,s);if(d.hasEagerState=!0,d.eagerState=_,_t(_,y))return li(e,t,d,0),Me===null&&ii(),!1}catch{}finally{}if(s=po(e,t,d,l),s!==null)return vt(s,e,l),uf(s,t,l),!0}return!1}function Jo(e,t,s,l){if(l={lane:2,revertLane:Tc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ai(e)){if(t)throw Error(n(479))}else t=po(e,s,l,2),t!==null&&vt(t,e,2)}function Ai(e){var t=e.alternate;return e===he||t!==null&&t===he}function cf(e,t){Jr=xi=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function uf(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,md(e,s)}}var sn={readContext:it,use:Si,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};sn.useEffectEvent=He;var df={readContext:it,use:Si,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:Yh,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,ji(4194308,4,Wh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ji(4194308,4,e,t)},useInsertionEffect:function(e,t){ji(4,2,e,t)},useMemo:function(e,t){var s=dt();t=t===void 0?null:t;var l=e();if(gr){Na(!0);try{e()}finally{Na(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=dt();if(s!==void 0){var d=s(t);if(gr){Na(!0);try{s(t)}finally{Na(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=cv.bind(null,he,e),[l.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Go(e);var t=e.queue,s=of.bind(null,he,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Qo,useDeferredValue:function(e,t){var s=dt();return Ko(s,e,t)},useTransition:function(){var e=Go(!1);return e=af.bind(null,he,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=he,d=dt();if(_e){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),Me===null)throw Error(n(349));(be&127)!==0||kh(l,t,s)}d.memoizedState=s;var f={value:s,getSnapshot:t};return d.queue=f,Yh(Dh.bind(null,l,f,e),[e]),l.flags|=2048,es(9,{destroy:void 0},Oh.bind(null,l,f,s,t),null),s},useId:function(){var e=dt(),t=Me.identifierPrefix;if(_e){var s=Zt,l=Jt;s=(l&~(1<<32-wt(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=wi++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=av++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Wo,useFormState:Hh,useActionState:Hh,useOptimistic:function(e){var t=dt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Jo.bind(null,he,!0,s),s.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return dt().memoizedState=ov.bind(null,he)},useEffectEvent:function(e){var t=dt(),s={impl:e};return t.memoizedState=s,function(){if((je&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}},Zo={readContext:it,use:Si,useCallback:Zh,useContext:it,useEffect:Yo,useImperativeHandle:Jh,useInsertionEffect:Kh,useLayoutEffect:Xh,useMemo:ef,useReducer:Ci,useRef:Ih,useState:function(){return Ci(fa)},useDebugValue:Qo,useDeferredValue:function(e,t){var s=Ge();return tf(s,ke.memoizedState,e,t)},useTransition:function(){var e=Ci(fa)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:an(e),t]},useSyncExternalStore:Th,useId:nf,useHostTransitionStatus:Wo,useFormState:Vh,useActionState:Vh,useOptimistic:function(e,t){var s=Ge();return zh(s,ke,e,t)},useMemoCache:Ho,useCacheRefresh:lf};Zo.useEffectEvent=Qh;var hf={readContext:it,use:Si,useCallback:Zh,useContext:it,useEffect:Yo,useImperativeHandle:Jh,useInsertionEffect:Kh,useLayoutEffect:Xh,useMemo:ef,useReducer:Fo,useRef:Ih,useState:function(){return Fo(fa)},useDebugValue:Qo,useDeferredValue:function(e,t){var s=Ge();return ke===null?Ko(s,e,t):tf(s,ke.memoizedState,e,t)},useTransition:function(){var e=Fo(fa)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:an(e),t]},useSyncExternalStore:Th,useId:nf,useHostTransitionStatus:Wo,useFormState:Gh,useActionState:Gh,useOptimistic:function(e,t){var s=Ge();return ke!==null?zh(s,ke,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:lf};hf.useEffectEvent=Qh;function ec(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:b({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var tc={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Et(),d=Ma(l);d.payload=t,s!=null&&(d.callback=s),t=Ua(e,d,l),t!==null&&(vt(t,e,l),Js(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Et(),d=Ma(l);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=Ua(e,d,l),t!==null&&(vt(t,e,l),Js(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Et(),l=Ma(s);l.tag=2,t!=null&&(l.callback=t),t=Ua(e,l,s),t!==null&&(vt(t,e,s),Js(t,e,s))}};function ff(e,t,s,l,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):t.prototype&&t.prototype.isPureReactComponent?!Fs(s,l)||!Fs(d,f):!0}function mf(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&tc.enqueueReplaceState(t,t.state,null)}function yr(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=b({},s));for(var d in e)s[d]===void 0&&(s[d]=e[d])}return s}function pf(e){ni(e)}function gf(e){console.error(e)}function yf(e){ni(e)}function Ei(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function vf(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ac(e,t,s){return s=Ma(s),s.tag=3,s.payload={element:null},s.callback=function(){Ei(e,t)},s}function bf(e){return e=Ma(e),e.tag=3,e}function xf(e,t,s,l){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){vf(t,s,l)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){vf(t,s,l),typeof d!="function"&&($a===null?$a=new Set([this]):$a.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function uv(e,t,s,l,d){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Ir(t,s,d,!0),s=Ct.current,s!==null){switch(s.tag){case 31:case 13:return Bt===null?Pi():s.alternate===null&&Ve===0&&(Ve=3),s.flags&=-257,s.flags|=65536,s.lanes=d,l===pi?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Ac(e,l,d)),!1;case 22:return s.flags|=65536,l===pi?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Ac(e,l,d)),!1}throw Error(n(435,s.tag))}return Ac(e,l,d),Pi(),!1}if(_e)return t=Ct.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==wo&&(e=Error(n(422),{cause:l}),Ys(Mt(e,s)))):(l!==wo&&(t=Error(n(423),{cause:l}),Ys(Mt(t,s))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Mt(l,s),d=ac(e.stateNode,l,d),Oo(e,d),Ve!==4&&(Ve=2)),!1;var f=Error(n(520),{cause:l});if(f=Mt(f,s),fn===null?fn=[f]:fn.push(f),Ve!==4&&(Ve=2),t===null)return!0;l=Mt(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=d&-d,s.lanes|=e,e=ac(s.stateNode,l,e),Oo(s,e),!1;case 1:if(t=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&($a===null||!$a.has(f))))return s.flags|=65536,d&=-d,s.lanes|=d,d=bf(d),xf(d,e,s,l),Oo(s,d),!1}s=s.return}while(s!==null);return!1}var rc=Error(n(461)),Ke=!1;function lt(e,t,s,l){t.child=e===null?Sh(t,null,s,l):pr(t,e.child,s,l)}function wf(e,t,s,l,d){s=s.render;var f=t.ref;if("ref"in l){var y={};for(var _ in l)_!=="ref"&&(y[_]=l[_])}else y=l;return dr(t),l=Bo(e,t,s,y,f,d),_=qo(),e!==null&&!Ke?(Po(e,t,d),ma(e,t,d)):(_e&&_&&bo(t),t.flags|=1,lt(e,t,l,d),t.child)}function _f(e,t,s,l,d){if(e===null){var f=s.type;return typeof f=="function"&&!go(f)&&f.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=f,Sf(e,t,f,l,d)):(e=ci(s.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!dc(e,d)){var y=f.memoizedProps;if(s=s.compare,s=s!==null?s:Fs,s(y,l)&&e.ref===t.ref)return ma(e,t,d)}return t.flags|=1,e=oa(f,l),e.ref=t.ref,e.return=t,t.child=e}function Sf(e,t,s,l,d){if(e!==null){var f=e.memoizedProps;if(Fs(f,l)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=l=f,dc(e,d))(e.flags&131072)!==0&&(Ke=!0);else return t.lanes=e.lanes,ma(e,t,d)}return sc(e,t,s,l,d)}function Cf(e,t,s,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|s:s,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,t.child=null;return jf(e,t,f,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&fi(t,f!==null?f.cachePool:null),f!==null?Nh(t,f):Mo(),Ah(t);else return l=t.lanes=536870912,jf(e,t,f!==null?f.baseLanes|s:s,s,l)}else f!==null?(fi(t,f.cachePool),Nh(t,f),La(),t.memoizedState=null):(e!==null&&fi(t,null),Mo(),La());return lt(e,t,d,s),t.child}function nn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function jf(e,t,s,l,d){var f=Eo();return f=f===null?null:{parent:Ye._currentValue,pool:f},t.memoizedState={baseLanes:s,cachePool:f},e!==null&&fi(t,null),Mo(),Ah(t),e!==null&&Ir(e,t,l,!0),t.childLanes=d,null}function Ri(e,t){return t=ki({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Nf(e,t,s){return pr(t,e.child,null,s),e=Ri(t,t.pendingProps),e.flags|=2,jt(t),t.memoizedState=null,e}function dv(e,t,s){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(_e){if(l.mode==="hidden")return e=Ri(t,l),t.lanes=536870912,nn(null,e);if(zo(t),(e=Le)?(e=Bm(e,Lt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ra!==null?{id:Jt,overflow:Zt}:null,retryLane:536870912,hydrationErrors:null},s=oh(e),s.return=t,t.child=s,nt=t,Le=null)):e=null,e===null)throw ka(t);return t.lanes=536870912,null}return Ri(t,l)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(zo(t),d)if(t.flags&256)t.flags&=-257,t=Nf(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(n(558));else if(Ke||Ir(e,t,s,!1),d=(s&e.childLanes)!==0,Ke||d){if(l=Me,l!==null&&(y=pd(l,s),y!==0&&y!==f.retryLane))throw f.retryLane=y,lr(e,y),vt(l,e,y),rc;Pi(),t=Nf(e,t,s)}else e=f.treeContext,Le=qt(y.nextSibling),nt=t,_e=!0,Ta=null,Lt=!1,e!==null&&dh(t,e),t=Ri(t,l),t.flags|=4096;return t}return e=oa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ti(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(n(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function sc(e,t,s,l,d){return dr(t),s=Bo(e,t,s,l,void 0,d),l=qo(),e!==null&&!Ke?(Po(e,t,d),ma(e,t,d)):(_e&&l&&bo(t),t.flags|=1,lt(e,t,s,d),t.child)}function Af(e,t,s,l,d,f){return dr(t),t.updateQueue=null,s=Rh(t,l,s,d),Eh(e),l=qo(),e!==null&&!Ke?(Po(e,t,f),ma(e,t,f)):(_e&&l&&bo(t),t.flags|=1,lt(e,t,s,f),t.child)}function Ef(e,t,s,l,d){if(dr(t),t.stateNode===null){var f=Hr,y=s.contextType;typeof y=="object"&&y!==null&&(f=it(y)),f=new s(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=tc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},To(t),y=s.contextType,f.context=typeof y=="object"&&y!==null?it(y):Hr,f.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(ec(t,s,y,l),f.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&tc.enqueueReplaceState(f,f.state,null),en(t,l,f,d),Zs(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,E=yr(s,_);f.props=E;var M=f.context,q=s.contextType;y=Hr,typeof q=="object"&&q!==null&&(y=it(q));var H=s.getDerivedStateFromProps;q=typeof H=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||M!==y)&&mf(t,f,l,y),Da=!1;var U=t.memoizedState;f.state=U,en(t,l,f,d),Zs(),M=t.memoizedState,_||U!==M||Da?(typeof H=="function"&&(ec(t,s,H,l),M=t.memoizedState),(E=Da||ff(t,s,E,l,U,M,y))?(q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=M),f.props=l,f.state=M,f.context=y,l=E):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,ko(e,t),y=t.memoizedProps,q=yr(s,y),f.props=q,H=t.pendingProps,U=f.context,M=s.contextType,E=Hr,typeof M=="object"&&M!==null&&(E=it(M)),_=s.getDerivedStateFromProps,(M=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==H||U!==E)&&mf(t,f,l,E),Da=!1,U=t.memoizedState,f.state=U,en(t,l,f,d),Zs();var z=t.memoizedState;y!==H||U!==z||Da||e!==null&&e.dependencies!==null&&di(e.dependencies)?(typeof _=="function"&&(ec(t,s,_,l),z=t.memoizedState),(q=Da||ff(t,s,q,l,U,z,E)||e!==null&&e.dependencies!==null&&di(e.dependencies))?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,z,E),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,z,E)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=z),f.props=l,f.state=z,f.context=E,l=q):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,Ti(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=pr(t,e.child,null,d),t.child=pr(t,null,s,d)):lt(e,t,s,d),t.memoizedState=f.state,e=t.child):e=ma(e,t,d),e}function Rf(e,t,s,l){return cr(),t.flags|=256,lt(e,t,s,l),t.child}var nc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ic(e){return{baseLanes:e,cachePool:yh()}}function lc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=At),e}function Tf(e,t,s){var l=t.pendingProps,d=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Fe.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(d?za(t):La(),(e=Le)?(e=Bm(e,Lt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ra!==null?{id:Jt,overflow:Zt}:null,retryLane:536870912,hydrationErrors:null},s=oh(e),s.return=t,t.child=s,nt=t,Le=null)):e=null,e===null)throw ka(t);return Vc(e)?t.lanes=32:t.lanes=536870912,null}var _=l.children;return l=l.fallback,d?(La(),d=t.mode,_=ki({mode:"hidden",children:_},d),l=or(l,d,s,null),_.return=t,l.return=t,_.sibling=l,t.child=_,l=t.child,l.memoizedState=ic(s),l.childLanes=lc(e,y,s),t.memoizedState=nc,nn(null,l)):(za(t),oc(t,_))}var E=e.memoizedState;if(E!==null&&(_=E.dehydrated,_!==null)){if(f)t.flags&256?(za(t),t.flags&=-257,t=cc(e,t,s)):t.memoizedState!==null?(La(),t.child=e.child,t.flags|=128,t=null):(La(),_=l.fallback,d=t.mode,l=ki({mode:"visible",children:l.children},d),_=or(_,d,s,null),_.flags|=2,l.return=t,_.return=t,l.sibling=_,t.child=l,pr(t,e.child,null,s),l=t.child,l.memoizedState=ic(s),l.childLanes=lc(e,y,s),t.memoizedState=nc,t=nn(null,l));else if(za(t),Vc(_)){if(y=_.nextSibling&&_.nextSibling.dataset,y)var M=y.dgst;y=M,l=Error(n(419)),l.stack="",l.digest=y,Ys({value:l,source:null,stack:null}),t=cc(e,t,s)}else if(Ke||Ir(e,t,s,!1),y=(s&e.childLanes)!==0,Ke||y){if(y=Me,y!==null&&(l=pd(y,s),l!==0&&l!==E.retryLane))throw E.retryLane=l,lr(e,l),vt(y,e,l),rc;Hc(_)||Pi(),t=cc(e,t,s)}else Hc(_)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,Le=qt(_.nextSibling),nt=t,_e=!0,Ta=null,Lt=!1,e!==null&&dh(t,e),t=oc(t,l.children),t.flags|=4096);return t}return d?(La(),_=l.fallback,d=t.mode,E=e.child,M=E.sibling,l=oa(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&65011712,M!==null?_=oa(M,_):(_=or(_,d,s,null),_.flags|=2),_.return=t,l.return=t,l.sibling=_,t.child=l,nn(null,l),l=t.child,_=e.child.memoizedState,_===null?_=ic(s):(d=_.cachePool,d!==null?(E=Ye._currentValue,d=d.parent!==E?{parent:E,pool:E}:d):d=yh(),_={baseLanes:_.baseLanes|s,cachePool:d}),l.memoizedState=_,l.childLanes=lc(e,y,s),t.memoizedState=nc,nn(e.child,l)):(za(t),s=e.child,e=s.sibling,s=oa(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=s,t.memoizedState=null,s)}function oc(e,t){return t=ki({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ki(e,t){return e=St(22,e,null,t),e.lanes=0,e}function cc(e,t,s){return pr(t,e.child,null,s),e=oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kf(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Co(e.return,t,s)}function uc(e,t,s,l,d,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:d,treeForkCount:f}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=s,y.tailMode=d,y.treeForkCount=f)}function Of(e,t,s){var l=t.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var y=Fe.current,_=(y&2)!==0;if(_?(y=y&1|2,t.flags|=128):y&=1,K(Fe,y),lt(e,t,l,s),l=_e?Is:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kf(e,s,t);else if(e.tag===19)kf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&bi(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),uc(t,!1,d,s,f,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&bi(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}uc(t,!0,s,null,f,l);break;case"together":uc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function ma(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Pa|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Ir(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=oa(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=oa(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function dc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&di(e)))}function hv(e,t,s){switch(t.tag){case 3:ra(t,t.stateNode.containerInfo),Oa(t,Ye,e.memoizedState.cache),cr();break;case 27:case 5:Nr(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:Oa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,zo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(za(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Tf(e,t,s):(za(t),e=ma(e,t,s),e!==null?e.sibling:null);za(t);break;case 19:var d=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Ir(e,t,s,!1),l=(s&t.childLanes)!==0),d){if(l)return Of(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),K(Fe,Fe.current),l)break;return null;case 22:return t.lanes=0,Cf(e,t,s,t.pendingProps);case 24:Oa(t,Ye,e.memoizedState.cache)}return ma(e,t,s)}function Df(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ke=!0;else{if(!dc(e,s)&&(t.flags&128)===0)return Ke=!1,hv(e,t,s);Ke=(e.flags&131072)!==0}else Ke=!1,_e&&(t.flags&1048576)!==0&&uh(t,Is,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=fr(t.elementType),t.type=e,typeof e=="function")go(e)?(l=yr(e,l),t.tag=1,t=Ef(null,t,e,l,s)):(t.tag=0,t=sc(null,t,e,l,s));else{if(e!=null){var d=e.$$typeof;if(d===B){t.tag=11,t=wf(null,t,e,l,s);break e}else if(d===I){t.tag=14,t=_f(null,t,e,l,s);break e}}throw t=F(e)||e,Error(n(306,t,""))}}return t;case 0:return sc(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,d=yr(l,t.pendingProps),Ef(e,t,l,d,s);case 3:e:{if(ra(t,t.stateNode.containerInfo),e===null)throw Error(n(387));l=t.pendingProps;var f=t.memoizedState;d=f.element,ko(e,t),en(t,l,null,s);var y=t.memoizedState;if(l=y.cache,Oa(t,Ye,l),l!==f.cache&&jo(t,[Ye],s,!0),Zs(),l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Rf(e,t,l,s);break e}else if(l!==d){d=Mt(Error(n(424)),t),Ys(d),t=Rf(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=qt(e.firstChild),nt=t,_e=!0,Ta=null,Lt=!0,s=Sh(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(cr(),l===d){t=ma(e,t,s);break e}lt(e,t,l,s)}t=t.child}return t;case 26:return Ti(e,t),e===null?(s=Fm(t.type,null,t.pendingProps,null))?t.memoizedState=s:_e||(s=t.type,e=t.pendingProps,l=Yi(ze.current).createElement(s),l[st]=t,l[ht]=e,ot(l,s,e),tt(l),t.stateNode=l):t.memoizedState=Fm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Nr(t),e===null&&_e&&(l=t.stateNode=$m(t.type,t.pendingProps,ze.current),nt=t,Lt=!0,d=Le,Ga(t.type)?(Fc=d,Le=qt(l.firstChild)):Le=d),lt(e,t,t.pendingProps.children,s),Ti(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((d=l=Le)&&(l=Hv(l,t.type,t.pendingProps,Lt),l!==null?(t.stateNode=l,nt=t,Le=qt(l.firstChild),Lt=!1,d=!0):d=!1),d||ka(t)),Nr(t),d=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,l=f.children,qc(d,f)?l=null:y!==null&&qc(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=Bo(e,t,rv,null,null,s),wn._currentValue=d),Ti(e,t),lt(e,t,l,s),t.child;case 6:return e===null&&_e&&((e=s=Le)&&(s=Vv(s,t.pendingProps,Lt),s!==null?(t.stateNode=s,nt=t,Le=null,e=!0):e=!1),e||ka(t)),null;case 13:return Tf(e,t,s);case 4:return ra(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=pr(t,null,l,s):lt(e,t,l,s),t.child;case 11:return wf(e,t,t.type,t.pendingProps,s);case 7:return lt(e,t,t.pendingProps,s),t.child;case 8:return lt(e,t,t.pendingProps.children,s),t.child;case 12:return lt(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,Oa(t,t.type,l.value),lt(e,t,l.children,s),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,dr(t),d=it(d),l=l(d),t.flags|=1,lt(e,t,l,s),t.child;case 14:return _f(e,t,t.type,t.pendingProps,s);case 15:return Sf(e,t,t.type,t.pendingProps,s);case 19:return Of(e,t,s);case 31:return dv(e,t,s);case 22:return Cf(e,t,s,t.pendingProps);case 24:return dr(t),l=it(Ye),e===null?(d=Eo(),d===null&&(d=Me,f=No(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=s),d=f),t.memoizedState={parent:l,cache:d},To(t),Oa(t,Ye,d)):((e.lanes&s)!==0&&(ko(e,t),en(t,null,null,s),Zs()),d=e.memoizedState,f=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Oa(t,Ye,l)):(l=f.cache,Oa(t,Ye,l),l!==d.cache&&jo(t,[Ye],s,!0))),lt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(n(156,t.tag))}function pa(e){e.flags|=4}function hc(e,t,s,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(im())e.flags|=8192;else throw mr=pi,Ro}else e.flags&=-16777217}function Mf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Km(t))if(im())e.flags|=8192;else throw mr=pi,Ro}function Oi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?hd():536870912,e.lanes|=t,ss|=t)}function ln(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function fv(e,t,s){var l=t.pendingProps;switch(xo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return Be(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),da(Ye),sa(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Gr(t)?pa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,_o())),Be(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(pa(t),f!==null?(Be(t),Mf(t,f)):(Be(t),hc(t,d,null,l,s))):f?f!==e.memoizedState?(pa(t),Be(t),Mf(t,f)):(Be(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&pa(t),Be(t),hc(t,d,e,l,s)),null;case 27:if(Ar(t),s=ze.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(n(166));return Be(t),null}e=me.current,Gr(t)?hh(t):(e=$m(d,l,s),t.stateNode=e,pa(t))}return Be(t),null;case 5:if(Ar(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(n(166));return Be(t),null}if(f=me.current,Gr(t))hh(t);else{var y=Yi(ze.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?y.createElement(d,{is:l.is}):y.createElement(d)}}f[st]=t,f[ht]=l;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=f;e:switch(ot(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&pa(t)}}return Be(t),hc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(n(166));if(e=ze.current,Gr(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,d=nt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[st]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Tm(e.nodeValue,s)),e||ka(t,!0)}else e=Yi(e).createTextNode(l),e[st]=t,t.stateNode=e}return Be(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=Gr(t),s!==null){if(e===null){if(!l)throw Error(n(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(557));e[st]=t}else cr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Be(t),e=!1}else s=_o(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(jt(t),t):(jt(t),null);if((t.flags&128)!==0)throw Error(n(558))}return Be(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Gr(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(n(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[st]=t}else cr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Be(t),d=!1}else d=_o(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(jt(t),t):(jt(t),null)}return jt(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Oi(t,t.updateQueue),Be(t),null);case 4:return sa(),e===null&&Mc(t.stateNode.containerInfo),Be(t),null;case 10:return da(t.type),Be(t),null;case 19:if(Ae(Fe),l=t.memoizedState,l===null)return Be(t),null;if(d=(t.flags&128)!==0,f=l.rendering,f===null)if(d)ln(l,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=bi(e),f!==null){for(t.flags|=128,ln(l,!1),e=f.updateQueue,t.updateQueue=e,Oi(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)lh(s,e),s=s.sibling;return K(Fe,Fe.current&1|2),_e&&ca(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&bt()>Li&&(t.flags|=128,d=!0,ln(l,!1),t.lanes=4194304)}else{if(!d)if(e=bi(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Oi(t,e),ln(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!_e)return Be(t),null}else 2*bt()-l.renderingStartTime>Li&&s!==536870912&&(t.flags|=128,d=!0,ln(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(e=l.last,e!==null?e.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=bt(),e.sibling=null,s=Fe.current,K(Fe,d?s&1|2:s&1),_e&&ca(t,l.treeForkCount),e):(Be(t),null);case 22:case 23:return jt(t),Uo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),s=t.updateQueue,s!==null&&Oi(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&Ae(hr),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),da(Ye),Be(t),null;case 25:return null;case 30:return null}throw Error(n(156,t.tag))}function mv(e,t){switch(xo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return da(Ye),sa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ar(t),null;case 31:if(t.memoizedState!==null){if(jt(t),t.alternate===null)throw Error(n(340));cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Fe),null;case 4:return sa(),null;case 10:return da(t.type),null;case 22:case 23:return jt(t),Uo(),e!==null&&Ae(hr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return da(Ye),null;case 25:return null;default:return null}}function Uf(e,t){switch(xo(t),t.tag){case 3:da(Ye),sa();break;case 26:case 27:case 5:Ar(t);break;case 4:sa();break;case 31:t.memoizedState!==null&&jt(t);break;case 13:jt(t);break;case 19:Ae(Fe);break;case 10:da(t.type);break;case 22:case 23:jt(t),Uo(),e!==null&&Ae(hr);break;case 24:da(Ye)}}function on(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var d=l.next;s=d;do{if((s.tag&e)===e){l=void 0;var f=s.create,y=s.inst;l=f(),y.destroy=l}s=s.next}while(s!==d)}}catch(_){Re(t,t.return,_)}}function Ba(e,t,s){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var y=l.inst,_=y.destroy;if(_!==void 0){y.destroy=void 0,d=t;var E=s,M=_;try{M()}catch(q){Re(d,E,q)}}}l=l.next}while(l!==f)}}catch(q){Re(t,t.return,q)}}function zf(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{jh(t,s)}catch(l){Re(e,e.return,l)}}}function Lf(e,t,s){s.props=yr(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Re(e,t,l)}}function cn(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(d){Re(e,t,d)}}function ea(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(d){Re(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){Re(e,t,d)}else s.current=null}function Bf(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(d){Re(e,e.return,d)}}function fc(e,t,s){try{var l=e.stateNode;zv(l,e.type,s,t),l[ht]=t}catch(d){Re(e,e.return,d)}}function qf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ga(e.type)||e.tag===4}function mc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ia));else if(l!==4&&(l===27&&Ga(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(pc(e,t,s),e=e.sibling;e!==null;)pc(e,t,s),e=e.sibling}function Di(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&Ga(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Di(e,t,s),e=e.sibling;e!==null;)Di(e,t,s),e=e.sibling}function Pf(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);ot(t,l,s),t[st]=e,t[ht]=s}catch(f){Re(e,e.return,f)}}var ga=!1,Xe=!1,gc=!1,$f=typeof WeakSet=="function"?WeakSet:Set,at=null;function pv(e,t){if(e=e.containerInfo,Lc=el,e=Jd(e),oo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var y=0,_=-1,E=-1,M=0,q=0,H=e,U=null;t:for(;;){for(var z;H!==s||d!==0&&H.nodeType!==3||(_=y+d),H!==f||l!==0&&H.nodeType!==3||(E=y+l),H.nodeType===3&&(y+=H.nodeValue.length),(z=H.firstChild)!==null;)U=H,H=z;for(;;){if(H===e)break t;if(U===s&&++M===d&&(_=y),U===f&&++q===l&&(E=y),(z=H.nextSibling)!==null)break;H=U,U=H.parentNode}H=z}s=_===-1||E===-1?null:{start:_,end:E}}else s=null}s=s||{start:0,end:0}}else s=null;for(Bc={focusedElem:e,selectionRange:s},el=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){switch(t=at,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)d=e[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,s=t,d=f.memoizedProps,f=f.memoizedState,l=s.stateNode;try{var Z=yr(s.type,d);e=l.getSnapshotBeforeUpdate(Z,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(le){Re(s,s.return,le)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)$c(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$c(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}}function Hf(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:va(e,s),l&4&&on(5,s);break;case 1:if(va(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(y){Re(s,s.return,y)}else{var d=yr(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Re(s,s.return,y)}}l&64&&zf(s),l&512&&cn(s,s.return);break;case 3:if(va(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{jh(e,t)}catch(y){Re(s,s.return,y)}}break;case 27:t===null&&l&4&&Pf(s);case 26:case 5:va(e,s),t===null&&l&4&&Bf(s),l&512&&cn(s,s.return);break;case 12:va(e,s);break;case 31:va(e,s),l&4&&Gf(e,s);break;case 13:va(e,s),l&4&&If(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Cv.bind(null,s),Fv(e,s))));break;case 22:if(l=s.memoizedState!==null||ga,!l){t=t!==null&&t.memoizedState!==null||Xe,d=ga;var f=Xe;ga=l,(Xe=t)&&!f?ba(e,s,(s.subtreeFlags&8772)!==0):va(e,s),ga=d,Xe=f}break;case 30:break;default:va(e,s)}}function Vf(e){var t=e.alternate;t!==null&&(e.alternate=null,Vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Gl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qe=null,mt=!1;function ya(e,t,s){for(s=s.child;s!==null;)Ff(e,t,s),s=s.sibling}function Ff(e,t,s){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Os,s)}catch{}switch(s.tag){case 26:Xe||ea(s,t),ya(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Xe||ea(s,t);var l=qe,d=mt;Ga(s.type)&&(qe=s.stateNode,mt=!1),ya(e,t,s),vn(s.stateNode),qe=l,mt=d;break;case 5:Xe||ea(s,t);case 6:if(l=qe,d=mt,qe=null,ya(e,t,s),qe=l,mt=d,qe!==null)if(mt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(s.stateNode)}catch(f){Re(s,t,f)}else try{qe.removeChild(s.stateNode)}catch(f){Re(s,t,f)}break;case 18:qe!==null&&(mt?(e=qe,zm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),hs(e)):zm(qe,s.stateNode));break;case 4:l=qe,d=mt,qe=s.stateNode.containerInfo,mt=!0,ya(e,t,s),qe=l,mt=d;break;case 0:case 11:case 14:case 15:Ba(2,s,t),Xe||Ba(4,s,t),ya(e,t,s);break;case 1:Xe||(ea(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Lf(s,t,l)),ya(e,t,s);break;case 21:ya(e,t,s);break;case 22:Xe=(l=Xe)||s.memoizedState!==null,ya(e,t,s),Xe=l;break;default:ya(e,t,s)}}function Gf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hs(e)}catch(s){Re(t,t.return,s)}}}function If(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hs(e)}catch(s){Re(t,t.return,s)}}function gv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new $f),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new $f),t;default:throw Error(n(435,e.tag))}}function Mi(e,t){var s=gv(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var d=jv.bind(null,e,l);l.then(d,d)}})}function pt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var d=s[l],f=e,y=t,_=y;e:for(;_!==null;){switch(_.tag){case 27:if(Ga(_.type)){qe=_.stateNode,mt=!1;break e}break;case 5:qe=_.stateNode,mt=!1;break e;case 3:case 4:qe=_.stateNode.containerInfo,mt=!0;break e}_=_.return}if(qe===null)throw Error(n(160));Ff(f,y,d),qe=null,mt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yf(t,e),t=t.sibling}var Ht=null;function Yf(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pt(t,e),gt(e),l&4&&(Ba(3,e,e.return),on(3,e),Ba(5,e,e.return));break;case 1:pt(t,e),gt(e),l&512&&(Xe||s===null||ea(s,s.return)),l&64&&ga&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var d=Ht;if(pt(t,e),gt(e),l&512&&(Xe||s===null||ea(s,s.return)),l&4){var f=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Us]||f[st]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),ot(f,l,s),f[st]=e,tt(f),l=f;break e;case"link":var y=Ym("link","href",d).get(l+(s.href||""));if(y){for(var _=0;_<y.length;_++)if(f=y[_],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(_,1);break t}}f=d.createElement(l),ot(f,l,s),d.head.appendChild(f);break;case"meta":if(y=Ym("meta","content",d).get(l+(s.content||""))){for(_=0;_<y.length;_++)if(f=y[_],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(_,1);break t}}f=d.createElement(l),ot(f,l,s),d.head.appendChild(f);break;default:throw Error(n(468,l))}f[st]=e,tt(f),l=f}e.stateNode=l}else Qm(d,e.type,e.stateNode);else e.stateNode=Im(d,l,e.memoizedProps);else f!==l?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,l===null?Qm(d,e.type,e.stateNode):Im(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&fc(e,e.memoizedProps,s.memoizedProps)}break;case 27:pt(t,e),gt(e),l&512&&(Xe||s===null||ea(s,s.return)),s!==null&&l&4&&fc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(pt(t,e),gt(e),l&512&&(Xe||s===null||ea(s,s.return)),e.flags&32){d=e.stateNode;try{Ur(d,"")}catch(Z){Re(e,e.return,Z)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,fc(e,d,s!==null?s.memoizedProps:d)),l&1024&&(gc=!0);break;case 6:if(pt(t,e),gt(e),l&4){if(e.stateNode===null)throw Error(n(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(Z){Re(e,e.return,Z)}}break;case 3:if(Xi=null,d=Ht,Ht=Qi(t.containerInfo),pt(t,e),Ht=d,gt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(Z){Re(e,e.return,Z)}gc&&(gc=!1,Qf(e));break;case 4:l=Ht,Ht=Qi(e.stateNode.containerInfo),pt(t,e),gt(e),Ht=l;break;case 12:pt(t,e),gt(e);break;case 31:pt(t,e),gt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mi(e,l)));break;case 13:pt(t,e),gt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(zi=bt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mi(e,l)));break;case 22:d=e.memoizedState!==null;var E=s!==null&&s.memoizedState!==null,M=ga,q=Xe;if(ga=M||d,Xe=q||E,pt(t,e),Xe=q,ga=M,gt(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(s===null||E||ga||Xe||vr(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){E=s=t;try{if(f=E.stateNode,d)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{_=E.stateNode;var H=E.memoizedProps.style,U=H!=null&&H.hasOwnProperty("display")?H.display:null;_.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(Z){Re(E,E.return,Z)}}}else if(t.tag===6){if(s===null){E=t;try{E.stateNode.nodeValue=d?"":E.memoizedProps}catch(Z){Re(E,E.return,Z)}}}else if(t.tag===18){if(s===null){E=t;try{var z=E.stateNode;d?Lm(z,!0):Lm(E.stateNode,!1)}catch(Z){Re(E,E.return,Z)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Mi(e,s))));break;case 19:pt(t,e),gt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mi(e,l)));break;case 30:break;case 21:break;default:pt(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(qf(l)){s=l;break}l=l.return}if(s==null)throw Error(n(160));switch(s.tag){case 27:var d=s.stateNode,f=mc(e);Di(e,f,d);break;case 5:var y=s.stateNode;s.flags&32&&(Ur(y,""),s.flags&=-33);var _=mc(e);Di(e,_,y);break;case 3:case 4:var E=s.stateNode.containerInfo,M=mc(e);pc(e,M,E);break;default:throw Error(n(161))}}catch(q){Re(e,e.return,q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Qf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function va(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Hf(e,t.alternate,t),t=t.sibling}function vr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ba(4,t,t.return),vr(t);break;case 1:ea(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Lf(t,t.return,s),vr(t);break;case 27:vn(t.stateNode);case 26:case 5:ea(t,t.return),vr(t);break;case 22:t.memoizedState===null&&vr(t);break;case 30:vr(t);break;default:vr(t)}e=e.sibling}}function ba(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:ba(d,f,s),on(4,f);break;case 1:if(ba(d,f,s),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(M){Re(l,l.return,M)}if(l=f,d=l.updateQueue,d!==null){var _=l.stateNode;try{var E=d.shared.hiddenCallbacks;if(E!==null)for(d.shared.hiddenCallbacks=null,d=0;d<E.length;d++)Ch(E[d],_)}catch(M){Re(l,l.return,M)}}s&&y&64&&zf(f),cn(f,f.return);break;case 27:Pf(f);case 26:case 5:ba(d,f,s),s&&l===null&&y&4&&Bf(f),cn(f,f.return);break;case 12:ba(d,f,s);break;case 31:ba(d,f,s),s&&y&4&&Gf(d,f);break;case 13:ba(d,f,s),s&&y&4&&If(d,f);break;case 22:f.memoizedState===null&&ba(d,f,s),cn(f,f.return);break;case 30:break;default:ba(d,f,s)}t=t.sibling}}function yc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Qs(s))}function vc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qs(e))}function Vt(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kf(e,t,s,l),t=t.sibling}function Kf(e,t,s,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Vt(e,t,s,l),d&2048&&on(9,t);break;case 1:Vt(e,t,s,l);break;case 3:Vt(e,t,s,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qs(e)));break;case 12:if(d&2048){Vt(e,t,s,l),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,_=f.onPostCommit;typeof _=="function"&&_(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Re(t,t.return,E)}}else Vt(e,t,s,l);break;case 31:Vt(e,t,s,l);break;case 13:Vt(e,t,s,l);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?Vt(e,t,s,l):un(e,t):f._visibility&2?Vt(e,t,s,l):(f._visibility|=2,ts(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&yc(y,t);break;case 24:Vt(e,t,s,l),d&2048&&vc(t.alternate,t);break;default:Vt(e,t,s,l)}}function ts(e,t,s,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,y=t,_=s,E=l,M=y.flags;switch(y.tag){case 0:case 11:case 15:ts(f,y,_,E,d),on(8,y);break;case 23:break;case 22:var q=y.stateNode;y.memoizedState!==null?q._visibility&2?ts(f,y,_,E,d):un(f,y):(q._visibility|=2,ts(f,y,_,E,d)),d&&M&2048&&yc(y.alternate,y);break;case 24:ts(f,y,_,E,d),d&&M&2048&&vc(y.alternate,y);break;default:ts(f,y,_,E,d)}t=t.sibling}}function un(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,d=l.flags;switch(l.tag){case 22:un(s,l),d&2048&&yc(l.alternate,l);break;case 24:un(s,l),d&2048&&vc(l.alternate,l);break;default:un(s,l)}t=t.sibling}}var dn=8192;function as(e,t,s){if(e.subtreeFlags&dn)for(e=e.child;e!==null;)Xf(e,t,s),e=e.sibling}function Xf(e,t,s){switch(e.tag){case 26:as(e,t,s),e.flags&dn&&e.memoizedState!==null&&ab(s,Ht,e.memoizedState,e.memoizedProps);break;case 5:as(e,t,s);break;case 3:case 4:var l=Ht;Ht=Qi(e.stateNode.containerInfo),as(e,t,s),Ht=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=dn,dn=16777216,as(e,t,s),dn=l):as(e,t,s));break;default:as(e,t,s)}}function Wf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function hn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];at=l,Zf(l,e)}Wf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jf(e),e=e.sibling}function Jf(e){switch(e.tag){case 0:case 11:case 15:hn(e),e.flags&2048&&Ba(9,e,e.return);break;case 3:hn(e);break;case 12:hn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ui(e)):hn(e);break;default:hn(e)}}function Ui(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];at=l,Zf(l,e)}Wf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ba(8,t,t.return),Ui(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Ui(t));break;default:Ui(t)}e=e.sibling}}function Zf(e,t){for(;at!==null;){var s=at;switch(s.tag){case 0:case 11:case 15:Ba(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Qs(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,at=l;else e:for(s=e;at!==null;){l=at;var d=l.sibling,f=l.return;if(Vf(l),l===s){at=null;break e}if(d!==null){d.return=f,at=d;break e}at=f}}}var yv={getCacheForType:function(e){var t=it(Ye),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return it(Ye).controller.signal}},vv=typeof WeakMap=="function"?WeakMap:Map,je=0,Me=null,ge=null,be=0,Ee=0,Nt=null,qa=!1,rs=!1,bc=!1,xa=0,Ve=0,Pa=0,br=0,xc=0,At=0,ss=0,fn=null,yt=null,wc=!1,zi=0,em=0,Li=1/0,Bi=null,$a=null,Je=0,Ha=null,ns=null,wa=0,_c=0,Sc=null,tm=null,mn=0,Cc=null;function Et(){return(je&2)!==0&&be!==0?be&-be:L.T!==null?Tc():gd()}function am(){if(At===0)if((be&536870912)===0||_e){var e=In;In<<=1,(In&3932160)===0&&(In=262144),At=e}else At=536870912;return e=Ct.current,e!==null&&(e.flags|=32),At}function vt(e,t,s){(e===Me&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)&&(is(e,0),Va(e,be,At,!1)),Ms(e,s),((je&2)===0||e!==Me)&&(e===Me&&((je&2)===0&&(br|=s),Ve===4&&Va(e,be,At,!1)),ta(e))}function rm(e,t,s){if((je&6)!==0)throw Error(n(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Ds(e,t),d=l?wv(e,t):Nc(e,t,!0),f=l;do{if(d===0){rs&&!l&&Va(e,t,0,!1);break}else{if(s=e.current.alternate,f&&!bv(s)){d=Nc(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var _=e;d=fn;var E=_.current.memoizedState.isDehydrated;if(E&&(is(_,y).flags|=256),y=Nc(_,y,!1),y!==2){if(bc&&!E){_.errorRecoveryDisabledLanes|=f,br|=f,d=4;break e}f=yt,yt=d,f!==null&&(yt===null?yt=f:yt.push.apply(yt,f))}d=y}if(f=!1,d!==2)continue}}if(d===1){is(e,0),Va(e,t,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(n(345));case 4:if((t&4194048)!==t)break;case 6:Va(l,t,At,!qa);break e;case 2:yt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((t&62914560)===t&&(d=zi+300-bt(),10<d)){if(Va(l,t,At,!qa),Qn(l,0,!0)!==0)break e;wa=t,l.timeoutHandle=Mm(sm.bind(null,l,s,yt,Bi,wc,t,At,br,ss,qa,f,"Throttled",-0,0),d);break e}sm(l,s,yt,Bi,wc,t,At,br,ss,qa,f,null,-0,0)}}break}while(!0);ta(e)}function sm(e,t,s,l,d,f,y,_,E,M,q,H,U,z){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ia},Xf(t,f,H);var Z=(f&62914560)===f?zi-bt():(f&4194048)===f?em-bt():0;if(Z=rb(H,Z),Z!==null){wa=f,e.cancelPendingCommit=Z(hm.bind(null,e,t,f,s,l,d,y,_,E,q,H,null,U,z)),Va(e,f,y,!M);return}}hm(e,t,f,s,l,d,y,_,E)}function bv(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var d=s[l],f=d.getSnapshot;d=d.value;try{if(!_t(f(),d))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Va(e,t,s,l){t&=~xc,t&=~br,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var f=31-wt(d),y=1<<f;l[f]=-1,d&=~y}s!==0&&fd(e,s,t)}function qi(){return(je&6)===0?(pn(0),!1):!0}function jc(){if(ge!==null){if(Ee===0)var e=ge.return;else e=ge,ua=ur=null,$o(e),Xr=null,Xs=0,e=ge;for(;e!==null;)Uf(e.alternate,e),e=e.return;ge=null}}function is(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,qv(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),wa=0,jc(),Me=e,ge=s=oa(e.current,null),be=t,Ee=0,Nt=null,qa=!1,rs=Ds(e,t),bc=!1,ss=At=xc=br=Pa=Ve=0,yt=fn=null,wc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-wt(l),f=1<<d;t|=e[d],l&=~f}return xa=t,ii(),s}function nm(e,t){he=null,L.H=sn,t===Kr||t===mi?(t=xh(),Ee=3):t===Ro?(t=xh(),Ee=4):Ee=t===rc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Nt=t,ge===null&&(Ve=1,Ei(e,Mt(t,e.current)))}function im(){var e=Ct.current;return e===null?!0:(be&4194048)===be?Bt===null:(be&62914560)===be||(be&536870912)!==0?e===Bt:!1}function lm(){var e=L.H;return L.H=sn,e===null?sn:e}function om(){var e=L.A;return L.A=yv,e}function Pi(){Ve=4,qa||(be&4194048)!==be&&Ct.current!==null||(rs=!0),(Pa&134217727)===0&&(br&134217727)===0||Me===null||Va(Me,be,At,!1)}function Nc(e,t,s){var l=je;je|=2;var d=lm(),f=om();(Me!==e||be!==t)&&(Bi=null,is(e,t)),t=!1;var y=Ve;e:do try{if(Ee!==0&&ge!==null){var _=ge,E=Nt;switch(Ee){case 8:jc(),y=6;break e;case 3:case 2:case 9:case 6:Ct.current===null&&(t=!0);var M=Ee;if(Ee=0,Nt=null,ls(e,_,E,M),s&&rs){y=0;break e}break;default:M=Ee,Ee=0,Nt=null,ls(e,_,E,M)}}xv(),y=Ve;break}catch(q){nm(e,q)}while(!0);return t&&e.shellSuspendCounter++,ua=ur=null,je=l,L.H=d,L.A=f,ge===null&&(Me=null,be=0,ii()),y}function xv(){for(;ge!==null;)cm(ge)}function wv(e,t){var s=je;je|=2;var l=lm(),d=om();Me!==e||be!==t?(Bi=null,Li=bt()+500,is(e,t)):rs=Ds(e,t);e:do try{if(Ee!==0&&ge!==null){t=ge;var f=Nt;t:switch(Ee){case 1:Ee=0,Nt=null,ls(e,t,f,1);break;case 2:case 9:if(vh(f)){Ee=0,Nt=null,um(t);break}t=function(){Ee!==2&&Ee!==9||Me!==e||(Ee=7),ta(e)},f.then(t,t);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:vh(f)?(Ee=0,Nt=null,um(t)):(Ee=0,Nt=null,ls(e,t,f,7));break;case 5:var y=null;switch(ge.tag){case 26:y=ge.memoizedState;case 5:case 27:var _=ge;if(y?Km(y):_.stateNode.complete){Ee=0,Nt=null;var E=_.sibling;if(E!==null)ge=E;else{var M=_.return;M!==null?(ge=M,$i(M)):ge=null}break t}}Ee=0,Nt=null,ls(e,t,f,5);break;case 6:Ee=0,Nt=null,ls(e,t,f,6);break;case 8:jc(),Ve=6;break e;default:throw Error(n(462))}}_v();break}catch(q){nm(e,q)}while(!0);return ua=ur=null,L.H=l,L.A=d,je=s,ge!==null?0:(Me=null,be=0,ii(),Ve)}function _v(){for(;ge!==null&&!Gy();)cm(ge)}function cm(e){var t=Df(e.alternate,e,xa);e.memoizedProps=e.pendingProps,t===null?$i(e):ge=t}function um(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Af(s,t,t.pendingProps,t.type,void 0,be);break;case 11:t=Af(s,t,t.pendingProps,t.type.render,t.ref,be);break;case 5:$o(t);default:Uf(s,t),t=ge=lh(t,xa),t=Df(s,t,xa)}e.memoizedProps=e.pendingProps,t===null?$i(e):ge=t}function ls(e,t,s,l){ua=ur=null,$o(t),Xr=null,Xs=0;var d=t.return;try{if(uv(e,d,t,s,be)){Ve=1,Ei(e,Mt(s,e.current)),ge=null;return}}catch(f){if(d!==null)throw ge=d,f;Ve=1,Ei(e,Mt(s,e.current)),ge=null;return}t.flags&32768?(_e||l===1?e=!0:rs||(be&536870912)!==0?e=!1:(qa=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ct.current,l!==null&&l.tag===13&&(l.flags|=16384))),dm(t,e)):$i(t)}function $i(e){var t=e;do{if((t.flags&32768)!==0){dm(t,qa);return}e=t.return;var s=fv(t.alternate,t,xa);if(s!==null){ge=s;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);Ve===0&&(Ve=5)}function dm(e,t){do{var s=mv(e.alternate,e);if(s!==null){s.flags&=32767,ge=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){ge=e;return}ge=e=s}while(e!==null);Ve=6,ge=null}function hm(e,t,s,l,d,f,y,_,E){e.cancelPendingCommit=null;do Hi();while(Je!==0);if((je&6)!==0)throw Error(n(327));if(t!==null){if(t===e.current)throw Error(n(177));if(f=t.lanes|t.childLanes,f|=mo,t0(e,s,f,y,_,E),e===Me&&(ge=Me=null,be=0),ns=t,Ha=e,wa=s,_c=f,Sc=d,tm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Nv(Fn,function(){return ym(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=L.T,L.T=null,d=Q.p,Q.p=2,y=je,je|=4;try{pv(e,t,s)}finally{je=y,Q.p=d,L.T=l}}Je=1,fm(),mm(),pm()}}function fm(){if(Je===1){Je=0;var e=Ha,t=ns,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=L.T,L.T=null;var l=Q.p;Q.p=2;var d=je;je|=4;try{Yf(t,e);var f=Bc,y=Jd(e.containerInfo),_=f.focusedElem,E=f.selectionRange;if(y!==_&&_&&_.ownerDocument&&Wd(_.ownerDocument.documentElement,_)){if(E!==null&&oo(_)){var M=E.start,q=E.end;if(q===void 0&&(q=M),"selectionStart"in _)_.selectionStart=M,_.selectionEnd=Math.min(q,_.value.length);else{var H=_.ownerDocument||document,U=H&&H.defaultView||window;if(U.getSelection){var z=U.getSelection(),Z=_.textContent.length,le=Math.min(E.start,Z),De=E.end===void 0?le:Math.min(E.end,Z);!z.extend&&le>De&&(y=De,De=le,le=y);var O=Xd(_,le),T=Xd(_,De);if(O&&T&&(z.rangeCount!==1||z.anchorNode!==O.node||z.anchorOffset!==O.offset||z.focusNode!==T.node||z.focusOffset!==T.offset)){var D=H.createRange();D.setStart(O.node,O.offset),z.removeAllRanges(),le>De?(z.addRange(D),z.extend(T.node,T.offset)):(D.setEnd(T.node,T.offset),z.addRange(D))}}}}for(H=[],z=_;z=z.parentNode;)z.nodeType===1&&H.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<H.length;_++){var $=H[_];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}el=!!Lc,Bc=Lc=null}finally{je=d,Q.p=l,L.T=s}}e.current=t,Je=2}}function mm(){if(Je===2){Je=0;var e=Ha,t=ns,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=L.T,L.T=null;var l=Q.p;Q.p=2;var d=je;je|=4;try{Hf(e,t.alternate,t)}finally{je=d,Q.p=l,L.T=s}}Je=3}}function pm(){if(Je===4||Je===3){Je=0,Iy();var e=Ha,t=ns,s=wa,l=tm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Je=5:(Je=0,ns=Ha=null,gm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&($a=null),Vl(s),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Os,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=L.T,d=Q.p,Q.p=2,L.T=null;try{for(var f=e.onRecoverableError,y=0;y<l.length;y++){var _=l[y];f(_.value,{componentStack:_.stack})}}finally{L.T=t,Q.p=d}}(wa&3)!==0&&Hi(),ta(e),d=e.pendingLanes,(s&261930)!==0&&(d&42)!==0?e===Cc?mn++:(mn=0,Cc=e):mn=0,pn(0)}}function gm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Qs(t)))}function Hi(){return fm(),mm(),pm(),ym()}function ym(){if(Je!==5)return!1;var e=Ha,t=_c;_c=0;var s=Vl(wa),l=L.T,d=Q.p;try{Q.p=32>s?32:s,L.T=null,s=Sc,Sc=null;var f=Ha,y=wa;if(Je=0,ns=Ha=null,wa=0,(je&6)!==0)throw Error(n(331));var _=je;if(je|=4,Jf(f.current),Kf(f,f.current,y,s),je=_,pn(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Os,f)}catch{}return!0}finally{Q.p=d,L.T=l,gm(e,t)}}function vm(e,t,s){t=Mt(s,t),t=ac(e.stateNode,t,2),e=Ua(e,t,2),e!==null&&(Ms(e,2),ta(e))}function Re(e,t,s){if(e.tag===3)vm(e,e,s);else for(;t!==null;){if(t.tag===3){vm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($a===null||!$a.has(l))){e=Mt(s,e),s=bf(2),l=Ua(t,s,2),l!==null&&(xf(s,l,t,e),Ms(l,2),ta(l));break}}t=t.return}}function Ac(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new vv;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(s)||(bc=!0,d.add(s),e=Sv.bind(null,e,t,s),t.then(e,e))}function Sv(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Me===e&&(be&s)===s&&(Ve===4||Ve===3&&(be&62914560)===be&&300>bt()-zi?(je&2)===0&&is(e,0):xc|=s,ss===be&&(ss=0)),ta(e)}function bm(e,t){t===0&&(t=hd()),e=lr(e,t),e!==null&&(Ms(e,t),ta(e))}function Cv(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),bm(e,s)}function jv(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(n(314))}l!==null&&l.delete(t),bm(e,s)}function Nv(e,t){return ql(e,t)}var Vi=null,os=null,Ec=!1,Fi=!1,Rc=!1,Fa=0;function ta(e){e!==os&&e.next===null&&(os===null?Vi=os=e:os=os.next=e),Fi=!0,Ec||(Ec=!0,Ev())}function pn(e,t){if(!Rc&&Fi){Rc=!0;do for(var s=!1,l=Vi;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var y=l.suspendedLanes,_=l.pingedLanes;f=(1<<31-wt(42|e)+1)-1,f&=d&~(y&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,Sm(l,f))}else f=be,f=Qn(l,l===Me?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ds(l,f)||(s=!0,Sm(l,f));l=l.next}while(s);Rc=!1}}function Av(){xm()}function xm(){Fi=Ec=!1;var e=0;Fa!==0&&Bv()&&(e=Fa);for(var t=bt(),s=null,l=Vi;l!==null;){var d=l.next,f=wm(l,t);f===0?(l.next=null,s===null?Vi=d:s.next=d,d===null&&(os=s)):(s=l,(e!==0||(f&3)!==0)&&(Fi=!0)),l=d}Je!==0&&Je!==5||pn(e),Fa!==0&&(Fa=0)}function wm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-wt(f),_=1<<y,E=d[y];E===-1?((_&s)===0||(_&l)!==0)&&(d[y]=e0(_,t)):E<=t&&(e.expiredLanes|=_),f&=~_}if(t=Me,s=be,s=Qn(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Pl(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Ds(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&Pl(l),Vl(s)){case 2:case 8:s=ud;break;case 32:s=Fn;break;case 268435456:s=dd;break;default:s=Fn}return l=_m.bind(null,e),s=ql(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&Pl(l),e.callbackPriority=2,e.callbackNode=null,2}function _m(e,t){if(Je!==0&&Je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Hi()&&e.callbackNode!==s)return null;var l=be;return l=Qn(e,e===Me?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(rm(e,l,t),wm(e,bt()),e.callbackNode!=null&&e.callbackNode===s?_m.bind(null,e):null)}function Sm(e,t){if(Hi())return null;rm(e,t,!0)}function Ev(){Pv(function(){(je&6)!==0?ql(cd,Av):xm()})}function Tc(){if(Fa===0){var e=Yr;e===0&&(e=Gn,Gn<<=1,(Gn&261888)===0&&(Gn=256)),Fa=e}return Fa}function Cm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jn(""+e)}function jm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Rv(e,t,s,l,d){if(t==="submit"&&s&&s.stateNode===d){var f=Cm((d[ht]||null).action),y=l.submitter;y&&(t=(t=y[ht]||null)?Cm(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var _=new ai("action","action",null,l,d);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Fa!==0){var E=y?jm(d,y):new FormData(d);Xo(s,{pending:!0,data:E,method:d.method,action:f},null,E)}}else typeof f=="function"&&(_.preventDefault(),E=y?jm(d,y):new FormData(d),Xo(s,{pending:!0,data:E,method:d.method,action:f},f,E))},currentTarget:d}]})}}for(var kc=0;kc<fo.length;kc++){var Oc=fo[kc],Tv=Oc.toLowerCase(),kv=Oc[0].toUpperCase()+Oc.slice(1);$t(Tv,"on"+kv)}$t(th,"onAnimationEnd"),$t(ah,"onAnimationIteration"),$t(rh,"onAnimationStart"),$t("dblclick","onDoubleClick"),$t("focusin","onFocus"),$t("focusout","onBlur"),$t(Y0,"onTransitionRun"),$t(Q0,"onTransitionStart"),$t(K0,"onTransitionCancel"),$t(sh,"onTransitionEnd"),Dr("onMouseEnter",["mouseout","mouseover"]),Dr("onMouseLeave",["mouseout","mouseover"]),Dr("onPointerEnter",["pointerout","pointerover"]),Dr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ov=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gn));function Nm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var y=l.length-1;0<=y;y--){var _=l[y],E=_.instance,M=_.currentTarget;if(_=_.listener,E!==f&&d.isPropagationStopped())break e;f=_,d.currentTarget=M;try{f(d)}catch(q){ni(q)}d.currentTarget=null,f=E}else for(y=0;y<l.length;y++){if(_=l[y],E=_.instance,M=_.currentTarget,_=_.listener,E!==f&&d.isPropagationStopped())break e;f=_,d.currentTarget=M;try{f(d)}catch(q){ni(q)}d.currentTarget=null,f=E}}}}function ye(e,t){var s=t[Fl];s===void 0&&(s=t[Fl]=new Set);var l=e+"__bubble";s.has(l)||(Am(t,e,2,!1),s.add(l))}function Dc(e,t,s){var l=0;t&&(l|=4),Am(s,e,l,t)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function Mc(e){if(!e[Gi]){e[Gi]=!0,bd.forEach(function(s){s!=="selectionchange"&&(Ov.has(s)||Dc(s,!1,e),Dc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gi]||(t[Gi]=!0,Dc("selectionchange",!1,t))}}function Am(e,t,s,l){switch(ap(t)){case 2:var d=ib;break;case 8:d=lb;break;default:d=Kc}s=d.bind(null,t,s,e),d=void 0,!Zl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function Uc(e,t,s,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var _=l.stateNode.containerInfo;if(_===d)break;if(y===4)for(y=l.return;y!==null;){var E=y.tag;if((E===3||E===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;_!==null;){if(y=Tr(_),y===null)return;if(E=y.tag,E===5||E===6||E===26||E===27){l=f=y;continue e}_=_.parentNode}}l=l.return}kd(function(){var M=f,q=Wl(s),H=[];e:{var U=nh.get(e);if(U!==void 0){var z=ai,Z=e;switch(e){case"keypress":if(ei(s)===0)break e;case"keydown":case"keyup":z=j0;break;case"focusin":Z="focus",z=ro;break;case"focusout":Z="blur",z=ro;break;case"beforeblur":case"afterblur":z=ro;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=E0;break;case th:case ah:case rh:z=g0;break;case sh:z=T0;break;case"scroll":case"scrollend":z=d0;break;case"wheel":z=O0;break;case"copy":case"cut":case"paste":z=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=zd;break;case"toggle":case"beforetoggle":z=M0}var le=(t&4)!==0,De=!le&&(e==="scroll"||e==="scrollend"),O=le?U!==null?U+"Capture":null:U;le=[];for(var T=M,D;T!==null;){var $=T;if(D=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||D===null||O===null||($=Ls(T,O),$!=null&&le.push(yn(T,$,D))),De)break;T=T.return}0<le.length&&(U=new z(U,Z,null,s,q),H.push({event:U,listeners:le}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",U&&s!==Xl&&(Z=s.relatedTarget||s.fromElement)&&(Tr(Z)||Z[Rr]))break e;if((z||U)&&(U=q.window===q?q:(U=q.ownerDocument)?U.defaultView||U.parentWindow:window,z?(Z=s.relatedTarget||s.toElement,z=M,Z=Z?Tr(Z):null,Z!==null&&(De=c(Z),le=Z.tag,Z!==De||le!==5&&le!==27&&le!==6)&&(Z=null)):(z=null,Z=M),z!==Z)){if(le=Md,$="onMouseLeave",O="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(le=zd,$="onPointerLeave",O="onPointerEnter",T="pointer"),De=z==null?U:zs(z),D=Z==null?U:zs(Z),U=new le($,T+"leave",z,s,q),U.target=De,U.relatedTarget=D,$=null,Tr(q)===M&&(le=new le(O,T+"enter",Z,s,q),le.target=D,le.relatedTarget=De,$=le),De=$,z&&Z)t:{for(le=Dv,O=z,T=Z,D=0,$=O;$;$=le($))D++;$=0;for(var ne=T;ne;ne=le(ne))$++;for(;0<D-$;)O=le(O),D--;for(;0<$-D;)T=le(T),$--;for(;D--;){if(O===T||T!==null&&O===T.alternate){le=O;break t}O=le(O),T=le(T)}le=null}else le=null;z!==null&&Em(H,U,z,le,!1),Z!==null&&De!==null&&Em(H,De,Z,le,!0)}}e:{if(U=M?zs(M):window,z=U.nodeName&&U.nodeName.toLowerCase(),z==="select"||z==="input"&&U.type==="file")var Se=Fd;else if(Hd(U))if(Gd)Se=F0;else{Se=H0;var ee=$0}else z=U.nodeName,!z||z.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?M&&Kl(M.elementType)&&(Se=Fd):Se=V0;if(Se&&(Se=Se(e,M))){Vd(H,Se,s,q);break e}ee&&ee(e,U,M),e==="focusout"&&M&&U.type==="number"&&M.memoizedProps.value!=null&&Ql(U,"number",U.value)}switch(ee=M?zs(M):window,e){case"focusin":(Hd(ee)||ee.contentEditable==="true")&&(qr=ee,co=M,Gs=null);break;case"focusout":Gs=co=qr=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,Zd(H,s,q);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":Zd(H,s,q)}var fe;if(no)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Br?Pd(e,s)&&(xe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(xe="onCompositionStart");xe&&(Ld&&s.locale!=="ko"&&(Br||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Br&&(fe=Od()):(Ea=q,eo="value"in Ea?Ea.value:Ea.textContent,Br=!0)),ee=Ii(M,xe),0<ee.length&&(xe=new Ud(xe,e,null,s,q),H.push({event:xe,listeners:ee}),fe?xe.data=fe:(fe=$d(s),fe!==null&&(xe.data=fe)))),(fe=z0?L0(e,s):B0(e,s))&&(xe=Ii(M,"onBeforeInput"),0<xe.length&&(ee=new Ud("onBeforeInput","beforeinput",null,s,q),H.push({event:ee,listeners:xe}),ee.data=fe)),Rv(H,e,M,s,q)}Nm(H,t)})}function yn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Ii(e,t){for(var s=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Ls(e,s),d!=null&&l.unshift(yn(e,d,f)),d=Ls(e,t),d!=null&&l.push(yn(e,d,f))),e.tag===3)return l;e=e.return}return[]}function Dv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Em(e,t,s,l,d){for(var f=t._reactName,y=[];s!==null&&s!==l;){var _=s,E=_.alternate,M=_.stateNode;if(_=_.tag,E!==null&&E===l)break;_!==5&&_!==26&&_!==27||M===null||(E=M,d?(M=Ls(s,f),M!=null&&y.unshift(yn(s,M,E))):d||(M=Ls(s,f),M!=null&&y.push(yn(s,M,E)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var Mv=/\r\n?/g,Uv=/\u0000|\uFFFD/g;function Rm(e){return(typeof e=="string"?e:""+e).replace(Mv,`
`).replace(Uv,"")}function Tm(e,t){return t=Rm(t),Rm(e)===t}function Oe(e,t,s,l,d,f){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Ur(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Ur(e,""+l);break;case"className":Xn(e,"class",l);break;case"tabIndex":Xn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(e,s,l);break;case"style":Rd(e,l,f);break;case"data":if(t!=="object"){Xn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Jn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(t!=="input"&&Oe(e,t,"name",d.name,d,null),Oe(e,t,"formEncType",d.formEncType,d,null),Oe(e,t,"formMethod",d.formMethod,d,null),Oe(e,t,"formTarget",d.formTarget,d,null)):(Oe(e,t,"encType",d.encType,d,null),Oe(e,t,"method",d.method,d,null),Oe(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Jn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=ia);break;case"onScroll":l!=null&&ye("scroll",e);break;case"onScrollEnd":l!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(n(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Jn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":ye("beforetoggle",e),ye("toggle",e),Kn(e,"popover",l);break;case"xlinkActuate":na(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":na(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":na(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":na(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":na(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":na(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":na(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":na(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":na(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Kn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=c0.get(s)||s,Kn(e,s,l))}}function zc(e,t,s,l,d,f){switch(s){case"style":Rd(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(n(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Ur(e,l):(typeof l=="number"||typeof l=="bigint")&&Ur(e,""+l);break;case"onScroll":l!=null&&ye("scroll",e);break;case"onScrollEnd":l!=null&&ye("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),t=s.slice(2,d?s.length-7:void 0),f=e[ht]||null,f=f!=null?f[s]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,d);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Kn(e,s,l)}}}function ot(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var l=!1,d=!1,f;for(f in s)if(s.hasOwnProperty(f)){var y=s[f];if(y!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,t));default:Oe(e,t,f,y,s,null)}}d&&Oe(e,t,"srcSet",s.srcSet,s,null),l&&Oe(e,t,"src",s.src,s,null);return;case"input":ye("invalid",e);var _=f=y=d=null,E=null,M=null;for(l in s)if(s.hasOwnProperty(l)){var q=s[l];if(q!=null)switch(l){case"name":d=q;break;case"type":y=q;break;case"checked":E=q;break;case"defaultChecked":M=q;break;case"value":f=q;break;case"defaultValue":_=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,t));break;default:Oe(e,t,l,q,s,null)}}jd(e,f,_,E,M,y,d,!1);return;case"select":ye("invalid",e),l=y=f=null;for(d in s)if(s.hasOwnProperty(d)&&(_=s[d],_!=null))switch(d){case"value":f=_;break;case"defaultValue":y=_;break;case"multiple":l=_;default:Oe(e,t,d,_,s,null)}t=f,s=y,e.multiple=!!l,t!=null?Mr(e,!!l,t,!1):s!=null&&Mr(e,!!l,s,!0);return;case"textarea":ye("invalid",e),f=d=l=null;for(y in s)if(s.hasOwnProperty(y)&&(_=s[y],_!=null))switch(y){case"value":l=_;break;case"defaultValue":d=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:Oe(e,t,y,_,s,null)}Ad(e,l,d,f);return;case"option":for(E in s)if(s.hasOwnProperty(E)&&(l=s[E],l!=null))switch(E){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Oe(e,t,E,l,s,null)}return;case"dialog":ye("beforetoggle",e),ye("toggle",e),ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(l=0;l<gn.length;l++)ye(gn[l],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in s)if(s.hasOwnProperty(M)&&(l=s[M],l!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,t));default:Oe(e,t,M,l,s,null)}return;default:if(Kl(t)){for(q in s)s.hasOwnProperty(q)&&(l=s[q],l!==void 0&&zc(e,t,q,l,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(l=s[_],l!=null&&Oe(e,t,_,l,s,null))}function zv(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,y=null,_=null,E=null,M=null,q=null;for(z in s){var H=s[z];if(s.hasOwnProperty(z)&&H!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":E=H;default:l.hasOwnProperty(z)||Oe(e,t,z,null,l,H)}}for(var U in l){var z=l[U];if(H=s[U],l.hasOwnProperty(U)&&(z!=null||H!=null))switch(U){case"type":f=z;break;case"name":d=z;break;case"checked":M=z;break;case"defaultChecked":q=z;break;case"value":y=z;break;case"defaultValue":_=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(n(137,t));break;default:z!==H&&Oe(e,t,U,z,l,H)}}Yl(e,y,_,E,M,q,f,d);return;case"select":z=y=_=U=null;for(f in s)if(E=s[f],s.hasOwnProperty(f)&&E!=null)switch(f){case"value":break;case"multiple":z=E;default:l.hasOwnProperty(f)||Oe(e,t,f,null,l,E)}for(d in l)if(f=l[d],E=s[d],l.hasOwnProperty(d)&&(f!=null||E!=null))switch(d){case"value":U=f;break;case"defaultValue":_=f;break;case"multiple":y=f;default:f!==E&&Oe(e,t,d,f,l,E)}t=_,s=y,l=z,U!=null?Mr(e,!!s,U,!1):!!l!=!!s&&(t!=null?Mr(e,!!s,t,!0):Mr(e,!!s,s?[]:"",!1));return;case"textarea":z=U=null;for(_ in s)if(d=s[_],s.hasOwnProperty(_)&&d!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Oe(e,t,_,null,l,d)}for(y in l)if(d=l[y],f=s[y],l.hasOwnProperty(y)&&(d!=null||f!=null))switch(y){case"value":U=d;break;case"defaultValue":z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==f&&Oe(e,t,y,d,l,f)}Nd(e,U,z);return;case"option":for(var Z in s)if(U=s[Z],s.hasOwnProperty(Z)&&U!=null&&!l.hasOwnProperty(Z))switch(Z){case"selected":e.selected=!1;break;default:Oe(e,t,Z,null,l,U)}for(E in l)if(U=l[E],z=s[E],l.hasOwnProperty(E)&&U!==z&&(U!=null||z!=null))switch(E){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Oe(e,t,E,U,l,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in s)U=s[le],s.hasOwnProperty(le)&&U!=null&&!l.hasOwnProperty(le)&&Oe(e,t,le,null,l,U);for(M in l)if(U=l[M],z=s[M],l.hasOwnProperty(M)&&U!==z&&(U!=null||z!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(137,t));break;default:Oe(e,t,M,U,l,z)}return;default:if(Kl(t)){for(var De in s)U=s[De],s.hasOwnProperty(De)&&U!==void 0&&!l.hasOwnProperty(De)&&zc(e,t,De,void 0,l,U);for(q in l)U=l[q],z=s[q],!l.hasOwnProperty(q)||U===z||U===void 0&&z===void 0||zc(e,t,q,U,l,z);return}}for(var O in s)U=s[O],s.hasOwnProperty(O)&&U!=null&&!l.hasOwnProperty(O)&&Oe(e,t,O,null,l,U);for(H in l)U=l[H],z=s[H],!l.hasOwnProperty(H)||U===z||U==null&&z==null||Oe(e,t,H,U,l,z)}function km(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var d=s[l],f=d.transferSize,y=d.initiatorType,_=d.duration;if(f&&_&&km(y)){for(y=0,_=d.responseEnd,l+=1;l<s.length;l++){var E=s[l],M=E.startTime;if(M>_)break;var q=E.transferSize,H=E.initiatorType;q&&km(H)&&(E=E.responseEnd,y+=q*(E<_?1:(_-M)/(E-M)))}if(--l,t+=8*(f+y)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Lc=null,Bc=null;function Yi(e){return e.nodeType===9?e:e.ownerDocument}function Om(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function qc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pc=null;function Bv(){var e=window.event;return e&&e.type==="popstate"?e===Pc?!1:(Pc=e,!0):(Pc=null,!1)}var Mm=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,Pv=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(e){return Um.resolve(null).then(e).catch($v)}:Mm;function $v(e){setTimeout(function(){throw e})}function Ga(e){return e==="head"}function zm(e,t){var s=t,l=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(d),hs(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")vn(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,vn(s);for(var f=s.firstChild;f;){var y=f.nextSibling,_=f.nodeName;f[Us]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=y}}else s==="body"&&vn(e.ownerDocument.body);s=d}while(s);hs(t)}function Lm(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function $c(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":$c(s),Gl(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Hv(e,t,s,l){for(;e.nodeType===1;){var d=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Us])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=qt(e.nextSibling),e===null)break}return null}function Vv(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=qt(e.nextSibling),e===null))return null;return e}function Bm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=qt(e.nextSibling),e===null))return null;return e}function Hc(e){return e.data==="$?"||e.data==="$~"}function Vc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Fv(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fc=null;function qm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return qt(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Pm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function $m(e,t,s){switch(t=Yi(s),e){case"html":if(e=t.documentElement,!e)throw Error(n(452));return e;case"head":if(e=t.head,!e)throw Error(n(453));return e;case"body":if(e=t.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function vn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Gl(e)}var Pt=new Map,Hm=new Set;function Qi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _a=Q.d;Q.d={f:Gv,r:Iv,D:Yv,C:Qv,L:Kv,m:Xv,X:Jv,S:Wv,M:Zv};function Gv(){var e=_a.f(),t=qi();return e||t}function Iv(e){var t=kr(e);t!==null&&t.tag===5&&t.type==="form"?sf(t):_a.r(e)}var cs=typeof document>"u"?null:document;function Vm(e,t,s){var l=cs;if(l&&typeof t=="string"&&t){var d=Ot(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),Hm.has(d)||(Hm.add(d),e={rel:e,crossOrigin:s,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),ot(t,"link",e),tt(t),l.head.appendChild(t)))}}function Yv(e){_a.D(e),Vm("dns-prefetch",e,null)}function Qv(e,t){_a.C(e,t),Vm("preconnect",e,t)}function Kv(e,t,s){_a.L(e,t,s);var l=cs;if(l&&e&&t){var d='link[rel="preload"][as="'+Ot(t)+'"]';t==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+Ot(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+Ot(s.imageSizes)+'"]')):d+='[href="'+Ot(e)+'"]';var f=d;switch(t){case"style":f=us(e);break;case"script":f=ds(e)}Pt.has(f)||(e=b({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Pt.set(f,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(bn(f))||t==="script"&&l.querySelector(xn(f))||(t=l.createElement("link"),ot(t,"link",e),tt(t),l.head.appendChild(t)))}}function Xv(e,t){_a.m(e,t);var s=cs;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Ot(l)+'"][href="'+Ot(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ds(e)}if(!Pt.has(f)&&(e=b({rel:"modulepreload",href:e},t),Pt.set(f,e),s.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(xn(f)))return}l=s.createElement("link"),ot(l,"link",e),tt(l),s.head.appendChild(l)}}}function Wv(e,t,s){_a.S(e,t,s);var l=cs;if(l&&e){var d=Or(l).hoistableStyles,f=us(e);t=t||"default";var y=d.get(f);if(!y){var _={loading:0,preload:null};if(y=l.querySelector(bn(f)))_.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Pt.get(f))&&Gc(e,s);var E=y=l.createElement("link");tt(E),ot(E,"link",e),E._p=new Promise(function(M,q){E.onload=M,E.onerror=q}),E.addEventListener("load",function(){_.loading|=1}),E.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ki(y,t,l)}y={type:"stylesheet",instance:y,count:1,state:_},d.set(f,y)}}}function Jv(e,t){_a.X(e,t);var s=cs;if(s&&e){var l=Or(s).hoistableScripts,d=ds(e),f=l.get(d);f||(f=s.querySelector(xn(d)),f||(e=b({src:e,async:!0},t),(t=Pt.get(d))&&Ic(e,t),f=s.createElement("script"),tt(f),ot(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Zv(e,t){_a.M(e,t);var s=cs;if(s&&e){var l=Or(s).hoistableScripts,d=ds(e),f=l.get(d);f||(f=s.querySelector(xn(d)),f||(e=b({src:e,async:!0,type:"module"},t),(t=Pt.get(d))&&Ic(e,t),f=s.createElement("script"),tt(f),ot(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Fm(e,t,s,l){var d=(d=ze.current)?Qi(d):null;if(!d)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=us(s.href),s=Or(d).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=us(s.href);var f=Or(d).hoistableStyles,y=f.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=d.querySelector(bn(e)))&&!f._p&&(y.instance=f,y.state.loading=5),Pt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Pt.set(e,s),f||eb(d,e,s,y.state))),t&&l===null)throw Error(n(528,""));return y}if(t&&l!==null)throw Error(n(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ds(s),s=Or(d).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function us(e){return'href="'+Ot(e)+'"'}function bn(e){return'link[rel="stylesheet"]['+e+"]"}function Gm(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function eb(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ot(t,"link",s),tt(t),e.head.appendChild(t))}function ds(e){return'[src="'+Ot(e)+'"]'}function xn(e){return"script[async]"+e}function Im(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Ot(s.href)+'"]');if(l)return t.instance=l,tt(l),l;var d=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),tt(l),ot(l,"style",d),Ki(l,s.precedence,e),t.instance=l;case"stylesheet":d=us(s.href);var f=e.querySelector(bn(d));if(f)return t.state.loading|=4,t.instance=f,tt(f),f;l=Gm(s),(d=Pt.get(d))&&Gc(l,d),f=(e.ownerDocument||e).createElement("link"),tt(f);var y=f;return y._p=new Promise(function(_,E){y.onload=_,y.onerror=E}),ot(f,"link",l),t.state.loading|=4,Ki(f,s.precedence,e),t.instance=f;case"script":return f=ds(s.src),(d=e.querySelector(xn(f)))?(t.instance=d,tt(d),d):(l=s,(d=Pt.get(f))&&(l=b({},s),Ic(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),tt(d),ot(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(n(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ki(l,s.precedence,e));return t.instance}function Ki(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,y=0;y<l.length;y++){var _=l[y];if(_.dataset.precedence===t)f=_;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Gc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ic(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Xi=null;function Ym(e,t,s){if(Xi===null){var l=new Map,d=Xi=new Map;d.set(s,l)}else d=Xi,l=d.get(s),l||(l=new Map,d.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),d=0;d<s.length;d++){var f=s[d];if(!(f[Us]||f[st]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var _=l.get(y);_?_.push(f):l.set(y,[f])}}return l}function Qm(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function tb(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Km(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ab(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=us(l.href),f=t.querySelector(bn(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Wi.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=f,tt(f);return}f=t.ownerDocument||t,l=Gm(l),(d=Pt.get(d))&&Gc(l,d),f=f.createElement("link"),tt(f);var y=f;y._p=new Promise(function(_,E){y.onload=_,y.onerror=E}),ot(f,"link",l),s.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Wi.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Yc=0;function rb(e,t){return e.stylesheets&&e.count===0&&Zi(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&Zi(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Yc===0&&(Yc=62500*Lv());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zi(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Yc?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Wi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ji=null;function Zi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ji=new Map,t.forEach(sb,e),Ji=null,Wi.call(e))}function sb(e,t){if(!(t.state.loading&4)){var s=Ji.get(e);if(s)var l=s.get(null);else{s=new Map,Ji.set(e,s);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var y=d[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),l=y)}l&&s.set(null,l)}d=t.instance,y=d.getAttribute("data-precedence"),f=s.get(y)||l,f===l&&s.set(null,d),s.set(y,d),this.count++,l=Wi.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var wn={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function nb(e,t,s,l,d,f,y,_,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$l(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.hiddenUpdates=$l(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Xm(e,t,s,l,d,f,y,_,E,M,q,H){return e=new nb(e,t,s,y,E,M,q,H,_),t=1,f===!0&&(t|=24),f=St(3,null,null,t),e.current=f,f.stateNode=e,t=No(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:s,cache:t},To(f),e}function Wm(e){return e?(e=Hr,e):Hr}function Jm(e,t,s,l,d,f){d=Wm(d),l.context===null?l.context=d:l.pendingContext=d,l=Ma(t),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=Ua(e,l,t),s!==null&&(vt(s,e,t),Js(s,e,t))}function Zm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Qc(e,t){Zm(e,t),(e=e.alternate)&&Zm(e,t)}function ep(e){if(e.tag===13||e.tag===31){var t=lr(e,67108864);t!==null&&vt(t,e,67108864),Qc(e,67108864)}}function tp(e){if(e.tag===13||e.tag===31){var t=Et();t=Hl(t);var s=lr(e,t);s!==null&&vt(s,e,t),Qc(e,t)}}var el=!0;function ib(e,t,s,l){var d=L.T;L.T=null;var f=Q.p;try{Q.p=2,Kc(e,t,s,l)}finally{Q.p=f,L.T=d}}function lb(e,t,s,l){var d=L.T;L.T=null;var f=Q.p;try{Q.p=8,Kc(e,t,s,l)}finally{Q.p=f,L.T=d}}function Kc(e,t,s,l){if(el){var d=Xc(l);if(d===null)Uc(e,t,l,tl,s),rp(e,l);else if(cb(d,e,t,s,l))l.stopPropagation();else if(rp(e,l),t&4&&-1<ob.indexOf(e)){for(;d!==null;){var f=kr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=ar(f.pendingLanes);if(y!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;y;){var E=1<<31-wt(y);_.entanglements[1]|=E,y&=~E}ta(f),(je&6)===0&&(Li=bt()+500,pn(0))}}break;case 31:case 13:_=lr(f,2),_!==null&&vt(_,f,2),qi(),Qc(f,2)}if(f=Xc(l),f===null&&Uc(e,t,l,tl,s),f===d)break;d=f}d!==null&&l.stopPropagation()}else Uc(e,t,l,null,s)}}function Xc(e){return e=Wl(e),Wc(e)}var tl=null;function Wc(e){if(tl=null,e=Tr(e),e!==null){var t=c(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=h(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tl=e,null}function ap(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yy()){case cd:return 2;case ud:return 8;case Fn:case Qy:return 32;case dd:return 268435456;default:return 32}default:return 32}}var Jc=!1,Ia=null,Ya=null,Qa=null,_n=new Map,Sn=new Map,Ka=[],ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rp(e,t){switch(e){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":_n.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(t.pointerId)}}function Cn(e,t,s,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=kr(t),t!==null&&ep(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function cb(e,t,s,l,d){switch(t){case"focusin":return Ia=Cn(Ia,e,t,s,l,d),!0;case"dragenter":return Ya=Cn(Ya,e,t,s,l,d),!0;case"mouseover":return Qa=Cn(Qa,e,t,s,l,d),!0;case"pointerover":var f=d.pointerId;return _n.set(f,Cn(_n.get(f)||null,e,t,s,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Sn.set(f,Cn(Sn.get(f)||null,e,t,s,l,d)),!0}return!1}function sp(e){var t=Tr(e.target);if(t!==null){var s=c(t);if(s!==null){if(t=s.tag,t===13){if(t=h(s),t!==null){e.blockedOn=t,yd(e.priority,function(){tp(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,yd(e.priority,function(){tp(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function al(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Xc(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Xl=l,s.target.dispatchEvent(l),Xl=null}else return t=kr(s),t!==null&&ep(t),e.blockedOn=s,!1;t.shift()}return!0}function np(e,t,s){al(e)&&s.delete(t)}function ub(){Jc=!1,Ia!==null&&al(Ia)&&(Ia=null),Ya!==null&&al(Ya)&&(Ya=null),Qa!==null&&al(Qa)&&(Qa=null),_n.forEach(np),Sn.forEach(np)}function rl(e,t){e.blockedOn===t&&(e.blockedOn=null,Jc||(Jc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ub)))}var sl=null;function ip(e){sl!==e&&(sl=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sl===e&&(sl=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Wc(l||s)===null)continue;break}var f=kr(s);f!==null&&(e.splice(t,3),t-=3,Xo(f,{pending:!0,data:d,method:s.method,action:l},l,d))}}))}function hs(e){function t(E){return rl(E,e)}Ia!==null&&rl(Ia,e),Ya!==null&&rl(Ya,e),Qa!==null&&rl(Qa,e),_n.forEach(t),Sn.forEach(t);for(var s=0;s<Ka.length;s++){var l=Ka[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ka.length&&(s=Ka[0],s.blockedOn===null);)sp(s),s.blockedOn===null&&Ka.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var d=s[l],f=s[l+1],y=d[ht]||null;if(typeof f=="function")y||ip(s);else if(y){var _=null;if(f&&f.hasAttribute("formAction")){if(d=f,y=f[ht]||null)_=y.formAction;else if(Wc(d)!==null)continue}else _=y.action;typeof _=="function"?s[l+1]=_:(s.splice(l,3),l-=3),ip(s)}}}function lp(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return d=y})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Zc(e){this._internalRoot=e}nl.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));var s=t.current,l=Et();Jm(s,l,e,t,null,null)},nl.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jm(e.current,2,null,e,null,null),qi(),t[Rr]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=gd();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ka.length&&t!==0&&t<Ka[s].priority;s++);Ka.splice(s,0,e),s===0&&sp(e)}};var op=a.version;if(op!=="19.2.0")throw Error(n(527,op,"19.2.0"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=g(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var db={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{Os=il.inject(db),xt=il}catch{}}return Nn.createRoot=function(e,t){if(!o(e))throw Error(n(299));var s=!1,l="",d=pf,f=gf,y=yf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Xm(e,1,!1,null,null,s,l,null,d,f,y,lp),e[Rr]=t.current,Mc(e),new Zc(t)},Nn.hydrateRoot=function(e,t,s){if(!o(e))throw Error(n(299));var l=!1,d="",f=pf,y=gf,_=yf,E=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.formState!==void 0&&(E=s.formState)),t=Xm(e,1,!0,t,s??null,l,d,E,f,y,_,lp),t.context=Wm(null),s=t.current,l=Et(),l=Hl(l),d=Ma(l),d.callback=null,Ua(s,d,l),s=l,t.current.lanes=s,Ms(t,s),ta(t),e[Rr]=t.current,Mc(e),new nl(t)},Nn.version="19.2.0",Nn}var yp;function Kb(){if(yp)return ru.exports;yp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),ru.exports=Qb(),ru.exports}var Xb=Kb();const Wb=_g(Xb);var vp="popstate";function Jb(i={}){function a(n,o){let{pathname:c,search:h,hash:m}=n.location;return Cu("",{pathname:c,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:Dn(o)}return ex(a,r,null,i)}function Pe(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function Kt(i,a){if(!i){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Zb(){return Math.random().toString(36).substring(2,10)}function bp(i,a){return{usr:i.state,key:i.key,idx:a}}function Cu(i,a,r=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof a=="string"?Cs(a):a,state:r,key:a&&a.key||n||Zb()}}function Dn({pathname:i="/",search:a="",hash:r=""}){return a&&a!=="?"&&(i+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function Cs(i){let a={};if(i){let r=i.indexOf("#");r>=0&&(a.hash=i.substring(r),i=i.substring(0,r));let n=i.indexOf("?");n>=0&&(a.search=i.substring(n),i=i.substring(0,n)),i&&(a.pathname=i)}return a}function ex(i,a,r,n={}){let{window:o=document.defaultView,v5Compat:c=!1}=n,h=o.history,m="POP",p=null,g=v();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function v(){return(h.state||{idx:null}).idx}function b(){m="POP";let j=v(),A=j==null?null:j-g;g=j,p&&p({action:m,location:N.location,delta:A})}function x(j,A){m="PUSH";let R=Cu(N.location,j,A);g=v()+1;let k=bp(R,g),B=N.createHref(R);try{h.pushState(k,"",B)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(B)}c&&p&&p({action:m,location:N.location,delta:1})}function w(j,A){m="REPLACE";let R=Cu(N.location,j,A);g=v();let k=bp(R,g),B=N.createHref(R);h.replaceState(k,"",B),c&&p&&p({action:m,location:N.location,delta:0})}function S(j){return tx(j)}let N={get action(){return m},get location(){return i(o,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(vp,b),p=j,()=>{o.removeEventListener(vp,b),p=null}},createHref(j){return a(o,j)},createURL:S,encodeLocation(j){let A=S(j);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:w,go(j){return h.go(j)}};return N}function tx(i,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Pe(r,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Dn(i);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Sg(i,a,r="/"){return ax(i,a,r,!1)}function ax(i,a,r,n){let o=typeof a=="string"?Cs(a):a,c=ja(o.pathname||"/",r);if(c==null)return null;let h=Cg(i);rx(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=mx(c);m=hx(h[p],g,n)}return m}function Cg(i,a=[],r=[],n="",o=!1){let c=(h,m,p=o,g)=>{let v={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&p)return;Pe(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let b=Ca([n,v.relativePath]),x=r.concat(v);h.children&&h.children.length>0&&(Pe(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Cg(h.children,a,x,b,p)),!(h.path==null&&!h.index)&&a.push({path:b,score:ux(b,h.index),routesMeta:x})};return i.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))c(h,m);else for(let p of jg(h.path))c(h,m,!0,p)}),a}function jg(i){let a=i.split("/");if(a.length===0)return[];let[r,...n]=a,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(n.length===0)return o?[c,""]:[c];let h=jg(n.join("/")),m=[];return m.push(...h.map(p=>p===""?c:[c,p].join("/"))),o&&m.push(...h),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function rx(i){i.sort((a,r)=>a.score!==r.score?r.score-a.score:dx(a.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var sx=/^:[\w-]+$/,nx=3,ix=2,lx=1,ox=10,cx=-2,xp=i=>i==="*";function ux(i,a){let r=i.split("/"),n=r.length;return r.some(xp)&&(n+=cx),a&&(n+=ix),r.filter(o=>!xp(o)).reduce((o,c)=>o+(sx.test(c)?nx:c===""?lx:ox),n)}function dx(i,a){return i.length===a.length&&i.slice(0,-1).every((n,o)=>n===a[o])?i[i.length-1]-a[a.length-1]:0}function hx(i,a,r=!1){let{routesMeta:n}=i,o={},c="/",h=[];for(let m=0;m<n.length;++m){let p=n[m],g=m===n.length-1,v=c==="/"?a:a.slice(c.length)||"/",b=wl({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),x=p.route;if(!b&&g&&r&&!n[n.length-1].route.index&&(b=wl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),h.push({params:o,pathname:Ca([c,b.pathname]),pathnameBase:vx(Ca([c,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(c=Ca([c,b.pathnameBase]))}return h}function wl(i,a){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,n]=fx(i.path,i.caseSensitive,i.end),o=a.match(r);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:n.reduce((g,{paramName:v,isOptional:b},x)=>{if(v==="*"){let S=m[x]||"";h=c.slice(0,c.length-S.length).replace(/(.)\/+$/,"$1")}const w=m[x];return b&&!w?g[v]=void 0:g[v]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:h,pattern:i}}function fx(i,a=!1,r=!0){Kt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(n.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),n]}function mx(i){try{return i.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Kt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),i}}function ja(i,a){if(a==="/")return i;if(!i.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,n=i.charAt(r);return n&&n!=="/"?null:i.slice(r)||"/"}function px(i,a="/"){let{pathname:r,search:n="",hash:o=""}=typeof i=="string"?Cs(i):i;return{pathname:r?r.startsWith("/")?r:gx(r,a):a,search:bx(n),hash:xx(o)}}function gx(i,a){let r=a.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function iu(i,a,r,n){return`Cannot include a '${i}' character in a manually specified \`to.${a}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yx(i){return i.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function Vu(i){let a=yx(i);return a.map((r,n)=>n===a.length-1?r.pathname:r.pathnameBase)}function Fu(i,a,r,n=!1){let o;typeof i=="string"?o=Cs(i):(o={...i},Pe(!o.pathname||!o.pathname.includes("?"),iu("?","pathname","search",o)),Pe(!o.pathname||!o.pathname.includes("#"),iu("#","pathname","hash",o)),Pe(!o.search||!o.search.includes("#"),iu("#","search","hash",o)));let c=i===""||o.pathname==="",h=c?"/":o.pathname,m;if(h==null)m=r;else{let b=a.length-1;if(!n&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),b-=1;o.pathname=x.join("/")}m=b>=0?a[b]:"/"}let p=px(o,m),g=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ca=i=>i.join("/").replace(/\/\/+/g,"/"),vx=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),bx=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,xx=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function wx(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ng=["POST","PUT","PATCH","DELETE"];new Set(Ng);var _x=["GET",...Ng];new Set(_x);var js=C.createContext(null);js.displayName="DataRouter";var kl=C.createContext(null);kl.displayName="DataRouterState";C.createContext(!1);var Ag=C.createContext({isTransitioning:!1});Ag.displayName="ViewTransition";var Sx=C.createContext(new Map);Sx.displayName="Fetchers";var Cx=C.createContext(null);Cx.displayName="Await";var Xt=C.createContext(null);Xt.displayName="Navigation";var qn=C.createContext(null);qn.displayName="Location";var Wt=C.createContext({outlet:null,matches:[],isDataRoute:!1});Wt.displayName="Route";var Gu=C.createContext(null);Gu.displayName="RouteError";function jx(i,{relative:a}={}){Pe(Ns(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(Xt),{hash:o,pathname:c,search:h}=$n(i,{relative:a}),m=c;return r!=="/"&&(m=c==="/"?r:Ca([r,c])),n.createHref({pathname:m,search:h,hash:o})}function Ns(){return C.useContext(qn)!=null}function aa(){return Pe(Ns(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(qn).location}var Eg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rg(i){C.useContext(Xt).static||C.useLayoutEffect(i)}function Pn(){let{isDataRoute:i}=C.useContext(Wt);return i?qx():Nx()}function Nx(){Pe(Ns(),"useNavigate() may be used only in the context of a <Router> component.");let i=C.useContext(js),{basename:a,navigator:r}=C.useContext(Xt),{matches:n}=C.useContext(Wt),{pathname:o}=aa(),c=JSON.stringify(Vu(n)),h=C.useRef(!1);return Rg(()=>{h.current=!0}),C.useCallback((p,g={})=>{if(Kt(h.current,Eg),!h.current)return;if(typeof p=="number"){r.go(p);return}let v=Fu(p,JSON.parse(c),o,g.relative==="path");i==null&&a!=="/"&&(v.pathname=v.pathname==="/"?a:Ca([a,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[a,r,c,o,i])}C.createContext(null);function Ax(){let{matches:i}=C.useContext(Wt),a=i[i.length-1];return a?a.params:{}}function $n(i,{relative:a}={}){let{matches:r}=C.useContext(Wt),{pathname:n}=aa(),o=JSON.stringify(Vu(r));return C.useMemo(()=>Fu(i,JSON.parse(o),n,a==="path"),[i,o,n,a])}function Ex(i,a){return Tg(i,a)}function Tg(i,a,r,n,o){Pe(Ns(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=C.useContext(Xt),{matches:h}=C.useContext(Wt),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let R=b&&b.path||"";kg(g,!b||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=aa(),w;if(a){let R=typeof a=="string"?Cs(a):a;Pe(v==="/"||R.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${R.pathname}" was given in the \`location\` prop.`),w=R}else w=x;let S=w.pathname||"/",N=S;if(v!=="/"){let R=v.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let j=Sg(i,{pathname:N});Kt(b||j!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Kt(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Dx(j&&j.map(R=>Object.assign({},R,{params:Object.assign({},p,R.params),pathname:Ca([v,c.encodeLocation?c.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?v:Ca([v,c.encodeLocation?c.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),h,r,n,o);return a&&A?C.createElement(qn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},A):A}function Rx(){let i=Bx(),a=wx(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},c={padding:"2px 4px",backgroundColor:n},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},a),r?C.createElement("pre",{style:o},r):null,h)}var Tx=C.createElement(Rx,null),kx=class extends C.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,a){return a.location!==i.location||a.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:a.error,location:a.location,revalidation:i.revalidation||a.revalidation}}componentDidCatch(i,a){this.props.unstable_onError?this.props.unstable_onError(i,a):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?C.createElement(Wt.Provider,{value:this.props.routeContext},C.createElement(Gu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ox({routeContext:i,match:a,children:r}){let n=C.useContext(js);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),C.createElement(Wt.Provider,{value:i},r)}function Dx(i,a=[],r=null,n=null,o=null){if(i==null){if(!r)return null;if(r.errors)i=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let c=i,h=r?.errors;if(h!=null){let g=c.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);Pe(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,g+1))}let m=!1,p=-1;if(r)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:b,errors:x}=r,w=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||w){m=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,v,b)=>{let x,w=!1,S=null,N=null;r&&(x=h&&v.route.id?h[v.route.id]:void 0,S=v.route.errorElement||Tx,m&&(p<0&&b===0?(kg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):p===b&&(w=!0,N=v.route.hydrateFallbackElement||null)));let j=a.concat(c.slice(0,b+1)),A=()=>{let R;return x?R=S:w?R=N:v.route.Component?R=C.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=g,C.createElement(Ox,{match:v,routeContext:{outlet:g,matches:j,isDataRoute:r!=null},children:R})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?C.createElement(kx,{location:r.location,revalidation:r.revalidation,component:S,error:x,children:A(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:n}):A()},null)}function Iu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mx(i){let a=C.useContext(js);return Pe(a,Iu(i)),a}function Ux(i){let a=C.useContext(kl);return Pe(a,Iu(i)),a}function zx(i){let a=C.useContext(Wt);return Pe(a,Iu(i)),a}function Yu(i){let a=zx(i),r=a.matches[a.matches.length-1];return Pe(r.route.id,`${i} can only be used on routes that contain a unique "id"`),r.route.id}function Lx(){return Yu("useRouteId")}function Bx(){let i=C.useContext(Gu),a=Ux("useRouteError"),r=Yu("useRouteError");return i!==void 0?i:a.errors?.[r]}function qx(){let{router:i}=Mx("useNavigate"),a=Yu("useNavigate"),r=C.useRef(!1);return Rg(()=>{r.current=!0}),C.useCallback(async(o,c={})=>{Kt(r.current,Eg),r.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:a,...c}))},[i,a])}var wp={};function kg(i,a,r){!a&&!wp[i]&&(wp[i]=!0,Kt(!1,r))}C.memo(Px);function Px({routes:i,future:a,state:r,unstable_onError:n}){return Tg(i,void 0,r,n,a)}function $x({to:i,replace:a,state:r,relative:n}){Pe(Ns(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Xt);Kt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(Wt),{pathname:h}=aa(),m=Pn(),p=Fu(i,Vu(c),h,n==="path"),g=JSON.stringify(p);return C.useEffect(()=>{m(JSON.parse(g),{replace:a,state:r,relative:n})},[m,g,n,a,r]),null}function vs(i){Pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hx({basename:i="/",children:a=null,location:r,navigationType:n="POP",navigator:o,static:c=!1}){Pe(!Ns(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof r=="string"&&(r=Cs(r));let{pathname:p="/",search:g="",hash:v="",state:b=null,key:x="default"}=r,w=C.useMemo(()=>{let S=ja(p,h);return S==null?null:{location:{pathname:S,search:g,hash:v,state:b,key:x},navigationType:n}},[h,p,g,v,b,x,n]);return Kt(w!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:C.createElement(Xt.Provider,{value:m},C.createElement(qn.Provider,{children:a,value:w}))}function Vx({children:i,location:a}){return Ex(ju(i),a)}function ju(i,a=[]){let r=[];return C.Children.forEach(i,(n,o)=>{if(!C.isValidElement(n))return;let c=[...a,o];if(n.type===C.Fragment){r.push.apply(r,ju(n.props.children,c));return}Pe(n.type===vs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let h={id:n.props.id||c.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=ju(n.props.children,c)),r.push(h)}),r}var yl="get",vl="application/x-www-form-urlencoded";function Ol(i){return i!=null&&typeof i.tagName=="string"}function Fx(i){return Ol(i)&&i.tagName.toLowerCase()==="button"}function Gx(i){return Ol(i)&&i.tagName.toLowerCase()==="form"}function Ix(i){return Ol(i)&&i.tagName.toLowerCase()==="input"}function Yx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Qx(i,a){return i.button===0&&(!a||a==="_self")&&!Yx(i)}var ll=null;function Kx(){if(ll===null)try{new FormData(document.createElement("form"),0),ll=!1}catch{ll=!0}return ll}var Xx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lu(i){return i!=null&&!Xx.has(i)?(Kt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vl}"`),null):i}function Wx(i,a){let r,n,o,c,h;if(Gx(i)){let m=i.getAttribute("action");n=m?ja(m,a):null,r=i.getAttribute("method")||yl,o=lu(i.getAttribute("enctype"))||vl,c=new FormData(i)}else if(Fx(i)||Ix(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(n=p?ja(p,a):null,r=i.getAttribute("formmethod")||m.getAttribute("method")||yl,o=lu(i.getAttribute("formenctype"))||lu(m.getAttribute("enctype"))||vl,c=new FormData(m,i),!Kx()){let{name:g,type:v,value:b}=i;if(v==="image"){let x=g?`${g}.`:"";c.append(`${x}x`,"0"),c.append(`${x}y`,"0")}else g&&c.append(g,b)}}else{if(Ol(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yl,n=null,o=vl,h=i}return c&&o==="text/plain"&&(h=c,c=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qu(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function Jx(i,a,r){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${r}`:a&&ja(n.pathname,a)==="/"?n.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Zx(i,a){if(i.id in a)return a[i.id];try{let r=await import(i.module);return a[i.id]=r,r}catch(r){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ew(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function tw(i,a,r){let n=await Promise.all(i.map(async o=>{let c=a.routes[o.route.id];if(c){let h=await Zx(c,r);return h.links?h.links():[]}return[]}));return nw(n.flat(1).filter(ew).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function _p(i,a,r,n,o,c){let h=(p,g)=>r[g]?p.route.id!==r[g].route.id:!0,m=(p,g)=>r[g].pathname!==p.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==p.params["*"];return c==="assets"?a.filter((p,g)=>h(p,g)||m(p,g)):c==="data"?a.filter((p,g)=>{let v=n.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function aw(i,a,{includeHydrateFallback:r}={}){return rw(i.map(n=>{let o=a.routes[n.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function rw(i){return[...new Set(i)]}function sw(i){let a={},r=Object.keys(i).sort();for(let n of r)a[n]=i[n];return a}function nw(i,a){let r=new Set;return new Set(a),i.reduce((n,o)=>{let c=JSON.stringify(sw(o));return r.has(c)||(r.add(c),n.push({key:c,link:o})),n},[])}function Og(){let i=C.useContext(js);return Qu(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function iw(){let i=C.useContext(kl);return Qu(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ku=C.createContext(void 0);Ku.displayName="FrameworkContext";function Dg(){let i=C.useContext(Ku);return Qu(i,"You must render this element inside a <HydratedRouter> element"),i}function lw(i,a){let r=C.useContext(Ku),[n,o]=C.useState(!1),[c,h]=C.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:b}=a,x=C.useRef(null);C.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let N=A=>{A.forEach(R=>{h(R.isIntersecting)})},j=new IntersectionObserver(N,{threshold:.5});return x.current&&j.observe(x.current),()=>{j.disconnect()}}},[i]),C.useEffect(()=>{if(n){let N=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(N)}}},[n]);let w=()=>{o(!0)},S=()=>{o(!1),h(!1)};return r?i!=="intent"?[c,x,{}]:[c,x,{onFocus:An(m,w),onBlur:An(p,S),onMouseEnter:An(g,w),onMouseLeave:An(v,S),onTouchStart:An(b,w)}]:[!1,x,{}]}function An(i,a){return r=>{i&&i(r),r.defaultPrevented||a(r)}}function ow({page:i,...a}){let{router:r}=Og(),n=C.useMemo(()=>Sg(r.routes,i,r.basename),[r.routes,i,r.basename]);return n?C.createElement(uw,{page:i,matches:n,...a}):null}function cw(i){let{manifest:a,routeModules:r}=Dg(),[n,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return tw(i,a,r).then(h=>{c||o(h)}),()=>{c=!0}},[i,a,r]),n}function uw({page:i,matches:a,...r}){let n=aa(),{manifest:o,routeModules:c}=Dg(),{basename:h}=Og(),{loaderData:m,matches:p}=iw(),g=C.useMemo(()=>_p(i,a,p,o,n,"data"),[i,a,p,o,n]),v=C.useMemo(()=>_p(i,a,p,o,n,"assets"),[i,a,p,o,n]),b=C.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let S=new Set,N=!1;if(a.forEach(A=>{let R=o.routes[A.route.id];!R||!R.hasLoader||(!g.some(k=>k.route.id===A.route.id)&&A.route.id in m&&c[A.route.id]?.shouldRevalidate||R.hasClientLoader?N=!0:S.add(A.route.id))}),S.size===0)return[];let j=Jx(i,h,"data");return N&&S.size>0&&j.searchParams.set("_routes",a.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[j.pathname+j.search]},[h,m,n,o,g,a,i,c]),x=C.useMemo(()=>aw(v,o),[v,o]),w=cw(v);return C.createElement(C.Fragment,null,b.map(S=>C.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),x.map(S=>C.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),w.map(({key:S,link:N})=>C.createElement("link",{key:S,nonce:r.nonce,...N})))}function dw(...i){return a=>{i.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var Mg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mg&&(window.__reactRouterVersion="7.9.5")}catch{}function hw({basename:i,children:a,window:r}){let n=C.useRef();n.current==null&&(n.current=Jb({window:r,v5Compat:!0}));let o=n.current,[c,h]=C.useState({action:o.action,location:o.location}),m=C.useCallback(p=>{C.startTransition(()=>h(p))},[h]);return C.useLayoutEffect(()=>o.listen(m),[o,m]),C.createElement(Hx,{basename:i,children:a,location:c.location,navigationType:c.action,navigator:o})}var Ug=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zg=C.forwardRef(function({onClick:a,discover:r="render",prefetch:n="none",relative:o,reloadDocument:c,replace:h,state:m,target:p,to:g,preventScrollReset:v,viewTransition:b,...x},w){let{basename:S}=C.useContext(Xt),N=typeof g=="string"&&Ug.test(g),j,A=!1;if(typeof g=="string"&&N&&(j=g,Mg))try{let P=new URL(window.location.href),X=g.startsWith("//")?new URL(P.protocol+g):new URL(g),de=ja(X.pathname,S);X.origin===P.origin&&de!=null?g=de+X.search+X.hash:A=!0}catch{Kt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=jx(g,{relative:o}),[k,B,V]=lw(n,x),G=gw(g,{replace:h,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:b});function I(P){a&&a(P),P.defaultPrevented||G(P)}let Y=C.createElement("a",{...x,...V,href:j||R,onClick:A||c?a:I,ref:dw(w,B),target:p,"data-discover":!N&&r==="render"?"true":void 0});return k&&!N?C.createElement(C.Fragment,null,Y,C.createElement(ow,{page:R})):Y});zg.displayName="Link";var fw=C.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:n="",end:o=!1,style:c,to:h,viewTransition:m,children:p,...g},v){let b=$n(h,{relative:g.relative}),x=aa(),w=C.useContext(kl),{navigator:S,basename:N}=C.useContext(Xt),j=w!=null&&ww(b)&&m===!0,A=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,R=x.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(R=R.toLowerCase(),k=k?k.toLowerCase():null,A=A.toLowerCase()),k&&N&&(k=ja(k,N)||k);const B=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let V=R===A||!o&&R.startsWith(A)&&R.charAt(B)==="/",G=k!=null&&(k===A||!o&&k.startsWith(A)&&k.charAt(A.length)==="/"),I={isActive:V,isPending:G,isTransitioning:j},Y=V?a:void 0,P;typeof n=="function"?P=n(I):P=[n,V?"active":null,G?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let X=typeof c=="function"?c(I):c;return C.createElement(zg,{...g,"aria-current":Y,className:P,ref:v,style:X,to:h,viewTransition:m},typeof p=="function"?p(I):p)});fw.displayName="NavLink";var mw=C.forwardRef(({discover:i="render",fetcherKey:a,navigate:r,reloadDocument:n,replace:o,state:c,method:h=yl,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:b,...x},w)=>{let S=bw(),N=xw(m,{relative:g}),j=h.toLowerCase()==="get"?"get":"post",A=typeof m=="string"&&Ug.test(m),R=k=>{if(p&&p(k),k.defaultPrevented)return;k.preventDefault();let B=k.nativeEvent.submitter,V=B?.getAttribute("formmethod")||h;S(B||k.currentTarget,{fetcherKey:a,method:V,navigate:r,replace:o,state:c,relative:g,preventScrollReset:v,viewTransition:b})};return C.createElement("form",{ref:w,method:j,action:N,onSubmit:n?p:R,...x,"data-discover":!A&&i==="render"?"true":void 0})});mw.displayName="Form";function pw(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lg(i){let a=C.useContext(js);return Pe(a,pw(i)),a}function gw(i,{target:a,replace:r,state:n,preventScrollReset:o,relative:c,viewTransition:h}={}){let m=Pn(),p=aa(),g=$n(i,{relative:c});return C.useCallback(v=>{if(Qx(v,a)){v.preventDefault();let b=r!==void 0?r:Dn(p)===Dn(g);m(i,{replace:b,state:n,preventScrollReset:o,relative:c,viewTransition:h})}},[p,m,g,r,n,a,i,o,c,h])}var yw=0,vw=()=>`__${String(++yw)}__`;function bw(){let{router:i}=Lg("useSubmit"),{basename:a}=C.useContext(Xt),r=Lx();return C.useCallback(async(n,o={})=>{let{action:c,method:h,encType:m,formData:p,body:g}=Wx(n,a);if(o.navigate===!1){let v=o.fetcherKey||vw();await i.fetch(v,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,a,r])}function xw(i,{relative:a}={}){let{basename:r}=C.useContext(Xt),n=C.useContext(Wt);Pe(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),c={...$n(i||".",{relative:a})},h=aa();if(i==null){c.search=h.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();c.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Ca([r,c.pathname])),Dn(c)}function ww(i,{relative:a}={}){let r=C.useContext(Ag);Pe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Lg("useViewTransitionState"),o=$n(i,{relative:a});if(!r.isTransitioning)return!1;let c=ja(r.currentLocation.pathname,n)||r.currentLocation.pathname,h=ja(r.nextLocation.pathname,n)||r.nextLocation.pathname;return wl(o.pathname,h)!=null||wl(o.pathname,c)!=null}function _l(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}function Sp(i){if(!i?.trim())return{isValid:!1,error:"Username is required"};const a=i.trim();return a.length<3||a.length>30?{isValid:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(a)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}function _w(i){if(!i)return{isValid:!1,error:"Password is required"};if(i.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};const a=/[a-z]/.test(i),r=/[A-Z]/.test(i),n=/\d/.test(i),o=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(i);return!a||!r||!n||!o?{isValid:!1,error:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:{isValid:!0}}function Cp(i){return i?.trim()?i.length>100?{isValid:!1,error:"Campaign name must be 100 characters or less"}:{isValid:!0}:{isValid:!1,error:"Campaign name is required"}}function jp(i){return["admin","gm","player"].includes(i)}function Bg(i){const{isAdmin:a,isGm:r,isPlayer:n}=i;return!(!a&&!r&&!n||r&&n&&!a)}function ou(i){return typeof i=="string"?["admin","gm"].includes(i):i.isAdmin||i.isGm}function Sw(i){return typeof i=="string"?i==="admin":i.isAdmin}function Cw(i){return typeof i=="string"?i==="admin":i.isAdmin}function Dl(i){const a=[];return i.isAdmin&&a.push("Admin"),i.isGm&&a.push("GM"),i.isPlayer&&a.push("Player"),a.length===0?"No roles":a.length===1?a[0]:a.length===2?a.join(" + "):`${a.slice(0,-1).join(", ")} + ${a[a.length-1]}`}function En(i,a){return`Only ${a.length===1?`${a[0]}s`:`${a.slice(0,-1).join(", ")} and ${a[a.length-1]}s`} can ${i}`}class jw{authRepository;constructor(a){this.authRepository=a}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(a,r){return!a||!r?{success:!1,error:"Email and password are required"}:_l(a)?this.authRepository.signIn(a,r):{success:!1,error:"Invalid email format"}}async signUp(a,r){return!a||!r?{success:!1,error:"Email and password are required"}:_l(a)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(a,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(a){return this.authRepository.onAuthStateChange(a)}async completeProfile(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!a.displayName?.trim())return{success:!1,error:"Display name is required"};const n=Sp(a.username);return n.isValid?this.authRepository.completeProfile(r.id,a.displayName.trim(),a.username.trim()):{success:!1,error:n.error}}async updateProfile(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(a.displayName!==void 0&&!a.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(a.username!==void 0){const n=Sp(a.username);if(!n.isValid)return{success:!1,error:n.error}}return this.authRepository.updateProfile(r.id,a.displayName?.trim(),a.username?.trim())}async changePassword(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!a.currentPassword)return{success:!1,error:"Current password is required"};const n=_w(a.newPassword);return n.isValid?this.authRepository.changePassword(r.id,a.currentPassword,a.newPassword):{success:!1,error:n.error}}async deleteAccount(){const a=await this.authRepository.getCurrentUser();return a?this.authRepository.deleteAccount(a.id):{success:!1,error:"User not authenticated"}}}class Nw{campaignRepository;authRepository;constructor(a,r){this.campaignRepository=a,this.authRepository=r}async getCampaigns(){const a=await this.authRepository.getCurrentUser();return a?this.campaignRepository.getCampaigns(a.id):{success:!1,error:"User not authenticated"}}async getCampaign(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const n=await this.campaignRepository.canUserAccessCampaign(a,r.id);return!n.success||!n.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(a)}async createCampaign(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const n=Cp(a.name);if(!n.isValid)return{success:!1,error:n.error};const o=a.creatorIsAlsoGM||!1;if(a.initialMembers)for(const h of a.initialMembers){if(!_l(h.email))return{success:!1,error:`Invalid email format: ${h.email}`};if(!jp(h.role))return{success:!1,error:`Invalid role: ${h.role}`}}const c=await this.campaignRepository.createCampaign(r.id,{name:a.name.trim(),description:a.description?.trim()},o);if(!c.success)return c;if(a.initialMembers&&a.initialMembers.length>0&&c.data)for(const h of a.initialMembers)await this.campaignRepository.addMemberByEmail(c.data.id,h.email.trim(),h.role);return c}async updateCampaign(a,r){const n=await this.authRepository.getCurrentUser();if(!n)return{success:!1,error:"User not authenticated"};const o=await this.campaignRepository.getUserRole(a,n.id);if(!o.success||!o.data||!Sw(o.data))return{success:!1,error:En("update campaigns",["admin"])};if(r.name!==void 0){const h=Cp(r.name);if(!h.isValid)return{success:!1,error:h.error}}const c={};return r.name!==void 0&&(c.name=r.name.trim()),r.description!==void 0&&(c.description=r.description?.trim()),this.campaignRepository.updateCampaign(a,c)}async deleteCampaign(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const n=await this.campaignRepository.getUserRole(a,r.id);return!n.success||!n.data||!Cw(n.data)?{success:!1,error:En("delete campaigns",["admin"])}:this.campaignRepository.deleteCampaign(a)}async getCampaignMembers(a){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const n=await this.campaignRepository.canUserAccessCampaign(a,r.id);return!n.success||!n.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(a)}async addMemberByEmail(a,r,n){const o=await this.authRepository.getCurrentUser();if(!o)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(a,o.id);return!c.success||!c.data||!ou(c.data)?{success:!1,error:En("add members",["admin","gm"])}:r?.trim()?_l(r)?jp(n)?this.campaignRepository.addMemberByEmail(a,r.trim(),n):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(a,r,n){const o=await this.authRepository.getCurrentUser();if(!o)return{success:!1,error:"User not authenticated"};const c=await this.campaignRepository.getUserRole(a,o.id);return!c.success||!c.data||!ou(c.data)?{success:!1,error:En("update member roles",["admin","gm"])}:Bg(n)?this.campaignRepository.updateMemberRole(a,r,n):{success:!1,error:"Invalid role combination. Must have at least one role and cannot be GM+Player without Admin."}}async removeMember(a,r){const n=await this.authRepository.getCurrentUser();if(!n)return{success:!1,error:"User not authenticated"};const o=await this.campaignRepository.getUserRole(a,n.id);return!o.success||!o.data||!ou(o.data)?{success:!1,error:En("remove members",["admin","gm"])}:this.campaignRepository.removeMember(a,r)}}class Qt{static instance;_authRepository;_campaignRepository;_campaignDataRepository;_characterRepository;_authService;_campaignService;constructor(){}static getInstance(){return Qt.instance||(Qt.instance=new Qt),Qt.instance}init(a){this._authRepository=a.authRepository,this._campaignRepository=a.campaignRepository,this._campaignDataRepository=a.campaignDataRepository,this._characterRepository=a.characterRepository,this._authService=new jw(this._authRepository),this._campaignService=new Nw(this._campaignRepository,this._authRepository)}ensureInitialized(){if(!this._authService)throw new Error("ServiceContainer not initialized. Call init() first.")}get authService(){return this.ensureInitialized(),this._authService}get campaignService(){return this.ensureInitialized(),this._campaignService}get authRepository(){return this.ensureInitialized(),this._authRepository}get campaignRepository(){return this.ensureInitialized(),this._campaignRepository}get campaignDataRepository(){return this.ensureInitialized(),this._campaignDataRepository}get characterRepository(){return this.ensureInitialized(),this._characterRepository}}const Aw=()=>Qt.getInstance().authService,qg=()=>Qt.getInstance().campaignService,Xu=()=>Qt.getInstance().campaignRepository,Ew=()=>Qt.getInstance().characterRepository,Rw=()=>Qt.getInstance().campaignDataRepository,er=()=>{const[i,a]=C.useState(null),[r,n]=C.useState(!0),o=Aw();return C.useEffect(()=>((async()=>{const S=await o.getCurrentUser();a(S),n(!1)})(),o.onAuthStateChange(S=>{a(S),n(!1)})),[o]),{user:i,loading:r,signIn:async(x,w)=>{const S=await o.signIn(x,w);return S.success&&S.data?(a(S.data),{success:!0}):{success:!1,error:S.error}},signUp:async(x,w)=>{const S=await o.signUp(x,w);return S.success&&S.data?(a(S.data),{success:!0}):{success:!1,error:S.error}},signOut:async()=>{const x=await o.signOut();return x.success?(a(null),{success:!0}):{success:!1,error:x.error}},completeProfile:async x=>{const w=await o.completeProfile(x);return w.success&&w.data?(a(w.data),{success:!0,user:w.data}):{success:!1,error:w.error}},updateProfile:async x=>{const w=await o.updateProfile(x);return w.success&&w.data?(a(w.data),{success:!0,user:w.data}):{success:!1,error:w.error}},changePassword:async x=>{const w=await o.changePassword(x);return w.success?{success:!0}:{success:!1,error:w.error}},deleteAccount:async()=>{const x=await o.deleteAccount();return x.success?(a(null),{success:!0}):{success:!1,error:x.error}}}};var Nu=function(i,a){return Nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Nu(i,a)};function Pg(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Nu(i,a);function r(){this.constructor=i}i.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var Sl=function(){return Sl=Object.assign||function(a){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(a[c]=r[c])}return a},Sl.apply(this,arguments)};function As(i,a){var r={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&a.indexOf(n)<0&&(r[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(i);o<n.length;o++)a.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(r[n[o]]=i[n[o]]);return r}function $g(i,a,r,n){var o=arguments.length,c=o<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,a,r,n);else for(var m=i.length-1;m>=0;m--)(h=i[m])&&(c=(o<3?h(c):o>3?h(a,r,c):h(a,r))||c);return o>3&&c&&Object.defineProperty(a,r,c),c}function Hg(i,a){return function(r,n){a(r,n,i)}}function Vg(i,a,r,n,o,c){function h(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var m=n.kind,p=m==="getter"?"get":m==="setter"?"set":"value",g=!a&&i?n.static?i:i.prototype:null,v=a||(g?Object.getOwnPropertyDescriptor(g,n.name):{}),b,x=!1,w=r.length-1;w>=0;w--){var S={};for(var N in n)S[N]=N==="access"?{}:n[N];for(var N in n.access)S.access[N]=n.access[N];S.addInitializer=function(A){if(x)throw new TypeError("Cannot add initializers after decoration has completed");c.push(h(A||null))};var j=(0,r[w])(m==="accessor"?{get:v.get,set:v.set}:v[p],S);if(m==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(b=h(j.get))&&(v.get=b),(b=h(j.set))&&(v.set=b),(b=h(j.init))&&o.unshift(b)}else(b=h(j))&&(m==="field"?o.unshift(b):v[p]=b)}g&&Object.defineProperty(g,n.name,v),x=!0}function Fg(i,a,r){for(var n=arguments.length>2,o=0;o<a.length;o++)r=n?a[o].call(i,r):a[o].call(i);return n?r:void 0}function Gg(i){return typeof i=="symbol"?i:"".concat(i)}function Ig(i,a,r){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:r?"".concat(r," ",a):a})}function Yg(i,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,a)}function ae(i,a,r,n){function o(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function m(v){try{g(n.next(v))}catch(b){h(b)}}function p(v){try{g(n.throw(v))}catch(b){h(b)}}function g(v){v.done?c(v.value):o(v.value).then(m,p)}g((n=n.apply(i,a||[])).next())})}function Qg(i,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,o,c,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=m(0),h.throw=m(1),h.return=m(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(v){return p([g,v])}}function p(g){if(n)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(n=1,o&&(c=g[0]&2?o.return:g[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,g[1])).done)return c;switch(o=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,o=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){r.label=g[1];break}if(g[0]===6&&r.label<c[1]){r.label=c[1],c=g;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(g);break}c[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(i,r)}catch(v){g=[6,v],o=0}finally{n=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Ml=Object.create?(function(i,a,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(a,r);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(i,n,o)}):(function(i,a,r,n){n===void 0&&(n=r),i[n]=a[r]});function Kg(i,a){for(var r in i)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&Ml(a,i,r)}function Cl(i){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&i[a],n=0;if(r)return r.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wu(i,a){var r=typeof Symbol=="function"&&i[Symbol.iterator];if(!r)return i;var n=r.call(i),o,c=[],h;try{for(;(a===void 0||a-- >0)&&!(o=n.next()).done;)c.push(o.value)}catch(m){h={error:m}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return c}function Xg(){for(var i=[],a=0;a<arguments.length;a++)i=i.concat(Wu(arguments[a]));return i}function Wg(){for(var i=0,a=0,r=arguments.length;a<r;a++)i+=arguments[a].length;for(var n=Array(i),o=0,a=0;a<r;a++)for(var c=arguments[a],h=0,m=c.length;h<m;h++,o++)n[o]=c[h];return n}function Jg(i,a,r){if(r||arguments.length===2)for(var n=0,o=a.length,c;n<o;n++)(c||!(n in a))&&(c||(c=Array.prototype.slice.call(a,0,n)),c[n]=a[n]);return i.concat(c||Array.prototype.slice.call(a))}function Ss(i){return this instanceof Ss?(this.v=i,this):new Ss(i)}function Zg(i,a,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(i,a||[]),o,c=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",h),o[Symbol.asyncIterator]=function(){return this},o;function h(w){return function(S){return Promise.resolve(S).then(w,b)}}function m(w,S){n[w]&&(o[w]=function(N){return new Promise(function(j,A){c.push([w,N,j,A])>1||p(w,N)})},S&&(o[w]=S(o[w])))}function p(w,S){try{g(n[w](S))}catch(N){x(c[0][3],N)}}function g(w){w.value instanceof Ss?Promise.resolve(w.value.v).then(v,b):x(c[0][2],w)}function v(w){p("next",w)}function b(w){p("throw",w)}function x(w,S){w(S),c.shift(),c.length&&p(c[0][0],c[0][1])}}function ey(i){var a,r;return a={},n("next"),n("throw",function(o){throw o}),n("return"),a[Symbol.iterator]=function(){return this},a;function n(o,c){a[o]=i[o]?function(h){return(r=!r)?{value:Ss(i[o](h)),done:!1}:c?c(h):h}:c}}function ty(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i[Symbol.asyncIterator],r;return a?a.call(i):(i=typeof Cl=="function"?Cl(i):i[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(c){r[c]=i[c]&&function(h){return new Promise(function(m,p){h=i[c](h),o(m,p,h.done,h.value)})}}function o(c,h,m,p){Promise.resolve(p).then(function(g){c({value:g,done:m})},h)}}function ay(i,a){return Object.defineProperty?Object.defineProperty(i,"raw",{value:a}):i.raw=a,i}var Tw=Object.create?(function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}):function(i,a){i.default=a},Au=function(i){return Au=Object.getOwnPropertyNames||function(a){var r=[];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[r.length]=n);return r},Au(i)};function ry(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var r=Au(i),n=0;n<r.length;n++)r[n]!=="default"&&Ml(a,i,r[n]);return Tw(a,i),a}function sy(i){return i&&i.__esModule?i:{default:i}}function ny(i,a,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?i!==a||!n:!a.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(i):n?n.value:a.get(i)}function iy(i,a,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?i!==a||!o:!a.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(i,r):o?o.value=r:a.set(i,r),r}function ly(i,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?a===i:i.has(a)}function oy(i,a,r){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=a[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=a[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(c){return Promise.reject(c)}}),i.stack.push({value:a,dispose:n,async:r})}else r&&i.stack.push({async:!0});return a}var kw=typeof SuppressedError=="function"?SuppressedError:function(i,a,r){var n=new Error(r);return n.name="SuppressedError",n.error=i,n.suppressed=a,n};function cy(i){function a(c){i.error=i.hasError?new kw(c,i.error,"An error was suppressed during disposal."):c,i.hasError=!0}var r,n=0;function o(){for(;r=i.stack.pop();)try{if(!r.async&&n===1)return n=0,i.stack.push(r),Promise.resolve().then(o);if(r.dispose){var c=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(c).then(o,function(h){return a(h),o()})}else n|=1}catch(h){a(h)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function uy(i,a){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,c,h){return n?a?".jsx":".js":o&&(!c||!h)?r:o+c+"."+h.toLowerCase()+"js"}):i}const Ow={__extends:Pg,__assign:Sl,__rest:As,__decorate:$g,__param:Hg,__esDecorate:Vg,__runInitializers:Fg,__propKey:Gg,__setFunctionName:Ig,__metadata:Yg,__awaiter:ae,__generator:Qg,__createBinding:Ml,__exportStar:Kg,__values:Cl,__read:Wu,__spread:Xg,__spreadArrays:Wg,__spreadArray:Jg,__await:Ss,__asyncGenerator:Zg,__asyncDelegator:ey,__asyncValues:ty,__makeTemplateObject:ay,__importStar:ry,__importDefault:sy,__classPrivateFieldGet:ny,__classPrivateFieldSet:iy,__classPrivateFieldIn:ly,__addDisposableResource:oy,__disposeResources:cy,__rewriteRelativeImportExtension:uy},Dw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:oy,get __assign(){return Sl},__asyncDelegator:ey,__asyncGenerator:Zg,__asyncValues:ty,__await:Ss,__awaiter:ae,__classPrivateFieldGet:ny,__classPrivateFieldIn:ly,__classPrivateFieldSet:iy,__createBinding:Ml,__decorate:$g,__disposeResources:cy,__esDecorate:Vg,__exportStar:Kg,__extends:Pg,__generator:Qg,__importDefault:sy,__importStar:ry,__makeTemplateObject:ay,__metadata:Yg,__param:Hg,__propKey:Gg,__read:Wu,__rest:As,__rewriteRelativeImportExtension:uy,__runInitializers:Fg,__setFunctionName:Ig,__spread:Xg,__spreadArray:Jg,__spreadArrays:Wg,__values:Cl,default:Ow},Symbol.toStringTag,{value:"Module"})),Mw=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);class Ju extends Error{constructor(a,r="FunctionsError",n){super(a),this.name=r,this.context=n}}class Np extends Ju{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Ap extends Ju{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Ep extends Ju{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Eu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Eu||(Eu={}));class Uw{constructor(a,{headers:r={},customFetch:n,region:o=Eu.Any}={}){this.url=a,this.headers=r,this.region=o,this.fetch=Mw(n)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return ae(this,arguments,void 0,function*(r,n={}){var o;try{const{headers:c,method:h,body:m,signal:p}=n;let g={},{region:v}=n;v||(v=this.region);const b=new URL(`${this.url}/${r}`);v&&v!=="any"&&(g["x-region"]=v,b.searchParams.set("forceFunctionRegion",v));let x;m&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",x=m):typeof m=="string"?(g["Content-Type"]="text/plain",x=m):typeof FormData<"u"&&m instanceof FormData?x=m:(g["Content-Type"]="application/json",x=JSON.stringify(m)):x=m;const w=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),c),body:x,signal:p}).catch(A=>{throw A.name==="AbortError"?A:new Np(A)}),S=w.headers.get("x-relay-error");if(S&&S==="true")throw new Ap(w);if(!w.ok)throw new Ep(w);let N=((o=w.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),j;return N==="application/json"?j=yield w.json():N==="application/octet-stream"||N==="application/pdf"?j=yield w.blob():N==="text/event-stream"?j=w:N==="multipart/form-data"?j=yield w.formData():j=yield w.text(),{data:j,error:null,response:w}}catch(c){return c instanceof Error&&c.name==="AbortError"?{data:null,error:new Np(c)}:{data:null,error:c,response:c instanceof Ep||c instanceof Ap?c.context:void 0}}})}}var ct={};const Es=Pb(Dw);var ol={},cl={},ul={},dl={},hl={},fl={},Rp;function dy(){if(Rp)return fl;Rp=1,Object.defineProperty(fl,"__esModule",{value:!0});class i extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return fl.default=i,fl}var Tp;function hy(){if(Tp)return hl;Tp=1,Object.defineProperty(hl,"__esModule",{value:!0});const a=Es.__importDefault(dy());class r{constructor(o){var c,h;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(c=o.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=o.signal,this.isMaybeSingle=(h=o.isMaybeSingle)!==null&&h!==void 0?h:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=new Headers(this.headers),this.headers.set(o,c),this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let m=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,v,b,x;let w=null,S=null,N=null,j=p.status,A=p.statusText;if(p.ok){if(this.method!=="HEAD"){const V=await p.text();V===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=V:S=JSON.parse(V))}const k=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),B=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");k&&B&&B.length>1&&(N=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(w={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,N=null,j=406,A="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const k=await p.text();try{w=JSON.parse(k),Array.isArray(w)&&p.status===404&&(S=[],w=null,j=200,A="OK")}catch{p.status===404&&k===""?(j=204,A="No Content"):w={message:k}}if(w&&this.isMaybeSingle&&(!((x=w?.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,j=200,A="OK"),w&&this.shouldThrowOnError)throw new a.default(w)}return{error:w,data:S,count:N,status:j,statusText:A}});return this.shouldThrowOnError||(m=m.catch(p=>{var g,v,b;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(v=p?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(b=p?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),m.then(o,c)}returns(){return this}overrideTypes(){return this}}return hl.default=r,hl}var kp;function fy(){if(kp)return dl;kp=1,Object.defineProperty(dl,"__esModule",{value:!0});const a=Es.__importDefault(hy());class r extends a.default{select(o){let c=!1;const h=(o??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:h,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",v=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${v?`${v},`:""}${o}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:h=c}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${o}`),this}range(o,c,{foreignTable:h,referencedTable:m=h}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(g,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:h=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var v;const b=[o?"analyze":null,c?"verbose":null,h?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),x=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${x}"; options=${b};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return dl.default=r,dl}var Op;function Zu(){if(Op)return ul;Op=1,Object.defineProperty(ul,"__esModule",{value:!0});const a=Es.__importDefault(fy()),r=new RegExp("[,()]");class n extends a.default{eq(c,h){return this.url.searchParams.append(c,`eq.${h}`),this}neq(c,h){return this.url.searchParams.append(c,`neq.${h}`),this}gt(c,h){return this.url.searchParams.append(c,`gt.${h}`),this}gte(c,h){return this.url.searchParams.append(c,`gte.${h}`),this}lt(c,h){return this.url.searchParams.append(c,`lt.${h}`),this}lte(c,h){return this.url.searchParams.append(c,`lte.${h}`),this}like(c,h){return this.url.searchParams.append(c,`like.${h}`),this}likeAllOf(c,h){return this.url.searchParams.append(c,`like(all).{${h.join(",")}}`),this}likeAnyOf(c,h){return this.url.searchParams.append(c,`like(any).{${h.join(",")}}`),this}ilike(c,h){return this.url.searchParams.append(c,`ilike.${h}`),this}ilikeAllOf(c,h){return this.url.searchParams.append(c,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(c,h){return this.url.searchParams.append(c,`ilike(any).{${h.join(",")}}`),this}is(c,h){return this.url.searchParams.append(c,`is.${h}`),this}in(c,h){const m=Array.from(new Set(h)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(c,`in.(${m})`),this}contains(c,h){return typeof h=="string"?this.url.searchParams.append(c,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(c,`cs.{${h.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(h)}`),this}containedBy(c,h){return typeof h=="string"?this.url.searchParams.append(c,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(c,`cd.{${h.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(h)}`),this}rangeGt(c,h){return this.url.searchParams.append(c,`sr.${h}`),this}rangeGte(c,h){return this.url.searchParams.append(c,`nxl.${h}`),this}rangeLt(c,h){return this.url.searchParams.append(c,`sl.${h}`),this}rangeLte(c,h){return this.url.searchParams.append(c,`nxr.${h}`),this}rangeAdjacent(c,h){return this.url.searchParams.append(c,`adj.${h}`),this}overlaps(c,h){return typeof h=="string"?this.url.searchParams.append(c,`ov.${h}`):this.url.searchParams.append(c,`ov.{${h.join(",")}}`),this}textSearch(c,h,{config:m,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=m===void 0?"":`(${m})`;return this.url.searchParams.append(c,`${g}fts${v}.${h}`),this}match(c){return Object.entries(c).forEach(([h,m])=>{this.url.searchParams.append(h,`eq.${m}`)}),this}not(c,h,m){return this.url.searchParams.append(c,`not.${h}.${m}`),this}or(c,{foreignTable:h,referencedTable:m=h}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${c})`),this}filter(c,h,m){return this.url.searchParams.append(c,`${h}.${m}`),this}}return ul.default=n,ul}var Dp;function my(){if(Dp)return cl;Dp=1,Object.defineProperty(cl,"__esModule",{value:!0});const a=Es.__importDefault(Zu());class r{constructor(o,{headers:c={},schema:h,fetch:m}){this.url=o,this.headers=new Headers(c),this.schema=h,this.fetch=m}select(o,c){const{head:h=!1,count:m}=c??{},p=h?"HEAD":"GET";let g=!1;const v=(o??"*").split("").map(b=>/\s/.test(b)&&!g?"":(b==='"'&&(g=!g),b)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:h=!0}={}){var m;const p="POST";if(c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(g.length>0){const v=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:h=!1,count:m,defaultToNull:p=!0}={}){var g;const v="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(b.length>0){const x=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new a.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:c}={}){var h;const m="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:o}={}){var c;const h="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new a.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return cl.default=r,cl}var Mp;function zw(){if(Mp)return ol;Mp=1,Object.defineProperty(ol,"__esModule",{value:!0});const i=Es,a=i.__importDefault(my()),r=i.__importDefault(Zu());class n{constructor(c,{headers:h={},schema:m,fetch:p}={}){this.url=c,this.headers=new Headers(h),this.schemaName=m,this.fetch=p}from(c){const h=new URL(`${this.url}/${c}`);return new a.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new n(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:m=!1,get:p=!1,count:g}={}){var v;let b;const x=new URL(`${this.url}/rpc/${c}`);let w;m||p?(b=m?"HEAD":"GET",Object.entries(h).filter(([N,j])=>j!==void 0).map(([N,j])=>[N,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([N,j])=>{x.searchParams.append(N,j)})):(b="POST",w=h);const S=new Headers(this.headers);return g&&S.set("Prefer",`count=${g}`),new r.default({method:b,url:x,headers:S,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return ol.default=n,ol}var Up;function Lw(){if(Up)return ct;Up=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const i=Es,a=i.__importDefault(zw());ct.PostgrestClient=a.default;const r=i.__importDefault(my());ct.PostgrestQueryBuilder=r.default;const n=i.__importDefault(Zu());ct.PostgrestFilterBuilder=n.default;const o=i.__importDefault(fy());ct.PostgrestTransformBuilder=o.default;const c=i.__importDefault(hy());ct.PostgrestBuilder=c.default;const h=i.__importDefault(dy());return ct.PostgrestError=h.default,ct.default={PostgrestClient:a.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:h.default},ct}var py=Lw();const gy=_g(py),Bw=Vb({__proto__:null,default:gy},[py]),{PostgrestClient:qw,PostgrestQueryBuilder:Aj,PostgrestFilterBuilder:Ej,PostgrestTransformBuilder:Rj,PostgrestBuilder:Tj,PostgrestError:kj}=gy||Bw;class Pw{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,o=parseInt(n.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const n=this.getWebSocketConstructor();return new n(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const $w="2.80.0",Hw=`realtime-js/${$w}`,Vw="1.0.0",Ru=1e4,Fw=1e3,Gw=100;var Tn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Tn||(Tn={}));var Ze;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Ze||(Ze={}));var Yt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Yt||(Yt={}));var Tu;(function(i){i.websocket="websocket"})(Tu||(Tu={}));var Sr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Sr||(Sr={}));class Iw{constructor(){this.HEADER_LENGTH=1}decode(a,r){return a.constructor===ArrayBuffer?r(this._binaryDecode(a)):r(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const r=new DataView(a),n=new TextDecoder;return this._decodeBroadcast(a,r,n)}_decodeBroadcast(a,r,n){const o=r.getUint8(1),c=r.getUint8(2);let h=this.HEADER_LENGTH+2;const m=n.decode(a.slice(h,h+o));h=h+o;const p=n.decode(a.slice(h,h+c));h=h+c;const g=JSON.parse(n.decode(a.slice(h,a.byteLength)));return{ref:null,topic:m,event:p,payload:g}}}class yy{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ue||(Ue={}));const zp=(i,a,r={})=>{var n;const o=(n=r.skipTypes)!==null&&n!==void 0?n:[];return a?Object.keys(a).reduce((c,h)=>(c[h]=Yw(h,i,a,o),c),{}):{}},Yw=(i,a,r,n)=>{const o=a.find(m=>m.name===i),c=o?.type,h=r[i];return c&&!n.includes(c)?vy(c,h):ku(h)},vy=(i,a)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return Ww(a,r)}switch(i){case Ue.bool:return Qw(a);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return Kw(a);case Ue.json:case Ue.jsonb:return Xw(a);case Ue.timestamp:return Jw(a);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return ku(a);default:return ku(a)}},ku=i=>i,Qw=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Kw=i=>{if(typeof i=="string"){const a=parseFloat(i);if(!Number.isNaN(a))return a}return i},Xw=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(a){return console.log(`JSON parse error: ${a}`),i}return i},Ww=(i,a)=>{if(typeof i!="string")return i;const r=i.length-1,n=i[r];if(i[0]==="{"&&n==="}"){let c;const h=i.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(m=>vy(a,m))}return i},Jw=i=>typeof i=="string"?i.replace(" ","T"):i,by=i=>{const a=new URL(i);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class cu{constructor(a,r,n={},o=Ru){this.channel=a,this.event=r,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var n;return this._hasReceived(a)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(n=>n.status===a).forEach(n=>n.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var Lp;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Lp||(Lp={}));class kn{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:c,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kn.syncState(this.state,o,c,h),this.pendingDiffs.forEach(p=>{this.state=kn.syncDiff(this.state,p,c,h)}),this.pendingDiffs=[],m()}),this.channel._on(n.diff,{},o=>{const{onJoin:c,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=kn.syncDiff(this.state,o,c,h),m())}),this.onJoin((o,c,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:h})}),this.onLeave((o,c,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,n,o){const c=this.cloneDeep(a),h=this.transformState(r),m={},p={};return this.map(c,(g,v)=>{h[g]||(p[g]=v)}),this.map(h,(g,v)=>{const b=c[g];if(b){const x=v.map(j=>j.presence_ref),w=b.map(j=>j.presence_ref),S=v.filter(j=>w.indexOf(j.presence_ref)<0),N=b.filter(j=>x.indexOf(j.presence_ref)<0);S.length>0&&(m[g]=S),N.length>0&&(p[g]=N)}else m[g]=v}),this.syncDiff(c,{joins:m,leaves:p},n,o)}static syncDiff(a,r,n,o){const{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(c,(m,p)=>{var g;const v=(g=a[m])!==null&&g!==void 0?g:[];if(a[m]=this.cloneDeep(p),v.length>0){const b=a[m].map(w=>w.presence_ref),x=v.filter(w=>b.indexOf(w.presence_ref)<0);a[m].unshift(...x)}n(m,v,p)}),this.map(h,(m,p)=>{let g=a[m];if(!g)return;const v=p.map(b=>b.presence_ref);g=g.filter(b=>v.indexOf(b.presence_ref)<0),a[m]=g,o(m,g,p),g.length===0&&delete a[m]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(n=>r(n,a[n]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,n)=>{const o=a[n];return"metas"in o?r[n]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[n]=o,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bp;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Bp||(Bp={}));var On;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(On||(On={}));var Sa;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Sa||(Sa={}));class ed{constructor(a,r={config:{}},n){var o,c;if(this.topic=a,this.params=r,this.socket=n,this.bindings={},this.state=Ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cu(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new yy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ze.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new kn(this),this.broadcastEndpointURL=by(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,r=this.timeout){var n,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Ze.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,g=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(w=>w.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[On.PRESENCE]&&this.bindings[On.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,b={},x={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>a?.(Sa.CHANNEL_ERROR,w)),this._onClose(()=>a?.(Sa.CLOSED)),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var S;if(this.socket.setAuth(),w===void 0){a?.(Sa.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,j=(S=N?.length)!==null&&S!==void 0?S:0,A=[];for(let R=0;R<j;R++){const k=N[R],{filter:{event:B,schema:V,table:G,filter:I}}=k,Y=w&&w[R];if(Y&&Y.event===B&&Y.schema===V&&Y.table===G&&Y.filter===I)A.push(Object.assign(Object.assign({},k),{id:Y.id}));else{this.unsubscribe(),this.state=Ze.errored,a?.(Sa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,a&&a(Sa.SUBSCRIBED);return}}).receive("error",w=>{this.state=Ze.errored,a?.(Sa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{a?.(Sa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,n){return this.state===Ze.joined&&a===On.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,r,n)}async httpSend(a,r,n={}){var o;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const g=await m.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(a,r={}){var n,o;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=a,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,m,p;const g=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Ze.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new cu(this,Yt.leave,{},a),n.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ze.closed,this.bindings={}}async _fetchWithTimeout(a,r,n){const o=new AbortController,c=setTimeout(()=>o.abort(),n),h=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),h}_push(a,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new cu(this,a,r,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>Gw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,n){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,n){var o,c;const h=a.toLocaleLowerCase(),{close:m,error:p,leave:g,join:v}=Yt;if(n&&[m,p,g,v].indexOf(h)>=0&&n!==this._joinRef())return;let x=this._onMessage(h,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var S,N,j;return((S=w.filter)===null||S===void 0?void 0:S.event)==="*"||((j=(N=w.filter)===null||N===void 0?void 0:N.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===h}).map(w=>w.callback(x,n)):(c=this.bindings[h])===null||c===void 0||c.filter(w=>{var S,N,j,A,R,k;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const B=w.id,V=(S=w.filter)===null||S===void 0?void 0:S.event;return B&&((N=r.ids)===null||N===void 0?void 0:N.includes(B))&&(V==="*"||V?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const B=(R=(A=w?.filter)===null||A===void 0?void 0:A.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return B==="*"||B===((k=r?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof x=="object"&&"ids"in x){const S=x.data,{schema:N,table:j,commit_timestamp:A,type:R,errors:k}=S;x=Object.assign(Object.assign({},{schema:N,table:j,commit_timestamp:A,eventType:R,new:{},old:{},errors:k}),this._getPayloadRecords(S))}w.callback(x,n)})}_isClosed(){return this.state===Ze.closed}_isJoined(){return this.state===Ze.joined}_isJoining(){return this.state===Ze.joining}_isLeaving(){return this.state===Ze.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,n){const o=a.toLocaleLowerCase(),c={type:o,filter:r,callback:n};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(a,r){const n=a.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===n&&ed.isEqual(o.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const n in a)if(a[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Yt.close,{},a)}_onError(a){this._on(Yt.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ze.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=zp(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=zp(a.columns,a.old_record)),r}}const uu=()=>{},ml={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Zw=[1e3,2e3,5e3,1e4],e_=1e4,t_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a_{constructor(a,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ru,this.transport=null,this.heartbeatIntervalMs=ml.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uu,this.ref=0,this.reconnectTimer=null,this.logger=uu,this.conn=null,this.sendBuffer=[],this.serializer=new Iw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${Tu.websocket}`,this.httpEndpoint=by(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pw.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vw}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},a?this.conn.close(a,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,n){this.logger(a,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tn.connecting:return Sr.Connecting;case Tn.open:return Sr.Open;case Tn.closing:return Sr.Closing;default:return Sr.Closed}}isConnected(){return this.connectionState()===Sr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const n=`realtime:${a}`,o=this.getChannels().find(c=>c.topic===n);if(o)return o;{const c=new ed(`realtime:${a}`,r,this);return this.channels.push(c),c}}push(a){const{topic:r,event:n,payload:o,ref:c}=a,h=()=>{this.encode(a,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${n} (${c})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Fw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ml.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(n=>n.topic===a&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:o,payload:c,ref:h}=r,m=h?`(${h})`:"",p=c.status||"";this.log("receive",`${p} ${n} ${o} ${m}`.trim(),c),this.channels.filter(g=>g._isMember(n)).forEach(g=>g._trigger(o,c,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Yt.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const n=a.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${a}${n}${o}`}_workerObjectUrl(a){let r;if(a)r=a;else{const n=new Blob([t_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r;a?r=a:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const o={access_token:r,version:Hw};r&&n.updateJoinPayload(o),n.joinedOnce&&n._isJoined()&&n._push(Yt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(n=>{try{n(r)}catch(o){this.log("error",`error in ${a} callback`,o)}})}catch(n){this.log("error",`error triggering ${a} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new yy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ml.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,n,o,c,h,m,p,g,v;if(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=a?.timeout)!==null&&n!==void 0?n:Ru,this.heartbeatIntervalMs=(o=a?.heartbeatIntervalMs)!==null&&o!==void 0?o:ml.HEARTBEAT_INTERVAL,this.worker=(c=a?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=a?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=a?.heartbeatCallback)!==null&&m!==void 0?m:uu,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=a?.reconnectAfterMs)!==null&&p!==void 0?p:(b=>Zw[b-1]||e_),this.encode=(g=a?.encode)!==null&&g!==void 0?g:((b,x)=>x(JSON.stringify(b))),this.decode=(v=a?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class td extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function $e(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class r_ extends td{constructor(a,r,n){super(a),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ou extends td{constructor(a,r){super(a),this.name="StorageUnknownError",this.originalError=r}}const ad=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),s_=()=>Response,Du=i=>{if(Array.isArray(i))return i.map(r=>Du(r));if(typeof i=="function"||i!==Object(i))return i;const a={};return Object.entries(i).forEach(([r,n])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));a[o]=Du(n)}),a},n_=i=>{if(typeof i!="object"||i===null)return!1;const a=Object.getPrototypeOf(i);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},du=i=>{var a;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(a=i.error)===null||a===void 0?void 0:a.message)||JSON.stringify(i)},i_=(i,a,r)=>ae(void 0,void 0,void 0,function*(){const n=yield s_();i instanceof n&&!r?.noResolveJson?i.json().then(o=>{const c=i.status||500,h=o?.statusCode||c+"";a(new r_(du(o),c,h))}).catch(o=>{a(new Ou(du(o),o))}):a(new Ou(du(i),i))}),l_=(i,a,r,n)=>{const o={method:i,headers:a?.headers||{}};return i==="GET"||!n?o:(n_(n)?(o.headers=Object.assign({"Content-Type":"application/json"},a?.headers),o.body=JSON.stringify(n)):o.body=n,a?.duplex&&(o.duplex=a.duplex),Object.assign(Object.assign({},o),r))};function Hn(i,a,r,n,o,c){return ae(this,void 0,void 0,function*(){return new Promise((h,m)=>{i(r,l_(a,n,o,c)).then(p=>{if(!p.ok)throw p;return n?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>i_(p,m,n))})})}function Mn(i,a,r,n){return ae(this,void 0,void 0,function*(){return Hn(i,"GET",a,r,n)})}function It(i,a,r,n,o){return ae(this,void 0,void 0,function*(){return Hn(i,"POST",a,n,o,r)})}function Mu(i,a,r,n,o){return ae(this,void 0,void 0,function*(){return Hn(i,"PUT",a,n,o,r)})}function o_(i,a,r,n){return ae(this,void 0,void 0,function*(){return Hn(i,"HEAD",a,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function rd(i,a,r,n,o){return ae(this,void 0,void 0,function*(){return Hn(i,"DELETE",a,n,o,r)})}class c_{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r}then(a,r){return this.execute().then(a,r)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}})}}var xy;class u_{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r,this[xy]="BlobDownloadBuilder",this.promise=null}asStream(){return new c_(this.downloadFn,this.shouldThrowOnError)}then(a,r){return this.getPromise().then(a,r)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}})}}xy=Symbol.toStringTag;const d_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class h_{constructor(a,r={},n,o){this.shouldThrowOnError=!1,this.url=a,this.headers=r,this.bucketId=n,this.fetch=ad(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,r,n,o){return ae(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},qp),o);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),p&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(p))):(c=n,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),o?.headers&&(m=Object.assign(Object.assign({},m),o.headers));const g=this._removeEmptyFolders(r),v=this._getFinalPath(g),b=yield(a=="PUT"?Mu:It)(this.fetch,`${this.url}/object/${v}`,c,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}upload(a,r,n){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,r,n)})}uploadToSignedUrl(a,r,n,o){return ae(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(a),h=this._getFinalPath(c),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:qp.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",g.cacheControl)):(p=n,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType);const b=yield Mu(this.fetch,m.toString(),p,{headers:v});return{data:{path:c,fullPath:b.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if($e(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(a,r){return ae(this,void 0,void 0,function*(){try{let n=this._getFinalPath(a);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const c=yield It(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:o}),h=new URL(this.url+c.url),m=h.searchParams.get("token");if(!m)throw new td("No token returned by API");return{data:{signedUrl:h.toString(),path:a,token:m},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}})}update(a,r,n){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,r,n)})}move(a,r,n){return ae(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}})}copy(a,r,n){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}})}createSignedUrl(a,r,n){return ae(this,void 0,void 0,function*(){try{let o=this._getFinalPath(a),c=yield It(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const h=n?.download?`&download=${n.download===!0?"":n.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}})}createSignedUrls(a,r,n){return ae(this,void 0,void 0,function*(){try{const o=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:a},{headers:this.headers}),c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}})}download(a,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),h=c?`?${c}`:"",m=this._getFinalPath(a),p=()=>Mn(this.fetch,`${this.url}/${o}/${m}${h}`,{headers:this.headers,noResolveJson:!0});return new u_(p,this.shouldThrowOnError)}info(a){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{const n=yield Mn(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Du(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}})}exists(a){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{return yield o_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n)&&n instanceof Ou){const o=n.originalError;if([400,404].includes(o?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(a,r){const n=this._getFinalPath(a),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const m=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&o.push(p);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${n}${g}`)}}}remove(a){return ae(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}list(a,r,n){return ae(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},d_),r),{prefix:a||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}})}listV2(a,r){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},a);return{data:yield It(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const r=[];return a.width&&r.push(`width=${a.width}`),a.height&&r.push(`height=${a.height}`),a.resize&&r.push(`resize=${a.resize}`),a.format&&r.push(`format=${a.format}`),a.quality&&r.push(`quality=${a.quality}`),r.join("&")}}const wy="2.80.0",_y={"X-Client-Info":`storage-js/${wy}`};class f_{constructor(a,r={},n,o){this.shouldThrowOnError=!1;const c=new URL(a);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_y),r),this.fetch=ad(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return ae(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(a);return{data:yield Mn(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}getBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}createBucket(a){return ae(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}})}updateBucket(a,r){return ae(this,void 0,void 0,function*(){try{return{data:yield Mu(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}})}emptyBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(a){const r={};return a&&("limit"in a&&(r.limit=String(a.limit)),"offset"in a&&(r.offset=String(a.offset)),a.search&&(r.search=a.search),a.sortColumn&&(r.sortColumn=a.sortColumn),a.sortOrder&&(r.sortOrder=a.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class m_{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_y),r),this.fetch=ad(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}listBuckets(a){return ae(this,void 0,void 0,function*(){try{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const n=r.toString(),o=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Mn(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}})}}const sd={"X-Client-Info":`storage-js/${wy}`,"Content-Type":"application/json"};class Sy extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Rt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class hu extends Sy{constructor(a,r,n){super(a),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p_ extends Sy{constructor(a,r){super(a),this.name="StorageVectorsUnknownError",this.originalError=r}}var Pp;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Pp||(Pp={}));const nd=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),g_=i=>{if(typeof i!="object"||i===null)return!1;const a=Object.getPrototypeOf(i);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},$p=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),y_=(i,a,r)=>ae(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!r?.noResolveJson){const o=i.status||500,c=i;if(typeof c.json=="function")c.json().then(h=>{const m=h?.statusCode||h?.code||o+"";a(new hu($p(h),o,m))}).catch(()=>{const h=o+"",m=c.statusText||`HTTP ${o} error`;a(new hu(m,o,h))});else{const h=o+"",m=c.statusText||`HTTP ${o} error`;a(new hu(m,o,h))}}else a(new p_($p(i),i))}),v_=(i,a,r,n)=>{const o={method:i,headers:a?.headers||{}};return n?(g_(n)?(o.headers=Object.assign({"Content-Type":"application/json"},a?.headers),o.body=JSON.stringify(n)):o.body=n,Object.assign(Object.assign({},o),r)):o};function b_(i,a,r,n,o,c){return ae(this,void 0,void 0,function*(){return new Promise((h,m)=>{i(r,v_(a,n,o,c)).then(p=>{if(!p.ok)throw p;if(n?.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>y_(p,m,n))})})}function Tt(i,a,r,n,o){return ae(this,void 0,void 0,function*(){return b_(i,"POST",a,n,o,r)})}class x_{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sd),r),this.fetch=nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return ae(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}getIndex(a,r){return ae(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rt(n))return{data:null,error:n};throw n}})}listIndexes(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}deleteIndex(a,r){return ae(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rt(n))return{data:null,error:n};throw n}})}}class w_{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sd),r),this.fetch=nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return ae(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Tt(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}getVectors(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}listVectors(a){return ae(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield Tt(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}queryVectors(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}deleteVectors(a){return ae(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Tt(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}}class __{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sd),r),this.fetch=nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}getBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}listBuckets(){return ae(this,arguments,void 0,function*(a={}){try{return{data:yield Tt(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ae(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}})}}class S_ extends __{constructor(a,r={}){super(a,r.headers||{},r.fetch)}from(a){return new C_(this.url,this.headers,a,this.fetch)}}class C_ extends x_{constructor(a,r,n,o){super(a,r,o),this.vectorBucketName=n}createIndex(a){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(r={}){return a.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new j_(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class j_ extends w_{constructor(a,r,n,o,c){super(a,r,c),this.vectorBucketName=n,this.indexName=o}putVectors(a){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(r={}){return a.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class N_ extends f_{constructor(a,r={},n,o){super(a,r,n,o)}from(a){return new h_(this.url,this.headers,a,this.fetch)}get vectors(){return new S_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new m_(this.url+"/iceberg",this.headers,this.fetch)}}const A_="2.80.0";let Rn="";typeof Deno<"u"?Rn="deno":typeof document<"u"?Rn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rn="react-native":Rn="node";const E_={"X-Client-Info":`supabase-js-${Rn}/${A_}`},R_={headers:E_},T_={schema:"public"},k_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O_={},D_=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),M_=()=>Headers,U_=(i,a,r)=>{const n=D_(r),o=M_();return async(c,h)=>{var m;const p=(m=await a())!==null&&m!==void 0?m:i;let g=new o(h?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),n(c,Object.assign(Object.assign({},h),{headers:g}))}};function z_(i){return i.endsWith("/")?i:i+"/"}function L_(i,a){var r,n;const{db:o,auth:c,realtime:h,global:m}=i,{db:p,auth:g,realtime:v,global:b}=a,x={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},g),c),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(r=b?.headers)!==null&&r!==void 0?r:{}),(n=m?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return i.accessToken?x.accessToken=i.accessToken:delete x.accessToken,x}function B_(i){const a=i?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(z_(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Cy="2.80.0",bs=30*1e3,Uu=3,fu=Uu*bs,q_="http://localhost:9999",P_="supabase.auth.token",$_={"X-Client-Info":`gotrue-js/${Cy}`},zu="X-Supabase-Api-Version",jy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V_=600*1e3;class Un extends Error{constructor(a,r,n){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function se(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class F_ extends Un{constructor(a,r,n){super(a,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function G_(i){return se(i)&&i.name==="AuthApiError"}class Cr extends Un{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class tr extends Un{constructor(a,r,n,o){super(a,n,o),this.name=r,this.status=n}}class Ft extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function I_(i){return se(i)&&i.name==="AuthSessionMissingError"}class fs extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pl extends tr{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class gl extends tr{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Y_(i){return se(i)&&i.name==="AuthImplicitGrantRedirectError"}class Hp extends tr{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lu extends tr{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function mu(i){return se(i)&&i.name==="AuthRetryableFetchError"}class Vp extends tr{constructor(a,r,n){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Bu extends tr{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fp=` 	
\r=`.split(""),Q_=(()=>{const i=new Array(128);for(let a=0;a<i.length;a+=1)i[a]=-1;for(let a=0;a<Fp.length;a+=1)i[Fp[a].charCodeAt(0)]=-2;for(let a=0;a<jl.length;a+=1)i[jl[a].charCodeAt(0)]=a;return i})();function Gp(i,a,r){if(i!==null)for(a.queue=a.queue<<8|i,a.queuedBits+=8;a.queuedBits>=6;){const n=a.queue>>a.queuedBits-6&63;r(jl[n]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const n=a.queue>>a.queuedBits-6&63;r(jl[n]),a.queuedBits-=6}}function Ny(i,a,r){const n=Q_[i];if(n>-1)for(a.queue=a.queue<<6|n,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Ip(i){const a=[],r=h=>{a.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=h=>{W_(h,n,r)};for(let h=0;h<i.length;h+=1)Ny(i.charCodeAt(h),o,c);return a.join("")}function K_(i,a){if(i<=127){a(i);return}else if(i<=2047){a(192|i>>6),a(128|i&63);return}else if(i<=65535){a(224|i>>12),a(128|i>>6&63),a(128|i&63);return}else if(i<=1114111){a(240|i>>18),a(128|i>>12&63),a(128|i>>6&63),a(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function X_(i,a){for(let r=0;r<i.length;r+=1){let n=i.charCodeAt(r);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(i.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}K_(n,a)}}function W_(i,a,r){if(a.utf8seq===0){if(i<=127){r(i);return}for(let n=1;n<6;n+=1)if((i>>7-n&1)===0){a.utf8seq=n;break}if(a.utf8seq===2)a.codepoint=i&31;else if(a.utf8seq===3)a.codepoint=i&15;else if(a.utf8seq===4)a.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|i&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function _s(i){const a=[],r={queue:0,queuedBits:0},n=o=>{a.push(o)};for(let o=0;o<i.length;o+=1)Ny(i.charCodeAt(o),r,n);return new Uint8Array(a)}function J_(i){const a=[];return X_(i,r=>a.push(r)),new Uint8Array(a)}function jr(i){const a=[],r={queue:0,queuedBits:0},n=o=>{a.push(o)};return i.forEach(o=>Gp(o,r,n)),Gp(null,r,n),a.join("")}function Z_(i){return Math.round(Date.now()/1e3)+i}function eS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const a=Math.random()*16|0;return(i=="x"?a:a&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",xr={tested:!1,writable:!1},Ay=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xr.tested)return xr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),xr.tested=!0,xr.writable=!0}catch{xr.tested=!0,xr.writable=!1}return xr.writable};function tS(i){const a={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{a[c]=o})}catch{}return r.searchParams.forEach((n,o)=>{a[o]=n}),a}const Ey=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),aS=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",xs=async(i,a,r)=>{await i.setItem(a,JSON.stringify(r))},wr=async(i,a)=>{const r=await i.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wa=async(i,a)=>{await i.removeItem(a)};class Ul{constructor(){this.promise=new Ul.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}Ul.promiseConstructor=Promise;function pu(i){const a=i.split(".");if(a.length!==3)throw new Bu("Invalid JWT structure");for(let n=0;n<a.length;n++)if(!H_.test(a[n]))throw new Bu("JWT not in base64url format");return{header:JSON.parse(Ip(a[0])),payload:JSON.parse(Ip(a[1])),signature:_s(a[2]),raw:{header:a[0],payload:a[1]}}}async function rS(i){return await new Promise(a=>{setTimeout(()=>a(null),i)})}function sS(i,a){return new Promise((n,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await i(c);if(!a(c,null,h)){n(h);return}}catch(h){if(!a(c,h)){o(h);return}}})()})}function nS(i){return("0"+i.toString(16)).substr(-2)}function iS(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(a),Array.from(a,nS).join("")}async function lS(i){const r=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(n);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function oS(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await lS(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ms(i,a,r=!1){const n=iS();let o=n;r&&(o+="/PASSWORD_RECOVERY"),await xs(i,`${a}-code-verifier`,o);const c=await oS(n);return[c,n===c?"plain":"s256"]}const cS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uS(i){const a=i.headers.get(zu);if(!a||!a.match(cS))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function dS(i){if(!i)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(i<=a)throw new Error("JWT has expired")}function hS(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ps(i){if(!fS.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gu(){const i={};return new Proxy(i,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mS(i,a){return new Proxy(i,{get:(r,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const c=n.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,o)}return!a.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(r,n,o)}})}function Yp(i){return JSON.parse(JSON.stringify(i))}const _r=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),pS=[502,503,504];async function Qp(i){var a;if(!aS(i))throw new Lu(_r(i),0);if(pS.includes(i.status))throw new Lu(_r(i),i.status);let r;try{r=await i.json()}catch(c){throw new Cr(_r(c),c)}let n;const o=uS(i);if(o&&o.getTime()>=jy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Vp(_r(r),i.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(n==="session_not_found")throw new Ft}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Vp(_r(r),i.status,r.weak_password.reasons);throw new F_(_r(r),i.status||500,n)}const gS=(i,a,r,n)=>{const o={method:i,headers:a?.headers||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};async function ue(i,a,r,n){var o;const c=Object.assign({},n?.headers);c[zu]||(c[zu]=jy["2024-01-01"].name),n?.jwt&&(c.Authorization=`Bearer ${n.jwt}`);const h=(o=n?.query)!==null&&o!==void 0?o:{};n?.redirectTo&&(h.redirect_to=n.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await yS(i,a,r+m,{headers:c,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(p):{data:Object.assign({},p),error:null}}async function yS(i,a,r,n,o,c){const h=gS(a,n,o,c);let m;try{m=await i(r,Object.assign({},h))}catch(p){throw console.error(p),new Lu(_r(p),0)}if(m.ok||await Qp(m),n?.noResolveJson)return m;try{return await m.json()}catch(p){await Qp(p)}}function Gt(i){var a;let r=null;xS(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=Z_(i.expires_in)));const n=(a=i.user)!==null&&a!==void 0?a:i;return{data:{session:r,user:n},error:null}}function Kp(i){const a=Gt(i);return!a.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(a.data.weak_password=i.weak_password),a}function Ja(i){var a;return{data:{user:(a=i.user)!==null&&a!==void 0?a:i},error:null}}function vS(i){return{data:i,error:null}}function bS(i){const{action_link:a,email_otp:r,hashed_token:n,redirect_to:o,verification_type:c}=i,h=As(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:r,hashed_token:n,redirect_to:o,verification_type:c},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function Xp(i){return i}function xS(i){return i.access_token&&i.refresh_token&&i.expires_in}const yu=["global","local","others"];class wS{constructor({url:a="",headers:r={},fetch:n}){this.url=a,this.headers=r,this.fetch=Ey(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,r=yu[0]){if(yu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yu.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(a,r={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ja})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async generateLink(a){try{const{options:r}=a,n=As(a,["options"]),o=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(o.new_email=n?.newEmail,delete o.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:bS,redirectTo:r?.redirectTo})}catch(r){if(se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Ja})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,n,o,c,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},v=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(c=(o=a?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Xp});if(v.error)throw v.error;const b=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(S=>{const N=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(S.split(";")[1].split("=")[1]);g[`${j}Page`]=N}),g.total=parseInt(x)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(se(g))return{data:{users:[]},error:g};throw g}}async getUserById(a){ps(a);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Ja})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){ps(a);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:Ja})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async deleteUser(a,r=!1){ps(a);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ja})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async _listFactors(a){ps(a.userId);try{const{data:r,error:n}=await ue(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:n}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteFactor(a){ps(a.userId),ps(a.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _listOAuthClients(a){var r,n,o,c,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},v=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(c=(o=a?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Xp});if(v.error)throw v.error;const b=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(S=>{const N=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(S.split(";")[1].split("=")[1]);g[`${j}Page`]=N}),g.total=parseInt(x)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(se(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(a){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _getOAuthClient(a){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _updateOAuthClient(a,r){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(a){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(a){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}}function Wp(i={}){return{getItem:a=>i[a]||null,setItem:(a,r)=>{i[a]=r},removeItem:a=>{delete i[a]}}}const gs={debug:!!(globalThis&&Ay()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ry extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class _S extends Ry{}async function SS(i,a,r){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,a);const n=new globalThis.AbortController;return a>0&&setTimeout(()=>{n.abort(),gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async o=>{if(o){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await r()}finally{gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(a===0)throw gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new _S(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(gs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function CS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ty(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function jS(i){return parseInt(i,16)}function NS(i){const a=new TextEncoder().encode(i);return"0x"+Array.from(a,n=>n.toString(16).padStart(2,"0")).join("")}function AS(i){var a;const{chainId:r,domain:n,expirationTime:o,issuedAt:c=new Date,nonce:h,notBefore:m,requestId:p,resources:g,scheme:v,uri:b,version:x}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((a=i.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const w=Ty(i.address),S=v?`${v}://${n}`:n,N=i.statement?`${i.statement}
`:"",j=`${S} wants you to sign in with your Ethereum account:
${w}

${N}`;let A=`URI: ${b}
Version: ${x}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(o&&(A+=`
Expiration Time: ${o.toISOString()}`),m&&(A+=`
Not Before: ${m.toISOString()}`),p&&(A+=`
Request ID: ${p}`),g){let R=`
Resources:`;for(const k of g){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);R+=`
- ${k}`}A+=R}return`${j}
${A}`}class We extends Error{constructor({message:a,code:r,cause:n,name:o}){var c;super(a,{cause:n}),this.__isWebAuthnError=!0,this.name=(c=o??(n instanceof Error?n.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class Nl extends We{constructor(a,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:a}),this.name="WebAuthnUnknownError",this.originalError=r}}function ES({error:i,options:a}){var r,n,o;const{publicKey:c}=a;if(!c)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(a.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(a.mediation==="conditional"&&((n=c.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new We({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return c.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const h=window.location.hostname;if(ky(h)){if(c.rp.id!==h)return new We({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function RS({error:i,options:a}){const{publicKey:r}=a;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(a.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new We({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const n=window.location.hostname;if(ky(n)){if(r.rpId!==n)return new We({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class TS{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const kS=new TS;function OS(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:a,user:r,excludeCredentials:n}=i,o=As(i,["challenge","user","excludeCredentials"]),c=_s(a).buffer,h=Object.assign(Object.assign({},r),{id:_s(r.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:c,user:h});if(n&&n.length>0){m.excludeCredentials=new Array(n.length);for(let p=0;p<n.length;p++){const g=n[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:_s(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function DS(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:a,allowCredentials:r}=i,n=As(i,["challenge","allowCredentials"]),o=_s(a).buffer,c=Object.assign(Object.assign({},n),{challenge:o});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];c.allowCredentials[h]=Object.assign(Object.assign({},m),{id:_s(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return c}function MS(i){var a;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:jr(new Uint8Array(i.response.attestationObject)),clientDataJSON:jr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function US(i){var a;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,n=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:jr(new Uint8Array(o.authenticatorData)),clientDataJSON:jr(new Uint8Array(o.clientDataJSON)),signature:jr(new Uint8Array(o.signature)),userHandle:o.userHandle?jr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function ky(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Jp(){var i,a;return!!(ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function zS(i){try{const a=await navigator.credentials.create(i);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Nl("Browser returned unexpected credential type",a)}:{data:null,error:new Nl("Empty credential response",a)}}catch(a){return{data:null,error:ES({error:a,options:i})}}}async function LS(i){try{const a=await navigator.credentials.get(i);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Nl("Browser returned unexpected credential type",a)}:{data:null,error:new Nl("Empty credential response",a)}}catch(a){return{data:null,error:RS({error:a,options:i})}}}const BS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},qS={userVerification:"preferred",hints:["security-key"]};function Al(...i){const a=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of i)if(o)for(const c in o){const h=o[c];if(h!==void 0)if(Array.isArray(h))n[c]=h;else if(r(h))n[c]=h;else if(a(h)){const m=n[c];a(m)?n[c]=Al(m,h):n[c]=Al(h)}else n[c]=h}return n}function PS(i,a){return Al(BS,i,a||{})}function $S(i,a){return Al(qS,i,a||{})}class HS{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:r,friendlyName:n,signal:o},c){try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:a,webauthn:r});if(!h)return{data:null,error:m};const p=o??kS.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${n}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=PS(h.webauthn.credential_options.publicKey,c?.create),{data:v,error:b}=await zS({publicKey:g,signal:p});return v?{data:{factorId:a,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const g=$S(h.webauthn.credential_options.publicKey,c?.request),{data:v,error:b}=await LS(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:p}));return v?{data:{factorId:a,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(h){return se(h)?{data:null,error:h}:{data:null,error:new Cr("Unexpected error in challenge",h)}}}async _verify({challengeId:a,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:a,webauthn:n})}async _authenticate({factorId:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o}},c){if(!r)return{data:null,error:new Un("rpId is required for WebAuthn authentication")};try{if(!Jp())return{data:null,error:new Cr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:a,webauthn:{rpId:r,rpOrigins:n},signal:o},{request:c});if(!h)return{data:null,error:m};const{webauthn:p}=h;return this._verify({factorId:a,challengeId:h.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:n,credential_response:p.credential_response}})}catch(h){return se(h)?{data:null,error:h}:{data:null,error:new Cr("Unexpected error in authenticate",h)}}}async _register({friendlyName:a,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o},c){if(!r)return{data:null,error:new Un("rpId is required for WebAuthn registration")};try{if(!Jp())return{data:null,error:new Cr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:a});if(!h)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===a&&x.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:o},{create:c});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:n,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(h){return se(h)?{data:null,error:h}:{data:null,error:new Cr("Unexpected error in register",h)}}}}CS();const VS={url:q_,storageKey:P_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Zp(i,a,r){return await r()}const ys={};class zn{get jwks(){var a,r;return(r=(a=ys[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){ys[this.storageKey]=Object.assign(Object.assign({},ys[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=ys[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){ys[this.storageKey]=Object.assign(Object.assign({},ys[this.storageKey]),{cachedAt:a})}constructor(a){var r,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},VS),a);if(this.storageKey=c.storageKey,this.instanceID=(r=zn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,zn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&ut()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new wS({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Ey(c.fetch),this.lock=c.lock||Zp,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:ut()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=SS:this.lock=Zp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new HS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Ay()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wp(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Wp(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Cy}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let r={},n="none";if(ut()&&(r=tS(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ut()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,n);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Y_(c)){const p=(a=c.details)===null||a===void 0?void 0:a.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return se(r)?this._returnResult({error:r}):this._returnResult({error:new Cr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,n,o;try{const c=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=a?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Gt}),{data:h,error:m}=c;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(c){if(se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(a){var r,n,o;try{let c;if("email"in a){const{email:v,password:b,options:x}=a;let w=null,S=null;this.flowType==="pkce"&&([w,S]=await ms(this.storage,this.storageKey)),c=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:v,password:b,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:w,code_challenge_method:S},xform:Gt})}else if("phone"in a){const{phone:v,password:b,options:x}=a;c=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(n=x?.data)!==null&&n!==void 0?n:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Gt})}else throw new pl("You must provide either an email or phone number and a password");const{data:h,error:m}=c;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(c){if(se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(a){try{let r;if("email"in a){const{email:c,password:h,options:m}=a;r=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Kp})}else if("phone"in a){const{phone:c,password:h,options:m}=a;r=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Kp})}else throw new pl("You must provide either an email or phone number and a password");const{data:n,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const c=new fs;return this._returnResult({data:{user:null,session:null},error:c})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(a){var r,n,o,c;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=a.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=a.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=a.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;switch(r){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(a){var r,n,o,c,h,m,p,g,v,b,x;let w,S;if("message"in a)w=a.message,S=a.signature;else{const{chain:N,wallet:j,statement:A,options:R}=a;let k;if(ut())if(typeof j=="object")k=j;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")k=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=j}const B=new URL((r=R?.url)!==null&&r!==void 0?r:window.location.href),V=await k.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=Ty(V[0]);let I=(n=R?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const P=await k.request({method:"eth_chainId"});I=jS(P)}const Y={domain:B.host,address:G,statement:A,uri:B.href,version:"1",chainId:I,nonce:(o=R?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(c=R?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=R?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=R?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=R?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=R?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=AS(Y),S=await k.request({method:"personal_sign",params:[NS(w),G]})}try{const{data:N,error:j}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:S},!((b=a.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(x=a.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Gt});if(j)throw j;if(!N||!N.session||!N.user){const A=new fs;return this._returnResult({data:{user:null,session:null},error:A})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:j})}catch(N){if(se(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(a){var r,n,o,c,h,m,p,g,v,b,x,w;let S,N;if("message"in a)S=a.message,N=a.signature;else{const{chain:j,wallet:A,statement:R,options:k}=a;let B;if(ut())if(typeof A=="object")B=A;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))B=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=A}const V=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in B&&B.signIn){const G=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),R?{statement:R}:null));let I;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")I=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)I=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)S=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),N=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${V.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(o=(n=k?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=k?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((h=k?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((m=k?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((p=k?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((g=k?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((b=(v=k?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...k.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const G=await B.signMessage(new TextEncoder().encode(S),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=G}}try{const{data:j,error:A}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:jr(N)},!((x=a.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=a.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Gt});if(A)throw A;if(!j||!j.session||!j.user){const R=new fs;return this._returnResult({data:{user:null,session:null},error:R})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:A})}catch(j){if(se(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(a){const r=await wr(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(r??"").split("/");try{const{data:c,error:h}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:n},xform:Gt});if(await Wa(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const m=new fs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:h})}catch(c){if(se(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(a){try{const{options:r,provider:n,token:o,access_token:c,nonce:h}=a,m=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Gt}),{data:p,error:g}=m;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const v=new fs;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(a){var r,n,o,c,h;try{if("email"in a){const{email:m,options:p}=a;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await ms(this.storage,this.storageKey));const{error:b}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(n=p?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in a){const{phone:m,options:p}=a,{data:g,error:v}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(c=p?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:v})}throw new pl("You must provide either an email or phone number.")}catch(m){if(se(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(a){var r,n;try{let o,c;"options"in a&&(o=(r=a.options)===null||r===void 0?void 0:r.redirectTo,c=(n=a.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:m}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Gt});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(o){if(se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(a){var r,n,o;try{let c=null,h=null;this.flowType==="pkce"&&([c,h]=await ms(this.storage,this.storageKey));const m=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(n=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=a?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:vS});return this._returnResult(m)}catch(c){if(se(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:n}=a;if(n)throw n;if(!r)throw new Ft;const{error:o}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(a){if(se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:n,type:o,options:c}=a,{error:h}=await ue(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in a){const{phone:n,type:o,options:c}=a,{data:h,error:m}=await ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:m})}throw new pl("You must provide either an email or phone number and a type")}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await wr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const n=a.expires_at?a.expires_at*1e3-Date.now()<fu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",a.expires_at),!n){if(this.userStorage){const h=await wr(this.userStorage,this.storageKey+"-user");h?.user?a.user=h.user:a.user=gu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};a.user=mS(a.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:o,error:c}=await this._callRefreshToken(a.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Ja}):await this._useSession(async r=>{var n,o,c;const{data:h,error:m}=r;if(m)throw m;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ft}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Ja})})}catch(r){if(se(r))return I_(r)&&(await this._removeSession(),await Wa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async n=>{const{data:o,error:c}=n;if(c)throw c;if(!o.session)throw new Ft;const h=o.session;let m=null,p=null;this.flowType==="pkce"&&a.email!=null&&([m,p]=await ms(this.storage,this.storageKey));const{data:g,error:v}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:Ja});if(v)throw v;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(n){if(se(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Ft;const r=Date.now()/1e3;let n=r,o=!0,c=null;const{payload:h}=pu(a.access_token);if(h.exp&&(n=h.exp,o=n<=r),o){const{data:m,error:p}=await this._callRefreshToken(a.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:p}=await this._getUser(a.access_token);if(p)throw p;c={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var n;if(!a){const{data:h,error:m}=r;if(m)throw m;a=(n=h.session)!==null&&n!==void 0?n:void 0}if(!a?.refresh_token)throw new Ft;const{data:o,error:c}=await this._callRefreshToken(a.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(a,r){try{if(!ut())throw new gl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new gl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Hp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Hp("No code detected.");const{data:R,error:k}=await this._exchangeCodeForSession(a.code);if(k)throw k;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:c,refresh_token:h,expires_in:m,expires_at:p,token_type:g}=a;if(!c||!m||!h||!g)throw new gl("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(m);let x=v+b;p&&(x=parseInt(p));const w=x-v;w*1e3<=bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const S=x-b;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,x,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,x,v);const{data:N,error:j}=await this._getUser(c);if(j)throw j;const A={provider_token:n,provider_refresh_token:o,access_token:c,expires_in:b,expires_at:x,refresh_token:h,token_type:g,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:a.type},error:null})}catch(n){if(se(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await wr(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:o,error:c}=r;if(c)return this._returnResult({error:c});const h=(n=o.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:m}=await this.admin.signOut(h,a);if(m&&!(G_(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return a!=="others"&&(await this._removeSession(),await Wa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const r=eS(),n={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(a){return await this._useSession(async r=>{var n,o;try{const{data:{session:c},error:h}=r;if(h)throw h;await((n=this.stateChangeEmitters.get(a))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",a,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",c),console.error(c)}})}async resetPasswordForEmail(a,r={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=await ms(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(se(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var a;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var r;try{const{data:n,error:o}=await this._useSession(async c=>{var h,m,p,g,v;const{data:b,error:x}=c;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(h=a.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=a.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return ut()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:a.provider,url:n?.url},error:null})}catch(n){if(se(n))return this._returnResult({data:{provider:a.provider,url:null},error:n});throw n}}async linkIdentityIdToken(a){return await this._useSession(async r=>{var n;try{const{error:o,data:{session:c}}=r;if(o)throw o;const{options:h,provider:m,token:p,access_token:g,nonce:v}=a,b=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=c?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:m,id_token:p,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Gt}),{data:x,error:w}=b;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new fs}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(o){if(se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(a){try{return await this._useSession(async r=>{var n,o;const{data:c,error:h}=r;if(h)throw h;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(o=(n=c.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await sS(async o=>(o>0&&await rS(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:Gt})),(o,c)=>{const h=200*Math.pow(2,o);return c&&mu(c)&&Date.now()+h-n<bs})}catch(n){if(this._debug(r,"error",n),se(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",n),ut()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:a,url:n},error:null}}async _recoverAndRefresh(){var a,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await wr(this.storage,this.storageKey);if(o&&this.userStorage){let h=await wr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await xs(this.userStorage,this.storageKey+"-user",h)),o.user=(a=h?.user)!==null&&a!==void 0?a:gu()}else if(o&&!o.user&&!o.user){const h=await wr(this.storage,this.storageKey+"-user");h&&h?.user?(o.user=h.user,await Wa(this.storage,this.storageKey+"-user"),await xs(this.storage,this.storageKey,o)):o.user=gu()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<fu;if(this._debug(n,`session has${c?"":" not"} expired with margin of ${fu}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),mu(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(o.access_token);!m&&h?.user?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}}async _callRefreshToken(a){var r,n;if(!a)throw new Ft;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ul;const{data:c,error:h}=await this._refreshAccessToken(a);if(h)throw h;if(!c.session)throw new Ft;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={data:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(o,"error",c),se(c)){const h={data:null,error:c};return mu(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(a,r,n=!0){const o=`#_notifyAllSubscribers(${a})`;this._debug(o,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:a,session:r});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,r)}catch(p){c.push(p)}});if(await Promise.all(h),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const r=Object.assign({},a),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await xs(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=Yp(o);await xs(this.storage,this.storageKey,c)}else{const o=Yp(r);await xs(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Wa(this.storage,this.storageKey),await Wa(this.storage,this.storageKey+"-code-verifier"),await Wa(this.storage,this.storageKey+"-user"),this.userStorage&&await Wa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&ut()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),bs);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-a)/bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${bs}ms, refresh threshold is ${Uu} ticks`),o<=Uu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Ry)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,n){const o=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[c,h]=await ms(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(m.toString())}if(n?.queryParams){const c=new URLSearchParams(n.queryParams);o.push(c.toString())}return n?.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${a}?${o.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var n;const{data:o,error:c}=r;return c?this._returnResult({data:null,error:c}):await ue(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(a){try{return await this._useSession(async r=>{var n,o;const{data:c,error:h}=r;if(h)return this._returnResult({data:null,error:h});const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:p,error:g}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(n=c?.session)===null||n===void 0?void 0:n.access_token});return g?this._returnResult({data:null,error:g}):(a.factorType==="totp"&&p.type==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?MS(a.webauthn.credential_response):US(a.webauthn.credential_response)})}:{code:a.code}),{data:m,error:p}=await ue(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=await ue(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:OS(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:DS(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(a){const{data:r,error:n}=await this._challenge({factorId:a.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){var a;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(a=r?.factors)!==null&&a!==void 0?a:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var a,r;const{data:{session:n},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=pu(n.access_token);let h=null;c.aal&&(h=c.aal);let m=h;((r=(a=n.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const g=c.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Ft})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(a,r){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Ft});const h=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&ut()&&!r?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(a,r){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Ft});const h=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&ut()&&!r?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(a,r={keys:[]}){let n=r.keys.find(m=>m.kid===a);if(n)return n;const o=Date.now();if(n=this.jwks.keys.find(m=>m.kid===a),n&&this.jwks_cached_at+V_>o)return n;const{data:c,error:h}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,n=c.keys.find(m=>m.kid===a),!n)?null:n}async getClaims(a,r={}){try{let n=a;if(!n){const{data:w,error:S}=await this.getSession();if(S||!w.session)return this._returnResult({data:null,error:S});n=w.session.access_token}const{header:o,payload:c,signature:h,raw:{header:m,payload:p}}=pu(n);r?.allowExpired||dS(c.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:c,header:o,signature:h},error:null}}const v=hS(o.alg),b=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,h,J_(`${m}.${p}`)))throw new Bu("Invalid JWT signature");return{data:{claims:c,header:o,signature:h},error:null}}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}}zn.nextInstanceID={};const FS=zn;class GS extends FS{constructor(a){super(a)}}class IS{constructor(a,r,n){var o,c,h;this.supabaseUrl=a,this.supabaseKey=r;const m=B_(a);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,g={db:T_,realtime:O_,auth:Object.assign(Object.assign({},k_),{storageKey:p}),global:R_},v=L_(n??{},g);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=U_(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new qw(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new N_(this.storageUrl.href,this.headers,this.fetch,n?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Uw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,r,n)}channel(a,r={config:{}}){return this.realtime.channel(a,r)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(a=n.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:c,storageKey:h,flowType:m,lock:p,debug:g,throwOnError:v},b,x){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GS({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),b),storageKey:h,autoRefreshToken:a,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:c,flowType:m,lock:p,debug:g,throwOnError:v,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new a_(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(a,r,n){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YS=(i,a,r)=>new IS(i,a,r);function QS(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const a=i.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}QS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const KS=!0,XS="https://xtdudfccgbdanmmncwhn.supabase.co",WS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",W=YS(XS,WS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Oy=Object.freeze(Object.defineProperty({__proto__:null,isSupabaseConfigured:KS,supabase:W},Symbol.toStringTag,{value:"Module"})),JS=()=>{C.useEffect(()=>{const i=async(r,n)=>{if(r==="SIGNED_IN"&&n?.user){const o=n.user,c=new URLSearchParams(window.location.search),h=c.get("invited_to_campaign"),m=c.get("role"),p=h||o.user_metadata?.campaign_id,g=m||o.user_metadata?.role;if(p&&g)try{const{error:v}=await W.from("campaign_members").insert({campaign_id:p,user_id:o.id,is_admin:g==="admin",is_gm:g==="gm",is_player:g==="player"});if(!v){const b=window.location.pathname;window.history.replaceState({},"",b)}}catch{}}},{data:{subscription:a}}=W.auth.onAuthStateChange(i);return()=>{a.unsubscribe()}},[])};function ZS(){const[i,a]=C.useState("sign_in"),[r,n]=C.useState(""),[o,c]=C.useState(""),[h,m]=C.useState(!1),[p,g]=C.useState(""),{signIn:v,signUp:b}=er();return{view:i,setView:a,email:r,setEmail:n,password:o,setPassword:c,loading:h,message:p,handleSubmit:async w=>{w.preventDefault(),m(!0),g("");try{let S;i==="sign_up"?(S=await b(r,o),S.success?g("Check your email for the confirmation link!"):g(S.error||"Sign up failed")):(S=await v(r,o),S.success||g(S.error||"Sign in failed"))}catch(S){g(S instanceof Error?S.message:"An error occurred")}finally{m(!1)}}}}function Te({variant:i="default",size:a="md",className:r="",children:n,...o}){const c={default:"bg-surface-mid text-text-main hover:bg-surface-high border border-border",primary:"bg-primary text-white hover:brightness-110 shadow-lg shadow-primary/20",secondary:"bg-side text-white hover:bg-primary border border-white/10",outline:"border-2 border-primary/20 bg-transparent text-primary hover:bg-primary/5",danger:"bg-accent hover:brightness-110 text-white border-none",ghost:"bg-transparent hover:bg-hud-accent text-text-muted",premium:"btn-mgt"},h={sm:"px-2 py-1 text-[10px] tracking-widest uppercase",md:"px-6 py-2.5",full:"w-full justify-center"},m=`
    inline-flex items-center gap-2 transition-all duration-300
    active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed font-black uppercase tracking-widest text-xs
    ${i==="premium"?"":"rounded-[2px]"}
    ${c[i]}
    ${h[a]}
    ${r}
  `.trim();return u.jsx("button",{className:m,...o,children:n})}const vu=`
  w-full px-4 py-2 
  bg-surface-low
  border border-border rounded-[2px]
  text-xs font-black tracking-widest transition-all duration-300
  text-text-main uppercase
  placeholder:text-muted/50 placeholder:font-normal placeholder:lowercase
  focus:outline-none focus:ring-0 focus:border-primary focus:bg-white
  disabled:opacity-30 disabled:cursor-not-allowed
`,oe=C.forwardRef(({label:i,type:a="text",className:r,required:n=!1,error:o,id:c,...h},m)=>{const p=()=>{const g=o?"border-accent focus:border-accent":"";if(a==="textarea"){const b=h;return u.jsx("textarea",{id:c,ref:m,className:`${vu} ${g} ${r||""}`,required:n,...b})}if(a==="select"){const{children:b,...x}=h;return u.jsxs("div",{className:"relative",children:[u.jsx("select",{id:c,ref:m,className:`${vu} appearance-none ${g} ${r||""}`,required:n,...x,children:b}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-muted",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"9 5l7 7-7 7"})})})]})}const v=h;return u.jsx("input",{id:c,ref:m,type:a,step:a==="number"?"any":void 0,className:`${vu} ${g} ${r||""}`,required:n,...v})};return u.jsxs("div",{className:"space-y-1 min-w-0",children:[i&&u.jsxs("label",{htmlFor:c,className:"block text-[8px] font-black uppercase tracking-[0.3em] text-muted ml-0.5",children:[i," ",n&&u.jsx("span",{className:"text-primary",children:"*"})]}),u.jsxs("div",{className:"relative group",children:[p(),u.jsx("div",{className:"absolute -inset-[1px] rounded-[2px] pointer-events-none border border-primary/0 group-focus-within:border-primary/40 transition-all duration-300"})]}),o&&u.jsxs("p",{className:"text-[8px] font-black text-accent uppercase tracking-[0.2em] ml-0.5 animate-pulse",children:["ERR: ",o]})]})});oe.displayName="FormField";function eC(){const{view:i,setView:a,email:r,setEmail:n,password:o,setPassword:c,loading:h,message:m,handleSubmit:p}=ZS();return u.jsxs("div",{className:"min-h-screen bg-transparent selection:bg-primary/20 relative flex flex-col items-center justify-center p-4",children:[u.jsx("div",{className:"scanlines"}),u.jsxs("div",{className:"max-w-md w-full space-y-8 animate-hud relative z-10",children:[u.jsxs("div",{className:"text-center space-y-4 mb-12",children:[u.jsxs("div",{className:"inline-flex flex-col items-center",children:[u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("h1",{className:"text-5xl font-black tracking-tighter uppercase text-text-main leading-none",children:"TRAVELLER"}),u.jsx("span",{className:"text-xs font-black text-primary border-2 border-primary px-2 py-0.5",children:"DASH"})]}),u.jsxs("div",{className:"h-1.5 w-full bg-primary mt-2 flex justify-between px-1",children:[u.jsx("div",{className:"w-4 h-full bg-white/20"}),u.jsx("div",{className:"w-12 h-full bg-white/20"}),u.jsx("div",{className:"w-4 h-full bg-white/20"})]})]}),u.jsx("p",{className:"text-[10px] text-muted font-black uppercase tracking-[0.4em] mt-4",children:"Unified Stellar Operations Framework // RC-01"})]}),u.jsxs("div",{className:"card-mgt hud-frame shadow-2xl p-8 bg-card/80 backdrop-blur-md",children:[u.jsxs("div",{className:"mgt-header-bar -mx-8 -mt-8 mb-8",children:[u.jsx("span",{className:"text-xs",children:i==="sign_in"?"AUTH // COMM-LINK":"REG // ENROLLMENT"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-primary animate-pulse"}),u.jsx("div",{className:"w-2 h-2 bg-white/40"})]})]}),u.jsxs("div",{className:"flex border border-border bg-surface-low mb-8 p-1",children:[u.jsx("button",{type:"button",onClick:()=>a("sign_in"),className:`flex-1 py-2 text-[10px] font-black tracking-[0.2em] transition-all duration-300 ${i==="sign_in"?"bg-primary text-white":"text-muted hover:text-text-main"}`,children:"SIGN IN"}),u.jsx("button",{type:"button",onClick:()=>a("sign_up"),className:`flex-1 py-2 text-[10px] font-black tracking-[0.2em] transition-all duration-300 ${i==="sign_up"?"bg-primary text-white":"text-muted hover:text-text-main"}`,children:"SIGN UP"})]}),u.jsxs("form",{className:"space-y-6",onSubmit:p,children:[u.jsx(oe,{label:"Personnel Identifier (Email)",type:"email",autoComplete:"email",required:!0,value:r,onChange:g=>n(g.target.value),placeholder:"commander@imperium.org"}),u.jsx(oe,{label:"Security Key (Password)",type:"password",autoComplete:i==="sign_up"?"new-password":"current-password",required:!0,value:o,onChange:g=>c(g.target.value),placeholder:""}),m&&u.jsxs("div",{className:`p-3 border text-[8px] font-black uppercase tracking-widest transition-all animate-hud ${m.toLowerCase().includes("error")||m.toLowerCase().includes("failed")?"border-accent bg-accent/5 text-accent":"border-primary bg-primary/5 text-primary"}`,children:[m.toLowerCase().includes("error")?"INIT_FAILURE: ":"",m]}),u.jsx(Te,{type:"submit",disabled:h,variant:"premium",className:"w-full py-4",children:h?"INITIALIZING...":`AUTHORIZE ${i==="sign_in"?"ACCESS":"REGISTRATION"}`})]})]}),u.jsx("div",{className:"text-center opacity-40",children:u.jsx("p",{className:"text-[8px] font-black tracking-[0.5em] uppercase",children:"Mongoose Traveller 2nd Edition Dashboard"})})]})]})}const tC=i=>{const a=[];let r="weak";i.length<8&&a.push("Password must be at least 8 characters long");const n=/[a-z]/.test(i),o=/[A-Z]/.test(i),c=/\d/.test(i),h=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(i);n||a.push("Password must contain at least one lowercase letter"),o||a.push("Password must contain at least one uppercase letter"),c||a.push("Password must contain at least one number"),h||a.push("Password must contain at least one special character");const m=[n,o,c,h].filter(Boolean).length;let p=0;i.length>=12?p=2:i.length>=8&&(p=1);const g=m+p;return g>=5?r="strong":g>=3&&(r="medium"),{isValid:a.length===0,errors:a,strength:r}},aC=i=>{switch(i){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},rC=i=>{switch(i){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},sC=i=>i.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:i.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(i)?/^[_-]|[_-]$/.test(i)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function nC({onComplete:i,loading:a=!1}){const[r,n]=C.useState(""),[o,c]=C.useState(""),[h,m]=C.useState({}),[p,g]=C.useState(!1),v=()=>{const w={};if(r.trim()?r.trim().length<2?w.displayName="Name must be at least 2 characters long":r.trim().length>50&&(w.displayName="Name must be less than 50 characters long"):w.displayName="Name is required",!o.trim())w.username="Username is required";else{const S=sC(o.trim());S.isValid||(w.username=S.error||"Invalid username")}return m(w),Object.keys(w).length===0},b=async w=>{if(w.preventDefault(),!!v()){g(!0);try{const S=await i({displayName:r.trim(),username:o.trim().toLowerCase()});!S.success&&S.error&&(S.error.toLowerCase().includes("username")?m({username:S.error}):m({general:S.error}))}catch{m({general:"An unexpected error occurred. Please try again."})}finally{g(!1)}}},x=r.trim()&&o.trim()&&Object.keys(h).length===0;return u.jsxs("div",{className:"min-h-screen bg-main transition-colors duration-500",children:[u.jsx("div",{className:"bg-side border-b border-border px-4 py-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("h1",{className:"text-2xl font-black tracking-tighter uppercase text-text-main",children:"Complete Your Profile"}),u.jsx("p",{className:"text-sm text-muted font-medium",children:"Set up your profile to start using Traveller Dashboard"})]})}),u.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto h-16 w-16 bg-primary/10 border-2 border-primary/40 flex items-center justify-center mb-4",children:u.jsx(Ln,{className:"h-8 w-8 text-primary shadow-[0_0_15px_var(--color-primary-glow)]"})}),u.jsx("h2",{className:"text-3xl font-black tracking-tighter uppercase text-text-main",children:"Welcome to Traveller Dashboard"}),u.jsx("p",{className:"mt-2 text-muted font-medium",children:"Let's set up your profile to get started"})]}),u.jsx("div",{className:"card-modern shadow-xl",children:u.jsxs("form",{className:"space-y-4",onSubmit:b,children:[u.jsxs("div",{children:[u.jsx(oe,{label:"Your Name",type:"text",required:!0,value:r,onChange:w=>{n(w.target.value),h.displayName&&m(S=>({...S,displayName:""}))},placeholder:"Enter your first name or full name",error:h.displayName}),u.jsx("p",{className:"mt-1 text-[10px] font-bold uppercase tracking-widest text-muted italic ml-1",children:"This is how other players will see you in campaigns"})]}),u.jsxs("div",{children:[u.jsx(oe,{label:"Username",type:"text",required:!0,value:o,onChange:w=>{c(w.target.value),h.username&&m(S=>({...S,username:""}))},placeholder:"Choose a unique username",error:h.username}),u.jsx("p",{className:"mt-1 text-[10px] font-bold uppercase tracking-widest text-muted italic ml-1",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),h.general&&u.jsx("div",{className:"p-3 text-xs font-bold uppercase tracking-widest bg-accent/10 text-accent border border-accent",children:h.general}),u.jsx(Te,{type:"submit",disabled:!x||p||a,variant:"primary",className:"w-full justify-center py-3",children:p||a?"Setting up...":"Complete Profile"})]})}),u.jsx("div",{className:"text-center text-[10px] font-black uppercase tracking-widest text-muted mt-6",children:u.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const Dy=()=>{const[i,a]=C.useState([]),[r,n]=C.useState(!0),[o,c]=C.useState(null),h=qg(),m=C.useCallback(async()=>{try{n(!0),c(null);const b=await h.getCampaigns();b.success&&b.data?a(b.data):c(b.error||"Failed to fetch campaigns")}catch{c("An unexpected error occurred")}finally{n(!1)}},[h]),p=async b=>{try{c(null);const x=await h.createCampaign(b);return x.success?(await m(),{success:!0}):(c(x.error||"Failed to create campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return c(x),{success:!1,error:x}}},g=async(b,x)=>{try{c(null);const w=await h.updateCampaign(b,x);return w.success?(await m(),{success:!0}):(c(w.error||"Failed to update campaign"),{success:!1,error:w.error})}catch{const w="An unexpected error occurred";return c(w),{success:!1,error:w}}},v=async b=>{try{c(null);const x=await h.deleteCampaign(b);return x.success?(await m(),{success:!0}):(c(x.error||"Failed to delete campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return c(x),{success:!1,error:x}}};return C.useEffect(()=>{m()},[m]),{campaigns:i,loading:r,error:o,fetchCampaigns:m,createCampaign:p,updateCampaign:g,deleteCampaign:v}};function zl(){const[i,a]=C.useState([]),[r,n]=C.useState(!1),[o,c]=C.useState(null),h=C.useCallback(async(x,...w)=>{n(!0),c(null);try{const S=await x(...w);if(S.success&&S.data!==void 0)return a(S.data),{success:!0,data:S.data};const N=S.error||"Operation failed";return c(N),{success:!1,error:N}}catch(S){const N=S instanceof Error?S.message:"An unexpected error occurred";return c(N),{success:!1,error:N}}finally{n(!1)}},[]),m=C.useCallback(x=>{a(w=>[...w,x])},[]),p=C.useCallback((x,w)=>{a(S=>S.map((N,j)=>j===x?w:N))},[]),g=C.useCallback(x=>{a(w=>w.filter((S,N)=>N!==x))},[]),v=C.useCallback(()=>{a([]),c(null),n(!1)},[]),b=C.useCallback(()=>{c(null)},[]);return{items:i,loading:r,error:o,execute:h,addItem:m,updateItem:p,removeItem:g,reset:v,clearError:b,setItems:a}}const iC=()=>{const{items:i,loading:a,error:r,execute:n}=zl(),o=C.useMemo(()=>qg(),[]),c=C.useCallback(async g=>await n(async b=>{const x=await o.getCampaignMembers(b);return x.success&&x.data?{success:!0,data:x.data}:{success:!1,error:x.error||"Failed to fetch members"}},g),[o,n]),h=C.useCallback(async(g,v,b)=>{try{const x=await o.addMemberByEmail(g,v,b);return x.success?(await c(g),{success:!0}):{success:!1,error:x.error||"Failed to add member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]),m=C.useCallback(async(g,v,b)=>{try{const x=await o.updateMemberRole(g,v,b);return x.success?(await c(g),{success:!0}):{success:!1,error:x.error||"Failed to update member role"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]),p=C.useCallback(async(g,v)=>{try{const b=await o.removeMember(g,v);return b.success?(await c(g),{success:!0}):{success:!1,error:b.error||"Failed to remove member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[o,c]);return{members:i,loading:a,error:r,fetchMembers:c,addMemberByEmail:h,updateMemberRole:m,removeMember:p}};function lC({size:i="md",className:a=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return u.jsx("div",{className:`animate-spin  border-b-2 border-blue-600 ${r[i]} ${a}`,role:"status","aria-label":"Loading"})}function oC({message:i="Loading..."}){return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[u.jsx(lC,{size:"lg",className:"mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:i})]})}function rt({isOpen:i,onClose:a,title:r,children:n,maxWidth:o="md"}){if(C.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i]),C.useEffect(()=>{const h=m=>{m.key==="Escape"&&a()};if(i)return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[i,a]),!i)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in",onClick:h=>{h.target===h.currentTarget&&a()},children:u.jsxs("div",{className:`card-mgt hud-frame w-full shadow-2xl relative overflow-hidden bg-card/95 backdrop-blur-md animate-hud ${c[o]}`,children:[u.jsxs("div",{className:"mgt-header-bar -mx-6 -mt-6 mb-6",children:[u.jsx("span",{className:"text-xs",children:r}),u.jsx("button",{onClick:a,className:"p-1 hover:bg-white/10 transition-colors",children:u.jsx(Rl,{size:16})})]}),u.jsx("div",{className:"relative",children:n})]})})}function ws({onCancel:i,onConfirm:a,confirmText:r="Confirm",cancelText:n="Cancel",confirmVariant:o="primary",confirmDisabled:c=!1,confirmType:h="button",isLoading:m=!1,children:p}){return p?u.jsx("div",{className:"flex gap-2 mt-6",children:p}):u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-8",children:[i&&u.jsx(Te,{onClick:i,variant:"outline",className:"flex-1 justify-center py-2.5",disabled:m,children:n}),(a||h==="submit")&&u.jsx(Te,{onClick:h==="submit"?void 0:a,variant:o==="primary"?"premium":o,className:"flex-1 justify-center py-2.5",disabled:m||c,type:h,children:r})]})}function eg({roles:i,onChange:a,disabled:r=!1,showError:n=!0}){const o=(m,p)=>{const g={...i,[m]:p};a(g)},c=Bg(i),h=i.isGm&&i.isPlayer&&!i.isAdmin;return u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:i.isAdmin,onChange:m=>o("isAdmin",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),u.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Administrator"}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can manage campaign settings and members)"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:i.isGm,onChange:m=>o("isGm",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),u.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game Master (GM)"}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can run game sessions)"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:i.isPlayer,onChange:m=>o("isPlayer",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),u.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Player"}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can create and play characters)"})]})]}),u.jsx("div",{className:"px-3 py-2 bg-surface-low border border-border",children:u.jsxs("p",{className:"text-sm text-muted",children:["Current roles:"," ",u.jsx("span",{className:"font-medium text-text-main",children:Dl(i)})]})}),n&&!c&&u.jsx("div",{className:"p-3 bg-accent/10 border border-accent",children:u.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[!i.isAdmin&&!i.isGm&&!i.isPlayer&&"Must select at least one role.",h&&"Cannot be both GM and Player without Administrator privileges. This prevents conflicts of interest."]})})]})}function cC({campaign:i,onUpdateCampaign:a,onDeleteCampaign:r,onGetMembers:n,onAddMember:o,onUpdateMemberRole:c,onRemoveMember:h,onClose:m}){const[p,g]=C.useState(!1),[v,b]=C.useState(!1),[x,w]=C.useState(!1),[S,N]=C.useState(!1),[j,A]=C.useState([]),[R,k]=C.useState(!1),[B,V]=C.useState(!1),[G,I]=C.useState(null),[Y,P]=C.useState(i.name),[X,de]=C.useState(i.description||""),[ce,ie]=C.useState(!1),[F,pe]=C.useState(!1),[L,Q]=C.useState(""),[re,te]=C.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),[J,Ne]=C.useState(null),Ae=async ve=>{if(ve.preventDefault(),!!Y.trim())try{ie(!0),await a(i.id,{name:Y,description:X||null}),g(!1)}finally{ie(!1)}},K=async()=>{try{pe(!0),await r(i.id),b(!1),m?.()}finally{pe(!1)}},me=async()=>{try{const ve=await n(i.id);ve&&A(ve)}catch{}},et=async()=>{if(j.length>0&&!x){w(!0);return}try{k(!0);const ve=await n(i.id);ve&&A(ve),w(!0)}finally{k(!1)}},ze=async ve=>{if(ve.preventDefault(),!!L.trim()){V(!0),Ne(null);try{const Ie=await o(i.id,L,re);Ie.success?(Q(""),te({isAdmin:!1,isGm:!1,isPlayer:!0}),N(!1),me()):Ne(Ie.error||"Failed to add member")}catch(Ie){Ne(Ie instanceof Error?Ie.message:"Failed to add member")}finally{V(!1)}}},[we,ra]=C.useState(null),[sa,Nr]=C.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),Ar=async ve=>{if(!we)return;const Ie=we.user_id||we.userId;if(Ie){I(Ie);try{if((await c(i.id,Ie,ve)).success){const Er=await n(i.id);Er&&A(Er),ra(null)}}finally{I(null)}}},ks=ve=>{ra(ve),Nr(ve.roles)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),u.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:i.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.description||"No description provided"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),u.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[i.member_count||0," member(s)"]})]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),u.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[u.jsxs(Te,{onClick:()=>g(!0),className:"flex items-center gap-2 justify-center",children:[u.jsx(cp,{className:"w-4 h-4"}),"Edit Campaign"]}),u.jsxs(Te,{onClick:et,disabled:R,className:"flex items-center gap-2 justify-center",children:[u.jsx(Bn,{className:"w-4 h-4"}),R?"Loading...":"Manage Members"]})]})]}),u.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[u.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),u.jsxs(Te,{onClick:()=>b(!0),variant:"danger",className:"flex items-center gap-2",children:[u.jsx(xl,{className:"w-4 h-4"}),"Delete Campaign"]})]}),u.jsx(rt,{isOpen:p,onClose:()=>g(!1),title:"Edit Campaign",children:u.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),u.jsx("input",{type:"text",value:Y,onChange:ve=>P(ve.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),u.jsx("textarea",{value:X,onChange:ve=>de(ve.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),u.jsx(ws,{onCancel:()=>g(!1),cancelText:"Cancel",confirmText:ce?"Updating...":"Update",confirmDisabled:ce||!Y.trim(),confirmType:"submit",isLoading:ce})]})}),u.jsxs(rt,{isOpen:v,onClose:()=>b(!1),title:"Delete Campaign",children:[u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',i.name,'"? This action cannot be undone and will remove all campaign data and members.']}),u.jsx(ws,{onCancel:()=>b(!1),onConfirm:K,cancelText:"Cancel",confirmText:F?"Deleting...":"Delete",confirmVariant:"danger",isLoading:F})]}),u.jsx(rt,{isOpen:x,onClose:()=>w(!1),title:"Campaign Members",maxWidth:"lg",children:u.jsxs("div",{className:"space-y-4",children:[j.length===0?u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):u.jsx("div",{className:"space-y-3",children:j.map(ve=>u.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 ",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:ve.user_profiles?.display_name||ve.displayName||"No Name"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ve.user_profiles?.email||ve.email})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex flex-wrap gap-1",children:u.jsx("span",{className:"px-2 py-1 text-xs font-medium  bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:Dl(ve.roles)})}),u.jsx(Te,{size:"sm",variant:"ghost",onClick:()=>ks(ve),disabled:G===ve.user_id,children:u.jsx(cp,{className:"w-3 h-3"})}),G===ve.user_id&&u.jsx("span",{className:"text-xs text-gray-500",children:"Updating..."}),!ve.roles.isAdmin&&u.jsx(Te,{size:"sm",variant:"danger",onClick:()=>{const Ie=ve.user_id||ve.userId;Ie&&h(i.id,Ie)},children:u.jsx(xl,{className:"w-3 h-3"})})]})]},ve.id))}),u.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:u.jsxs(Te,{variant:"primary",className:"w-full justify-center",onClick:()=>N(!0),children:[u.jsx(Ln,{className:"w-4 h-4"}),"Add Member"]})})]})}),u.jsx(rt,{isOpen:S,onClose:()=>{N(!1),Q(""),te({isAdmin:!1,isGm:!1,isPlayer:!0}),Ne(null)},title:"Add Campaign Member",children:u.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),u.jsx("input",{type:"email",value:L,onChange:ve=>Q(ve.target.value),className:"input w-full",placeholder:"Enter member's email",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles"}),u.jsx(eg,{roles:re,onChange:te})]}),J&&u.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 ",children:u.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:J})}),u.jsx(ws,{onCancel:()=>{N(!1),Q(""),te({isAdmin:!1,isGm:!1,isPlayer:!0}),Ne(null)},cancelText:"Cancel",confirmText:B?"Adding...":"Add Member",confirmDisabled:B||!L.trim(),confirmType:"submit",isLoading:B})]})}),we&&u.jsx(rt,{isOpen:!!we,onClose:()=>ra(null),title:`Edit Roles - ${we.user_profiles?.display_name||we.displayName||we.user_profiles?.email||we.email}`,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Roles"}),u.jsx(eg,{roles:sa,onChange:Nr,disabled:G===we.user_id})]}),u.jsx(ws,{onCancel:()=>ra(null),cancelText:"Cancel",confirmText:G===we.user_id?"Updating...":"Update Roles",confirmDisabled:G===we.user_id,onConfirm:()=>Ar(sa),isLoading:G===we.user_id})]})})]})}function My(i){const{items:a,loading:r,error:n,execute:o,setItems:c}=zl(),h=C.useMemo(()=>Xu(),[]),m=C.useCallback(async v=>{if(!v)return;await o(async x=>{const w=await h.getStandaloneCharacters(x);return w.success&&w.data?{success:!0,data:w.data.map(N=>({id:N.id,campaignId:null,displayName:N.name,playerName:N.playerName||"",characterName:N.characterName||"",ownerId:N.ownerId||""}))}:{success:!1,error:w.error||"Failed to load characters"}},v)},[h,o]),p=C.useCallback(async(v,b,x)=>{try{const w=`${v}  ${b}`,S=await h.createStandaloneCharacter(x,{name:w,playerName:v,characterName:b});if(S.success&&S.data){const N={id:S.data.id,campaignId:null,displayName:S.data.name,playerName:S.data.playerName||v,characterName:S.data.characterName||b,ownerId:S.data.ownerId||""};return c(j=>[N,...j]),{success:!0,data:N}}return{success:!1,error:S.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[h,c]),g=C.useCallback(async(v,b)=>{try{const x=await h.deleteStandaloneCharacter(v,b);return x.success?(c(w=>w.filter(S=>S.id!==v)),{success:!0}):{success:!1,error:x.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[h,c]);return C.useEffect(()=>{i?m(i):c([])},[i,m,c]),{characters:a,loading:r,error:n,createCharacter:p,deleteCharacter:g,refreshCharacters:()=>i&&m(i)}}function uC({isOpen:i,onClose:a,campaigns:r,onAssignmentComplete:n}){const{user:o}=er(),{characters:c,loading:h,error:m,refreshCharacters:p}=My(o?.id),[g,v]=C.useState([]),[b,x]=C.useState(null),w=C.useMemo(()=>r.filter(A=>A.userRoles.isAdmin||A.userRoles.isPlayer),[r]),S=async(A,R)=>{if(o){x(null),v(k=>[...k.filter(B=>B.characterId!==A),{characterId:A,campaignId:R,loading:!0}]);try{const B=await Xu().assignCharacterToCampaign(A,R,o.id);B.success?(await p(),v(V=>V.filter(G=>G.characterId!==A)),n?.()):(x(B.error||"Failed to assign character to campaign"),v(V=>V.filter(G=>G.characterId!==A)))}catch{x("An unexpected error occurred while assigning character"),v(k=>k.filter(B=>B.characterId!==A))}}},N=A=>g.some(R=>R.characterId===A&&R.loading),j=A=>g.find(R=>R.characterId===A)?.campaignId;return h?u.jsx(rt,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"}),u.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-2/3"})]})}):m?u.jsx(rt,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:u.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-8",children:[u.jsxs("p",{children:["Error loading characters: ",m]}),u.jsx(Te,{onClick:p,variant:"primary",className:"mt-4",children:"Retry"})]})}):c.length===0?u.jsx(rt,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:u.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[u.jsx(Bn,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),u.jsx("p",{className:"text-lg font-medium mb-2",children:"No Standalone Characters"}),u.jsx("p",{className:"text-sm",children:"You don't have any standalone characters to assign to campaigns."}),u.jsx("p",{className:"text-sm mt-1",children:"Create some characters first, then come back to assign them!"})]})}):w.length===0?u.jsx(rt,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",children:u.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[u.jsx(Ln,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),u.jsx("p",{className:"text-lg font-medium mb-2",children:"No Available Campaigns"}),u.jsx("p",{className:"text-sm",children:"You're not a member of any campaigns where you can add characters."}),u.jsx("p",{className:"text-sm mt-1",children:"Join a campaign as a player or create your own to assign characters!"})]})}):u.jsx(rt,{isOpen:i,onClose:a,title:"Assign Characters to Campaigns",maxWidth:"lg",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Assign your standalone characters to campaigns where you're a member. Once assigned, characters will appear in the campaign's character list."}),b&&u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800  p-4",children:u.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:b})}),u.jsx("div",{className:"space-y-4",children:c.map(A=>u.jsx("div",{className:"border  p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 mb-1",children:A.displayName}),u.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:A.playerName&&A.characterName&&u.jsxs(u.Fragment,{children:["Player: ",A.playerName,"  Character:"," ",A.characterName]})})]}),u.jsx("div",{className:"flex-shrink-0 ml-4",children:N(A.id)?u.jsxs("div",{className:"flex items-center text-sm text-blue-600 dark:text-blue-400",children:[u.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent  mr-2"}),"Assigning..."]}):u.jsxs("select",{className:"text-sm border rounded px-3 py-2 bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-zinc-50",value:j(A.id)||"",onChange:R=>{R.target.value&&S(A.id,R.target.value)},children:[u.jsx("option",{value:"",children:"Select Campaign..."}),w.map(R=>u.jsxs("option",{value:R.id,children:[R.name," (",R.userRoles.isAdmin?"Admin":"Player",")"]},R.id))]})})]})},A.id))}),u.jsx("div",{className:"border-t pt-4",children:u.jsx(Te,{onClick:a,className:"w-full",children:"Done"})})]})})}function dC({characters:i,currentUserId:a,onDeleteCharacter:r}){return i.length===0?u.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[u.jsx(Bn,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),u.jsx("p",{children:"No standalone characters yet."}),u.jsx("p",{className:"text-sm mt-1",children:"Create your first character to get started!"})]}):u.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:i.map(n=>u.jsxs("div",{className:"border  p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 truncate",children:n.displayName}),n.ownerId===a&&u.jsx(Te,{onClick:()=>r(n.id,n.displayName),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 p-1 h-auto",title:"Delete character",children:u.jsx(xl,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Player:"})," ",n.playerName]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Character:"})," ",n.characterName]}),u.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Available for campaign invitations"})]})]},n.id))})}function hC({campaigns:i=[]}){const[a,r]=C.useState(!1),[n,o]=C.useState(""),[c,h]=C.useState(""),[m,p]=C.useState(!1),[g,v]=C.useState(null),[b,x]=C.useState(!1),[w,S]=C.useState(null),[N,j]=C.useState(!1),{user:A}=er(),{characters:R,loading:k,error:B,createCharacter:V,deleteCharacter:G,refreshCharacters:I}=My(A?.id),Y=async ie=>{if(ie.preventDefault(),v(null),!A){v("You must be logged in to create a character");return}if(!n.trim()){v("Player name is required");return}if(!c.trim()){v("Character name is required");return}p(!0);try{const F=await V(n.trim(),c.trim(),A.id);F.success?(r(!1),o(""),h(""),v(null)):v(F.error||"Failed to create character")}catch{v("An unexpected error occurred")}finally{p(!1)}},P=(ie,F)=>{S({id:ie,name:F}),x(!0)},X=async()=>{if(w&&A)try{const ie=await G(w.id,A.id);ie.success?(x(!1),S(null)):v(ie.error||"Failed to delete character")}catch{v("An unexpected error occurred while deleting character")}},de=()=>{r(!1),o(""),h(""),v(null)},ce=()=>{r(!0),o(""),h(""),v(null)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50",children:"Your Characters"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Create characters that can be used in any campaign when invited."})]}),u.jsxs("div",{className:"flex gap-3",children:[i.length>0&&u.jsxs(Te,{onClick:()=>j(!0),variant:"ghost",className:"flex items-center gap-2",children:[u.jsx(fb,{className:"w-4 h-4"}),"Assign to Campaigns"]}),u.jsxs(Te,{onClick:ce,className:"flex items-center gap-2",children:[u.jsx(Ln,{className:"w-4 h-4"}),"Create Character"]})]})]}),u.jsxs("div",{className:"card",children:[k&&u.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:u.jsx("p",{children:"Loading characters..."})}),!k&&B&&u.jsxs("div",{className:"text-center py-6 text-red-600 dark:text-red-400",children:[u.jsxs("p",{children:["Error: ",B]}),u.jsx(Te,{onClick:I,variant:"ghost",size:"sm",className:"mt-2",children:"Try Again"})]}),!k&&!B&&u.jsx(dC,{characters:R,currentUserId:A?.id,onDeleteCharacter:P})]}),u.jsx(rt,{isOpen:a,onClose:de,title:"Create New Character",children:u.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[u.jsx(oe,{label:"Player Name",value:n,onChange:ie=>o(ie.target.value),placeholder:"e.g., John Smith",required:!0}),u.jsx(oe,{label:"Character Name",value:c,onChange:ie=>h(ie.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),g&&u.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm",children:g}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx(Te,{type:"button",variant:"ghost",onClick:de,disabled:m,children:"Cancel"}),u.jsx(Te,{type:"submit",disabled:m||!n.trim()||!c.trim(),children:m?"Creating...":"Create Character"})]})]})}),u.jsx(rt,{isOpen:b,onClose:()=>x(!1),title:"Delete Character",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',w?.name,'"? This action cannot be undone.']}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx(Te,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"}),u.jsx(Te,{variant:"danger",onClick:X,children:"Delete Character"})]})]})}),u.jsx(uC,{isOpen:N,onClose:()=>j(!1),campaigns:i,onAssignmentComplete:()=>{I()}})]})}function fC({isOpen:i,onClose:a,onCreateCampaign:r}){const[n,o]=C.useState(""),[c,h]=C.useState(""),[m,p]=C.useState(!1),[g,v]=C.useState(!1),[b,x]=C.useState([]),[w,S]=C.useState(""),[N,j]=C.useState("player"),A=async V=>{if(V.preventDefault(),!!n.trim())try{v(!0),(await r({name:n.trim(),description:c.trim()||void 0,creatorIsAlsoGM:m,initialMembers:b.length>0?b:void 0})).success&&(o(""),h(""),p(!1),x([]),S(""),j("player"))}finally{v(!1)}},R=()=>{w.trim()&&(b.some(V=>V.email.toLowerCase()===w.toLowerCase())||(x([...b,{email:w.trim(),role:N}]),S(""),j("player")))},k=V=>{x(b.filter((G,I)=>I!==V))},B=()=>{o(""),h(""),p(!1),x([]),S(""),j("player"),a()};return u.jsx(rt,{isOpen:i,onClose:B,title:"Create New Campaign",maxWidth:"lg",children:u.jsxs("form",{onSubmit:A,className:"space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Campaign Information"}),u.jsx(oe,{label:"Campaign Name",value:n,onChange:V=>o(V.target.value),placeholder:"Enter campaign name",required:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),u.jsx("textarea",{value:c,onChange:V=>h(V.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"creatorIsAlsoGM",checked:m,onChange:V=>p(V.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"creatorIsAlsoGM",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Also be the Game Master"})]}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You will always be an Administrator with full campaign control. Check this if you also want to run the game as GM."})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Invite Players (Optional)"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add players to your campaign. They'll need to have accounts to join."}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx("input",{type:"email",value:w,onChange:V=>S(V.target.value),placeholder:"player@example.com",className:"input w-full",onKeyDown:V=>{V.key==="Enter"&&(V.preventDefault(),R())}})}),u.jsxs("select",{value:N,onChange:V=>j(V.target.value),className:"input",children:[u.jsx("option",{value:"player",children:"Player"}),u.jsx("option",{value:"gm",children:"GM"}),u.jsx("option",{value:"admin",children:"Admin"})]}),u.jsx(Te,{type:"button",onClick:R,disabled:!w.trim(),size:"sm",children:u.jsx(Ln,{className:"w-4 h-4"})})]}),b.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Initial Members (",b.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.map((V,G)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-zinc-800 ",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-50",children:V.email}),u.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 ",children:V.role})]}),u.jsx("button",{type:"button",onClick:()=>k(G),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:u.jsx(Rl,{className:"w-4 h-4"})})]},G))})]})]}),u.jsx(ws,{onCancel:B,cancelText:"Cancel",confirmText:g?"Creating...":"Create Campaign",confirmDisabled:g||!n.trim(),confirmType:"submit",isLoading:g})]})})}const mC="modulepreload",pC=function(i){return"/traveller-dashboard/"+i},tg={},El=function(a,r,n){let o=Promise.resolve();if(r&&r.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");o=p(r.map(g=>{if(g=pC(g),g in tg)return;tg[g]=!0;const v=g.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":mC,v||(x.as="script"),x.crossOrigin="",x.href=g,m&&x.setAttribute("nonce",m),document.head.appendChild(x),v)return new Promise((w,S)=>{x.addEventListener("load",w),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return o.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return a().catch(c)})},gC=()=>{const{user:i}=er(),{items:a,loading:r,error:n,execute:o,setItems:c}=zl(),h=C.useMemo(()=>Xu(),[]),m=C.useCallback(async()=>{if(!i?.email)return;await o(async()=>{const x=await h.getUserInvitations(i.email);return x.success?{success:!0,data:x.data||[]}:x.error?.includes("function")&&x.error?.includes("does not exist")?{success:!0,data:[]}:{success:!1,error:x.error||"Failed to load invitations"}})},[i?.email,h,o]),p=C.useCallback(async b=>{if(!i)return{success:!1,error:"User not found"};try{const x=await h.acceptCampaignInvitation(b,i.id);return x.success&&c(w=>w.filter(S=>S.id!==b)),x}catch{return{success:!1,error:"Failed to accept invitation"}}},[i,h,c]),g=C.useCallback(async b=>{try{const x=await h.declineCampaignInvitation(b);return x.success&&c(w=>w.filter(S=>S.id!==b)),x}catch{return{success:!1,error:"Failed to decline invitation"}}},[h,c]),v=C.useCallback(async(b,x)=>{if(!i)return{success:!1,error:"User not found"};try{const w=await p(b);if(!w.success)return w;const S=a.find(A=>A.id===b);if(!S)return{success:!1,error:"Invitation not found"};const{supabase:N}=await El(async()=>{const{supabase:A}=await Promise.resolve().then(()=>Oy);return{supabase:A}},[]),{error:j}=await N.from("characters").update({campaign_id:S.campaignId}).eq("id",x).eq("owner_id",i.id);return j?{success:!1,error:"Failed to assign character to campaign"}:{success:!0}}catch{return{success:!1,error:"Failed to accept invitation and assign character"}}},[i,a,p]);return C.useEffect(()=>{m()},[m]),{invitations:a,loading:r,error:n,acceptInvitation:p,declineInvitation:g,assignCharacterAndAccept:v,refreshInvitations:m}},yC=({onInvitationAccepted:i})=>{const{user:a}=er(),{invitations:r,loading:n,error:o,acceptInvitation:c,declineInvitation:h,assignCharacterAndAccept:m}=gC(),[p,g]=C.useState([]),[v,b]=C.useState(!1),[x,w]=C.useState(null),[S,N]=C.useState(""),[j,A]=C.useState(!1),R=C.useCallback(async()=>{if(a)try{const{data:P,error:X}=await W.from("characters").select("id, name, campaign_id").eq("owner_id",a.id).is("campaign_id",null);!X&&P&&g(P)}catch{}},[a]);C.useEffect(()=>{R()},[R]);const k=async P=>{A(!0);try{(await c(P.id)).success&&i?.()}finally{A(!1)}},B=P=>{w(P),b(!0)},V=async()=>{if(!(!x||!S)){A(!0);try{(await m(x.id,S)).success&&(b(!1),w(null),N(""),await R(),i?.())}finally{A(!1)}}},G=async P=>{A(!0);try{await h(P)}finally{A(!1)}},I=P=>{const X=[];return P.isAdmin&&X.push("Admin"),P.isGm&&X.push("GM"),P.isPlayer&&X.push("Player"),X.length>0?X.join(", "):"Player"},Y=P=>P?P.toLocaleDateString():"No expiration";return n?u.jsx("div",{className:"text-center py-4",children:"Loading invitations..."}):o?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx("h3",{className:"text-lg font-medium mb-2",children:"Campaign Invitations"}),u.jsx("p",{className:"text-red-600",children:o})]}):r.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx("h3",{className:"text-lg font-medium mb-2",children:"No pending invitations"}),u.jsx("p",{children:"You don't have any pending campaign invitations at the moment."})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Invitations"}),r.map(P=>u.jsxs("div",{className:"border  p-4 bg-white shadow-sm",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg",children:P.campaignName||"Unknown Campaign"}),u.jsxs("p",{className:"text-gray-600 text-sm",children:["Invited by ",P.invitedByName||"Unknown User"]})]}),u.jsxs("div",{className:"text-right text-sm text-gray-500",children:[u.jsxs("div",{children:["Expires: ",Y(P.expiresAt)]}),u.jsxs("div",{children:["Roles: ",I(P.rolesOffered)]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Te,{onClick:()=>k(P),disabled:j,className:"bg-green-600 hover:bg-green-700",children:"Accept"}),p.length>0&&u.jsx(Te,{onClick:()=>B(P),disabled:j,className:"bg-blue-600 hover:bg-blue-700",children:"Accept & Assign Character"}),u.jsx(Te,{onClick:()=>G(P.id),disabled:j,variant:"default",children:"Decline"})]})]},P.id)),u.jsx(rt,{isOpen:v,onClose:()=>{b(!1),w(null),N("")},title:"Accept Invitation & Assign Character",children:u.jsxs("div",{className:"space-y-4",children:[x&&u.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[u.jsx("h4",{className:"font-medium",children:x.campaignName}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Roles: ",I(x.rolesOffered)]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"character-select",className:"block text-sm font-medium mb-2",children:"Select a character to assign:"}),u.jsxs("select",{id:"character-select",value:S,onChange:P=>N(P.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[u.jsx("option",{value:"",children:"Choose a character..."}),p.map(P=>u.jsx("option",{value:P.id,children:P.name},P.id))]})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[u.jsx(Te,{onClick:()=>{b(!1),w(null),N("")},variant:"default",disabled:j,children:"Cancel"}),u.jsx(Te,{onClick:V,disabled:j||!S,className:"bg-green-600 hover:bg-green-700",children:"Accept & Assign"})]})]})})]})};function Ll({children:i,className:a="",onClick:r,style:n}){return u.jsx("div",{className:`card-mgt hud-frame ${a}`,onClick:r,style:n,children:i})}function Uy({title:i,subtitle:a,rightContent:r,className:n=""}){return u.jsxs("div",{className:`mgt-header-bar -mx-6 -mt-6 mb-4 ${n}`,children:[typeof i=="string"?u.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest",children:i}):i,(a||r)&&u.jsxs("div",{className:"flex items-center gap-2",children:[a&&u.jsx("span",{className:"text-[8px] opacity-60 px-1 border border-white/20 uppercase tracking-wider",children:a}),r]})]})}const id=i=>i.isAdmin?"admin":i.isGm?"gm":"player";function zy(i){return i==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":i==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function ag({title:i,description:a,icon:r,onClick:n,disabled:o=!1}){return u.jsx(Ll,{onClick:o?void 0:n,className:`h-full group transition-all duration-300 block text-left w-full ${o?"opacity-50 cursor-not-allowed border-dashed border-muted":"hover:border-primary cursor-pointer"}`,children:u.jsx("div",{className:"flex flex-col h-full bg-surface-low/50",children:u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:`transition-transform ${o?"":"text-primary group-hover:scale-110"}`,children:r}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-main mb-1",children:i}),u.jsx("p",{className:"text-[10px] text-muted font-bold uppercase tracking-tighter",children:a})]})]})})})}function vC({campaigns:i,onCampaignSelect:a}){const r=i.sort((n,o)=>o.updatedAt.getTime()-n.updatedAt.getTime()).slice(0,3);return u.jsxs(Ll,{className:"h-full",children:[u.jsx(Uy,{title:"Recent Activity",rightContent:u.jsx("div",{className:"w-2 h-2 bg-primary animate-pulse"})}),u.jsx("div",{className:"space-y-3",children:r.length===0?u.jsx("p",{className:"text-muted text-[10px] font-black uppercase tracking-widest italic py-8 text-center border-2 border-dashed border-border",children:"No active sectors recorded"}):u.jsx("div",{className:"space-y-4",children:r.map(n=>u.jsxs("div",{className:"group flex items-center justify-between p-4 border border-border bg-surface-low hover:bg-white hover:border-primary cursor-pointer transition-all duration-300",style:{clipPath:"polygon(0 0, 100% 0, 98% 100%, 0% 100%)"},onClick:()=>a(n.id),children:[u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("h4",{className:"font-black text-xs uppercase tracking-widest text-text-main",children:n.name}),n.userRoles&&u.jsx("span",{className:`px-2 py-0.5 text-[8px] font-black uppercase border border-current ${zy(id(n.userRoles))}`,children:Dl(n.userRoles)})]}),u.jsxs("div",{className:"flex items-center gap-3 mt-1.5 opacity-60",children:[u.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest",children:["MEMBERS: ",n.memberCount||0]}),u.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest",children:["SYNC: ",n.updatedAt.toLocaleDateString()]})]})]}),u.jsx($u,{className:"w-4 h-4 text-muted group-hover:text-primary transition-transform group-hover:translate-x-1"})]},n.id))})})]})}class bu{static toDomain(a,r){return{id:a.id,email:a.email||"",displayName:r?.display_name||a.user_metadata?.display_name||a.email?.split("@")[0],username:r?.username||a.user_metadata?.username||a.email?.split("@")[0],profileCompleted:r?.profile_completed||!!a.user_metadata?.profile_completed,createdAt:new Date(a.created_at)}}}class rg{static toDomain(a){if(!a)throw new Error("Cannot map null character data");return{id:a.id,campaignId:a.campaign_id||null,name:a.name||"Unknown Character",playerName:a.player_name||void 0,characterName:a.character_name||void 0,ownerId:a.owner_id||void 0,createdAt:a.created_at?new Date(a.created_at):new Date,updatedAt:a.updated_at?new Date(a.updated_at):new Date,characteristics:a.characteristics||{STR:0,DEX:0,END:0,INT:0,EDU:0,SOC:0},skills:a.skills||[]}}static toDomainList(a){return(a||[]).map(r=>this.toDomain(r))}}class bC{supabase;constructor(a){this.supabase=a}async getCharacters(a){try{const{data:r,error:n}=await this.supabase.from("characters").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(r||[]).map(c=>({id:c.id,campaignId:c.campaign_id,name:c.name,playerName:c.player_name,characterName:c.character_name,ownerId:c.owner_id,createdAt:new Date(c.created_at),updatedAt:new Date(c.updated_at),characteristics:c.characteristics||{STR:{value:0,xp:0},DEX:{value:0,xp:0},END:{value:0,xp:0},INT:{value:0,xp:0},EDU:{value:0,xp:0},SOC:{value:0,xp:0}},skills:c.skills||[]}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get characters"}}}async getCharacter(a){try{const{data:r,error:n}=await this.supabase.from("characters").select("*").eq("id",a).single();if(n)throw n;return{success:!0,data:{id:r.id,campaignId:r.campaign_id,name:r.name,playerName:r.player_name,characterName:r.character_name,ownerId:r.owner_id,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at),characteristics:r.characteristics||{STR:{value:0,xp:0},DEX:{value:0,xp:0},END:{value:0,xp:0},INT:{value:0,xp:0},EDU:{value:0,xp:0},SOC:{value:0,xp:0}},skills:r.skills||[]}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character"}}}async createCharacter(a,r){try{const{data:n,error:o}=await this.supabase.from("characters").insert({campaign_id:r.campaignId,name:r.name,player_name:r.playerName,character_name:r.characterName,owner_id:a,characteristics:r.characteristics||{STR:{value:0,xp:0},DEX:{value:0,xp:0},END:{value:0,xp:0},INT:{value:0,xp:0},EDU:{value:0,xp:0},SOC:{value:0,xp:0}},skills:r.skills||[]}).select().single();if(o)throw o;return{success:!0,data:{id:n.id,campaignId:n.campaign_id,name:n.name,playerName:n.player_name,characterName:n.character_name,ownerId:n.owner_id,createdAt:new Date(n.created_at),updatedAt:new Date(n.updated_at),characteristics:n.characteristics||{STR:0,DEX:0,END:0,INT:0,EDU:0,SOC:0},skills:n.skills||[]}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to create character"}}}async updateCharacter(a,r){try{const n={updated_at:new Date().toISOString()};r.name!==void 0&&(n.name=r.name),r.playerName!==void 0&&(n.player_name=r.playerName),r.characterName!==void 0&&(n.character_name=r.characterName),r.characteristics!==void 0&&(n.characteristics=r.characteristics),r.skills!==void 0&&(n.skills=r.skills);const{error:o}=await this.supabase.from("characters").update(n).eq("id",a);if(o)throw o;return{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update character"}}}async deleteCharacter(a){try{const{error:r}=await this.supabase.from("characters").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character"}}}async getCharacterFinance(a){try{const{data:r,error:n}=await this.supabase.from("character_finance").select("*").eq("character_id",a).order("transaction_date",{ascending:!1});if(n)throw n;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,description:c.description,amount:parseFloat(c.amount),transactionDate:new Date(c.transaction_date),createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character finances"}}}async addCharacterFinance(a,r,n){try{const{data:o,error:c}=await this.supabase.from("character_finance").insert({character_id:a,description:r,amount:n}).select().single();if(c)throw c;return{success:!0,data:{id:o.id,characterId:o.character_id,description:o.description,amount:parseFloat(o.amount),transactionDate:new Date(o.transaction_date),createdAt:new Date(o.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to add character finance"}}}async updateCharacterFinance(a,r,n){try{const o={};r!==void 0&&(o.description=r),n!==void 0&&(o.amount=n);const{error:c}=await this.supabase.from("character_finance").update(o).eq("id",a);if(c)throw c;return{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to update character finance"}}}async deleteCharacterFinance(a){try{const{error:r}=await this.supabase.from("character_finance").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character finance"}}}async getCharacterInventory(a){try{const{data:r,error:n}=await this.supabase.from("character_inventory").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,itemName:c.item_name,quantity:c.quantity,weight:c.weight?parseFloat(c.weight):void 0,value:c.value?parseFloat(c.value):void 0,description:c.description,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character inventory"}}}async addCharacterInventory(a,r){try{const{data:n,error:o}=await this.supabase.from("character_inventory").insert({character_id:a,item_name:r.itemName,quantity:r.quantity,weight:r.weight,value:r.value,description:r.description}).select().single();if(o)throw o;return{success:!0,data:{id:n.id,characterId:n.character_id,itemName:n.item_name,quantity:n.quantity,weight:n.weight?parseFloat(n.weight):void 0,value:n.value?parseFloat(n.value):void 0,description:n.description,createdAt:new Date(n.created_at)}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to add character inventory"}}}async updateCharacterInventory(a,r){try{const n={};r.itemName!==void 0&&(n.item_name=r.itemName),r.quantity!==void 0&&(n.quantity=r.quantity),r.weight!==void 0&&(n.weight=r.weight),r.value!==void 0&&(n.value=r.value),r.description!==void 0&&(n.description=r.description);const{error:o}=await this.supabase.from("character_inventory").update(n).eq("id",a);if(o)throw o;return{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update character inventory"}}}async deleteCharacterInventory(a){try{const{error:r}=await this.supabase.from("character_inventory").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character inventory"}}}async getCharacterWeapons(a){try{const{data:r,error:n}=await this.supabase.from("character_weapons").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,name:c.name,damage:c.damage,range:c.range,weight:c.weight?parseFloat(c.weight):void 0,cost:c.cost?parseFloat(c.cost):void 0,notes:c.notes,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character weapons"}}}async addCharacterWeapon(a,r){try{const{data:n,error:o}=await this.supabase.from("character_weapons").insert({character_id:a,name:r.name,damage:r.damage,range:r.range,weight:r.weight,cost:r.cost,notes:r.notes}).select().single();if(o)throw o;return{success:!0,data:{id:n.id,characterId:n.character_id,name:n.name,damage:n.damage,range:n.range,weight:n.weight?parseFloat(n.weight):void 0,cost:n.cost?parseFloat(n.cost):void 0,notes:n.notes,createdAt:new Date(n.created_at)}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to add character weapon"}}}async updateCharacterWeapon(a,r){try{const n={};r.name!==void 0&&(n.name=r.name),r.damage!==void 0&&(n.damage=r.damage),r.range!==void 0&&(n.range=r.range),r.weight!==void 0&&(n.weight=r.weight),r.cost!==void 0&&(n.cost=r.cost),r.notes!==void 0&&(n.notes=r.notes);const{error:o}=await this.supabase.from("character_weapons").update(n).eq("id",a);if(o)throw o;return{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update character weapon"}}}async deleteCharacterWeapon(a){try{const{error:r}=await this.supabase.from("character_weapons").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character weapon"}}}async getCharacterArmour(a){try{const{data:r,error:n}=await this.supabase.from("character_armour").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,name:c.name,protection:c.protection,weight:c.weight?parseFloat(c.weight):void 0,cost:c.cost?parseFloat(c.cost):void 0,notes:c.notes,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character armour"}}}async addCharacterArmour(a,r){try{const{data:n,error:o}=await this.supabase.from("character_armour").insert({character_id:a,name:r.name,protection:r.protection,weight:r.weight,cost:r.cost,notes:r.notes}).select().single();if(o)throw o;return{success:!0,data:{id:n.id,characterId:n.character_id,name:n.name,protection:n.protection,weight:n.weight?parseFloat(n.weight):void 0,cost:n.cost?parseFloat(n.cost):void 0,notes:n.notes,createdAt:new Date(n.created_at)}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to add character armour"}}}async updateCharacterArmour(a,r){try{const n={};r.name!==void 0&&(n.name=r.name),r.protection!==void 0&&(n.protection=r.protection),r.weight!==void 0&&(n.weight=r.weight),r.cost!==void 0&&(n.cost=r.cost),r.notes!==void 0&&(n.notes=r.notes);const{error:o}=await this.supabase.from("character_armour").update(n).eq("id",a);if(o)throw o;return{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update character armour"}}}async deleteCharacterArmour(a){try{const{error:r}=await this.supabase.from("character_armour").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character armour"}}}async getCharacterAmmo(a){try{const{data:r,error:n}=await this.supabase.from("character_ammo").select("*").eq("character_id",a).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(r||[]).map(c=>({id:c.id,characterId:c.character_id,type:c.type,quantity:c.quantity,maxQuantity:c.max_quantity,weaponCompatibility:c.weapon_compatibility,notes:c.notes,createdAt:new Date(c.created_at)}))}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to get character ammo"}}}async addCharacterAmmo(a,r){try{const{data:n,error:o}=await this.supabase.from("character_ammo").insert({character_id:a,type:r.type,quantity:r.quantity,max_quantity:r.maxQuantity,weapon_compatibility:r.weaponCompatibility,notes:r.notes}).select().single();if(o)throw o;return{success:!0,data:{id:n.id,characterId:n.character_id,type:n.type,quantity:n.quantity,maxQuantity:n.max_quantity,weaponCompatibility:n.weapon_compatibility,notes:n.notes,createdAt:new Date(n.created_at)}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to add character ammo"}}}async updateCharacterAmmo(a,r){try{const n={};r.type!==void 0&&(n.type=r.type),r.quantity!==void 0&&(n.quantity=r.quantity),r.maxQuantity!==void 0&&(n.max_quantity=r.maxQuantity),r.weaponCompatibility!==void 0&&(n.weapon_compatibility=r.weaponCompatibility),r.notes!==void 0&&(n.notes=r.notes);const{error:o}=await this.supabase.from("character_ammo").update(n).eq("id",a);if(o)throw o;return{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update character ammo"}}}async deleteCharacterAmmo(a){try{const{error:r}=await this.supabase.from("character_ammo").delete().eq("id",a);if(r)throw r;return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete character ammo"}}}}class xC{supabase;constructor(a){this.supabase=a}async getCampaignFinances(a){const{data:r,error:n}=await this.supabase.from("campaign_finances").select("*").eq("campaign_id",a).order("transaction_date",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({id:o.id,Date:o.transaction_date,Description:o.description,Category:o.category,Subcategory:o.subcategory,"Amount (Cr)":parseFloat(o.amount),"Paid By":o.paid_by,"Paid From (Fund)":o.paid_from_fund,"Running Total":o.running_total?parseFloat(o.running_total):void 0,Notes:o.notes}))}async addCampaignFinance(a,r){const{data:n,error:o}=await this.supabase.from("campaign_finances").insert({campaign_id:a,transaction_date:r.Date,description:r.Description,category:r.Category,subcategory:r.Subcategory,amount:r["Amount (Cr)"],paid_by:r["Paid By"],paid_from_fund:r["Paid From (Fund)"],notes:r.Notes}).select().single();if(o)throw o;return{id:n.id,Date:n.transaction_date,Description:n.description,Category:n.category,Subcategory:n.subcategory,"Amount (Cr)":parseFloat(n.amount),"Paid By":n.paid_by,"Paid From (Fund)":n.paid_from_fund,"Running Total":n.running_total?parseFloat(n.running_total):void 0,Notes:n.notes}}async updateCampaignFinance(a,r){const n={};r.Date&&(n.transaction_date=r.Date),r.Description&&(n.description=r.Description),r.Category&&(n.category=r.Category),r.Subcategory!==void 0&&(n.subcategory=r.Subcategory),r["Amount (Cr)"]!==void 0&&(n.amount=r["Amount (Cr)"]),r["Paid By"]!==void 0&&(n.paid_by=r["Paid By"]),r["Paid From (Fund)"]!==void 0&&(n.paid_from_fund=r["Paid From (Fund)"]),r.Notes!==void 0&&(n.notes=r.Notes);const{error:o}=await this.supabase.from("campaign_finances").update(n).eq("id",a);if(o)throw o}async deleteCampaignFinance(a){const{error:r}=await this.supabase.from("campaign_finances").delete().eq("id",a);if(r)throw r}async getShipFinances(a){const{data:r,error:n}=await this.supabase.from("ship_finances").select("*").eq("campaign_id",a).order("transaction_date",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({id:o.id,Date:o.transaction_date,Description:o.description,Category:o.category,Subcategory:o.subcategory,"Amount (Cr)":parseFloat(o.amount),"Paid By":o.paid_by,"Paid From (Fund)":o.paid_from_fund,"Running Total":o.running_total?parseFloat(o.running_total):void 0,Notes:o.notes}))}async addShipFinance(a,r){const{data:n,error:o}=await this.supabase.from("ship_finances").insert({campaign_id:a,transaction_date:r.Date,description:r.Description,category:r.Category,subcategory:r.Subcategory,amount:r["Amount (Cr)"],paid_by:r["Paid By"],paid_from_fund:r["Paid From (Fund)"],notes:r.Notes}).select().single();if(o)throw o;return{id:n.id,Date:n.transaction_date,Description:n.description,Category:n.category,Subcategory:n.subcategory,"Amount (Cr)":parseFloat(n.amount),"Paid By":n.paid_by,"Paid From (Fund)":n.paid_from_fund,"Running Total":n.running_total?parseFloat(n.running_total):void 0,Notes:n.notes}}async updateShipFinance(a,r){const n={};r.Date&&(n.transaction_date=r.Date),r.Description&&(n.description=r.Description),r.Category&&(n.category=r.Category),r.Subcategory!==void 0&&(n.subcategory=r.Subcategory),r["Amount (Cr)"]!==void 0&&(n.amount=r["Amount (Cr)"]),r["Paid By"]!==void 0&&(n.paid_by=r["Paid By"]),r["Paid From (Fund)"]!==void 0&&(n.paid_from_fund=r["Paid From (Fund)"]),r.Notes!==void 0&&(n.notes=r.Notes);const{error:o}=await this.supabase.from("ship_finances").update(n).eq("id",a);if(o)throw o}async deleteShipFinance(a){const{error:r}=await this.supabase.from("ship_finances").delete().eq("id",a);if(r)throw r}async getShipCargo(a){const{data:r,error:n}=await this.supabase.from("ship_cargo").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({"Leg/Route":o.leg_route,Item:o.item,Tons:parseFloat(o.tons),"Purchase World":o.purchase_world,"Purchase Price (Cr/ton)":parseFloat(o.purchase_price_per_ton),"Sale World":o.sale_world,"Sale Price (Cr/ton)":o.sale_price_per_ton?parseFloat(o.sale_price_per_ton):null,"Broker (DM)":o.broker_dm,"Fees/Taxes (Cr)":o.fees_taxes?parseFloat(o.fees_taxes):void 0,"Profit (Cr)":o.profit?parseFloat(o.profit):null}))}async addShipCargo(a,r){const{data:n,error:o}=await this.supabase.from("ship_cargo").insert({campaign_id:a,leg_route:r["Leg/Route"],item:r.Item,tons:r.Tons,purchase_world:r["Purchase World"],purchase_price_per_ton:r["Purchase Price (Cr/ton)"],sale_world:r["Sale World"],sale_price_per_ton:r["Sale Price (Cr/ton)"],broker_dm:r["Broker (DM)"],fees_taxes:r["Fees/Taxes (Cr)"],profit:r["Profit (Cr)"]}).select().single();if(o)throw o;return{"Leg/Route":n.leg_route,Item:n.item,Tons:parseFloat(n.tons),"Purchase World":n.purchase_world,"Purchase Price (Cr/ton)":parseFloat(n.purchase_price_per_ton),"Sale World":n.sale_world,"Sale Price (Cr/ton)":n.sale_price_per_ton?parseFloat(n.sale_price_per_ton):null,"Broker (DM)":n.broker_dm,"Fees/Taxes (Cr)":n.fees_taxes?parseFloat(n.fees_taxes):void 0,"Profit (Cr)":n.profit?parseFloat(n.profit):null}}async updateShipCargo(a,r){const n={};r["Leg/Route"]&&(n.leg_route=r["Leg/Route"]),r.Item&&(n.item=r.Item),r.Tons!==void 0&&(n.tons=r.Tons),r["Purchase World"]&&(n.purchase_world=r["Purchase World"]),r["Purchase Price (Cr/ton)"]!==void 0&&(n.purchase_price_per_ton=r["Purchase Price (Cr/ton)"]),r["Sale World"]!==void 0&&(n.sale_world=r["Sale World"]),r["Sale Price (Cr/ton)"]!==void 0&&(n.sale_price_per_ton=r["Sale Price (Cr/ton)"]),r["Broker (DM)"]!==void 0&&(n.broker_dm=r["Broker (DM)"]),r["Fees/Taxes (Cr)"]!==void 0&&(n.fees_taxes=r["Fees/Taxes (Cr)"]),r["Profit (Cr)"]!==void 0&&(n.profit=r["Profit (Cr)"]);const{error:o}=await this.supabase.from("ship_cargo").update(n).eq("id",a);if(o)throw o}async deleteShipCargo(a){const{error:r}=await this.supabase.from("ship_cargo").delete().eq("id",a);if(r)throw r}async getShipMaintenance(a){const{data:r,error:n}=await this.supabase.from("ship_maintenance").select("*").eq("campaign_id",a).order("maintenance_date",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({Date:o.maintenance_date,Type:o.type,Description:o.description,"Cost (Cr)":o.cost?parseFloat(o.cost):void 0,Location:o.location,Notes:o.notes}))}async addShipMaintenance(a,r){const{data:n,error:o}=await this.supabase.from("ship_maintenance").insert({campaign_id:a,maintenance_date:r.Date,type:r.Type,description:r.Description,cost:r["Cost (Cr)"],location:r.Location,notes:r.Notes}).select().single();if(o)throw o;return{Date:n.maintenance_date,Type:n.type,Description:n.description,"Cost (Cr)":n.cost?parseFloat(n.cost):void 0,Location:n.location,Notes:n.notes}}async updateShipMaintenance(a,r){const n={};r.Date&&(n.maintenance_date=r.Date),r.Type&&(n.type=r.Type),r.Description&&(n.description=r.Description),r["Cost (Cr)"]!==void 0&&(n.cost=r["Cost (Cr)"]),r.Location!==void 0&&(n.location=r.Location),r.Notes!==void 0&&(n.notes=r.Notes);const{error:o}=await this.supabase.from("ship_maintenance").update(n).eq("id",a);if(o)throw o}async deleteShipMaintenance(a){const{error:r}=await this.supabase.from("ship_maintenance").delete().eq("id",a);if(r)throw r}async getCampaignLoans(a){const{data:r,error:n}=await this.supabase.from("campaign_loans").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({"Loan Type":o.loan_type,Principal:parseFloat(o.principal),"Interest Rate":o.interest_rate?parseFloat(o.interest_rate):void 0,"Monthly Payment":o.monthly_payment?parseFloat(o.monthly_payment):void 0,"Remaining Balance":o.remaining_balance?parseFloat(o.remaining_balance):void 0,Notes:o.notes}))}async addCampaignLoan(a,r){const{data:n,error:o}=await this.supabase.from("campaign_loans").insert({campaign_id:a,loan_type:r["Loan Type"],principal:r.Principal,interest_rate:r["Interest Rate"],monthly_payment:r["Monthly Payment"],remaining_balance:r["Remaining Balance"],notes:r.Notes}).select().single();if(o)throw o;return{"Loan Type":n.loan_type,Principal:parseFloat(n.principal),"Interest Rate":n.interest_rate?parseFloat(n.interest_rate):void 0,"Monthly Payment":n.monthly_payment?parseFloat(n.monthly_payment):void 0,"Remaining Balance":n.remaining_balance?parseFloat(n.remaining_balance):void 0,Notes:n.notes}}async updateCampaignLoan(a,r){const n={};r["Loan Type"]&&(n.loan_type=r["Loan Type"]),r.Principal!==void 0&&(n.principal=r.Principal),r["Interest Rate"]!==void 0&&(n.interest_rate=r["Interest Rate"]),r["Monthly Payment"]!==void 0&&(n.monthly_payment=r["Monthly Payment"]),r["Remaining Balance"]!==void 0&&(n.remaining_balance=r["Remaining Balance"]),r.Notes!==void 0&&(n.notes=r.Notes);const{error:o}=await this.supabase.from("campaign_loans").update(n).eq("id",a);if(o)throw o}async deleteCampaignLoan(a){const{error:r}=await this.supabase.from("campaign_loans").delete().eq("id",a);if(r)throw r}async getPartyInventory(a){const{data:r,error:n}=await this.supabase.from("party_inventory").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({Item:o.item,Qty:o.quantity,"Unit Mass (kg)":o.unit_mass_kg?parseFloat(o.unit_mass_kg):void 0,"Total Mass (kg)":o.total_mass_kg?parseFloat(o.total_mass_kg):void 0,"Unit Value (Cr)":o.unit_value?parseFloat(o.unit_value):void 0,"Total Value (Cr)":o.total_value?parseFloat(o.total_value):void 0,"Location/Container":o.location_container,Notes:o.notes}))}async addPartyInventoryItem(a,r){const{data:n,error:o}=await this.supabase.from("party_inventory").insert({campaign_id:a,item:r.Item,quantity:r.Qty,unit_mass_kg:r["Unit Mass (kg)"],total_mass_kg:r["Total Mass (kg)"],unit_value:r["Unit Value (Cr)"],total_value:r["Total Value (Cr)"],location_container:r["Location/Container"],notes:r.Notes}).select().single();if(o)throw o;return{Item:n.item,Qty:n.quantity,"Unit Mass (kg)":n.unit_mass_kg?parseFloat(n.unit_mass_kg):void 0,"Total Mass (kg)":n.total_mass_kg?parseFloat(n.total_mass_kg):void 0,"Unit Value (Cr)":n.unit_value?parseFloat(n.unit_value):void 0,"Total Value (Cr)":n.total_value?parseFloat(n.total_value):void 0,"Location/Container":n.location_container,Notes:n.notes}}async updatePartyInventoryItem(a,r){const n={};r.Item&&(n.item=r.Item),r.Qty!==void 0&&(n.quantity=r.Qty),r["Unit Mass (kg)"]!==void 0&&(n.unit_mass_kg=r["Unit Mass (kg)"]),r["Total Mass (kg)"]!==void 0&&(n.total_mass_kg=r["Total Mass (kg)"]),r["Unit Value (Cr)"]!==void 0&&(n.unit_value=r["Unit Value (Cr)"]),r["Total Value (Cr)"]!==void 0&&(n.total_value=r["Total Value (Cr)"]),r["Location/Container"]!==void 0&&(n.location_container=r["Location/Container"]),r.Notes!==void 0&&(n.notes=r.Notes);const{error:o}=await this.supabase.from("party_inventory").update(n).eq("id",a);if(o)throw o}async deletePartyInventoryItem(a){const{error:r}=await this.supabase.from("party_inventory").delete().eq("id",a);if(r)throw r}async getCampaignAmmo(a){const{data:r,error:n}=await this.supabase.from("campaign_ammo").select("*").eq("campaign_id",a).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(o=>({Weapon:o.weapon,"Ammo Type":o.ammo_type,"Magazine Size":o.magazine_size,"Rounds Loaded":o.rounds_loaded,"Spare Magazines":o.spare_magazines,"Loose Rounds":o.loose_rounds,"Total Rounds":o.total_rounds,Cost:o.cost?parseFloat(o.cost):void 0,Notes:o.notes}))}async addCampaignAmmo(a,r){const{data:n,error:o}=await this.supabase.from("campaign_ammo").insert({campaign_id:a,weapon:r.Weapon,ammo_type:r["Ammo Type"],magazine_size:r["Magazine Size"]?.toString(),rounds_loaded:r["Rounds Loaded"]?.toString(),spare_magazines:r["Spare Magazines"]?.toString(),loose_rounds:r["Loose Rounds"]?.toString(),total_rounds:r["Total Rounds"],cost:r.Cost,notes:r.Notes}).select().single();if(o)throw o;return{Weapon:n.weapon,"Ammo Type":n.ammo_type,"Magazine Size":n.magazine_size,"Rounds Loaded":n.rounds_loaded,"Spare Magazines":n.spare_magazines,"Loose Rounds":n.loose_rounds,"Total Rounds":n.total_rounds,Cost:n.cost?parseFloat(n.cost):void 0,Notes:n.notes}}async updateCampaignAmmo(a,r){const n={};r.Weapon&&(n.weapon=r.Weapon),r["Ammo Type"]!==void 0&&(n.ammo_type=r["Ammo Type"]),r["Magazine Size"]!==void 0&&(n.magazine_size=r["Magazine Size"]?.toString()),r["Rounds Loaded"]!==void 0&&(n.rounds_loaded=r["Rounds Loaded"]?.toString()),r["Spare Magazines"]!==void 0&&(n.spare_magazines=r["Spare Magazines"]?.toString()),r["Loose Rounds"]!==void 0&&(n.loose_rounds=r["Loose Rounds"]?.toString()),r["Total Rounds"]!==void 0&&(n.total_rounds=r["Total Rounds"]),r.Cost!==void 0&&(n.cost=r.Cost),r.Notes!==void 0&&(n.notes=r.Notes);const{error:o}=await this.supabase.from("campaign_ammo").update(n).eq("id",a);if(o)throw o}async deleteCampaignAmmo(a){const{error:r}=await this.supabase.from("campaign_ammo").delete().eq("id",a);if(r)throw r}async getAllCampaignData(a){const[r,n,o,c,h,m,p]=await Promise.all([this.getCampaignFinances(a),this.getShipFinances(a),this.getShipCargo(a),this.getShipMaintenance(a),this.getCampaignLoans(a),this.getPartyInventory(a),this.getCampaignAmmo(a)]);return{finances:r,shipFinances:n,cargo:o,maintenance:c,loans:h,partyInventory:m,ammo:p}}}class wC{async mapAuthUserToUser(a){try{const{isSupabaseConfigured:r}=await El(async()=>{const{isSupabaseConfigured:n}=await Promise.resolve().then(()=>Oy);return{isSupabaseConfigured:n}},void 0);if(r){const{data:n,error:o}=await W.from("user_profiles").select("display_name, username, profile_completed").eq("id",a.id).single();if(!o&&n)return bu.toDomain(a,n)}return bu.toDomain(a)}catch{return bu.toDomain(a)}}async getCurrentUser(){try{const{data:{user:a},error:r}=await W.auth.getUser();return r||!a?null:await this.mapAuthUserToUser(a)}catch{return null}}async signIn(a,r){try{const{data:n,error:o}=await W.auth.signInWithPassword({email:a,password:r});return o?{success:!1,error:o.message}:{success:!0,data:{id:n.user.id,email:n.user.email||"",displayName:n.user.user_metadata?.display_name,createdAt:new Date(n.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(a,r){try{const n=`${window.location.origin}/traveller-dashboard/`,{data:o,error:c}=await W.auth.signUp({email:a,password:r,options:{data:{display_name:a.split("@")[0]},emailRedirectTo:n}});return c?{success:!1,error:c.message}:o.user?{success:!0,data:{id:o.user.id,email:o.user.email||"",displayName:o.user.user_metadata?.display_name,createdAt:new Date(o.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:a}=await W.auth.signOut();return a?{success:!1,error:a.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(a){const{data:{subscription:r}}=W.auth.onAuthStateChange(async(n,o)=>{if(o?.user){const c=await this.mapAuthUserToUser(o.user);a(c)}else a(null)});return()=>r.unsubscribe()}async completeProfile(a,r,n){try{const{error:o}=await W.from("user_profiles").update({display_name:r,username:n,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",a);if(o)return o.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:o.message};const{data:c,error:h}=await W.auth.updateUser({data:{display_name:r,username:n,profile_completed:!0}});return h?{success:!1,error:h.message}:{success:!0,data:{id:c.user.id,email:c.user.email||"",displayName:r,username:n,profileCompleted:!0,createdAt:new Date(c.user.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to complete profile"}}}buildProfileUpdates(a,r){const n={updated_at:new Date().toISOString()};return a!==void 0&&(n.display_name=a),r!==void 0&&(n.username=r),n}buildAuthUpdates(a,r){const n={};return a!==void 0&&(n.display_name=a),r!==void 0&&(n.username=r),n}async updateProfile(a,r,n){try{const o=this.buildProfileUpdates(r,n),{error:c}=await W.from("user_profiles").update(o).eq("id",a);if(c)return c.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:c.message};const h=this.buildAuthUpdates(r,n),{data:m,error:p}=await W.auth.updateUser({data:h});if(p)return{success:!1,error:p.message};const{data:g}=await W.from("user_profiles").select("*").eq("id",a).single(),v=g;return{success:!0,data:{id:m.user.id,email:m.user.email||"",displayName:v?.display_name||m.user.user_metadata?.display_name,username:v?.username||m.user.user_metadata?.username,profileCompleted:v?.profile_completed||m.user.user_metadata?.profile_completed||!1,createdAt:new Date(m.user.created_at)}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to update profile"}}}async changePassword(a,r,n){try{const{data:o}=await W.auth.getUser();if(!o.user?.email)return{success:!1,error:"User not found"};const{error:c}=await W.auth.signInWithPassword({email:o.user.email,password:r});if(c)return{success:!1,error:"Current password is incorrect"};const{error:h}=await W.auth.updateUser({password:n});return h?{success:!1,error:h.message}:{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to change password"}}}async deleteAccount(a){try{const{error:r}=await W.from("user_profiles").delete().eq("id",a);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class Ly{async getCampaigns(a){try{const{data:r,error:n}=await W.from("campaigns").select(`
          *,
          campaign_members!inner(
            is_admin,
            is_gm,
            is_player,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",a).order("created_at",{ascending:!1});return n?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(c=>{const h=c.campaign_members[0];return{id:c.id,name:c.name,description:c.description||void 0,createdBy:c.created_by,createdAt:new Date(c.created_at||Date.now()),updatedAt:new Date(c.updated_at||Date.now()),userRoles:h?{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1}:{isAdmin:!1,isGm:!1,isPlayer:!1},memberCount:c.member_count?.[0]?.count||0,isOwner:c.created_by===a}})}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(a){try{const{data:r,error:n}=await W.from("campaigns").select("*").eq("id",a).single();return n?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at||Date.now()),updatedAt:new Date(r.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(a,r,n=!1){try{const{data:o,error:c}=await W.from("campaigns").insert({name:r.name,description:r.description,created_by:a}).select().single();if(c)return{success:!1,error:`Failed to create campaign: ${c.message}`};const{error:h}=await W.from("campaign_members").insert({campaign_id:o.id,user_id:a,role:"admin"});if(h)return await W.from("campaigns").delete().eq("id",o.id),{success:!1,error:`Failed to set up campaign admin: ${h.message}`};if(n){const{error:p}=await W.from("campaign_members").insert({campaign_id:o.id,user_id:a,role:"gm"})}return{success:!0,data:{id:o.id,name:o.name,description:o.description||void 0,createdBy:o.created_by,createdAt:new Date(o.created_at||Date.now()),updatedAt:new Date(o.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(a,r){try{const{error:n}=await W.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",a);return n?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(a){try{const{error:r}=await W.from("campaigns").delete().eq("id",a);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(a){try{const{data:r,error:n}=await W.from("campaign_members").select("id, user_id, is_admin, is_gm, is_player, created_at").eq("campaign_id",a).order("created_at",{ascending:!0});if(n)return{success:!1,error:"Failed to fetch campaign members"};const o=[];for(const c of r){const h=c;try{const{data:m,error:p}=await W.from("user_profiles").select("*").eq("id",h.user_id).single();let g,v,b;if(!p&&m){const x=m;g=x.email||"",v=x.display_name||void 0,b=x.username||void 0}else g=`user_${h.user_id.slice(0,8)}@example.com`,v=void 0,b=void 0;o.push({id:h.id,userId:h.user_id,email:g,displayName:v,username:b,roles:{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1},joinedAt:new Date(h.created_at)})}catch{o.push({id:h.id,userId:h.user_id,email:`user_${h.user_id.slice(0,8)}@example.com`,displayName:void 0,username:void 0,roles:{isAdmin:h.is_admin||!1,isGm:h.is_gm||!1,isPlayer:h.is_player||!1},joinedAt:new Date(h.created_at)})}}return{success:!0,data:o}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(a,r,n){try{const{data:o,error:c}=await W.from("user_profiles").select("id").eq("email",r).single();if(c||!o){if(!(await W.auth.getUser()).data.user)return{success:!1,error:"You must be logged in to send invitations"};try{const{data:g,error:v}=await W.functions.invoke("invite-user",{body:{email:r,campaignId:a,role:n,campaignName:void 0}});return v?{success:!1,error:`Failed to send invitation: ${v.message||JSON.stringify(v)}`}:g?.error?{success:!1,error:`${g.error}${g.details?`: ${g.details}`:""}`}:{success:!0}}catch(g){return{success:!1,error:`Failed to send invitation: ${g instanceof Error?g.message:"Unknown error"}`}}}const{data:h}=await W.from("campaign_members").select("id").eq("campaign_id",a).eq("user_id",o.id).single();if(h)return{success:!1,error:"User is already a member of this campaign"};const{error:m}=await W.from("campaign_members").insert({campaign_id:a,user_id:o.id,role:n});return m?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(a,r,n){try{const{error:o}=await W.from("campaign_members").update({is_admin:n.isAdmin,is_gm:n.isGm,is_player:n.isPlayer}).eq("campaign_id",a).eq("user_id",r);return o?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(a,r){try{const{error:n}=await W.from("campaign_members").delete().eq("campaign_id",a).eq("user_id",r);return n?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createPendingInvitation(a,r,n,o){try{const{data:c}=await W.from("pending_invitations").select("id").eq("email",r).eq("campaign_id",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(c)return{success:!1,error:"An invitation has already been sent to this email address for this campaign"};const{data:h}=await W.from("campaigns").select("name").eq("id",a).single(),{data:m}=await W.from("user_profiles").select("display_name, email").eq("id",o).single(),{data:p,error:g}=await W.from("pending_invitations").insert({email:r,campaign_id:a,invited_by:o,role:n}).select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at
        `).single();return g?{success:!1,error:"Failed to create invitation"}:(await W.rpc("send_campaign_invitation",{p_email:r,p_campaign_id:a,p_campaign_name:h?.name||"Unknown Campaign",p_inviter_name:m?.display_name||m?.email||"Unknown User",p_role:n}),{success:!0,data:{id:p.id,email:p.email,campaignId:p.campaign_id,campaignName:h?.name,invitedBy:p.invited_by,inviterName:m?.display_name||m?.email,role:p.role,createdAt:new Date(p.created_at||""),expiresAt:new Date(p.expires_at||""),acceptedAt:p.accepted_at?new Date(p.accepted_at):void 0}})}catch{return{success:!1,error:"An unexpected error occurred"}}}async getPendingInvitations(a){try{const{data:r,error:n}=await W.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("campaign_id",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return n?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(c=>({id:c.id,email:c.email,campaignId:c.campaign_id,campaignName:c.campaigns?.name,invitedBy:c.invited_by,inviterName:void 0,role:c.role,createdAt:new Date(c.created_at||""),expiresAt:new Date(c.expires_at||""),acceptedAt:c.accepted_at?new Date(c.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserPendingInvitations(a){try{const{data:r,error:n}=await W.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("email",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return n?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(c=>({id:c.id,email:c.email,campaignId:c.campaign_id,campaignName:c.campaigns?.name,invitedBy:c.invited_by,inviterName:void 0,role:c.role,createdAt:new Date(c.created_at||""),expiresAt:new Date(c.expires_at||""),acceptedAt:c.accepted_at?new Date(c.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptPendingInvitation(a,r){try{const{data:n,error:o}=await W.from("pending_invitations").select("*").eq("id",a).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(o||!n)return{success:!1,error:"Invitation not found or expired"};const{data:c}=await W.from("campaign_members").select("id").eq("campaign_id",n.campaign_id).eq("user_id",r).single();if(c)return await W.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",a),{success:!1,error:"You are already a member of this campaign"};const{error:h}=await W.from("campaign_members").insert({campaign_id:n.campaign_id,user_id:r,is_admin:n.role==="admin",is_gm:n.role==="gm",is_player:n.role==="player"});if(h)return{success:!1,error:"Failed to add you to the campaign"};const{error:m}=await W.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",a);return{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declinePendingInvitation(a){try{const{error:r}=await W.from("pending_invitations").delete().eq("id",a);return r?{success:!1,error:"Failed to decline invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async cancelPendingInvitation(a){try{const{error:r}=await W.from("pending_invitations").delete().eq("id",a);return r?{success:!1,error:"Failed to cancel invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(a,r){try{const n=await this.getUserRoles(a,r);if(!n.success||!n.data)return{success:!1,error:n.error||"User is not a member of this campaign"};const o=n.data;let c;return o.isAdmin?c="admin":o.isGm?c="gm":c="player",{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRoles(a,r){try{const{data:n,error:o}=await W.from("campaign_members").select("is_admin, is_gm, is_player").eq("campaign_id",a).eq("user_id",r).single();if(o||!n)return{success:!1,error:"User is not a member of this campaign"};const c=n;return{success:!0,data:{isAdmin:c.is_admin||!1,isGm:c.is_gm||!1,isPlayer:c.is_player||!1}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(a,r){try{const{data:n,error:o}=await W.from("campaign_members").select("id").eq("campaign_id",a).eq("user_id",r).single();return o?{success:!0,data:!1}:{success:!0,data:!!n}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(a){try{const{data:r,error:n}=await W.from("characters").select("*").eq("campaign_id",a).order("created_at",{ascending:!0});return n?{success:!1,error:n.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(a,r,n,o,c){try{const{data:h,error:m}=await W.from("characters").insert({campaign_id:a,name:n,player_name:o,character_name:c,owner_id:r,characteristics:{STR:0,DEX:0,END:0,INT:0,EDU:0,SOC:0},skills:[]}).select().single();return m?{success:!1,error:m.message}:{success:!0,data:h}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCharacter(a,r){try{const{error:n}=await W.from("characters").update({...r,updated_at:new Date().toISOString()}).eq("id",a);return n?{success:!1,error:n.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createStandaloneCharacter(a,r){try{const{data:n,error:o}=await W.rpc("create_standalone_character",{user_id:a,char_name:r.name,player_name:r.playerName||void 0,character_name:r.characterName||void 0});return o?{success:!1,error:o.message}:{success:!0,data:rg.toDomain(n)}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getStandaloneCharacters(a){try{const{data:r,error:n}=await W.from("characters").select("*").eq("owner_id",a).is("campaign_id",null).order("created_at",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:rg.toDomainList(r||[])}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteStandaloneCharacter(a,r){try{const{data:n,error:o}=await W.from("characters").select("owner_id, campaign_id").eq("id",a).single();if(o||!n)return{success:!1,error:"Character not found"};if(n.campaign_id!==null)return{success:!1,error:"This is not a standalone character"};if(n.owner_id!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:c}=await W.from("characters").delete().eq("id",a);return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async assignCharacterToCampaign(a,r,n){try{const{data:o,error:c}=await W.from("characters").select("owner_id, campaign_id").eq("id",a).single();if(c||!o)return{success:!1,error:"Character not found"};if(o.owner_id!==n)return{success:!1,error:"You don't have permission to move this character"};if(o.campaign_id!==null)return{success:!1,error:"Character is already assigned to a campaign"};const{data:h,error:m}=await W.from("campaign_members").select("id").eq("campaign_id",r).eq("user_id",n).single();if(m||!h)return{success:!1,error:"You are not a member of this campaign"};const{error:p}=await W.from("characters").update({campaign_id:r}).eq("id",a);return p?{success:!1,error:p.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaignInvitation(a,r,n,o){try{const{data:c,error:h}=await W.rpc("create_campaign_invitation",{p_campaign_id:a,p_invited_email:r,p_invited_by:n,p_roles_offered:JSON.stringify(o)});return h?{success:!1,error:h.message}:{success:!0,data:c}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserInvitations(a){try{const{data:r,error:n}=await W.rpc("get_user_invitations",{p_user_email:a});return n?{success:!1,error:n.message}:{success:!0,data:Array.isArray(r)?r.map(c=>({id:c.id,campaignId:c.campaign_id,campaignName:c.campaign_name,invitedEmail:c.invited_email,invitedBy:c.invited_by,invitedByName:c.inviter_name,rolesOffered:typeof c.roles_offered=="string"?JSON.parse(c.roles_offered):c.roles_offered,status:c.status,expiresAt:c.expires_at?new Date(c.expires_at):null,createdAt:new Date(c.created_at),acceptedAt:c.accepted_at?new Date(c.accepted_at):null})):[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptCampaignInvitation(a,r){try{const{data:n,error:o}=await W.rpc("accept_campaign_invitation",{p_invitation_id:a,p_user_id:r});return o?{success:!1,error:o.message}:{success:!0,data:n}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declineCampaignInvitation(a){try{const{data:r,error:n}=await W.rpc("decline_campaign_invitation",{p_invitation_id:a});return n?{success:!1,error:n.message}:{success:!0,data:r}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(a,r){try{const{data:n,error:o}=await W.from("characters").select("owner_id, campaign_id, campaigns!inner(created_by)").eq("id",a).single();if(o)return{success:!1,error:"Character not found"};if(n.owner_id!==r&&n.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:c}=await W.from("characters").delete().eq("id",a);return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}function ld(i){const{items:a,loading:r,error:n,execute:o,setItems:c}=zl(),h=C.useMemo(()=>new Ly,[]),m=C.useCallback(async b=>{if(!b)return;await o(async w=>{const S=await h.getCharactersByCampaign(w);return S.success&&S.data&&S.data.length>0?{success:!0,data:S.data.map(j=>({id:j.id,campaignId:j.campaign_id||"",displayName:j.name,playerName:j.player_name||"",characterName:j.character_name||"",ownerId:j.owner_id||void 0,stats:j.characteristics,skills:j.skills}))}:{success:!0,data:[]}},b)},[h,o]),p=C.useCallback(async(b,x,w)=>{if(!i)return{success:!1,error:"No campaign selected"};try{const S=`${b}  ${x}`,N=await h.createCharacterForCampaign(i,w,S,b,x);if(N.success&&N.data){const j={id:N.data.id,campaignId:N.data.campaign_id||"",displayName:N.data.name,playerName:b,characterName:x,ownerId:N.data.owner_id||void 0};return c(A=>[...A,j]),{success:!0,data:j}}return{success:!1,error:N.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[i,h,c]),g=C.useCallback(async(b,x)=>{try{const w=await h.deleteCharacter(b,x);return w.success?(c(S=>S.filter(N=>N.id!==b)),{success:!0}):{success:!1,error:w.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[h,c]),v=C.useCallback(async(b,x)=>{try{const w=await h.updateCharacter(b,x);return w.success?(c(S=>S.map(N=>N.id===b?{...N,displayName:x.name||N.displayName,stats:x.characteristics?x.characteristics:N.stats||{STR:{value:0,xp:0},DEX:{value:0,xp:0},END:{value:0,xp:0},INT:{value:0,xp:0},EDU:{value:0,xp:0},SOC:{value:0,xp:0}},skills:x.skills||N.skills}:N)),{success:!0}):{success:!1,error:w.error||"Failed to update character"}}catch{return{success:!1,error:"An error occurred while updating the character"}}},[h,c]);return C.useEffect(()=>{i?m(i):c([])},[i,m,c]),{characters:a,loading:r,error:n,createCharacter:p,updateCharacter:v,deleteCharacter:g,refreshCharacters:()=>i&&m(i)}}function _C({campaign:i,onSelect:a,onEdit:r,onSettings:n}){const o=id(i.userRoles);return u.jsxs(Ll,{className:"group hover:border-primary transition-all duration-300",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4 pt-4",children:[u.jsxs("div",{className:"flex-grow min-w-0",children:[u.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-text-main truncate",children:i.name}),i.description&&u.jsx("p",{className:"text-[10px] text-muted font-bold uppercase tracking-widest line-clamp-2 mt-1 opacity-60",children:i.description})]}),u.jsx("span",{className:`px-2 py-0.5 text-[8px] font-black uppercase border border-current shrink-0 ml-2 ${zy(o)}`,children:Dl(i.userRoles)})]}),u.jsxs("div",{className:"flex items-center justify-between border-t border-border pt-4 mt-4",children:[u.jsxs("span",{className:"text-[8px] font-black uppercase text-muted tracking-widest",children:["MEMBERS: ",i.memberCount||0]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(i),className:"p-1.5 text-muted hover:text-primary transition-all",title:"Edit Campaign",children:u.jsx(mb,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>n(i),className:"p-1.5 text-muted hover:text-primary transition-all",title:"Campaign Settings",children:u.jsx(mg,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>a(i.id),className:"p-1.5 text-white bg-primary hover:scale-110 transition-transform ml-1",children:u.jsx($u,{className:"w-3.5 h-3.5"})})]})]})]})}function SC({campaign:i,onViewCampaign:a}){const{characters:r}=ld(i.id);return u.jsxs(Ll,{className:"group hover:border-primary transition-all duration-300",children:[u.jsx(Uy,{title:i.name,subtitle:"MANIFEST"}),u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("span",{className:"text-[8px] font-black uppercase text-muted tracking-widest",children:"Crew Manifest Status"}),u.jsxs("span",{className:"px-2 py-0.5 text-[8px] font-black uppercase border border-primary text-primary",children:[r.length," ACTIVE"]})]}),r.length===0?u.jsx("div",{className:"py-6 px-4 border border-dashed border-border bg-surface-low mb-4",children:u.jsx("p",{className:"text-muted text-[8px] font-black uppercase tracking-widest text-center",children:"No active personnel records"})}):u.jsx("div",{className:"mb-4 bg-surface-low p-3 border border-border",children:u.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(n=>u.jsxs("div",{className:"flex items-center justify-between text-[10px] font-black uppercase tracking-tighter",children:[u.jsxs("span",{className:"text-text-main",children:["- ",n.characterName||n.displayName]}),u.jsx("div",{className:"w-1.5 h-1.5 bg-primary animate-pulse shadow-[0_0_5px_var(--color-primary)]"})]},n.id)),r.length>3&&u.jsxs("p",{className:"text-[8px] text-muted uppercase font-bold tracking-[0.2em] pt-1",children:["+ ",r.length-3," additional files"]})]})}),u.jsx("button",{onClick:()=>a(i.id),className:"w-full text-[10px] font-black uppercase tracking-[0.3em] bg-side text-white hover:bg-primary py-3 transition-all",style:{clipPath:"polygon(0 0, 100% 0, 95% 100%, 5% 100%)"},children:"ACCESS LOGS"})]})}function CC({campaigns:i,onSelect:a,onEdit:r,onSettings:n}){return u.jsxs("div",{children:[u.jsxs("div",{className:"mgt-header-bar mb-6",children:[u.jsx("h2",{className:"text-xs font-black tracking-[0.3em]",children:"Fleet Management"}),u.jsx("span",{className:"text-[8px] opacity-50 px-2 py-0.5 border border-white/20",children:"SYS // ADM-02"})]}),u.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(o=>u.jsx(_C,{campaign:o,onSelect:a,onEdit:r,onSettings:n},o.id))})]})}function sg({campaigns:i,onViewCampaign:a}){const r=i.filter(n=>n.memberCount&&n.memberCount>0);return u.jsxs("div",{children:[u.jsxs("div",{className:"mgt-header-bar mb-6",children:[u.jsx("h2",{className:"text-xs font-black tracking-[0.3em]",children:"Personnel Database"}),u.jsx("span",{className:"text-[8px] opacity-50 px-2 py-0.5 border border-white/20",children:"SYS // PERS-01"})]}),r.length===0?u.jsx("div",{className:"card-mgt hud-frame p-12 text-center bg-card/50",children:u.jsx("p",{className:"text-muted text-[10px] font-black uppercase tracking-[0.3em]",children:"No personnel data available currently"})}):u.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(n=>u.jsx(SC,{campaign:n,onViewCampaign:a},n.id))})]})}function xu(){const i=Pn(),a=aa(),{campaigns:r,loading:n,error:o,createCampaign:c,updateCampaign:h,deleteCampaign:m}=Dy(),{fetchMembers:p,addMemberByEmail:g,removeMember:v,updateMemberRole:b}=iC(),[x,w]=C.useState(!1),[S,N]=C.useState(!1),[j,A]=C.useState(!1),[R,k]=C.useState(!1),[B,V]=C.useState(null),[G,I]=C.useState(""),[Y,P]=C.useState(""),[X,de]=C.useState(!1),[ce,ie]=C.useState(null),F=async K=>{const me=await c(K);return me.success&&w(!1),me},pe=K=>{V(K),I(K.name),P(K.description||""),N(!0)},L=async K=>{if(K.preventDefault(),!!B){de(!0);try{(await h(B.id,{name:G.trim(),description:Y.trim()||void 0})).success&&(N(!1),V(null))}finally{de(!1)}}},Q=K=>{ie(K),A(!0)},re=async(K,me,et)=>{const ze=id(et);return await g(K,me,ze)},te=async(K,me)=>{await v(K,me)},J=async(K,me,et)=>await b(K,me,et),Ne=K=>({id:K.id,name:K.name,description:K.description||null,created_at:K.createdAt.toISOString(),created_by:K.createdBy,updated_at:K.updatedAt.toISOString(),userRoles:K.userRoles,member_count:K.memberCount}),Ae=async K=>{const me=await p(K);return me.success?me.data:void 0};return n?u.jsx(oC,{message:"Loading dashboard..."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-12 flex flex-col md:flex-row md:items-end justify-between gap-6 animate-hud",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter uppercase mb-2",children:[a.pathname==="/"&&u.jsxs(u.Fragment,{children:["Mission ",u.jsx("span",{className:"text-primary",children:"Control"})]}),a.pathname==="/campaigns"&&u.jsxs(u.Fragment,{children:["Tactical ",u.jsx("span",{className:"text-primary",children:"Campaigns"})]}),a.pathname==="/characters"&&u.jsxs(u.Fragment,{children:["Personnel ",u.jsx("span",{className:"text-primary",children:"Roster"})]})]}),u.jsxs("p",{className:"text-lg text-muted font-medium",children:[a.pathname==="/"&&"System Online. Welcome back, Commissioner.",a.pathname==="/campaigns"&&"Active theater operations and deployment logs.",a.pathname==="/characters"&&"Active personnel and biological signatures detected."]})]})}),u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o&&u.jsx("div",{className:"lg:col-span-12 p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:o}),u.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[(a.pathname==="/"||a.pathname==="/campaigns")&&u.jsxs(u.Fragment,{children:[a.pathname==="/"&&u.jsx("div",{className:"animate-hud delay-100",children:u.jsx(vC,{campaigns:r,onCampaignSelect:K=>i(`/campaign/${K}`)})}),r.length>0&&u.jsx("div",{className:"animate-hud delay-200",children:u.jsx(CC,{campaigns:r,onSelect:K=>i(`/campaign/${K}`),onEdit:pe,onSettings:Q})})]}),a.pathname==="/characters"&&u.jsx("div",{className:"animate-hud",children:u.jsx(sg,{campaigns:r,onViewCampaign:K=>i(`/campaign/${K}`)})})]}),u.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[u.jsxs("div",{className:"animate-hud delay-100",children:[u.jsx("h2",{className:"text-lg font-black tracking-tighter uppercase mb-4 px-2",children:"Quick Actions"}),u.jsxs("div",{className:"grid gap-4",children:[(a.pathname==="/"||a.pathname==="/campaigns")&&u.jsx(ag,{title:"New Campaign",description:"Deploy a new mission",icon:u.jsx(pg,{className:"w-6 h-6"}),onClick:()=>w(!0)}),(a.pathname==="/"||a.pathname==="/characters")&&u.jsx(ag,{title:"Characters",description:"Active personnel",icon:u.jsx(Tl,{className:"w-6 h-6"}),onClick:()=>k(!0)})]})]}),a.pathname==="/"&&u.jsx("div",{className:"animate-hud delay-200",children:u.jsx(yC,{onInvitationAccepted:()=>{}})})]})]}),a.pathname==="/"&&r.length>0&&u.jsx("div",{className:"animate-hud delay-300",children:u.jsx(sg,{campaigns:r,onViewCampaign:K=>i(`/campaign/${K}`)})})]}),u.jsx(fC,{isOpen:x,onClose:()=>w(!1),onCreateCampaign:F}),u.jsx(rt,{isOpen:S,onClose:()=>N(!1),title:"Edit Campaign",children:u.jsxs("form",{onSubmit:L,className:"space-y-4",children:[u.jsx(oe,{label:"Campaign Name",value:G,onChange:K=>I(K.target.value),placeholder:"Enter campaign name",required:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),u.jsx("textarea",{value:Y,onChange:K=>P(K.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),u.jsx(ws,{onCancel:()=>N(!1),cancelText:"Cancel",confirmText:X?"Updating...":"Update Campaign",confirmDisabled:X||!G.trim(),confirmType:"submit",isLoading:X})]})}),ce&&u.jsx(rt,{isOpen:j,onClose:()=>A(!1),title:"Campaign Settings",maxWidth:"xl",children:u.jsx(cC,{campaign:Ne(ce),onClose:()=>A(!1),onGetMembers:Ae,onAddMember:re,onRemoveMember:te,onUpdateMemberRole:J,onUpdateCampaign:async(K,me)=>{await h(K,{name:me.name,description:me.description||void 0})},onDeleteCampaign:async K=>{(await m(K)).success&&(A(!1),ie(null))}})}),u.jsx(rt,{isOpen:R,onClose:()=>k(!1),title:"Your Characters",maxWidth:"xl",children:u.jsx(hC,{campaigns:r})})]})}const jC=[{name:"Autopistol",type:"Slug Pistol",damage:"3d6-3",range:"10m",mass:1,cost:200,magazine:15,traits:["Auto 2"],tl:5,notes:"Common sidearm",source:"Core Rulebook"},{name:"Revolver",type:"Slug Pistol",damage:"3d6-3",range:"10m",mass:1,cost:150,magazine:6,traits:[],tl:4,notes:"Reliable, simple design",source:"Core Rulebook"},{name:"Snub Pistol",type:"Slug Pistol",damage:"3d6-3",range:"5m",mass:.5,cost:150,magazine:6,traits:["Zero-G"],tl:8,notes:"Designed for spacecraft use",source:"Core Rulebook"},{name:"Body Pistol",type:"Slug Pistol",damage:"3d6-3",range:"5m",mass:.25,cost:500,magazine:6,traits:[],tl:7,notes:"Easily concealed, non-metallic",source:"Core Rulebook"},{name:"Accelerator Rifle",type:"Slug Rifle",damage:"3d6",range:"250m",mass:4,cost:900,magazine:15,traits:["Auto 2","Scope"],tl:9,notes:"Magnetically accelerated projectiles",source:"Core Rulebook"},{name:"Advanced Combat Rifle",type:"Slug Rifle",damage:"3d6",range:"250m",mass:4,cost:1e3,magazine:40,traits:["Auto 3","Scope"],tl:9,notes:"Modern military standard",source:"Core Rulebook"},{name:"Assault Rifle",type:"Slug Rifle",damage:"3d6",range:"200m",mass:4,cost:300,magazine:30,traits:["Auto 3"],tl:7,notes:"Common military weapon",source:"Core Rulebook"},{name:"Autorifle",type:"Slug Rifle",damage:"3d6",range:"200m",mass:5,cost:200,magazine:20,traits:["Auto 2"],tl:6,notes:"Early automatic rifle",source:"Core Rulebook"},{name:"Rifle",type:"Slug Rifle",damage:"3d6",range:"250m",mass:4,cost:200,magazine:10,traits:[],tl:5,notes:"Standard bolt-action rifle",source:"Core Rulebook"},{name:"Shotgun",type:"Slug Rifle",damage:"4d6",range:"20m",range_long:"50m",mass:4,cost:200,magazine:10,traits:["Bulky"],tl:4,notes:"Can fire shot or slugs",source:"Core Rulebook"},{name:"Gauss Rifle",type:"Energy Rifle",damage:"4d6",range:"500m",mass:4,cost:1500,magazine:80,traits:["AP 3","Auto 3","Scope"],tl:12,notes:"Electromagnetically accelerated",source:"Core Rulebook"},{name:"Gauss Pistol",type:"Energy Pistol",damage:"3d6",range:"50m",mass:.5,cost:500,magazine:40,traits:["AP 3"],tl:12,notes:"Compact gauss weapon",source:"Core Rulebook"},{name:"Laser Carbine",type:"Energy Rifle",damage:"4d6",range:"250m",mass:4,cost:2500,magazine:50,traits:["Zero-G"],tl:9,notes:"Lightweight laser weapon",source:"Core Rulebook"},{name:"Laser Rifle",type:"Energy Rifle",damage:"5d6",range:"300m",mass:5,cost:3500,magazine:100,traits:["Zero-G"],tl:9,notes:"Standard energy weapon",source:"Core Rulebook"},{name:"Laser Pistol",type:"Energy Pistol",damage:"3d6+3",range:"50m",mass:2,cost:1500,magazine:50,traits:["Zero-G"],tl:9,notes:"Personal energy weapon",source:"Core Rulebook"},{name:"Plasma Rifle",type:"Energy Rifle",damage:"6d6",range:"100m",mass:6,cost:7e3,magazine:10,traits:["AP 10","Bulky","Blast 3"],tl:11,notes:"Superheated plasma bolts",source:"Core Rulebook"},{name:"Plasma Pistol",type:"Energy Pistol",damage:"4d6",range:"20m",mass:2,cost:4e3,magazine:10,traits:["AP 5","Blast 1"],tl:11,notes:"Compact plasma weapon",source:"Core Rulebook"},{name:"Stunner",type:"Energy Pistol",damage:"2d6 (stun)",range:"10m",mass:1,cost:500,magazine:100,traits:["Stun","Zero-G"],tl:8,notes:"Non-lethal energy weapon",source:"Core Rulebook"},{name:"Neural Disruptor",type:"Energy Pistol",damage:"Special",range:"5m",mass:.5,cost:2500,magazine:20,traits:["Stun","Illegal"],tl:11,notes:"Disrupts neural activity",source:"Core Rulebook"},{name:"Grenade Launcher",type:"Heavy Weapon",damage:"Varies",range:"250m",mass:6,cost:400,magazine:6,traits:["Bulky"],tl:7,notes:"Fires grenades",source:"Core Rulebook"},{name:"RAM Grenade Launcher",type:"Heavy Weapon",damage:"Varies",range:"250m",mass:5,cost:800,magazine:6,traits:["Bulky","Auto 3"],tl:8,notes:"Rocket Assisted Multi-purpose",source:"Core Rulebook"},{name:"Machine Gun",type:"Heavy Weapon",damage:"3d6",range:"500m",mass:10,cost:1200,magazine:100,traits:["Auto 4","Bulky"],tl:7,notes:"Crew-served weapon",source:"Core Rulebook"},{name:"Advanced Machine Gun",type:"Heavy Weapon",damage:"3d6+2",range:"600m",mass:8,cost:1800,magazine:100,traits:["Auto 4","Bulky"],tl:8,notes:"Improved crew-served weapon",source:"Core Rulebook"},{name:"PGMP (Plasma Gun, Man Portable)",type:"Heavy Weapon",damage:"1d6 x 10",range:"300m",mass:8,cost:2e4,magazine:10,traits:["AP 20","Bulky","Blast 6"],tl:13,notes:"Man-portable plasma cannon",source:"Core Rulebook"},{name:"FGMP (Fusion Gun, Man Portable)",type:"Heavy Weapon",damage:"2d6 x 10",range:"300m",mass:12,cost:5e4,magazine:20,traits:["AP 30","Bulky","Blast 9","Radiation"],tl:14,notes:"Man-portable fusion weapon",source:"Core Rulebook"},{name:"Rocket Launcher",type:"Heavy Weapon",damage:"Varies",range:"500m",mass:8,cost:2e3,magazine:1,traits:["Bulky"],tl:7,notes:"Anti-vehicle weapon",source:"Core Rulebook"},{name:"Flamethrower",type:"Heavy Weapon",damage:"4d6",range:"20m",mass:12,cost:500,magazine:10,traits:["Bulky","Blast 3","Fire"],tl:6,notes:"Area effect flame weapon",source:"Core Rulebook"},{name:"Dagger",type:"Blade",damage:"1d6+2",range:"Melee",mass:.25,cost:10,magazine:null,traits:[],tl:1,notes:"Small blade weapon",source:"Core Rulebook"},{name:"Knife",type:"Blade",damage:"1d6+2",range:"Melee",mass:.25,cost:10,magazine:null,traits:[],tl:1,notes:"Utility/combat knife",source:"Core Rulebook"},{name:"Cutlass",type:"Blade",damage:"2d6+2",range:"Melee",mass:1,cost:100,magazine:null,traits:[],tl:2,notes:"Curved sword",source:"Core Rulebook"},{name:"Sword",type:"Blade",damage:"3d6",range:"Melee",mass:1,cost:200,magazine:null,traits:[],tl:2,notes:"Standard sword",source:"Core Rulebook"},{name:"Blade",type:"Blade",damage:"2d6+4",range:"Melee",mass:2,cost:250,magazine:null,traits:[],tl:4,notes:"Modern combat blade",source:"Core Rulebook"},{name:"Club",type:"Bludgeon",damage:"2d6",range:"Melee",mass:1,cost:5,magazine:null,traits:[],tl:0,notes:"Simple bludgeon",source:"Core Rulebook"},{name:"Improvised Weapon",type:"Bludgeon",damage:"1d6",range:"Melee",mass:1,cost:0,magazine:null,traits:[],tl:0,notes:"Any makeshift weapon",source:"Core Rulebook"},{name:"Broadsword",type:"Blade",damage:"4d6",range:"Melee",mass:2,cost:500,magazine:null,traits:["Bulky"],tl:3,notes:"Large two-handed sword",source:"Core Rulebook"},{name:"Polearm",type:"Blade",damage:"3d6+3",range:"Melee (reach)",mass:3,cost:100,magazine:null,traits:["Bulky","Reach"],tl:2,notes:"Spear, halberd, etc.",source:"Core Rulebook"},{name:"Pike",type:"Blade",damage:"3d6+2",range:"Melee (reach)",mass:4,cost:40,magazine:null,traits:["Bulky","Reach"],tl:2,notes:"Very long spear",source:"Core Rulebook"},{name:"Frag Grenade",type:"Grenade",damage:"5d6",range:"Thrown (20m)",mass:.5,cost:30,magazine:null,traits:["Blast 6"],tl:6,notes:"Fragmentation grenade",source:"Core Rulebook"},{name:"Smoke Grenade",type:"Grenade",damage:"None",range:"Thrown (20m)",mass:.25,cost:15,magazine:null,traits:["Smoke","Blast 6"],tl:6,notes:"Creates smoke screen",source:"Core Rulebook"},{name:"Stun Grenade",type:"Grenade",damage:"3d6 (stun)",range:"Thrown (20m)",mass:.25,cost:30,magazine:null,traits:["Stun","Blast 3"],tl:7,notes:"Non-lethal grenade",source:"Core Rulebook"},{name:"Aerosol Grenade",type:"Grenade",damage:"Special",range:"Thrown (20m)",mass:.25,cost:20,magazine:null,traits:["Blast 6"],tl:7,notes:"Disperses chemical agent",source:"Core Rulebook"},{name:"Snare Pistol",type:"Special",damage:"Special",range:"10m",mass:.5,cost:150,magazine:1,traits:["Entangle"],tl:8,notes:"Fires entangling net",source:"Core Rulebook"},{name:"Shotgun Pistol",type:"Slug Pistol",damage:"3d6",range:"10m",mass:1.5,cost:150,magazine:4,traits:[],tl:5,notes:"Compact shotgun",source:"Core Rulebook"},{name:"Submachine Gun",type:"Slug Rifle",damage:"3d6-3",range:"30m",mass:2.5,cost:250,magazine:30,traits:["Auto 3"],tl:6,notes:"Compact automatic weapon",source:"Core Rulebook"},{name:"Carbine",type:"Slug Rifle",damage:"3d6",range:"100m",mass:3,cost:200,magazine:10,traits:[],tl:5,notes:"Shortened rifle",source:"Core Rulebook"},{name:"Crossbow",type:"Projectile",damage:"3d6",range:"50m",mass:2,cost:75,magazine:1,traits:["Silent"],tl:2,notes:"Mechanical bow",source:"Core Rulebook"},{name:"Bow",type:"Projectile",damage:"2d6",range:"75m",mass:1,cost:60,magazine:1,traits:["Silent"],tl:1,notes:"Traditional bow",source:"Core Rulebook"}],NC=["Slug Pistol","Slug Rifle","Energy Pistol","Energy Rifle","Heavy Weapon","Blade","Bludgeon","Grenade","Projectile","Special"],AC={AP:"Armor Piercing - Reduces armor protection",Auto:"Automatic fire - Can fire multiple shots",Blast:"Area effect - Damages everything in radius",Bulky:"Large and cumbersome weapon",Fire:"Sets targets ablaze",Illegal:"Banned by most governments",Radiation:"Causes radiation damage",Reach:"Extended melee range",Scope:"Includes targeting scope",Silent:"Makes no noise when fired",Smoke:"Creates concealing smoke",Stun:"Non-lethal incapacitation","Zero-G":"Functions normally in zero gravity",Entangle:"Restricts target movement"},By={weapons:jC,weaponTypes:NC,traits:AC},qy="traveller-ui-state-v1",ng={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function EC(){try{const i=localStorage.getItem(qy);if(!i)return ng;const a=JSON.parse(i);return a.PCs||(a.PCs={}),Object.keys(a.PCs).forEach(r=>{a.PCs[r].Finance||(a.PCs[r].Finance=[]),a.PCs[r].Inventory||(a.PCs[r].Inventory=[]),a.PCs[r].Weapons||(a.PCs[r].Weapons=[]),a.PCs[r].Armour||(a.PCs[r].Armour=[]),a.PCs[r].Ammo||(a.PCs[r].Ammo=[])}),a}catch{return ng}}function RC(i){localStorage.setItem(qy,JSON.stringify(i))}function wu(i){const a=EC();a.PCs[i]||(a.PCs[i]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},RC(a))}function TC(i){const a=C.useCallback((o,c,h)=>{i(m=>{m.PCs[o]||wu(o);const p=m.PCs[o]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...m,PCs:{...m.PCs,[o]:{...p,Ammo:(p.Ammo||[]).map((g,v)=>v===c?h:g)}}}})},[i]),r=C.useCallback((o,c)=>{i(h=>{if(!h.PCs[o])return wu(o),h;const m=h.PCs[o]?.Ammo?.[c];if(!m)return h;const p=Number(m["Rounds Loaded"]||0),g=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),b=Number(m["Magazine Size"]||0);let x=p,w=g,S=v;if(x>0)x-=1;else if(w>0)w-=1,x=b-1;else if(S>0&&b>0){const A=Math.min(S,b);S-=A,x=A-1}else return h;const N=x+w*b+S,j={...m,"Rounds Loaded":x,"Spare Magazines":w,"Loose Rounds":S,"Total Rounds":N};return{...h,PCs:{...h.PCs,[o]:{...h.PCs[o],Ammo:(h.PCs[o].Ammo||[]).map((A,R)=>R===c?j:A)}}}})},[i]),n=C.useCallback((o,c)=>{i(h=>{if(!h.PCs[o])return wu(o),h;const m=h.PCs[o]?.Ammo?.[c];if(!m)return h;const p=Number(m["Rounds Loaded"]||0),g=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),b=Number(m["Magazine Size"]||0);let x=p,w=g,S=v;if(w>0&&x<b)w-=1,x=b;else if(S>0&&x<b){const A=b-x,R=Math.min(S,A);S-=R,x+=R}const N=x+w*b+S,j={...m,"Rounds Loaded":x,"Spare Magazines":w,"Loose Rounds":S,"Total Rounds":N};return{...h,PCs:{...h.PCs,[o]:{...h.PCs[o],Ammo:(h.PCs[o].Ammo||[]).map((A,R)=>R===c?j:A)}}}})},[i]);return{updateCharacterAmmo:a,fireRound:r,reloadWeapon:n}}const kC={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function OC(){const[i,a]=C.useState(kC),r=C.useCallback(b=>{a(x=>({...x,Party_Finances:b}))},[]),n=C.useCallback(b=>{a(x=>({...x,Ship_Accounts:b}))},[]),o=C.useCallback(b=>{a(x=>({...x,Ship_Cargo:[...x.Ship_Cargo,b]}))},[]),c=C.useCallback((b,x)=>{a(w=>({...w,PCs:{...w.PCs,[b]:{...w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:x}}}))},[]),h=C.useCallback((b,x)=>{a(w=>{const S=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[b]:{...S,Inventory:[...S.Inventory,x]}}}})},[]),m=C.useCallback((b,x)=>{a(w=>{const S=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},N=S.Ammo||[],j=S.Finance||[],A=N.findIndex(B=>B.Weapon===x.Weapon&&B["Ammo Type"]===x["Ammo Type"]);let R;if(A>=0){R=[...N];const B=R[A];R[A]={...B,"Spare Magazines":Number(B["Spare Magazines"]||0)+Number(x["Spare Magazines"]||0),"Loose Rounds":Number(B["Loose Rounds"]||0)+Number(x["Loose Rounds"]||0)}}else R=[...N,x];let k=j;if(x.Cost&&x.Cost>0){const B={Date:new Date().toISOString().split("T")[0],Description:`Purchased ${x["Ammo Type"]} for ${x.Weapon}`,Category:"Expense",Subcategory:"Ammo","Amount (Cr)":Math.abs(x.Cost),"Paid By":b,Notes:x.Notes||""};k=[...j,B]}return{...w,PCs:{...w.PCs,[b]:{...S,Ammo:R,Finance:k}}}})},[]),p=C.useCallback((b,x)=>{a(w=>{const S=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},N=By.weapons.find(R=>R.name===x.Weapon);let j=S.Ammo||[];N&&N.magazine!==null&&N.magazine>0&&j.findIndex(k=>k.Weapon===x.Weapon)===-1&&(j=[...j,{Weapon:x.Weapon,"Ammo Type":x.Type||"","Magazine Size":N.magazine,"Rounds Loaded":0,"Spare Magazines":0,"Loose Rounds":0,Notes:"Auto-created with weapon"}]);let A=S.Finance||[];if(x.Cost&&x.Cost>0){const R={Date:new Date().toISOString().split("T")[0],Description:`Purchased ${x.Weapon}`,Category:"Expense",Subcategory:"Weapons","Amount (Cr)":Math.abs(x.Cost),"Paid By":b,Notes:x.Notes||""};A=[...A,R]}return{...w,PCs:{...w.PCs,[b]:{...S,Weapons:[...S.Weapons||[],x],Ammo:j,Finance:A}}}})},[]),g=C.useCallback((b,x)=>{a(w=>{const S=w.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};let N=S.Finance||[];if(x.Cost&&x.Cost>0){const j={Date:new Date().toISOString().split("T")[0],Description:`Purchased ${x.Armour}`,Category:"Expense",Subcategory:"Armour","Amount (Cr)":Math.abs(x.Cost),"Paid By":b,Notes:x.Notes||""};N=[...N,j]}return{...w,PCs:{...w.PCs,[b]:{...S,Armour:[...S.Armour||[],x],Finance:N}}}})},[]),v=TC(a);return{state:i,setState:a,updatePartyFinances:r,updateShipAccounts:n,addCargoLeg:o,updateCharacterFinance:c,addCharacterInventory:h,addCharacterAmmo:m,addCharacterWeapon:p,addCharacterArmour:g,...v}}function DC(i){const[a,r]=C.useState([]),[n,o]=C.useState([]),[c,h]=C.useState([]),[m,p]=C.useState([]),[g,v]=C.useState([]),[b,x]=C.useState([]),[w,S]=C.useState([]),[N,j]=C.useState(!0),[A,R]=C.useState(null),k=Rw();C.useEffect(()=>{if(!i){j(!1);return}(async()=>{try{j(!0),R(null);const F=await k.getAllCampaignData(i);r(F.finances),o(F.shipFinances),h(F.cargo),p(F.maintenance),v(F.loans),x(F.partyInventory),S(F.ammo)}catch(F){console.error("Failed to load campaign data:",F),R(F instanceof Error?F:new Error("Failed to load campaign data"))}finally{j(!1)}})()},[i]);const B=C.useCallback(async ie=>{if(i)try{const F=ie.filter(J=>!J.id),pe=ie.filter(J=>!!J.id),L=F.map(J=>k.addCampaignFinance(i,J)),Q=await Promise.all(L),re=pe.map(J=>k.updateCampaignFinance(J.id,J));await Promise.all(re);const te=ie.map(J=>{if(J.id)return J;const Ne=F.indexOf(J);return Q[Ne]});r(te)}catch(F){throw console.error("Failed to update party finances:",F),F}},[i,k]),V=C.useCallback(async ie=>{if(i)try{const F=await k.addCampaignFinance(i,ie);r(pe=>[F,...pe])}catch(F){throw console.error("Failed to add party finance:",F),F}},[i,k]),G=C.useCallback(async ie=>{if(i)try{const F=ie.filter(J=>!J.id),pe=ie.filter(J=>!!J.id),L=F.map(J=>k.addShipFinance(i,J)),Q=await Promise.all(L),re=pe.map(J=>k.updateShipFinance(J.id,J));await Promise.all(re);const te=ie.map(J=>{if(J.id)return J;const Ne=F.indexOf(J);return Q[Ne]});o(te)}catch(F){throw console.error("Failed to update ship finances:",F),F}},[i,k]),I=C.useCallback(async ie=>{if(i)try{const F=await k.addShipFinance(i,ie);o(pe=>[F,...pe])}catch(F){throw console.error("Failed to add ship finance:",F),F}},[i,k]),Y=C.useCallback(async ie=>{if(i)try{const F=await k.addShipCargo(i,ie);h(pe=>[F,...pe])}catch(F){throw console.error("Failed to add cargo:",F),F}},[i,k]),P=C.useCallback(async ie=>{if(i)try{const F=await k.addShipMaintenance(i,ie);p(pe=>[F,...pe])}catch(F){throw console.error("Failed to add maintenance:",F),F}},[i,k]),X=C.useCallback(async ie=>{if(i)try{const F=await k.addCampaignLoan(i,ie);v(pe=>[F,...pe])}catch(F){throw console.error("Failed to add loan:",F),F}},[i,k]),de=C.useCallback(async ie=>{if(i)try{const F=await k.addPartyInventoryItem(i,ie);x(pe=>[F,...pe])}catch(F){throw console.error("Failed to add party inventory item:",F),F}},[i,k]),ce=C.useCallback(async ie=>{if(i)try{const F=await k.addCampaignAmmo(i,ie);S(pe=>[F,...pe])}catch(F){throw console.error("Failed to add campaign ammo:",F),F}},[i,k]);return{partyFinances:a,shipFinances:n,shipCargo:c,shipMaintenance:m,loans:g,partyInventory:b,campaignAmmo:w,isLoading:N,error:A,updatePartyFinances:B,addPartyFinance:V,updateShipAccounts:G,addShipFinance:I,addCargoLeg:Y,addShipMaintenance:P,addLoan:X,addPartyInventoryItem:de,addCampaignAmmo:ce}}function MC(i){const[a,r]=C.useState([]),[n,o]=C.useState([]),[c,h]=C.useState([]),[m,p]=C.useState([]),[g,v]=C.useState([]),[b,x]=C.useState(!0),[w,S]=C.useState(null),N=Ew();C.useEffect(()=>{if(!i){x(!1),r([]),o([]),h([]),p([]),v([]);return}(async()=>{try{x(!0),S(null);const[P,X,de,ce,ie]=await Promise.all([N.getCharacterFinance(i),N.getCharacterInventory(i),N.getCharacterWeapons(i),N.getCharacterArmour(i),N.getCharacterAmmo(i)]);P.success&&P.data&&r(P.data.map(_u)),X.success&&X.data&&o(X.data.map(ig)),de.success&&de.data&&h(de.data.map(lg)),ce.success&&ce.data&&p(ce.data.map(og)),ie.success&&ie.data&&v(ie.data.map(cg))}catch(P){console.error("Failed to load character data:",P),S(P instanceof Error?P:new Error("Failed to load character data"))}finally{x(!1)}})()},[i]);const j=C.useCallback(async Y=>{if(i)try{const P=Y.filter(F=>!F.id),X=P.map(F=>N.addCharacterFinance(i,F.Description,F["Amount (Cr)"])),ce=(await Promise.all(X)).filter(F=>F.success&&!!F.data).map(F=>_u(F.data)),ie=Y.map(F=>{if(F.id)return F;const pe=P.indexOf(F);return ce[pe]});r(ie)}catch(P){throw console.error("Failed to update character finances:",P),P}},[i,N]),A=C.useCallback(async(Y,P)=>{if(i)try{const X=await N.addCharacterFinance(i,Y,P);if(X.success&&X.data){const de=_u(X.data);r(ce=>[de,...ce])}}catch(X){throw console.error("Failed to add finance:",X),X}},[i,N]),R=C.useCallback(async Y=>{if(i)try{const P={itemName:Y.Item,quantity:Y.Qty||1,weight:Y["Unit Mass (kg)"],value:Y["Unit Value (Cr)"],description:Y.Notes},X=await N.addCharacterInventory(i,P);if(X.success&&X.data){const de=ig(X.data);o(ce=>[...ce,de])}}catch(P){throw console.error("Failed to add inventory:",P),P}},[i,N]),k=C.useCallback(async Y=>{if(i)try{const P={name:Y.Weapon,damage:Y.Damage,range:Y.Range,weight:typeof Y.Mass=="number"?Y.Mass:void 0,cost:Y.Cost,notes:Y.Notes},X=await N.addCharacterWeapon(i,P);if(X.success&&X.data){const de=lg(X.data);h(ce=>[...ce,de])}}catch(P){throw console.error("Failed to add weapon:",P),P}},[i,N]),B=C.useCallback(async Y=>{if(i)try{const P={name:Y.Armour,protection:typeof Y.Protection=="number"?Y.Protection:void 0,weight:typeof Y.Mass=="number"?Y.Mass:void 0,cost:Y.Cost,notes:Y.Notes},X=await N.addCharacterArmour(i,P);if(X.success&&X.data){const de=og(X.data);p(ce=>[...ce,de])}}catch(P){throw console.error("Failed to add armour:",P),P}},[i,N]),V=C.useCallback(async Y=>{if(i)try{const P={type:Y.Weapon,quantity:Y["Total Rounds"]||0,maxQuantity:typeof Y["Magazine Size"]=="number"?Y["Magazine Size"]:void 0,weaponCompatibility:Y["Ammo Type"],notes:Y.Notes},X=await N.addCharacterAmmo(i,P);if(X.success&&X.data){const de=cg(X.data);v(ce=>[...ce,de])}}catch(P){throw console.error("Failed to add ammo:",P),P}},[i,N]),G=C.useCallback(async Y=>{if(!i||Y<0||Y>=g.length)return;const P=g[Y],X=P["Total Rounds"]||0;if(X<=0)return;const de=[...g];if(de[Y]={...P,"Total Rounds":X-1},v(de),P.id)try{await N.updateCharacterAmmo(P.id,ug(de[Y]))}catch(ce){console.error("Failed to update ammo in database:",ce),v(g)}},[i,g,N]),I=C.useCallback(async Y=>{if(!i||Y<0||Y>=g.length)return;const P=g[Y],X=typeof P["Magazine Size"]=="number"?P["Magazine Size"]:0,de=[...g];if(de[Y]={...P,"Rounds Loaded":X},v(de),P.id)try{await N.updateCharacterAmmo(P.id,ug(de[Y]))}catch(ce){console.error("Failed to update ammo in database:",ce),v(g)}},[i,g,N]);return{finance:a,inventory:n,weapons:c,armour:m,ammo:g,isLoading:b,error:w,updateFinance:j,addFinance:A,addInventory:R,addWeapon:k,addArmour:B,addAmmo:V,fireRound:G,reloadWeapon:I}}function _u(i){return{Date:i.transactionDate.toISOString().split("T")[0],Description:i.description,Category:"Income",Subcategory:void 0,"Amount (Cr)":i.amount,"Paid By":void 0,"Paid From (Fund)":void 0,"Running Total":void 0,Notes:void 0}}function ig(i){return{Item:i.itemName,Qty:i.quantity,"Unit Mass (kg)":i.weight,"Total Mass (kg)":i.weight?i.weight*i.quantity:void 0,"Unit Value (Cr)":i.value,"Total Value (Cr)":i.value?i.value*i.quantity:void 0,"Location/Container":void 0,Notes:i.description}}function lg(i){return{Weapon:i.name,Type:void 0,Damage:i.damage,Range:i.range,Mass:i.weight,Cost:i.cost,Notes:i.notes}}function og(i){return{Armour:i.name,Type:void 0,Protection:i.protection,Mass:i.weight,Cost:i.cost,Notes:i.notes}}function cg(i){return{id:i.id,Weapon:i.type,"Ammo Type":i.weaponCompatibility,"Magazine Size":i.maxQuantity,"Rounds Loaded":void 0,"Spare Magazines":void 0,"Loose Rounds":void 0,"Total Rounds":i.quantity,Cost:void 0,Notes:i.notes}}function ug(i){return{type:i.Weapon,quantity:typeof i["Total Rounds"]=="number"?i["Total Rounds"]:void 0,maxQuantity:typeof i["Magazine Size"]=="number"?i["Magazine Size"]:void 0,weaponCompatibility:i["Ammo Type"],notes:i.Notes}}function UC(i,a=0){let r=a;return i.map(n=>{const o=n["Amount (Cr)"],c=n.Category;return c==="Income"?r+=o:c==="Expense"&&(r-=o),{...n,"Running Total":r}})}function bl(i,a=0){return i.reduce((r,n)=>{const o=n["Amount (Cr)"],c=n.Category;return c==="Income"?r+o:c==="Expense"?r-o:r},a)}function zC(i,a,r=0){const n=[...i,a];return n.sort((o,c)=>new Date(o.Date).getTime()-new Date(c.Date).getTime()),UC(n,r)}function LC(i){const a=[];return i.Description?.trim()||a.push("Description is required"),i.Date||a.push("Date is required"),(i["Amount (Cr)"]===void 0||i["Amount (Cr)"]===null)&&a.push("Amount is required"),typeof i["Amount (Cr)"]=="number"&&i["Amount (Cr)"]<0&&a.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(i.Category||"")||a.push("Category must be Income, Expense, or Transfer"),{isValid:a.length===0,errors:a}}function BC(i){return`${i.toLocaleString()} Cr`}function qC(i){const a=i.reduce((r,n)=>{const o=n["Amount (Cr)"];return n.Category==="Income"?r.totalIncome+=o:n.Category==="Expense"&&(r.totalExpenses+=o),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...a,netChange:a.totalIncome-a.totalExpenses}}function PC(i,a){return C.useMemo(()=>({party:bl(i.Party_Finances,0),ship:bl(i.Ship_Accounts,0),character:bl(i.PCs[a]?.Finance||[],0)}),[i.Party_Finances,i.Ship_Accounts,i.PCs,a])}function $C(i,a){const r=C.useCallback(async o=>{try{const{importXlsx:c}=await El(async()=>{const{importXlsx:h}=await import("./xlsx-Cw2h6NaQ.js");return{importXlsx:h}},__vite__mapDeps([0,1,2,3]));return await c(o,i),{success:!0}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}},[i]),n=C.useCallback(async()=>{try{const{exportXlsx:o}=await El(async()=>{const{exportXlsx:c}=await import("./xlsx-Cw2h6NaQ.js");return{exportXlsx:c}},__vite__mapDeps([0,1,2,3]));return await o(a),{success:!0}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}},[a]);return{handleImport:r,handleExport:n}}function HC({onImport:i,onExport:a}){const r=async o=>{const c=o.target.files?.[0];c&&((await i(c)).success||(o.target.value=""))},n=async()=>{await a()};return u.jsx("div",{className:"flex flex-wrap items-center justify-end gap-3",children:u.jsxs("div",{className:"flex items-center gap-4",role:"group","aria-label":"Mission Data Operations",children:[u.jsxs("label",{className:"btn-hud py-2.5 px-6 !text-xs cursor-pointer bg-side !text-text-main hover:bg-hud-accent border border-border transition-all duration-300 shadow-sm","data-testid":"import-button",tabIndex:0,children:[u.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:r,"data-testid":"file-input"}),u.jsx(pb,{className:"w-4 h-4 text-primary","aria-hidden":"true"}),u.jsx("span",{className:"font-black uppercase tracking-widest",children:"Import Data"})]}),u.jsxs("button",{onClick:n,className:"btn-hud py-2.5 px-6 !text-xs bg-primary text-white shadow-lg shadow-primary-glow/20 transition-all duration-300 hover:scale-105 active:scale-95","data-testid":"export-button",children:[u.jsx(gb,{className:"w-4 h-4","aria-hidden":"true"}),u.jsx("span",{className:"font-black uppercase tracking-widest",children:"Export Data"})]})]})})}const qu=i=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(i)} Cr`,VC=()=>new Date().toISOString().slice(0,10);function FC({partyBalance:i,shipBalance:a,cargoLegsCount:r,characterCount:n}){const o=[{label:"Party Fund",value:qu(i),icon:u.jsx(gg,{className:"w-5 h-5"}),color:"text-primary"},{label:"Ship Fund",value:qu(a),icon:u.jsx(yb,{className:"w-5 h-5"}),color:"text-blue-400"},{label:"Active Cargo",value:r,icon:u.jsx(Hu,{className:"w-5 h-5"}),color:"text-amber-400"},{label:"Personnel",value:n,icon:u.jsx(Bn,{className:"w-5 h-5"}),color:"text-emerald-400"}];return u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",role:"region","aria-label":"Campaign statistics",children:o.map((c,h)=>u.jsxs("div",{className:"hud-glass p-5 relative overflow-hidden group hover:scale-[1.02] transition-transform duration-300",style:{animationDelay:`${h*100}ms`},children:[u.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary/30 group-hover:bg-primary transition-colors"}),u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-muted group-hover:text-text-main transition-colors",children:c.label}),u.jsx("h3",{className:"text-2xl font-black tracking-tight font-heading",children:c.value})]}),u.jsx("div",{className:`p-2.5  bg-white/5 ${c.color} shadow-inner`,children:c.icon})]}),u.jsx("div",{className:"absolute bottom-1 right-1 opacity-20 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"w-4 h-4 border-r-2 border-b-2 border-primary/40"})})]},c.label))})}function Py({tabs:i,active:a,onChange:r}){const n=o=>{const c=i.findIndex(p=>p.id===a);let h=c;switch(o.key){case"ArrowLeft":o.preventDefault(),h=c>0?c-1:i.length-1;break;case"ArrowRight":o.preventDefault(),h=c<i.length-1?c+1:0;break;case"Home":o.preventDefault(),h=0;break;case"End":o.preventDefault(),h=i.length-1;break;default:return}const m=i[h].id;r(m)};return u.jsx("div",{className:"flex flex-wrap p-1.5 gap-2 hud-glass w-fit mb-8 shadow-inner border border-border",role:"tablist","aria-label":"Campaign navigation",children:i.map(o=>{const c=a===o.id;return u.jsxs("button",{onClick:()=>r(o.id),onKeyDown:n,className:`relative px-6 py-2.5 transition-all duration-300 group ${c?"bg-primary text-white shadow-lg shadow-primary-glow scale-[1.02]":"text-muted hover:text-text-main hover:bg-surface-low"}`,role:"tab","aria-selected":c,"aria-controls":`tabpanel-${o.id}`,id:`tab-${o.id}`,type:"button",tabIndex:c?0:-1,children:[u.jsx("span",{className:"relative z-10 font-black text-[11px] uppercase tracking-[0.15em]",children:o.label}),c&&u.jsx("div",{className:"absolute inset-0 border-2 border-white/30"}),!c&&u.jsx("div",{className:"absolute bottom-0 left-1.5 right-1.5 h-[2px] bg-primary/0 group-hover:bg-primary transition-all"})]},o.id)})})}function Rs({columns:i,rows:a}){const r=n=>C.isValidElement(n)?n:String(n??"");return u.jsx("div",{className:"overflow-auto glass border border-border transition-all duration-300",children:u.jsxs("table",{className:"table w-full",children:[u.jsx("thead",{children:u.jsx("tr",{className:"bg-white/5",children:i.map(n=>u.jsx("th",{className:"px-4 py-3 text-xs font-bold tracking-wider text-muted uppercase",children:n},n))})}),u.jsx("tbody",{className:"animate-in",children:a.length===0?u.jsx("tr",{children:u.jsx("td",{className:"text-muted p-8 text-center text-sm font-medium",colSpan:i.length,children:"No data available in this section."})}):a.map((n,o)=>u.jsx("tr",{className:"hover:bg-white/5 transition-colors duration-200",children:i.map(c=>u.jsx("td",{className:"px-4 py-3 border-t",children:r(n[c])},c))},o))})]})})}function Ts(i){const[a,r]=C.useState(i),n=C.useCallback((p,g)=>{r(v=>({...v,[p]:g}))},[]),o=C.useCallback(p=>g=>{n(p,g.target.value)},[n]),c=C.useCallback(p=>{r(g=>{const v={...i};return p&&p.forEach(b=>{v[b]=g[b]}),v})},[i]),h=C.useCallback(p=>{r(g=>({...g,...p}))},[]),m=C.useCallback(()=>({...a}),[a]);return{form:a,updateField:n,createInputHandler:o,resetForm:c,updateFields:h,getFormData:m,setForm:r}}const GC={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function IC({rows:i,onAdd:a}){const{form:r,createInputHandler:n,resetForm:o}=Ts(GC),c=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const p=Number(r.Tons),g=Number(r.BuyPP),v=r.SellPP===""?null:Number(r.SellPP),b=r.Fees===""?0:Number(r.Fees),x=v===null?null:(v-g)*p-b;a({"Leg/Route":r.Route,Item:r.Item,Tons:p,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":g,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":v,"Broker (DM)":r.DM,"Fees/Taxes (Cr)":b,"Profit (Cr)":x}),o()},h=i.reduce((p,g)=>p+(g.Tons||0),0),m=i.reduce((p,g)=>p+(g["Profit (Cr)"]||0),0);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Hu,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Trade ",u.jsx("span",{className:"text-primary",children:"Manifest"})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:"Hold Usage"}),u.jsxs("p",{className:"text-xs font-bold",children:[h.toFixed(1)," ",u.jsx("span",{className:"text-[10px] text-muted font-black",children:"TONS"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:"Net Outcome"}),u.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[m>=0?u.jsx(yg,{className:"w-3 h-3 text-emerald-400"}):u.jsx(vg,{className:"w-3 h-3 text-red-500"}),u.jsxs("p",{className:`text-xs font-bold ${m>=0?"text-emerald-400":"text-red-500"}`,children:[m.toLocaleString()," ",u.jsx("span",{className:"text-[10px] opacity-70 font-black",children:"CR"})]})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[u.jsx(oe,{label:"Route Origin/Destination",placeholder:"Vland  Regina",value:r.Route,onChange:n("Route")}),u.jsx(oe,{label:"Commodity Designation",placeholder:"Petrochemicals / Luxury Goods",value:r.Item,onChange:n("Item")}),u.jsx(oe,{type:"number",label:"Bulk Tonnage",placeholder:"10.0",value:r.Tons,onChange:n("Tons")})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 pt-4 border-t border-white/5",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsx(oe,{placeholder:"Origin World",value:r.BuyWorld,onChange:n("BuyWorld")})}),u.jsx(oe,{type:"number",placeholder:"Buy (Cr/ton)",value:r.BuyPP,onChange:n("BuyPP")}),u.jsx(oe,{type:"number",placeholder:"Sell (Cr/ton)",value:r.SellPP,onChange:n("SellPP")}),u.jsx(oe,{type:"number",placeholder:"Fees (Cr)",value:r.Fees,onChange:n("Fees")}),u.jsxs("button",{onClick:c,className:"btn-hud py-2.5 flex items-center justify-center gap-2 group",type:"button",children:[u.jsx(Za,{className:"w-4 h-4 group-hover:rotate-90 transition-transform"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Manifest"})]})]})]}),u.jsx("div",{className:"hud-glass p-0 overflow-hidden",children:u.jsx(Rs,{columns:["Leg/Route","Item","Tons","Purchase","Sale","Profit (Cr)"],rows:i.map(p=>({...p,"Leg/Route":u.jsx("span",{className:"font-bold text-[11px] uppercase tracking-wide flex items-center gap-2",children:p["Leg/Route"]}),Item:u.jsx("span",{className:"font-black text-primary uppercase tracking-tight",children:p.Item}),Purchase:u.jsxs("div",{className:"text-[10px]",children:[u.jsxs("p",{className:"text-muted uppercase font-black",children:["From ",p["Purchase World"]]}),u.jsxs("p",{className:"font-mono",children:[p["Purchase Price (Cr/ton)"].toLocaleString()," Cr"]})]}),Sale:p["Sale Price (Cr/ton)"]?u.jsxs("div",{className:"text-[10px]",children:[u.jsxs("p",{className:"text-muted uppercase font-black",children:["To ",p["Sale World"]]}),u.jsxs("p",{className:"font-mono",children:[p["Sale Price (Cr/ton)"].toLocaleString()," Cr"]})]}):u.jsx("span",{className:"text-muted italic",children:"In Transit"}),"Profit (Cr)":p["Profit (Cr)"]!==void 0&&p["Profit (Cr)"]!==null?u.jsxs("span",{className:`font-black tracking-tight ${p["Profit (Cr)"]>=0?"text-emerald-400":"text-red-500"}`,children:[p["Profit (Cr)"]>0?"+":"",p["Profit (Cr)"].toLocaleString()]}):u.jsx("span",{className:"text-muted",children:"Calculating..."})}))})})]})}function YC({title:i,totalIncome:a,totalExpenses:r,netChange:n,currentBalance:o}){const c=[{label:"Total Revenue",value:a,icon:u.jsx(yg,{className:"w-4 h-4"}),color:"text-emerald-400"},{label:"Total Outflow",value:r,icon:u.jsx(vg,{className:"w-4 h-4"}),color:"text-red-400"},{label:"Net Variance",value:n,icon:u.jsx(vb,{className:"w-4 h-4"}),color:n>=0?"text-emerald-400":"text-red-400"},{label:"Current Assets",value:o,icon:u.jsx(bb,{className:"w-4 h-4"}),color:o>=0?"text-emerald-400":"text-red-400"}];return u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/10 pb-4",children:[u.jsx("div",{className:"w-1.5 h-6 bg-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:[i," ",u.jsx("span",{className:"text-muted",children:"Financial_Audit"})]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:c.map((h,m)=>u.jsxs("div",{className:"space-y-3 relative group",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-1.5 bg-surface-low ${h.color}`,children:h.icon}),u.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted group-hover:text-text-main transition-colors",children:h.label})]}),u.jsx("div",{className:"pl-1",children:u.jsx("h4",{className:`text-2xl font-black tracking-tight ${h.color}`,children:BC(h.value)})}),m<c.length-1&&u.jsx("div",{className:"hidden lg:block absolute -right-4 top-1/2 -translate-y-1/2 w-[1px] h-10 bg-white/5"})]},h.label))})]})}function QC({title:i,fundName:a,onSubmit:r}){const n={Date:VC(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:o,createInputHandler:c,resetForm:h}=Ts(n),[m,p]=C.useState([]),g=()=>{p([]);const v={Date:o.Date,Description:o.Description,Category:o.Category,Subcategory:o.Subcategory,"Amount (Cr)":Number(o.Amount),"Paid By":a,"Paid From (Fund)":a,Notes:o.Notes},b=LC(v);if(!b.isValid){p(b.errors);return}r(v),h(["Date","Category"])};return u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Log ",u.jsx("span",{className:"text-primary",children:i})," Transaction"]}),m.length>0&&u.jsx("span",{className:"text-[10px] font-bold text-red-500 uppercase animate-pulse",children:"Validation Error"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[u.jsx(oe,{type:"date",value:o.Date,onChange:c("Date")}),u.jsx("div",{className:"lg:col-span-2",children:u.jsx(oe,{placeholder:"Description / Reason",value:o.Description,onChange:c("Description")})}),u.jsxs(oe,{type:"select",value:o.Category,onChange:c("Category"),children:[u.jsx("option",{value:"Income",children:"Income"}),u.jsx("option",{value:"Expense",children:"Expense"}),u.jsx("option",{value:"Transfer",children:"Transfer"})]}),u.jsx(oe,{type:"number",placeholder:"Amount (Cr)",value:o.Amount,onChange:c("Amount")}),u.jsxs("button",{onClick:g,className:"btn-hud py-2.5 flex items-center justify-center gap-2 group",type:"button",children:[u.jsx(Za,{className:"w-4 h-4 group-hover:rotate-90 transition-transform"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Execute"})]})]}),m.length>0&&u.jsx("div",{className:"mt-4 p-3 bg-accent/10 border border-accent ",children:u.jsx("ul",{className:"text-[10px] space-y-1",children:m.map((v,b)=>u.jsxs("li",{className:"text-red-400 font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx("div",{className:"w-1 h-1 bg-accent"}),v]},b))})})]})}function Pu({title:i,rows:a,onUpdate:r,fundName:n,initialBalance:o=0,showSummary:c=!0}){const h=bl(a,o),m=qC(a),p=b=>{const x=zC(a,b,o);r(x)},g=b=>{switch(b){case"Expense":return"bg-red-500/10 border-red-500/20 text-red-500";case"Income":return"bg-emerald-500/10 border-emerald-500/20 text-emerald-500";default:return"bg-primary/10 border-primary/20 text-primary"}},v=a.map(b=>({...b,"Amount (Cr)":u.jsxs("span",{className:`font-mono font-bold ${b.Category==="Expense"?"text-red-400":"text-emerald-400"}`,children:[b.Category==="Expense"?"-":"+",Math.abs(b["Amount (Cr)"]).toLocaleString()]}),"Running Total":u.jsxs("span",{className:"font-black text-primary",children:[(b["Running Total"]||0).toLocaleString()," ",u.jsx("span",{className:"text-[10px] opacity-70",children:"CR"})]}),Category:u.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest px-2 py-0.5 border ${g(b.Category)}`,children:b.Category})}));return u.jsxs("div",{className:"space-y-8 animate-hud",children:[c&&u.jsx(YC,{title:i,totalIncome:m.totalIncome,totalExpenses:m.totalExpenses,netChange:m.netChange,currentBalance:h}),u.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[u.jsx(QC,{title:i,fundName:n,onSubmit:p}),u.jsxs("div",{className:"hud-glass p-0 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-white/5",children:[u.jsx(gg,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Fiscal ",u.jsx("span",{className:"text-primary",children:"Ledger"})]})]}),u.jsx(Rs,{columns:["Date","Description","Category","Amount (Cr)","Running Total","Notes"],rows:v})]})]})]})}function KC({pc:i,rows:a,onAdd:r}){const n=i.includes("  ")?i.split("  ")[1]:i;return u.jsx("div",{className:"space-y-4",children:u.jsx(Pu,{title:n,rows:a,onUpdate:r,fundName:`${n} Fund`,initialBalance:0,showSummary:!0})})}const XC={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function WC({rows:i,onAdd:a}){const{form:r,createInputHandler:n,resetForm:o}=Ts(XC),c=()=>{if(!r.Item||r.Qty==="")return;const p=Number(r.Qty||0),g=Number(r["Unit Mass (kg)"]||0),v=Number(r["Unit Value (Cr)"]||0);a({Item:r.Item,Qty:p,"Unit Mass (kg)":g,"Total Mass (kg)":p*g,"Unit Value (Cr)":v,"Total Value (Cr)":p*v,"Location/Container":r["Location/Container"],Notes:r.Notes}),o()},h=i.reduce((p,g)=>p+(g["Total Mass (kg)"]||0),0),m=i.reduce((p,g)=>p+(g["Total Value (Cr)"]||0),0);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Hu,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Gear ",u.jsx("span",{className:"text-primary",children:"Manifest"})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:"Payload"}),u.jsxs("p",{className:"text-xs font-bold",children:[h.toFixed(1)," ",u.jsx("span",{className:"text-[10px] text-muted font-black",children:"KG"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:"Valuation"}),u.jsxs("p",{className:"text-xs font-bold text-emerald-400",children:[m.toLocaleString()," ",u.jsx("span",{className:"text-[10px] text-emerald-500 font-black",children:"CR"})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsx(oe,{placeholder:"Item Name",value:r.Item,onChange:n("Item")})}),u.jsx(oe,{type:"number",placeholder:"Quantity",value:r.Qty,onChange:n("Qty")}),u.jsx(oe,{type:"number",placeholder:"Mass (kg)",value:r["Unit Mass (kg)"],onChange:n("Unit Mass (kg)")}),u.jsxs("button",{onClick:c,className:"btn-hud py-2.5 flex items-center justify-center gap-2 group",type:"button",children:[u.jsx(Za,{className:"w-4 h-4 group-hover:rotate-90 transition-transform"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Register"})]})]})]}),u.jsx("div",{className:"hud-glass p-0 overflow-hidden",children:u.jsx(Rs,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Location/Container","Notes"],rows:i})})]})}function $y(){const i=C.useMemo(()=>By,[]);return{getAllWeapons:()=>i.weapons,getWeaponsByType:p=>i.weapons.filter(g=>g.type===p),getWeaponByName:p=>i.weapons.find(g=>g.name===p),getWeaponTypes:()=>i.weaponTypes,getWeaponsByTechLevel:(p,g)=>i.weapons.filter(v=>g!==void 0?v.tl>=p&&v.tl<=g:v.tl>=p),getTraitDescription:p=>i.traits[p],sortWeaponsByCost:(p=!0)=>{const g=[...i.weapons].sort((v,b)=>v.cost-b.cost);return p?g:g.reverse()},weaponTypes:i.weaponTypes,traits:i.traits}}const dg={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Cost:"",Notes:""};function JC({row:i,index:a,onFireRound:r,onReload:n}){const o=Number(i["Total Rounds"]||0)<=0,c=Number(i["Spare Magazines"]||0)>0||Number(i["Loose Rounds"]||0)>0;return u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>r?.(a),disabled:o,className:`px-3 py-1.5 font-black text-[10px] uppercase tracking-widest transition-all border ${o?"bg-surface-low text-muted border-border opacity-50 cursor-not-allowed":"bg-accent/10 text-accent hover:bg-accent hover:text-white border-accent shadow-lg shadow-accent/10"}`,children:"Fire"}),u.jsx("button",{onClick:()=>n?.(a),disabled:!c,className:`px-3 py-1.5 font-black text-[10px] uppercase tracking-widest transition-all border ${c?"bg-primary/10 text-primary hover:bg-primary hover:text-white border-primary shadow-lg shadow-primary-glow":"bg-surface-low text-muted border-border opacity-50 cursor-not-allowed"}`,children:"Reload"})]})}function ZC({rows:i,weapons:a=[],onAdd:r,onFireRound:n,onReload:o}){const{form:c,createInputHandler:h,resetForm:m,updateField:p,setForm:g}=Ts(dg),{getAllWeapons:v,getWeaponByName:b}=$y(),x=j=>{if(!j||j===""||j==="__custom")return;const A=b(j);A&&A.magazine!==null?g({...c,Weapon:A.name,"Magazine Size":A.magazine.toString(),"Ammo Type":A.type}):p("Weapon",j)},w=()=>{if(!c.Weapon)return;const j=Number(c["Magazine Size"]||0),A=Number(c["Rounds Loaded"]||0),R=Number(c["Spare Magazines"]||0),k=Number(c["Loose Rounds"]||0),B=j*R+A+k;r({Weapon:c.Weapon,"Ammo Type":c["Ammo Type"],"Magazine Size":j,"Rounds Loaded":A,"Spare Magazines":R,"Loose Rounds":k,"Total Rounds":B,Cost:c.Cost?Number(c.Cost):void 0,Notes:c.Notes}),m()},S=j=>{p("Weapon",j)},N=i.map((j,A)=>({...j,Weapon:u.jsx("span",{className:"font-black text-primary uppercase tracking-tight",children:j.Weapon}),"Ammo Type":u.jsx("span",{className:"text-muted font-bold tracking-widest text-[10px] uppercase px-2 py-0.5 bg-surface-low border border-border",children:j["Ammo Type"]}),"Rounds Loaded":u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(xb,{className:`w-3 h-3 ${Number(j["Rounds Loaded"])>0?"text-amber-400":"text-red-500"}`}),u.jsx("span",{className:"font-mono font-bold",children:j["Rounds Loaded"]})]}),"Total Rounds":u.jsx("span",{className:"font-black text-primary",children:j["Total Rounds"]}),Actions:u.jsx(JC,{row:j,index:A,onFireRound:n,onReload:o})}));return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx(wb,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Ballistics ",u.jsx("span",{className:"text-primary",children:"Registry"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[u.jsxs(oe,{type:"select",label:"Designation Target",value:c.Weapon==="__custom"?"__custom":c.Weapon,onChange:j=>{const A=j.target.value;A==="__custom"?g({...dg,Weapon:"__custom"}):(h("Weapon")(j),x(A))},children:[u.jsx("option",{value:"",children:"Select Ordinance Target..."}),u.jsx("optgroup",{label:"Active Loadout",children:a.map(j=>u.jsx("option",{value:j.Weapon,children:j.Weapon},j.Weapon))}),u.jsx("optgroup",{label:"Ordinance Database",children:v().filter(j=>j.magazine!==null).map(j=>u.jsx("option",{value:j.name,children:j.name},j.name))}),u.jsx("optgroup",{label:"Manual Override",children:u.jsx("option",{value:"__custom",children:"Custom Ordinance Target"})})]}),u.jsx(oe,{label:"Payload Type",placeholder:"e.g., AP, HE, 9mm",value:c["Ammo Type"],onChange:h("Ammo Type")})]}),c.Weapon==="__custom"&&u.jsx("div",{className:"mb-4 animate-in",children:u.jsx(oe,{label:"Manual Designation",placeholder:"Enter Custom Ordinance Name...",value:"",onChange:j=>S(j.target.value)})}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 pt-4 border-t border-white/5",children:[u.jsx(oe,{type:"number",placeholder:"MAG SZ",value:c["Magazine Size"],onChange:h("Magazine Size")}),u.jsx(oe,{type:"number",placeholder:"LOADED",value:c["Rounds Loaded"],onChange:h("Rounds Loaded")}),u.jsx(oe,{type:"number",placeholder:"SPARE MAGS",value:c["Spare Magazines"],onChange:h("Spare Magazines")}),u.jsx(oe,{type:"number",placeholder:"LOOSE",value:c["Loose Rounds"],onChange:h("Loose Rounds")}),u.jsx(oe,{type:"number",placeholder:"COST",value:c.Cost,onChange:h("Cost")}),u.jsxs("button",{onClick:w,className:"btn-hud py-2.5 flex items-center justify-center gap-2 group",type:"button",children:[u.jsx(Za,{className:"w-4 h-4 group-hover:rotate-90 transition-transform"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Deploy"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-surface-low border border-border mb-6",children:[u.jsx(_b,{className:"w-4 h-4 text-primary"}),u.jsxs("p",{className:"text-[10px] font-bold text-muted uppercase tracking-wider",children:["Priority System: Loaded Rounds ",u.jsx("span",{className:"text-primary",children:""})," Spare Mags ",u.jsx("span",{className:"text-primary",children:""})," Loose Rounds"]})]}),u.jsx("div",{className:"hud-glass p-0 overflow-hidden",children:u.jsx(Rs,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Actions"],rows:N})})]})}const hg={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function ej({rows:i,onAdd:a}){const{form:r,createInputHandler:n,resetForm:o,setForm:c}=Ts(hg),{getAllWeapons:h,getWeaponTypes:m,getWeaponByName:p}=$y(),[g,v]=C.useState("All"),b=w=>{if(!w||w===""){o();return}const S=p(w);if(S){const N=S.range_long?`${S.range} - ${S.range_long}`:S.range;c({Weapon:S.name,Type:S.type,Damage:S.damage,Range:N,Mass:S.mass.toString(),Cost:S.cost.toString(),Notes:S.notes})}},x=()=>{r.Weapon&&(a({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),o())};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx(Sb,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Armory ",u.jsx("span",{className:"text-primary",children:"Inventory"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[u.jsxs(oe,{type:"select",label:"Database Source",value:g,onChange:w=>v(w.target.value),children:[u.jsx("option",{value:"All",children:"All Mission Datasheets"}),u.jsx("option",{value:"Core Rulebook",children:"Core Rulebook"}),u.jsx("option",{value:"High Guard",children:"High Guard"}),u.jsx("option",{value:"Central Supply Catalogue",children:"Central Supply Catalogue"}),u.jsx("option",{value:"Mercenary",children:"Mercenary"}),u.jsx("option",{value:"Other",children:"Other"})]}),u.jsxs(oe,{type:"select",label:"Registry",value:r.Weapon==="custom"?"custom":r.Weapon,onChange:w=>{w.target.value==="custom"?c({...hg,Weapon:"custom"}):(n("Weapon")(w),b(w.target.value))},children:[u.jsx("option",{value:"",children:"Select Ordinance..."}),u.jsx("optgroup",{label:"Ordinance Database",children:h().filter(w=>g==="All"||w.source===g).map(w=>u.jsx("option",{value:w.name,children:w.name},w.name))}),u.jsx("optgroup",{label:"Custom Registry",children:u.jsx("option",{value:"custom",children:"Register Custom Ordinance"})})]})]}),r.Weapon==="custom"&&u.jsx("div",{className:"mb-4 animate-in",children:u.jsx(oe,{label:"Custom Designation",placeholder:"Enter Custom Weapon Name...",value:"",onChange:w=>{c({...r,Weapon:w.target.value})}})}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 pt-4 border-t border-white/5",children:[u.jsxs(oe,{type:"select",value:r.Type,onChange:n("Type"),children:[u.jsx("option",{value:"",children:"Class"}),m().map(w=>u.jsx("option",{value:w,children:w},w))]}),u.jsx(oe,{placeholder:"DMG",value:r.Damage,onChange:n("Damage")}),u.jsx(oe,{placeholder:"RNG",value:r.Range,onChange:n("Range")}),u.jsx(oe,{type:"number",placeholder:"WT (kg)",value:r.Mass,onChange:n("Mass")}),u.jsx(oe,{type:"number",placeholder:"CR",value:r.Cost,onChange:n("Cost")}),u.jsxs("button",{onClick:x,className:"btn-hud py-2.5 flex items-center justify-center gap-2 group",type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:[u.jsx(Za,{className:"w-4 h-4 group-hover:rotate-90 transition-transform"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Equip"})]})]})]}),u.jsx("div",{className:"hud-glass p-0 overflow-hidden",children:u.jsx(Rs,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:i.map(w=>({...w,Weapon:u.jsx("span",{className:"font-black text-primary uppercase tracking-tight",children:w.Weapon}),Damage:u.jsx("span",{className:"text-red-400 font-bold",children:w.Damage}),Range:w.Range?`${w.Range}`:"N/A",Mass:w.Mass?`${w.Mass} kg`:"0 kg"}))})})]})}const tj=[{name:"Jack",type:"Light",protection:1,mass:1,cost:50,tl:1,traits:[],notes:"Leather jacket or heavy clothing",source:"Core Rulebook"},{name:"Cloth",type:"Light",protection:5,mass:2,cost:250,tl:7,traits:[],notes:"Ballistic cloth armor",source:"Core Rulebook"},{name:"Mesh",type:"Light",protection:6,mass:2,cost:150,tl:6,traits:[],notes:"Flexible metal mesh",source:"Core Rulebook"},{name:"Flak Jacket",type:"Light",protection:7,mass:3,cost:100,tl:5,traits:["Bulky"],notes:"Heavy protective vest",source:"Core Rulebook"},{name:"Ablat",type:"Light",protection:3,mass:2,cost:75,tl:9,traits:["Ablative"],notes:"Ablative armor against energy weapons",source:"Core Rulebook"},{name:"Reflec",type:"Light",protection:10,protectionType:"vs lasers",mass:.5,cost:1500,tl:10,traits:["Laser Only"],notes:"Reflective coating, only protects vs lasers",source:"Core Rulebook"},{name:"Combat Armour (TL 11)",type:"Medium",protection:13,mass:6,cost:5e3,tl:11,traits:[],notes:"Military-grade powered armor",source:"Core Rulebook"},{name:"Combat Armour (TL 13)",type:"Medium",protection:15,mass:5,cost:8e3,tl:13,traits:[],notes:"Advanced military armor",source:"Core Rulebook"},{name:"Hostile Environment Vacc Suit",type:"Vacc Suit",protection:8,mass:12,cost:7e3,tl:8,traits:["Environment"],notes:"Protects against vacuum and hostile environments",source:"Core Rulebook"},{name:"Vacc Suit (Standard)",type:"Vacc Suit",protection:6,mass:10,cost:4e3,tl:8,traits:["Environment"],notes:"Standard vacuum protection",source:"Core Rulebook"},{name:"HEV Suit",type:"Vacc Suit",protection:8,mass:12,cost:9e3,tl:10,traits:["Environment","Sealed"],notes:"Hazardous Environment Vacc Suit",source:"Core Rulebook"},{name:"Battle Dress (TL 13)",type:"Heavy",protection:18,mass:20,cost:2e5,tl:13,traits:["Powered","Sealed","Environment"],notes:"Fully powered combat armor with life support",source:"Core Rulebook"},{name:"Battle Dress (TL 14)",type:"Heavy",protection:20,mass:18,cost:25e4,tl:14,traits:["Powered","Sealed","Environment"],notes:"Advanced powered armor",source:"Core Rulebook"},{name:"Boarding Armour",type:"Medium",protection:11,mass:8,cost:4500,tl:9,traits:["Zero-G"],notes:"Designed for ship boarding operations",source:"Core Rulebook"},{name:"Diplo Vest",type:"Light",protection:4,mass:.5,cost:500,tl:9,traits:["Concealed"],notes:"Easily concealed diplomatic protection",source:"Core Rulebook"},{name:"Hostile Environment Suit",type:"Environment",protection:6,mass:8,cost:3e3,tl:8,traits:["Environment","Sealed"],notes:"Protection from hostile atmospheres",source:"Core Rulebook"},{name:"NBC Suit",type:"Environment",protection:3,mass:4,cost:500,tl:6,traits:["NBC"],notes:"Nuclear, Biological, Chemical protection",source:"Core Rulebook"},{name:"Protec Suit",type:"Environment",protection:2,mass:3,cost:300,tl:5,traits:["NBC"],notes:"Basic hazmat protection",source:"Core Rulebook"},{name:"Shield",type:"Shield",protection:2,mass:2,cost:20,tl:1,traits:["Melee"],notes:"Personal shield, +2 vs melee attacks",source:"Core Rulebook"},{name:"Riot Shield",type:"Shield",protection:3,mass:3,cost:100,tl:5,traits:["Melee","Bulky"],notes:"Large shield for riot control",source:"Core Rulebook"},{name:"Combat Helmet",type:"Accessory",protection:2,mass:1,cost:100,tl:7,traits:[],notes:"Head protection only",source:"Core Rulebook"},{name:"Respirator",type:"Accessory",protection:0,mass:.5,cost:100,tl:6,traits:["Breathing"],notes:"Filters air, no armor value",source:"Core Rulebook"},{name:"Breather Mask",type:"Accessory",protection:0,mass:.2,cost:150,tl:8,traits:["Breathing"],notes:"Compact air filter",source:"Core Rulebook"},{name:"Skinsuit",type:"Undersuit",protection:0,mass:2,cost:200,tl:8,traits:[],notes:"Worn under armor, provides life support interface",source:"Core Rulebook"},{name:"TL 10 Cloth",type:"Light",protection:7,mass:1.5,cost:500,tl:10,traits:[],notes:"Advanced ballistic cloth",source:"Core Rulebook"},{name:"TL 12 Cloth",type:"Light",protection:9,mass:1,cost:1e3,tl:12,traits:[],notes:"High-tech ballistic protection",source:"Core Rulebook"},{name:"Boarding Vacc Suit",type:"Vacc Suit",protection:9,mass:10,cost:8e3,tl:10,traits:["Environment","Zero-G"],notes:"Armored vacc suit for combat",source:"Core Rulebook"},{name:"Thruster Pack",type:"Accessory",protection:0,mass:5,cost:2e3,tl:9,traits:["Zero-G"],notes:"Personal maneuvering in zero-G",source:"Core Rulebook"},{name:"Gravitic Compensator",type:"Accessory",protection:0,mass:6,cost:1e4,tl:12,traits:[],notes:"Reduces effective weight of armor",source:"Core Rulebook"}],aj=["Light","Medium","Heavy","Vacc Suit","Environment","Shield","Accessory","Undersuit"],rj={Ablative:"Degrades with use, protects better against energy weapons",Bulky:"Difficult to move in, may impose penalties",Concealed:"Can be hidden under normal clothing",Environment:"Protects against environmental hazards","Laser Only":"Only provides protection against laser weapons",Melee:"Provides bonus against melee attacks",NBC:"Protection against Nuclear, Biological, Chemical threats",Powered:"Powered armor system, enhances strength",Sealed:"Provides sealed environment","Zero-G":"Optimized for zero gravity operations",Breathing:"Provides air filtration or supply"},sj={armour:tj,armourTypes:aj,traits:rj};function nj(){const i=C.useMemo(()=>sj,[]);return{getAllArmour:()=>i.armour,getArmourByType:g=>i.armour.filter(v=>v.type===g),getArmourByName:g=>i.armour.find(v=>v.name===g),getArmourTypes:()=>i.armourTypes,getArmourByTechLevel:(g,v)=>i.armour.filter(b=>v!==void 0?b.tl>=g&&b.tl<=v:b.tl>=g),getTraitDescription:g=>i.traits[g],sortArmourByCost:(g=!0)=>{const v=[...i.armour].sort((b,x)=>b.cost-x.cost);return g?v:v.reverse()},sortArmourByProtection:(g=!0)=>{const v=[...i.armour].sort((b,x)=>b.protection-x.protection);return g?v:v.reverse()},armourTypes:i.armourTypes,traits:i.traits}}const Su={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function ij({rows:i,onAdd:a}){const{form:r,createInputHandler:n,resetForm:o,setForm:c}=Ts(Su),{getAllArmour:h,getArmourTypes:m,getArmourByName:p}=nj(),[g,v]=C.useState("All"),b=w=>{if(!w||w===""){o();return}if(w==="custom"){c({...Su,Armour:"custom"});return}const S=p(w);if(S){const N=S.protectionType?`${S.protection} (${S.protectionType})`:S.protection.toString();c({Armour:S.name,Type:S.type,Protection:N,Mass:S.mass.toString(),Cost:S.cost.toString(),Notes:S.notes})}},x=()=>{r.Armour&&(a({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),o())};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx(Cb,{className:"w-5 h-5 text-blue-400"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Protection ",u.jsx("span",{className:"text-blue-400",children:"Suites"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[u.jsxs(oe,{type:"select",label:"Database Source",value:g,onChange:w=>v(w.target.value),children:[u.jsx("option",{value:"All",children:"All Protection Manuals"}),u.jsx("option",{value:"Core Rulebook",children:"Core Rulebook"}),u.jsx("option",{value:"High Guard",children:"High Guard"}),u.jsx("option",{value:"Central Supply Catalogue",children:"Central Supply Catalogue"}),u.jsx("option",{value:"Mercenary",children:"Mercenary"}),u.jsx("option",{value:"Other",children:"Other"})]}),u.jsxs(oe,{type:"select",label:"Registry",value:r.Armour==="custom"?"custom":r.Armour,onChange:w=>{w.target.value==="custom"?c({...Su,Armour:"custom"}):(n("Armour")(w),b(w.target.value))},children:[u.jsx("option",{value:"",children:"Select Armour..."}),u.jsx("optgroup",{label:"Certified Suites",children:h().filter(w=>g==="All"||w.source===g).map(w=>u.jsx("option",{value:w.name,children:w.name},w.name))}),u.jsx("optgroup",{label:"Custom Fabrication",children:u.jsx("option",{value:"custom",children:"Register Custom Suite"})})]})]}),r.Armour==="custom"&&u.jsx("div",{className:"mb-4 animate-in",children:u.jsx(oe,{label:"Custom Designation",placeholder:"Enter Custom Armour Name...",value:"",onChange:w=>{c({...r,Armour:w.target.value})}})}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 pt-4 border-t border-white/5",children:[u.jsxs(oe,{type:"select",value:r.Type,onChange:n("Type"),children:[u.jsx("option",{value:"",children:"Class"}),m().map(w=>u.jsx("option",{value:w,children:w},w))]}),u.jsx(oe,{placeholder:"PROT",value:r.Protection,onChange:n("Protection")}),u.jsx(oe,{placeholder:"WT (kg)",value:r.Mass,onChange:n("Mass")}),u.jsx(oe,{type:"number",placeholder:"CR",value:r.Cost,onChange:n("Cost")}),u.jsxs("button",{onClick:x,className:"btn-hud py-2.5 flex items-center justify-center gap-2 group",type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:[u.jsx(Za,{className:"w-4 h-4 group-hover:rotate-90 transition-transform"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Assign"})]})]})]}),u.jsx("div",{className:"hud-glass p-0 overflow-hidden",children:u.jsx(Rs,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:i.map(w=>({...w,Armour:u.jsx("span",{className:"font-black text-blue-400 uppercase tracking-tight",children:w.Armour}),Protection:u.jsxs("span",{className:"font-bold flex items-center gap-2",children:[u.jsx(bg,{className:"w-3 h-3 text-blue-400"})," ",w.Protection]}),Mass:w.Mass?`${w.Mass} kg`:"0 kg"}))})})]})}const lj={STR:"Strength",DEX:"Dexterity",END:"Endurance",INT:"Intelligence",EDU:"Education",SOC:"Social Standing"},oj=i=>i<=0?-3:i<=2?-2:i<=5?-1:i<=8?0:i<=11?1:i<=14?2:3,cj=({statKey:i,label:a,value:r,isEditing:n,readonly:o,onValueChange:c,onXPChange:h})=>{const m=oj(r.value),p=r.value+1,g=r.xp/p*100,v=b=>b>0?"text-emerald-400 bg-emerald-500/10 border-emerald-500/30":b<0?"text-red-400 bg-red-500/10 border-red-500/30":"text-muted bg-white/5 border-white/10";return u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex justify-between items-end mb-2",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-muted group-hover:text-primary transition-colors",children:a}),u.jsxs("div",{className:"flex items-center gap-4",children:[n?u.jsx("div",{className:"flex items-center gap-2 mt-1",children:u.jsx("input",{type:"number",value:r.value,onChange:b=>c(i,b.target.value),className:"w-16 bg-surface-low border border-primary text-xl font-black text-primary p-1 text-center focus:outline-none focus:ring-1 focus:ring-primary",min:"0",max:"30"})}):u.jsx("div",{className:"text-xl font-black text-text-main",children:r.value.toString().padStart(2,"0")}),u.jsxs("span",{className:`ml-2 text-[10px] font-bold px-2 py-0.5 border ${v(m)}`,children:["MOD ",m>=0?"+":"",m]})]})]}),!n&&!o&&h&&u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>h(i,-1),className:"w-4 h-4 flex items-center justify-center border border-border bg-surface-low text-muted hover:text-primary hover:border-primary transition-colors",disabled:r.xp<=0,children:u.jsx(Ab,{className:"w-3 h-3"})}),u.jsxs("span",{className:"text-[10px] font-mono w-8 text-center text-primary",children:[r.xp," / ",p]}),u.jsx("button",{onClick:()=>h(i,1),className:"w-4 h-4 flex items-center justify-center border border-border bg-surface-low text-muted hover:text-primary hover:border-primary transition-colors",children:u.jsx(Za,{className:"w-3 h-3"})})]}),u.jsx("div",{className:"text-[8px] uppercase tracking-wider text-muted/50",children:"Training XP"})]})]}),u.jsx("div",{className:"h-1 bg-surface-low overflow-hidden border-b border-border relative mb-1",children:u.jsx("div",{className:"h-full bg-primary opacity-30",style:{width:`${Math.min(r.value/15*100,100)}%`}})}),!n&&u.jsx("div",{className:"h-1 w-full bg-surface-low relative",children:u.jsx("div",{className:"h-full bg-accent transition-all duration-300",style:{width:`${Math.min(g,100)}%`}})})]})};function uj({stats:i,onUpdate:a,readonly:r=!1}){const n={value:0,xp:0},o=i||{STR:{...n},DEX:{...n},END:{...n},INT:{...n},EDU:{...n},SOC:{...n}},[c,h]=C.useState(!1),[m,p]=C.useState(o),g=()=>{a&&a(m),h(!1)},v=()=>{h(!1),p(o)},b=()=>{p(JSON.parse(JSON.stringify(o))),h(!0)},x=(S,N)=>{const j=parseInt(N)||0,A=Math.max(0,Math.min(30,j));p(R=>({...R,[S]:{...R[S],value:A}}))},w=(S,N)=>{if(r||!a)return;const j=o[S],A=Math.max(0,j.xp+N),R=j.value+1;let k=j.value,B=A;B>=R&&(B-=R,k+=1);const V={...o,[S]:{value:k,xp:B}};a(V)};return u.jsxs("div",{className:"hud-glass p-6 relative",children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(xg,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Biometric ",u.jsx("span",{className:"text-primary",children:"Profile"})]})]}),!r&&a&&u.jsx("div",{className:"flex gap-2",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-1 bg-emerald-500/20 text-emerald-400 border border-emerald-500/50 hover:bg-emerald-500/30 transition-colors text-xs font-bold uppercase tracking-wider",children:[u.jsx(jb,{className:"w-3 h-3"})," Save"]}),u.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-1 bg-red-500/20 text-red-400 border border-red-500/50 hover:bg-red-500/30 transition-colors text-xs font-bold uppercase tracking-wider",children:[u.jsx(Rl,{className:"w-3 h-3"})," Cancel"]})]}):u.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-3 py-1 bg-primary/10 text-primary border border-primary/30 hover:bg-primary/20 transition-colors text-xs font-bold uppercase tracking-wider",children:[u.jsx(Nb,{className:"w-3 h-3"})," Edit Profile"]})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8",children:Object.entries(c?m:o).map(([S,N])=>u.jsx(cj,{statKey:S,label:lj[S]||S,value:N,isEditing:c,readonly:r,onValueChange:x,onXPChange:a?w:void 0},S))}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-white/5 flex items-center justify-between",children:[u.jsx("div",{className:"flex gap-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-2 h-2 ${c?"bg-accent animate-ping":"bg-primary animate-pulse"}`}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-muted",children:c?"BIO-METRICS: UNLOCKED":"Core Criticality: Stable"})]})}),u.jsx("span",{className:"text-[8px] font-mono text-muted uppercase",children:"Data Hash: 0X7F2A9B..."})]})]})}const fg=["Admin","Advocate","Animals","Art","Astrogation","Athletics","Broker","Carouse","Deception","Diplomacy","Drive","Electronics","Engineer","Explosives","Flyer","Gambler","Gunner","Gun Combat","Heavy Weapons","Investigate","Jack of all Trades","Language","Leadership","Mechanic","Medic","Melee","Navigation","Persuade","Pilot","Profession","Recon","Science","Seafarer","Stealth","Steward","Streetwise","Survival","Tactics","Vacc Suit"];function dj({skills:i=[],onUpdate:a,readonly:r=!1}){const[n,o]=C.useState(!1),[c,h]=C.useState(""),[m,p]=C.useState(1),g=i.filter(A=>A.level>0||!fg.includes(A.name)),v=A=>i.some(R=>R.name===A&&R.level===0),b=A=>{if(!a)return;const R=v(A);let k=[...i];R?k=k.filter(B=>!(B.name===A&&B.level===0)):k.push({name:A,level:0,xp:0}),a(k)},x=()=>{c.trim()&&(a&&a([...i,{name:c,level:m,xp:0}]),h(""),p(1),o(!1))},w=A=>{if(a){const R=[...i];R.splice(A,1),a(R)}},S=A=>Math.max(1,A+1),N=A=>{if(!a)return;const R=i[A],k=R.xp||0,B=S(R.level);let V=k+1,G=R.level;V>=B&&(G+=1,V=0);const I=[...i];I[A]={...R,level:G,xp:V},a(I)},j=A=>{if(!a)return;const R=i[A],k=R.xp||0;if(k>0){const B=[...i];B[A]={...R,xp:k-1},a(B)}};return u.jsxs("div",{className:"flex flex-col gap-6",children:[u.jsxs("div",{className:"hud-glass p-0 overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-surface-low/50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Eb,{className:"w-5 h-5 text-primary"}),u.jsxs("h3",{className:"text-sm font-black tracking-[0.2em] uppercase text-text-main",children:["Skill ",u.jsx("span",{className:"text-primary",children:"Registry"})]})]}),!r&&a&&!n&&u.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-3 py-1 bg-primary/10 text-primary border border-primary/30 hover:bg-primary/20 transition-colors text-xs font-bold uppercase tracking-wider",children:[u.jsx(Za,{className:"w-3 h-3"})," Add Skill"]})]}),n&&u.jsx("div",{className:"bg-surface-low border-b border-dashed border-primary/50 p-4 animate-in fade-in slide-in-from-top-2",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-black uppercase text-muted tracking-widest mb-1 block",children:"Skill Designation"}),u.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),className:"w-full bg-surface-high border border-border px-3 py-2 text-text-main text-sm focus:outline-none focus:border-primary placeholder:text-muted/50",placeholder:"e.g. Pilot (Small Craft)",autoFocus:!0})]}),u.jsxs("div",{className:"flex items-end gap-4",children:[u.jsxs("div",{className:"w-24",children:[u.jsx("label",{className:"text-[10px] font-black uppercase text-muted tracking-widest mb-1 block",children:"Level"}),u.jsx("input",{type:"number",value:m,onChange:A=>p(parseInt(A.target.value)||0),className:"w-full bg-surface-high border border-border px-3 py-2 text-text-main text-sm focus:outline-none focus:border-primary",min:"0"})]}),u.jsxs("div",{className:"flex gap-2 pb-0.5",children:[u.jsx("button",{onClick:x,className:"px-4 py-2 bg-emerald-500/20 text-emerald-400 border border-emerald-500/50 hover:bg-emerald-500/30 text-xs font-bold uppercase",children:"Confirm"}),u.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/50 hover:bg-red-500/30 text-xs font-bold uppercase",children:"Cancel"})]})]})]})}),u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-surface-low text-[10px] uppercase tracking-widest text-muted font-bold border-b border-border",children:[u.jsx("th",{className:"p-4 w-1/3",children:"Skill"}),u.jsx("th",{className:"p-4 w-20 text-center",children:"Level"}),u.jsx("th",{className:"p-4 text-center",children:"Study Progress"}),!r&&a&&u.jsx("th",{className:"p-4 w-10"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:g.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"p-8 text-center text-muted text-xs italic",children:"No specialist training recorded."})}):g.map((A,R)=>{const k=i.indexOf(A),B=A.xp||0,V=S(A.level);return u.jsxs("tr",{className:"group hover:bg-surface-low/30 transition-colors",children:[u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-sm font-bold text-text-main",children:A.name})}),u.jsx("td",{className:"p-4 text-center",children:u.jsx("span",{className:`text-lg font-black ${A.level>0?"text-primary":"text-muted"}`,children:A.level})}),u.jsxs("td",{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-center gap-3",children:[!r&&a&&u.jsx("button",{onClick:()=>j(k),disabled:B===0,className:"w-6 h-6 flex items-center justify-center border border-border text-muted hover:border-primary/50 hover:text-text-main disabled:opacity-30 transition-colors",children:"-"}),u.jsx("div",{className:"flex gap-1",children:Array.from({length:V}).map((G,I)=>u.jsx("div",{className:`w-3 h-3 border ${I<B?"bg-primary border-primary":"bg-transparent border-white/20"}`},I))}),!r&&a&&u.jsx("button",{onClick:()=>N(k),className:"w-6 h-6 flex items-center justify-center border border-primary/30 text-primary hover:bg-primary/10 transition-colors",children:"+"})]}),u.jsx("div",{className:"text-center mt-1",children:u.jsxs("span",{className:"text-[9px] uppercase text-muted tracking-wider",children:[B," / ",V," XP"]})})]}),!r&&a&&u.jsx("td",{className:"p-4 text-right",children:u.jsx("button",{onClick:()=>w(k),className:"text-muted hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",children:u.jsx(xl,{className:"w-4 h-4"})})})]},`${A.name}-${R}`)})})]})]}),u.jsxs("div",{className:"hud-glass p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(Rb,{className:"w-5 h-5 text-muted"}),u.jsx("h3",{className:"text-xs font-black tracking-[0.2em] uppercase text-muted",children:"Unskilled / Basic Training (Level 0)"})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-2 gap-y-2",children:fg.map(A=>{const R=v(A),k=i.some(V=>V.name===A&&V.level>0);let B="flex items-center gap-2 px-2 py-1 text-left transition-colors ";return k?B+="opacity-30 cursor-not-allowed":R?B+="text-text-main":B+="text-muted hover:text-text-main",u.jsxs("button",{onClick:()=>!r&&!k&&b(A),disabled:r||!a||k,className:B,children:[k||R?u.jsx(Tb,{className:"w-3 h-3 text-primary shrink-0"}):u.jsx(kb,{className:"w-3 h-3 text-muted/30 shrink-0"}),u.jsxs("span",{className:`text-[10px] font-bold uppercase ${R||k?"text-primary":""}`,children:[A," ",k&&`(Lv ${i.find(V=>V.name===A)?.level})`]})]},A)})})]})]})}function hj({campaignId:i,selectedPc:a,onPcChange:r,characterBalance:n,characterFinance:o,characterInventory:c,characterAmmo:h,characterWeapons:m,characterArmour:p,onUpdateFinance:g,onAddInventory:v,onAddAmmo:b,onAddWeapon:x,onAddArmour:w,onFireRound:S,onReloadWeapon:N}){const[j,A]=C.useState("profile"),{characters:R,loading:k,error:B,updateCharacter:V}=ld(i),G=R.find(I=>I.displayName===a);return u.jsxs("div",{className:"space-y-8 animate-hud",children:[u.jsx("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-stretch",children:u.jsx("div",{className:"hud-glass p-6 flex-grow min-w-0 w-full lg:w-auto",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:[u.jsxs("div",{className:"flex items-center gap-5",children:[u.jsx("div",{className:"w-16 h-16 bg-primary/10 flex items-center justify-center text-primary shadow-inner border-2 border-primary/40",children:u.jsx(Tl,{className:"w-8 h-8"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-primary",children:"PERSONNEL_FILE"}),B&&u.jsx("span",{className:"text-[10px] text-accent font-bold px-1.5 py-0.5 bg-accent/10 border border-accent",children:"OFFLINE"})]}),u.jsx("select",{className:"bg-transparent text-2xl font-black tracking-tight border-none p-0 focus:ring-0 cursor-pointer hover:text-primary transition-colors appearance-none",value:a,onChange:I=>r(I.target.value),disabled:k,children:k?u.jsx("option",{children:"Loading Personnel..."}):R.map(I=>u.jsx("option",{value:I.displayName,className:"bg-surface-high",children:I.displayName},I.id))}),G&&u.jsx("p",{className:"text-sm text-muted uppercase tracking-widest font-bold mt-1",children:G.characterName||"Unknown operative"})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsxs("div",{className:"px-5 py-3 bg-surface-low border border-border flex items-center gap-4",children:[u.jsx(Ob,{className:"w-5 h-5 text-emerald-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:"Available Credits"}),u.jsx("p",{className:"font-bold text-text-main",children:qu(n)})]})]}),u.jsxs("div",{className:"px-5 py-3 bg-surface-low border border-border flex items-center gap-4",children:[u.jsx(xg,{className:"w-5 h-5 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:"Status"}),u.jsx("p",{className:"font-bold text-text-main uppercase",children:"Mission Ready"})]})]})]})]})})}),u.jsx(Py,{tabs:[{id:"profile",label:"Bio-Profile"},{id:"ledger",label:"Financial Ledger"},{id:"inventory",label:"Gear Manifest"},{id:"weapons",label:"Armory Entry"},{id:"armour",label:"Protection Suite"},{id:"ammo",label:"Ballistics Tracker"}],active:j,onChange:I=>A(I)}),u.jsxs("div",{className:"transition-all duration-500",children:[j==="profile"&&u.jsxs(u.Fragment,{children:[u.jsx(uj,{stats:G?.stats||{STR:{value:0,xp:0},DEX:{value:0,xp:0},END:{value:0,xp:0},INT:{value:0,xp:0},EDU:{value:0,xp:0},SOC:{value:0,xp:0}},onUpdate:I=>G&&V(G.id,{characteristics:I}),readonly:!1}),u.jsx("div",{className:"mt-8",children:u.jsx(dj,{skills:G?.skills,onUpdate:I=>{G&&V(G.id,{name:G.displayName,skills:I})}})})]}),j==="ledger"&&u.jsx(KC,{pc:a,rows:o,onAdd:I=>g(a,I)}),j==="inventory"&&u.jsx(WC,{rows:c,onAdd:I=>v(a,I)}),j==="weapons"&&u.jsx(ej,{rows:m,onAdd:I=>x(a,I)}),j==="armour"&&u.jsx(ij,{rows:p,onAdd:I=>w(a,I)}),j==="ammo"&&u.jsx(ZC,{rows:h,weapons:m,onAdd:I=>b(a,I),onFireRound:I=>S?.(a,I),onReload:I=>N?.(a,I)})]})]})}function fj({campaignId:i,activeTab:a,partyFinances:r,shipFinances:n,shipCargo:o,characterFinance:c,characterInventory:h,characterWeapons:m,characterArmour:p,characterAmmo:g,selectedCharacterDisplayName:v,characterBalance:b,onCharacterChange:x,onUpdatePartyFinances:w,onUpdateShipAccounts:S,onAddCargoLeg:N,onUpdateCharacterFinance:j,onAddCharacterInventory:A,onAddCharacterAmmo:R,onAddCharacterWeapon:k,onAddCharacterArmour:B,onFireRound:V,onReloadWeapon:G}){return u.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${a}`,id:`tabpanel-${a}`,children:[a==="party"&&u.jsx(Pu,{title:"Party",rows:r,onUpdate:w,fundName:"Party Fund",initialBalance:0,showSummary:!0}),a==="ship"&&u.jsx(Pu,{title:"Ship",rows:n,onUpdate:S,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),a==="cargo"&&u.jsx(IC,{rows:o,onAdd:N}),a==="characters"&&u.jsx(hj,{campaignId:i,selectedPc:v,onPcChange:x,characterBalance:b,characterFinance:c,characterInventory:h,characterAmmo:g,characterWeapons:m,characterArmour:p,onUpdateFinance:j,onAddInventory:A,onAddAmmo:R,onAddWeapon:k,onAddArmour:B,onFireRound:V,onReloadWeapon:G})]})}function mj(){const{campaignId:i}=Ax(),a=Pn(),[r,n]=C.useState("party"),{characters:o}=ld(i||""),[c,h]=C.useState(""),m=c||o[0]?.displayName||"",p=C.useMemo(()=>o.find(we=>we.displayName===m)?.id,[o,m]),{partyFinances:g,shipFinances:v,shipCargo:b,updatePartyFinances:x,updateShipAccounts:w,addCargoLeg:S}=DC(i),{finance:N,inventory:j,weapons:A,armour:R,ammo:k,updateFinance:B,addInventory:V,addAmmo:G,addWeapon:I,addArmour:Y,fireRound:P,reloadWeapon:X}=MC(p),{state:de,setState:ce}=OC(),ie=C.useMemo(()=>m?{[m]:{Finance:N,Inventory:j,Weapons:A,Armour:R,Ammo:k}}:{},[m,N,j,A,R,k]),F=PC({Party_Finances:g,Ship_Accounts:v,PCs:ie},m),{handleImport:pe,handleExport:L}=$C(ce,de),Q=(ze,we)=>{B(we)},re=(ze,we)=>{V(we)},te=(ze,we)=>{G(we)},J=(ze,we)=>{I(we)},Ne=(ze,we)=>{Y(we)},Ae=(ze,we)=>{P(we)},K=(ze,we)=>{X(we)},{campaigns:me}=Dy();if(!i)return a("/"),null;const et=me.find(ze=>ze.id===i);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-12 animate-hud",children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary text-[10px] font-black uppercase tracking-widest border border-primary",children:"ACTIVE_MISSION"}),u.jsxs("span",{className:"text-muted text-[10px] font-black uppercase tracking-widest",children:["ID: ",i?.slice(0,8),"..."]})]}),u.jsxs("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter uppercase",children:[et?.name||"Campaign"," ",u.jsx("span",{className:"text-primary",children:"Dashboard"})]})]}),u.jsx("div",{className:"flex gap-3",children:u.jsx(HC,{onImport:pe,onExport:L})})]})}),u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"animate-hud delay-100",children:u.jsx(FC,{partyBalance:F.party,shipBalance:F.ship,cargoLegsCount:b.length,characterCount:o.length})}),u.jsxs("div",{className:"animate-hud delay-200",children:[u.jsx(Py,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:ze=>n(ze)}),u.jsx("div",{className:"mt-8 transition-all duration-500",children:u.jsx(fj,{campaignId:i||"",activeTab:r,partyFinances:g,shipFinances:v,shipCargo:b,characterFinance:N,characterInventory:j,characterWeapons:A,characterArmour:R,characterAmmo:k,selectedCharacterDisplayName:m,characterBalance:F.character,onCharacterChange:h,onUpdatePartyFinances:x,onUpdateShipAccounts:w,onAddCargoLeg:S,onUpdateCharacterFinance:Q,onAddCharacterInventory:re,onAddCharacterAmmo:te,onAddCharacterWeapon:J,onAddCharacterArmour:Ne,onFireRound:Ae,onReloadWeapon:K})})]})]})]})}function pj({onCollapse:i,onOpenSettings:a}){const[r,n]=C.useState(!1),o=Pn(),c=aa(),{user:h,signOut:m}=er(),p=()=>{const v=!r;n(v),i(v)},g=[{id:"/",label:"Bridge",icon:u.jsx(Ub,{className:"w-5 h-5"})},{id:"/campaigns",label:"Sector Ops",icon:u.jsx(Bn,{className:"w-5 h-5"})},{id:"/characters",label:"Personnel",icon:u.jsx(Tl,{className:"w-5 h-5"})},{id:"settings",label:"Systems Management",icon:u.jsx(mg,{className:"w-5 h-5"}),action:a}];return u.jsxs("aside",{className:`bg-side ${r?"w-20":"w-72"} flex flex-col transition-all duration-500 overflow-hidden border-r border-border`,children:[u.jsxs("div",{className:`p-4 mb-4 ${r?"justify-center":""}`,children:[u.jsxs("div",{className:"mgt-header-bar mb-2",children:[!r&&u.jsx("span",{className:"text-xs",children:"System ID: DASH-01"}),u.jsx(pg,{className:"w-4 h-4"})]}),!r&&u.jsxs("div",{className:"px-2 py-4 animate-hud",children:[u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("span",{className:"font-black text-3xl tracking-tighter text-white",children:"TRAVELLER"}),u.jsx("span",{className:"text-[10px] font-bold text-primary px-1 border border-primary",children:"v2.1"})]}),u.jsx("div",{className:"h-1 bg-primary w-full mt-1 opacity-50"})]}),u.jsx("button",{onClick:p,className:"absolute top-4 right-[-12px] z-50 p-1.5 bg-primary text-white shadow-lg hover:scale-110 transition-transform lg:flex hidden border border-white/20",children:r?u.jsx($u,{className:"w-4 h-4"}):u.jsx(Db,{className:"w-4 h-4"})})]}),u.jsx("nav",{className:"flex-grow px-3 space-y-1",children:g.map(v=>{const b=c.pathname===v.id,x=()=>{v.action?v.action():o(v.id)};return u.jsxs("button",{onClick:x,className:`w-full flex items-center transition-all duration-200 group relative ${r?"justify-center py-4":"gap-4 px-4 py-3"} ${b?"bg-primary text-white":"text-slate-400 hover:text-white hover:bg-white/5"}`,style:{clipPath:r?"":"polygon(0 0, 100% 0, 95% 100%, 0% 100%)"},children:[b&&!r&&u.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-white shadow-[0_0_15px_rgba(255,255,255,0.5)]"}),u.jsx("div",{className:`${b?"text-white":"group-hover:text-primary"} transition-colors shrink-0`,children:v.icon}),!r&&u.jsx("span",{className:"font-black text-xs uppercase tracking-[0.2em] animate-hud whitespace-nowrap overflow-hidden",children:v.label})]},v.id)})}),u.jsxs("div",{className:"p-4 border-t border-white/10 bg-black/20",children:[u.jsxs("div",{className:`flex items-center gap-4 p-2 ${r?"justify-center":""}`,children:[u.jsx("div",{className:"w-8 h-8 bg-primary/20 border border-primary/40 flex items-center justify-center text-primary font-black uppercase text-xs",children:h?.email?.[0]||"U"}),!r&&u.jsxs("div",{className:"flex-grow min-w-0 animate-hud",children:[u.jsx("p",{className:"text-[10px] font-black text-white/90 truncate uppercase tracking-widest leading-none mb-1",children:h?.displayName||"User"}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-primary animate-pulse"}),u.jsx("span",{className:"text-[8px] text-slate-400 uppercase font-bold tracking-widest",children:"Active Link"})]})]})]}),u.jsxs("button",{onClick:()=>m(),className:`w-full flex items-center text-slate-500 hover:text-accent transition-colors group mt-4 ${r?"justify-center py-2":"gap-4 px-4 py-2"}`,children:[u.jsx(Mb,{className:"w-4 h-4 group-hover:rotate-12 transition-transform shrink-0"}),!r&&u.jsx("span",{className:"font-black text-[10px] uppercase tracking-widest animate-hud whitespace-nowrap overflow-hidden",children:"Disconnect"})]})]})]})}const Hy=C.createContext(void 0);function gj({children:i}){const[a,r]=C.useState(()=>localStorage.getItem("hud-theme")||"system"),[n,o]=C.useState("dark");return C.useEffect(()=>{localStorage.setItem("hud-theme",a);const c=window.document.documentElement,h=m=>{c.classList.remove("light","dark"),c.classList.add(m),o(m)};if(a==="system"){const m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";h(m);const p=window.matchMedia("(prefers-color-scheme: dark)"),g=v=>{h(v.matches?"dark":"light")};return p.addEventListener("change",g),()=>p.removeEventListener("change",g)}h(a)},[a]),u.jsx(Hy.Provider,{value:{theme:a,setTheme:r,resolvedTheme:n},children:i})}function yj(){const i=C.useContext(Hy);if(i===void 0)throw new Error("useTheme must be used within a ThemeProvider");return i}function vj({isOpen:i,onClose:a,user:r,onUpdateProfile:n,onChangePassword:o,onDeleteAccount:c}){const{theme:h,setTheme:m}=yj(),[p,g]=C.useState("profile"),[v,b]=C.useState(!1),[x,w]=C.useState(null),[S,N]=C.useState(r.displayName||""),[j,A]=C.useState(r.username||""),[R,k]=C.useState(""),[B,V]=C.useState(""),[G,I]=C.useState(""),[Y,P]=C.useState(!1),[X,de]=C.useState(!1),[ce,ie]=C.useState(!1),F=tC(B),pe=async te=>{te.preventDefault(),b(!0),w(null);try{await n({displayName:S.trim()||void 0,username:j.trim()||void 0}),w({type:"success",text:"Profile updated successfully!"})}catch(J){w({type:"error",text:J instanceof Error?J.message:"Failed to update profile"})}finally{b(!1)}},L=async te=>{if(te.preventDefault(),b(!0),w(null),!F.isValid){w({type:"error",text:"Please fix the password requirements"}),b(!1);return}if(B!==G){w({type:"error",text:"New passwords do not match"}),b(!1);return}try{await o({currentPassword:R,newPassword:B}),w({type:"success",text:"Password changed successfully!"}),k(""),V(""),I("")}catch(J){w({type:"error",text:J instanceof Error?J.message:"Failed to change password"})}finally{b(!1)}},Q=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&c()},re=[{id:"profile",label:"Profile",icon:Tl},{id:"password",label:"Password",icon:bg},{id:"display",label:"Display",icon:up},{id:"danger",label:"Danger Zone",icon:dp}];return u.jsx(rt,{isOpen:i,onClose:a,title:"Account Settings",maxWidth:"xl",children:u.jsxs("div",{className:"flex h-[32rem]",children:[u.jsx("div",{className:"w-56 border-r border-border pr-6",children:u.jsx("nav",{className:"space-y-1",children:re.map(te=>{const J=te.icon;return u.jsxs("button",{onClick:()=>g(te.id),className:`w-full flex items-center px-3 py-2 text-[10px] font-black uppercase tracking-[0.2em] transition-colors border-l-2 ${p===te.id?"bg-primary/10 text-primary border-primary":"text-muted hover:text-text-main hover:bg-surface-low border-transparent"}`,children:[u.jsx(J,{className:"w-3.5 h-3.5 mr-2"}),te.label]},te.id)})})}),u.jsxs("div",{className:"flex-1 pl-8",children:[x&&u.jsx("div",{className:`mb-4 p-3 text-[10px] font-black uppercase tracking-widest ${x.type==="success"?"bg-primary/5 text-primary border border-primary":"bg-accent/5 text-accent border border-accent"}`,children:x.text}),p==="profile"&&u.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-main mb-2 uppercase tracking-wider",children:"Email Address"}),u.jsxs("div",{className:"flex items-center px-3 py-2 bg-surface-low border border-border",children:[u.jsx(zb,{className:"w-3.5 h-3.5 text-muted mr-3"}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted",children:r.email})]}),u.jsx("p",{className:"text-xs text-muted mt-1 italic",children:"Email cannot be changed"})]}),u.jsx(oe,{label:"Display Name",type:"text",value:S,onChange:te=>N(te.target.value),placeholder:"Enter your display name"}),u.jsx(oe,{label:"Username",type:"text",value:j,onChange:te=>A(te.target.value),placeholder:"Enter your username"}),u.jsx(Te,{type:"submit",disabled:v,className:"w-full",children:v?"Updating...":"Update Profile"})]}),p==="password"&&u.jsxs("form",{onSubmit:L,className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(oe,{label:"Current Password",type:Y?"text":"password",value:R,onChange:te=>k(te.target.value),placeholder:"Enter your current password",required:!0}),u.jsx("button",{type:"button",onClick:()=>P(!Y),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:Y?u.jsx(eu,{className:"w-4 h-4"}):u.jsx(tu,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"relative",children:[u.jsx(oe,{label:"New Password",type:X?"text":"password",value:B,onChange:te=>V(te.target.value),placeholder:"Enter your new password",required:!0}),u.jsx("button",{type:"button",onClick:()=>de(!X),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:X?u.jsx(eu,{className:"w-4 h-4"}):u.jsx(tu,{className:"w-4 h-4"})})]}),B&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-muted",children:"Password Strength:"}),u.jsx("span",{className:`text-sm font-bold uppercase tracking-widest ${aC(F.strength)}`,children:rC(F.strength)})]}),u.jsx("div",{className:"space-y-1 text-xs",children:F.errors.map((te,J)=>u.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[u.jsx("span",{className:"mr-2",children:""}),te]},J))})]}),u.jsxs("div",{className:"relative",children:[u.jsx(oe,{label:"Confirm New Password",type:ce?"text":"password",value:G,onChange:te=>I(te.target.value),placeholder:"Confirm your new password",required:!0}),u.jsx("button",{type:"button",onClick:()=>ie(!ce),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ce?u.jsx(eu,{className:"w-4 h-4"}):u.jsx(tu,{className:"w-4 h-4"})})]}),u.jsx(Te,{type:"submit",disabled:v||!F.isValid||B!==G,className:"w-full",children:v?"Changing Password...":"Change Password"})]}),p==="display"&&u.jsx("div",{className:"space-y-6 animate-hud",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-primary mb-4",children:"Tactical Interface"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[u.jsxs("button",{onClick:()=>m("light"),type:"button",className:`flex items-center justify-between p-4 border transition-all ${h==="light"?"bg-primary/10 border-primary text-primary":"bg-surface-low border-border hover:border-primary"}`,children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 ${h==="light"?"bg-primary text-white":"bg-side text-muted"}`,children:u.jsx(Lb,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"font-black text-xs uppercase tracking-widest",children:"Light HUD"}),u.jsx("p",{className:"text-[8px] font-bold uppercase tracking-widest text-muted",children:"Optimized for high-light environments"})]})]}),h==="light"&&u.jsx("div",{className:"w-1.5 h-1.5 bg-primary animate-pulse"})]}),u.jsxs("button",{onClick:()=>m("dark"),type:"button",className:`flex items-center justify-between p-4 border transition-all ${h==="dark"?"bg-primary/10 border-primary text-primary":"bg-surface-low border-border hover:border-primary"}`,children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 ${h==="dark"?"bg-primary text-white":"bg-side text-muted"}`,children:u.jsx(Bb,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"font-black text-xs uppercase tracking-widest",children:"Dark HUD"}),u.jsx("p",{className:"text-[8px] font-bold uppercase tracking-widest text-muted",children:"Stealth mode for low-light sectors"})]})]}),h==="dark"&&u.jsx("div",{className:"w-1.5 h-1.5 bg-primary animate-pulse"})]}),u.jsxs("button",{onClick:()=>m("system"),type:"button",className:`flex items-center justify-between p-4 border transition-all ${h==="system"?"bg-primary/10 border-primary text-primary":"bg-surface-low border-border hover:border-primary"}`,children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 ${h==="system"?"bg-primary text-white":"bg-side text-muted"}`,children:u.jsx(up,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"font-black text-xs uppercase tracking-widest",children:"Dynamic Sync"}),u.jsx("p",{className:"text-[8px] font-bold uppercase tracking-widest text-muted",children:"Inherit system-level display parameters"})]})]}),h==="system"&&u.jsx("div",{className:"w-1.5 h-1.5 bg-primary animate-pulse"})]})]})]})}),p==="danger"&&u.jsx("div",{className:"space-y-6",children:u.jsx("div",{className:"bg-accent/5 border border-accent p-4",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx(dp,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),u.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),u.jsx("div",{className:"mt-4",children:u.jsx(Te,{variant:"danger",onClick:Q,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function bj({children:i}){const[a,r]=C.useState(!1),[n,o]=C.useState(!1),[c,h]=C.useState(!1),{user:m,updateProfile:p,changePassword:g,deleteAccount:v}=er();return u.jsxs("div",{className:"min-h-screen bg-transparent selection:bg-primary/20 relative",children:[u.jsx("div",{className:"scanlines"}),u.jsxs("div",{className:"lg:hidden bg-side fixed top-0 w-full z-50 px-6 py-4 flex items-center justify-between border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-primary border border-primary/40 flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-black",children:"T"})}),u.jsx("span",{className:"font-black tracking-tighter uppercase text-white",children:"TRAVELLER"})]}),u.jsx("button",{onClick:()=>o(!n),className:"p-2 hover:bg-hud-accent  text-primary",children:n?u.jsx(Rl,{}):u.jsx(qb,{})})]}),u.jsx("div",{className:`
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        fixed inset-y-0 left-0 z-50 transition-transform duration-500
      `,children:u.jsx(pj,{onCollapse:r,onOpenSettings:()=>h(!0)})}),m&&u.jsx(vj,{isOpen:c,onClose:()=>h(!1),user:m,onUpdateProfile:async b=>{const x=await p(b);if(!x.success&&x.error)throw new Error(x.error)},onChangePassword:async b=>{const x=await g(b);if(!x.success&&x.error)throw new Error(x.error)},onDeleteAccount:()=>{v().then(()=>{h(!1)})}}),n&&u.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity",onClick:()=>o(!1)}),u.jsx("main",{className:`
        min-h-screen transition-all duration-500
        ${a?"lg:pl-20":"lg:pl-72"}
        pt-20 lg:pt-0
      `,children:u.jsx("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 animate-hud",children:i})})]})}function xj(){const{user:i,loading:a,completeProfile:r}=er();return JS(),a?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):i?i.profileCompleted?u.jsx(bj,{children:u.jsxs(Vx,{children:[u.jsx(vs,{path:"/",element:u.jsx(xu,{})}),u.jsx(vs,{path:"/campaigns",element:u.jsx(xu,{})}),u.jsx(vs,{path:"/characters",element:u.jsx(xu,{})}),u.jsx(vs,{path:"/campaign/:campaignId",element:u.jsx(mj,{})}),u.jsx(vs,{path:"*",element:u.jsx($x,{to:"/",replace:!0})})]})}):u.jsx(nC,{onComplete:r}):u.jsxs(u.Fragment,{children:[!1,u.jsx(eC,{})]})}function wj(){return u.jsx(hw,{basename:"/traveller-dashboard",children:u.jsx(xj,{})})}class _j extends wg.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,r){console.error("Error boundary caught an error:",a,r)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:u.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white  shadow-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),u.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),u.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),u.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}function Sj(){Qt.getInstance().init({authRepository:new wC,campaignRepository:new Ly,characterRepository:new bC(W),campaignDataRepository:new xC(W)})}Sj();const Vy=document.getElementById("root");if(!Vy)throw new Error("Failed to find the root element");Wb.createRoot(Vy).render(u.jsx(wg.StrictMode,{children:u.jsx(_j,{children:u.jsx(gj,{children:u.jsx(wj,{})})})}));export{ng as D,El as _};
