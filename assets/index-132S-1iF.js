const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-B2Yfl76m.js","assets/icons-tVbGvSWA.js","assets/excel-Du8kUxR_.js","assets/vendor-Dfoqj1Wf.js"])))=>i.map(i=>d[i]);
import{r as B,X as ky,P as Po,U as Ui,T as ec,a as Ho,R as My,b as By,C as qy,c as Ly,S as Hy,d as Gy,e as $y,D as Vy,f as Yy,g as Hm}from"./icons-tVbGvSWA.js";import{g as Gm,a as Qy}from"./excel-Du8kUxR_.js";import{r as Ky,a as Xy}from"./vendor-Dfoqj1Wf.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function i(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(u){if(u.ep)return;u.ep=!0;const d=i(u);fetch(u.href,d)}})();var Eo={exports:{}},Ai={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function Jy(){if(lm)return Ai;lm=1;var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(l,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var g in u)g!=="key"&&(d[g]=u[g])}else d=u;return u=d.ref,{$$typeof:o,type:l,key:f,ref:u!==void 0?u:null,props:d}}return Ai.Fragment=s,Ai.jsx=i,Ai.jsxs=i,Ai}var rm;function Zy(){return rm||(rm=1,Eo.exports=Jy()),Eo.exports}var h=Zy(),To={exports:{}},Ei={},Oo={exports:{}},No={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function Wy(){return um||(um=1,(function(o){function s(U,G){var I=U.length;U.push(G);e:for(;0<I;){var he=I-1>>>1,ye=U[he];if(0<u(ye,G))U[he]=G,U[I]=ye,I=he;else break e}}function i(U){return U.length===0?null:U[0]}function l(U){if(U.length===0)return null;var G=U[0],I=U.pop();if(I!==G){U[0]=I;e:for(var he=0,ye=U.length,Qe=ye>>>1;he<Qe;){var Ce=2*(he+1)-1,oe=U[Ce],De=Ce+1,_t=U[De];if(0>u(oe,I))De<ye&&0>u(_t,oe)?(U[he]=_t,U[De]=I,he=De):(U[he]=oe,U[Ce]=I,he=Ce);else if(De<ye&&0>u(_t,I))U[he]=_t,U[De]=I,he=De;else break e}}return G}function u(U,G){var I=U.sortIndex-G.sortIndex;return I!==0?I:U.id-G.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();o.unstable_now=function(){return f.now()-g}}var y=[],p=[],b=1,_=null,x=3,C=!1,O=!1,D=!1,M=!1,$=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Y(U){for(var G=i(p);G!==null;){if(G.callback===null)l(p);else if(G.startTime<=U)l(p),G.sortIndex=G.expirationTime,s(y,G);else break;G=i(p)}}function P(U){if(D=!1,Y(U),!O)if(i(y)!==null)O=!0,H||(H=!0,Re());else{var G=i(p);G!==null&&Ut(P,G.startTime-U)}}var H=!1,ee=-1,xe=5,Ee=-1;function Rt(){return M?!0:!(o.unstable_now()-Ee<xe)}function J(){if(M=!1,H){var U=o.unstable_now();Ee=U;var G=!0;try{e:{O=!1,D&&(D=!1,L(ee),ee=-1),C=!0;var I=x;try{t:{for(Y(U),_=i(y);_!==null&&!(_.expirationTime>U&&Rt());){var he=_.callback;if(typeof he=="function"){_.callback=null,x=_.priorityLevel;var ye=he(_.expirationTime<=U);if(U=o.unstable_now(),typeof ye=="function"){_.callback=ye,Y(U),G=!0;break t}_===i(y)&&l(y),Y(U)}else l(y);_=i(y)}if(_!==null)G=!0;else{var Qe=i(p);Qe!==null&&Ut(P,Qe.startTime-U),G=!1}}break e}finally{_=null,x=I,C=!1}G=void 0}}finally{G?Re():H=!1}}}var Re;if(typeof q=="function")Re=function(){q(J)};else if(typeof MessageChannel<"u"){var Qt=new MessageChannel,qt=Qt.port2;Qt.port1.onmessage=J,Re=function(){qt.postMessage(null)}}else Re=function(){$(J,0)};function Ut(U,G){ee=$(function(){U(o.unstable_now())},G)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return x},o.unstable_next=function(U){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var I=x;x=G;try{return U()}finally{x=I}},o.unstable_requestPaint=function(){M=!0},o.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var I=x;x=U;try{return G()}finally{x=I}},o.unstable_scheduleCallback=function(U,G,I){var he=o.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?he+I:he):I=he,U){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=I+ye,U={id:b++,callback:G,priorityLevel:U,startTime:I,expirationTime:ye,sortIndex:-1},I>he?(U.sortIndex=I,s(p,U),i(y)===null&&U===i(p)&&(D?(L(ee),ee=-1):D=!0,Ut(P,I-he))):(U.sortIndex=ye,s(y,U),O||C||(O=!0,H||(H=!0,Re()))),U},o.unstable_shouldYield=Rt,o.unstable_wrapCallback=function(U){var G=x;return function(){var I=x;x=G;try{return U.apply(this,arguments)}finally{x=I}}}})(No)),No}var om;function Iy(){return om||(om=1,Oo.exports=Wy()),Oo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm;function Fy(){if(cm)return Ei;cm=1;var o=Iy(),s=Ky(),i=Xy();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,n=t;;){var r=a.return;if(r===null)break;var c=r.alternate;if(c===null){if(n=r.return,n!==null){a=n;continue}break}if(r.child===c.child){for(c=r.child;c;){if(c===a)return y(r),e;if(c===n)return y(r),t;c=c.sibling}throw Error(l(188))}if(a.return!==n.return)a=r,n=c;else{for(var m=!1,v=r.child;v;){if(v===a){m=!0,a=r,n=c;break}if(v===n){m=!0,n=r,a=c;break}v=v.sibling}if(!m){for(v=c.child;v;){if(v===a){m=!0,a=c,n=r;break}if(v===n){m=!0,n=c,a=r;break}v=v.sibling}if(!m)throw Error(l(189))}}if(a.alternate!==n)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),Ee=Symbol.for("react.activity"),Rt=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function Re(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var Qt=Symbol.for("react.client.reference");function qt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case $:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList";case Ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case q:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return t=e.displayName||null,t!==null?t:qt(e.type)||"Memo";case xe:t=e._payload,e=e._init;try{return qt(e(t))}catch{}}return null}var Ut=Array.isArray,U=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},he=[],ye=-1;function Qe(e){return{current:e}}function Ce(e){0>ye||(e.current=he[ye],he[ye]=null,ye--)}function oe(e,t){ye++,he[ye]=e.current,e.current=t}var De=Qe(null),_t=Qe(null),ot=Qe(null),fa=Qe(null);function Ya(e,t){switch(oe(ot,t),oe(_t,e),oe(De,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Oh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Oh(t),e=Nh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ce(De),oe(De,e)}function ha(){Ce(De),Ce(_t),Ce(ot)}function Sn(e){e.memoizedState!==null&&oe(fa,e);var t=De.current,a=Nh(t,e.type);t!==a&&(oe(_t,e),oe(De,a))}function Cn(e){_t.current===e&&(Ce(De),Ce(_t)),fa.current===e&&(Ce(fa),wi._currentValue=I)}var Ts,Mi;function Kt(e){if(Ts===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ts=t&&t[1]||"",Mi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ts+e+Mi}var Os=!1;function Ns(e,t){if(!e||Os)return"";Os=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(N){var T=N}Reflect.construct(e,[],k)}else{try{k.call()}catch(N){T=N}e.call(k.prototype)}}else{try{throw Error()}catch(N){T=N}(k=e())&&typeof k.catch=="function"&&k.catch(function(){})}}catch(N){if(N&&T&&typeof N.stack=="string")return[N.stack,T.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),m=c[0],v=c[1];if(m&&v){var w=m.split(`
`),E=v.split(`
`);for(r=n=0;n<w.length&&!w[n].includes("DetermineComponentFrameRoot");)n++;for(;r<E.length&&!E[r].includes("DetermineComponentFrameRoot");)r++;if(n===w.length||r===E.length)for(n=w.length-1,r=E.length-1;1<=n&&0<=r&&w[n]!==E[r];)r--;for(;1<=n&&0<=r;n--,r--)if(w[n]!==E[r]){if(n!==1||r!==1)do if(n--,r--,0>r||w[n]!==E[r]){var R=`
`+w[n].replace(" at new "," at ");return e.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",e.displayName)),R}while(1<=n&&0<=r);break}}}finally{Os=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Kt(a):""}function fr(e,t){switch(e.tag){case 26:case 27:case 5:return Kt(e.type);case 16:return Kt("Lazy");case 13:return e.child!==t&&t!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return Ns(e.type,!1);case 11:return Ns(e.type.render,!1);case 1:return Ns(e.type,!0);case 31:return Kt("Activity");default:return""}}function Bi(e){try{var t="",a=null;do t+=fr(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Rs=Object.prototype.hasOwnProperty,Us=o.unstable_scheduleCallback,zs=o.unstable_cancelCallback,hr=o.unstable_shouldYield,F=o.unstable_requestPaint,we=o.unstable_now,Qa=o.unstable_getCurrentPriorityLevel,lc=o.unstable_ImmediatePriority,rc=o.unstable_UserBlockingPriority,qi=o.unstable_NormalPriority,yg=o.unstable_LowPriority,uc=o.unstable_IdlePriority,vg=o.log,pg=o.unstable_setDisableYieldValue,Ds=null,ct=null;function ma(e){if(typeof vg=="function"&&pg(e),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(Ds,e)}catch{}}var dt=Math.clz32?Math.clz32:xg,bg=Math.log,_g=Math.LN2;function xg(e){return e>>>=0,e===0?32:31-(bg(e)/_g|0)|0}var Li=256,Hi=262144,Gi=4194304;function Ka(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $i(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var r=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var v=n&134217727;return v!==0?(n=v&~c,n!==0?r=Ka(n):(m&=v,m!==0?r=Ka(m):a||(a=v&~e,a!==0&&(r=Ka(a))))):(v=n&~c,v!==0?r=Ka(v):m!==0?r=Ka(m):a||(a=n&~e,a!==0&&(r=Ka(a)))),r===0?0:t!==0&&t!==r&&(t&c)===0&&(c=r&-r,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:r}function ks(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function wg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oc(){var e=Gi;return Gi<<=1,(Gi&62914560)===0&&(Gi=4194304),e}function mr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ms(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sg(e,t,a,n,r,c){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,w=e.expirationTimes,E=e.hiddenUpdates;for(a=m&~a;0<a;){var R=31-dt(a),k=1<<R;v[R]=0,w[R]=-1;var T=E[R];if(T!==null)for(E[R]=null,R=0;R<T.length;R++){var N=T[R];N!==null&&(N.lane&=-536870913)}a&=~k}n!==0&&cc(e,n,0),c!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~t))}function cc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-dt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function dc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-dt(a),r=1<<n;r&t|e[n]&t&&(e[n]|=t),a&=~r}}function fc(e,t){var a=t&-t;return a=(a&42)!==0?1:gr(a),(a&(e.suspendedLanes|t))!==0?0:a}function gr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function yr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function hc(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Ph(e.type))}function mc(e,t){var a=G.p;try{return G.p=e,t()}finally{G.p=a}}var ga=Math.random().toString(36).slice(2),Ze="__reactFiber$"+ga,tt="__reactProps$"+ga,jn="__reactContainer$"+ga,vr="__reactEvents$"+ga,Cg="__reactListeners$"+ga,jg="__reactHandles$"+ga,gc="__reactResources$"+ga,Bs="__reactMarker$"+ga;function pr(e){delete e[Ze],delete e[tt],delete e[vr],delete e[Cg],delete e[jg]}function An(e){var t=e[Ze];if(t)return t;for(var a=e.parentNode;a;){if(t=a[jn]||a[Ze]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Bh(e);e!==null;){if(a=e[Ze])return a;e=Bh(e)}return t}e=a,a=e.parentNode}return null}function En(e){if(e=e[Ze]||e[jn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function qs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Tn(e){var t=e[gc];return t||(t=e[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Bs]=!0}var yc=new Set,vc={};function Xa(e,t){On(e,t),On(e+"Capture",t)}function On(e,t){for(vc[e]=t,e=0;e<t.length;e++)yc.add(t[e])}var Ag=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pc={},bc={};function Eg(e){return Rs.call(bc,e)?!0:Rs.call(pc,e)?!1:Ag.test(e)?bc[e]=!0:(pc[e]=!0,!1)}function Vi(e,t,a){if(Eg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Yi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Xt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _c(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tg(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(m){a=""+m,c.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function br(e){if(!e._valueTracker){var t=_c(e)?"checked":"value";e._valueTracker=Tg(e,t,""+e[t])}}function xc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=_c(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Qi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Og=/[\n"\\]/g;function wt(e){return e.replace(Og,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function _r(e,t,a,n,r,c,m,v){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xt(t)):e.value!==""+xt(t)&&(e.value=""+xt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?xr(e,m,xt(t)):a!=null?xr(e,m,xt(a)):n!=null&&e.removeAttribute("value"),r==null&&c!=null&&(e.defaultChecked=!!c),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+xt(v):e.removeAttribute("name")}function wc(e,t,a,n,r,c,m,v){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){br(e);return}a=a!=null?""+xt(a):"",t=t!=null?""+xt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}n=n??r,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=v?e.checked:!!n,e.defaultChecked=!!n,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),br(e)}function xr(e,t,a){t==="number"&&Qi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Nn(e,t,a,n){if(e=e.options,t){t={};for(var r=0;r<a.length;r++)t["$"+a[r]]=!0;for(a=0;a<e.length;a++)r=t.hasOwnProperty("$"+e[a].value),e[a].selected!==r&&(e[a].selected=r),r&&n&&(e[a].defaultSelected=!0)}else{for(a=""+xt(a),t=null,r=0;r<e.length;r++){if(e[r].value===a){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Sc(e,t,a){if(t!=null&&(t=""+xt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+xt(a):""}function Cc(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(l(92));if(Ut(n)){if(1<n.length)throw Error(l(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=xt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),br(e)}function Rn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Ng=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jc(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Ng.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ac(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var r in t)n=t[r],t.hasOwnProperty(r)&&a[r]!==n&&jc(e,r,n)}else for(var c in t)t.hasOwnProperty(c)&&jc(e,c,t[c])}function wr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ug=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ki(e){return Ug.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jt(){}var Sr=null;function Cr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Un=null,zn=null;function Ec(e){var t=En(e);if(t&&(e=t.stateNode)){var a=e[tt]||null;e:switch(e=t.stateNode,t.type){case"input":if(_r(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var r=n[tt]||null;if(!r)throw Error(l(90));_r(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&xc(n)}break e;case"textarea":Sc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Nn(e,!!a.multiple,t,!1)}}}var jr=!1;function Tc(e,t,a){if(jr)return e(t,a);jr=!0;try{var n=e(t);return n}finally{if(jr=!1,(Un!==null||zn!==null)&&(zl(),Un&&(t=Un,e=zn,zn=Un=null,Ec(t),e)))for(t=0;t<e.length;t++)Ec(e[t])}}function Ls(e,t){var a=e.stateNode;if(a===null)return null;var n=a[tt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ar=!1;if(Zt)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){Ar=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{Ar=!1}var ya=null,Er=null,Xi=null;function Oc(){if(Xi)return Xi;var e,t=Er,a=t.length,n,r="value"in ya?ya.value:ya.textContent,c=r.length;for(e=0;e<a&&t[e]===r[e];e++);var m=a-e;for(n=1;n<=m&&t[a-n]===r[c-n];n++);return Xi=r.slice(e,1<n?1-n:void 0)}function Ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zi(){return!0}function Nc(){return!1}function at(e){function t(a,n,r,c,m){this._reactName=a,this._targetInst=r,this.type=n,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(c):c[v]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Zi:Nc,this.isPropagationStopped=Nc,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),t}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=at(Ja),Gs=_({},Ja,{view:0,detail:0}),zg=at(Gs),Tr,Or,$s,Ii=_({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$s&&($s&&e.type==="mousemove"?(Tr=e.screenX-$s.screenX,Or=e.screenY-$s.screenY):Or=Tr=0,$s=e),Tr)},movementY:function(e){return"movementY"in e?e.movementY:Or}}),Rc=at(Ii),Dg=_({},Ii,{dataTransfer:0}),kg=at(Dg),Mg=_({},Gs,{relatedTarget:0}),Nr=at(Mg),Bg=_({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),qg=at(Bg),Lg=_({},Ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hg=at(Lg),Gg=_({},Ja,{data:0}),Uc=at(Gg),$g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yg[e])?!!t[e]:!1}function Rr(){return Qg}var Kg=_({},Gs,{key:function(e){if(e.key){var t=$g[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xg=at(Kg),Jg=_({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=at(Jg),Zg=_({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),Wg=at(Zg),Ig=_({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fg=at(Ig),Pg=_({},Ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),e0=at(Pg),t0=_({},Ja,{newState:0,oldState:0}),a0=at(t0),n0=[9,13,27,32],Ur=Zt&&"CompositionEvent"in window,Vs=null;Zt&&"documentMode"in document&&(Vs=document.documentMode);var s0=Zt&&"TextEvent"in window&&!Vs,Dc=Zt&&(!Ur||Vs&&8<Vs&&11>=Vs),kc=" ",Mc=!1;function Bc(e,t){switch(e){case"keyup":return n0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dn=!1;function i0(e,t){switch(e){case"compositionend":return qc(t);case"keypress":return t.which!==32?null:(Mc=!0,kc);case"textInput":return e=t.data,e===kc&&Mc?null:e;default:return null}}function l0(e,t){if(Dn)return e==="compositionend"||!Ur&&Bc(e,t)?(e=Oc(),Xi=Er=ya=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dc&&t.locale!=="ko"?null:t.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!r0[e.type]:t==="textarea"}function Hc(e,t,a,n){Un?zn?zn.push(n):zn=[n]:Un=n,t=Hl(t,"onChange"),0<t.length&&(a=new Wi("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Ys=null,Qs=null;function u0(e){Sh(e,0)}function Fi(e){var t=qs(e);if(xc(t))return e}function Gc(e,t){if(e==="change")return t}var $c=!1;if(Zt){var zr;if(Zt){var Dr="oninput"in document;if(!Dr){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),Dr=typeof Vc.oninput=="function"}zr=Dr}else zr=!1;$c=zr&&(!document.documentMode||9<document.documentMode)}function Yc(){Ys&&(Ys.detachEvent("onpropertychange",Qc),Qs=Ys=null)}function Qc(e){if(e.propertyName==="value"&&Fi(Qs)){var t=[];Hc(t,Qs,e,Cr(e)),Tc(u0,t)}}function o0(e,t,a){e==="focusin"?(Yc(),Ys=t,Qs=a,Ys.attachEvent("onpropertychange",Qc)):e==="focusout"&&Yc()}function c0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fi(Qs)}function d0(e,t){if(e==="click")return Fi(t)}function f0(e,t){if(e==="input"||e==="change")return Fi(t)}function h0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:h0;function Ks(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var r=a[n];if(!Rs.call(t,r)||!ft(e[r],t[r]))return!1}return!0}function Kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var a=Kc(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kc(a)}}function Jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Qi(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Qi(e.document)}return t}function kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var m0=Zt&&"documentMode"in document&&11>=document.documentMode,kn=null,Mr=null,Xs=null,Br=!1;function Wc(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Br||kn==null||kn!==Qi(n)||(n=kn,"selectionStart"in n&&kr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xs&&Ks(Xs,n)||(Xs=n,n=Hl(Mr,"onSelect"),0<n.length&&(t=new Wi("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=kn)))}function Za(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Mn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},qr={},Ic={};Zt&&(Ic=document.createElement("div").style,"AnimationEvent"in window||(delete Mn.animationend.animation,delete Mn.animationiteration.animation,delete Mn.animationstart.animation),"TransitionEvent"in window||delete Mn.transitionend.transition);function Wa(e){if(qr[e])return qr[e];if(!Mn[e])return e;var t=Mn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ic)return qr[e]=t[a];return e}var Fc=Wa("animationend"),Pc=Wa("animationiteration"),ed=Wa("animationstart"),g0=Wa("transitionrun"),y0=Wa("transitionstart"),v0=Wa("transitioncancel"),td=Wa("transitionend"),ad=new Map,Lr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lr.push("scrollEnd");function zt(e,t){ad.set(e,t),Xa(t,[e])}var Pi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},St=[],Bn=0,Hr=0;function el(){for(var e=Bn,t=Hr=Bn=0;t<e;){var a=St[t];St[t++]=null;var n=St[t];St[t++]=null;var r=St[t];St[t++]=null;var c=St[t];if(St[t++]=null,n!==null&&r!==null){var m=n.pending;m===null?r.next=r:(r.next=m.next,m.next=r),n.pending=r}c!==0&&nd(a,r,c)}}function tl(e,t,a,n){St[Bn++]=e,St[Bn++]=t,St[Bn++]=a,St[Bn++]=n,Hr|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Gr(e,t,a,n){return tl(e,t,a,n),al(e)}function Ia(e,t){return tl(e,null,null,t),al(e)}function nd(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var r=!1,c=e.return;c!==null;)c.childLanes|=a,n=c.alternate,n!==null&&(n.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(r=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,r&&t!==null&&(r=31-dt(a),e=c.hiddenUpdates,n=e[r],n===null?e[r]=[t]:n.push(t),t.lane=a|536870912),c):null}function al(e){if(50<gi)throw gi=0,Wu=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qn={};function p0(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,a,n){return new p0(e,t,a,n)}function $r(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wt(e,t){var a=e.alternate;return a===null?(a=ht(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function sd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function nl(e,t,a,n,r,c){var m=0;if(n=e,typeof e=="function")$r(e)&&(m=1);else if(typeof e=="string")m=Sy(e,a,De.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ee:return e=ht(31,a,t,r),e.elementType=Ee,e.lanes=c,e;case D:return Fa(a.children,r,c,t);case M:m=8,r|=24;break;case $:return e=ht(12,a,t,r|2),e.elementType=$,e.lanes=c,e;case P:return e=ht(13,a,t,r),e.elementType=P,e.lanes=c,e;case H:return e=ht(19,a,t,r),e.elementType=H,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:m=10;break e;case L:m=9;break e;case Y:m=11;break e;case ee:m=14;break e;case xe:m=16,n=null;break e}m=29,a=Error(l(130,e===null?"null":typeof e,"")),n=null}return t=ht(m,a,t,r),t.elementType=e,t.type=n,t.lanes=c,t}function Fa(e,t,a,n){return e=ht(7,e,n,t),e.lanes=a,e}function Vr(e,t,a){return e=ht(6,e,null,t),e.lanes=a,e}function id(e){var t=ht(18,null,null,0);return t.stateNode=e,t}function Yr(e,t,a){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ld=new WeakMap;function Ct(e,t){if(typeof e=="object"&&e!==null){var a=ld.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Bi(t)},ld.set(e,t),t)}return{value:e,source:t,stack:Bi(t)}}var Ln=[],Hn=0,sl=null,Js=0,jt=[],At=0,va=null,Lt=1,Ht="";function It(e,t){Ln[Hn++]=Js,Ln[Hn++]=sl,sl=e,Js=t}function rd(e,t,a){jt[At++]=Lt,jt[At++]=Ht,jt[At++]=va,va=e;var n=Lt;e=Ht;var r=32-dt(n)-1;n&=~(1<<r),a+=1;var c=32-dt(t)+r;if(30<c){var m=r-r%5;c=(n&(1<<m)-1).toString(32),n>>=m,r-=m,Lt=1<<32-dt(t)+r|a<<r|n,Ht=c+e}else Lt=1<<c|a<<r|n,Ht=e}function Qr(e){e.return!==null&&(It(e,1),rd(e,1,0))}function Kr(e){for(;e===sl;)sl=Ln[--Hn],Ln[Hn]=null,Js=Ln[--Hn],Ln[Hn]=null;for(;e===va;)va=jt[--At],jt[At]=null,Ht=jt[--At],jt[At]=null,Lt=jt[--At],jt[At]=null}function ud(e,t){jt[At++]=Lt,jt[At++]=Ht,jt[At++]=va,Lt=t.id,Ht=t.overflow,va=e}var We=null,Te=null,ue=!1,pa=null,Et=!1,Xr=Error(l(519));function ba(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zs(Ct(t,e)),Xr}function od(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ze]=e,t[tt]=n,a){case"dialog":ie("cancel",t),ie("close",t);break;case"iframe":case"object":case"embed":ie("load",t);break;case"video":case"audio":for(a=0;a<vi.length;a++)ie(vi[a],t);break;case"source":ie("error",t);break;case"img":case"image":case"link":ie("error",t),ie("load",t);break;case"details":ie("toggle",t);break;case"input":ie("invalid",t),wc(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ie("invalid",t);break;case"textarea":ie("invalid",t),Cc(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Eh(t.textContent,a)?(n.popover!=null&&(ie("beforetoggle",t),ie("toggle",t)),n.onScroll!=null&&ie("scroll",t),n.onScrollEnd!=null&&ie("scrollend",t),n.onClick!=null&&(t.onclick=Jt),t=!0):t=!1,t||ba(e,!0)}function cd(e){for(We=e.return;We;)switch(We.tag){case 5:case 31:case 13:Et=!1;return;case 27:case 3:Et=!0;return;default:We=We.return}}function Gn(e){if(e!==We)return!1;if(!ue)return cd(e),ue=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||fo(e.type,e.memoizedProps)),a=!a),a&&Te&&ba(e),cd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Te=Mh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Te=Mh(e)}else t===27?(t=Te,za(e.type)?(e=vo,vo=null,Te=e):Te=t):Te=We?Ot(e.stateNode.nextSibling):null;return!0}function Pa(){Te=We=null,ue=!1}function Jr(){var e=pa;return e!==null&&(lt===null?lt=e:lt.push.apply(lt,e),pa=null),e}function Zs(e){pa===null?pa=[e]:pa.push(e)}var Zr=Qe(null),en=null,Ft=null;function _a(e,t,a){oe(Zr,t._currentValue),t._currentValue=a}function Pt(e){e._currentValue=Zr.current,Ce(Zr)}function Wr(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Ir(e,t,a,n){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var c=r.dependencies;if(c!==null){var m=r.child;c=c.firstContext;e:for(;c!==null;){var v=c;c=r;for(var w=0;w<t.length;w++)if(v.context===t[w]){c.lanes|=a,v=c.alternate,v!==null&&(v.lanes|=a),Wr(c.return,a,e),n||(m=null);break e}c=v.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(l(341));m.lanes|=a,c=m.alternate,c!==null&&(c.lanes|=a),Wr(m,a,e),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===e){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function $n(e,t,a,n){e=null;for(var r=t,c=!1;r!==null;){if(!c){if((r.flags&524288)!==0)c=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(l(387));if(m=m.memoizedProps,m!==null){var v=r.type;ft(r.pendingProps.value,m.value)||(e!==null?e.push(v):e=[v])}}else if(r===fa.current){if(m=r.alternate,m===null)throw Error(l(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(wi):e=[wi])}r=r.return}e!==null&&Ir(t,e,a,n),t.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function tn(e){en=e,Ft=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ie(e){return dd(en,e)}function ll(e,t){return en===null&&tn(e),dd(e,t)}function dd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ft===null){if(e===null)throw Error(l(308));Ft=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ft=Ft.next=t;return a}var b0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},_0=o.unstable_scheduleCallback,x0=o.unstable_NormalPriority,Be={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new b0,data:new Map,refCount:0}}function Ws(e){e.refCount--,e.refCount===0&&_0(x0,function(){e.controller.abort()})}var Is=null,Pr=0,Vn=0,Yn=null;function w0(e,t){if(Is===null){var a=Is=[];Pr=0,Vn=ao(),Yn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Pr++,t.then(fd,fd),t}function fd(){if(--Pr===0&&Is!==null){Yn!==null&&(Yn.status="fulfilled");var e=Is;Is=null,Vn=0,Yn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function S0(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(r){a.push(r)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var r=0;r<a.length;r++)(0,a[r])(t)},function(r){for(n.status="rejected",n.reason=r,r=0;r<a.length;r++)(0,a[r])(void 0)}),n}var hd=U.S;U.S=function(e,t){If=we(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&w0(e,t),hd!==null&&hd(e,t)};var an=Qe(null);function eu(){var e=an.current;return e!==null?e:Se.pooledCache}function rl(e,t){t===null?oe(an,an.current):oe(an,t.pool)}function md(){var e=eu();return e===null?null:{parent:Be._currentValue,pool:e}}var Qn=Error(l(460)),tu=Error(l(474)),ul=Error(l(542)),ol={then:function(){}};function gd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function yd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Jt,Jt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,pd(e),e;default:if(typeof t.status=="string")t.then(Jt,Jt);else{if(e=Se,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=n}},function(n){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,pd(e),e}throw sn=t,Qn}}function nn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(sn=a,Qn):a}}var sn=null;function vd(){if(sn===null)throw Error(l(459));var e=sn;return sn=null,e}function pd(e){if(e===Qn||e===ul)throw Error(l(483))}var Kn=null,Fs=0;function cl(e){var t=Fs;return Fs+=1,Kn===null&&(Kn=[]),yd(Kn,e,t)}function Ps(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===x?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function bd(e){function t(j,S){if(e){var A=j.deletions;A===null?(j.deletions=[S],j.flags|=16):A.push(S)}}function a(j,S){if(!e)return null;for(;S!==null;)t(j,S),S=S.sibling;return null}function n(j){for(var S=new Map;j!==null;)j.key!==null?S.set(j.key,j):S.set(j.index,j),j=j.sibling;return S}function r(j,S){return j=Wt(j,S),j.index=0,j.sibling=null,j}function c(j,S,A){return j.index=A,e?(A=j.alternate,A!==null?(A=A.index,A<S?(j.flags|=67108866,S):A):(j.flags|=67108866,S)):(j.flags|=1048576,S)}function m(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function v(j,S,A,z){return S===null||S.tag!==6?(S=Vr(A,j.mode,z),S.return=j,S):(S=r(S,A),S.return=j,S)}function w(j,S,A,z){var K=A.type;return K===D?R(j,S,A.props.children,z,A.key):S!==null&&(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===xe&&nn(K)===S.type)?(S=r(S,A.props),Ps(S,A),S.return=j,S):(S=nl(A.type,A.key,A.props,null,j.mode,z),Ps(S,A),S.return=j,S)}function E(j,S,A,z){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=Yr(A,j.mode,z),S.return=j,S):(S=r(S,A.children||[]),S.return=j,S)}function R(j,S,A,z,K){return S===null||S.tag!==7?(S=Fa(A,j.mode,z,K),S.return=j,S):(S=r(S,A),S.return=j,S)}function k(j,S,A){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=Vr(""+S,j.mode,A),S.return=j,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case C:return A=nl(S.type,S.key,S.props,null,j.mode,A),Ps(A,S),A.return=j,A;case O:return S=Yr(S,j.mode,A),S.return=j,S;case xe:return S=nn(S),k(j,S,A)}if(Ut(S)||Re(S))return S=Fa(S,j.mode,A,null),S.return=j,S;if(typeof S.then=="function")return k(j,cl(S),A);if(S.$$typeof===q)return k(j,ll(j,S),A);dl(j,S)}return null}function T(j,S,A,z){var K=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return K!==null?null:v(j,S,""+A,z);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case C:return A.key===K?w(j,S,A,z):null;case O:return A.key===K?E(j,S,A,z):null;case xe:return A=nn(A),T(j,S,A,z)}if(Ut(A)||Re(A))return K!==null?null:R(j,S,A,z,null);if(typeof A.then=="function")return T(j,S,cl(A),z);if(A.$$typeof===q)return T(j,S,ll(j,A),z);dl(j,A)}return null}function N(j,S,A,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return j=j.get(A)||null,v(S,j,""+z,K);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return j=j.get(z.key===null?A:z.key)||null,w(S,j,z,K);case O:return j=j.get(z.key===null?A:z.key)||null,E(S,j,z,K);case xe:return z=nn(z),N(j,S,A,z,K)}if(Ut(z)||Re(z))return j=j.get(A)||null,R(S,j,z,K,null);if(typeof z.then=="function")return N(j,S,A,cl(z),K);if(z.$$typeof===q)return N(j,S,A,ll(S,z),K);dl(S,z)}return null}function V(j,S,A,z){for(var K=null,ce=null,Q=S,ne=S=0,re=null;Q!==null&&ne<A.length;ne++){Q.index>ne?(re=Q,Q=null):re=Q.sibling;var de=T(j,Q,A[ne],z);if(de===null){Q===null&&(Q=re);break}e&&Q&&de.alternate===null&&t(j,Q),S=c(de,S,ne),ce===null?K=de:ce.sibling=de,ce=de,Q=re}if(ne===A.length)return a(j,Q),ue&&It(j,ne),K;if(Q===null){for(;ne<A.length;ne++)Q=k(j,A[ne],z),Q!==null&&(S=c(Q,S,ne),ce===null?K=Q:ce.sibling=Q,ce=Q);return ue&&It(j,ne),K}for(Q=n(Q);ne<A.length;ne++)re=N(Q,j,ne,A[ne],z),re!==null&&(e&&re.alternate!==null&&Q.delete(re.key===null?ne:re.key),S=c(re,S,ne),ce===null?K=re:ce.sibling=re,ce=re);return e&&Q.forEach(function(qa){return t(j,qa)}),ue&&It(j,ne),K}function Z(j,S,A,z){if(A==null)throw Error(l(151));for(var K=null,ce=null,Q=S,ne=S=0,re=null,de=A.next();Q!==null&&!de.done;ne++,de=A.next()){Q.index>ne?(re=Q,Q=null):re=Q.sibling;var qa=T(j,Q,de.value,z);if(qa===null){Q===null&&(Q=re);break}e&&Q&&qa.alternate===null&&t(j,Q),S=c(qa,S,ne),ce===null?K=qa:ce.sibling=qa,ce=qa,Q=re}if(de.done)return a(j,Q),ue&&It(j,ne),K;if(Q===null){for(;!de.done;ne++,de=A.next())de=k(j,de.value,z),de!==null&&(S=c(de,S,ne),ce===null?K=de:ce.sibling=de,ce=de);return ue&&It(j,ne),K}for(Q=n(Q);!de.done;ne++,de=A.next())de=N(Q,j,ne,de.value,z),de!==null&&(e&&de.alternate!==null&&Q.delete(de.key===null?ne:de.key),S=c(de,S,ne),ce===null?K=de:ce.sibling=de,ce=de);return e&&Q.forEach(function(Dy){return t(j,Dy)}),ue&&It(j,ne),K}function be(j,S,A,z){if(typeof A=="object"&&A!==null&&A.type===D&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case C:e:{for(var K=A.key;S!==null;){if(S.key===K){if(K=A.type,K===D){if(S.tag===7){a(j,S.sibling),z=r(S,A.props.children),z.return=j,j=z;break e}}else if(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===xe&&nn(K)===S.type){a(j,S.sibling),z=r(S,A.props),Ps(z,A),z.return=j,j=z;break e}a(j,S);break}else t(j,S);S=S.sibling}A.type===D?(z=Fa(A.props.children,j.mode,z,A.key),z.return=j,j=z):(z=nl(A.type,A.key,A.props,null,j.mode,z),Ps(z,A),z.return=j,j=z)}return m(j);case O:e:{for(K=A.key;S!==null;){if(S.key===K)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){a(j,S.sibling),z=r(S,A.children||[]),z.return=j,j=z;break e}else{a(j,S);break}else t(j,S);S=S.sibling}z=Yr(A,j.mode,z),z.return=j,j=z}return m(j);case xe:return A=nn(A),be(j,S,A,z)}if(Ut(A))return V(j,S,A,z);if(Re(A)){if(K=Re(A),typeof K!="function")throw Error(l(150));return A=K.call(A),Z(j,S,A,z)}if(typeof A.then=="function")return be(j,S,cl(A),z);if(A.$$typeof===q)return be(j,S,ll(j,A),z);dl(j,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,S!==null&&S.tag===6?(a(j,S.sibling),z=r(S,A),z.return=j,j=z):(a(j,S),z=Vr(A,j.mode,z),z.return=j,j=z),m(j)):a(j,S)}return function(j,S,A,z){try{Fs=0;var K=be(j,S,A,z);return Kn=null,K}catch(Q){if(Q===Qn||Q===ul)throw Q;var ce=ht(29,Q,null,j.mode);return ce.lanes=z,ce.return=j,ce}finally{}}}var ln=bd(!0),_d=bd(!1),xa=!1;function au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sa(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(fe&2)!==0){var r=n.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t,t=al(e),nd(e,null,a),t}return tl(e,n,t,a),al(e)}function ei(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,dc(e,a)}}function su(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var r=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?r=c=m:c=c.next=m,a=a.next}while(a!==null);c===null?r=c=t:c=c.next=t}else r=c=t;a={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var iu=!1;function ti(){if(iu){var e=Yn;if(e!==null)throw e}}function ai(e,t,a,n){iu=!1;var r=e.updateQueue;xa=!1;var c=r.firstBaseUpdate,m=r.lastBaseUpdate,v=r.shared.pending;if(v!==null){r.shared.pending=null;var w=v,E=w.next;w.next=null,m===null?c=E:m.next=E,m=w;var R=e.alternate;R!==null&&(R=R.updateQueue,v=R.lastBaseUpdate,v!==m&&(v===null?R.firstBaseUpdate=E:v.next=E,R.lastBaseUpdate=w))}if(c!==null){var k=r.baseState;m=0,R=E=w=null,v=c;do{var T=v.lane&-536870913,N=T!==v.lane;if(N?(le&T)===T:(n&T)===T){T!==0&&T===Vn&&(iu=!0),R!==null&&(R=R.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var V=e,Z=v;T=t;var be=a;switch(Z.tag){case 1:if(V=Z.payload,typeof V=="function"){k=V.call(be,k,T);break e}k=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=Z.payload,T=typeof V=="function"?V.call(be,k,T):V,T==null)break e;k=_({},k,T);break e;case 2:xa=!0}}T=v.callback,T!==null&&(e.flags|=64,N&&(e.flags|=8192),N=r.callbacks,N===null?r.callbacks=[T]:N.push(T))}else N={lane:T,tag:v.tag,payload:v.payload,callback:v.callback,next:null},R===null?(E=R=N,w=k):R=R.next=N,m|=T;if(v=v.next,v===null){if(v=r.shared.pending,v===null)break;N=v,v=N.next,N.next=null,r.lastBaseUpdate=N,r.shared.pending=null}}while(!0);R===null&&(w=k),r.baseState=w,r.firstBaseUpdate=E,r.lastBaseUpdate=R,c===null&&(r.shared.lanes=0),Ta|=m,e.lanes=m,e.memoizedState=k}}function xd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function wd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)xd(a[e],t)}var Xn=Qe(null),fl=Qe(0);function Sd(e,t){e=ua,oe(fl,e),oe(Xn,t),ua=e|t.baseLanes}function lu(){oe(fl,ua),oe(Xn,Xn.current)}function ru(){ua=fl.current,Ce(Xn),Ce(fl)}var mt=Qe(null),Tt=null;function Ca(e){var t=e.alternate;oe(ke,ke.current&1),oe(mt,e),Tt===null&&(t===null||Xn.current!==null||t.memoizedState!==null)&&(Tt=e)}function uu(e){oe(ke,ke.current),oe(mt,e),Tt===null&&(Tt=e)}function Cd(e){e.tag===22?(oe(ke,ke.current),oe(mt,e),Tt===null&&(Tt=e)):ja()}function ja(){oe(ke,ke.current),oe(mt,mt.current)}function gt(e){Ce(mt),Tt===e&&(Tt=null),Ce(ke)}var ke=Qe(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||go(a)||yo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=0,ae=null,ve=null,qe=null,ml=!1,Jn=!1,rn=!1,gl=0,ni=0,Zn=null,C0=0;function Ue(){throw Error(l(321))}function ou(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ft(e[a],t[a]))return!1;return!0}function cu(e,t,a,n,r,c){return ea=c,ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?uf:ju,rn=!1,c=a(n,r),rn=!1,Jn&&(c=Ad(t,a,n,r)),jd(e),c}function jd(e){U.H=li;var t=ve!==null&&ve.next!==null;if(ea=0,qe=ve=ae=null,ml=!1,ni=0,Zn=null,t)throw Error(l(300));e===null||Le||(e=e.dependencies,e!==null&&il(e)&&(Le=!0))}function Ad(e,t,a,n){ae=e;var r=0;do{if(Jn&&(Zn=null),ni=0,Jn=!1,25<=r)throw Error(l(301));if(r+=1,qe=ve=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}U.H=of,c=t(a,n)}while(Jn);return c}function j0(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?si(t):t,e=e.useState()[0],(ve!==null?ve.memoizedState:null)!==e&&(ae.flags|=1024),t}function du(){var e=gl!==0;return gl=0,e}function fu(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function hu(e){if(ml){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ml=!1}ea=0,qe=ve=ae=null,Jn=!1,ni=gl=0,Zn=null}function et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?ae.memoizedState=qe=e:qe=qe.next=e,qe}function Me(){if(ve===null){var e=ae.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=qe===null?ae.memoizedState:qe.next;if(t!==null)qe=t,ve=e;else{if(e===null)throw ae.alternate===null?Error(l(467)):Error(l(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},qe===null?ae.memoizedState=qe=e:qe=qe.next=e}return qe}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function si(e){var t=ni;return ni+=1,Zn===null&&(Zn=[]),e=yd(Zn,e,t),t=ae,(qe===null?t.memoizedState:qe.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?uf:ju),e}function vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return si(e);if(e.$$typeof===q)return Ie(e)}throw Error(l(438,String(e)))}function mu(e){var t=null,a=ae.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=ae.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=yl(),ae.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Rt;return t.index++,a}function ta(e,t){return typeof t=="function"?t(e):t}function pl(e){var t=Me();return gu(t,ve,e)}function gu(e,t,a){var n=e.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=a;var r=e.baseQueue,c=n.pending;if(c!==null){if(r!==null){var m=r.next;r.next=c.next,c.next=m}t.baseQueue=r=c,n.pending=null}if(c=e.baseState,r===null)e.memoizedState=c;else{t=r.next;var v=m=null,w=null,E=t,R=!1;do{var k=E.lane&-536870913;if(k!==E.lane?(le&k)===k:(ea&k)===k){var T=E.revertLane;if(T===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),k===Vn&&(R=!0);else if((ea&T)===T){E=E.next,T===Vn&&(R=!0);continue}else k={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},w===null?(v=w=k,m=c):w=w.next=k,ae.lanes|=T,Ta|=T;k=E.action,rn&&a(c,k),c=E.hasEagerState?E.eagerState:a(c,k)}else T={lane:k,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},w===null?(v=w=T,m=c):w=w.next=T,ae.lanes|=k,Ta|=k;E=E.next}while(E!==null&&E!==t);if(w===null?m=c:w.next=v,!ft(c,e.memoizedState)&&(Le=!0,R&&(a=Yn,a!==null)))throw a;e.memoizedState=c,e.baseState=m,e.baseQueue=w,n.lastRenderedState=c}return r===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function yu(e){var t=Me(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var n=a.dispatch,r=a.pending,c=t.memoizedState;if(r!==null){a.pending=null;var m=r=r.next;do c=e(c,m.action),m=m.next;while(m!==r);ft(c,t.memoizedState)||(Le=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,n]}function Ed(e,t,a){var n=ae,r=Me(),c=ue;if(c){if(a===void 0)throw Error(l(407));a=a()}else a=t();var m=!ft((ve||r).memoizedState,a);if(m&&(r.memoizedState=a,Le=!0),r=r.queue,bu(Nd.bind(null,n,r,e),[e]),r.getSnapshot!==t||m||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Wn(9,{destroy:void 0},Od.bind(null,n,r,a,t),null),Se===null)throw Error(l(349));c||(ea&127)!==0||Td(n,t,a)}return a}function Td(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ae.updateQueue,t===null?(t=yl(),ae.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Od(e,t,a,n){t.value=a,t.getSnapshot=n,Rd(t)&&Ud(e)}function Nd(e,t,a){return a(function(){Rd(t)&&Ud(e)})}function Rd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ft(e,a)}catch{return!0}}function Ud(e){var t=Ia(e,2);t!==null&&rt(t,e,2)}function vu(e){var t=et();if(typeof e=="function"){var a=e;if(e=a(),rn){ma(!0);try{a()}finally{ma(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:e},t}function zd(e,t,a,n){return e.baseState=a,gu(e,ve,typeof n=="function"?n:ta)}function A0(e,t,a,n,r){if(xl(e))throw Error(l(485));if(e=t.action,e!==null){var c={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};U.T!==null?a(!0):c.isTransition=!1,n(c),a=t.pending,a===null?(c.next=t.pending=c,Dd(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Dd(e,t){var a=t.action,n=t.payload,r=e.state;if(t.isTransition){var c=U.T,m={};U.T=m;try{var v=a(r,n),w=U.S;w!==null&&w(m,v),kd(e,t,v)}catch(E){pu(e,t,E)}finally{c!==null&&m.types!==null&&(c.types=m.types),U.T=c}}else try{c=a(r,n),kd(e,t,c)}catch(E){pu(e,t,E)}}function kd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Md(e,t,n)},function(n){return pu(e,t,n)}):Md(e,t,a)}function Md(e,t,a){t.status="fulfilled",t.value=a,Bd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Dd(e,a)))}function pu(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Bd(t),t=t.next;while(t!==n)}e.action=null}function Bd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qd(e,t){return t}function Ld(e,t){if(ue){var a=Se.formState;if(a!==null){e:{var n=ae;if(ue){if(Te){t:{for(var r=Te,c=Et;r.nodeType!==8;){if(!c){r=null;break t}if(r=Ot(r.nextSibling),r===null){r=null;break t}}c=r.data,r=c==="F!"||c==="F"?r:null}if(r){Te=Ot(r.nextSibling),n=r.data==="F!";break e}}ba(n)}n=!1}n&&(t=a[0])}}return a=et(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:t},a.queue=n,a=sf.bind(null,ae,n),n.dispatch=a,n=vu(!1),c=Cu.bind(null,ae,!1,n.queue),n=et(),r={state:t,dispatch:null,action:e,pending:null},n.queue=r,a=A0.bind(null,ae,r,c,a),r.dispatch=a,n.memoizedState=e,[t,a,!1]}function Hd(e){var t=Me();return Gd(t,ve,e)}function Gd(e,t,a){if(t=gu(e,t,qd)[0],e=pl(ta)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=si(t)}catch(m){throw m===Qn?ul:m}else n=t;t=Me();var r=t.queue,c=r.dispatch;return a!==t.memoizedState&&(ae.flags|=2048,Wn(9,{destroy:void 0},E0.bind(null,r,a),null)),[n,c,e]}function E0(e,t){e.action=t}function $d(e){var t=Me(),a=ve;if(a!==null)return Gd(t,a,e);Me(),t=t.memoizedState,a=Me();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Wn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=ae.updateQueue,t===null&&(t=yl(),ae.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Vd(){return Me().memoizedState}function bl(e,t,a,n){var r=et();ae.flags|=e,r.memoizedState=Wn(1|t,{destroy:void 0},a,n===void 0?null:n)}function _l(e,t,a,n){var r=Me();n=n===void 0?null:n;var c=r.memoizedState.inst;ve!==null&&n!==null&&ou(n,ve.memoizedState.deps)?r.memoizedState=Wn(t,c,a,n):(ae.flags|=e,r.memoizedState=Wn(1|t,c,a,n))}function Yd(e,t){bl(8390656,8,e,t)}function bu(e,t){_l(2048,8,e,t)}function T0(e){ae.flags|=4;var t=ae.updateQueue;if(t===null)t=yl(),ae.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Qd(e){var t=Me().memoizedState;return T0({ref:t,nextImpl:e}),function(){if((fe&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Kd(e,t){return _l(4,2,e,t)}function Xd(e,t){return _l(4,4,e,t)}function Jd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zd(e,t,a){a=a!=null?a.concat([e]):null,_l(4,4,Jd.bind(null,t,e),a)}function _u(){}function Wd(e,t){var a=Me();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&ou(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Id(e,t){var a=Me();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&ou(t,n[1]))return n[0];if(n=e(),rn){ma(!0);try{e()}finally{ma(!1)}}return a.memoizedState=[n,t],n}function xu(e,t,a){return a===void 0||(ea&1073741824)!==0&&(le&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Pf(),ae.lanes|=e,Ta|=e,a)}function Fd(e,t,a,n){return ft(a,t)?a:Xn.current!==null?(e=xu(e,a,n),ft(e,t)||(Le=!0),e):(ea&42)===0||(ea&1073741824)!==0&&(le&261930)===0?(Le=!0,e.memoizedState=a):(e=Pf(),ae.lanes|=e,Ta|=e,t)}function Pd(e,t,a,n,r){var c=G.p;G.p=c!==0&&8>c?c:8;var m=U.T,v={};U.T=v,Cu(e,!1,t,a);try{var w=r(),E=U.S;if(E!==null&&E(v,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var R=S0(w,n);ii(e,t,R,pt(e))}else ii(e,t,n,pt(e))}catch(k){ii(e,t,{then:function(){},status:"rejected",reason:k},pt())}finally{G.p=c,m!==null&&v.types!==null&&(m.types=v.types),U.T=m}}function O0(){}function wu(e,t,a,n){if(e.tag!==5)throw Error(l(476));var r=ef(e).queue;Pd(e,r,t,I,a===null?O0:function(){return tf(e),a(n)})}function ef(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:I},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function tf(e){var t=ef(e);t.next===null&&(t=e.alternate.memoizedState),ii(e,t.next.queue,{},pt())}function Su(){return Ie(wi)}function af(){return Me().memoizedState}function nf(){return Me().memoizedState}function N0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=pt();e=wa(a);var n=Sa(t,e,a);n!==null&&(rt(n,t,a),ei(n,t,a)),t={cache:Fr()},e.payload=t;return}t=t.return}}function R0(e,t,a){var n=pt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xl(e)?lf(t,a):(a=Gr(e,t,a,n),a!==null&&(rt(a,e,n),rf(a,t,n)))}function sf(e,t,a){var n=pt();ii(e,t,a,n)}function ii(e,t,a,n){var r={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xl(e))lf(t,r);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var m=t.lastRenderedState,v=c(m,a);if(r.hasEagerState=!0,r.eagerState=v,ft(v,m))return tl(e,t,r,0),Se===null&&el(),!1}catch{}finally{}if(a=Gr(e,t,r,n),a!==null)return rt(a,e,n),rf(a,t,n),!0}return!1}function Cu(e,t,a,n){if(n={lane:2,revertLane:ao(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},xl(e)){if(t)throw Error(l(479))}else t=Gr(e,a,n,2),t!==null&&rt(t,e,2)}function xl(e){var t=e.alternate;return e===ae||t!==null&&t===ae}function lf(e,t){Jn=ml=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function rf(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,dc(e,a)}}var li={readContext:Ie,use:vl,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};li.useEffectEvent=Ue;var uf={readContext:Ie,use:vl,useCallback:function(e,t){return et().memoizedState=[e,t===void 0?null:t],e},useContext:Ie,useEffect:Yd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,bl(4194308,4,Jd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){bl(4,2,e,t)},useMemo:function(e,t){var a=et();t=t===void 0?null:t;var n=e();if(rn){ma(!0);try{e()}finally{ma(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=et();if(a!==void 0){var r=a(t);if(rn){ma(!0);try{a(t)}finally{ma(!1)}}}else r=t;return n.memoizedState=n.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=R0.bind(null,ae,e),[n.memoizedState,e]},useRef:function(e){var t=et();return e={current:e},t.memoizedState=e},useState:function(e){e=vu(e);var t=e.queue,a=sf.bind(null,ae,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:_u,useDeferredValue:function(e,t){var a=et();return xu(a,e,t)},useTransition:function(){var e=vu(!1);return e=Pd.bind(null,ae,e.queue,!0,!1),et().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=ae,r=et();if(ue){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),Se===null)throw Error(l(349));(le&127)!==0||Td(n,t,a)}r.memoizedState=a;var c={value:a,getSnapshot:t};return r.queue=c,Yd(Nd.bind(null,n,c,e),[e]),n.flags|=2048,Wn(9,{destroy:void 0},Od.bind(null,n,c,a,t),null),a},useId:function(){var e=et(),t=Se.identifierPrefix;if(ue){var a=Ht,n=Lt;a=(n&~(1<<32-dt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=gl++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=C0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Su,useFormState:Ld,useActionState:Ld,useOptimistic:function(e){var t=et();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Cu.bind(null,ae,!0,a),a.dispatch=t,[e,t]},useMemoCache:mu,useCacheRefresh:function(){return et().memoizedState=N0.bind(null,ae)},useEffectEvent:function(e){var t=et(),a={impl:e};return t.memoizedState=a,function(){if((fe&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},ju={readContext:Ie,use:vl,useCallback:Wd,useContext:Ie,useEffect:bu,useImperativeHandle:Zd,useInsertionEffect:Kd,useLayoutEffect:Xd,useMemo:Id,useReducer:pl,useRef:Vd,useState:function(){return pl(ta)},useDebugValue:_u,useDeferredValue:function(e,t){var a=Me();return Fd(a,ve.memoizedState,e,t)},useTransition:function(){var e=pl(ta)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:si(e),t]},useSyncExternalStore:Ed,useId:af,useHostTransitionStatus:Su,useFormState:Hd,useActionState:Hd,useOptimistic:function(e,t){var a=Me();return zd(a,ve,e,t)},useMemoCache:mu,useCacheRefresh:nf};ju.useEffectEvent=Qd;var of={readContext:Ie,use:vl,useCallback:Wd,useContext:Ie,useEffect:bu,useImperativeHandle:Zd,useInsertionEffect:Kd,useLayoutEffect:Xd,useMemo:Id,useReducer:yu,useRef:Vd,useState:function(){return yu(ta)},useDebugValue:_u,useDeferredValue:function(e,t){var a=Me();return ve===null?xu(a,e,t):Fd(a,ve.memoizedState,e,t)},useTransition:function(){var e=yu(ta)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:si(e),t]},useSyncExternalStore:Ed,useId:af,useHostTransitionStatus:Su,useFormState:$d,useActionState:$d,useOptimistic:function(e,t){var a=Me();return ve!==null?zd(a,ve,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:mu,useCacheRefresh:nf};of.useEffectEvent=Qd;function Au(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:_({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Eu={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=pt(),r=wa(n);r.payload=t,a!=null&&(r.callback=a),t=Sa(e,r,n),t!==null&&(rt(t,e,n),ei(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=pt(),r=wa(n);r.tag=1,r.payload=t,a!=null&&(r.callback=a),t=Sa(e,r,n),t!==null&&(rt(t,e,n),ei(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=pt(),n=wa(a);n.tag=2,t!=null&&(n.callback=t),t=Sa(e,n,a),t!==null&&(rt(t,e,a),ei(t,e,a))}};function cf(e,t,a,n,r,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,m):t.prototype&&t.prototype.isPureReactComponent?!Ks(a,n)||!Ks(r,c):!0}function df(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Eu.enqueueReplaceState(t,t.state,null)}function un(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=_({},a));for(var r in e)a[r]===void 0&&(a[r]=e[r])}return a}function ff(e){Pi(e)}function hf(e){console.error(e)}function mf(e){Pi(e)}function wl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function gf(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Tu(e,t,a){return a=wa(a),a.tag=3,a.payload={element:null},a.callback=function(){wl(e,t)},a}function yf(e){return e=wa(e),e.tag=3,e}function vf(e,t,a,n){var r=a.type.getDerivedStateFromError;if(typeof r=="function"){var c=n.value;e.payload=function(){return r(c)},e.callback=function(){gf(t,a,n)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){gf(t,a,n),typeof r!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})})}function U0(e,t,a,n,r){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&$n(t,a,r,!0),a=mt.current,a!==null){switch(a.tag){case 31:case 13:return Tt===null?Dl():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=r,n===ol?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),Pu(e,n,r)),!1;case 22:return a.flags|=65536,n===ol?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),Pu(e,n,r)),!1}throw Error(l(435,a.tag))}return Pu(e,n,r),Dl(),!1}if(ue)return t=mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,n!==Xr&&(e=Error(l(422),{cause:n}),Zs(Ct(e,a)))):(n!==Xr&&(t=Error(l(423),{cause:n}),Zs(Ct(t,a))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,n=Ct(n,a),r=Tu(e.stateNode,n,r),su(e,r),ze!==4&&(ze=2)),!1;var c=Error(l(520),{cause:n});if(c=Ct(c,a),mi===null?mi=[c]:mi.push(c),ze!==4&&(ze=2),t===null)return!0;n=Ct(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=r&-r,a.lanes|=e,e=Tu(a.stateNode,n,e),su(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Oa===null||!Oa.has(c))))return a.flags|=65536,r&=-r,a.lanes|=r,r=yf(r),vf(r,e,a,n),su(a,r),!1}a=a.return}while(a!==null);return!1}var Ou=Error(l(461)),Le=!1;function Fe(e,t,a,n){t.child=e===null?_d(t,null,a,n):ln(t,e.child,a,n)}function pf(e,t,a,n,r){a=a.render;var c=t.ref;if("ref"in n){var m={};for(var v in n)v!=="ref"&&(m[v]=n[v])}else m=n;return tn(t),n=cu(e,t,a,m,c,r),v=du(),e!==null&&!Le?(fu(e,t,r),aa(e,t,r)):(ue&&v&&Qr(t),t.flags|=1,Fe(e,t,n,r),t.child)}function bf(e,t,a,n,r){if(e===null){var c=a.type;return typeof c=="function"&&!$r(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,_f(e,t,c,n,r)):(e=nl(a.type,null,n,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Bu(e,r)){var m=c.memoizedProps;if(a=a.compare,a=a!==null?a:Ks,a(m,n)&&e.ref===t.ref)return aa(e,t,r)}return t.flags|=1,e=Wt(c,n),e.ref=t.ref,e.return=t,t.child=e}function _f(e,t,a,n,r){if(e!==null){var c=e.memoizedProps;if(Ks(c,n)&&e.ref===t.ref)if(Le=!1,t.pendingProps=n=c,Bu(e,r))(e.flags&131072)!==0&&(Le=!0);else return t.lanes=e.lanes,aa(e,t,r)}return Nu(e,t,a,n,r)}function xf(e,t,a,n){var r=n.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(n=t.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;n=r&~c}else n=0,t.child=null;return wf(e,t,c,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&rl(t,c!==null?c.cachePool:null),c!==null?Sd(t,c):lu(),Cd(t);else return n=t.lanes=536870912,wf(e,t,c!==null?c.baseLanes|a:a,a,n)}else c!==null?(rl(t,c.cachePool),Sd(t,c),ja(),t.memoizedState=null):(e!==null&&rl(t,null),lu(),ja());return Fe(e,t,r,a),t.child}function ri(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function wf(e,t,a,n,r){var c=eu();return c=c===null?null:{parent:Be._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&rl(t,null),lu(),Cd(t),e!==null&&$n(e,t,n,!0),t.childLanes=r,null}function Sl(e,t){return t=jl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Sf(e,t,a){return ln(t,e.child,null,a),e=Sl(t,t.pendingProps),e.flags|=2,gt(t),t.memoizedState=null,e}function z0(e,t,a){var n=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ue){if(n.mode==="hidden")return e=Sl(t,n),t.lanes=536870912,ri(null,e);if(uu(t),(e=Te)?(e=kh(e,Et),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Lt,overflow:Ht}:null,retryLane:536870912,hydrationErrors:null},a=id(e),a.return=t,t.child=a,We=t,Te=null)):e=null,e===null)throw ba(t);return t.lanes=536870912,null}return Sl(t,n)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(uu(t),r)if(t.flags&256)t.flags&=-257,t=Sf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Le||$n(e,t,a,!1),r=(a&e.childLanes)!==0,Le||r){if(n=Se,n!==null&&(m=fc(n,a),m!==0&&m!==c.retryLane))throw c.retryLane=m,Ia(e,m),rt(n,e,m),Ou;Dl(),t=Sf(e,t,a)}else e=c.treeContext,Te=Ot(m.nextSibling),We=t,ue=!0,pa=null,Et=!1,e!==null&&ud(t,e),t=Sl(t,n),t.flags|=4096;return t}return e=Wt(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Cl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Nu(e,t,a,n,r){return tn(t),a=cu(e,t,a,n,void 0,r),n=du(),e!==null&&!Le?(fu(e,t,r),aa(e,t,r)):(ue&&n&&Qr(t),t.flags|=1,Fe(e,t,a,r),t.child)}function Cf(e,t,a,n,r,c){return tn(t),t.updateQueue=null,a=Ad(t,n,a,r),jd(e),n=du(),e!==null&&!Le?(fu(e,t,c),aa(e,t,c)):(ue&&n&&Qr(t),t.flags|=1,Fe(e,t,a,c),t.child)}function jf(e,t,a,n,r){if(tn(t),t.stateNode===null){var c=qn,m=a.contextType;typeof m=="object"&&m!==null&&(c=Ie(m)),c=new a(n,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Eu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=n,c.state=t.memoizedState,c.refs={},au(t),m=a.contextType,c.context=typeof m=="object"&&m!==null?Ie(m):qn,c.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Au(t,a,m,n),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&Eu.enqueueReplaceState(c,c.state,null),ai(t,n,c,r),ti(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){c=t.stateNode;var v=t.memoizedProps,w=un(a,v);c.props=w;var E=c.context,R=a.contextType;m=qn,typeof R=="object"&&R!==null&&(m=Ie(R));var k=a.getDerivedStateFromProps;R=typeof k=="function"||typeof c.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,R||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(v||E!==m)&&df(t,c,n,m),xa=!1;var T=t.memoizedState;c.state=T,ai(t,n,c,r),ti(),E=t.memoizedState,v||T!==E||xa?(typeof k=="function"&&(Au(t,a,k,n),E=t.memoizedState),(w=xa||cf(t,a,w,n,T,E,m))?(R||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=E),c.props=n,c.state=E,c.context=m,n=w):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{c=t.stateNode,nu(e,t),m=t.memoizedProps,R=un(a,m),c.props=R,k=t.pendingProps,T=c.context,E=a.contextType,w=qn,typeof E=="object"&&E!==null&&(w=Ie(E)),v=a.getDerivedStateFromProps,(E=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==k||T!==w)&&df(t,c,n,w),xa=!1,T=t.memoizedState,c.state=T,ai(t,n,c,r),ti();var N=t.memoizedState;m!==k||T!==N||xa||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof v=="function"&&(Au(t,a,v,n),N=t.memoizedState),(R=xa||cf(t,a,R,n,T,N,w)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(E||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,N,w),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,N,w)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=N),c.props=n,c.state=N,c.context=w,n=R):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),n=!1)}return c=n,Cl(e,t),n=(t.flags&128)!==0,c||n?(c=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&n?(t.child=ln(t,e.child,null,r),t.child=ln(t,null,a,r)):Fe(e,t,a,r),t.memoizedState=c.state,e=t.child):e=aa(e,t,r),e}function Af(e,t,a,n){return Pa(),t.flags|=256,Fe(e,t,a,n),t.child}var Ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uu(e){return{baseLanes:e,cachePool:md()}}function zu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=vt),e}function Ef(e,t,a){var n=t.pendingProps,r=!1,c=(t.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(ke.current&2)!==0),m&&(r=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(ue){if(r?Ca(t):ja(),(e=Te)?(e=kh(e,Et),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Lt,overflow:Ht}:null,retryLane:536870912,hydrationErrors:null},a=id(e),a.return=t,t.child=a,We=t,Te=null)):e=null,e===null)throw ba(t);return yo(e)?t.lanes=32:t.lanes=536870912,null}var v=n.children;return n=n.fallback,r?(ja(),r=t.mode,v=jl({mode:"hidden",children:v},r),n=Fa(n,r,a,null),v.return=t,n.return=t,v.sibling=n,t.child=v,n=t.child,n.memoizedState=Uu(a),n.childLanes=zu(e,m,a),t.memoizedState=Ru,ri(null,n)):(Ca(t),Du(t,v))}var w=e.memoizedState;if(w!==null&&(v=w.dehydrated,v!==null)){if(c)t.flags&256?(Ca(t),t.flags&=-257,t=ku(e,t,a)):t.memoizedState!==null?(ja(),t.child=e.child,t.flags|=128,t=null):(ja(),v=n.fallback,r=t.mode,n=jl({mode:"visible",children:n.children},r),v=Fa(v,r,a,null),v.flags|=2,n.return=t,v.return=t,n.sibling=v,t.child=n,ln(t,e.child,null,a),n=t.child,n.memoizedState=Uu(a),n.childLanes=zu(e,m,a),t.memoizedState=Ru,t=ri(null,n));else if(Ca(t),yo(v)){if(m=v.nextSibling&&v.nextSibling.dataset,m)var E=m.dgst;m=E,n=Error(l(419)),n.stack="",n.digest=m,Zs({value:n,source:null,stack:null}),t=ku(e,t,a)}else if(Le||$n(e,t,a,!1),m=(a&e.childLanes)!==0,Le||m){if(m=Se,m!==null&&(n=fc(m,a),n!==0&&n!==w.retryLane))throw w.retryLane=n,Ia(e,n),rt(m,e,n),Ou;go(v)||Dl(),t=ku(e,t,a)}else go(v)?(t.flags|=192,t.child=e.child,t=null):(e=w.treeContext,Te=Ot(v.nextSibling),We=t,ue=!0,pa=null,Et=!1,e!==null&&ud(t,e),t=Du(t,n.children),t.flags|=4096);return t}return r?(ja(),v=n.fallback,r=t.mode,w=e.child,E=w.sibling,n=Wt(w,{mode:"hidden",children:n.children}),n.subtreeFlags=w.subtreeFlags&65011712,E!==null?v=Wt(E,v):(v=Fa(v,r,a,null),v.flags|=2),v.return=t,n.return=t,n.sibling=v,t.child=n,ri(null,n),n=t.child,v=e.child.memoizedState,v===null?v=Uu(a):(r=v.cachePool,r!==null?(w=Be._currentValue,r=r.parent!==w?{parent:w,pool:w}:r):r=md(),v={baseLanes:v.baseLanes|a,cachePool:r}),n.memoizedState=v,n.childLanes=zu(e,m,a),t.memoizedState=Ru,ri(e.child,n)):(Ca(t),a=e.child,e=a.sibling,a=Wt(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Du(e,t){return t=jl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function jl(e,t){return e=ht(22,e,null,t),e.lanes=0,e}function ku(e,t,a){return ln(t,e.child,null,a),e=Du(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Wr(e.return,t,a)}function Mu(e,t,a,n,r,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:r,treeForkCount:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=a,m.tailMode=r,m.treeForkCount=c)}function Of(e,t,a){var n=t.pendingProps,r=n.revealOrder,c=n.tail;n=n.children;var m=ke.current,v=(m&2)!==0;if(v?(m=m&1|2,t.flags|=128):m&=1,oe(ke,m),Fe(e,t,n,a),n=ue?Js:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tf(e,a,t);else if(e.tag===19)Tf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(a=t.child,r=null;a!==null;)e=a.alternate,e!==null&&hl(e)===null&&(r=a),a=a.sibling;a=r,a===null?(r=t.child,t.child=null):(r=a.sibling,a.sibling=null),Mu(t,!1,r,a,c,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&hl(e)===null){t.child=r;break}e=r.sibling,r.sibling=a,a=r,r=e}Mu(t,!0,a,null,c,n);break;case"together":Mu(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function aa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ta|=t.lanes,(a&t.childLanes)===0)if(e!==null){if($n(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=Wt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Wt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Bu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function D0(e,t,a){switch(t.tag){case 3:Ya(t,t.stateNode.containerInfo),_a(t,Be,e.memoizedState.cache),Pa();break;case 27:case 5:Sn(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:_a(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,uu(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ef(e,t,a):(Ca(t),e=aa(e,t,a),e!==null?e.sibling:null);Ca(t);break;case 19:var r=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||($n(e,t,a,!1),n=(a&t.childLanes)!==0),r){if(n)return Of(e,t,a);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),oe(ke,ke.current),n)break;return null;case 22:return t.lanes=0,xf(e,t,a,t.pendingProps);case 24:_a(t,Be,e.memoizedState.cache)}return aa(e,t,a)}function Nf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Le=!0;else{if(!Bu(e,a)&&(t.flags&128)===0)return Le=!1,D0(e,t,a);Le=(e.flags&131072)!==0}else Le=!1,ue&&(t.flags&1048576)!==0&&rd(t,Js,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=nn(t.elementType),t.type=e,typeof e=="function")$r(e)?(n=un(e,n),t.tag=1,t=jf(null,t,e,n,a)):(t.tag=0,t=Nu(null,t,e,n,a));else{if(e!=null){var r=e.$$typeof;if(r===Y){t.tag=11,t=pf(null,t,e,n,a);break e}else if(r===ee){t.tag=14,t=bf(null,t,e,n,a);break e}}throw t=qt(e)||e,Error(l(306,t,""))}}return t;case 0:return Nu(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,r=un(n,t.pendingProps),jf(e,t,n,r,a);case 3:e:{if(Ya(t,t.stateNode.containerInfo),e===null)throw Error(l(387));n=t.pendingProps;var c=t.memoizedState;r=c.element,nu(e,t),ai(t,n,null,a);var m=t.memoizedState;if(n=m.cache,_a(t,Be,n),n!==c.cache&&Ir(t,[Be],a,!0),ti(),n=m.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Af(e,t,n,a);break e}else if(n!==r){r=Ct(Error(l(424)),t),Zs(r),t=Af(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Te=Ot(e.firstChild),We=t,ue=!0,pa=null,Et=!0,a=_d(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pa(),n===r){t=aa(e,t,a);break e}Fe(e,t,n,a)}t=t.child}return t;case 26:return Cl(e,t),e===null?(a=Gh(t.type,null,t.pendingProps,null))?t.memoizedState=a:ue||(a=t.type,e=t.pendingProps,n=Gl(ot.current).createElement(a),n[Ze]=t,n[tt]=e,Pe(n,a,e),Ke(n),t.stateNode=n):t.memoizedState=Gh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Sn(t),e===null&&ue&&(n=t.stateNode=qh(t.type,t.pendingProps,ot.current),We=t,Et=!0,r=Te,za(t.type)?(vo=r,Te=Ot(n.firstChild)):Te=r),Fe(e,t,t.pendingProps.children,a),Cl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ue&&((r=n=Te)&&(n=cy(n,t.type,t.pendingProps,Et),n!==null?(t.stateNode=n,We=t,Te=Ot(n.firstChild),Et=!1,r=!0):r=!1),r||ba(t)),Sn(t),r=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,n=c.children,fo(r,c)?n=null:m!==null&&fo(r,m)&&(t.flags|=32),t.memoizedState!==null&&(r=cu(e,t,j0,null,null,a),wi._currentValue=r),Cl(e,t),Fe(e,t,n,a),t.child;case 6:return e===null&&ue&&((e=a=Te)&&(a=dy(a,t.pendingProps,Et),a!==null?(t.stateNode=a,We=t,Te=null,e=!0):e=!1),e||ba(t)),null;case 13:return Ef(e,t,a);case 4:return Ya(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ln(t,null,n,a):Fe(e,t,n,a),t.child;case 11:return pf(e,t,t.type,t.pendingProps,a);case 7:return Fe(e,t,t.pendingProps,a),t.child;case 8:return Fe(e,t,t.pendingProps.children,a),t.child;case 12:return Fe(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,_a(t,t.type,n.value),Fe(e,t,n.children,a),t.child;case 9:return r=t.type._context,n=t.pendingProps.children,tn(t),r=Ie(r),n=n(r),t.flags|=1,Fe(e,t,n,a),t.child;case 14:return bf(e,t,t.type,t.pendingProps,a);case 15:return _f(e,t,t.type,t.pendingProps,a);case 19:return Of(e,t,a);case 31:return z0(e,t,a);case 22:return xf(e,t,a,t.pendingProps);case 24:return tn(t),n=Ie(Be),e===null?(r=eu(),r===null&&(r=Se,c=Fr(),r.pooledCache=c,c.refCount++,c!==null&&(r.pooledCacheLanes|=a),r=c),t.memoizedState={parent:n,cache:r},au(t),_a(t,Be,r)):((e.lanes&a)!==0&&(nu(e,t),ai(t,null,null,a),ti()),r=e.memoizedState,c=t.memoizedState,r.parent!==n?(r={parent:n,cache:n},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),_a(t,Be,n)):(n=c.cache,_a(t,Be,n),n!==r.cache&&Ir(t,[Be],a,!0))),Fe(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function na(e){e.flags|=4}function qu(e,t,a,n,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(nh())e.flags|=8192;else throw sn=ol,tu}else e.flags&=-16777217}function Rf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Kh(t))if(nh())e.flags|=8192;else throw sn=ol,tu}function Al(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?oc():536870912,e.lanes|=t,es|=t)}function ui(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var r=e.child;r!==null;)a|=r.lanes|r.childLanes,n|=r.subtreeFlags&65011712,n|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)a|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function k0(e,t,a){var n=t.pendingProps;switch(Kr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Oe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Pt(Be),ha(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gn(t)?na(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Jr())),Oe(t),null;case 26:var r=t.type,c=t.memoizedState;return e===null?(na(t),c!==null?(Oe(t),Rf(t,c)):(Oe(t),qu(t,r,null,n,a))):c?c!==e.memoizedState?(na(t),Oe(t),Rf(t,c)):(Oe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&na(t),Oe(t),qu(t,r,e,n,a)),null;case 27:if(Cn(t),a=ot.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&na(t);else{if(!n){if(t.stateNode===null)throw Error(l(166));return Oe(t),null}e=De.current,Gn(t)?od(t):(e=qh(r,n,a),t.stateNode=e,na(t))}return Oe(t),null;case 5:if(Cn(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&na(t);else{if(!n){if(t.stateNode===null)throw Error(l(166));return Oe(t),null}if(c=De.current,Gn(t))od(t);else{var m=Gl(ot.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?m.createElement("select",{is:n.is}):m.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?m.createElement(r,{is:n.is}):m.createElement(r)}}c[Ze]=t,c[tt]=n;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=c;e:switch(Pe(c,r,n),r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&na(t)}}return Oe(t),qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&na(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(l(166));if(e=ot.current,Gn(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,r=We,r!==null)switch(r.tag){case 27:case 5:n=r.memoizedProps}e[Ze]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Eh(e.nodeValue,a)),e||ba(t,!0)}else e=Gl(e).createTextNode(n),e[Ze]=t,t.stateNode=e}return Oe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=Gn(t),a!==null){if(e===null){if(!n)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Ze]=t}else Pa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oe(t),e=!1}else a=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(gt(t),t):(gt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Oe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Gn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!r)throw Error(l(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(l(317));r[Ze]=t}else Pa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oe(t),r=!1}else r=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(gt(t),t):(gt(t),null)}return gt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,r=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(r=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Al(t,t.updateQueue),Oe(t),null);case 4:return ha(),e===null&&lo(t.stateNode.containerInfo),Oe(t),null;case 10:return Pt(t.type),Oe(t),null;case 19:if(Ce(ke),n=t.memoizedState,n===null)return Oe(t),null;if(r=(t.flags&128)!==0,c=n.rendering,c===null)if(r)ui(n,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=hl(e),c!==null){for(t.flags|=128,ui(n,!1),e=c.updateQueue,t.updateQueue=e,Al(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)sd(a,e),a=a.sibling;return oe(ke,ke.current&1|2),ue&&It(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&we()>Rl&&(t.flags|=128,r=!0,ui(n,!1),t.lanes=4194304)}else{if(!r)if(e=hl(c),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Al(t,e),ui(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!ue)return Oe(t),null}else 2*we()-n.renderingStartTime>Rl&&a!==536870912&&(t.flags|=128,r=!0,ui(n,!1),t.lanes=4194304);n.isBackwards?(c.sibling=t.child,t.child=c):(e=n.last,e!==null?e.sibling=c:t.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=we(),e.sibling=null,a=ke.current,oe(ke,r?a&1|2:a&1),ue&&It(t,n.treeForkCount),e):(Oe(t),null);case 22:case 23:return gt(t),ru(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),a=t.updateQueue,a!==null&&Al(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&Ce(an),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Pt(Be),Oe(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function M0(e,t){switch(Kr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pt(Be),ha(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Cn(t),null;case 31:if(t.memoizedState!==null){if(gt(t),t.alternate===null)throw Error(l(340));Pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(gt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(ke),null;case 4:return ha(),null;case 10:return Pt(t.type),null;case 22:case 23:return gt(t),ru(),e!==null&&Ce(an),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Pt(Be),null;case 25:return null;default:return null}}function Uf(e,t){switch(Kr(t),t.tag){case 3:Pt(Be),ha();break;case 26:case 27:case 5:Cn(t);break;case 4:ha();break;case 31:t.memoizedState!==null&&gt(t);break;case 13:gt(t);break;case 19:Ce(ke);break;case 10:Pt(t.type);break;case 22:case 23:gt(t),ru(),e!==null&&Ce(an);break;case 24:Pt(Be)}}function oi(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var r=n.next;a=r;do{if((a.tag&e)===e){n=void 0;var c=a.create,m=a.inst;n=c(),m.destroy=n}a=a.next}while(a!==r)}}catch(v){ge(t,t.return,v)}}function Aa(e,t,a){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var c=r.next;n=c;do{if((n.tag&e)===e){var m=n.inst,v=m.destroy;if(v!==void 0){m.destroy=void 0,r=t;var w=a,E=v;try{E()}catch(R){ge(r,w,R)}}}n=n.next}while(n!==c)}}catch(R){ge(t,t.return,R)}}function zf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{wd(t,a)}catch(n){ge(e,e.return,n)}}}function Df(e,t,a){a.props=un(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ge(e,t,n)}}function ci(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(r){ge(e,t,r)}}function Gt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(r){ge(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(r){ge(e,t,r)}else a.current=null}function kf(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(r){ge(e,e.return,r)}}function Lu(e,t,a){try{var n=e.stateNode;sy(n,e.type,a,t),n[tt]=t}catch(r){ge(e,e.return,r)}}function Mf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gu(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Jt));else if(n!==4&&(n===27&&za(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Gu(e,t,a),e=e.sibling;e!==null;)Gu(e,t,a),e=e.sibling}function El(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&za(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(El(e,t,a),e=e.sibling;e!==null;)El(e,t,a),e=e.sibling}function Bf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Pe(t,n,a),t[Ze]=e,t[tt]=a}catch(c){ge(e,e.return,c)}}var sa=!1,He=!1,$u=!1,qf=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function B0(e,t){if(e=e.containerInfo,oo=Jl,e=Zc(e),kr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var r=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var m=0,v=-1,w=-1,E=0,R=0,k=e,T=null;t:for(;;){for(var N;k!==a||r!==0&&k.nodeType!==3||(v=m+r),k!==c||n!==0&&k.nodeType!==3||(w=m+n),k.nodeType===3&&(m+=k.nodeValue.length),(N=k.firstChild)!==null;)T=k,k=N;for(;;){if(k===e)break t;if(T===a&&++E===r&&(v=m),T===c&&++R===n&&(w=m),(N=k.nextSibling)!==null)break;k=T,T=k.parentNode}k=N}a=v===-1||w===-1?null:{start:v,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(co={focusedElem:e,selectionRange:a},Jl=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)r=e[a],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,r=c.memoizedProps,c=c.memoizedState,n=a.stateNode;try{var V=un(a.type,r);e=n.getSnapshotBeforeUpdate(V,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(Z){ge(a,a.return,Z)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)mo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function Lf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:la(e,a),n&4&&oi(5,a);break;case 1:if(la(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){ge(a,a.return,m)}else{var r=un(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){ge(a,a.return,m)}}n&64&&zf(a),n&512&&ci(a,a.return);break;case 3:if(la(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{wd(e,t)}catch(m){ge(a,a.return,m)}}break;case 27:t===null&&n&4&&Bf(a);case 26:case 5:la(e,a),t===null&&n&4&&kf(a),n&512&&ci(a,a.return);break;case 12:la(e,a);break;case 31:la(e,a),n&4&&$f(e,a);break;case 13:la(e,a),n&4&&Vf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=K0.bind(null,a),fy(e,a))));break;case 22:if(n=a.memoizedState!==null||sa,!n){t=t!==null&&t.memoizedState!==null||He,r=sa;var c=He;sa=n,(He=t)&&!c?ra(e,a,(a.subtreeFlags&8772)!==0):la(e,a),sa=r,He=c}break;case 30:break;default:la(e,a)}}function Hf(e){var t=e.alternate;t!==null&&(e.alternate=null,Hf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ne=null,nt=!1;function ia(e,t,a){for(a=a.child;a!==null;)Gf(e,t,a),a=a.sibling}function Gf(e,t,a){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Ds,a)}catch{}switch(a.tag){case 26:He||Gt(a,t),ia(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:He||Gt(a,t);var n=Ne,r=nt;za(a.type)&&(Ne=a.stateNode,nt=!1),ia(e,t,a),bi(a.stateNode),Ne=n,nt=r;break;case 5:He||Gt(a,t);case 6:if(n=Ne,r=nt,Ne=null,ia(e,t,a),Ne=n,nt=r,Ne!==null)if(nt)try{(Ne.nodeType===9?Ne.body:Ne.nodeName==="HTML"?Ne.ownerDocument.body:Ne).removeChild(a.stateNode)}catch(c){ge(a,t,c)}else try{Ne.removeChild(a.stateNode)}catch(c){ge(a,t,c)}break;case 18:Ne!==null&&(nt?(e=Ne,zh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),us(e)):zh(Ne,a.stateNode));break;case 4:n=Ne,r=nt,Ne=a.stateNode.containerInfo,nt=!0,ia(e,t,a),Ne=n,nt=r;break;case 0:case 11:case 14:case 15:Aa(2,a,t),He||Aa(4,a,t),ia(e,t,a);break;case 1:He||(Gt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Df(a,t,n)),ia(e,t,a);break;case 21:ia(e,t,a);break;case 22:He=(n=He)||a.memoizedState!==null,ia(e,t,a),He=n;break;default:ia(e,t,a)}}function $f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{us(e)}catch(a){ge(t,t.return,a)}}}function Vf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{us(e)}catch(a){ge(t,t.return,a)}}function q0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new qf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new qf),t;default:throw Error(l(435,e.tag))}}function Tl(e,t){var a=q0(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var r=X0.bind(null,e,n);n.then(r,r)}})}function st(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var r=a[n],c=e,m=t,v=m;e:for(;v!==null;){switch(v.tag){case 27:if(za(v.type)){Ne=v.stateNode,nt=!1;break e}break;case 5:Ne=v.stateNode,nt=!1;break e;case 3:case 4:Ne=v.stateNode.containerInfo,nt=!0;break e}v=v.return}if(Ne===null)throw Error(l(160));Gf(c,m,r),Ne=null,nt=!1,c=r.alternate,c!==null&&(c.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yf(t,e),t=t.sibling}var Dt=null;function Yf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:st(t,e),it(e),n&4&&(Aa(3,e,e.return),oi(3,e),Aa(5,e,e.return));break;case 1:st(t,e),it(e),n&512&&(He||a===null||Gt(a,a.return)),n&64&&sa&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var r=Dt;if(st(t,e),it(e),n&512&&(He||a===null||Gt(a,a.return)),n&4){var c=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,r=r.ownerDocument||r;t:switch(n){case"title":c=r.getElementsByTagName("title")[0],(!c||c[Bs]||c[Ze]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=r.createElement(n),r.head.insertBefore(c,r.querySelector("head > title"))),Pe(c,n,a),c[Ze]=e,Ke(c),n=c;break e;case"link":var m=Yh("link","href",r).get(n+(a.href||""));if(m){for(var v=0;v<m.length;v++)if(c=m[v],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(v,1);break t}}c=r.createElement(n),Pe(c,n,a),r.head.appendChild(c);break;case"meta":if(m=Yh("meta","content",r).get(n+(a.content||""))){for(v=0;v<m.length;v++)if(c=m[v],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(v,1);break t}}c=r.createElement(n),Pe(c,n,a),r.head.appendChild(c);break;default:throw Error(l(468,n))}c[Ze]=e,Ke(c),n=c}e.stateNode=n}else Qh(r,e.type,e.stateNode);else e.stateNode=Vh(r,n,e.memoizedProps);else c!==n?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,n===null?Qh(r,e.type,e.stateNode):Vh(r,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Lu(e,e.memoizedProps,a.memoizedProps)}break;case 27:st(t,e),it(e),n&512&&(He||a===null||Gt(a,a.return)),a!==null&&n&4&&Lu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(st(t,e),it(e),n&512&&(He||a===null||Gt(a,a.return)),e.flags&32){r=e.stateNode;try{Rn(r,"")}catch(V){ge(e,e.return,V)}}n&4&&e.stateNode!=null&&(r=e.memoizedProps,Lu(e,r,a!==null?a.memoizedProps:r)),n&1024&&($u=!0);break;case 6:if(st(t,e),it(e),n&4){if(e.stateNode===null)throw Error(l(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(V){ge(e,e.return,V)}}break;case 3:if(Yl=null,r=Dt,Dt=$l(t.containerInfo),st(t,e),Dt=r,it(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(V){ge(e,e.return,V)}$u&&($u=!1,Qf(e));break;case 4:n=Dt,Dt=$l(e.stateNode.containerInfo),st(t,e),it(e),Dt=n;break;case 12:st(t,e),it(e);break;case 31:st(t,e),it(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Tl(e,n)));break;case 13:st(t,e),it(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nl=we()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Tl(e,n)));break;case 22:r=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,E=sa,R=He;if(sa=E||r,He=R||w,st(t,e),He=R,sa=E,it(e),n&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(a===null||w||sa||He||on(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){w=a=t;try{if(c=w.stateNode,r)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=w.stateNode;var k=w.memoizedProps.style,T=k!=null&&k.hasOwnProperty("display")?k.display:null;v.style.display=T==null||typeof T=="boolean"?"":(""+T).trim()}}catch(V){ge(w,w.return,V)}}}else if(t.tag===6){if(a===null){w=t;try{w.stateNode.nodeValue=r?"":w.memoizedProps}catch(V){ge(w,w.return,V)}}}else if(t.tag===18){if(a===null){w=t;try{var N=w.stateNode;r?Dh(N,!0):Dh(w.stateNode,!1)}catch(V){ge(w,w.return,V)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Tl(e,a))));break;case 19:st(t,e),it(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Tl(e,n)));break;case 30:break;case 21:break;default:st(t,e),it(e)}}function it(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Mf(n)){a=n;break}n=n.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var r=a.stateNode,c=Hu(e);El(e,c,r);break;case 5:var m=a.stateNode;a.flags&32&&(Rn(m,""),a.flags&=-33);var v=Hu(e);El(e,v,m);break;case 3:case 4:var w=a.stateNode.containerInfo,E=Hu(e);Gu(e,E,w);break;default:throw Error(l(161))}}catch(R){ge(e,e.return,R)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Qf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function la(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lf(e,t.alternate,t),t=t.sibling}function on(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Aa(4,t,t.return),on(t);break;case 1:Gt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Df(t,t.return,a),on(t);break;case 27:bi(t.stateNode);case 26:case 5:Gt(t,t.return),on(t);break;case 22:t.memoizedState===null&&on(t);break;case 30:on(t);break;default:on(t)}e=e.sibling}}function ra(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,r=e,c=t,m=c.flags;switch(c.tag){case 0:case 11:case 15:ra(r,c,a),oi(4,c);break;case 1:if(ra(r,c,a),n=c,r=n.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(E){ge(n,n.return,E)}if(n=c,r=n.updateQueue,r!==null){var v=n.stateNode;try{var w=r.shared.hiddenCallbacks;if(w!==null)for(r.shared.hiddenCallbacks=null,r=0;r<w.length;r++)xd(w[r],v)}catch(E){ge(n,n.return,E)}}a&&m&64&&zf(c),ci(c,c.return);break;case 27:Bf(c);case 26:case 5:ra(r,c,a),a&&n===null&&m&4&&kf(c),ci(c,c.return);break;case 12:ra(r,c,a);break;case 31:ra(r,c,a),a&&m&4&&$f(r,c);break;case 13:ra(r,c,a),a&&m&4&&Vf(r,c);break;case 22:c.memoizedState===null&&ra(r,c,a),ci(c,c.return);break;case 30:break;default:ra(r,c,a)}t=t.sibling}}function Vu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ws(a))}function Yu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ws(e))}function kt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kf(e,t,a,n),t=t.sibling}function Kf(e,t,a,n){var r=t.flags;switch(t.tag){case 0:case 11:case 15:kt(e,t,a,n),r&2048&&oi(9,t);break;case 1:kt(e,t,a,n);break;case 3:kt(e,t,a,n),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ws(e)));break;case 12:if(r&2048){kt(e,t,a,n),e=t.stateNode;try{var c=t.memoizedProps,m=c.id,v=c.onPostCommit;typeof v=="function"&&v(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){ge(t,t.return,w)}}else kt(e,t,a,n);break;case 31:kt(e,t,a,n);break;case 13:kt(e,t,a,n);break;case 23:break;case 22:c=t.stateNode,m=t.alternate,t.memoizedState!==null?c._visibility&2?kt(e,t,a,n):di(e,t):c._visibility&2?kt(e,t,a,n):(c._visibility|=2,In(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Vu(m,t);break;case 24:kt(e,t,a,n),r&2048&&Yu(t.alternate,t);break;default:kt(e,t,a,n)}}function In(e,t,a,n,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,m=t,v=a,w=n,E=m.flags;switch(m.tag){case 0:case 11:case 15:In(c,m,v,w,r),oi(8,m);break;case 23:break;case 22:var R=m.stateNode;m.memoizedState!==null?R._visibility&2?In(c,m,v,w,r):di(c,m):(R._visibility|=2,In(c,m,v,w,r)),r&&E&2048&&Vu(m.alternate,m);break;case 24:In(c,m,v,w,r),r&&E&2048&&Yu(m.alternate,m);break;default:In(c,m,v,w,r)}t=t.sibling}}function di(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,r=n.flags;switch(n.tag){case 22:di(a,n),r&2048&&Vu(n.alternate,n);break;case 24:di(a,n),r&2048&&Yu(n.alternate,n);break;default:di(a,n)}t=t.sibling}}var fi=8192;function Fn(e,t,a){if(e.subtreeFlags&fi)for(e=e.child;e!==null;)Xf(e,t,a),e=e.sibling}function Xf(e,t,a){switch(e.tag){case 26:Fn(e,t,a),e.flags&fi&&e.memoizedState!==null&&Cy(a,Dt,e.memoizedState,e.memoizedProps);break;case 5:Fn(e,t,a);break;case 3:case 4:var n=Dt;Dt=$l(e.stateNode.containerInfo),Fn(e,t,a),Dt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=fi,fi=16777216,Fn(e,t,a),fi=n):Fn(e,t,a));break;default:Fn(e,t,a)}}function Jf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function hi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Wf(n,e)}Jf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zf(e),e=e.sibling}function Zf(e){switch(e.tag){case 0:case 11:case 15:hi(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:hi(e);break;case 12:hi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ol(e)):hi(e);break;default:hi(e)}}function Ol(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Wf(n,e)}Jf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Aa(8,t,t.return),Ol(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ol(t));break;default:Ol(t)}e=e.sibling}}function Wf(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Aa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ws(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Xe=n;else e:for(a=e;Xe!==null;){n=Xe;var r=n.sibling,c=n.return;if(Hf(n),n===a){Xe=null;break e}if(r!==null){r.return=c,Xe=r;break e}Xe=c}}}var L0={getCacheForType:function(e){var t=Ie(Be),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ie(Be).controller.signal}},H0=typeof WeakMap=="function"?WeakMap:Map,fe=0,Se=null,se=null,le=0,me=0,yt=null,Ea=!1,Pn=!1,Qu=!1,ua=0,ze=0,Ta=0,cn=0,Ku=0,vt=0,es=0,mi=null,lt=null,Xu=!1,Nl=0,If=0,Rl=1/0,Ul=null,Oa=null,Ve=0,Na=null,ts=null,oa=0,Ju=0,Zu=null,Ff=null,gi=0,Wu=null;function pt(){return(fe&2)!==0&&le!==0?le&-le:U.T!==null?ao():hc()}function Pf(){if(vt===0)if((le&536870912)===0||ue){var e=Hi;Hi<<=1,(Hi&3932160)===0&&(Hi=262144),vt=e}else vt=536870912;return e=mt.current,e!==null&&(e.flags|=32),vt}function rt(e,t,a){(e===Se&&(me===2||me===9)||e.cancelPendingCommit!==null)&&(as(e,0),Ra(e,le,vt,!1)),Ms(e,a),((fe&2)===0||e!==Se)&&(e===Se&&((fe&2)===0&&(cn|=a),ze===4&&Ra(e,le,vt,!1)),$t(e))}function eh(e,t,a){if((fe&6)!==0)throw Error(l(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||ks(e,t),r=n?V0(e,t):Fu(e,t,!0),c=n;do{if(r===0){Pn&&!n&&Ra(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!G0(a)){r=Fu(e,t,!1),c=!1;continue}if(r===2){if(c=t,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var v=e;r=mi;var w=v.current.memoizedState.isDehydrated;if(w&&(as(v,m).flags|=256),m=Fu(v,m,!1),m!==2){if(Qu&&!w){v.errorRecoveryDisabledLanes|=c,cn|=c,r=4;break e}c=lt,lt=r,c!==null&&(lt===null?lt=c:lt.push.apply(lt,c))}r=m}if(c=!1,r!==2)continue}}if(r===1){as(e,0),Ra(e,t,0,!0);break}e:{switch(n=e,c=r,c){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Ra(n,t,vt,!Ea);break e;case 2:lt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(r=Nl+300-we(),10<r)){if(Ra(n,t,vt,!Ea),$i(n,0,!0)!==0)break e;oa=t,n.timeoutHandle=Rh(th.bind(null,n,a,lt,Ul,Xu,t,vt,cn,es,Ea,c,"Throttled",-0,0),r);break e}th(n,a,lt,Ul,Xu,t,vt,cn,es,Ea,c,null,-0,0)}}break}while(!0);$t(e)}function th(e,t,a,n,r,c,m,v,w,E,R,k,T,N){if(e.timeoutHandle=-1,k=t.subtreeFlags,k&8192||(k&16785408)===16785408){k={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jt},Xf(t,c,k);var V=(c&62914560)===c?Nl-we():(c&4194048)===c?If-we():0;if(V=jy(k,V),V!==null){oa=c,e.cancelPendingCommit=V(oh.bind(null,e,t,c,a,n,r,m,v,w,R,k,null,T,N)),Ra(e,c,m,!E);return}}oh(e,t,c,a,n,r,m,v,w)}function G0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var r=a[n],c=r.getSnapshot;r=r.value;try{if(!ft(c(),r))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ra(e,t,a,n){t&=~Ku,t&=~cn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var r=t;0<r;){var c=31-dt(r),m=1<<c;n[c]=-1,r&=~m}a!==0&&cc(e,a,t)}function zl(){return(fe&6)===0?(yi(0),!1):!0}function Iu(){if(se!==null){if(me===0)var e=se.return;else e=se,Ft=en=null,hu(e),Kn=null,Fs=0,e=se;for(;e!==null;)Uf(e.alternate,e),e=e.return;se=null}}function as(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,ry(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),oa=0,Iu(),Se=e,se=a=Wt(e.current,null),le=t,me=0,yt=null,Ea=!1,Pn=ks(e,t),Qu=!1,es=vt=Ku=cn=Ta=ze=0,lt=mi=null,Xu=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var r=31-dt(n),c=1<<r;t|=e[r],n&=~c}return ua=t,el(),a}function ah(e,t){ae=null,U.H=li,t===Qn||t===ul?(t=vd(),me=3):t===tu?(t=vd(),me=4):me=t===Ou?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,yt=t,se===null&&(ze=1,wl(e,Ct(t,e.current)))}function nh(){var e=mt.current;return e===null?!0:(le&4194048)===le?Tt===null:(le&62914560)===le||(le&536870912)!==0?e===Tt:!1}function sh(){var e=U.H;return U.H=li,e===null?li:e}function ih(){var e=U.A;return U.A=L0,e}function Dl(){ze=4,Ea||(le&4194048)!==le&&mt.current!==null||(Pn=!0),(Ta&134217727)===0&&(cn&134217727)===0||Se===null||Ra(Se,le,vt,!1)}function Fu(e,t,a){var n=fe;fe|=2;var r=sh(),c=ih();(Se!==e||le!==t)&&(Ul=null,as(e,t)),t=!1;var m=ze;e:do try{if(me!==0&&se!==null){var v=se,w=yt;switch(me){case 8:Iu(),m=6;break e;case 3:case 2:case 9:case 6:mt.current===null&&(t=!0);var E=me;if(me=0,yt=null,ns(e,v,w,E),a&&Pn){m=0;break e}break;default:E=me,me=0,yt=null,ns(e,v,w,E)}}$0(),m=ze;break}catch(R){ah(e,R)}while(!0);return t&&e.shellSuspendCounter++,Ft=en=null,fe=n,U.H=r,U.A=c,se===null&&(Se=null,le=0,el()),m}function $0(){for(;se!==null;)lh(se)}function V0(e,t){var a=fe;fe|=2;var n=sh(),r=ih();Se!==e||le!==t?(Ul=null,Rl=we()+500,as(e,t)):Pn=ks(e,t);e:do try{if(me!==0&&se!==null){t=se;var c=yt;t:switch(me){case 1:me=0,yt=null,ns(e,t,c,1);break;case 2:case 9:if(gd(c)){me=0,yt=null,rh(t);break}t=function(){me!==2&&me!==9||Se!==e||(me=7),$t(e)},c.then(t,t);break e;case 3:me=7;break e;case 4:me=5;break e;case 7:gd(c)?(me=0,yt=null,rh(t)):(me=0,yt=null,ns(e,t,c,7));break;case 5:var m=null;switch(se.tag){case 26:m=se.memoizedState;case 5:case 27:var v=se;if(m?Kh(m):v.stateNode.complete){me=0,yt=null;var w=v.sibling;if(w!==null)se=w;else{var E=v.return;E!==null?(se=E,kl(E)):se=null}break t}}me=0,yt=null,ns(e,t,c,5);break;case 6:me=0,yt=null,ns(e,t,c,6);break;case 8:Iu(),ze=6;break e;default:throw Error(l(462))}}Y0();break}catch(R){ah(e,R)}while(!0);return Ft=en=null,U.H=n,U.A=r,fe=a,se!==null?0:(Se=null,le=0,el(),ze)}function Y0(){for(;se!==null&&!hr();)lh(se)}function lh(e){var t=Nf(e.alternate,e,ua);e.memoizedProps=e.pendingProps,t===null?kl(e):se=t}function rh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Cf(a,t,t.pendingProps,t.type,void 0,le);break;case 11:t=Cf(a,t,t.pendingProps,t.type.render,t.ref,le);break;case 5:hu(t);default:Uf(a,t),t=se=sd(t,ua),t=Nf(a,t,ua)}e.memoizedProps=e.pendingProps,t===null?kl(e):se=t}function ns(e,t,a,n){Ft=en=null,hu(t),Kn=null,Fs=0;var r=t.return;try{if(U0(e,r,t,a,le)){ze=1,wl(e,Ct(a,e.current)),se=null;return}}catch(c){if(r!==null)throw se=r,c;ze=1,wl(e,Ct(a,e.current)),se=null;return}t.flags&32768?(ue||n===1?e=!0:Pn||(le&536870912)!==0?e=!1:(Ea=e=!0,(n===2||n===9||n===3||n===6)&&(n=mt.current,n!==null&&n.tag===13&&(n.flags|=16384))),uh(t,e)):kl(t)}function kl(e){var t=e;do{if((t.flags&32768)!==0){uh(t,Ea);return}e=t.return;var a=k0(t.alternate,t,ua);if(a!==null){se=a;return}if(t=t.sibling,t!==null){se=t;return}se=t=e}while(t!==null);ze===0&&(ze=5)}function uh(e,t){do{var a=M0(e.alternate,e);if(a!==null){a.flags&=32767,se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){se=e;return}se=e=a}while(e!==null);ze=6,se=null}function oh(e,t,a,n,r,c,m,v,w){e.cancelPendingCommit=null;do Ml();while(Ve!==0);if((fe&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(c=t.lanes|t.childLanes,c|=Hr,Sg(e,a,c,m,v,w),e===Se&&(se=Se=null,le=0),ts=t,Na=e,oa=a,Ju=c,Zu=r,Ff=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,J0(qi,function(){return mh(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null,r=G.p,G.p=2,m=fe,fe|=4;try{B0(e,t,a)}finally{fe=m,G.p=r,U.T=n}}Ve=1,ch(),dh(),fh()}}function ch(){if(Ve===1){Ve=0;var e=Na,t=ts,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var n=G.p;G.p=2;var r=fe;fe|=4;try{Yf(t,e);var c=co,m=Zc(e.containerInfo),v=c.focusedElem,w=c.selectionRange;if(m!==v&&v&&v.ownerDocument&&Jc(v.ownerDocument.documentElement,v)){if(w!==null&&kr(v)){var E=w.start,R=w.end;if(R===void 0&&(R=E),"selectionStart"in v)v.selectionStart=E,v.selectionEnd=Math.min(R,v.value.length);else{var k=v.ownerDocument||document,T=k&&k.defaultView||window;if(T.getSelection){var N=T.getSelection(),V=v.textContent.length,Z=Math.min(w.start,V),be=w.end===void 0?Z:Math.min(w.end,V);!N.extend&&Z>be&&(m=be,be=Z,Z=m);var j=Xc(v,Z),S=Xc(v,be);if(j&&S&&(N.rangeCount!==1||N.anchorNode!==j.node||N.anchorOffset!==j.offset||N.focusNode!==S.node||N.focusOffset!==S.offset)){var A=k.createRange();A.setStart(j.node,j.offset),N.removeAllRanges(),Z>be?(N.addRange(A),N.extend(S.node,S.offset)):(A.setEnd(S.node,S.offset),N.addRange(A))}}}}for(k=[],N=v;N=N.parentNode;)N.nodeType===1&&k.push({element:N,left:N.scrollLeft,top:N.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<k.length;v++){var z=k[v];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}Jl=!!oo,co=oo=null}finally{fe=r,G.p=n,U.T=a}}e.current=t,Ve=2}}function dh(){if(Ve===2){Ve=0;var e=Na,t=ts,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var n=G.p;G.p=2;var r=fe;fe|=4;try{Lf(e,t.alternate,t)}finally{fe=r,G.p=n,U.T=a}}Ve=3}}function fh(){if(Ve===4||Ve===3){Ve=0,F();var e=Na,t=ts,a=oa,n=Ff;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ve=5:(Ve=0,ts=Na=null,hh(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Oa=null),yr(a),t=t.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Ds,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=U.T,r=G.p,G.p=2,U.T=null;try{for(var c=e.onRecoverableError,m=0;m<n.length;m++){var v=n[m];c(v.value,{componentStack:v.stack})}}finally{U.T=t,G.p=r}}(oa&3)!==0&&Ml(),$t(e),r=e.pendingLanes,(a&261930)!==0&&(r&42)!==0?e===Wu?gi++:(gi=0,Wu=e):gi=0,yi(0)}}function hh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ws(t)))}function Ml(){return ch(),dh(),fh(),mh()}function mh(){if(Ve!==5)return!1;var e=Na,t=Ju;Ju=0;var a=yr(oa),n=U.T,r=G.p;try{G.p=32>a?32:a,U.T=null,a=Zu,Zu=null;var c=Na,m=oa;if(Ve=0,ts=Na=null,oa=0,(fe&6)!==0)throw Error(l(331));var v=fe;if(fe|=4,Zf(c.current),Kf(c,c.current,m,a),fe=v,yi(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Ds,c)}catch{}return!0}finally{G.p=r,U.T=n,hh(e,t)}}function gh(e,t,a){t=Ct(a,t),t=Tu(e.stateNode,t,2),e=Sa(e,t,2),e!==null&&(Ms(e,2),$t(e))}function ge(e,t,a){if(e.tag===3)gh(e,e,a);else for(;t!==null;){if(t.tag===3){gh(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oa===null||!Oa.has(n))){e=Ct(a,e),a=yf(2),n=Sa(t,a,2),n!==null&&(vf(a,n,t,e),Ms(n,2),$t(n));break}}t=t.return}}function Pu(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new H0;var r=new Set;n.set(t,r)}else r=n.get(t),r===void 0&&(r=new Set,n.set(t,r));r.has(a)||(Qu=!0,r.add(a),e=Q0.bind(null,e,t,a),t.then(e,e))}function Q0(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Se===e&&(le&a)===a&&(ze===4||ze===3&&(le&62914560)===le&&300>we()-Nl?(fe&2)===0&&as(e,0):Ku|=a,es===le&&(es=0)),$t(e)}function yh(e,t){t===0&&(t=oc()),e=Ia(e,t),e!==null&&(Ms(e,t),$t(e))}function K0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),yh(e,a)}function X0(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(a=r.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(l(314))}n!==null&&n.delete(t),yh(e,a)}function J0(e,t){return Us(e,t)}var Bl=null,ss=null,eo=!1,ql=!1,to=!1,Ua=0;function $t(e){e!==ss&&e.next===null&&(ss===null?Bl=ss=e:ss=ss.next=e),ql=!0,eo||(eo=!0,W0())}function yi(e,t){if(!to&&ql){to=!0;do for(var a=!1,n=Bl;n!==null;){if(e!==0){var r=n.pendingLanes;if(r===0)var c=0;else{var m=n.suspendedLanes,v=n.pingedLanes;c=(1<<31-dt(42|e)+1)-1,c&=r&~(m&~v),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,_h(n,c))}else c=le,c=$i(n,n===Se?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||ks(n,c)||(a=!0,_h(n,c));n=n.next}while(a);to=!1}}function Z0(){vh()}function vh(){ql=eo=!1;var e=0;Ua!==0&&ly()&&(e=Ua);for(var t=we(),a=null,n=Bl;n!==null;){var r=n.next,c=ph(n,t);c===0?(n.next=null,a===null?Bl=r:a.next=r,r===null&&(ss=a)):(a=n,(e!==0||(c&3)!==0)&&(ql=!0)),n=r}Ve!==0&&Ve!==5||yi(e),Ua!==0&&(Ua=0)}function ph(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-dt(c),v=1<<m,w=r[m];w===-1?((v&a)===0||(v&n)!==0)&&(r[m]=wg(v,t)):w<=t&&(e.expiredLanes|=v),c&=~v}if(t=Se,a=le,a=$i(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(me===2||me===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&zs(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ks(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&zs(n),yr(a)){case 2:case 8:a=rc;break;case 32:a=qi;break;case 268435456:a=uc;break;default:a=qi}return n=bh.bind(null,e),a=Us(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&zs(n),e.callbackPriority=2,e.callbackNode=null,2}function bh(e,t){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ml()&&e.callbackNode!==a)return null;var n=le;return n=$i(e,e===Se?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(eh(e,n,t),ph(e,we()),e.callbackNode!=null&&e.callbackNode===a?bh.bind(null,e):null)}function _h(e,t){if(Ml())return null;eh(e,t,!0)}function W0(){uy(function(){(fe&6)!==0?Us(lc,Z0):vh()})}function ao(){if(Ua===0){var e=Vn;e===0&&(e=Li,Li<<=1,(Li&261888)===0&&(Li=256)),Ua=e}return Ua}function xh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ki(""+e)}function wh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function I0(e,t,a,n,r){if(t==="submit"&&a&&a.stateNode===r){var c=xh((r[tt]||null).action),m=n.submitter;m&&(t=(t=m[tt]||null)?xh(t.formAction):m.getAttribute("formAction"),t!==null&&(c=t,m=null));var v=new Wi("action","action",null,n,r);e.push({event:v,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ua!==0){var w=m?wh(r,m):new FormData(r);wu(a,{pending:!0,data:w,method:r.method,action:c},null,w)}}else typeof c=="function"&&(v.preventDefault(),w=m?wh(r,m):new FormData(r),wu(a,{pending:!0,data:w,method:r.method,action:c},c,w))},currentTarget:r}]})}}for(var no=0;no<Lr.length;no++){var so=Lr[no],F0=so.toLowerCase(),P0=so[0].toUpperCase()+so.slice(1);zt(F0,"on"+P0)}zt(Fc,"onAnimationEnd"),zt(Pc,"onAnimationIteration"),zt(ed,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(g0,"onTransitionRun"),zt(y0,"onTransitionStart"),zt(v0,"onTransitionCancel"),zt(td,"onTransitionEnd"),On("onMouseEnter",["mouseout","mouseover"]),On("onMouseLeave",["mouseout","mouseover"]),On("onPointerEnter",["pointerout","pointerover"]),On("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ey=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vi));function Sh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],r=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var m=n.length-1;0<=m;m--){var v=n[m],w=v.instance,E=v.currentTarget;if(v=v.listener,w!==c&&r.isPropagationStopped())break e;c=v,r.currentTarget=E;try{c(r)}catch(R){Pi(R)}r.currentTarget=null,c=w}else for(m=0;m<n.length;m++){if(v=n[m],w=v.instance,E=v.currentTarget,v=v.listener,w!==c&&r.isPropagationStopped())break e;c=v,r.currentTarget=E;try{c(r)}catch(R){Pi(R)}r.currentTarget=null,c=w}}}}function ie(e,t){var a=t[vr];a===void 0&&(a=t[vr]=new Set);var n=e+"__bubble";a.has(n)||(Ch(t,e,2,!1),a.add(n))}function io(e,t,a){var n=0;t&&(n|=4),Ch(a,e,n,t)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function lo(e){if(!e[Ll]){e[Ll]=!0,yc.forEach(function(a){a!=="selectionchange"&&(ey.has(a)||io(a,!1,e),io(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ll]||(t[Ll]=!0,io("selectionchange",!1,t))}}function Ch(e,t,a,n){switch(Ph(t)){case 2:var r=Ty;break;case 8:r=Oy;break;default:r=wo}a=r.bind(null,t,a,e),r=void 0,!Ar||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(t,a,{capture:!0,passive:r}):e.addEventListener(t,a,!0):r!==void 0?e.addEventListener(t,a,{passive:r}):e.addEventListener(t,a,!1)}function ro(e,t,a,n,r){var c=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var m=n.tag;if(m===3||m===4){var v=n.stateNode.containerInfo;if(v===r)break;if(m===4)for(m=n.return;m!==null;){var w=m.tag;if((w===3||w===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;v!==null;){if(m=An(v),m===null)return;if(w=m.tag,w===5||w===6||w===26||w===27){n=c=m;continue e}v=v.parentNode}}n=n.return}Tc(function(){var E=c,R=Cr(a),k=[];e:{var T=ad.get(e);if(T!==void 0){var N=Wi,V=e;switch(e){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":N=Xg;break;case"focusin":V="focus",N=Nr;break;case"focusout":V="blur",N=Nr;break;case"beforeblur":case"afterblur":N=Nr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=kg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Wg;break;case Fc:case Pc:case ed:N=qg;break;case td:N=Fg;break;case"scroll":case"scrollend":N=zg;break;case"wheel":N=e0;break;case"copy":case"cut":case"paste":N=Hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=zc;break;case"toggle":case"beforetoggle":N=a0}var Z=(t&4)!==0,be=!Z&&(e==="scroll"||e==="scrollend"),j=Z?T!==null?T+"Capture":null:T;Z=[];for(var S=E,A;S!==null;){var z=S;if(A=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||A===null||j===null||(z=Ls(S,j),z!=null&&Z.push(pi(S,z,A))),be)break;S=S.return}0<Z.length&&(T=new N(T,V,null,a,R),k.push({event:T,listeners:Z}))}}if((t&7)===0){e:{if(T=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",T&&a!==Sr&&(V=a.relatedTarget||a.fromElement)&&(An(V)||V[jn]))break e;if((N||T)&&(T=R.window===R?R:(T=R.ownerDocument)?T.defaultView||T.parentWindow:window,N?(V=a.relatedTarget||a.toElement,N=E,V=V?An(V):null,V!==null&&(be=d(V),Z=V.tag,V!==be||Z!==5&&Z!==27&&Z!==6)&&(V=null)):(N=null,V=E),N!==V)){if(Z=Rc,z="onMouseLeave",j="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(Z=zc,z="onPointerLeave",j="onPointerEnter",S="pointer"),be=N==null?T:qs(N),A=V==null?T:qs(V),T=new Z(z,S+"leave",N,a,R),T.target=be,T.relatedTarget=A,z=null,An(R)===E&&(Z=new Z(j,S+"enter",V,a,R),Z.target=A,Z.relatedTarget=be,z=Z),be=z,N&&V)t:{for(Z=ty,j=N,S=V,A=0,z=j;z;z=Z(z))A++;z=0;for(var K=S;K;K=Z(K))z++;for(;0<A-z;)j=Z(j),A--;for(;0<z-A;)S=Z(S),z--;for(;A--;){if(j===S||S!==null&&j===S.alternate){Z=j;break t}j=Z(j),S=Z(S)}Z=null}else Z=null;N!==null&&jh(k,T,N,Z,!1),V!==null&&be!==null&&jh(k,be,V,Z,!0)}}e:{if(T=E?qs(E):window,N=T.nodeName&&T.nodeName.toLowerCase(),N==="select"||N==="input"&&T.type==="file")var ce=Gc;else if(Lc(T))if($c)ce=f0;else{ce=c0;var Q=o0}else N=T.nodeName,!N||N.toLowerCase()!=="input"||T.type!=="checkbox"&&T.type!=="radio"?E&&wr(E.elementType)&&(ce=Gc):ce=d0;if(ce&&(ce=ce(e,E))){Hc(k,ce,a,R);break e}Q&&Q(e,T,E),e==="focusout"&&E&&T.type==="number"&&E.memoizedProps.value!=null&&xr(T,"number",T.value)}switch(Q=E?qs(E):window,e){case"focusin":(Lc(Q)||Q.contentEditable==="true")&&(kn=Q,Mr=E,Xs=null);break;case"focusout":Xs=Mr=kn=null;break;case"mousedown":Br=!0;break;case"contextmenu":case"mouseup":case"dragend":Br=!1,Wc(k,a,R);break;case"selectionchange":if(m0)break;case"keydown":case"keyup":Wc(k,a,R)}var ne;if(Ur)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else Dn?Bc(e,a)&&(re="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(re="onCompositionStart");re&&(Dc&&a.locale!=="ko"&&(Dn||re!=="onCompositionStart"?re==="onCompositionEnd"&&Dn&&(ne=Oc()):(ya=R,Er="value"in ya?ya.value:ya.textContent,Dn=!0)),Q=Hl(E,re),0<Q.length&&(re=new Uc(re,e,null,a,R),k.push({event:re,listeners:Q}),ne?re.data=ne:(ne=qc(a),ne!==null&&(re.data=ne)))),(ne=s0?i0(e,a):l0(e,a))&&(re=Hl(E,"onBeforeInput"),0<re.length&&(Q=new Uc("onBeforeInput","beforeinput",null,a,R),k.push({event:Q,listeners:re}),Q.data=ne)),I0(k,e,E,a,R)}Sh(k,t)})}function pi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Hl(e,t){for(var a=t+"Capture",n=[];e!==null;){var r=e,c=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||c===null||(r=Ls(e,a),r!=null&&n.unshift(pi(e,r,c)),r=Ls(e,t),r!=null&&n.push(pi(e,r,c))),e.tag===3)return n;e=e.return}return[]}function ty(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jh(e,t,a,n,r){for(var c=t._reactName,m=[];a!==null&&a!==n;){var v=a,w=v.alternate,E=v.stateNode;if(v=v.tag,w!==null&&w===n)break;v!==5&&v!==26&&v!==27||E===null||(w=E,r?(E=Ls(a,c),E!=null&&m.unshift(pi(a,E,w))):r||(E=Ls(a,c),E!=null&&m.push(pi(a,E,w)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var ay=/\r\n?/g,ny=/\u0000|\uFFFD/g;function Ah(e){return(typeof e=="string"?e:""+e).replace(ay,`
`).replace(ny,"")}function Eh(e,t){return t=Ah(t),Ah(e)===t}function pe(e,t,a,n,r,c){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Rn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Rn(e,""+n);break;case"className":Yi(e,"class",n);break;case"tabIndex":Yi(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Yi(e,a,n);break;case"style":Ac(e,n,c);break;case"data":if(t!=="object"){Yi(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Ki(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&pe(e,t,"name",r.name,r,null),pe(e,t,"formEncType",r.formEncType,r,null),pe(e,t,"formMethod",r.formMethod,r,null),pe(e,t,"formTarget",r.formTarget,r,null)):(pe(e,t,"encType",r.encType,r,null),pe(e,t,"method",r.method,r,null),pe(e,t,"target",r.target,r,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Ki(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Jt);break;case"onScroll":n!=null&&ie("scroll",e);break;case"onScrollEnd":n!=null&&ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(l(61));if(a=n.__html,a!=null){if(r.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Ki(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":ie("beforetoggle",e),ie("toggle",e),Vi(e,"popover",n);break;case"xlinkActuate":Xt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Xt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Xt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Xt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Xt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Xt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Vi(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rg.get(a)||a,Vi(e,a,n))}}function uo(e,t,a,n,r,c){switch(a){case"style":Ac(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(l(61));if(a=n.__html,a!=null){if(r.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Rn(e,n):(typeof n=="number"||typeof n=="bigint")&&Rn(e,""+n);break;case"onScroll":n!=null&&ie("scroll",e);break;case"onScrollEnd":n!=null&&ie("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Jt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(r=a.endsWith("Capture"),t=a.slice(2,r?a.length-7:void 0),c=e[tt]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,r),typeof n=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,r);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):Vi(e,a,n)}}}function Pe(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ie("error",e),ie("load",e);var n=!1,r=!1,c;for(c in a)if(a.hasOwnProperty(c)){var m=a[c];if(m!=null)switch(c){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:pe(e,t,c,m,a,null)}}r&&pe(e,t,"srcSet",a.srcSet,a,null),n&&pe(e,t,"src",a.src,a,null);return;case"input":ie("invalid",e);var v=c=m=r=null,w=null,E=null;for(n in a)if(a.hasOwnProperty(n)){var R=a[n];if(R!=null)switch(n){case"name":r=R;break;case"type":m=R;break;case"checked":w=R;break;case"defaultChecked":E=R;break;case"value":c=R;break;case"defaultValue":v=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(l(137,t));break;default:pe(e,t,n,R,a,null)}}wc(e,c,v,w,E,m,r,!1);return;case"select":ie("invalid",e),n=m=c=null;for(r in a)if(a.hasOwnProperty(r)&&(v=a[r],v!=null))switch(r){case"value":c=v;break;case"defaultValue":m=v;break;case"multiple":n=v;default:pe(e,t,r,v,a,null)}t=c,a=m,e.multiple=!!n,t!=null?Nn(e,!!n,t,!1):a!=null&&Nn(e,!!n,a,!0);return;case"textarea":ie("invalid",e),c=r=n=null;for(m in a)if(a.hasOwnProperty(m)&&(v=a[m],v!=null))switch(m){case"value":n=v;break;case"defaultValue":r=v;break;case"children":c=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(l(91));break;default:pe(e,t,m,v,a,null)}Cc(e,n,r,c);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(n=a[w],n!=null))switch(w){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:pe(e,t,w,n,a,null)}return;case"dialog":ie("beforetoggle",e),ie("toggle",e),ie("cancel",e),ie("close",e);break;case"iframe":case"object":ie("load",e);break;case"video":case"audio":for(n=0;n<vi.length;n++)ie(vi[n],e);break;case"image":ie("error",e),ie("load",e);break;case"details":ie("toggle",e);break;case"embed":case"source":case"link":ie("error",e),ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:pe(e,t,E,n,a,null)}return;default:if(wr(t)){for(R in a)a.hasOwnProperty(R)&&(n=a[R],n!==void 0&&uo(e,t,R,n,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(n=a[v],n!=null&&pe(e,t,v,n,a,null))}function sy(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,c=null,m=null,v=null,w=null,E=null,R=null;for(N in a){var k=a[N];if(a.hasOwnProperty(N)&&k!=null)switch(N){case"checked":break;case"value":break;case"defaultValue":w=k;default:n.hasOwnProperty(N)||pe(e,t,N,null,n,k)}}for(var T in n){var N=n[T];if(k=a[T],n.hasOwnProperty(T)&&(N!=null||k!=null))switch(T){case"type":c=N;break;case"name":r=N;break;case"checked":E=N;break;case"defaultChecked":R=N;break;case"value":m=N;break;case"defaultValue":v=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(l(137,t));break;default:N!==k&&pe(e,t,T,N,n,k)}}_r(e,m,v,w,E,R,c,r);return;case"select":N=m=v=T=null;for(c in a)if(w=a[c],a.hasOwnProperty(c)&&w!=null)switch(c){case"value":break;case"multiple":N=w;default:n.hasOwnProperty(c)||pe(e,t,c,null,n,w)}for(r in n)if(c=n[r],w=a[r],n.hasOwnProperty(r)&&(c!=null||w!=null))switch(r){case"value":T=c;break;case"defaultValue":v=c;break;case"multiple":m=c;default:c!==w&&pe(e,t,r,c,n,w)}t=v,a=m,n=N,T!=null?Nn(e,!!a,T,!1):!!n!=!!a&&(t!=null?Nn(e,!!a,t,!0):Nn(e,!!a,a?[]:"",!1));return;case"textarea":N=T=null;for(v in a)if(r=a[v],a.hasOwnProperty(v)&&r!=null&&!n.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:pe(e,t,v,null,n,r)}for(m in n)if(r=n[m],c=a[m],n.hasOwnProperty(m)&&(r!=null||c!=null))switch(m){case"value":T=r;break;case"defaultValue":N=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(l(91));break;default:r!==c&&pe(e,t,m,r,n,c)}Sc(e,T,N);return;case"option":for(var V in a)if(T=a[V],a.hasOwnProperty(V)&&T!=null&&!n.hasOwnProperty(V))switch(V){case"selected":e.selected=!1;break;default:pe(e,t,V,null,n,T)}for(w in n)if(T=n[w],N=a[w],n.hasOwnProperty(w)&&T!==N&&(T!=null||N!=null))switch(w){case"selected":e.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:pe(e,t,w,T,n,N)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Z in a)T=a[Z],a.hasOwnProperty(Z)&&T!=null&&!n.hasOwnProperty(Z)&&pe(e,t,Z,null,n,T);for(E in n)if(T=n[E],N=a[E],n.hasOwnProperty(E)&&T!==N&&(T!=null||N!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(l(137,t));break;default:pe(e,t,E,T,n,N)}return;default:if(wr(t)){for(var be in a)T=a[be],a.hasOwnProperty(be)&&T!==void 0&&!n.hasOwnProperty(be)&&uo(e,t,be,void 0,n,T);for(R in n)T=n[R],N=a[R],!n.hasOwnProperty(R)||T===N||T===void 0&&N===void 0||uo(e,t,R,T,n,N);return}}for(var j in a)T=a[j],a.hasOwnProperty(j)&&T!=null&&!n.hasOwnProperty(j)&&pe(e,t,j,null,n,T);for(k in n)T=n[k],N=a[k],!n.hasOwnProperty(k)||T===N||T==null&&N==null||pe(e,t,k,T,n,N)}function Th(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var r=a[n],c=r.transferSize,m=r.initiatorType,v=r.duration;if(c&&v&&Th(m)){for(m=0,v=r.responseEnd,n+=1;n<a.length;n++){var w=a[n],E=w.startTime;if(E>v)break;var R=w.transferSize,k=w.initiatorType;R&&Th(k)&&(w=w.responseEnd,m+=R*(w<v?1:(v-E)/(w-E)))}if(--n,t+=8*(c+m)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var oo=null,co=null;function Gl(e){return e.nodeType===9?e:e.ownerDocument}function Oh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ho=null;function ly(){var e=window.event;return e&&e.type==="popstate"?e===ho?!1:(ho=e,!0):(ho=null,!1)}var Rh=typeof setTimeout=="function"?setTimeout:void 0,ry=typeof clearTimeout=="function"?clearTimeout:void 0,Uh=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof Uh<"u"?function(e){return Uh.resolve(null).then(e).catch(oy)}:Rh;function oy(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function zh(e,t){var a=t,n=0;do{var r=a.nextSibling;if(e.removeChild(a),r&&r.nodeType===8)if(a=r.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(r),us(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")bi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,bi(a);for(var c=a.firstChild;c;){var m=c.nextSibling,v=c.nodeName;c[Bs]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=m}}else a==="body"&&bi(e.ownerDocument.body);a=r}while(a);us(t)}function Dh(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function mo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mo(a),pr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function cy(e,t,a,n){for(;e.nodeType===1;){var r=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Bs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Ot(e.nextSibling),e===null)break}return null}function dy(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ot(e.nextSibling),e===null))return null;return e}function kh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ot(e.nextSibling),e===null))return null;return e}function go(e){return e.data==="$?"||e.data==="$~"}function yo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function fy(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ot(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var vo=null;function Mh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Ot(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Bh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function qh(e,t,a){switch(t=Gl(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function bi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pr(e)}var Nt=new Map,Lh=new Set;function $l(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ca=G.d;G.d={f:hy,r:my,D:gy,C:yy,L:vy,m:py,X:_y,S:by,M:xy};function hy(){var e=ca.f(),t=zl();return e||t}function my(e){var t=En(e);t!==null&&t.tag===5&&t.type==="form"?tf(t):ca.r(e)}var is=typeof document>"u"?null:document;function Hh(e,t,a){var n=is;if(n&&typeof t=="string"&&t){var r=wt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof a=="string"&&(r+='[crossorigin="'+a+'"]'),Lh.has(r)||(Lh.add(r),e={rel:e,crossOrigin:a,href:t},n.querySelector(r)===null&&(t=n.createElement("link"),Pe(t,"link",e),Ke(t),n.head.appendChild(t)))}}function gy(e){ca.D(e),Hh("dns-prefetch",e,null)}function yy(e,t){ca.C(e,t),Hh("preconnect",e,t)}function vy(e,t,a){ca.L(e,t,a);var n=is;if(n&&e&&t){var r='link[rel="preload"][as="'+wt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(r+='[imagesrcset="'+wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(r+='[imagesizes="'+wt(a.imageSizes)+'"]')):r+='[href="'+wt(e)+'"]';var c=r;switch(t){case"style":c=ls(e);break;case"script":c=rs(e)}Nt.has(c)||(e=_({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Nt.set(c,e),n.querySelector(r)!==null||t==="style"&&n.querySelector(_i(c))||t==="script"&&n.querySelector(xi(c))||(t=n.createElement("link"),Pe(t,"link",e),Ke(t),n.head.appendChild(t)))}}function py(e,t){ca.m(e,t);var a=is;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+wt(n)+'"][href="'+wt(e)+'"]',c=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=rs(e)}if(!Nt.has(c)&&(e=_({rel:"modulepreload",href:e},t),Nt.set(c,e),a.querySelector(r)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xi(c)))return}n=a.createElement("link"),Pe(n,"link",e),Ke(n),a.head.appendChild(n)}}}function by(e,t,a){ca.S(e,t,a);var n=is;if(n&&e){var r=Tn(n).hoistableStyles,c=ls(e);t=t||"default";var m=r.get(c);if(!m){var v={loading:0,preload:null};if(m=n.querySelector(_i(c)))v.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Nt.get(c))&&po(e,a);var w=m=n.createElement("link");Ke(w),Pe(w,"link",e),w._p=new Promise(function(E,R){w.onload=E,w.onerror=R}),w.addEventListener("load",function(){v.loading|=1}),w.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Vl(m,t,n)}m={type:"stylesheet",instance:m,count:1,state:v},r.set(c,m)}}}function _y(e,t){ca.X(e,t);var a=is;if(a&&e){var n=Tn(a).hoistableScripts,r=rs(e),c=n.get(r);c||(c=a.querySelector(xi(r)),c||(e=_({src:e,async:!0},t),(t=Nt.get(r))&&bo(e,t),c=a.createElement("script"),Ke(c),Pe(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(r,c))}}function xy(e,t){ca.M(e,t);var a=is;if(a&&e){var n=Tn(a).hoistableScripts,r=rs(e),c=n.get(r);c||(c=a.querySelector(xi(r)),c||(e=_({src:e,async:!0,type:"module"},t),(t=Nt.get(r))&&bo(e,t),c=a.createElement("script"),Ke(c),Pe(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(r,c))}}function Gh(e,t,a,n){var r=(r=ot.current)?$l(r):null;if(!r)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=ls(a.href),a=Tn(r).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ls(a.href);var c=Tn(r).hoistableStyles,m=c.get(e);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=r.querySelector(_i(e)))&&!c._p&&(m.instance=c,m.state.loading=5),Nt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Nt.set(e,a),c||wy(r,e,a,m.state))),t&&n===null)throw Error(l(528,""));return m}if(t&&n!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=rs(a),a=Tn(r).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function ls(e){return'href="'+wt(e)+'"'}function _i(e){return'link[rel="stylesheet"]['+e+"]"}function $h(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function wy(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Pe(t,"link",a),Ke(t),e.head.appendChild(t))}function rs(e){return'[src="'+wt(e)+'"]'}function xi(e){return"script[async]"+e}function Vh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+wt(a.href)+'"]');if(n)return t.instance=n,Ke(n),n;var r=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ke(n),Pe(n,"style",r),Vl(n,a.precedence,e),t.instance=n;case"stylesheet":r=ls(a.href);var c=e.querySelector(_i(r));if(c)return t.state.loading|=4,t.instance=c,Ke(c),c;n=$h(a),(r=Nt.get(r))&&po(n,r),c=(e.ownerDocument||e).createElement("link"),Ke(c);var m=c;return m._p=new Promise(function(v,w){m.onload=v,m.onerror=w}),Pe(c,"link",n),t.state.loading|=4,Vl(c,a.precedence,e),t.instance=c;case"script":return c=rs(a.src),(r=e.querySelector(xi(c)))?(t.instance=r,Ke(r),r):(n=a,(r=Nt.get(c))&&(n=_({},a),bo(n,r)),e=e.ownerDocument||e,r=e.createElement("script"),Ke(r),Pe(r,"link",n),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Vl(n,a.precedence,e));return t.instance}function Vl(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,c=r,m=0;m<n.length;m++){var v=n[m];if(v.dataset.precedence===t)c=v;else if(c!==r)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function po(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function bo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Yl=null;function Yh(e,t,a){if(Yl===null){var n=new Map,r=Yl=new Map;r.set(a,n)}else r=Yl,n=r.get(a),n||(n=new Map,r.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),r=0;r<a.length;r++){var c=a[r];if(!(c[Bs]||c[Ze]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(t)||"";m=e+m;var v=n.get(m);v?v.push(c):n.set(m,[c])}}return n}function Qh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Sy(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Kh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Cy(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var r=ls(n.href),c=t.querySelector(_i(r));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ql.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,Ke(c);return}c=t.ownerDocument||t,n=$h(n),(r=Nt.get(r))&&po(n,r),c=c.createElement("link"),Ke(c);var m=c;m._p=new Promise(function(v,w){m.onload=v,m.onerror=w}),Pe(c,"link",n),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ql.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var _o=0;function jy(e,t){return e.stylesheets&&e.count===0&&Xl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&Xl(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&_o===0&&(_o=62500*iy());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Xl(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>_o?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(r)}}:null}function Ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Xl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,t.forEach(Ay,e),Kl=null,Ql.call(e))}function Ay(e,t){if(!(t.state.loading&4)){var a=Kl.get(e);if(a)var n=a.get(null);else{a=new Map,Kl.set(e,a);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<r.length;c++){var m=r[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),n=m)}n&&a.set(null,n)}r=t.instance,m=r.getAttribute("data-precedence"),c=a.get(m)||n,c===n&&a.set(null,r),a.set(m,r),this.count++,n=Ql.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),c?c.parentNode.insertBefore(r,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var wi={$$typeof:q,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function Ey(e,t,a,n,r,c,m,v,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Xh(e,t,a,n,r,c,m,v,w,E,R,k){return e=new Ey(e,t,a,m,w,E,R,k,v),t=1,c===!0&&(t|=24),c=ht(3,null,null,t),e.current=c,c.stateNode=e,t=Fr(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:n,isDehydrated:a,cache:t},au(c),e}function Jh(e){return e?(e=qn,e):qn}function Zh(e,t,a,n,r,c){r=Jh(r),n.context===null?n.context=r:n.pendingContext=r,n=wa(t),n.payload={element:a},c=c===void 0?null:c,c!==null&&(n.callback=c),a=Sa(e,n,t),a!==null&&(rt(a,e,t),ei(a,e,t))}function Wh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function xo(e,t){Wh(e,t),(e=e.alternate)&&Wh(e,t)}function Ih(e){if(e.tag===13||e.tag===31){var t=Ia(e,67108864);t!==null&&rt(t,e,67108864),xo(e,67108864)}}function Fh(e){if(e.tag===13||e.tag===31){var t=pt();t=gr(t);var a=Ia(e,t);a!==null&&rt(a,e,t),xo(e,t)}}var Jl=!0;function Ty(e,t,a,n){var r=U.T;U.T=null;var c=G.p;try{G.p=2,wo(e,t,a,n)}finally{G.p=c,U.T=r}}function Oy(e,t,a,n){var r=U.T;U.T=null;var c=G.p;try{G.p=8,wo(e,t,a,n)}finally{G.p=c,U.T=r}}function wo(e,t,a,n){if(Jl){var r=So(n);if(r===null)ro(e,t,n,Zl,a),em(e,n);else if(Ry(r,e,t,a,n))n.stopPropagation();else if(em(e,n),t&4&&-1<Ny.indexOf(e)){for(;r!==null;){var c=En(r);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Ka(c.pendingLanes);if(m!==0){var v=c;for(v.pendingLanes|=2,v.entangledLanes|=2;m;){var w=1<<31-dt(m);v.entanglements[1]|=w,m&=~w}$t(c),(fe&6)===0&&(Rl=we()+500,yi(0))}}break;case 31:case 13:v=Ia(c,2),v!==null&&rt(v,c,2),zl(),xo(c,2)}if(c=So(n),c===null&&ro(e,t,n,Zl,a),c===r)break;r=c}r!==null&&n.stopPropagation()}else ro(e,t,n,null,a)}}function So(e){return e=Cr(e),Co(e)}var Zl=null;function Co(e){if(Zl=null,e=An(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Zl=e,null}function Ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qa()){case lc:return 2;case rc:return 8;case qi:case yg:return 32;case uc:return 268435456;default:return 32}default:return 32}}var jo=!1,Da=null,ka=null,Ma=null,Si=new Map,Ci=new Map,Ba=[],Ny="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function em(e,t){switch(e){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(t.pointerId)}}function ji(e,t,a,n,r,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:c,targetContainers:[r]},t!==null&&(t=En(t),t!==null&&Ih(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Ry(e,t,a,n,r){switch(t){case"focusin":return Da=ji(Da,e,t,a,n,r),!0;case"dragenter":return ka=ji(ka,e,t,a,n,r),!0;case"mouseover":return Ma=ji(Ma,e,t,a,n,r),!0;case"pointerover":var c=r.pointerId;return Si.set(c,ji(Si.get(c)||null,e,t,a,n,r)),!0;case"gotpointercapture":return c=r.pointerId,Ci.set(c,ji(Ci.get(c)||null,e,t,a,n,r)),!0}return!1}function tm(e){var t=An(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,mc(e.priority,function(){Fh(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,mc(e.priority,function(){Fh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=So(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Sr=n,a.target.dispatchEvent(n),Sr=null}else return t=En(a),t!==null&&Ih(t),e.blockedOn=a,!1;t.shift()}return!0}function am(e,t,a){Wl(e)&&a.delete(t)}function Uy(){jo=!1,Da!==null&&Wl(Da)&&(Da=null),ka!==null&&Wl(ka)&&(ka=null),Ma!==null&&Wl(Ma)&&(Ma=null),Si.forEach(am),Ci.forEach(am)}function Il(e,t){e.blockedOn===t&&(e.blockedOn=null,jo||(jo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Uy)))}var Fl=null;function nm(e){Fl!==e&&(Fl=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],r=e[t+2];if(typeof n!="function"){if(Co(n||a)===null)continue;break}var c=En(a);c!==null&&(e.splice(t,3),t-=3,wu(c,{pending:!0,data:r,method:a.method,action:n},n,r))}}))}function us(e){function t(w){return Il(w,e)}Da!==null&&Il(Da,e),ka!==null&&Il(ka,e),Ma!==null&&Il(Ma,e),Si.forEach(t),Ci.forEach(t);for(var a=0;a<Ba.length;a++){var n=Ba[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ba.length&&(a=Ba[0],a.blockedOn===null);)tm(a),a.blockedOn===null&&Ba.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var r=a[n],c=a[n+1],m=r[tt]||null;if(typeof c=="function")m||nm(a);else if(m){var v=null;if(c&&c.hasAttribute("formAction")){if(r=c,m=c[tt]||null)v=m.formAction;else if(Co(r)!==null)continue}else v=m.action;typeof v=="function"?a[n+1]=v:(a.splice(n,3),n-=3),nm(a)}}}function sm(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Ao(e){this._internalRoot=e}Pl.prototype.render=Ao.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,n=pt();Zh(a,n,e,t,null,null)},Pl.prototype.unmount=Ao.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zh(e.current,2,null,e,null,null),zl(),t[jn]=null}};function Pl(e){this._internalRoot=e}Pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=hc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ba.length&&t!==0&&t<Ba[a].priority;a++);Ba.splice(a,0,e),a===0&&tm(e)}};var im=s.version;if(im!=="19.2.0")throw Error(l(527,im,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var zy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var er=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!er.isDisabled&&er.supportsFiber)try{Ds=er.inject(zy),ct=er}catch{}}return Ei.createRoot=function(e,t){if(!u(e))throw Error(l(299));var a=!1,n="",r=ff,c=hf,m=mf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Xh(e,1,!1,null,null,a,n,null,r,c,m,sm),e[jn]=t.current,lo(e),new Ao(t)},Ei.hydrateRoot=function(e,t,a){if(!u(e))throw Error(l(299));var n=!1,r="",c=ff,m=hf,v=mf,w=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),t=Xh(e,1,!0,t,a??null,n,r,w,c,m,v,sm),t.context=Jh(null),a=t.current,n=pt(),n=gr(n),r=wa(n),r.callback=null,Sa(a,r,n),a=n,t.current.lanes=a,Ms(t,a),$t(t),e[jn]=t.current,lo(e),new Pl(t)},Ei.version="19.2.0",Ei}var dm;function Py(){if(dm)return To.exports;dm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}return o(),To.exports=Fy(),To.exports}var ev=Py();const tv=Gm(ev);class av{authRepository;constructor(s){this.authRepository=s}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(s,i){return!s||!i?{success:!1,error:"Email and password are required"}:this.isValidEmail(s)?this.authRepository.signIn(s,i):{success:!1,error:"Invalid email format"}}async signUp(s,i){return!s||!i?{success:!1,error:"Email and password are required"}:this.isValidEmail(s)?i.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(s,i):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(s){return this.authRepository.onAuthStateChange(s)}isValidEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}}class nv{campaignRepository;authRepository;constructor(s,i){this.campaignRepository=s,this.authRepository=i}async getCampaigns(){const s=await this.authRepository.getCurrentUser();return s?this.campaignRepository.getCampaigns(s.id):{success:!1,error:"User not authenticated"}}async getCampaign(s){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const l=await this.campaignRepository.canUserAccessCampaign(s,i.id);return!l.success||!l.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(s)}async createCampaign(s){const i=await this.authRepository.getCurrentUser();return i?s.name?.trim()?s.name.length>100?{success:!1,error:"Campaign name must be 100 characters or less"}:this.campaignRepository.createCampaign(i.id,{name:s.name.trim(),description:s.description?.trim()}):{success:!1,error:"Campaign name is required"}:{success:!1,error:"User not authenticated"}}async updateCampaign(s,i){const l=await this.authRepository.getCurrentUser();if(!l)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(s,l.id);if(!u.success||u.data!=="admin")return{success:!1,error:"Only administrators can update campaigns"};if(i.name!==void 0&&!i.name?.trim())return{success:!1,error:"Campaign name cannot be empty"};if(i.name&&i.name.length>100)return{success:!1,error:"Campaign name must be 100 characters or less"};const d={};return i.name!==void 0&&(d.name=i.name.trim()),i.description!==void 0&&(d.description=i.description?.trim()),this.campaignRepository.updateCampaign(s,d)}async deleteCampaign(s){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const l=await this.campaignRepository.getUserRole(s,i.id);return!l.success||l.data!=="admin"?{success:!1,error:"Only administrators can delete campaigns"}:this.campaignRepository.deleteCampaign(s)}async getCampaignMembers(s){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const l=await this.campaignRepository.canUserAccessCampaign(s,i.id);return!l.success||!l.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(s)}async addMemberByEmail(s,i,l){const u=await this.authRepository.getCurrentUser();if(!u)return{success:!1,error:"User not authenticated"};const d=await this.campaignRepository.getUserRole(s,u.id);return!d.success||d.data!=="admin"?{success:!1,error:"Only administrators can add members"}:i?.trim()?this.isValidEmail(i)?["admin","gm","player"].includes(l)?this.campaignRepository.addMemberByEmail(s,i.trim(),l):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(s,i,l){const u=await this.authRepository.getCurrentUser();if(!u)return{success:!1,error:"User not authenticated"};const d=await this.campaignRepository.getUserRole(s,u.id);return!d.success||d.data!=="admin"?{success:!1,error:"Only administrators can update member roles"}:["admin","gm","player"].includes(l)?this.campaignRepository.updateMemberRole(s,i,l):{success:!1,error:"Invalid role specified"}}async removeMember(s,i){const l=await this.authRepository.getCurrentUser();if(!l)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(s,l.id);return!u.success||u.data!=="admin"?{success:!1,error:"Only administrators can remove members"}:this.campaignRepository.removeMember(s,i)}isValidEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}}const sv="modulepreload",iv=function(o){return"/traveller-dashboard/"+o},fm={},bn=function(s,i,l){let u=Promise.resolve();if(i&&i.length>0){let y=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");u=y(i.map(p=>{if(p=iv(p),p in fm)return;fm[p]=!0;const b=p.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":sv,b||(x.as="script"),x.crossOrigin="",x.href=p,g&&x.setAttribute("nonce",g),document.head.appendChild(x),b)return new Promise((C,O)=>{x.addEventListener("load",C),x.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${p}`)))})}))}function d(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return u.then(f=>{for(const g of f||[])g.status==="rejected"&&d(g.reason);return s().catch(d)})},lv=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>bn(async()=>{const{default:l}=await Promise.resolve().then(()=>js);return{default:l}},void 0).then(({default:l})=>l(...i)):s=fetch,(...i)=>s(...i)};class tc extends Error{constructor(s,i="FunctionsError",l){super(s),this.name=i,this.context=l}}class hm extends tc{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class mm extends tc{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class gm extends tc{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Go;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Go||(Go={}));var rv=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};class uv{constructor(s,{headers:i={},customFetch:l,region:u=Go.Any}={}){this.url=s,this.headers=i,this.region=u,this.fetch=lv(l)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return rv(this,arguments,void 0,function*(i,l={}){var u;try{const{headers:d,method:f,body:g,signal:y}=l;let p={},{region:b}=l;b||(b=this.region);const _=new URL(`${this.url}/${i}`);b&&b!=="any"&&(p["x-region"]=b,_.searchParams.set("forceFunctionRegion",b));let x;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=g):typeof g=="string"?(p["Content-Type"]="text/plain",x=g):typeof FormData<"u"&&g instanceof FormData?x=g:(p["Content-Type"]="application/json",x=JSON.stringify(g)));const C=yield this.fetch(_.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),d),body:x,signal:y}).catch($=>{throw $.name==="AbortError"?$:new hm($)}),O=C.headers.get("x-relay-error");if(O&&O==="true")throw new mm(C);if(!C.ok)throw new gm(C);let D=((u=C.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),M;return D==="application/json"?M=yield C.json():D==="application/octet-stream"?M=yield C.blob():D==="text/event-stream"?M=C:D==="multipart/form-data"?M=yield C.formData():M=yield C.text(),{data:M,error:null,response:C}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new hm(d)}:{data:null,error:d,response:d instanceof gm||d instanceof mm?d.context:void 0}}})}}var Je={},os={},cs={},ds={},fs={},hs={},ov=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cs=ov();const cv=Cs.fetch,$m=Cs.fetch.bind(Cs),Vm=Cs.Headers,dv=Cs.Request,fv=Cs.Response,js=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vm,Request:dv,Response:fv,default:$m,fetch:cv},Symbol.toStringTag,{value:"Module"})),hv=Qy(js);var tr={},ym;function Ym(){if(ym)return tr;ym=1,Object.defineProperty(tr,"__esModule",{value:!0});class o extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return tr.default=o,tr}var vm;function Qm(){if(vm)return hs;vm=1;var o=hs&&hs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(hs,"__esModule",{value:!0});const s=o(hv),i=o(Ym());class l{constructor(d){var f,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let y=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var b,_,x,C;let O=null,D=null,M=null,$=p.status,L=p.statusText;if(p.ok){if(this.method!=="HEAD"){const H=await p.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?D=H:D=JSON.parse(H))}const Y=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),P=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");Y&&P&&P.length>1&&(M=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(D)&&(D.length>1?(O={code:"PGRST116",details:`Results contain ${D.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},D=null,M=null,$=406,L="Not Acceptable"):D.length===1?D=D[0]:D=null)}else{const Y=await p.text();try{O=JSON.parse(Y),Array.isArray(O)&&p.status===404&&(D=[],O=null,$=200,L="OK")}catch{p.status===404&&Y===""?($=204,L="No Content"):O={message:Y}}if(O&&this.isMaybeSingle&&(!((C=O?.details)===null||C===void 0)&&C.includes("0 rows"))&&(O=null,$=200,L="OK"),O&&this.shouldThrowOnError)throw new i.default(O)}return{error:O,data:D,count:M,status:$,statusText:L}});return this.shouldThrowOnError||(y=y.catch(p=>{var b,_,x;return{error:{message:`${(b=p?.name)!==null&&b!==void 0?b:"FetchError"}: ${p?.message}`,details:`${(_=p?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(x=p?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),y.then(d,f)}returns(){return this}overrideTypes(){return this}}return hs.default=l,hs}var pm;function Km(){if(pm)return fs;pm=1;var o=fs&&fs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(fs,"__esModule",{value:!0});const s=o(Qm());class i extends s.default{select(u){let d=!1;const f=(u??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:g,referencedTable:y=g}={}){const p=y?`${y}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:g=f}={}){const y=typeof g>"u"?"offset":`${g}.offset`,p=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${u}`),this.url.searchParams.set(p,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:g=!1,wal:y=!1,format:p="text"}={}){var b;const _=[u?"analyze":null,d?"verbose":null,f?"settings":null,g?"buffers":null,y?"wal":null].filter(Boolean).join("|"),x=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return fs.default=i,fs}var bm;function ac(){if(bm)return ds;bm=1;var o=ds&&ds.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ds,"__esModule",{value:!0});const s=o(Km());class i extends s.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}in(u,d){const f=Array.from(new Set(d)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(u,`in.(${f})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:f,type:g}={}){let y="";g==="plain"?y="pl":g==="phrase"?y="ph":g==="websearch"&&(y="w");const p=f===void 0?"":`(${f})`;return this.url.searchParams.append(u,`${y}fts${p}.${d}`),this}match(u){return Object.entries(u).forEach(([d,f])=>{this.url.searchParams.append(d,`eq.${f}`)}),this}not(u,d,f){return this.url.searchParams.append(u,`not.${d}.${f}`),this}or(u,{foreignTable:d,referencedTable:f=d}={}){const g=f?`${f}.or`:"or";return this.url.searchParams.append(g,`(${u})`),this}filter(u,d,f){return this.url.searchParams.append(u,`${d}.${f}`),this}}return ds.default=i,ds}var _m;function Xm(){if(_m)return cs;_m=1;var o=cs&&cs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(cs,"__esModule",{value:!0});const s=o(ac());class i{constructor(u,{headers:d={},schema:f,fetch:g}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=g}select(u,d){const{head:f=!1,count:g}=d??{},y=f?"HEAD":"GET";let p=!1;const b=(u??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new s.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var g;const y="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const p=u.reduce((b,_)=>b.concat(Object.keys(_)),[]);if(p.length>0){const b=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:g,defaultToNull:y=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const _=u.reduce((x,C)=>x.concat(Object.keys(C)),[]);if(_.length>0){const x=[...new Set(_)].map(C=>`"${C}"`);this.url.searchParams.set("columns",x.join(","))}}return new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(u,{count:d}={}){var f;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return cs.default=i,cs}var xm;function mv(){if(xm)return os;xm=1;var o=os&&os.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(os,"__esModule",{value:!0});const s=o(Xm()),i=o(ac());class l{constructor(d,{headers:f={},schema:g,fetch:y}={}){this.url=d,this.headers=new Headers(f),this.schemaName=g,this.fetch=y}from(d){const f=new URL(`${this.url}/${d}`);return new s.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new l(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:g=!1,get:y=!1,count:p}={}){var b;let _;const x=new URL(`${this.url}/rpc/${d}`);let C;g||y?(_=g?"HEAD":"GET",Object.entries(f).filter(([D,M])=>M!==void 0).map(([D,M])=>[D,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([D,M])=>{x.searchParams.append(D,M)})):(_="POST",C=f);const O=new Headers(this.headers);return p&&O.set("Prefer",`count=${p}`),new i.default({method:_,url:x,headers:O,schema:this.schemaName,body:C,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return os.default=l,os}var wm;function gv(){if(wm)return Je;wm=1;var o=Je&&Je.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Je,"__esModule",{value:!0}),Je.PostgrestError=Je.PostgrestBuilder=Je.PostgrestTransformBuilder=Je.PostgrestFilterBuilder=Je.PostgrestQueryBuilder=Je.PostgrestClient=void 0;const s=o(mv());Je.PostgrestClient=s.default;const i=o(Xm());Je.PostgrestQueryBuilder=i.default;const l=o(ac());Je.PostgrestFilterBuilder=l.default;const u=o(Km());Je.PostgrestTransformBuilder=u.default;const d=o(Qm());Je.PostgrestBuilder=d.default;const f=o(Ym());return Je.PostgrestError=f.default,Je.default={PostgrestClient:s.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},Je}var yv=gv();const vv=Gm(yv),{PostgrestClient:pv,PostgrestQueryBuilder:j_,PostgrestFilterBuilder:A_,PostgrestTransformBuilder:E_,PostgrestBuilder:T_,PostgrestError:O_}=vv;class bv{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const l=i.node,u=parseInt(l.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const l=this.getWebSocketConstructor();return new l(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const _v="2.75.0",xv=`realtime-js/${_v}`,wv="1.0.0",$o=1e4,Sv=1e3,Cv=100;var Oi;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Oi||(Oi={}));var Ye;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Ye||(Ye={}));var Bt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Bt||(Bt={}));var Vo;(function(o){o.websocket="websocket"})(Vo||(Vo={}));var mn;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(mn||(mn={}));class jv{constructor(){this.HEADER_LENGTH=1}decode(s,i){return s.constructor===ArrayBuffer?i(this._binaryDecode(s)):i(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const i=new DataView(s),l=new TextDecoder;return this._decodeBroadcast(s,i,l)}_decodeBroadcast(s,i,l){const u=i.getUint8(1),d=i.getUint8(2);let f=this.HEADER_LENGTH+2;const g=l.decode(s.slice(f,f+u));f=f+u;const y=l.decode(s.slice(f,f+d));f=f+d;const p=JSON.parse(l.decode(s.slice(f,s.byteLength)));return{ref:null,topic:g,event:y,payload:p}}}class Jm{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(je||(je={}));const Sm=(o,s,i={})=>{var l;const u=(l=i.skipTypes)!==null&&l!==void 0?l:[];return s?Object.keys(s).reduce((d,f)=>(d[f]=Av(f,o,s,u),d),{}):{}},Av=(o,s,i,l)=>{const u=s.find(g=>g.name===o),d=u?.type,f=i[o];return d&&!l.includes(d)?Zm(d,f):Yo(f)},Zm=(o,s)=>{if(o.charAt(0)==="_"){const i=o.slice(1,o.length);return Nv(s,i)}switch(o){case je.bool:return Ev(s);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return Tv(s);case je.json:case je.jsonb:return Ov(s);case je.timestamp:return Rv(s);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return Yo(s);default:return Yo(s)}},Yo=o=>o,Ev=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Tv=o=>{if(typeof o=="string"){const s=parseFloat(o);if(!Number.isNaN(s))return s}return o},Ov=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(s){return console.log(`JSON parse error: ${s}`),o}return o},Nv=(o,s)=>{if(typeof o!="string")return o;const i=o.length-1,l=o[i];if(o[0]==="{"&&l==="}"){let d;const f=o.slice(1,i);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(g=>Zm(s,g))}return o},Rv=o=>typeof o=="string"?o.replace(" ","T"):o,Wm=o=>{let s=o;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Ro{constructor(s,i,l={},u=$o){this.channel=s,this.event=i,this.payload=l,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var l;return this._hasReceived(s)&&i((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(l=>l.status===s).forEach(l=>l.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Cm;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Cm||(Cm={}));class Ni{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ni.syncState(this.state,u,d,f),this.pendingDiffs.forEach(y=>{this.state=Ni.syncDiff(this.state,y,d,f)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Ni.syncDiff(this.state,u,d,f),g())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,l,u){const d=this.cloneDeep(s),f=this.transformState(i),g={},y={};return this.map(d,(p,b)=>{f[p]||(y[p]=b)}),this.map(f,(p,b)=>{const _=d[p];if(_){const x=b.map(M=>M.presence_ref),C=_.map(M=>M.presence_ref),O=b.filter(M=>C.indexOf(M.presence_ref)<0),D=_.filter(M=>x.indexOf(M.presence_ref)<0);O.length>0&&(g[p]=O),D.length>0&&(y[p]=D)}else g[p]=b}),this.syncDiff(d,{joins:g,leaves:y},l,u)}static syncDiff(s,i,l,u){const{joins:d,leaves:f}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return l||(l=()=>{}),u||(u=()=>{}),this.map(d,(g,y)=>{var p;const b=(p=s[g])!==null&&p!==void 0?p:[];if(s[g]=this.cloneDeep(y),b.length>0){const _=s[g].map(C=>C.presence_ref),x=b.filter(C=>_.indexOf(C.presence_ref)<0);s[g].unshift(...x)}l(g,b,y)}),this.map(f,(g,y)=>{let p=s[g];if(!p)return;const b=y.map(_=>_.presence_ref);p=p.filter(_=>b.indexOf(_.presence_ref)<0),s[g]=p,u(g,p,y),p.length===0&&delete s[g]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(l=>i(l,s[l]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,l)=>{const u=s[l];return"metas"in u?i[l]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):i[l]=u,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jm;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(jm||(jm={}));var Ri;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Ri||(Ri={}));var da;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(da||(da={}));class nc{constructor(s,i={config:{}},l){var u,d;if(this.topic=s,this.params=i,this.socket=l,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Ro(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new Jm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Ni(this),this.broadcastEndpointURL=Wm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,i=this.timeout){var l,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:f,presence:g,private:y}}=this.params,p=(u=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(C=>C.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[Ri.PRESENCE]&&this.bindings[Ri.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,_={},x={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:y};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(C=>s?.(da.CHANNEL_ERROR,C)),this._onClose(()=>s?.(da.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:C})=>{var O;if(this.socket.setAuth(),C===void 0){s?.(da.SUBSCRIBED);return}else{const D=this.bindings.postgres_changes,M=(O=D?.length)!==null&&O!==void 0?O:0,$=[];for(let L=0;L<M;L++){const q=D[L],{filter:{event:Y,schema:P,table:H,filter:ee}}=q,xe=C&&C[L];if(xe&&xe.event===Y&&xe.schema===P&&xe.table===H&&xe.filter===ee)$.push(Object.assign(Object.assign({},q),{id:xe.id}));else{this.unsubscribe(),this.state=Ye.errored,s?.(da.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,s&&s(da.SUBSCRIBED);return}}).receive("error",C=>{this.state=Ye.errored,s?.(da.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{s?.(da.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,l){return this.state===Ye.joined&&s===Ri.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,i,l)}async send(s,i={}){var l,u;if(!this._canPush()&&s.type==="broadcast"){const{event:d,payload:f}=s,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);return await((u=p.body)===null||u===void 0?void 0:u.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,g,y;const p=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((y=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&d("ok"),p.receive("ok",()=>d("ok")),p.receive("error",()=>d("error")),p.receive("timeout",()=>d("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=Ye.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(u=>{l=new Ro(this,Bt.leave,{},s),l.receive("ok",()=>{i(),u("ok")}).receive("timeout",()=>{i(),u("timed out")}).receive("error",()=>{u("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(s,i,l){const u=new AbortController,d=setTimeout(()=>u.abort(),l),f=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:u.signal}));return clearTimeout(d),f}_push(s,i,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Ro(this,s,i,l);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>Cv){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,l){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,l){var u,d;const f=s.toLocaleLowerCase(),{close:g,error:y,leave:p,join:b}=Bt;if(l&&[g,y,p,b].indexOf(f)>=0&&l!==this._joinRef())return;let x=this._onMessage(f,i,l);if(i&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(C=>{var O,D,M;return((O=C.filter)===null||O===void 0?void 0:O.event)==="*"||((M=(D=C.filter)===null||D===void 0?void 0:D.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===f}).map(C=>C.callback(x,l)):(d=this.bindings[f])===null||d===void 0||d.filter(C=>{var O,D,M,$,L,q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in C){const Y=C.id,P=(O=C.filter)===null||O===void 0?void 0:O.event;return Y&&((D=i.ids)===null||D===void 0?void 0:D.includes(Y))&&(P==="*"||P?.toLocaleLowerCase()===((M=i.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const Y=(L=($=C?.filter)===null||$===void 0?void 0:$.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return Y==="*"||Y===((q=i?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===f}).map(C=>{if(typeof x=="object"&&"ids"in x){const O=x.data,{schema:D,table:M,commit_timestamp:$,type:L,errors:q}=O;x=Object.assign(Object.assign({},{schema:D,table:M,commit_timestamp:$,eventType:L,new:{},old:{},errors:q}),this._getPayloadRecords(O))}C.callback(x,l)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,l){const u=s.toLocaleLowerCase(),d={type:u,filter:i,callback:l};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(s,i){const l=s.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&nc.isEqual(u.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const l in s)if(s[l]!==i[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(Bt.close,{},s)}_onError(s){this._on(Bt.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=Sm(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=Sm(s.columns,s.old_record)),i}}const Uo=()=>{},ar={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Uv=[1e3,2e3,5e3,1e4],zv=1e4,Dv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kv{constructor(s,i){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$o,this.transport=null,this.heartbeatIntervalMs=ar.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uo,this.ref=0,this.reconnectTimer=null,this.logger=Uo,this.conn=null,this.sendBuffer=[],this.serializer=new jv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let d;return u?d=u:typeof fetch>"u"?d=(...f)=>bn(async()=>{const{default:g}=await Promise.resolve().then(()=>js);return{default:g}},void 0).then(({default:g})=>g(...f)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((l=i?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${Vo.websocket}`,this.httpEndpoint=Wm(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bv.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wv}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},s?this.conn.close(s,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,l){this.logger(s,i,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Oi.connecting:return mn.Connecting;case Oi.open:return mn.Open;case Oi.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const l=`realtime:${s}`,u=this.getChannels().find(d=>d.topic===l);if(u)return u;{const d=new nc(`realtime:${s}`,i,this);return this.channels.push(d),d}}push(s){const{topic:i,event:l,payload:u,ref:d}=s,f=()=>{this.encode(s,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${i} ${l} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(Sv,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},ar.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(l=>l.topic===s&&(l._isJoined()||l._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:u,payload:d,ref:f}=i,g=f?`(${f})`:"",y=d.status||"";this.log("receive",`${y} ${l} ${u} ${g}`.trim(),d),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(u,d,f)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(Bt.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const l=s.match(/\?/)?"&":"?",u=new URLSearchParams(i);return`${s}${l}${u}`}_workerObjectUrl(s){let i;if(s)i=s;else{const l=new Blob([Dv],{type:"application/javascript"});i=URL.createObjectURL(l)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i;s?i=s:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(l=>{const u={access_token:i,version:xv};i&&l.updateJoinPayload(u),l.joinedOnce&&l._isJoined()&&l._push(Bt.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(l=>{try{l(i)}catch(u){this.log("error",`error in ${s} callback`,u)}})}catch(l){this.log("error",`error triggering ${s} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Jm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ar.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,l,u,d,f,g,y,p,b;if(this.transport=(i=s?.transport)!==null&&i!==void 0?i:null,this.timeout=(l=s?.timeout)!==null&&l!==void 0?l:$o,this.heartbeatIntervalMs=(u=s?.heartbeatIntervalMs)!==null&&u!==void 0?u:ar.HEARTBEAT_INTERVAL,this.worker=(d=s?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=s?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=s?.heartbeatCallback)!==null&&g!==void 0?g:Uo,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=s?.reconnectAfterMs)!==null&&y!==void 0?y:(_=>Uv[_-1]||zv),this.encode=(p=s?.encode)!==null&&p!==void 0?p:((_,x)=>x(JSON.stringify(_))),this.decode=(b=s?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class sc extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function $e(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Mv extends sc{constructor(s,i,l){super(s),this.name="StorageApiError",this.status=i,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qo extends sc{constructor(s,i){super(s),this.name="StorageUnknownError",this.originalError=i}}var Bv=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};const Im=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>bn(async()=>{const{default:l}=await Promise.resolve().then(()=>js);return{default:l}},void 0).then(({default:l})=>l(...i)):s=fetch,(...i)=>s(...i)},qv=()=>Bv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bn(()=>Promise.resolve().then(()=>js),void 0)).Response:Response}),Ko=o=>{if(Array.isArray(o))return o.map(i=>Ko(i));if(typeof o=="function"||o!==Object(o))return o;const s={};return Object.entries(o).forEach(([i,l])=>{const u=i.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));s[u]=Ko(l)}),s},Lv=o=>{if(typeof o!="object"||o===null)return!1;const s=Object.getPrototypeOf(o);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var xn=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};const zo=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Hv=(o,s,i)=>xn(void 0,void 0,void 0,function*(){const l=yield qv();o instanceof l&&!i?.noResolveJson?o.json().then(u=>{const d=o.status||500,f=u?.statusCode||d+"";s(new Mv(zo(u),d,f))}).catch(u=>{s(new Qo(zo(u),u))}):s(new Qo(zo(o),o))}),Gv=(o,s,i,l)=>{const u={method:o,headers:s?.headers||{}};return o==="GET"||!l?u:(Lv(l)?(u.headers=Object.assign({"Content-Type":"application/json"},s?.headers),u.body=JSON.stringify(l)):u.body=l,s?.duplex&&(u.duplex=s.duplex),Object.assign(Object.assign({},u),i))};function ki(o,s,i,l,u,d){return xn(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(i,Gv(s,l,u,d)).then(y=>{if(!y.ok)throw y;return l?.noResolveJson?y:y.json()}).then(y=>f(y)).catch(y=>Hv(y,g,l))})})}function rr(o,s,i,l){return xn(this,void 0,void 0,function*(){return ki(o,"GET",s,i,l)})}function Vt(o,s,i,l,u){return xn(this,void 0,void 0,function*(){return ki(o,"POST",s,l,u,i)})}function Xo(o,s,i,l,u){return xn(this,void 0,void 0,function*(){return ki(o,"PUT",s,l,u,i)})}function $v(o,s,i,l){return xn(this,void 0,void 0,function*(){return ki(o,"HEAD",s,Object.assign(Object.assign({},i),{noResolveJson:!0}),l)})}function Fm(o,s,i,l,u){return xn(this,void 0,void 0,function*(){return ki(o,"DELETE",s,l,u,i)})}var Vv=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};class Yv{constructor(s,i){this.downloadFn=s,this.shouldThrowOnError=i}then(s,i){return this.execute().then(s,i)}execute(){return Vv(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}}var Qv=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};class Kv{constructor(s,i){this.downloadFn=s,this.shouldThrowOnError=i}asStream(){return new Yv(this.downloadFn,this.shouldThrowOnError)}then(s,i){return this.execute().then(s,i)}execute(){return Qv(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}}var ut=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};const Xv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Am={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jv{constructor(s,i={},l,u){this.shouldThrowOnError=!1,this.url=s,this.headers=i,this.bucketId=l,this.fetch=Im(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,i,l,u){return ut(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},Am),u);let g=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const y=f.metadata;typeof Blob<"u"&&l instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y)),d.append("",l)):typeof FormData<"u"&&l instanceof FormData?(d=l,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y))):(d=l,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,y&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),u?.headers&&(g=Object.assign(Object.assign({},g),u.headers));const p=this._removeEmptyFolders(i),b=this._getFinalPath(p),_=yield(s=="PUT"?Xo:Vt)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}})}upload(s,i,l){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,i,l)})}uploadToSignedUrl(s,i,l,u){return ut(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(s),f=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",i);try{let y;const p=Object.assign({upsert:Am.upsert},u),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&l instanceof Blob?(y=new FormData,y.append("cacheControl",p.cacheControl),y.append("",l)):typeof FormData<"u"&&l instanceof FormData?(y=l,y.append("cacheControl",p.cacheControl)):(y=l,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const _=yield Xo(this.fetch,g.toString(),y,{headers:b});return{data:{path:d,fullPath:_.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if($e(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(s,i){return ut(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s);const u=Object.assign({},this.headers);i?.upsert&&(u["x-upsert"]="true");const d=yield Vt(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:u}),f=new URL(this.url+d.url),g=f.searchParams.get("token");if(!g)throw new sc("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:g},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}})}update(s,i,l){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,i,l)})}move(s,i,l){return ut(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($e(u))return{data:null,error:u};throw u}})}copy(s,i,l){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield Vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($e(u))return{data:null,error:u};throw u}})}createSignedUrl(s,i,l){return ut(this,void 0,void 0,function*(){try{let u=this._getFinalPath(s),d=yield Vt(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:i},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const f=l?.download?`&download=${l.download===!0?"":l.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($e(u))return{data:null,error:u};throw u}})}createSignedUrls(s,i,l){return ut(this,void 0,void 0,function*(){try{const u=yield Vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:s},{headers:this.headers}),d=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($e(u))return{data:null,error:u};throw u}})}download(s,i){const u=typeof i?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(i?.transform||{}),f=d?`?${d}`:"",g=this._getFinalPath(s),y=()=>rr(this.fetch,`${this.url}/${u}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new Kv(y,this.shouldThrowOnError)}info(s){return ut(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{const l=yield rr(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:Ko(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}})}exists(s){return ut(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{return yield $v(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($e(l)&&l instanceof Qo){const u=l.originalError;if([400,404].includes(u?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(s,i){const l=this._getFinalPath(s),u=[],d=i?.download?`download=${i.download===!0?"":i.download}`:"";d!==""&&u.push(d);const g=typeof i?.transform<"u"?"render/image":"object",y=this.transformOptsToQueryString(i?.transform||{});y!==""&&u.push(y);let p=u.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${l}${p}`)}}}remove(s){return ut(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}list(s,i,l){return ut(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},Xv),i),{prefix:s||""});return{data:yield Vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},l),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($e(u))return{data:null,error:u};throw u}})}listV2(s,i){return ut(this,void 0,void 0,function*(){try{const l=Object.assign({},s);return{data:yield Vt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const i=[];return s.width&&i.push(`width=${s.width}`),s.height&&i.push(`height=${s.height}`),s.resize&&i.push(`resize=${s.resize}`),s.format&&i.push(`format=${s.format}`),s.quality&&i.push(`quality=${s.quality}`),i.join("&")}}const Zv="2.75.0",Wv={"X-Client-Info":`storage-js/${Zv}`};var ms=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};class Iv{constructor(s,i={},l,u){this.shouldThrowOnError=!1;const d=new URL(s);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wv),i),this.fetch=Im(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ms(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}getBucket(s){return ms(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}createBucket(s){return ms(this,arguments,void 0,function*(i,l={public:!1}){try{return{data:yield Vt(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($e(u))return{data:null,error:u};throw u}})}updateBucket(s,i){return ms(this,void 0,void 0,function*(){try{return{data:yield Xo(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}})}emptyBucket(s){return ms(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}deleteBucket(s){return ms(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}}class Fv extends Iv{constructor(s,i={},l,u){super(s,i,l,u)}from(s){return new Jv(this.url,this.headers,s,this.fetch)}}const Pv="2.75.0";let Ti="";typeof Deno<"u"?Ti="deno":typeof document<"u"?Ti="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ti="react-native":Ti="node";const ep={"X-Client-Info":`supabase-js-${Ti}/${Pv}`},tp={headers:ep},ap={schema:"public"},np={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sp={};var ip=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};const lp=o=>{let s;return o?s=o:typeof fetch>"u"?s=$m:s=fetch,(...i)=>s(...i)},rp=()=>typeof Headers>"u"?Vm:Headers,up=(o,s,i)=>{const l=lp(i),u=rp();return(d,f)=>ip(void 0,void 0,void 0,function*(){var g;const y=(g=yield s())!==null&&g!==void 0?g:o;let p=new u(f?.headers);return p.has("apikey")||p.set("apikey",o),p.has("Authorization")||p.set("Authorization",`Bearer ${y}`),l(d,Object.assign(Object.assign({},f),{headers:p}))})};var op=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};function cp(o){return o.endsWith("/")?o:o+"/"}function dp(o,s){var i,l;const{db:u,auth:d,realtime:f,global:g}=o,{db:y,auth:p,realtime:b,global:_}=s,x={db:Object.assign(Object.assign({},y),u),auth:Object.assign(Object.assign({},p),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},_),g),{headers:Object.assign(Object.assign({},(i=_?.headers)!==null&&i!==void 0?i:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>op(this,void 0,void 0,function*(){return""})};return o.accessToken?x.accessToken=o.accessToken:delete x.accessToken,x}function fp(o){const s=o?.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cp(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Pm="2.75.0",_s=30*1e3,Jo=3,Do=Jo*_s,hp="http://localhost:9999",mp="supabase.auth.token",gp={"X-Client-Info":`gotrue-js/${Pm}`},Zo="X-Supabase-Api-Version",eg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vp=600*1e3;class zi extends Error{constructor(s,i,l){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=l}}function X(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class pp extends zi{constructor(s,i,l){super(s,i,l),this.name="AuthApiError",this.status=i,this.code=l}}function bp(o){return X(o)&&o.name==="AuthApiError"}class gn extends zi{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class Va extends zi{constructor(s,i,l,u){super(s,l,u),this.name=i,this.status=l}}class Ha extends Va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _p(o){return X(o)&&o.name==="AuthSessionMissingError"}class gs extends Va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nr extends Va{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class sr extends Va{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xp(o){return X(o)&&o.name==="AuthImplicitGrantRedirectError"}class Em extends Va{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wo extends Va{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function ko(o){return X(o)&&o.name==="AuthRetryableFetchError"}class Tm extends Va{constructor(s,i,l){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=l}}class Io extends Va{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Om=` 	
\r=`.split(""),wp=(()=>{const o=new Array(128);for(let s=0;s<o.length;s+=1)o[s]=-1;for(let s=0;s<Om.length;s+=1)o[Om[s].charCodeAt(0)]=-2;for(let s=0;s<ur.length;s+=1)o[ur[s].charCodeAt(0)]=s;return o})();function Nm(o,s,i){if(o!==null)for(s.queue=s.queue<<8|o,s.queuedBits+=8;s.queuedBits>=6;){const l=s.queue>>s.queuedBits-6&63;i(ur[l]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const l=s.queue>>s.queuedBits-6&63;i(ur[l]),s.queuedBits-=6}}function tg(o,s,i){const l=wp[o];if(l>-1)for(s.queue=s.queue<<6|l,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Rm(o){const s=[],i=f=>{s.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{jp(f,l,i)};for(let f=0;f<o.length;f+=1)tg(o.charCodeAt(f),u,d);return s.join("")}function Sp(o,s){if(o<=127){s(o);return}else if(o<=2047){s(192|o>>6),s(128|o&63);return}else if(o<=65535){s(224|o>>12),s(128|o>>6&63),s(128|o&63);return}else if(o<=1114111){s(240|o>>18),s(128|o>>12&63),s(128|o>>6&63),s(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Cp(o,s){for(let i=0;i<o.length;i+=1){let l=o.charCodeAt(i);if(l>55295&&l<=56319){const u=(l-55296)*1024&65535;l=(o.charCodeAt(i+1)-56320&65535|u)+65536,i+=1}Sp(l,s)}}function jp(o,s,i){if(s.utf8seq===0){if(o<=127){i(o);return}for(let l=1;l<6;l+=1)if((o>>7-l&1)===0){s.utf8seq=l;break}if(s.utf8seq===2)s.codepoint=o&31;else if(s.utf8seq===3)s.codepoint=o&15;else if(s.utf8seq===4)s.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|o&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function Ss(o){const s=[],i={queue:0,queuedBits:0},l=u=>{s.push(u)};for(let u=0;u<o.length;u+=1)tg(o.charCodeAt(u),i,l);return new Uint8Array(s)}function Ap(o){const s=[];return Cp(o,i=>s.push(i)),new Uint8Array(s)}function yn(o){const s=[],i={queue:0,queuedBits:0},l=u=>{s.push(u)};return o.forEach(u=>Nm(u,i,l)),Nm(null,i,l),s.join("")}function Ep(o){return Math.round(Date.now()/1e3)+o}function Tp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const s=Math.random()*16|0;return(o=="x"?s:s&3|8).toString(16)})}const bt=()=>typeof window<"u"&&typeof document<"u",dn={tested:!1,writable:!1},ag=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dn.tested)return dn.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),dn.tested=!0,dn.writable=!0}catch{dn.tested=!0,dn.writable=!1}return dn.writable};function Op(o){const s={},i=new URL(o);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((u,d)=>{s[d]=u})}catch{}return i.searchParams.forEach((l,u)=>{s[u]=l}),s}const ng=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>bn(async()=>{const{default:l}=await Promise.resolve().then(()=>js);return{default:l}},void 0).then(({default:l})=>l(...i)):s=fetch,(...i)=>s(...i)},Np=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",xs=async(o,s,i)=>{await o.setItem(s,JSON.stringify(i))},fn=async(o,s)=>{const i=await o.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},La=async(o,s)=>{await o.removeItem(s)};class dr{constructor(){this.promise=new dr.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}dr.promiseConstructor=Promise;function Mo(o){const s=o.split(".");if(s.length!==3)throw new Io("Invalid JWT structure");for(let l=0;l<s.length;l++)if(!yp.test(s[l]))throw new Io("JWT not in base64url format");return{header:JSON.parse(Rm(s[0])),payload:JSON.parse(Rm(s[1])),signature:Ss(s[2]),raw:{header:s[0],payload:s[1]}}}async function Rp(o){return await new Promise(s=>{setTimeout(()=>s(null),o)})}function Up(o,s){return new Promise((l,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await o(d);if(!s(d,null,f)){l(f);return}}catch(f){if(!s(d,f)){u(f);return}}})()})}function zp(o){return("0"+o.toString(16)).substr(-2)}function Dp(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=i.length;let u="";for(let d=0;d<56;d++)u+=i.charAt(Math.floor(Math.random()*l));return u}return crypto.getRandomValues(s),Array.from(s,zp).join("")}async function kp(o){const i=new TextEncoder().encode(o),l=await crypto.subtle.digest("SHA-256",i),u=new Uint8Array(l);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Mp(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const i=await kp(o);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ys(o,s,i=!1){const l=Dp();let u=l;i&&(u+="/PASSWORD_RECOVERY"),await xs(o,`${s}-code-verifier`,u);const d=await Mp(l);return[d,l===d?"plain":"s256"]}const Bp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qp(o){const s=o.headers.get(Zo);if(!s||!s.match(Bp))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function Lp(o){if(!o)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(o<=s)throw new Error("JWT has expired")}function Hp(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vs(o){if(!Gp.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bo(){const o={};return new Proxy(o,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Um(o){return JSON.parse(JSON.stringify(o))}var $p=function(o,s){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&s.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(o);u<l.length;u++)s.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(o,l[u])&&(i[l[u]]=o[l[u]]);return i};const hn=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Vp=[502,503,504];async function zm(o){var s;if(!Np(o))throw new Wo(hn(o),0);if(Vp.includes(o.status))throw new Wo(hn(o),o.status);let i;try{i=await o.json()}catch(d){throw new gn(hn(d),d)}let l;const u=qp(o);if(u&&u.getTime()>=eg["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?l=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(l=i.error_code),l){if(l==="weak_password")throw new Tm(hn(i),o.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(l==="session_not_found")throw new Ha}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Tm(hn(i),o.status,i.weak_password.reasons);throw new pp(hn(i),o.status||500,l)}const Yp=(o,s,i,l)=>{const u={method:o,headers:s?.headers||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),u.body=JSON.stringify(l),Object.assign(Object.assign({},u),i))};async function te(o,s,i,l){var u;const d=Object.assign({},l?.headers);d[Zo]||(d[Zo]=eg["2024-01-01"].name),l?.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const f=(u=l?.query)!==null&&u!==void 0?u:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",y=await Qp(o,s,i+g,{headers:d,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(y):{data:Object.assign({},y),error:null}}async function Qp(o,s,i,l,u,d){const f=Yp(s,l,u,d);let g;try{g=await o(i,Object.assign({},f))}catch(y){throw console.error(y),new Wo(hn(y),0)}if(g.ok||await zm(g),l?.noResolveJson)return g;try{return await g.json()}catch(y){await zm(y)}}function Mt(o){var s;let i=null;Jp(o)&&(i=Object.assign({},o),o.expires_at||(i.expires_at=Ep(o.expires_in)));const l=(s=o.user)!==null&&s!==void 0?s:o;return{data:{session:i,user:l},error:null}}function Dm(o){const s=Mt(o);return!s.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0)&&(s.data.weak_password=o.weak_password),s}function Ga(o){var s;return{data:{user:(s=o.user)!==null&&s!==void 0?s:o},error:null}}function Kp(o){return{data:o,error:null}}function Xp(o){const{action_link:s,email_otp:i,hashed_token:l,redirect_to:u,verification_type:d}=o,f=$p(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:s,email_otp:i,hashed_token:l,redirect_to:u,verification_type:d},y=Object.assign({},f);return{data:{properties:g,user:y},error:null}}function km(o){return o}function Jp(o){return o.access_token&&o.refresh_token&&o.expires_in}const qo=["global","local","others"];var Zp=function(o,s){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&s.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(o);u<l.length;u++)s.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(o,l[u])&&(i[l[u]]=o[l[u]]);return i};class Wp{constructor({url:s="",headers:i={},fetch:l}){this.url=s,this.headers=i,this.fetch=ng(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,i=qo[0]){if(qo.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qo.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(l){if(X(l))return{data:null,error:l};throw l}}async inviteUserByEmail(s,i={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Ga})}catch(l){if(X(l))return{data:{user:null},error:l};throw l}}async generateLink(s){try{const{options:i}=s,l=Zp(s,["options"]),u=Object.assign(Object.assign({},l),i);return"newEmail"in l&&(u.new_email=l?.newEmail,delete u.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Xp,redirectTo:i?.redirectTo})}catch(i){if(X(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:Ga})}catch(i){if(X(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,l,u,d,f,g,y;try{const p={nextPage:null,lastPage:0,total:0},b=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=s?.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(d=(u=s?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:km});if(b.error)throw b.error;const _=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return C.length>0&&(C.forEach(O=>{const D=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(O.split(";")[1].split("=")[1]);p[`${M}Page`]=D}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(X(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){vs(s);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:Ga})}catch(i){if(X(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){vs(s);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:Ga})}catch(l){if(X(l))return{data:{user:null},error:l};throw l}}async deleteUser(s,i=!1){vs(s);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:Ga})}catch(l){if(X(l))return{data:{user:null},error:l};throw l}}async _listFactors(s){vs(s.userId);try{const{data:i,error:l}=await te(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:i,error:l}}catch(i){if(X(i))return{data:null,error:i};throw i}}async _deleteFactor(s){vs(s.userId),vs(s.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}}async _listOAuthClients(s){var i,l,u,d,f,g,y;try{const p={nextPage:null,lastPage:0,total:0},b=await te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=s?.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(d=(u=s?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:km});if(b.error)throw b.error;const _=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return C.length>0&&(C.forEach(O=>{const D=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(O.split(";")[1].split("=")[1]);p[`${M}Page`]=D}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(X(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(s){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(X(i))return{data:null,error:i};throw i}}async _getOAuthClient(s){try{return await te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(X(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(s){try{return await te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(X(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(s){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(X(i))return{data:null,error:i};throw i}}}function Mm(o={}){return{getItem:s=>o[s]||null,setItem:(s,i)=>{o[s]=i},removeItem:s=>{delete o[s]}}}const ps={debug:!!(globalThis&&ag()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sg extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class Ip extends sg{}async function Fp(o,s,i){ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,s);const l=new globalThis.AbortController;return s>0&&setTimeout(()=>{l.abort(),ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async u=>{if(u){ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await i()}finally{ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(s===0)throw ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Ip(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(ps.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function Pp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ig(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function eb(o){return parseInt(o,16)}function tb(o){const s=new TextEncoder().encode(o);return"0x"+Array.from(s,l=>l.toString(16).padStart(2,"0")).join("")}function ab(o){var s;const{chainId:i,domain:l,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:g,requestId:y,resources:p,scheme:b,uri:_,version:x}=o;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((s=o.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const C=ig(o.address),O=b?`${b}://${l}`:l,D=o.statement?`${o.statement}
`:"",M=`${O} wants you to sign in with your Ethereum account:
${C}

${D}`;let $=`URI: ${_}
Version: ${x}
Chain ID: ${i}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&($+=`
Expiration Time: ${u.toISOString()}`),g&&($+=`
Not Before: ${g.toISOString()}`),y&&($+=`
Request ID: ${y}`),p){let L=`
Resources:`;for(const q of p){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);L+=`
- ${q}`}$+=L}return`${M}
${$}`}class Ge extends Error{constructor({message:s,code:i,cause:l,name:u}){var d;super(s,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=u??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=i}}class or extends Ge{constructor(s,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:s}),this.name="WebAuthnUnknownError",this.originalError=i}}function nb({error:o,options:s}){var i,l,u;const{publicKey:d}=s;if(!d)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(s.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((i=d.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(s.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Ge({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(rg(f)){if(d.rp.id!==f)return new Ge({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function sb({error:o,options:s}){const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(s.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Ge({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const l=window.location.hostname;if(rg(l)){if(i.rpId!==l)return new Ge({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}var lg=function(o,s){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&s.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(o);u<l.length;u++)s.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(o,l[u])&&(i[l[u]]=o[l[u]]);return i};class ib{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const lb=new ib;function rb(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:s,user:i,excludeCredentials:l}=o,u=lg(o,["challenge","user","excludeCredentials"]),d=Ss(s).buffer,f=Object.assign(Object.assign({},i),{id:Ss(i.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:d,user:f});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let y=0;y<l.length;y++){const p=l[y];g.excludeCredentials[y]=Object.assign(Object.assign({},p),{id:Ss(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function ub(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:s,allowCredentials:i}=o,l=lg(o,["challenge","allowCredentials"]),u=Ss(s).buffer,d=Object.assign(Object.assign({},l),{challenge:u});if(i&&i.length>0){d.allowCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const g=i[f];d.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Ss(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function ob(o){var s;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const i=o;return{id:o.id,rawId:o.id,response:{attestationObject:yn(new Uint8Array(o.response.attestationObject)),clientDataJSON:yn(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function cb(o){var s;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const i=o,l=o.getClientExtensionResults(),u=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:yn(new Uint8Array(u.authenticatorData)),clientDataJSON:yn(new Uint8Array(u.clientDataJSON)),signature:yn(new Uint8Array(u.signature)),userHandle:u.userHandle?yn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function rg(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Bm(){var o,s;return!!(bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.get)=="function")}async function db(o){try{const s=await navigator.credentials.create(o);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new or("Browser returned unexpected credential type",s)}:{data:null,error:new or("Empty credential response",s)}}catch(s){return{data:null,error:nb({error:s,options:o})}}}async function fb(o){try{const s=await navigator.credentials.get(o);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new or("Browser returned unexpected credential type",s)}:{data:null,error:new or("Empty credential response",s)}}catch(s){return{data:null,error:sb({error:s,options:o})}}}const hb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},mb={userVerification:"preferred",hints:["security-key"]};function cr(...o){const s=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),i=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),l={};for(const u of o)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))l[d]=f;else if(i(f))l[d]=f;else if(s(f)){const g=l[d];s(g)?l[d]=cr(g,f):l[d]=cr(f)}else l[d]=f}return l}function gb(o,s){return cr(hb,o,s||{})}function yb(o,s){return cr(mb,o,s||{})}class vb{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:i,friendlyName:l,signal:u},d){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:s,webauthn:i});if(!f)return{data:null,error:g};const y=u??lb.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${l}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=gb(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:_}=await db({publicKey:p,signal:y});return b?{data:{factorId:s,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:_}}case"request":{const p=yb(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:_}=await fb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:y}));return b?{data:{factorId:s,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:_}}}}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in challenge",f)}}}async _verify({challengeId:s,factorId:i,webauthn:l}){return this.client.mfa.verify({factorId:i,challengeId:s,webauthn:l})}async _authenticate({factorId:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}},d){if(!i)return{data:null,error:new zi("rpId is required for WebAuthn authentication")};try{if(!Bm())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:s,webauthn:{rpId:i,rpOrigins:l},signal:u},{request:d});if(!f)return{data:null,error:g};const{webauthn:y}=f;return this._verify({factorId:s,challengeId:f.challengeId,webauthn:{type:y.type,rpId:i,rpOrigins:l,credential_response:y.credential_response}})}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in authenticate",f)}}}async _register({friendlyName:s,rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u},d){if(!i)return{data:null,error:new zi("rpId is required for WebAuthn registration")};try{if(!Bm())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:s});if(!f)return await this.client.mfa.listFactors().then(b=>{var _;return(_=b.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===s&&x.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:y,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:i,rpOrigins:l},signal:u},{create:d});return y?this._verify({factorId:f.id,challengeId:y.challengeId,webauthn:{rpId:i,rpOrigins:l,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:p}}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in register",f)}}}}Pp();const pb={url:hp,storageKey:mp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qm(o,s,i){return await i()}const bs={};class Di{get jwks(){var s,i;return(i=(s=bs[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=bs[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{cachedAt:s})}constructor(s){var i,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Di.nextInstanceID,Di.nextInstanceID+=1,this.instanceID>0&&bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},pb),s);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Wp({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=ng(u.fetch),this.lock=u.lock||qm,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:bt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Fp:this.lock=qm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vb(this)},this.persistSession?(u.storage?this.storage=u.storage:ag()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mm(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Mm(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pm}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const i=Op(window.location.href);let l="none";if(this._isImplicitGrantCallback(i)?l="implicit":await this._isPKCECallback(i)&&(l="pkce"),bt()&&this.detectSessionInUrl&&l!=="none"){const{data:u,error:d}=await this._getSessionFromURL(i,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),xp(d)){const y=(s=d.details)===null||s===void 0?void 0:s.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return X(i)?{error:i}:{error:new gn("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,l,u;try{const d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(i=s?.options)===null||i===void 0?void 0:i.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(u=s?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Mt}),{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const y=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(d){if(X(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(s){var i,l,u;try{let d;if("email"in s){const{email:b,password:_,options:x}=s;let C=null,O=null;this.flowType==="pkce"&&([C,O]=await ys(this.storage,this.storageKey)),d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:b,password:_,data:(i=x?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:C,code_challenge_method:O},xform:Mt})}else if("phone"in s){const{phone:b,password:_,options:x}=s;d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:_,data:(l=x?.data)!==null&&l!==void 0?l:{},channel:(u=x?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Mt})}else throw new nr("You must provide either an email or phone number and a password");const{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const y=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(d){if(X(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(s){try{let i;if("email"in s){const{email:d,password:f,options:g}=s;i=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Dm})}else if("phone"in s){const{phone:d,password:f,options:g}=s;i=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Dm})}else throw new nr("You must provide either an email or phone number and a password");const{data:l,error:u}=i;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new gs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:u})}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(s){var i,l,u,d;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=s.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=s.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=s.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;switch(i){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(s){var i,l,u,d,f,g,y,p,b,_,x;let C,O;if("message"in s)C=s.message,O=s.signature;else{const{chain:D,wallet:M,statement:$,options:L}=s;let q;if(bt())if(typeof M=="object")q=M;else{const Ee=window;if("ethereum"in Ee&&typeof Ee.ethereum=="object"&&"request"in Ee.ethereum&&typeof Ee.ethereum.request=="function")q=Ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=M}const Y=new URL((i=L?.url)!==null&&i!==void 0?i:window.location.href),P=await q.request({method:"eth_requestAccounts"}).then(Ee=>Ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=ig(P[0]);let ee=(l=L?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!ee){const Ee=await q.request({method:"eth_chainId"});ee=eb(Ee)}const xe={domain:Y.host,address:H,statement:$,uri:Y.href,version:"1",chainId:ee,nonce:(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=L?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=L?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=L?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=L?.signInWithEthereum)===null||b===void 0?void 0:b.resources};C=ab(xe),O=await q.request({method:"personal_sign",params:[tb(C),H]})}try{const{data:D,error:M}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:O},!((_=s.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=s.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Mt});if(M)throw M;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new gs}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:M})}catch(D){if(X(D))return{data:{user:null,session:null},error:D};throw D}}async signInWithSolana(s){var i,l,u,d,f,g,y,p,b,_,x,C;let O,D;if("message"in s)O=s.message,D=s.signature;else{const{chain:M,wallet:$,statement:L,options:q}=s;let Y;if(bt())if(typeof $=="object")Y=$;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))Y=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=$}const P=new URL((i=q?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Y&&Y.signIn){const H=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),L?{statement:L}:null));let ee;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")ee=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)ee=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)O=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),D=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${P.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(u=(l=q?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=q?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((f=q?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((g=q?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((y=q?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((p=q?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((_=(b=q?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||_===void 0)&&_.length?["Resources",...q.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const H=await Y.signMessage(new TextEncoder().encode(O),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=H}}try{const{data:M,error:$}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:yn(D)},!((x=s.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(C=s.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Mt});if($)throw $;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new gs}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:$})}catch(M){if(X(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(s){const i=await fn(this.storage,`${this.storageKey}-code-verifier`),[l,u]=(i??"").split("/");try{const{data:d,error:f}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:l},xform:Mt});if(await La(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new gs}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(X(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(s){try{const{options:i,provider:l,token:u,access_token:d,nonce:f}=s,g=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Mt}),{data:y,error:p}=g;return p?{data:{user:null,session:null},error:p}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new gs}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:p})}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(s){var i,l,u,d,f;try{if("email"in s){const{email:g,options:y}=s;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await ys(this.storage,this.storageKey));const{error:_}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=y?.data)!==null&&i!==void 0?i:{},create_user:(l=y?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:y?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in s){const{phone:g,options:y}=s,{data:p,error:b}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=y?.data)!==null&&u!==void 0?u:{},create_user:(d=y?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(f=y?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:b}}throw new nr("You must provide either an email or phone number.")}catch(g){if(X(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(s){var i,l;try{let u,d;"options"in s&&(u=(i=s.options)===null||i===void 0?void 0:i.redirectTo,d=(l=s.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:g}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:Mt});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const y=f.session,p=f.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:p,session:y},error:null}}catch(u){if(X(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(s){var i,l,u;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await ys(this.storage,this.storageKey)),await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(l=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&l!==void 0?l:void 0}),!((u=s?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Kp})}catch(d){if(X(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:l}=s;if(l)throw l;if(!i)throw new Ha;const{error:u}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:u}})}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:l,type:u,options:d}=s,{error:f}=await te(this.fetch,"POST",i,{headers:this.headers,body:{email:l,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in s){const{phone:l,type:u,options:d}=s,{data:f,error:g}=await te(this.fetch,"POST",i,{headers:this.headers,body:{phone:l,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new nr("You must provide either an email or phone number and a type")}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await l,await i()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=i();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const l=s.expires_at?s.expires_at*1e3-Date.now()<Do:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",s.expires_at),!l){if(this.userStorage){const f=await fn(this.userStorage,this.storageKey+"-user");f?.user?s.user=f.user:s.user=Bo()}if(this.storage.isServer&&s.user){let f=this.suppressGetSessionWarning;s=new Proxy(s,{get:(y,p,b)=>(!f&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,p,b))})}return{data:{session:s},error:null}}const{data:u,error:d}=await this._callRefreshToken(s.refresh_token);return d?{data:{session:null},error:d}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:Ga}):await this._useSession(async i=>{var l,u,d;const{data:f,error:g}=i;if(g)throw g;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ha}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:Ga})})}catch(i){if(X(i))return _p(i)&&(await this._removeSession(),await La(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async l=>{const{data:u,error:d}=l;if(d)throw d;if(!u.session)throw new Ha;const f=u.session;let g=null,y=null;this.flowType==="pkce"&&s.email!=null&&([g,y]=await ys(this.storage,this.storageKey));const{data:p,error:b}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:g,code_challenge_method:y}),jwt:f.access_token,xform:Ga});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(l){if(X(l))return{data:{user:null},error:l};throw l}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Ha;const i=Date.now()/1e3;let l=i,u=!0,d=null;const{payload:f}=Mo(s.access_token);if(f.exp&&(l=f.exp,u=l<=i),u){const{data:g,error:y}=await this._callRefreshToken(s.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:y}=await this._getUser(s.access_token);if(y)throw y;d={access_token:s.access_token,refresh_token:s.refresh_token,user:g.user,token_type:"bearer",expires_in:l-i,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(i){if(X(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var l;if(!s){const{data:f,error:g}=i;if(g)throw g;s=(l=f.session)!==null&&l!==void 0?l:void 0}if(!s?.refresh_token)throw new Ha;const{data:u,error:d}=await this._callRefreshToken(s.refresh_token);return d?{data:{user:null,session:null},error:d}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(s,i){try{if(!bt())throw new sr("No browser detected.");if(s.error||s.error_description||s.error_code)throw new sr(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Em("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sr("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Em("No code detected.");const{data:L,error:q}=await this._exchangeCodeForSession(s.code);if(q)throw q;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:g,expires_at:y,token_type:p}=s;if(!d||!g||!f||!p)throw new sr("No session defined in URL");const b=Math.round(Date.now()/1e3),_=parseInt(g);let x=b+_;y&&(x=parseInt(y));const C=x-b;C*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${_}s`);const O=x-_;b-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,x,b):b-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,x,b);const{data:D,error:M}=await this._getUser(d);if(M)throw M;const $={provider_token:l,provider_refresh_token:u,access_token:d,expires_in:_,expires_at:x,refresh_token:f,token_type:p,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:s.type},error:null}}catch(l){if(X(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var l;const{data:u,error:d}=i;if(d)return{error:d};const f=(l=u.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:g}=await this.admin.signOut(f,s);if(g&&!(bp(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return s!=="others"&&(await this._removeSession(),await La(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const i=Tp(),l={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:l}}}async _emitInitialSession(s){return await this._useSession(async i=>{var l,u;try{const{data:{session:d},error:f}=i;if(f)throw f;await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",s,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(s))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",d),console.error(d)}})}async resetPasswordForEmail(s,i={}){let l=null,u=null;this.flowType==="pkce"&&([l,u]=await ys(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:l,code_challenge_method:u,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(d){if(X(d))return{data:null,error:d};throw d}}async getUserIdentities(){var s;try{const{data:i,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var i;try{const{data:l,error:u}=await this._useSession(async d=>{var f,g,y,p,b;const{data:_,error:x}=d;if(x)throw x;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(f=s.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=s.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=s.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",C,{headers:this.headers,jwt:(b=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return bt()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(l?.url),{data:{provider:s.provider,url:l?.url},error:null}}catch(l){if(X(l))return{data:{provider:s.provider,url:null},error:l};throw l}}async linkIdentityIdToken(s){return await this._useSession(async i=>{var l;try{const{error:u,data:{session:d}}=i;if(u)throw u;const{options:f,provider:g,token:y,access_token:p,nonce:b}=s,_=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:y,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Mt}),{data:x,error:C}=_;return C?{data:{user:null,session:null},error:C}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new gs}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:C})}catch(u){if(X(u))return{data:{user:null,session:null},error:u};throw u}})}async unlinkIdentity(s){try{return await this._useSession(async i=>{var l,u;const{data:d,error:f}=i;if(f)throw f;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})})}catch(i){if(X(i))return{data:null,error:i};throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const l=Date.now();return await Up(async u=>(u>0&&await Rp(200*Math.pow(2,u-1)),this._debug(i,"refreshing attempt",u),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Mt})),(u,d)=>{const f=200*Math.pow(2,u);return d&&ko(d)&&Date.now()+f-l<_s})}catch(l){if(this._debug(i,"error",l),X(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const l=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",l),bt()&&!i.skipBrowserRedirect&&window.location.assign(l),{data:{provider:s,url:l},error:null}}async _recoverAndRefresh(){var s,i;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const u=await fn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await xs(this.userStorage,this.storageKey+"-user",f)),u.user=(s=f?.user)!==null&&s!==void 0?s:Bo()}else if(u&&!u.user&&!u.user){const f=await fn(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await La(this.storage,this.storageKey+"-user"),await xs(this.storage,this.storageKey,u)):u.user=Bo()}if(this._debug(l,"session from storage",u),!this._isValidSession(u)){this._debug(l,"session is not valid"),u!==null&&await this._removeSession();return}const d=((i=u.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Do;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${Do}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),ko(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(l,"error",u),console.error(u);return}finally{this._debug(l,"end")}}async _callRefreshToken(s){var i,l;if(!s)throw new Ha;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new dr;const{data:d,error:f}=await this._refreshAccessToken(s);if(f)throw f;if(!d.session)throw new Ha;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(u,"error",d),X(d)){const f={data:null,error:d};return ko(d)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(s,i,l=!0){const u=`#_notifyAllSubscribers(${s})`;this._debug(u,"begin",i,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:s,session:i});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(s,i)}catch(y){d.push(y)}});if(await Promise.all(f),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const i=Object.assign({},s),l=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&i.user&&await xs(this.userStorage,this.storageKey+"-user",{user:i.user});const u=Object.assign({},i);delete u.user;const d=Um(u);await xs(this.storage,this.storageKey,d)}else{const u=Um(i);await xs(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await La(this.storage,this.storageKey),await La(this.storage,this.storageKey+"-code-verifier"),await La(this.storage,this.storageKey+"-user"),this.userStorage&&await La(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&bt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:l}}=i;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((l.expires_at*1e3-s)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${_s}ms, refresh threshold is ${Jo} ticks`),u<=Jo&&await this._callRefreshToken(l.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof sg)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,l){const u=[`provider=${encodeURIComponent(i)}`];if(l?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&u.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,f]=await ys(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(l?.queryParams){const d=new URLSearchParams(l.queryParams);u.push(d.toString())}return l?.skipBrowserRedirect&&u.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${s}?${u.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var l;const{data:u,error:d}=i;return d?{data:null,error:d}:await te(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token})})}catch(i){if(X(i))return{data:null,error:i};throw i}}async _enroll(s){try{return await this._useSession(async i=>{var l,u;const{data:d,error:f}=i;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:y,error:p}=await te(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return p?{data:null,error:p}:(s.factorType==="totp"&&y.type==="totp"&&(!((u=y?.totp)===null||u===void 0)&&u.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(i){if(X(i))return{data:null,error:i};throw i}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var l;const{data:u,error:d}=i;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?ob(s.webauthn.credential_response):cb(s.webauthn.credential_response)})}:{code:s.code}),{data:g,error:y}=await te(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:y})})}catch(i){if(X(i))return{data:null,error:i};throw i}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var l;const{data:u,error:d}=i;if(d)return{data:null,error:d};const f=await te(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:rb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:ub(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(X(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(s){const{data:i,error:l}=await this._challenge({factorId:s.factorId});return l?{data:null,error:l}:await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){var s;const{data:{user:i},error:l}=await this.getUser();if(l)return{data:null,error:l};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(s=i?.factors)!==null&&s!==void 0?s:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var i,l;const{data:{session:u},error:d}=s;if(d)return{data:null,error:d};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Mo(u.access_token);let g=null;f.aal&&(g=f.aal);let y=g;((l=(i=u.user.factors)===null||i===void 0?void 0:i.filter(_=>_.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(y="aal2");const b=f.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:b},error:null}}))}async fetchJwk(s,i={keys:[]}){let l=i.keys.find(g=>g.kid===s);if(l)return l;const u=Date.now();if(l=this.jwks.keys.find(g=>g.kid===s),l&&this.jwks_cached_at+vp>u)return l;const{data:d,error:f}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,l=d.keys.find(g=>g.kid===s),!l)?null:l}async getClaims(s,i={}){try{let l=s;if(!l){const{data:C,error:O}=await this.getSession();if(O||!C.session)return{data:null,error:O};l=C.session.access_token}const{header:u,payload:d,signature:f,raw:{header:g,payload:y}}=Mo(l);i?.allowExpired||Lp(d.exp);const p=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!p){const{error:C}=await this.getUser(l);if(C)throw C;return{data:{claims:d,header:u,signature:f},error:null}}const b=Hp(u.alg),_=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,_,f,Ap(`${g}.${y}`)))throw new Io("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(l){if(X(l))return{data:null,error:l};throw l}}}Di.nextInstanceID=0;const bb=Di;class _b extends bb{constructor(s){super(s)}}var xb=function(o,s,i,l){function u(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function g(b){try{p(l.next(b))}catch(_){f(_)}}function y(b){try{p(l.throw(b))}catch(_){f(_)}}function p(b){b.done?d(b.value):u(b.value).then(g,y)}p((l=l.apply(o,s||[])).next())})};class wb{constructor(s,i,l){var u,d,f;this.supabaseUrl=s,this.supabaseKey=i;const g=fp(s);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const y=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:ap,realtime:sp,auth:Object.assign(Object.assign({},np),{storageKey:y}),global:tp},b=dp(l??{},p);this.storageKey=(u=b.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(_,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=up(i,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new pv(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Fv(this.storageUrl.href,this.headers,this.fetch,l?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new uv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,i={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,i,l)}channel(s,i={config:{}}){return this.realtime.channel(s,i)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return xb(this,void 0,void 0,function*(){var s,i;if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:i,detectSessionInUrl:l,storage:u,userStorage:d,storageKey:f,flowType:g,lock:y,debug:p},b,_){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _b({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),b),storageKey:f,autoRefreshToken:s,persistSession:i,detectSessionInUrl:l,storage:u,userStorage:d,flowType:g,lock:y,debug:p,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new kv(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,l)=>{this._handleTokenChanged(i,"CLIENT",l?.access_token)})}_handleTokenChanged(s,i,l){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sb=(o,s,i)=>new wb(o,s,i);function Cb(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const s=o.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Cb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jb="https://xtdudfccgbdanmmncwhn.supabase.co",Ab="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",Ae=Sb(jb,Ab,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class Eb{async getCurrentUser(){try{const{data:{user:s},error:i}=await Ae.auth.getUser();return i||!s?null:{id:s.id,email:s.email||"",displayName:s.user_metadata?.display_name,createdAt:new Date(s.created_at)}}catch{return null}}async signIn(s,i){try{const{data:l,error:u}=await Ae.auth.signInWithPassword({email:s,password:i});return u?{success:!1,error:u.message}:{success:!0,data:{id:l.user.id,email:l.user.email||"",displayName:l.user.user_metadata?.display_name,createdAt:new Date(l.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(s,i){try{const{data:l,error:u}=await Ae.auth.signUp({email:s,password:i});return u?{success:!1,error:u.message}:l.user?{success:!0,data:{id:l.user.id,email:l.user.email||"",displayName:l.user.user_metadata?.display_name,createdAt:new Date(l.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:s}=await Ae.auth.signOut();return s?{success:!1,error:s.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(s){const{data:{subscription:i}}=Ae.auth.onAuthStateChange((l,u)=>{if(u?.user){const d={id:u.user.id,email:u.user.email||"",displayName:u.user.user_metadata?.display_name,createdAt:new Date(u.user.created_at)};s(d)}else s(null)});return()=>i.unsubscribe()}}class ug{async getCampaigns(s){try{const{data:i,error:l}=await Ae.from("campaigns").select(`
          *,
          campaign_members!inner(
            role,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",s).order("created_at",{ascending:!1});return l?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:i.map(d=>({id:d.id,name:d.name,description:d.description||void 0,createdBy:d.created_by,createdAt:new Date(d.created_at),updatedAt:new Date(d.updated_at),userRole:d.campaign_members[0]?.role,memberCount:d.member_count?.[0]?.count||0,isOwner:d.created_by===s}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(s){try{const{data:i,error:l}=await Ae.from("campaigns").select("*").eq("id",s).single();return l?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:i.id,name:i.name,description:i.description||void 0,createdBy:i.created_by,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(s,i){try{const{data:l,error:u}=await Ae.from("campaigns").insert({name:i.name,description:i.description,created_by:s}).select().single();if(u)return{success:!1,error:`Failed to create campaign: ${u.message}`};const{error:d}=await Ae.from("campaign_members").insert({campaign_id:l.id,user_id:s,role:"admin"});return d?(await Ae.from("campaigns").delete().eq("id",l.id),{success:!1,error:`Failed to set up campaign membership: ${d.message}`}):{success:!0,data:{id:l.id,name:l.name,description:l.description||void 0,createdBy:l.created_by,createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(s,i){try{const{error:l}=await Ae.from("campaigns").update({name:i.name,description:i.description,updated_at:new Date().toISOString()}).eq("id",s);return l?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(s){try{const{error:i}=await Ae.from("campaigns").delete().eq("id",s);return i?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(s){try{const{data:i,error:l}=await Ae.from("campaign_members").select("id, user_id, role, created_at").eq("campaign_id",s).order("created_at",{ascending:!0});return l?{success:!1,error:"Failed to fetch campaign members"}:{success:!0,data:i.map(d=>({id:d.id,userId:d.user_id,email:`user_${d.user_id.slice(0,8)}@example.com`,displayName:void 0,role:d.role,joinedAt:new Date(d.created_at)}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(s,i,l){try{const{data:u,error:d}=await Ae.from("user_profiles").select("id").eq("email",i).single();if(d||!u)return{success:!1,error:"User not found with that email address"};const{data:f}=await Ae.from("campaign_members").select("id").eq("campaign_id",s).eq("user_id",u.id).single();if(f)return{success:!1,error:"User is already a member of this campaign"};const{error:g}=await Ae.from("campaign_members").insert({campaign_id:s,user_id:u.id,role:l});return g?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(s,i,l){try{const{error:u}=await Ae.from("campaign_members").update({role:l}).eq("campaign_id",s).eq("user_id",i);return u?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(s,i){try{const{error:l}=await Ae.from("campaign_members").delete().eq("campaign_id",s).eq("user_id",i);return l?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(s,i){try{const{data:l,error:u}=await Ae.from("campaign_members").select("role").eq("campaign_id",s).eq("user_id",i).single();return u||!l?{success:!1,error:"User is not a member of this campaign"}:{success:!0,data:l.role}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(s,i){try{const{data:l,error:u}=await Ae.from("campaign_members").select("id").eq("campaign_id",s).eq("user_id",i).single();return u?{success:!0,data:!1}:{success:!0,data:!!l}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(s){try{const{data:i,error:l}=await Ae.from("characters").select("*").eq("campaign_id",s).order("created_at",{ascending:!0});return l?{success:!1,error:l.message}:{success:!0,data:i||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(s,i,l,u,d){try{const{data:f,error:g}=await Ae.from("characters").insert({campaign_id:s,name:l,player_name:u,character_name:d,owner_id:i}).select().single();return g?{success:!1,error:g.message}:{success:!0,data:f}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(s,i){try{const{data:l,error:u}=await Ae.from("characters").select("*, campaigns!inner(created_by)").eq("id",s).single();if(u)return{success:!1,error:"Character not found"};if(l.owner_id!==i&&l.campaigns.created_by!==i)return{success:!1,error:"You don't have permission to delete this character"};const{error:d}=await Ae.from("characters").delete().eq("id",s);return d?{success:!1,error:d.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class vn{static instance;_authRepository;_campaignRepository;_authService;_campaignService;constructor(){this._authRepository=new Eb,this._campaignRepository=new ug,this._authService=new av(this._authRepository),this._campaignService=new nv(this._campaignRepository,this._authRepository)}static getInstance(){return vn.instance||(vn.instance=new vn),vn.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}}function Tb(){return vn.getInstance().authService}function og(){return vn.getInstance().campaignService}const ic=()=>{const[o,s]=B.useState(null),[i,l]=B.useState(!0),u=Tb();return B.useEffect(()=>((async()=>{const b=await u.getCurrentUser();s(b),l(!1)})(),u.onAuthStateChange(b=>{s(b),l(!1)})),[u]),{user:o,loading:i,signIn:async(y,p)=>{const b=await u.signIn(y,p);return b.success&&b.data?(s(b.data),{success:!0}):{success:!1,error:b.error}},signUp:async(y,p)=>{const b=await u.signUp(y,p);return b.success&&b.data?(s(b.data),{success:!0}):{success:!1,error:b.error}},signOut:async()=>{const y=await u.signOut();return y.success?(s(null),{success:!0}):{success:!1,error:y.error}}}};function _e({variant:o="default",size:s="md",className:i="",children:l,...u}){const f={default:"",primary:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",danger:"bg-red-600 hover:bg-red-700 text-white border-red-600",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"},g={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},y=["btn",f[o],g[s],i].filter(Boolean).join(" ");return h.jsx("button",{className:y,...u,children:l})}function Ob({icon:o,variant:s="default",className:i="",...l}){const u={default:"btn p-2",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"};return h.jsx("button",{className:`${u[s]} ${i}`,...l,children:o})}const W=B.forwardRef(({label:o,type:s="text",className:i,required:l=!1,error:u,...d},f)=>{const g="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",y=`input w-full ${u?"border-red-500 focus:border-red-500":""}`,p=()=>{if(s==="textarea"){const _=d;return h.jsx("textarea",{ref:f,className:i||y,required:l,..._})}if(s==="select"){const{children:_,...x}=d;return h.jsx("select",{ref:f,className:i||"select",required:l,...x,children:_})}const b=d;return h.jsx("input",{ref:f,type:s,step:s==="number"?"1":void 0,className:i||y,required:l,...b})};return h.jsxs("div",{children:[o&&h.jsxs("label",{className:g,children:[o," ",l&&"*"]}),p(),u&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u})]})});W.displayName="FormField";function Nb(){const[o,s]=B.useState("sign_in"),[i,l]=B.useState(""),[u,d]=B.useState(""),[f,g]=B.useState(!1),[y,p]=B.useState(""),b=async x=>{x.preventDefault(),g(!0),p("");try{if(o==="sign_up"){const{error:C}=await Ae.auth.signUp({email:i,password:u});if(C)throw C;p("Check your email for the confirmation link!")}else{const{error:C}=await Ae.auth.signInWithPassword({email:i,password:u});if(C)throw C}}catch(C){p(C instanceof Error?C.message:"An error occurred")}finally{g(!1)}},_=()=>f?"Loading...":o==="sign_in"?"Sign In":"Sign Up";return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:o==="sign_in"?"Welcome Back":"Create Account"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:o==="sign_in"?"Sign in to your account":"Create a new account"})]}),h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[h.jsx("button",{type:"button",onClick:()=>s("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),h.jsx("button",{type:"button",onClick:()=>s("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),h.jsxs("form",{className:"space-y-4",onSubmit:b,children:[h.jsx(W,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:i,onChange:x=>l(x.target.value),placeholder:"Enter your email"}),h.jsx(W,{label:"Password",type:"password",autoComplete:o==="sign_up"?"new-password":"current-password",required:!0,value:u,onChange:x=>d(x.target.value),placeholder:"Enter your password"}),y&&h.jsx("div",{className:`p-3 rounded-xl text-sm ${y.includes("error")||y.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:y}),h.jsx(_e,{type:"submit",disabled:f,variant:"primary",className:"w-full justify-center py-3",children:_()})]})]})]})})]})}const Rb=()=>{const[o,s]=B.useState([]),[i,l]=B.useState(!0),[u,d]=B.useState(null),f=og(),g=B.useCallback(async()=>{try{l(!0),d(null);const _=await f.getCampaigns();_.success&&_.data?s(_.data):d(_.error||"Failed to fetch campaigns")}catch{d("An unexpected error occurred")}finally{l(!1)}},[f]),y=async _=>{try{d(null);const x=await f.createCampaign(_);return x.success?(await g(),{success:!0}):(d(x.error||"Failed to create campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return d(x),{success:!1,error:x}}},p=async(_,x)=>{try{d(null);const C=await f.updateCampaign(_,x);return C.success?(await g(),{success:!0}):(d(C.error||"Failed to update campaign"),{success:!1,error:C.error})}catch{const C="An unexpected error occurred";return d(C),{success:!1,error:C}}},b=async _=>{try{d(null);const x=await f.deleteCampaign(_);return x.success?(await g(),{success:!0}):(d(x.error||"Failed to delete campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return d(x),{success:!1,error:x}}};return B.useEffect(()=>{g()},[g]),{campaigns:o,loading:i,error:u,fetchCampaigns:g,createCampaign:y,updateCampaign:p,deleteCampaign:b}};function _n(o){const[s,i]=B.useState([]),[l,u]=B.useState(!1),[d,f]=B.useState(null),g=B.useMemo(()=>new ug,[]),y=B.useCallback(async _=>{if(_){u(!0),f(null);try{const x=await g.getCharactersByCampaign(_);if(x.success&&x.data&&x.data.length>0){const C=x.data.map(O=>({id:O.id,campaignId:O.campaign_id,displayName:O.name,playerName:O.player_name||"",characterName:O.character_name||"",ownerId:O.owner_id}));i(C)}else i([])}catch{i([]),f("Database connection failed - no characters available")}finally{u(!1)}}},[g]),p=B.useCallback(async(_,x,C)=>{if(!o)return{success:!1,error:"No campaign selected"};try{const O=`${_} – ${x}`,D=await g.createCharacterForCampaign(o,C,O,_,x);if(D.success&&D.data){const M={id:D.data.id,campaignId:D.data.campaign_id,displayName:D.data.name,playerName:_,characterName:x,ownerId:D.data.owner_id};return i($=>[...$,M]),{success:!0,data:M}}return{success:!1,error:D.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[o,g]),b=B.useCallback(async(_,x)=>{try{const C=await g.deleteCharacter(_,x);return C.success?(i(O=>O.filter(D=>D.id!==_)),{success:!0}):{success:!1,error:C.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[g]);return B.useEffect(()=>{o?y(o):i([])},[o,y]),{characters:s,loading:l,error:d,createCharacter:p,deleteCharacter:b,refreshCharacters:()=>o&&y(o)}}const Ub=()=>{const[o,s]=B.useState([]),[i,l]=B.useState(!1),[u,d]=B.useState(null),f=og(),g=async _=>{try{l(!0),d(null);const x=await f.getCampaignMembers(_);if(x.success&&x.data)return s(x.data),{success:!0,data:x.data};const C=x.error||"Failed to fetch members";return d(C),{success:!1,error:C}}catch{const x="An unexpected error occurred";return d(x),{success:!1,error:x}}finally{l(!1)}};return{members:o,loading:i,error:u,fetchMembers:g,addMemberByEmail:async(_,x,C)=>{try{d(null);const O=await f.addMemberByEmail(_,x,C);if(O.success)return await g(_),{success:!0};const D=O.error||"Failed to add member";return d(D),{success:!1,error:D}}catch{const O="An unexpected error occurred";return d(O),{success:!1,error:O}}},updateMemberRole:async(_,x,C)=>{try{d(null);const O=await f.updateMemberRole(_,x,C);if(O.success)return await g(_),{success:!0};const D=O.error||"Failed to update member role";return d(D),{success:!1,error:D}}catch{const O="An unexpected error occurred";return d(O),{success:!1,error:O}}},removeMember:async(_,x)=>{try{d(null);const C=await f.removeMember(_,x);if(C.success)return await g(_),{success:!0};const O=C.error||"Failed to remove member";return d(O),{success:!1,error:O}}catch{const C="An unexpected error occurred";return d(C),{success:!1,error:C}}}}};function Yt({isOpen:o,onClose:s,title:i,children:l,maxWidth:u="md"}){if(B.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),B.useEffect(()=>{const f=g=>{g.key==="Escape"&&s()};if(o)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[o,s]),!o)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f=>{f.target===f.currentTarget&&s()},children:h.jsxs("div",{className:`card w-full ${d[u]}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:i}),h.jsx(Ob,{icon:h.jsx(ky,{size:20}),onClick:s,"aria-label":"Close modal"})]}),l]})})}function pn({onCancel:o,onConfirm:s,confirmText:i="Confirm",cancelText:l="Cancel",confirmVariant:u="primary",confirmDisabled:d=!1,confirmType:f="button",isLoading:g=!1,children:y}){return y?h.jsx("div",{className:"flex gap-2 mt-6",children:y}):h.jsxs("div",{className:"flex gap-2 mt-6",children:[o&&h.jsx(_e,{onClick:o,variant:"ghost",className:"flex-1 justify-center",disabled:g,children:l}),(s||f==="submit")&&h.jsx(_e,{onClick:f==="submit"?void 0:s,variant:u,className:"flex-1 justify-center",disabled:g||d,type:f,children:i})]})}function zb({size:o="md",className:s=""}){const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return h.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${i[o]} ${s}`,role:"status","aria-label":"Loading"})}function Db({message:o="Loading..."}){return h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[h.jsx(zb,{size:"lg",className:"mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:o})]})}function kb({campaign:o,onUpdateCampaign:s,onDeleteCampaign:i,onGetMembers:l,onRemoveMember:u,onClose:d}){const[f,g]=B.useState(!1),[y,p]=B.useState(!1),[b,_]=B.useState(!1),[x,C]=B.useState([]),[O,D]=B.useState(!1),[M,$]=B.useState(o.name),[L,q]=B.useState(o.description||""),[Y,P]=B.useState(!1),[H,ee]=B.useState(!1),xe=async J=>{if(J.preventDefault(),!!M.trim())try{P(!0),await s(o.id,{name:M,description:L||null}),g(!1)}finally{P(!1)}},Ee=async()=>{try{ee(!0),await i(o.id),p(!1),d?.()}finally{ee(!1)}},Rt=async()=>{try{D(!0);const J=await l(o.id);J&&C(J),_(!0)}finally{D(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:o.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o.description||"No description provided"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),h.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[o.member_count||0," member(s)"]})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(_e,{onClick:()=>g(!0),className:"flex items-center gap-2 justify-center",children:[h.jsx(Po,{className:"w-4 h-4"}),"Edit Campaign"]}),h.jsxs(_e,{onClick:Rt,disabled:O,className:"flex items-center gap-2 justify-center",children:[h.jsx(Ui,{className:"w-4 h-4"}),O?"Loading...":"Manage Members"]})]})]}),h.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[h.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),h.jsxs(_e,{onClick:()=>p(!0),variant:"danger",className:"flex items-center gap-2",children:[h.jsx(ec,{className:"w-4 h-4"}),"Delete Campaign"]})]}),h.jsx(Yt,{isOpen:f,onClose:()=>g(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),h.jsx("input",{type:"text",value:M,onChange:J=>$(J.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:L,onChange:J=>q(J.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(pn,{onCancel:()=>g(!1),cancelText:"Cancel",confirmText:Y?"Updating...":"Update",confirmDisabled:Y||!M.trim(),confirmType:"submit",isLoading:Y})]})}),h.jsxs(Yt,{isOpen:y,onClose:()=>p(!1),title:"Delete Campaign",children:[h.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',o.name,'"? This action cannot be undone and will remove all campaign data and members.']}),h.jsx(pn,{onCancel:()=>p(!1),onConfirm:Ee,cancelText:"Cancel",confirmText:H?"Deleting...":"Delete",confirmVariant:"danger",isLoading:H})]}),h.jsx(Yt,{isOpen:b,onClose:()=>_(!1),title:"Campaign Members",maxWidth:"lg",children:h.jsxs("div",{className:"space-y-4",children:[x.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):h.jsx("div",{className:"space-y-3",children:x.map(J=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:J.user_profiles.display_name||"No Name"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:J.user_profiles.email})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:J.role}),J.role!=="admin"&&h.jsx(_e,{size:"sm",variant:"danger",onClick:()=>u(o.id,J.user_id),children:"Remove"})]})]},J.id))}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:h.jsxs(_e,{variant:"primary",className:"w-full justify-center",disabled:!0,title:"Feature coming soon",children:[h.jsx(Ho,{className:"w-4 h-4"}),"Add Member (Coming Soon)"]})})]})})]})}function Mb(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Bb({campaign:o,onViewCampaign:s,onDeleteCharacter:i}){const{characters:l,loading:u,error:d}=_n(o.id);return u?h.jsxs("div",{className:"animate-pulse p-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):d?h.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",d]}):h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:o.name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.length," character(s)"]})]}),o.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Mb(o.userRole)}`,children:o.userRole.toUpperCase()})]}),l.length===0?h.jsxs("div",{className:"text-center py-6",children:[h.jsx(Ui,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):h.jsx("div",{className:"space-y-3 mb-4",children:l.map(f=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:f.displayName}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",f.playerName]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_e,{size:"sm",onClick:()=>s(o.id),title:"View character details in campaign",children:h.jsx(Po,{className:"w-4 h-4"})}),h.jsx(_e,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>i(f.id,f.displayName,o.id),children:h.jsx(ec,{className:"w-4 h-4"})})]})]},f.id))}),h.jsx("div",{className:"flex gap-2",children:h.jsxs(_e,{onClick:()=>s(o.id),className:"flex items-center gap-2 flex-1",children:[h.jsx(Ui,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function qb({campaigns:o,onViewCampaign:s}){const{user:i}=ic(),[l,u]=B.useState(!1),[d,f]=B.useState(""),[g,y]=B.useState(""),[p,b]=B.useState(""),[_,x]=B.useState(!1),[C,O]=B.useState(null),[D,M]=B.useState(!1),[$,L]=B.useState(null),[q,Y]=B.useState(!1),{createCharacter:P}=_n(d||""),{deleteCharacter:H}=_n($?.campaignId||""),ee=o.filter(J=>J.memberCount&&J.memberCount>0),xe=async J=>{if(J.preventDefault(),!(!g.trim()||!p.trim()||!d))try{x(!0),O(null);const Re=await P(g.trim(),p.trim(),"");Re.success?(y(""),b(""),f(""),u(!1)):O(Re.error||"Failed to create character")}finally{x(!1)}},Ee=(J,Re,Qt)=>{L({id:J,name:Re,campaignId:Qt}),M(!0)},Rt=async()=>{if(!(!$||!i))try{Y(!0);const J=await H($.id,i.id);J.success?(M(!1),L(null)):O(J.error||"Failed to delete character")}finally{Y(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:ee.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ee.reduce((J,Re)=>J+(Re.memberCount||0),0)}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(_e,{onClick:()=>u(!0),disabled:o.length===0,className:"flex items-center gap-2 justify-center",children:[h.jsx(Ho,{className:"w-4 h-4"}),"Create New Character"]}),h.jsxs(_e,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[h.jsx(Po,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),o.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),ee.length===0?h.jsxs("div",{className:"card text-center py-8",children:[h.jsx(Ui,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),h.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),h.jsxs(_e,{onClick:()=>u(!0),disabled:o.length===0,className:"flex items-center gap-2",children:[h.jsx(Ho,{className:"w-4 h-4"}),"Create Character"]})]}):h.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:ee.map(J=>h.jsx(Bb,{campaign:J,onViewCampaign:s,onDeleteCharacter:Ee},J.id))})]}),h.jsx(Yt,{isOpen:l,onClose:()=>u(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[C&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:C}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:d,onChange:J=>f(J.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),o.map(J=>h.jsx("option",{value:J.id,children:J.name},J.id))]})]}),h.jsx(W,{label:"Player Name",value:g,onChange:J=>y(J.target.value),placeholder:"e.g., John Smith",required:!0}),h.jsx(W,{label:"Character Name",value:p,onChange:J=>b(J.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),h.jsx(pn,{onCancel:()=>u(!1),cancelText:"Cancel",confirmText:_?"Creating...":"Create",confirmDisabled:_||!g.trim()||!p.trim()||!d,confirmType:"submit",isLoading:_})]})}),h.jsx(Yt,{isOpen:D,onClose:()=>M(!1),title:"Delete Character",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:h.jsx(ec,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),h.jsxs("div",{className:"flex-grow",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',$?.name,'"?']}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),h.jsx(pn,{onCancel:()=>M(!1),cancelText:"Cancel",confirmText:q?"Deleting...":"Delete",confirmDisabled:q,onConfirm:Rt,confirmVariant:"danger",isLoading:q})]})})]})}function cg(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Lo({title:o,description:s,icon:i,onClick:l,disabled:u}){return h.jsx("div",{className:`card p-6 cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 ${u?"opacity-50 cursor-not-allowed":""}`,onClick:u?void 0:l,children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"flex-shrink-0 text-blue-600 dark:text-blue-400",children:i}),h.jsxs("div",{className:"flex-grow",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:o}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:s})]}),h.jsx("div",{className:"flex-shrink-0 text-gray-400 dark:text-gray-500",children:h.jsx(Ly,{className:"w-5 h-5"})})]})})}function Lb({campaigns:o,onCampaignSelect:s}){const i=o.sort((l,u)=>u.updatedAt.getTime()-l.updatedAt.getTime()).slice(0,3);return h.jsxs("div",{className:"card p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),o.length>3&&h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," total"]})]}),i.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):h.jsx("div",{className:"space-y-3",children:i.map(l=>h.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer transition-colors",onClick:()=>s(l.id),children:[h.jsxs("div",{className:"flex-grow",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:l.name}),l.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${cg(l.userRole)}`,children:l.userRole.toUpperCase()})]}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l.memberCount||0," member(s) • Updated"," ",l.updatedAt.toLocaleDateString()]})]}),h.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:h.jsx(qy,{className:"w-4 h-4"})})]},l.id))})]})}function Hb({campaign:o,onSelect:s,onEdit:i,onSettings:l}){return h.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),o.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${cg(o.userRole)}`,children:o.userRole.toUpperCase()})]}),o.description&&h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2",children:o.description}),h.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:[h.jsxs("span",{children:[o.memberCount||0," member(s)"]}),h.jsxs("span",{children:["Created ",o.createdAt.toLocaleDateString()]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(_e,{size:"sm",onClick:()=>s(o.id),className:"flex-1",children:"Enter Campaign"}),h.jsx(_e,{size:"sm",onClick:()=>i(o),children:h.jsx(Hy,{className:"w-4 h-4"})}),h.jsx(_e,{size:"sm",onClick:()=>l(o),children:h.jsx(Gy,{className:"w-4 h-4"})})]})]})}function Gb({campaign:o,onViewCampaign:s}){const{characters:i,loading:l}=_n(o.id);return l?h.jsx("div",{className:"card",children:h.jsxs("div",{className:"animate-pulse",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})}):h.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),h.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[i.length," CHARACTER",i.length!==1?"S":""]})]}),i.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"space-y-2",children:[i.slice(0,3).map(u=>h.jsxs("div",{className:"flex items-center text-sm",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),h.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:u.characterName||u.displayName})]},u.id)),i.length>3&&h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",i.length-3," more..."]})]})}),h.jsx(_e,{size:"sm",onClick:()=>s(o.id),className:"w-full",children:"View Campaign"})]})}function $b({campaigns:o,onSelect:s,onEdit:i,onSettings:l}){return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(u=>h.jsx(Hb,{campaign:u,onSelect:s,onEdit:i,onSettings:l},u.id))})]})}function Vb({campaigns:o,onViewCampaign:s}){const i=o.filter(l=>l.memberCount&&l.memberCount>0);return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),i.length===0?h.jsx("div",{className:"card p-6 text-center",children:h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(l=>h.jsx(Gb,{campaign:l,onViewCampaign:s},l.id))})]})}function Yb({onCampaignSelect:o}){const{campaigns:s,loading:i,error:l,createCampaign:u,updateCampaign:d,deleteCampaign:f}=Rb(),{fetchMembers:g,removeMember:y}=Ub(),{signOut:p,user:b}=ic(),[_,x]=B.useState(!1),[C,O]=B.useState(""),[D,M]=B.useState(""),[$,L]=B.useState(!1),[q,Y]=B.useState(!1),[P,H]=B.useState(""),[ee,xe]=B.useState(""),[Ee,Rt]=B.useState(""),[J,Re]=B.useState(!1),[Qt,qt]=B.useState(null),[Ut,U]=B.useState(!1),[G,I]=B.useState(null),[he,ye]=B.useState(""),[Qe,Ce]=B.useState(""),[oe,De]=B.useState(!1),[_t,ot]=B.useState(!1),[fa,Ya]=B.useState(null),[ha,Sn]=B.useState(!1),{createCharacter:Cn}=_n(P),Ts=async F=>{if(F.preventDefault(),!!C.trim())try{L(!0),(await u({name:C,description:D||void 0})).success&&(O(""),M(""),x(!1))}finally{L(!1)}},Mi=async F=>{if(F.preventDefault(),!(!b||!ee.trim()||!Ee.trim()||!P))try{Re(!0),qt(null);const we=await Cn(ee.trim(),Ee.trim(),b.id);we.success?(xe(""),Rt(""),H(""),Y(!1)):qt(we.error||"Failed to create character")}finally{Re(!1)}},Kt=()=>{if(s.length===0){qt("You need to create a campaign first before adding characters!"),setTimeout(()=>qt(null),5e3);return}Y(!0)},Os=F=>{I(F),ye(F.name),Ce(F.description||""),U(!0)},Ns=async F=>{if(F.preventDefault(),!(!G||!he.trim()))try{De(!0),await d(G.id,{name:he,description:Qe||void 0}),U(!1),I(null)}finally{De(!1)}},fr=F=>{Ya(F),ot(!0)},Bi=async(F,we)=>{await d(F,{name:we.name,description:we.description||void 0})},Rs=async F=>{(await f(F)).success&&(ot(!1),Ya(null))},Us=async F=>{const we=await g(F);if(we.success&&we.data)return we.data.map(Qa=>({id:Qa.id,user_id:Qa.userId,role:Qa.role,user_profiles:{email:Qa.email,display_name:Qa.displayName||null}}))},zs=async(F,we)=>{await y(F,we)},hr=F=>({id:F.id,name:F.name,description:F.description||null,created_at:F.createdAt.toISOString(),created_by:F.createdBy,updated_at:F.updatedAt.toISOString(),role:F.userRole,member_count:F.memberCount});return i?h.jsx(Db,{message:"Loading dashboard..."}):h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),h.jsx(_e,{onClick:p,children:"Sign Out"})]})}),h.jsx("div",{className:"p-6 space-y-6",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[(l||Qt)&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:l||Qt}),h.jsx("div",{className:"mb-8",children:h.jsx(Lb,{campaigns:s,onCampaignSelect:o})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Lo,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:h.jsx(My,{className:"w-8 h-8"}),onClick:()=>x(!0)}),h.jsx(Lo,{title:"Create Character",description:"Add a new character to one of your campaigns",icon:h.jsx(By,{className:"w-8 h-8"}),onClick:Kt,disabled:s.length===0}),h.jsx(Lo,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:h.jsx(Ui,{className:"w-8 h-8"}),onClick:()=>Sn(!0),disabled:s.length===0})]}),s.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"Create a campaign first to enable character management features."})]}),s.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx($b,{campaigns:s,onSelect:o,onEdit:Os,onSettings:fr})}),s.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(Vb,{campaigns:s,onViewCampaign:o})})]})}),h.jsx(Yt,{isOpen:_,onClose:()=>x(!1),title:"Create New Campaign",children:h.jsxs("form",{onSubmit:Ts,className:"space-y-4",children:[h.jsx(W,{label:"Campaign Name",value:C,onChange:F=>O(F.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:D,onChange:F=>M(F.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(pn,{onCancel:()=>x(!1),cancelText:"Cancel",confirmText:$?"Creating...":"Create",confirmDisabled:$||!C.trim(),confirmType:"submit",isLoading:$})]})}),h.jsx(Yt,{isOpen:q,onClose:()=>Y(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:Mi,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:P,onChange:F=>H(F.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),s.map(F=>h.jsx("option",{value:F.id,children:F.name},F.id))]})]}),h.jsx(W,{label:"Player Name",value:ee,onChange:F=>xe(F.target.value),placeholder:"e.g. John Smith",required:!0}),h.jsx(W,{label:"Character Name",value:Ee,onChange:F=>Rt(F.target.value),placeholder:"e.g. Lt. Sally Riddle",required:!0}),h.jsx(pn,{onCancel:()=>Y(!1),cancelText:"Cancel",confirmText:J?"Creating...":"Create",confirmDisabled:J||!ee.trim()||!Ee.trim()||!P,confirmType:"submit",isLoading:J})]})}),h.jsx(Yt,{isOpen:Ut,onClose:()=>U(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:Ns,className:"space-y-4",children:[h.jsx(W,{label:"Campaign Name",value:he,onChange:F=>ye(F.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:Qe,onChange:F=>Ce(F.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(pn,{onCancel:()=>U(!1),cancelText:"Cancel",confirmText:oe?"Updating...":"Update",confirmDisabled:oe||!he.trim(),confirmType:"submit",isLoading:oe})]})}),fa&&h.jsx(Yt,{isOpen:_t,onClose:()=>ot(!1),title:`Settings - ${fa.name}`,maxWidth:"xl",children:h.jsx(kb,{campaign:hr(fa),onUpdateCampaign:Bi,onDeleteCampaign:Rs,onGetMembers:Us,onRemoveMember:zs,onClose:()=>ot(!1)})}),h.jsx(Yt,{isOpen:ha,onClose:()=>Sn(!1),title:"Character Management",maxWidth:"xl",children:h.jsx(qb,{campaigns:s,onViewCampaign:o})})]})}const dg="traveller-ui-state-v1",Lm={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function fg(){try{const o=localStorage.getItem(dg);if(!o)return Lm;const s=JSON.parse(o);return s.PCs||(s.PCs={}),Object.keys(s.PCs).forEach(i=>{s.PCs[i].Finance||(s.PCs[i].Finance=[]),s.PCs[i].Inventory||(s.PCs[i].Inventory=[]),s.PCs[i].Weapons||(s.PCs[i].Weapons=[]),s.PCs[i].Armour||(s.PCs[i].Armour=[]),s.PCs[i].Ammo||(s.PCs[i].Ammo=[])}),s}catch{return Lm}}function hg(o){localStorage.setItem(dg,JSON.stringify(o))}function $a(o){const s=fg();s.PCs[o]||(s.PCs[o]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},hg(s))}function Qb(o){const s=B.useCallback((u,d,f)=>{o(g=>{g.PCs[u]||$a(u);const y=g.PCs[u]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...g,PCs:{...g.PCs,[u]:{...y,Ammo:(y.Ammo||[]).map((p,b)=>b===d?f:p)}}}})},[o]),i=B.useCallback((u,d)=>{o(f=>{if(!f.PCs[u])return $a(u),f;const g=f.PCs[u]?.Ammo?.[d];if(!g)return f;const y=Number(g["Rounds Loaded"]||0),p=Number(g["Spare Magazines"]||0),b=Number(g["Loose Rounds"]||0),_=Number(g["Magazine Size"]||0);let x=y,C=p,O=b;if(x>0)x-=1;else if(C>0)C-=1,x=_-1;else if(O>0&&_>0){const $=Math.min(O,_);O-=$,x=$-1}else return f;const D=x+C*_+O,M={...g,"Rounds Loaded":x,"Spare Magazines":C,"Loose Rounds":O,"Total Rounds":D};return{...f,PCs:{...f.PCs,[u]:{...f.PCs[u],Ammo:(f.PCs[u].Ammo||[]).map(($,L)=>L===d?M:$)}}}})},[o]),l=B.useCallback((u,d)=>{o(f=>{if(!f.PCs[u])return $a(u),f;const g=f.PCs[u]?.Ammo?.[d];if(!g)return f;const y=Number(g["Rounds Loaded"]||0),p=Number(g["Spare Magazines"]||0),b=Number(g["Loose Rounds"]||0),_=Number(g["Magazine Size"]||0);let x=y,C=p,O=b;if(C>0&&x<_)C-=1,x=_;else if(O>0&&x<_){const $=_-x,L=Math.min(O,$);O-=L,x+=L}const D=x+C*_+O,M={...g,"Rounds Loaded":x,"Spare Magazines":C,"Loose Rounds":O,"Total Rounds":D};return{...f,PCs:{...f.PCs,[u]:{...f.PCs[u],Ammo:(f.PCs[u].Ammo||[]).map(($,L)=>L===d?M:$)}}}})},[o]);return{updateCharacterAmmo:s,fireRound:i,reloadWeapon:l}}function Kb(){const[o,s]=B.useState(fg());B.useEffect(()=>{hg(o)},[o]);const i=B.useCallback(_=>{s(x=>({...x,Party_Finances:_}))},[]),l=B.useCallback(_=>{s(x=>({...x,Ship_Accounts:_}))},[]),u=B.useCallback(_=>{s(x=>({...x,Ship_Cargo:[...x.Ship_Cargo,_]}))},[]),d=B.useCallback((_,x)=>{s(C=>(C.PCs[_]||$a(_),{...C,PCs:{...C.PCs,[_]:{...C.PCs[_]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:x}}}))},[]),f=B.useCallback((_,x)=>{s(C=>{C.PCs[_]||$a(_);const O=C.PCs[_]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...C,PCs:{...C.PCs,[_]:{...O,Inventory:[...O.Inventory,x]}}}})},[]),g=B.useCallback((_,x)=>{s(C=>{C.PCs[_]||$a(_);const O=C.PCs[_]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...C,PCs:{...C.PCs,[_]:{...O,Ammo:[...O.Ammo||[],x]}}}})},[]),y=B.useCallback((_,x)=>{s(C=>{C.PCs[_]||$a(_);const O=C.PCs[_]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...C,PCs:{...C.PCs,[_]:{...O,Weapons:[...O.Weapons||[],x]}}}})},[]),p=B.useCallback((_,x)=>{s(C=>{C.PCs[_]||$a(_);const O=C.PCs[_]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...C,PCs:{...C.PCs,[_]:{...O,Armour:[...O.Armour||[],x]}}}})},[]),b=Qb(s);return{state:o,setState:s,updatePartyFinances:i,updateShipAccounts:l,addCargoLeg:u,updateCharacterFinance:d,addCharacterInventory:f,addCharacterAmmo:g,addCharacterWeapon:y,addCharacterArmour:p,...b}}function Xb(o,s=0){let i=s;return o.map(l=>{const u=l["Amount (Cr)"],d=l.Category;return d==="Income"?i+=u:d==="Expense"&&(i-=u),{...l,"Running Total":i}})}function lr(o,s=0){return o.reduce((i,l)=>{const u=l["Amount (Cr)"],d=l.Category;return d==="Income"?i+u:d==="Expense"?i-u:i},s)}function Jb(o,s,i=0){const l=[...o,s];return l.sort((u,d)=>new Date(u.Date).getTime()-new Date(d.Date).getTime()),Xb(l,i)}function Zb(o){const s=[];return o.Description?.trim()||s.push("Description is required"),o.Date||s.push("Date is required"),(o["Amount (Cr)"]===void 0||o["Amount (Cr)"]===null)&&s.push("Amount is required"),typeof o["Amount (Cr)"]=="number"&&o["Amount (Cr)"]<0&&s.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(o.Category||"")||s.push("Category must be Income, Expense, or Transfer"),{isValid:s.length===0,errors:s}}function ir(o){return`${o.toLocaleString()} Cr`}function Wb(o){const s=o.reduce((i,l)=>{const u=l["Amount (Cr)"];return l.Category==="Income"?i.totalIncome+=u:l.Category==="Expense"&&(i.totalExpenses+=u),i.transactionCount++,i},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...s,netChange:s.totalIncome-s.totalExpenses}}function Ib(o,s){return B.useMemo(()=>({party:lr(o.Party_Finances,0),ship:lr(o.Ship_Accounts,0),character:lr(o.PCs[s]?.Finance||[],0)}),[o.Party_Finances,o.Ship_Accounts,o.PCs,s])}function Fb(o,s){const i=B.useCallback(async u=>{try{const{importXlsx:d}=await bn(async()=>{const{importXlsx:f}=await import("./xlsx-B2Yfl76m.js");return{importXlsx:f}},__vite__mapDeps([0,1,2,3]));return await d(u,o),{success:!0}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Unknown error occurred"}}},[o]),l=B.useCallback(async()=>{try{const{exportXlsx:u}=await bn(async()=>{const{exportXlsx:d}=await import("./xlsx-B2Yfl76m.js");return{exportXlsx:d}},__vite__mapDeps([0,1,2,3]));return await u(s),{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Unknown error occurred"}}},[s]);return{handleImport:i,handleExport:l}}function Pb({onImport:o,onExport:s}){const i=async d=>{const f=d.target.files?.[0];f&&((await o(f)).success||(d.target.value=""))},l=async()=>{await s()},u=d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.currentTarget.click())};return h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),h.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[h.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:u,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[h.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:i,"data-testid":"file-input"}),h.jsx($y,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),h.jsxs(_e,{onClick:l,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[h.jsx(Vy,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const ws=o=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(o)} Cr`,e_=()=>new Date().toISOString().slice(0,10);function t_({partyBalance:o,shipBalance:s,cargoLegsCount:i,characterCount:l}){return h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${ws(o)}`,children:ws(o)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${ws(s)}`,children:ws(s)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${i}`,children:i})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${l}`,children:l})]})]})}function mg({tabs:o,active:s,onChange:i}){const l=u=>{const d=o.findIndex(y=>y.id===s);let f=d;switch(u.key){case"ArrowLeft":u.preventDefault(),f=d>0?d-1:o.length-1;break;case"ArrowRight":u.preventDefault(),f=d<o.length-1?d+1:0;break;case"Home":u.preventDefault(),f=0;break;case"End":u.preventDefault(),f=o.length-1;break;default:return}const g=o[f].id;i(g)};return h.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:o.map(u=>h.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${s===u.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>i(u.id),onKeyDown:l,role:"tab","aria-selected":s===u.id,"aria-controls":`tabpanel-${u.id}`,id:`tab-${u.id}`,type:"button",tabIndex:s===u.id?0:-1,"data-testid":`tab-${u.id}`,children:u.label},u.id))})}function wn({title:o,children:s}){return h.jsxs("div",{className:"card space-y-3",children:[h.jsx("div",{className:"font-semibold",children:o}),s]})}function As({columns:o,rows:s}){const i=l=>B.isValidElement(l)?l:String(l??"");return h.jsx("div",{className:"overflow-auto border rounded-2xl",children:h.jsxs("table",{className:"table",children:[h.jsx("thead",{children:h.jsx("tr",{children:o.map(l=>h.jsx("th",{children:l},l))})}),h.jsx("tbody",{children:s.length===0?h.jsx("tr",{children:h.jsx("td",{className:"text-zinc-500 p-3",colSpan:o.length,children:"No rows yet."})}):s.map((l,u)=>h.jsx("tr",{children:o.map(d=>h.jsx("td",{children:i(l[d])},d))},u))})]})})}function Es(o){const[s,i]=B.useState(o),l=B.useCallback((y,p)=>{i(b=>({...b,[y]:p}))},[]),u=B.useCallback(y=>p=>{l(y,p.target.value)},[l]),d=B.useCallback(y=>{i(p=>{const b={...o};return y&&y.forEach(_=>{b[_]=p[_]}),b})},[o]),f=B.useCallback(y=>{i(p=>({...p,...y}))},[]),g=B.useCallback(()=>({...s}),[s]);return{form:s,updateField:l,createInputHandler:u,resetForm:d,updateFields:f,getFormData:g,setForm:i}}const a_={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function n_({rows:o,onAdd:s}){const{form:i,createInputHandler:l,resetForm:u}=Es(a_),d=()=>{if(!i.Route||!i.Item||!i.Tons||!i.BuyWorld||!i.BuyPP)return;const f=Number(i.Tons),g=Number(i.BuyPP),y=i.SellPP===""?null:Number(i.SellPP),p=i.Fees===""?0:Number(i.Fees),b=y===null?null:(y-g)*f-p;s({"Leg/Route":i.Route,Item:i.Item,Tons:f,"Purchase World":i.BuyWorld,"Purchase Price (Cr/ton)":g,"Sale World":i.SellWorld,"Sale Price (Cr/ton)":y,"Broker (±DM)":i.DM,"Fees/Taxes (Cr)":p,"Profit (Cr)":b}),u()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(wn,{title:"Record Cargo Leg",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(W,{placeholder:"Route (Vland → Regina)",value:i.Route,onChange:l("Route")}),h.jsx(W,{placeholder:"Item",value:i.Item,onChange:l("Item")}),h.jsx(W,{type:"number",placeholder:"Tons",value:i.Tons,onChange:l("Tons")}),h.jsx(W,{placeholder:"Purchase World",value:i.BuyWorld,onChange:l("BuyWorld")}),h.jsx(W,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:i.BuyPP,onChange:l("BuyPP")}),h.jsx(W,{placeholder:"Sale World (optional)",value:i.SellWorld,onChange:l("SellWorld")}),h.jsx(W,{type:"number",placeholder:"Sale Price (Cr/ton)",value:i.SellPP,onChange:l("SellPP")}),h.jsx(W,{placeholder:"Broker DM",value:i.DM,onChange:l("DM")}),h.jsx(W,{type:"number",placeholder:"Fees/Taxes (Cr)",value:i.Fees,onChange:l("Fees")})]}),h.jsx(_e,{className:"mt-2",onClick:d,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),h.jsx(As,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (±DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:o})]})}function s_({title:o,totalIncome:s,totalExpenses:i,netChange:l,currentBalance:u}){return h.jsx(wn,{title:`${o} Summary`,children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),h.jsx("div",{children:ir(s)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),h.jsx("div",{children:ir(i)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),h.jsx("div",{className:l>=0?"text-green-600":"text-red-600",children:ir(l)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),h.jsx("div",{className:u>=0?"text-green-600":"text-red-600",children:ir(u)})]})]})})}function i_({title:o,fundName:s,onSubmit:i}){const l={Date:e_(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:u,createInputHandler:d,resetForm:f}=Es(l),[g,y]=B.useState([]),p=()=>{y([]);const b={Date:u.Date,Description:u.Description,Category:u.Category,Subcategory:u.Subcategory,"Amount (Cr)":Number(u.Amount),"Paid By":s,"Paid From (Fund)":s,Notes:u.Notes},_=Zb(b);if(!_.isValid){y(_.errors);return}i(b),f(["Date","Category"])};return h.jsxs(wn,{title:`Add ${o} Transaction`,children:[g.length>0&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h.jsx("ul",{className:"list-disc list-inside",children:g.map((b,_)=>h.jsx("li",{children:b},_))})}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(W,{type:"date",value:u.Date,onChange:d("Date")}),h.jsx(W,{placeholder:"Description",value:u.Description,onChange:d("Description")}),h.jsxs(W,{type:"select",value:u.Category,onChange:d("Category"),children:[h.jsx("option",{value:"Income",children:"Income"}),h.jsx("option",{value:"Expense",children:"Expense"}),h.jsx("option",{value:"Transfer",children:"Transfer"})]}),h.jsx(W,{placeholder:"Subcategory",value:u.Subcategory,onChange:d("Subcategory")}),h.jsx(W,{type:"number",placeholder:"Amount (Cr)",value:u.Amount,onChange:d("Amount")}),h.jsx(W,{placeholder:"Notes",value:u.Notes,onChange:d("Notes")})]}),h.jsx(_e,{className:"mt-2",onClick:p,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function Fo({title:o,rows:s,onUpdate:i,fundName:l,initialBalance:u=0,showSummary:d=!0}){const f=lr(s,u),g=Wb(s),y=b=>{const _=Jb(s,b,u);i(_)},p=s.map(b=>({...b,"Amount (Cr)":b.Category==="Expense"?-Math.abs(b["Amount (Cr)"]):Math.abs(b["Amount (Cr)"])}));return h.jsxs("div",{className:"space-y-4",children:[d&&h.jsx(s_,{title:o,totalIncome:g.totalIncome,totalExpenses:g.totalExpenses,netChange:g.netChange,currentBalance:f}),h.jsx(i_,{title:o,fundName:l,onSubmit:y}),h.jsx(As,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:p})]})}function l_({pc:o,rows:s,onAdd:i}){const l=o.includes(" – ")?o.split(" – ")[1]:o;return h.jsx("div",{className:"space-y-4",children:h.jsx(Fo,{title:l,rows:s,onUpdate:i,fundName:`${l} Fund`,initialBalance:0,showSummary:!0})})}const r_={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function u_({rows:o,onAdd:s}){const{form:i,createInputHandler:l,resetForm:u}=Es(r_),d=()=>{if(!i.Item||i.Qty==="")return;const f=Number(i.Qty||0),g=Number(i["Unit Mass (kg)"]||0),y=Number(i["Unit Value (Cr)"]||0);s({Item:i.Item,Qty:f,"Unit Mass (kg)":g,"Total Mass (kg)":f*g,"Unit Value (Cr)":y,"Total Value (Cr)":f*y,"Location/Container":i["Location/Container"],Notes:i.Notes}),u()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(wn,{title:"Add Inventory Item",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(W,{placeholder:"Item",value:i.Item,onChange:l("Item")}),h.jsx(W,{type:"number",placeholder:"Qty",value:i.Qty,onChange:l("Qty")}),h.jsx(W,{type:"number",placeholder:"Unit Mass (kg)",value:i["Unit Mass (kg)"],onChange:l("Unit Mass (kg)")}),h.jsx(W,{type:"number",placeholder:"Unit Value (Cr)",value:i["Unit Value (Cr)"],onChange:l("Unit Value (Cr)")}),h.jsx(W,{placeholder:"Location/Container",value:i["Location/Container"],onChange:l("Location/Container")}),h.jsx(W,{placeholder:"Notes",value:i.Notes,onChange:l("Notes")})]}),h.jsx(_e,{className:"mt-2",onClick:d,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),h.jsx(As,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:o})]})}function o_({content:o,children:s,position:i="bottom",className:l=""}){const[u,d]=B.useState(!1),f={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},g={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return h.jsxs("div",{className:`relative inline-block ${l}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onFocus:()=>d(!0),onBlur:()=>d(!1),children:[s,u&&h.jsx(h.Fragment,{children:h.jsxs("div",{className:`absolute z-[9999] ${f[i]} transition-opacity duration-200`,children:[h.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:o}),h.jsx("div",{className:`absolute ${g[i]}`})]})})]})}const c_={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Notes:""};function d_({row:o,index:s,onFireRound:i,onReload:l}){return h.jsxs("div",{className:"flex gap-2",children:[h.jsx(_e,{variant:"danger",size:"sm",onClick:()=>i?.(s),disabled:Number(o["Total Rounds"]||0)<=0,title:`Fire one round from ${o.Weapon}`,"aria-label":`Fire one round from ${o.Weapon}`,children:"Fire"}),h.jsx(_e,{variant:"primary",size:"sm",onClick:()=>l?.(s),disabled:Number(o["Spare Magazines"]||0)<=0&&Number(o["Loose Rounds"]||0)<=0,title:`Reload ${o.Weapon}`,"aria-label":`Reload ${o.Weapon}`,children:"Reload"})]})}function f_({rows:o,weapons:s=[],onAdd:i,onFireRound:l,onReload:u}){const{form:d,createInputHandler:f,resetForm:g,updateField:y}=Es(c_),p=()=>{if(!d.Weapon)return;const x=Number(d["Magazine Size"]||0),C=Number(d["Rounds Loaded"]||0),O=Number(d["Spare Magazines"]||0),D=Number(d["Loose Rounds"]||0),M=x*O+C+D;i({Weapon:d.Weapon,"Ammo Type":d["Ammo Type"],"Magazine Size":x,"Rounds Loaded":C,"Spare Magazines":O,"Loose Rounds":D,"Total Rounds":M,Notes:d.Notes}),g()},b=x=>{y("Weapon",x)},_=o.map((x,C)=>({...x,Actions:h.jsx(d_,{row:x,index:C,onFireRound:l,onReload:u})}));return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(wn,{title:"Add Ammunition Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsxs(W,{type:"select",value:d.Weapon==="__custom"?"":d.Weapon,onChange:f("Weapon"),children:[h.jsx("option",{value:"",children:"Select Weapon"}),s.map(x=>h.jsxs("option",{value:x.Weapon,children:[x.Weapon," (",x.Type,")"]},x.Weapon)),h.jsx("option",{value:"__custom",children:"--- Custom Weapon ---"})]}),d.Weapon==="__custom"&&h.jsx(W,{placeholder:"Custom Weapon Name",value:"",onChange:x=>b(x.target.value)}),h.jsx(W,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:d["Ammo Type"],onChange:f("Ammo Type")}),h.jsx(W,{type:"number",placeholder:"Magazine Size",value:d["Magazine Size"],onChange:f("Magazine Size")}),h.jsx(W,{type:"number",placeholder:"Rounds Loaded",value:d["Rounds Loaded"],onChange:f("Rounds Loaded")}),h.jsx(W,{type:"number",placeholder:"Spare Magazines",value:d["Spare Magazines"],onChange:f("Spare Magazines")}),h.jsx(W,{type:"number",placeholder:"Loose Rounds",value:d["Loose Rounds"],onChange:f("Loose Rounds")}),h.jsx(W,{placeholder:"Notes",value:d.Notes,onChange:f("Notes")})]}),h.jsx(_e,{className:"mt-2",onClick:p,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),h.jsx(o_,{content:h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),h.jsxs("ul",{className:"space-y-1 text-sm",children:[h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds → Spare magazines → Loose rounds"]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:h.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:h.jsx(Yy,{className:"w-5 h-5"})})})]}),h.jsx(As,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:_})]})}const h_={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function m_({rows:o,onAdd:s}){const{form:i,createInputHandler:l,resetForm:u}=Es(h_),d=()=>{i.Weapon&&(s({Weapon:i.Weapon,Type:i.Type,Damage:i.Damage,Range:i.Range,Mass:i.Mass?Number(i.Mass):void 0,Cost:i.Cost?Number(i.Cost):void 0,Notes:i.Notes}),u())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(wn,{title:"Add Weapon Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(W,{placeholder:"Weapon Name",value:i.Weapon,onChange:l("Weapon")}),h.jsxs(W,{type:"select",value:i.Type,onChange:l("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Melee",children:"Melee"}),h.jsx("option",{value:"Pistol",children:"Pistol"}),h.jsx("option",{value:"Rifle",children:"Rifle"}),h.jsx("option",{value:"Shotgun",children:"Shotgun"}),h.jsx("option",{value:"Heavy Weapon",children:"Heavy Weapon"}),h.jsx("option",{value:"Explosive",children:"Explosive"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(W,{placeholder:"Damage (e.g., 3d6)",value:i.Damage,onChange:l("Damage")}),h.jsx(W,{placeholder:"Range (e.g., 150m)",value:i.Range,onChange:l("Range")}),h.jsx(W,{type:"number",placeholder:"Mass (kg)",value:i.Mass,onChange:l("Mass")}),h.jsx(W,{type:"number",placeholder:"Cost (Cr)",value:i.Cost,onChange:l("Cost")}),h.jsx(W,{placeholder:"Notes",value:i.Notes,onChange:l("Notes")})]}),h.jsx(_e,{className:"mt-2",onClick:d,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),h.jsx(As,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:o})]})}const g_={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function y_({rows:o,onAdd:s}){const{form:i,createInputHandler:l,resetForm:u}=Es(g_),d=()=>{i.Armour&&(s({Armour:i.Armour,Type:i.Type,Protection:i.Protection?Number(i.Protection):i.Protection,Mass:i.Mass?Number(i.Mass):i.Mass,Cost:i.Cost?Number(i.Cost):void 0,Notes:i.Notes}),u())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(wn,{title:"Add Armour Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(W,{placeholder:"Armour Name",value:i.Armour,onChange:l("Armour")}),h.jsxs(W,{type:"select",value:i.Type,onChange:l("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Cloth",children:"Cloth"}),h.jsx("option",{value:"Mesh",children:"Mesh"}),h.jsx("option",{value:"Flak Jacket",children:"Flak Jacket"}),h.jsx("option",{value:"Combat Armour",children:"Combat Armour"}),h.jsx("option",{value:"Battle Dress",children:"Battle Dress"}),h.jsx("option",{value:"Powered Armour",children:"Powered Armour"}),h.jsx("option",{value:"Vacc Suit",children:"Vacc Suit"}),h.jsx("option",{value:"Environmental Suit",children:"Environmental Suit"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(W,{placeholder:"Protection (e.g., +5, 1d6+2)",value:i.Protection,onChange:l("Protection")}),h.jsx(W,{placeholder:"Mass (kg)",value:i.Mass,onChange:l("Mass")}),h.jsx(W,{type:"number",placeholder:"Cost (Cr)",value:i.Cost,onChange:l("Cost")}),h.jsx(W,{placeholder:"Notes",value:i.Notes,onChange:l("Notes")})]}),h.jsx(_e,{className:"mt-2",onClick:d,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),h.jsx(As,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:o})]})}function v_({campaignId:o,selectedPc:s,onPcChange:i,characterBalance:l,characterFinance:u,characterInventory:d,characterAmmo:f,characterWeapons:g,characterArmour:y,onUpdateFinance:p,onAddInventory:b,onAddAmmo:_,onAddWeapon:x,onAddArmour:C,onFireRound:O,onReloadWeapon:D}){const[M,$]=B.useState("ledger"),{characters:L,loading:q,error:Y}=_n(o),P=L.find(H=>H.displayName===s);return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("select",{className:"select",value:s,onChange:H=>i(H.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:q,children:q?h.jsx("option",{children:"Loading characters..."}):L.map(H=>h.jsx("option",{value:H.displayName,children:H.displayName},H.id))}),Y&&h.jsx("span",{className:"text-xs text-yellow-600",title:Y,children:"⚠️ Offline mode"}),h.jsx("div",{className:"text-sm",children:h.jsxs("span",{"aria-label":`Current character balance: ${ws(l)}`,children:["Current Balance:"," ",h.jsx("span",{className:"font-semibold",children:ws(l)})]})})]}),P&&P.id.startsWith("character-")&&h.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",P.playerName," | Character:"," ",P.characterName]}),h.jsx(mg,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:M,onChange:H=>$(H)}),M==="ledger"&&h.jsx(l_,{pc:s,rows:u,onAdd:H=>p(s,H)}),M==="inventory"&&h.jsx(u_,{rows:d,onAdd:H=>b(s,H)}),M==="weapons"&&h.jsx(m_,{rows:g,onAdd:H=>x(s,H)}),M==="armour"&&h.jsx(y_,{rows:y,onAdd:H=>C(s,H)}),M==="ammo"&&h.jsx(f_,{rows:f,weapons:g,onAdd:H=>_(s,H),onFireRound:H=>O?.(s,H),onReload:H=>D?.(s,H)})]})}function p_({campaignId:o,activeTab:s,state:i,selectedCharacterDisplayName:l,characterBalance:u,onCharacterChange:d,onUpdatePartyFinances:f,onUpdateShipAccounts:g,onAddCargoLeg:y,onUpdateCharacterFinance:p,onAddCharacterInventory:b,onAddCharacterAmmo:_,onAddCharacterWeapon:x,onAddCharacterArmour:C,onFireRound:O,onReloadWeapon:D}){return h.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${s}`,id:`tabpanel-${s}`,children:[s==="party"&&h.jsx(Fo,{title:"Party",rows:i.Party_Finances,onUpdate:f,fundName:"Party Fund",initialBalance:0,showSummary:!0}),s==="ship"&&h.jsx(Fo,{title:"Ship",rows:i.Ship_Accounts,onUpdate:g,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),s==="cargo"&&h.jsx(n_,{rows:i.Ship_Cargo,onAdd:y}),s==="characters"&&h.jsx(v_,{campaignId:o,selectedPc:l,onPcChange:d,characterBalance:u,characterFinance:i.PCs[l]?.Finance||[],characterInventory:i.PCs[l]?.Inventory||[],characterAmmo:i.PCs[l]?.Ammo||[],characterWeapons:i.PCs[l]?.Weapons||[],characterArmour:i.PCs[l]?.Armour||[],onUpdateFinance:p,onAddInventory:b,onAddAmmo:_,onAddWeapon:x,onAddArmour:C,onFireRound:O,onReloadWeapon:D})]})}function b_({campaignId:o,onBackToCampaigns:s}){const[i,l]=B.useState("party"),{characters:u}=_n(o),[d,f]=B.useState(""),g=d||u[0]?.displayName||"",{state:y,setState:p,updatePartyFinances:b,updateShipAccounts:_,addCargoLeg:x,updateCharacterFinance:C,addCharacterInventory:O,addCharacterAmmo:D,addCharacterWeapon:M,addCharacterArmour:$,fireRound:L,reloadWeapon:q}=Kb(),Y=Ib(y,g),{handleImport:P,handleExport:H}=Fb(p,y);return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:s,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:"← Back to Campaigns"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",o]})]})]})})}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsx(Pb,{onImport:P,onExport:H}),h.jsx(t_,{partyBalance:Y.party,shipBalance:Y.ship,cargoLegsCount:y.Ship_Cargo.length,characterCount:u.length}),h.jsx(mg,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:i,onChange:ee=>l(ee)}),h.jsx(p_,{campaignId:o,activeTab:i,state:y,selectedCharacterDisplayName:g,characterBalance:Y.character,onCharacterChange:f,onUpdatePartyFinances:b,onUpdateShipAccounts:_,onAddCargoLeg:x,onUpdateCharacterFinance:C,onAddCharacterInventory:O,onAddCharacterAmmo:D,onAddCharacterWeapon:M,onAddCharacterArmour:$,onFireRound:L,onReloadWeapon:q})]})]})}function __(){const{user:o,loading:s}=ic(),[i,l]=B.useState(null);return s?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?i?h.jsx(b_,{campaignId:i,onBackToCampaigns:()=>l(null)}):h.jsx(Yb,{onCampaignSelect:l}):h.jsx(Nb,{})}class x_ extends Hm.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,i){console.error("Error boundary caught an error:",s,i)}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:h.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),h.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),h.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const gg=document.getElementById("root");if(!gg)throw new Error("Failed to find the root element");tv.createRoot(gg).render(h.jsx(Hm.StrictMode,{children:h.jsx(x_,{children:h.jsx(__,{})})}));export{Lm as D,bn as _};
