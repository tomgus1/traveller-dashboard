const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-iaGQw1-y.js","assets/icons-Bw6bOHsG.js","assets/excel-Du8kUxR_.js","assets/vendor-Dfoqj1Wf.js"])))=>i.map(i=>d[i]);
import{r as B,U as ol,X as Hy,P as lc,a as zr,T as uc,b as cl,C as $y,S as Qm,L as Gy,c as Vy,d as cm,M as Yy,E as zo,e as Do,R as Qy,f as Ky,g as Xy,h as Jy,i as Zy,D as Py,j as Wy,k as Km}from"./icons-Bw6bOHsG.js";import{g as Xm,a as Iy}from"./excel-Du8kUxR_.js";import{r as Fy,a as ep}from"./vendor-Dfoqj1Wf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();var Mo={exports:{}},Tr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function tp(){if(dm)return Tr;dm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var g in u)g!=="key"&&(d[g]=u[g])}else d=u;return u=d.ref,{$$typeof:o,type:i,key:f,ref:u!==void 0?u:null,props:d}}return Tr.Fragment=n,Tr.jsx=r,Tr.jsxs=r,Tr}var fm;function ap(){return fm||(fm=1,Mo.exports=tp()),Mo.exports}var h=ap(),Bo={exports:{}},Nr={},Lo={exports:{}},qo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function np(){return hm||(hm=1,(function(o){function n(k,L){var K=k.length;k.push(L);e:for(;0<K;){var pe=K-1>>>1,_e=k[pe];if(0<u(_e,L))k[pe]=L,k[K]=_e,K=pe;else break e}}function r(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var L=k[0],K=k.pop();if(K!==L){k[0]=K;e:for(var pe=0,_e=k.length,Qe=_e>>>1;pe<Qe;){var xe=2*(pe+1)-1,de=k[xe],ze=xe+1,ft=k[ze];if(0>u(de,K))ze<_e&&0>u(ft,de)?(k[pe]=ft,k[ze]=K,pe=ze):(k[pe]=de,k[xe]=K,pe=xe);else if(ze<_e&&0>u(ft,K))k[pe]=ft,k[ze]=K,pe=ze;else break e}}return L}function u(k,L){var K=k.sortIndex-L.sortIndex;return K!==0?K:k.id-L.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();o.unstable_now=function(){return f.now()-g}}var y=[],v=[],_=1,b=null,x=3,S=!1,C=!1,R=!1,M=!1,G=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function V(k){for(var L=r(v);L!==null;){if(L.callback===null)i(v);else if(L.startTime<=k)i(v),L.sortIndex=L.expirationTime,n(y,L);else break;L=r(v)}}function F(k){if(R=!1,V(k),!C)if(r(y)!==null)C=!0,$||($=!0,ye());else{var L=r(v);L!==null&&nt(F,L.startTime-k)}}var $=!1,ee=-1,ce=5,Ee=-1;function Ze(){return M?!0:!(o.unstable_now()-Ee<ce)}function P(){if(M=!1,$){var k=o.unstable_now();Ee=k;var L=!0;try{e:{C=!1,R&&(R=!1,H(ee),ee=-1),S=!0;var K=x;try{t:{for(V(k),b=r(y);b!==null&&!(b.expirationTime>k&&Ze());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,x=b.priorityLevel;var _e=pe(b.expirationTime<=k);if(k=o.unstable_now(),typeof _e=="function"){b.callback=_e,V(k),L=!0;break t}b===r(y)&&i(y),V(k)}else i(y);b=r(y)}if(b!==null)L=!0;else{var Qe=r(v);Qe!==null&&nt(F,Qe.startTime-k),L=!1}}break e}finally{b=null,x=K,S=!1}L=void 0}}finally{L?ye():$=!1}}}var ye;if(typeof q=="function")ye=function(){q(P)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,Dt=zt.port2;zt.port1.onmessage=P,ye=function(){Dt.postMessage(null)}}else ye=function(){G(P,0)};function nt(k,L){ee=G(function(){k(o.unstable_now())},L)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(k){k.callback=null},o.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<k?Math.floor(1e3/k):5},o.unstable_getCurrentPriorityLevel=function(){return x},o.unstable_next=function(k){switch(x){case 1:case 2:case 3:var L=3;break;default:L=x}var K=x;x=L;try{return k()}finally{x=K}},o.unstable_requestPaint=function(){M=!0},o.unstable_runWithPriority=function(k,L){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var K=x;x=k;try{return L()}finally{x=K}},o.unstable_scheduleCallback=function(k,L,K){var pe=o.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?pe+K:pe):K=pe,k){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=K+_e,k={id:_++,callback:L,priorityLevel:k,startTime:K,expirationTime:_e,sortIndex:-1},K>pe?(k.sortIndex=K,n(v,k),r(y)===null&&k===r(v)&&(R?(H(ee),ee=-1):R=!0,nt(F,K-pe))):(k.sortIndex=_e,n(y,k),C||S||(C=!0,$||($=!0,ye()))),k},o.unstable_shouldYield=Ze,o.unstable_wrapCallback=function(k){var L=x;return function(){var K=x;x=L;try{return k.apply(this,arguments)}finally{x=K}}}})(qo)),qo}var mm;function sp(){return mm||(mm=1,Lo.exports=np()),Lo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function rp(){if(gm)return Nr;gm=1;var o=sp(),n=Fy(),r=ep();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(i(188))}function v(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var l=a.return;if(l===null)break;var c=l.alternate;if(c===null){if(s=l.return,s!==null){a=s;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===a)return y(l),e;if(c===s)return y(l),t;c=c.sibling}throw Error(i(188))}if(a.return!==s.return)a=l,s=c;else{for(var m=!1,p=l.child;p;){if(p===a){m=!0,a=l,s=c;break}if(p===s){m=!0,s=l,a=c;break}p=p.sibling}if(!m){for(p=c.child;p;){if(p===a){m=!0,a=c,s=l;break}if(p===s){m=!0,s=c,a=l;break}p=p.sibling}if(!m)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function _(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),Ee=Symbol.for("react.activity"),Ze=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function ye(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var zt=Symbol.for("react.client.reference");function Dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===zt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case G:return"Profiler";case M:return"StrictMode";case F:return"Suspense";case $:return"SuspenseList";case Ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case q:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return t=e.displayName||null,t!==null?t:Dt(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return Dt(e(t))}catch{}}return null}var nt=Array.isArray,k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},pe=[],_e=-1;function Qe(e){return{current:e}}function xe(e){0>_e||(e.current=pe[_e],pe[_e]=null,_e--)}function de(e,t){_e++,pe[_e]=e.current,e.current=t}var ze=Qe(null),ft=Qe(null),St=Qe(null),Qa=Qe(null);function Cn(e,t){switch(de(St,t),de(ft,e),de(ze,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kh(t),e=zh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}xe(ze),de(ze,e)}function Mt(){xe(ze),xe(ft),xe(St)}function Ka(e){e.memoizedState!==null&&de(Qa,e);var t=ze.current,a=zh(t,e.type);t!==a&&(de(ft,e),de(ze,a))}function Xa(e){ft.current===e&&(xe(ze),xe(ft)),Qa.current===e&&(xe(Qa),jr._currentValue=K)}var Rs,An;function Jt(e){if(Rs===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Rs=t&&t[1]||"",An=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rs+e+An}var En=!1;function Us(e,t){if(!e||En)return"";En=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var D=function(){throw Error()};if(Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(O){var N=O}Reflect.construct(e,[],D)}else{try{D.call()}catch(O){N=O}e.call(D.prototype)}}else{try{throw Error()}catch(O){N=O}(D=e())&&typeof D.catch=="function"&&D.catch(function(){})}}catch(O){if(O&&N&&typeof O.stack=="string")return[O.stack,N.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),m=c[0],p=c[1];if(m&&p){var w=m.split(`
`),T=p.split(`
`);for(l=s=0;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;for(;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;if(s===w.length||l===T.length)for(s=w.length-1,l=T.length-1;1<=s&&0<=l&&w[s]!==T[l];)l--;for(;1<=s&&0<=l;s--,l--)if(w[s]!==T[l]){if(s!==1||l!==1)do if(s--,l--,0>l||w[s]!==T[l]){var U=`
`+w[s].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=s&&0<=l);break}}}finally{En=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Jt(a):""}function pl(e,t){switch(e.tag){case 26:case 27:case 5:return Jt(e.type);case 16:return Jt("Lazy");case 13:return e.child!==t&&t!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return Us(e.type,!1);case 11:return Us(e.type.render,!1);case 1:return Us(e.type,!0);case 31:return Jt("Activity");default:return""}}function Lr(e){try{var t="",a=null;do t+=pl(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var ks=Object.prototype.hasOwnProperty,zs=o.unstable_scheduleCallback,Ds=o.unstable_cancelCallback,vl=o.unstable_shouldYield,bl=o.unstable_requestPaint,tt=o.unstable_now,_l=o.unstable_getCurrentPriorityLevel,qr=o.unstable_ImmediatePriority,Hr=o.unstable_UserBlockingPriority,J=o.unstable_NormalPriority,Re=o.unstable_LowPriority,ma=o.unstable_IdlePriority,wg=o.log,Sg=o.unstable_setDisableYieldValue,Ms=null,ht=null;function ga(e){if(typeof wg=="function"&&Sg(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Ms,e)}catch{}}var mt=Math.clz32?Math.clz32:Ag,jg=Math.log,Cg=Math.LN2;function Ag(e){return e>>>=0,e===0?32:31-(jg(e)/Cg|0)|0}var $r=256,Gr=262144,Vr=4194304;function Ja(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Yr(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var l=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var p=s&134217727;return p!==0?(s=p&~c,s!==0?l=Ja(s):(m&=p,m!==0?l=Ja(m):a||(a=p&~e,a!==0&&(l=Ja(a))))):(p=s&~c,p!==0?l=Ja(p):m!==0?l=Ja(m):a||(a=s&~e,a!==0&&(l=Ja(a)))),l===0?0:t!==0&&t!==l&&(t&c)===0&&(c=l&-l,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:l}function Bs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Eg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(){var e=Vr;return Vr<<=1,(Vr&62914560)===0&&(Vr=4194304),e}function xl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ls(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tg(e,t,a,s,l,c){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var p=e.entanglements,w=e.expirationTimes,T=e.hiddenUpdates;for(a=m&~a;0<a;){var U=31-mt(a),D=1<<U;p[U]=0,w[U]=-1;var N=T[U];if(N!==null)for(T[U]=null,U=0;U<N.length;U++){var O=N[U];O!==null&&(O.lane&=-536870913)}a&=~D}s!==0&&mc(e,s,0),c!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~t))}function mc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-mt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function gc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-mt(a),l=1<<s;l&t|e[s]&t&&(e[s]|=t),a&=~l}}function yc(e,t){var a=t&-t;return a=(a&42)!==0?1:wl(a),(a&(e.suspendedLanes|t))!==0?0:a}function wl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pc(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:nm(e.type))}function vc(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var ya=Math.random().toString(36).slice(2),Pe="__reactFiber$"+ya,st="__reactProps$"+ya,Tn="__reactContainer$"+ya,jl="__reactEvents$"+ya,Ng="__reactListeners$"+ya,Og="__reactHandles$"+ya,bc="__reactResources$"+ya,qs="__reactMarker$"+ya;function Cl(e){delete e[Pe],delete e[st],delete e[jl],delete e[Ng],delete e[Og]}function Nn(e){var t=e[Pe];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Tn]||a[Pe]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=$h(e);e!==null;){if(a=e[Pe])return a;e=$h(e)}return t}e=a,a=e.parentNode}return null}function On(e){if(e=e[Pe]||e[Tn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Hs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Rn(e){var t=e[bc];return t||(t=e[bc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[qs]=!0}var _c=new Set,xc={};function Za(e,t){Un(e,t),Un(e+"Capture",t)}function Un(e,t){for(xc[e]=t,e=0;e<t.length;e++)_c.add(t[e])}var Rg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},Sc={};function Ug(e){return ks.call(Sc,e)?!0:ks.call(wc,e)?!1:Rg.test(e)?Sc[e]=!0:(wc[e]=!0,!1)}function Qr(e,t,a){if(Ug(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Kr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Zt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kg(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,c=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){a=""+m,c.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Al(e){if(!e._valueTracker){var t=jc(e)?"checked":"value";e._valueTracker=kg(e,t,""+e[t])}}function Cc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=jc(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zg=/[\n"\\]/g;function Ct(e){return e.replace(zg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function El(e,t,a,s,l,c,m,p){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+jt(t)):e.value!==""+jt(t)&&(e.value=""+jt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Tl(e,m,jt(t)):a!=null?Tl(e,m,jt(a)):s!=null&&e.removeAttribute("value"),l==null&&c!=null&&(e.defaultChecked=!!c),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+jt(p):e.removeAttribute("name")}function Ac(e,t,a,s,l,c,m,p){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){Al(e);return}a=a!=null?""+jt(a):"",t=t!=null?""+jt(t):a,p||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=p?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Al(e)}function Tl(e,t,a){t==="number"&&Xr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function kn(e,t,a,s){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&s&&(e[a].defaultSelected=!0)}else{for(a=""+jt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Ec(e,t,a){if(t!=null&&(t=""+jt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+jt(a):""}function Tc(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(i(92));if(nt(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=jt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Al(e)}function zn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Dg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nc(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Dg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Oc(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&a[l]!==s&&Nc(e,l,s)}else for(var c in t)t.hasOwnProperty(c)&&Nc(e,c,t[c])}function Nl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jr(e){return Bg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Ol=null;function Rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dn=null,Mn=null;function Rc(e){var t=On(e);if(t&&(e=t.stateNode)){var a=e[st]||null;e:switch(e=t.stateNode,t.type){case"input":if(El(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var l=s[st]||null;if(!l)throw Error(i(90));El(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Cc(s)}break e;case"textarea":Ec(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&kn(e,!!a.multiple,t,!1)}}}var Ul=!1;function Uc(e,t,a){if(Ul)return e(t,a);Ul=!0;try{var s=e(t);return s}finally{if(Ul=!1,(Dn!==null||Mn!==null)&&(Di(),Dn&&(t=Dn,e=Mn,Mn=Dn=null,Rc(t),e)))for(t=0;t<e.length;t++)Rc(e[t])}}function $s(e,t){var a=e.stateNode;if(a===null)return null;var s=a[st]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=!1;if(Wt)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){kl=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{kl=!1}var pa=null,zl=null,Zr=null;function kc(){if(Zr)return Zr;var e,t=zl,a=t.length,s,l="value"in pa?pa.value:pa.textContent,c=l.length;for(e=0;e<a&&t[e]===l[e];e++);var m=a-e;for(s=1;s<=m&&t[a-s]===l[c-s];s++);return Zr=l.slice(e,1<s?1-s:void 0)}function Pr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wr(){return!0}function zc(){return!1}function rt(e){function t(a,s,l,c,m){this._reactName=a,this._targetInst=l,this.type=s,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(a=e[p],this[p]=a?a(c):c[p]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Wr:zc,this.isPropagationStopped=zc,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),t}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=rt(Pa),Vs=b({},Pa,{view:0,detail:0}),Lg=rt(Vs),Dl,Ml,Ys,Fr=b({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ys&&(Ys&&e.type==="mousemove"?(Dl=e.screenX-Ys.screenX,Ml=e.screenY-Ys.screenY):Ml=Dl=0,Ys=e),Dl)},movementY:function(e){return"movementY"in e?e.movementY:Ml}}),Dc=rt(Fr),qg=b({},Fr,{dataTransfer:0}),Hg=rt(qg),$g=b({},Vs,{relatedTarget:0}),Bl=rt($g),Gg=b({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Vg=rt(Gg),Yg=b({},Pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qg=rt(Yg),Kg=b({},Pa,{data:0}),Mc=rt(Kg),Xg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zg[e])?!!t[e]:!1}function Ll(){return Pg}var Wg=b({},Vs,{key:function(e){if(e.key){var t=Xg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(e){return e.type==="keypress"?Pr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ig=rt(Wg),Fg=b({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=rt(Fg),e0=b({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),t0=rt(e0),a0=b({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),n0=rt(a0),s0=b({},Fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r0=rt(s0),i0=b({},Pa,{newState:0,oldState:0}),l0=rt(i0),u0=[9,13,27,32],ql=Wt&&"CompositionEvent"in window,Qs=null;Wt&&"documentMode"in document&&(Qs=document.documentMode);var o0=Wt&&"TextEvent"in window&&!Qs,Lc=Wt&&(!ql||Qs&&8<Qs&&11>=Qs),qc=" ",Hc=!1;function $c(e,t){switch(e){case"keyup":return u0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bn=!1;function c0(e,t){switch(e){case"compositionend":return Gc(t);case"keypress":return t.which!==32?null:(Hc=!0,qc);case"textInput":return e=t.data,e===qc&&Hc?null:e;default:return null}}function d0(e,t){if(Bn)return e==="compositionend"||!ql&&$c(e,t)?(e=kc(),Zr=zl=pa=null,Bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lc&&t.locale!=="ko"?null:t.data;default:return null}}var f0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!f0[e.type]:t==="textarea"}function Yc(e,t,a,s){Dn?Mn?Mn.push(s):Mn=[s]:Dn=s,t=Gi(t,"onChange"),0<t.length&&(a=new Ir("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Ks=null,Xs=null;function h0(e){Eh(e,0)}function ei(e){var t=Hs(e);if(Cc(t))return e}function Qc(e,t){if(e==="change")return t}var Kc=!1;if(Wt){var Hl;if(Wt){var $l="oninput"in document;if(!$l){var Xc=document.createElement("div");Xc.setAttribute("oninput","return;"),$l=typeof Xc.oninput=="function"}Hl=$l}else Hl=!1;Kc=Hl&&(!document.documentMode||9<document.documentMode)}function Jc(){Ks&&(Ks.detachEvent("onpropertychange",Zc),Xs=Ks=null)}function Zc(e){if(e.propertyName==="value"&&ei(Xs)){var t=[];Yc(t,Xs,e,Rl(e)),Uc(h0,t)}}function m0(e,t,a){e==="focusin"?(Jc(),Ks=t,Xs=a,Ks.attachEvent("onpropertychange",Zc)):e==="focusout"&&Jc()}function g0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ei(Xs)}function y0(e,t){if(e==="click")return ei(t)}function p0(e,t){if(e==="input"||e==="change")return ei(t)}function v0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:v0;function Js(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var l=a[s];if(!ks.call(t,l)||!gt(e[l],t[l]))return!1}return!0}function Pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wc(e,t){var a=Pc(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pc(a)}}function Ic(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ic(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Xr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Xr(e.document)}return t}function Gl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var b0=Wt&&"documentMode"in document&&11>=document.documentMode,Ln=null,Vl=null,Zs=null,Yl=!1;function ed(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yl||Ln==null||Ln!==Xr(s)||(s=Ln,"selectionStart"in s&&Gl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Zs&&Js(Zs,s)||(Zs=s,s=Gi(Vl,"onSelect"),0<s.length&&(t=new Ir("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Ln)))}function Wa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var qn={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Ql={},td={};Wt&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Ia(e){if(Ql[e])return Ql[e];if(!qn[e])return e;var t=qn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in td)return Ql[e]=t[a];return e}var ad=Ia("animationend"),nd=Ia("animationiteration"),sd=Ia("animationstart"),_0=Ia("transitionrun"),x0=Ia("transitionstart"),w0=Ia("transitioncancel"),rd=Ia("transitionend"),id=new Map,Kl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kl.push("scrollEnd");function Bt(e,t){id.set(e,t),Za(t,[e])}var ti=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},At=[],Hn=0,Xl=0;function ai(){for(var e=Hn,t=Xl=Hn=0;t<e;){var a=At[t];At[t++]=null;var s=At[t];At[t++]=null;var l=At[t];At[t++]=null;var c=At[t];if(At[t++]=null,s!==null&&l!==null){var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}c!==0&&ld(a,l,c)}}function ni(e,t,a,s){At[Hn++]=e,At[Hn++]=t,At[Hn++]=a,At[Hn++]=s,Xl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Jl(e,t,a,s){return ni(e,t,a,s),si(e)}function Fa(e,t){return ni(e,null,null,t),si(e)}function ld(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var l=!1,c=e.return;c!==null;)c.childLanes|=a,s=c.alternate,s!==null&&(s.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(l=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,l&&t!==null&&(l=31-mt(a),e=c.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=a|536870912),c):null}function si(e){if(50<pr)throw pr=0,no=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var $n={};function S0(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,a,s){return new S0(e,t,a,s)}function Zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function It(e,t){var a=e.alternate;return a===null?(a=yt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ud(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ri(e,t,a,s,l,c){var m=0;if(s=e,typeof e=="function")Zl(e)&&(m=1);else if(typeof e=="string")m=Ty(e,a,ze.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ee:return e=yt(31,a,t,l),e.elementType=Ee,e.lanes=c,e;case R:return en(a.children,l,c,t);case M:m=8,l|=24;break;case G:return e=yt(12,a,t,l|2),e.elementType=G,e.lanes=c,e;case F:return e=yt(13,a,t,l),e.elementType=F,e.lanes=c,e;case $:return e=yt(19,a,t,l),e.elementType=$,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:m=10;break e;case H:m=9;break e;case V:m=11;break e;case ee:m=14;break e;case ce:m=16,s=null;break e}m=29,a=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=yt(m,a,t,l),t.elementType=e,t.type=s,t.lanes=c,t}function en(e,t,a,s){return e=yt(7,e,s,t),e.lanes=a,e}function Pl(e,t,a){return e=yt(6,e,null,t),e.lanes=a,e}function od(e){var t=yt(18,null,null,0);return t.stateNode=e,t}function Wl(e,t,a){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var cd=new WeakMap;function Et(e,t){if(typeof e=="object"&&e!==null){var a=cd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Lr(t)},cd.set(e,t),t)}return{value:e,source:t,stack:Lr(t)}}var Gn=[],Vn=0,ii=null,Ps=0,Tt=[],Nt=0,va=null,Vt=1,Yt="";function Ft(e,t){Gn[Vn++]=Ps,Gn[Vn++]=ii,ii=e,Ps=t}function dd(e,t,a){Tt[Nt++]=Vt,Tt[Nt++]=Yt,Tt[Nt++]=va,va=e;var s=Vt;e=Yt;var l=32-mt(s)-1;s&=~(1<<l),a+=1;var c=32-mt(t)+l;if(30<c){var m=l-l%5;c=(s&(1<<m)-1).toString(32),s>>=m,l-=m,Vt=1<<32-mt(t)+l|a<<l|s,Yt=c+e}else Vt=1<<c|a<<l|s,Yt=e}function Il(e){e.return!==null&&(Ft(e,1),dd(e,1,0))}function Fl(e){for(;e===ii;)ii=Gn[--Vn],Gn[Vn]=null,Ps=Gn[--Vn],Gn[Vn]=null;for(;e===va;)va=Tt[--Nt],Tt[Nt]=null,Yt=Tt[--Nt],Tt[Nt]=null,Vt=Tt[--Nt],Tt[Nt]=null}function fd(e,t){Tt[Nt++]=Vt,Tt[Nt++]=Yt,Tt[Nt++]=va,Vt=t.id,Yt=t.overflow,va=e}var We=null,Te=null,ue=!1,ba=null,Ot=!1,eu=Error(i(519));function _a(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ws(Et(t,e)),eu}function hd(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Pe]=e,t[st]=s,a){case"dialog":re("cancel",t),re("close",t);break;case"iframe":case"object":case"embed":re("load",t);break;case"video":case"audio":for(a=0;a<br.length;a++)re(br[a],t);break;case"source":re("error",t);break;case"img":case"image":case"link":re("error",t),re("load",t);break;case"details":re("toggle",t);break;case"input":re("invalid",t),Ac(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":re("invalid",t);break;case"textarea":re("invalid",t),Tc(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Rh(t.textContent,a)?(s.popover!=null&&(re("beforetoggle",t),re("toggle",t)),s.onScroll!=null&&re("scroll",t),s.onScrollEnd!=null&&re("scrollend",t),s.onClick!=null&&(t.onclick=Pt),t=!0):t=!1,t||_a(e,!0)}function md(e){for(We=e.return;We;)switch(We.tag){case 5:case 31:case 13:Ot=!1;return;case 27:case 3:Ot=!0;return;default:We=We.return}}function Yn(e){if(e!==We)return!1;if(!ue)return md(e),ue=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bo(e.type,e.memoizedProps)),a=!a),a&&Te&&_a(e),md(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Te=Hh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Te=Hh(e)}else t===27?(t=Te,za(e.type)?(e=jo,jo=null,Te=e):Te=t):Te=We?Ut(e.stateNode.nextSibling):null;return!0}function tn(){Te=We=null,ue=!1}function tu(){var e=ba;return e!==null&&(ot===null?ot=e:ot.push.apply(ot,e),ba=null),e}function Ws(e){ba===null?ba=[e]:ba.push(e)}var au=Qe(null),an=null,ea=null;function xa(e,t,a){de(au,t._currentValue),t._currentValue=a}function ta(e){e._currentValue=au.current,xe(au)}function nu(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function su(e,t,a,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){var m=l.child;c=c.firstContext;e:for(;c!==null;){var p=c;c=l;for(var w=0;w<t.length;w++)if(p.context===t[w]){c.lanes|=a,p=c.alternate,p!==null&&(p.lanes|=a),nu(c.return,a,e),s||(m=null);break e}c=p.next}}else if(l.tag===18){if(m=l.return,m===null)throw Error(i(341));m.lanes|=a,c=m.alternate,c!==null&&(c.lanes|=a),nu(m,a,e),m=null}else m=l.child;if(m!==null)m.return=l;else for(m=l;m!==null;){if(m===e){m=null;break}if(l=m.sibling,l!==null){l.return=m.return,m=l;break}m=m.return}l=m}}function Qn(e,t,a,s){e=null;for(var l=t,c=!1;l!==null;){if(!c){if((l.flags&524288)!==0)c=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var m=l.alternate;if(m===null)throw Error(i(387));if(m=m.memoizedProps,m!==null){var p=l.type;gt(l.pendingProps.value,m.value)||(e!==null?e.push(p):e=[p])}}else if(l===Qa.current){if(m=l.alternate,m===null)throw Error(i(387));m.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(jr):e=[jr])}l=l.return}e!==null&&su(t,e,a,s),t.flags|=262144}function li(e){for(e=e.firstContext;e!==null;){if(!gt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function nn(e){an=e,ea=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ie(e){return gd(an,e)}function ui(e,t){return an===null&&nn(e),gd(e,t)}function gd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ea===null){if(e===null)throw Error(i(308));ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ea=ea.next=t;return a}var j0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},C0=o.unstable_scheduleCallback,A0=o.unstable_NormalPriority,Be={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ru(){return{controller:new j0,data:new Map,refCount:0}}function Is(e){e.refCount--,e.refCount===0&&C0(A0,function(){e.controller.abort()})}var Fs=null,iu=0,Kn=0,Xn=null;function E0(e,t){if(Fs===null){var a=Fs=[];iu=0,Kn=oo(),Xn={status:"pending",value:void 0,then:function(s){a.push(s)}}}return iu++,t.then(yd,yd),t}function yd(){if(--iu===0&&Fs!==null){Xn!==null&&(Xn.status="fulfilled");var e=Fs;Fs=null,Kn=0,Xn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function T0(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),s}var pd=k.S;k.S=function(e,t){th=tt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&E0(e,t),pd!==null&&pd(e,t)};var sn=Qe(null);function lu(){var e=sn.current;return e!==null?e:Ce.pooledCache}function oi(e,t){t===null?de(sn,sn.current):de(sn,t.pool)}function vd(){var e=lu();return e===null?null:{parent:Be._currentValue,pool:e}}var Jn=Error(i(460)),uu=Error(i(474)),ci=Error(i(542)),di={then:function(){}};function bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _d(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Pt,Pt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wd(e),e;default:if(typeof t.status=="string")t.then(Pt,Pt);else{if(e=Ce,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wd(e),e}throw ln=t,Jn}}function rn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ln=a,Jn):a}}var ln=null;function xd(){if(ln===null)throw Error(i(459));var e=ln;return ln=null,e}function wd(e){if(e===Jn||e===ci)throw Error(i(483))}var Zn=null,er=0;function fi(e){var t=er;return er+=1,Zn===null&&(Zn=[]),_d(Zn,e,t)}function tr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hi(e,t){throw t.$$typeof===x?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Sd(e){function t(A,j){if(e){var E=A.deletions;E===null?(A.deletions=[j],A.flags|=16):E.push(j)}}function a(A,j){if(!e)return null;for(;j!==null;)t(A,j),j=j.sibling;return null}function s(A){for(var j=new Map;A!==null;)A.key!==null?j.set(A.key,A):j.set(A.index,A),A=A.sibling;return j}function l(A,j){return A=It(A,j),A.index=0,A.sibling=null,A}function c(A,j,E){return A.index=E,e?(E=A.alternate,E!==null?(E=E.index,E<j?(A.flags|=67108866,j):E):(A.flags|=67108866,j)):(A.flags|=1048576,j)}function m(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function p(A,j,E,z){return j===null||j.tag!==6?(j=Pl(E,A.mode,z),j.return=A,j):(j=l(j,E),j.return=A,j)}function w(A,j,E,z){var Z=E.type;return Z===R?U(A,j,E.props.children,z,E.key):j!==null&&(j.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===ce&&rn(Z)===j.type)?(j=l(j,E.props),tr(j,E),j.return=A,j):(j=ri(E.type,E.key,E.props,null,A.mode,z),tr(j,E),j.return=A,j)}function T(A,j,E,z){return j===null||j.tag!==4||j.stateNode.containerInfo!==E.containerInfo||j.stateNode.implementation!==E.implementation?(j=Wl(E,A.mode,z),j.return=A,j):(j=l(j,E.children||[]),j.return=A,j)}function U(A,j,E,z,Z){return j===null||j.tag!==7?(j=en(E,A.mode,z,Z),j.return=A,j):(j=l(j,E),j.return=A,j)}function D(A,j,E){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Pl(""+j,A.mode,E),j.return=A,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return E=ri(j.type,j.key,j.props,null,A.mode,E),tr(E,j),E.return=A,E;case C:return j=Wl(j,A.mode,E),j.return=A,j;case ce:return j=rn(j),D(A,j,E)}if(nt(j)||ye(j))return j=en(j,A.mode,E,null),j.return=A,j;if(typeof j.then=="function")return D(A,fi(j),E);if(j.$$typeof===q)return D(A,ui(A,j),E);hi(A,j)}return null}function N(A,j,E,z){var Z=j!==null?j.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return Z!==null?null:p(A,j,""+E,z);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case S:return E.key===Z?w(A,j,E,z):null;case C:return E.key===Z?T(A,j,E,z):null;case ce:return E=rn(E),N(A,j,E,z)}if(nt(E)||ye(E))return Z!==null?null:U(A,j,E,z,null);if(typeof E.then=="function")return N(A,j,fi(E),z);if(E.$$typeof===q)return N(A,j,ui(A,E),z);hi(A,E)}return null}function O(A,j,E,z,Z){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return A=A.get(E)||null,p(j,A,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return A=A.get(z.key===null?E:z.key)||null,w(j,A,z,Z);case C:return A=A.get(z.key===null?E:z.key)||null,T(j,A,z,Z);case ce:return z=rn(z),O(A,j,E,z,Z)}if(nt(z)||ye(z))return A=A.get(E)||null,U(j,A,z,Z,null);if(typeof z.then=="function")return O(A,j,E,fi(z),Z);if(z.$$typeof===q)return O(A,j,E,ui(j,z),Z);hi(j,z)}return null}function Y(A,j,E,z){for(var Z=null,fe=null,Q=j,ne=j=0,le=null;Q!==null&&ne<E.length;ne++){Q.index>ne?(le=Q,Q=null):le=Q.sibling;var he=N(A,Q,E[ne],z);if(he===null){Q===null&&(Q=le);break}e&&Q&&he.alternate===null&&t(A,Q),j=c(he,j,ne),fe===null?Z=he:fe.sibling=he,fe=he,Q=le}if(ne===E.length)return a(A,Q),ue&&Ft(A,ne),Z;if(Q===null){for(;ne<E.length;ne++)Q=D(A,E[ne],z),Q!==null&&(j=c(Q,j,ne),fe===null?Z=Q:fe.sibling=Q,fe=Q);return ue&&Ft(A,ne),Z}for(Q=s(Q);ne<E.length;ne++)le=O(Q,A,ne,E[ne],z),le!==null&&(e&&le.alternate!==null&&Q.delete(le.key===null?ne:le.key),j=c(le,j,ne),fe===null?Z=le:fe.sibling=le,fe=le);return e&&Q.forEach(function(qa){return t(A,qa)}),ue&&Ft(A,ne),Z}function I(A,j,E,z){if(E==null)throw Error(i(151));for(var Z=null,fe=null,Q=j,ne=j=0,le=null,he=E.next();Q!==null&&!he.done;ne++,he=E.next()){Q.index>ne?(le=Q,Q=null):le=Q.sibling;var qa=N(A,Q,he.value,z);if(qa===null){Q===null&&(Q=le);break}e&&Q&&qa.alternate===null&&t(A,Q),j=c(qa,j,ne),fe===null?Z=qa:fe.sibling=qa,fe=qa,Q=le}if(he.done)return a(A,Q),ue&&Ft(A,ne),Z;if(Q===null){for(;!he.done;ne++,he=E.next())he=D(A,he.value,z),he!==null&&(j=c(he,j,ne),fe===null?Z=he:fe.sibling=he,fe=he);return ue&&Ft(A,ne),Z}for(Q=s(Q);!he.done;ne++,he=E.next())he=O(Q,A,ne,he.value,z),he!==null&&(e&&he.alternate!==null&&Q.delete(he.key===null?ne:he.key),j=c(he,j,ne),fe===null?Z=he:fe.sibling=he,fe=he);return e&&Q.forEach(function(qy){return t(A,qy)}),ue&&Ft(A,ne),Z}function je(A,j,E,z){if(typeof E=="object"&&E!==null&&E.type===R&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case S:e:{for(var Z=E.key;j!==null;){if(j.key===Z){if(Z=E.type,Z===R){if(j.tag===7){a(A,j.sibling),z=l(j,E.props.children),z.return=A,A=z;break e}}else if(j.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===ce&&rn(Z)===j.type){a(A,j.sibling),z=l(j,E.props),tr(z,E),z.return=A,A=z;break e}a(A,j);break}else t(A,j);j=j.sibling}E.type===R?(z=en(E.props.children,A.mode,z,E.key),z.return=A,A=z):(z=ri(E.type,E.key,E.props,null,A.mode,z),tr(z,E),z.return=A,A=z)}return m(A);case C:e:{for(Z=E.key;j!==null;){if(j.key===Z)if(j.tag===4&&j.stateNode.containerInfo===E.containerInfo&&j.stateNode.implementation===E.implementation){a(A,j.sibling),z=l(j,E.children||[]),z.return=A,A=z;break e}else{a(A,j);break}else t(A,j);j=j.sibling}z=Wl(E,A.mode,z),z.return=A,A=z}return m(A);case ce:return E=rn(E),je(A,j,E,z)}if(nt(E))return Y(A,j,E,z);if(ye(E)){if(Z=ye(E),typeof Z!="function")throw Error(i(150));return E=Z.call(E),I(A,j,E,z)}if(typeof E.then=="function")return je(A,j,fi(E),z);if(E.$$typeof===q)return je(A,j,ui(A,E),z);hi(A,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,j!==null&&j.tag===6?(a(A,j.sibling),z=l(j,E),z.return=A,A=z):(a(A,j),z=Pl(E,A.mode,z),z.return=A,A=z),m(A)):a(A,j)}return function(A,j,E,z){try{er=0;var Z=je(A,j,E,z);return Zn=null,Z}catch(Q){if(Q===Jn||Q===ci)throw Q;var fe=yt(29,Q,null,A.mode);return fe.lanes=z,fe.return=A,fe}finally{}}}var un=Sd(!0),jd=Sd(!1),wa=!1;function ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(me&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=si(e),ld(e,null,a),t}return ni(e,s,t,a),si(e)}function ar(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,gc(e,a)}}function du(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var l=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?l=c=m:c=c.next=m,a=a.next}while(a!==null);c===null?l=c=t:c=c.next=t}else l=c=t;a={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var fu=!1;function nr(){if(fu){var e=Xn;if(e!==null)throw e}}function sr(e,t,a,s){fu=!1;var l=e.updateQueue;wa=!1;var c=l.firstBaseUpdate,m=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var w=p,T=w.next;w.next=null,m===null?c=T:m.next=T,m=w;var U=e.alternate;U!==null&&(U=U.updateQueue,p=U.lastBaseUpdate,p!==m&&(p===null?U.firstBaseUpdate=T:p.next=T,U.lastBaseUpdate=w))}if(c!==null){var D=l.baseState;m=0,U=T=w=null,p=c;do{var N=p.lane&-536870913,O=N!==p.lane;if(O?(ie&N)===N:(s&N)===N){N!==0&&N===Kn&&(fu=!0),U!==null&&(U=U.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var Y=e,I=p;N=t;var je=a;switch(I.tag){case 1:if(Y=I.payload,typeof Y=="function"){D=Y.call(je,D,N);break e}D=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=I.payload,N=typeof Y=="function"?Y.call(je,D,N):Y,N==null)break e;D=b({},D,N);break e;case 2:wa=!0}}N=p.callback,N!==null&&(e.flags|=64,O&&(e.flags|=8192),O=l.callbacks,O===null?l.callbacks=[N]:O.push(N))}else O={lane:N,tag:p.tag,payload:p.payload,callback:p.callback,next:null},U===null?(T=U=O,w=D):U=U.next=O,m|=N;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;O=p,p=O.next,O.next=null,l.lastBaseUpdate=O,l.shared.pending=null}}while(!0);U===null&&(w=D),l.baseState=w,l.firstBaseUpdate=T,l.lastBaseUpdate=U,c===null&&(l.shared.lanes=0),Na|=m,e.lanes=m,e.memoizedState=D}}function Cd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Ad(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Cd(a[e],t)}var Pn=Qe(null),mi=Qe(0);function Ed(e,t){e=ca,de(mi,e),de(Pn,t),ca=e|t.baseLanes}function hu(){de(mi,ca),de(Pn,Pn.current)}function mu(){ca=mi.current,xe(Pn),xe(mi)}var pt=Qe(null),Rt=null;function Ca(e){var t=e.alternate;de(De,De.current&1),de(pt,e),Rt===null&&(t===null||Pn.current!==null||t.memoizedState!==null)&&(Rt=e)}function gu(e){de(De,De.current),de(pt,e),Rt===null&&(Rt=e)}function Td(e){e.tag===22?(de(De,De.current),de(pt,e),Rt===null&&(Rt=e)):Aa()}function Aa(){de(De,De.current),de(pt,pt.current)}function vt(e){xe(pt),Rt===e&&(Rt=null),xe(De)}var De=Qe(0);function gi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wo(a)||So(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=0,ae=null,we=null,Le=null,yi=!1,Wn=!1,on=!1,pi=0,rr=0,In=null,N0=0;function Ue(){throw Error(i(321))}function yu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!gt(e[a],t[a]))return!1;return!0}function pu(e,t,a,s,l,c){return aa=c,ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?ff:Uu,on=!1,c=a(s,l),on=!1,Wn&&(c=Od(t,a,s,l)),Nd(e),c}function Nd(e){k.H=ur;var t=we!==null&&we.next!==null;if(aa=0,Le=we=ae=null,yi=!1,rr=0,In=null,t)throw Error(i(300));e===null||qe||(e=e.dependencies,e!==null&&li(e)&&(qe=!0))}function Od(e,t,a,s){ae=e;var l=0;do{if(Wn&&(In=null),rr=0,Wn=!1,25<=l)throw Error(i(301));if(l+=1,Le=we=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}k.H=hf,c=t(a,s)}while(Wn);return c}function O0(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?ir(t):t,e=e.useState()[0],(we!==null?we.memoizedState:null)!==e&&(ae.flags|=1024),t}function vu(){var e=pi!==0;return pi=0,e}function bu(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function _u(e){if(yi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yi=!1}aa=0,Le=we=ae=null,Wn=!1,rr=pi=0,In=null}function at(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ae.memoizedState=Le=e:Le=Le.next=e,Le}function Me(){if(we===null){var e=ae.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Le===null?ae.memoizedState:Le.next;if(t!==null)Le=t,we=e;else{if(e===null)throw ae.alternate===null?Error(i(467)):Error(i(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Le===null?ae.memoizedState=Le=e:Le=Le.next=e}return Le}function vi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ir(e){var t=rr;return rr+=1,In===null&&(In=[]),e=_d(In,e,t),t=ae,(Le===null?t.memoizedState:Le.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?ff:Uu),e}function bi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ir(e);if(e.$$typeof===q)return Ie(e)}throw Error(i(438,String(e)))}function xu(e){var t=null,a=ae.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=vi(),ae.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=Ze;return t.index++,a}function na(e,t){return typeof t=="function"?t(e):t}function _i(e){var t=Me();return wu(t,we,e)}function wu(e,t,a){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=a;var l=e.baseQueue,c=s.pending;if(c!==null){if(l!==null){var m=l.next;l.next=c.next,c.next=m}t.baseQueue=l=c,s.pending=null}if(c=e.baseState,l===null)e.memoizedState=c;else{t=l.next;var p=m=null,w=null,T=t,U=!1;do{var D=T.lane&-536870913;if(D!==T.lane?(ie&D)===D:(aa&D)===D){var N=T.revertLane;if(N===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),D===Kn&&(U=!0);else if((aa&N)===N){T=T.next,N===Kn&&(U=!0);continue}else D={lane:0,revertLane:T.revertLane,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},w===null?(p=w=D,m=c):w=w.next=D,ae.lanes|=N,Na|=N;D=T.action,on&&a(c,D),c=T.hasEagerState?T.eagerState:a(c,D)}else N={lane:D,revertLane:T.revertLane,gesture:T.gesture,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},w===null?(p=w=N,m=c):w=w.next=N,ae.lanes|=D,Na|=D;T=T.next}while(T!==null&&T!==t);if(w===null?m=c:w.next=p,!gt(c,e.memoizedState)&&(qe=!0,U&&(a=Xn,a!==null)))throw a;e.memoizedState=c,e.baseState=m,e.baseQueue=w,s.lastRenderedState=c}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Su(e){var t=Me(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,l=a.pending,c=t.memoizedState;if(l!==null){a.pending=null;var m=l=l.next;do c=e(c,m.action),m=m.next;while(m!==l);gt(c,t.memoizedState)||(qe=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,s]}function Rd(e,t,a){var s=ae,l=Me(),c=ue;if(c){if(a===void 0)throw Error(i(407));a=a()}else a=t();var m=!gt((we||l).memoizedState,a);if(m&&(l.memoizedState=a,qe=!0),l=l.queue,Au(zd.bind(null,s,l,e),[e]),l.getSnapshot!==t||m||Le!==null&&Le.memoizedState.tag&1){if(s.flags|=2048,Fn(9,{destroy:void 0},kd.bind(null,s,l,a,t),null),Ce===null)throw Error(i(349));c||(aa&127)!==0||Ud(s,t,a)}return a}function Ud(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ae.updateQueue,t===null?(t=vi(),ae.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function kd(e,t,a,s){t.value=a,t.getSnapshot=s,Dd(t)&&Md(e)}function zd(e,t,a){return a(function(){Dd(t)&&Md(e)})}function Dd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!gt(e,a)}catch{return!0}}function Md(e){var t=Fa(e,2);t!==null&&ct(t,e,2)}function ju(e){var t=at();if(typeof e=="function"){var a=e;if(e=a(),on){ga(!0);try{a()}finally{ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:e},t}function Bd(e,t,a,s){return e.baseState=a,wu(e,we,typeof s=="function"?s:na)}function R0(e,t,a,s,l){if(Si(e))throw Error(i(485));if(e=t.action,e!==null){var c={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};k.T!==null?a(!0):c.isTransition=!1,s(c),a=t.pending,a===null?(c.next=t.pending=c,Ld(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Ld(e,t){var a=t.action,s=t.payload,l=e.state;if(t.isTransition){var c=k.T,m={};k.T=m;try{var p=a(l,s),w=k.S;w!==null&&w(m,p),qd(e,t,p)}catch(T){Cu(e,t,T)}finally{c!==null&&m.types!==null&&(c.types=m.types),k.T=c}}else try{c=a(l,s),qd(e,t,c)}catch(T){Cu(e,t,T)}}function qd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Hd(e,t,s)},function(s){return Cu(e,t,s)}):Hd(e,t,a)}function Hd(e,t,a){t.status="fulfilled",t.value=a,$d(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ld(e,a)))}function Cu(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,$d(t),t=t.next;while(t!==s)}e.action=null}function $d(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gd(e,t){return t}function Vd(e,t){if(ue){var a=Ce.formState;if(a!==null){e:{var s=ae;if(ue){if(Te){t:{for(var l=Te,c=Ot;l.nodeType!==8;){if(!c){l=null;break t}if(l=Ut(l.nextSibling),l===null){l=null;break t}}c=l.data,l=c==="F!"||c==="F"?l:null}if(l){Te=Ut(l.nextSibling),s=l.data==="F!";break e}}_a(s)}s=!1}s&&(t=a[0])}}return a=at(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},a.queue=s,a=of.bind(null,ae,s),s.dispatch=a,s=ju(!1),c=Ru.bind(null,ae,!1,s.queue),s=at(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,a=R0.bind(null,ae,l,c,a),l.dispatch=a,s.memoizedState=e,[t,a,!1]}function Yd(e){var t=Me();return Qd(t,we,e)}function Qd(e,t,a){if(t=wu(e,t,Gd)[0],e=_i(na)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=ir(t)}catch(m){throw m===Jn?ci:m}else s=t;t=Me();var l=t.queue,c=l.dispatch;return a!==t.memoizedState&&(ae.flags|=2048,Fn(9,{destroy:void 0},U0.bind(null,l,a),null)),[s,c,e]}function U0(e,t){e.action=t}function Kd(e){var t=Me(),a=we;if(a!==null)return Qd(t,a,e);Me(),t=t.memoizedState,a=Me();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Fn(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ae.updateQueue,t===null&&(t=vi(),ae.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Xd(){return Me().memoizedState}function xi(e,t,a,s){var l=at();ae.flags|=e,l.memoizedState=Fn(1|t,{destroy:void 0},a,s===void 0?null:s)}function wi(e,t,a,s){var l=Me();s=s===void 0?null:s;var c=l.memoizedState.inst;we!==null&&s!==null&&yu(s,we.memoizedState.deps)?l.memoizedState=Fn(t,c,a,s):(ae.flags|=e,l.memoizedState=Fn(1|t,c,a,s))}function Jd(e,t){xi(8390656,8,e,t)}function Au(e,t){wi(2048,8,e,t)}function k0(e){ae.flags|=4;var t=ae.updateQueue;if(t===null)t=vi(),ae.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Zd(e){var t=Me().memoizedState;return k0({ref:t,nextImpl:e}),function(){if((me&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Pd(e,t){return wi(4,2,e,t)}function Wd(e,t){return wi(4,4,e,t)}function Id(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fd(e,t,a){a=a!=null?a.concat([e]):null,wi(4,4,Id.bind(null,t,e),a)}function Eu(){}function ef(e,t){var a=Me();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&yu(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function tf(e,t){var a=Me();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&yu(t,s[1]))return s[0];if(s=e(),on){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[s,t],s}function Tu(e,t,a){return a===void 0||(aa&1073741824)!==0&&(ie&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=nh(),ae.lanes|=e,Na|=e,a)}function af(e,t,a,s){return gt(a,t)?a:Pn.current!==null?(e=Tu(e,a,s),gt(e,t)||(qe=!0),e):(aa&42)===0||(aa&1073741824)!==0&&(ie&261930)===0?(qe=!0,e.memoizedState=a):(e=nh(),ae.lanes|=e,Na|=e,t)}function nf(e,t,a,s,l){var c=L.p;L.p=c!==0&&8>c?c:8;var m=k.T,p={};k.T=p,Ru(e,!1,t,a);try{var w=l(),T=k.S;if(T!==null&&T(p,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var U=T0(w,s);lr(e,t,U,xt(e))}else lr(e,t,s,xt(e))}catch(D){lr(e,t,{then:function(){},status:"rejected",reason:D},xt())}finally{L.p=c,m!==null&&p.types!==null&&(m.types=p.types),k.T=m}}function z0(){}function Nu(e,t,a,s){if(e.tag!==5)throw Error(i(476));var l=sf(e).queue;nf(e,l,t,K,a===null?z0:function(){return rf(e),a(s)})}function sf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:K},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function rf(e){var t=sf(e);t.next===null&&(t=e.alternate.memoizedState),lr(e,t.next.queue,{},xt())}function Ou(){return Ie(jr)}function lf(){return Me().memoizedState}function uf(){return Me().memoizedState}function D0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=xt();e=Sa(a);var s=ja(t,e,a);s!==null&&(ct(s,t,a),ar(s,t,a)),t={cache:ru()},e.payload=t;return}t=t.return}}function M0(e,t,a){var s=xt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Si(e)?cf(t,a):(a=Jl(e,t,a,s),a!==null&&(ct(a,e,s),df(a,t,s)))}function of(e,t,a){var s=xt();lr(e,t,a,s)}function lr(e,t,a,s){var l={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Si(e))cf(t,l);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var m=t.lastRenderedState,p=c(m,a);if(l.hasEagerState=!0,l.eagerState=p,gt(p,m))return ni(e,t,l,0),Ce===null&&ai(),!1}catch{}finally{}if(a=Jl(e,t,l,s),a!==null)return ct(a,e,s),df(a,t,s),!0}return!1}function Ru(e,t,a,s){if(s={lane:2,revertLane:oo(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Si(e)){if(t)throw Error(i(479))}else t=Jl(e,a,s,2),t!==null&&ct(t,e,2)}function Si(e){var t=e.alternate;return e===ae||t!==null&&t===ae}function cf(e,t){Wn=yi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function df(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,gc(e,a)}}var ur={readContext:Ie,use:bi,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};ur.useEffectEvent=Ue;var ff={readContext:Ie,use:bi,useCallback:function(e,t){return at().memoizedState=[e,t===void 0?null:t],e},useContext:Ie,useEffect:Jd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,xi(4194308,4,Id.bind(null,t,e),a)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){xi(4,2,e,t)},useMemo:function(e,t){var a=at();t=t===void 0?null:t;var s=e();if(on){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=at();if(a!==void 0){var l=a(t);if(on){ga(!0);try{a(t)}finally{ga(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=M0.bind(null,ae,e),[s.memoizedState,e]},useRef:function(e){var t=at();return e={current:e},t.memoizedState=e},useState:function(e){e=ju(e);var t=e.queue,a=of.bind(null,ae,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Eu,useDeferredValue:function(e,t){var a=at();return Tu(a,e,t)},useTransition:function(){var e=ju(!1);return e=nf.bind(null,ae,e.queue,!0,!1),at().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ae,l=at();if(ue){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Ce===null)throw Error(i(349));(ie&127)!==0||Ud(s,t,a)}l.memoizedState=a;var c={value:a,getSnapshot:t};return l.queue=c,Jd(zd.bind(null,s,c,e),[e]),s.flags|=2048,Fn(9,{destroy:void 0},kd.bind(null,s,c,a,t),null),a},useId:function(){var e=at(),t=Ce.identifierPrefix;if(ue){var a=Yt,s=Vt;a=(s&~(1<<32-mt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=pi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=N0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ou,useFormState:Vd,useActionState:Vd,useOptimistic:function(e){var t=at();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ru.bind(null,ae,!0,a),a.dispatch=t,[e,t]},useMemoCache:xu,useCacheRefresh:function(){return at().memoizedState=D0.bind(null,ae)},useEffectEvent:function(e){var t=at(),a={impl:e};return t.memoizedState=a,function(){if((me&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Uu={readContext:Ie,use:bi,useCallback:ef,useContext:Ie,useEffect:Au,useImperativeHandle:Fd,useInsertionEffect:Pd,useLayoutEffect:Wd,useMemo:tf,useReducer:_i,useRef:Xd,useState:function(){return _i(na)},useDebugValue:Eu,useDeferredValue:function(e,t){var a=Me();return af(a,we.memoizedState,e,t)},useTransition:function(){var e=_i(na)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:ir(e),t]},useSyncExternalStore:Rd,useId:lf,useHostTransitionStatus:Ou,useFormState:Yd,useActionState:Yd,useOptimistic:function(e,t){var a=Me();return Bd(a,we,e,t)},useMemoCache:xu,useCacheRefresh:uf};Uu.useEffectEvent=Zd;var hf={readContext:Ie,use:bi,useCallback:ef,useContext:Ie,useEffect:Au,useImperativeHandle:Fd,useInsertionEffect:Pd,useLayoutEffect:Wd,useMemo:tf,useReducer:Su,useRef:Xd,useState:function(){return Su(na)},useDebugValue:Eu,useDeferredValue:function(e,t){var a=Me();return we===null?Tu(a,e,t):af(a,we.memoizedState,e,t)},useTransition:function(){var e=Su(na)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:ir(e),t]},useSyncExternalStore:Rd,useId:lf,useHostTransitionStatus:Ou,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,t){var a=Me();return we!==null?Bd(a,we,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:xu,useCacheRefresh:uf};hf.useEffectEvent=Zd;function ku(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var zu={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=xt(),l=Sa(s);l.payload=t,a!=null&&(l.callback=a),t=ja(e,l,s),t!==null&&(ct(t,e,s),ar(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=xt(),l=Sa(s);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=ja(e,l,s),t!==null&&(ct(t,e,s),ar(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=xt(),s=Sa(a);s.tag=2,t!=null&&(s.callback=t),t=ja(e,s,a),t!==null&&(ct(t,e,a),ar(t,e,a))}};function mf(e,t,a,s,l,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,m):t.prototype&&t.prototype.isPureReactComponent?!Js(a,s)||!Js(l,c):!0}function gf(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&zu.enqueueReplaceState(t,t.state,null)}function cn(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function yf(e){ti(e)}function pf(e){console.error(e)}function vf(e){ti(e)}function ji(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function bf(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Du(e,t,a){return a=Sa(a),a.tag=3,a.payload={element:null},a.callback=function(){ji(e,t)},a}function _f(e){return e=Sa(e),e.tag=3,e}function xf(e,t,a,s){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var c=s.value;e.payload=function(){return l(c)},e.callback=function(){bf(t,a,s)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){bf(t,a,s),typeof l!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var p=s.stack;this.componentDidCatch(s.value,{componentStack:p!==null?p:""})})}function B0(e,t,a,s,l){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Qn(t,a,l,!0),a=pt.current,a!==null){switch(a.tag){case 31:case 13:return Rt===null?Mi():a.alternate===null&&ke===0&&(ke=3),a.flags&=-257,a.flags|=65536,a.lanes=l,s===di?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),io(e,s,l)),!1;case 22:return a.flags|=65536,s===di?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),io(e,s,l)),!1}throw Error(i(435,a.tag))}return io(e,s,l),Mi(),!1}if(ue)return t=pt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==eu&&(e=Error(i(422),{cause:s}),Ws(Et(e,a)))):(s!==eu&&(t=Error(i(423),{cause:s}),Ws(Et(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=Et(s,a),l=Du(e.stateNode,s,l),du(e,l),ke!==4&&(ke=2)),!1;var c=Error(i(520),{cause:s});if(c=Et(c,a),yr===null?yr=[c]:yr.push(c),ke!==4&&(ke=2),t===null)return!0;s=Et(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Du(a.stateNode,s,e),du(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Oa===null||!Oa.has(c))))return a.flags|=65536,l&=-l,a.lanes|=l,l=_f(l),xf(l,e,a,s),du(a,l),!1}a=a.return}while(a!==null);return!1}var Mu=Error(i(461)),qe=!1;function Fe(e,t,a,s){t.child=e===null?jd(t,null,a,s):un(t,e.child,a,s)}function wf(e,t,a,s,l){a=a.render;var c=t.ref;if("ref"in s){var m={};for(var p in s)p!=="ref"&&(m[p]=s[p])}else m=s;return nn(t),s=pu(e,t,a,m,c,l),p=vu(),e!==null&&!qe?(bu(e,t,l),sa(e,t,l)):(ue&&p&&Il(t),t.flags|=1,Fe(e,t,s,l),t.child)}function Sf(e,t,a,s,l){if(e===null){var c=a.type;return typeof c=="function"&&!Zl(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,jf(e,t,c,s,l)):(e=ri(a.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Yu(e,l)){var m=c.memoizedProps;if(a=a.compare,a=a!==null?a:Js,a(m,s)&&e.ref===t.ref)return sa(e,t,l)}return t.flags|=1,e=It(c,s),e.ref=t.ref,e.return=t,t.child=e}function jf(e,t,a,s,l){if(e!==null){var c=e.memoizedProps;if(Js(c,s)&&e.ref===t.ref)if(qe=!1,t.pendingProps=s=c,Yu(e,l))(e.flags&131072)!==0&&(qe=!0);else return t.lanes=e.lanes,sa(e,t,l)}return Bu(e,t,a,s,l)}function Cf(e,t,a,s){var l=s.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~c}else s=0,t.child=null;return Af(e,t,c,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&oi(t,c!==null?c.cachePool:null),c!==null?Ed(t,c):hu(),Td(t);else return s=t.lanes=536870912,Af(e,t,c!==null?c.baseLanes|a:a,a,s)}else c!==null?(oi(t,c.cachePool),Ed(t,c),Aa(),t.memoizedState=null):(e!==null&&oi(t,null),hu(),Aa());return Fe(e,t,l,a),t.child}function or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Af(e,t,a,s,l){var c=lu();return c=c===null?null:{parent:Be._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&oi(t,null),hu(),Td(t),e!==null&&Qn(e,t,s,!0),t.childLanes=l,null}function Ci(e,t){return t=Ei({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ef(e,t,a){return un(t,e.child,null,a),e=Ci(t,t.pendingProps),e.flags|=2,vt(t),t.memoizedState=null,e}function L0(e,t,a){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ue){if(s.mode==="hidden")return e=Ci(t,s),t.lanes=536870912,or(null,e);if(gu(t),(e=Te)?(e=qh(e,Ot),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Vt,overflow:Yt}:null,retryLane:536870912,hydrationErrors:null},a=od(e),a.return=t,t.child=a,We=t,Te=null)):e=null,e===null)throw _a(t);return t.lanes=536870912,null}return Ci(t,s)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(gu(t),l)if(t.flags&256)t.flags&=-257,t=Ef(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(qe||Qn(e,t,a,!1),l=(a&e.childLanes)!==0,qe||l){if(s=Ce,s!==null&&(m=yc(s,a),m!==0&&m!==c.retryLane))throw c.retryLane=m,Fa(e,m),ct(s,e,m),Mu;Mi(),t=Ef(e,t,a)}else e=c.treeContext,Te=Ut(m.nextSibling),We=t,ue=!0,ba=null,Ot=!1,e!==null&&fd(t,e),t=Ci(t,s),t.flags|=4096;return t}return e=It(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ai(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Bu(e,t,a,s,l){return nn(t),a=pu(e,t,a,s,void 0,l),s=vu(),e!==null&&!qe?(bu(e,t,l),sa(e,t,l)):(ue&&s&&Il(t),t.flags|=1,Fe(e,t,a,l),t.child)}function Tf(e,t,a,s,l,c){return nn(t),t.updateQueue=null,a=Od(t,s,a,l),Nd(e),s=vu(),e!==null&&!qe?(bu(e,t,c),sa(e,t,c)):(ue&&s&&Il(t),t.flags|=1,Fe(e,t,a,c),t.child)}function Nf(e,t,a,s,l){if(nn(t),t.stateNode===null){var c=$n,m=a.contextType;typeof m=="object"&&m!==null&&(c=Ie(m)),c=new a(s,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=zu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=s,c.state=t.memoizedState,c.refs={},ou(t),m=a.contextType,c.context=typeof m=="object"&&m!==null?Ie(m):$n,c.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(ku(t,a,m,s),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&zu.enqueueReplaceState(c,c.state,null),sr(t,s,c,l),nr(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){c=t.stateNode;var p=t.memoizedProps,w=cn(a,p);c.props=w;var T=c.context,U=a.contextType;m=$n,typeof U=="object"&&U!==null&&(m=Ie(U));var D=a.getDerivedStateFromProps;U=typeof D=="function"||typeof c.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,U||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p||T!==m)&&gf(t,c,s,m),wa=!1;var N=t.memoizedState;c.state=N,sr(t,s,c,l),nr(),T=t.memoizedState,p||N!==T||wa?(typeof D=="function"&&(ku(t,a,D,s),T=t.memoizedState),(w=wa||mf(t,a,w,s,N,T,m))?(U||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=T),c.props=s,c.state=T,c.context=m,s=w):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,cu(e,t),m=t.memoizedProps,U=cn(a,m),c.props=U,D=t.pendingProps,N=c.context,T=a.contextType,w=$n,typeof T=="object"&&T!==null&&(w=Ie(T)),p=a.getDerivedStateFromProps,(T=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==D||N!==w)&&gf(t,c,s,w),wa=!1,N=t.memoizedState,c.state=N,sr(t,s,c,l),nr();var O=t.memoizedState;m!==D||N!==O||wa||e!==null&&e.dependencies!==null&&li(e.dependencies)?(typeof p=="function"&&(ku(t,a,p,s),O=t.memoizedState),(U=wa||mf(t,a,U,s,N,O,w)||e!==null&&e.dependencies!==null&&li(e.dependencies))?(T||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,O,w),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,O,w)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=O),c.props=s,c.state=O,c.context=w,s=U):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),s=!1)}return c=s,Ai(e,t),s=(t.flags&128)!==0,c||s?(c=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&s?(t.child=un(t,e.child,null,l),t.child=un(t,null,a,l)):Fe(e,t,a,l),t.memoizedState=c.state,e=t.child):e=sa(e,t,l),e}function Of(e,t,a,s){return tn(),t.flags|=256,Fe(e,t,a,s),t.child}var Lu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qu(e){return{baseLanes:e,cachePool:vd()}}function Hu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=_t),e}function Rf(e,t,a){var s=t.pendingProps,l=!1,c=(t.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),m&&(l=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(ue){if(l?Ca(t):Aa(),(e=Te)?(e=qh(e,Ot),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Vt,overflow:Yt}:null,retryLane:536870912,hydrationErrors:null},a=od(e),a.return=t,t.child=a,We=t,Te=null)):e=null,e===null)throw _a(t);return So(e)?t.lanes=32:t.lanes=536870912,null}var p=s.children;return s=s.fallback,l?(Aa(),l=t.mode,p=Ei({mode:"hidden",children:p},l),s=en(s,l,a,null),p.return=t,s.return=t,p.sibling=s,t.child=p,s=t.child,s.memoizedState=qu(a),s.childLanes=Hu(e,m,a),t.memoizedState=Lu,or(null,s)):(Ca(t),$u(t,p))}var w=e.memoizedState;if(w!==null&&(p=w.dehydrated,p!==null)){if(c)t.flags&256?(Ca(t),t.flags&=-257,t=Gu(e,t,a)):t.memoizedState!==null?(Aa(),t.child=e.child,t.flags|=128,t=null):(Aa(),p=s.fallback,l=t.mode,s=Ei({mode:"visible",children:s.children},l),p=en(p,l,a,null),p.flags|=2,s.return=t,p.return=t,s.sibling=p,t.child=s,un(t,e.child,null,a),s=t.child,s.memoizedState=qu(a),s.childLanes=Hu(e,m,a),t.memoizedState=Lu,t=or(null,s));else if(Ca(t),So(p)){if(m=p.nextSibling&&p.nextSibling.dataset,m)var T=m.dgst;m=T,s=Error(i(419)),s.stack="",s.digest=m,Ws({value:s,source:null,stack:null}),t=Gu(e,t,a)}else if(qe||Qn(e,t,a,!1),m=(a&e.childLanes)!==0,qe||m){if(m=Ce,m!==null&&(s=yc(m,a),s!==0&&s!==w.retryLane))throw w.retryLane=s,Fa(e,s),ct(m,e,s),Mu;wo(p)||Mi(),t=Gu(e,t,a)}else wo(p)?(t.flags|=192,t.child=e.child,t=null):(e=w.treeContext,Te=Ut(p.nextSibling),We=t,ue=!0,ba=null,Ot=!1,e!==null&&fd(t,e),t=$u(t,s.children),t.flags|=4096);return t}return l?(Aa(),p=s.fallback,l=t.mode,w=e.child,T=w.sibling,s=It(w,{mode:"hidden",children:s.children}),s.subtreeFlags=w.subtreeFlags&65011712,T!==null?p=It(T,p):(p=en(p,l,a,null),p.flags|=2),p.return=t,s.return=t,s.sibling=p,t.child=s,or(null,s),s=t.child,p=e.child.memoizedState,p===null?p=qu(a):(l=p.cachePool,l!==null?(w=Be._currentValue,l=l.parent!==w?{parent:w,pool:w}:l):l=vd(),p={baseLanes:p.baseLanes|a,cachePool:l}),s.memoizedState=p,s.childLanes=Hu(e,m,a),t.memoizedState=Lu,or(e.child,s)):(Ca(t),a=e.child,e=a.sibling,a=It(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function $u(e,t){return t=Ei({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ei(e,t){return e=yt(22,e,null,t),e.lanes=0,e}function Gu(e,t,a){return un(t,e.child,null,a),e=$u(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uf(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),nu(e.return,t,a)}function Vu(e,t,a,s,l,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:l,treeForkCount:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=a,m.tailMode=l,m.treeForkCount=c)}function kf(e,t,a){var s=t.pendingProps,l=s.revealOrder,c=s.tail;s=s.children;var m=De.current,p=(m&2)!==0;if(p?(m=m&1|2,t.flags|=128):m&=1,de(De,m),Fe(e,t,s,a),s=ue?Ps:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uf(e,a,t);else if(e.tag===19)Uf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&gi(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Vu(t,!1,l,a,c,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&gi(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Vu(t,!0,a,null,c,s);break;case"together":Vu(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function sa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Na|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Qn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=It(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=It(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&li(e)))}function q0(e,t,a){switch(t.tag){case 3:Cn(t,t.stateNode.containerInfo),xa(t,Be,e.memoizedState.cache),tn();break;case 27:case 5:Ka(t);break;case 4:Cn(t,t.stateNode.containerInfo);break;case 10:xa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gu(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Rf(e,t,a):(Ca(t),e=sa(e,t,a),e!==null?e.sibling:null);Ca(t);break;case 19:var l=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Qn(e,t,a,!1),s=(a&t.childLanes)!==0),l){if(s)return kf(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),de(De,De.current),s)break;return null;case 22:return t.lanes=0,Cf(e,t,a,t.pendingProps);case 24:xa(t,Be,e.memoizedState.cache)}return sa(e,t,a)}function zf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)qe=!0;else{if(!Yu(e,a)&&(t.flags&128)===0)return qe=!1,q0(e,t,a);qe=(e.flags&131072)!==0}else qe=!1,ue&&(t.flags&1048576)!==0&&dd(t,Ps,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=rn(t.elementType),t.type=e,typeof e=="function")Zl(e)?(s=cn(e,s),t.tag=1,t=Nf(null,t,e,s,a)):(t.tag=0,t=Bu(null,t,e,s,a));else{if(e!=null){var l=e.$$typeof;if(l===V){t.tag=11,t=wf(null,t,e,s,a);break e}else if(l===ee){t.tag=14,t=Sf(null,t,e,s,a);break e}}throw t=Dt(e)||e,Error(i(306,t,""))}}return t;case 0:return Bu(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,l=cn(s,t.pendingProps),Nf(e,t,s,l,a);case 3:e:{if(Cn(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var c=t.memoizedState;l=c.element,cu(e,t),sr(t,s,null,a);var m=t.memoizedState;if(s=m.cache,xa(t,Be,s),s!==c.cache&&su(t,[Be],a,!0),nr(),s=m.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Of(e,t,s,a);break e}else if(s!==l){l=Et(Error(i(424)),t),Ws(l),t=Of(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Te=Ut(e.firstChild),We=t,ue=!0,ba=null,Ot=!0,a=jd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(tn(),s===l){t=sa(e,t,a);break e}Fe(e,t,s,a)}t=t.child}return t;case 26:return Ai(e,t),e===null?(a=Qh(t.type,null,t.pendingProps,null))?t.memoizedState=a:ue||(a=t.type,e=t.pendingProps,s=Vi(St.current).createElement(a),s[Pe]=t,s[st]=e,et(s,a,e),Ke(s),t.stateNode=s):t.memoizedState=Qh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ka(t),e===null&&ue&&(s=t.stateNode=Gh(t.type,t.pendingProps,St.current),We=t,Ot=!0,l=Te,za(t.type)?(jo=l,Te=Ut(s.firstChild)):Te=l),Fe(e,t,t.pendingProps.children,a),Ai(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ue&&((l=s=Te)&&(s=gy(s,t.type,t.pendingProps,Ot),s!==null?(t.stateNode=s,We=t,Te=Ut(s.firstChild),Ot=!1,l=!0):l=!1),l||_a(t)),Ka(t),l=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,s=c.children,bo(l,c)?s=null:m!==null&&bo(l,m)&&(t.flags|=32),t.memoizedState!==null&&(l=pu(e,t,O0,null,null,a),jr._currentValue=l),Ai(e,t),Fe(e,t,s,a),t.child;case 6:return e===null&&ue&&((e=a=Te)&&(a=yy(a,t.pendingProps,Ot),a!==null?(t.stateNode=a,We=t,Te=null,e=!0):e=!1),e||_a(t)),null;case 13:return Rf(e,t,a);case 4:return Cn(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=un(t,null,s,a):Fe(e,t,s,a),t.child;case 11:return wf(e,t,t.type,t.pendingProps,a);case 7:return Fe(e,t,t.pendingProps,a),t.child;case 8:return Fe(e,t,t.pendingProps.children,a),t.child;case 12:return Fe(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,xa(t,t.type,s.value),Fe(e,t,s.children,a),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,nn(t),l=Ie(l),s=s(l),t.flags|=1,Fe(e,t,s,a),t.child;case 14:return Sf(e,t,t.type,t.pendingProps,a);case 15:return jf(e,t,t.type,t.pendingProps,a);case 19:return kf(e,t,a);case 31:return L0(e,t,a);case 22:return Cf(e,t,a,t.pendingProps);case 24:return nn(t),s=Ie(Be),e===null?(l=lu(),l===null&&(l=Ce,c=ru(),l.pooledCache=c,c.refCount++,c!==null&&(l.pooledCacheLanes|=a),l=c),t.memoizedState={parent:s,cache:l},ou(t),xa(t,Be,l)):((e.lanes&a)!==0&&(cu(e,t),sr(t,null,null,a),nr()),l=e.memoizedState,c=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),xa(t,Be,s)):(s=c.cache,xa(t,Be,s),s!==l.cache&&su(t,[Be],a,!0))),Fe(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ra(e){e.flags|=4}function Qu(e,t,a,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(lh())e.flags|=8192;else throw ln=di,uu}else e.flags&=-16777217}function Df(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ph(t))if(lh())e.flags|=8192;else throw ln=di,uu}function Ti(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?hc():536870912,e.lanes|=t,ns|=t)}function cr(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function H0(e,t,a){var s=t.pendingProps;switch(Fl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return Ne(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ta(Be),Mt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Yn(t)?ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,tu())),Ne(t),null;case 26:var l=t.type,c=t.memoizedState;return e===null?(ra(t),c!==null?(Ne(t),Df(t,c)):(Ne(t),Qu(t,l,null,s,a))):c?c!==e.memoizedState?(ra(t),Ne(t),Df(t,c)):(Ne(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ra(t),Ne(t),Qu(t,l,e,s,a)),null;case 27:if(Xa(t),a=St.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ne(t),null}e=ze.current,Yn(t)?hd(t):(e=Gh(l,s,a),t.stateNode=e,ra(t))}return Ne(t),null;case 5:if(Xa(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ne(t),null}if(c=ze.current,Yn(t))hd(t);else{var m=Vi(St.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?c.multiple=!0:s.size&&(c.size=s.size);break;default:c=typeof s.is=="string"?m.createElement(l,{is:s.is}):m.createElement(l)}}c[Pe]=t,c[st]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=c;e:switch(et(c,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ra(t)}}return Ne(t),Qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=St.current,Yn(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,l=We,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[Pe]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Rh(e.nodeValue,a)),e||_a(t,!0)}else e=Vi(e).createTextNode(s),e[Pe]=t,t.stateNode=e}return Ne(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Yn(t),a!==null){if(e===null){if(!s)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Pe]=t}else tn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ne(t),e=!1}else a=tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(vt(t),t):(vt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Ne(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Yn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[Pe]=t}else tn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ne(t),l=!1}else l=tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(vt(t),t):(vt(t),null)}return vt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Ti(t,t.updateQueue),Ne(t),null);case 4:return Mt(),e===null&&mo(t.stateNode.containerInfo),Ne(t),null;case 10:return ta(t.type),Ne(t),null;case 19:if(xe(De),s=t.memoizedState,s===null)return Ne(t),null;if(l=(t.flags&128)!==0,c=s.rendering,c===null)if(l)cr(s,!1);else{if(ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=gi(e),c!==null){for(t.flags|=128,cr(s,!1),e=c.updateQueue,t.updateQueue=e,Ti(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ud(a,e),a=a.sibling;return de(De,De.current&1|2),ue&&Ft(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&tt()>ki&&(t.flags|=128,l=!0,cr(s,!1),t.lanes=4194304)}else{if(!l)if(e=gi(c),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Ti(t,e),cr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!ue)return Ne(t),null}else 2*tt()-s.renderingStartTime>ki&&a!==536870912&&(t.flags|=128,l=!0,cr(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,a=De.current,de(De,l?a&1|2:a&1),ue&&Ft(t,s.treeForkCount),e):(Ne(t),null);case 22:case 23:return vt(t),mu(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),a=t.updateQueue,a!==null&&Ti(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&xe(sn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ta(Be),Ne(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function $0(e,t){switch(Fl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ta(Be),Mt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Xa(t),null;case 31:if(t.memoizedState!==null){if(vt(t),t.alternate===null)throw Error(i(340));tn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));tn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(De),null;case 4:return Mt(),null;case 10:return ta(t.type),null;case 22:case 23:return vt(t),mu(),e!==null&&xe(sn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ta(Be),null;case 25:return null;default:return null}}function Mf(e,t){switch(Fl(t),t.tag){case 3:ta(Be),Mt();break;case 26:case 27:case 5:Xa(t);break;case 4:Mt();break;case 31:t.memoizedState!==null&&vt(t);break;case 13:vt(t);break;case 19:xe(De);break;case 10:ta(t.type);break;case 22:case 23:vt(t),mu(),e!==null&&xe(sn);break;case 24:ta(Be)}}function dr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var l=s.next;a=l;do{if((a.tag&e)===e){s=void 0;var c=a.create,m=a.inst;s=c(),m.destroy=s}a=a.next}while(a!==l)}}catch(p){be(t,t.return,p)}}function Ea(e,t,a){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&e)===e){var m=s.inst,p=m.destroy;if(p!==void 0){m.destroy=void 0,l=t;var w=a,T=p;try{T()}catch(U){be(l,w,U)}}}s=s.next}while(s!==c)}}catch(U){be(t,t.return,U)}}function Bf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ad(t,a)}catch(s){be(e,e.return,s)}}}function Lf(e,t,a){a.props=cn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){be(e,t,s)}}function fr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(l){be(e,t,l)}}function Qt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(l){be(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){be(e,t,l)}else a.current=null}function qf(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(l){be(e,e.return,l)}}function Ku(e,t,a){try{var s=e.stateNode;oy(s,e.type,a,t),s[st]=t}catch(l){be(e,e.return,l)}}function Hf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function Xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ju(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Pt));else if(s!==4&&(s===27&&za(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Ju(e,t,a),e=e.sibling;e!==null;)Ju(e,t,a),e=e.sibling}function Ni(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&za(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ni(e,t,a),e=e.sibling;e!==null;)Ni(e,t,a),e=e.sibling}function $f(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);et(t,s,a),t[Pe]=e,t[st]=a}catch(c){be(e,e.return,c)}}var ia=!1,He=!1,Zu=!1,Gf=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function G0(e,t){if(e=e.containerInfo,po=Pi,e=Fc(e),Gl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var l=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var m=0,p=-1,w=-1,T=0,U=0,D=e,N=null;t:for(;;){for(var O;D!==a||l!==0&&D.nodeType!==3||(p=m+l),D!==c||s!==0&&D.nodeType!==3||(w=m+s),D.nodeType===3&&(m+=D.nodeValue.length),(O=D.firstChild)!==null;)N=D,D=O;for(;;){if(D===e)break t;if(N===a&&++T===l&&(p=m),N===c&&++U===s&&(w=m),(O=D.nextSibling)!==null)break;D=N,N=D.parentNode}D=O}a=p===-1||w===-1?null:{start:p,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(vo={focusedElem:e,selectionRange:a},Pi=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,l=c.memoizedProps,c=c.memoizedState,s=a.stateNode;try{var Y=cn(a.type,l);e=s.getSnapshotBeforeUpdate(Y,c),s.__reactInternalSnapshotBeforeUpdate=e}catch(I){be(a,a.return,I)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)xo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function Vf(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:ua(e,a),s&4&&dr(5,a);break;case 1:if(ua(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){be(a,a.return,m)}else{var l=cn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){be(a,a.return,m)}}s&64&&Bf(a),s&512&&fr(a,a.return);break;case 3:if(ua(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ad(e,t)}catch(m){be(a,a.return,m)}}break;case 27:t===null&&s&4&&$f(a);case 26:case 5:ua(e,a),t===null&&s&4&&qf(a),s&512&&fr(a,a.return);break;case 12:ua(e,a);break;case 31:ua(e,a),s&4&&Kf(e,a);break;case 13:ua(e,a),s&4&&Xf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=W0.bind(null,a),py(e,a))));break;case 22:if(s=a.memoizedState!==null||ia,!s){t=t!==null&&t.memoizedState!==null||He,l=ia;var c=He;ia=s,(He=t)&&!c?oa(e,a,(a.subtreeFlags&8772)!==0):ua(e,a),ia=l,He=c}break;case 30:break;default:ua(e,a)}}function Yf(e){var t=e.alternate;t!==null&&(e.alternate=null,Yf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Oe=null,it=!1;function la(e,t,a){for(a=a.child;a!==null;)Qf(e,t,a),a=a.sibling}function Qf(e,t,a){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ms,a)}catch{}switch(a.tag){case 26:He||Qt(a,t),la(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:He||Qt(a,t);var s=Oe,l=it;za(a.type)&&(Oe=a.stateNode,it=!1),la(e,t,a),xr(a.stateNode),Oe=s,it=l;break;case 5:He||Qt(a,t);case 6:if(s=Oe,l=it,Oe=null,la(e,t,a),Oe=s,it=l,Oe!==null)if(it)try{(Oe.nodeType===9?Oe.body:Oe.nodeName==="HTML"?Oe.ownerDocument.body:Oe).removeChild(a.stateNode)}catch(c){be(a,t,c)}else try{Oe.removeChild(a.stateNode)}catch(c){be(a,t,c)}break;case 18:Oe!==null&&(it?(e=Oe,Bh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ds(e)):Bh(Oe,a.stateNode));break;case 4:s=Oe,l=it,Oe=a.stateNode.containerInfo,it=!0,la(e,t,a),Oe=s,it=l;break;case 0:case 11:case 14:case 15:Ea(2,a,t),He||Ea(4,a,t),la(e,t,a);break;case 1:He||(Qt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Lf(a,t,s)),la(e,t,a);break;case 21:la(e,t,a);break;case 22:He=(s=He)||a.memoizedState!==null,la(e,t,a),He=s;break;default:la(e,t,a)}}function Kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ds(e)}catch(a){be(t,t.return,a)}}}function Xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(a){be(t,t.return,a)}}function V0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Gf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Gf),t;default:throw Error(i(435,e.tag))}}function Oi(e,t){var a=V0(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var l=I0.bind(null,e,s);s.then(l,l)}})}function lt(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var l=a[s],c=e,m=t,p=m;e:for(;p!==null;){switch(p.tag){case 27:if(za(p.type)){Oe=p.stateNode,it=!1;break e}break;case 5:Oe=p.stateNode,it=!1;break e;case 3:case 4:Oe=p.stateNode.containerInfo,it=!0;break e}p=p.return}if(Oe===null)throw Error(i(160));Qf(c,m,l),Oe=null,it=!1,c=l.alternate,c!==null&&(c.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Jf(t,e),t=t.sibling}var Lt=null;function Jf(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:lt(t,e),ut(e),s&4&&(Ea(3,e,e.return),dr(3,e),Ea(5,e,e.return));break;case 1:lt(t,e),ut(e),s&512&&(He||a===null||Qt(a,a.return)),s&64&&ia&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var l=Lt;if(lt(t,e),ut(e),s&512&&(He||a===null||Qt(a,a.return)),s&4){var c=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":c=l.getElementsByTagName("title")[0],(!c||c[qs]||c[Pe]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=l.createElement(s),l.head.insertBefore(c,l.querySelector("head > title"))),et(c,s,a),c[Pe]=e,Ke(c),s=c;break e;case"link":var m=Jh("link","href",l).get(s+(a.href||""));if(m){for(var p=0;p<m.length;p++)if(c=m[p],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(p,1);break t}}c=l.createElement(s),et(c,s,a),l.head.appendChild(c);break;case"meta":if(m=Jh("meta","content",l).get(s+(a.content||""))){for(p=0;p<m.length;p++)if(c=m[p],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(p,1);break t}}c=l.createElement(s),et(c,s,a),l.head.appendChild(c);break;default:throw Error(i(468,s))}c[Pe]=e,Ke(c),s=c}e.stateNode=s}else Zh(l,e.type,e.stateNode);else e.stateNode=Xh(l,s,e.memoizedProps);else c!==s?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,s===null?Zh(l,e.type,e.stateNode):Xh(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Ku(e,e.memoizedProps,a.memoizedProps)}break;case 27:lt(t,e),ut(e),s&512&&(He||a===null||Qt(a,a.return)),a!==null&&s&4&&Ku(e,e.memoizedProps,a.memoizedProps);break;case 5:if(lt(t,e),ut(e),s&512&&(He||a===null||Qt(a,a.return)),e.flags&32){l=e.stateNode;try{zn(l,"")}catch(Y){be(e,e.return,Y)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,Ku(e,l,a!==null?a.memoizedProps:l)),s&1024&&(Zu=!0);break;case 6:if(lt(t,e),ut(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(Y){be(e,e.return,Y)}}break;case 3:if(Ki=null,l=Lt,Lt=Yi(t.containerInfo),lt(t,e),Lt=l,ut(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(Y){be(e,e.return,Y)}Zu&&(Zu=!1,Zf(e));break;case 4:s=Lt,Lt=Yi(e.stateNode.containerInfo),lt(t,e),ut(e),Lt=s;break;case 12:lt(t,e),ut(e);break;case 31:lt(t,e),ut(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Oi(e,s)));break;case 13:lt(t,e),ut(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ui=tt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Oi(e,s)));break;case 22:l=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,T=ia,U=He;if(ia=T||l,He=U||w,lt(t,e),He=U,ia=T,ut(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||w||ia||He||dn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){w=a=t;try{if(c=w.stateNode,l)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{p=w.stateNode;var D=w.memoizedProps.style,N=D!=null&&D.hasOwnProperty("display")?D.display:null;p.style.display=N==null||typeof N=="boolean"?"":(""+N).trim()}}catch(Y){be(w,w.return,Y)}}}else if(t.tag===6){if(a===null){w=t;try{w.stateNode.nodeValue=l?"":w.memoizedProps}catch(Y){be(w,w.return,Y)}}}else if(t.tag===18){if(a===null){w=t;try{var O=w.stateNode;l?Lh(O,!0):Lh(w.stateNode,!1)}catch(Y){be(w,w.return,Y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Oi(e,a))));break;case 19:lt(t,e),ut(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Oi(e,s)));break;case 30:break;case 21:break;default:lt(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Hf(s)){a=s;break}s=s.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var l=a.stateNode,c=Xu(e);Ni(e,c,l);break;case 5:var m=a.stateNode;a.flags&32&&(zn(m,""),a.flags&=-33);var p=Xu(e);Ni(e,p,m);break;case 3:case 4:var w=a.stateNode.containerInfo,T=Xu(e);Ju(e,T,w);break;default:throw Error(i(161))}}catch(U){be(e,e.return,U)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Zf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ua(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Vf(e,t.alternate,t),t=t.sibling}function dn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ea(4,t,t.return),dn(t);break;case 1:Qt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Lf(t,t.return,a),dn(t);break;case 27:xr(t.stateNode);case 26:case 5:Qt(t,t.return),dn(t);break;case 22:t.memoizedState===null&&dn(t);break;case 30:dn(t);break;default:dn(t)}e=e.sibling}}function oa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,c=t,m=c.flags;switch(c.tag){case 0:case 11:case 15:oa(l,c,a),dr(4,c);break;case 1:if(oa(l,c,a),s=c,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(T){be(s,s.return,T)}if(s=c,l=s.updateQueue,l!==null){var p=s.stateNode;try{var w=l.shared.hiddenCallbacks;if(w!==null)for(l.shared.hiddenCallbacks=null,l=0;l<w.length;l++)Cd(w[l],p)}catch(T){be(s,s.return,T)}}a&&m&64&&Bf(c),fr(c,c.return);break;case 27:$f(c);case 26:case 5:oa(l,c,a),a&&s===null&&m&4&&qf(c),fr(c,c.return);break;case 12:oa(l,c,a);break;case 31:oa(l,c,a),a&&m&4&&Kf(l,c);break;case 13:oa(l,c,a),a&&m&4&&Xf(l,c);break;case 22:c.memoizedState===null&&oa(l,c,a),fr(c,c.return);break;case 30:break;default:oa(l,c,a)}t=t.sibling}}function Pu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Is(a))}function Wu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Is(e))}function qt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Pf(e,t,a,s),t=t.sibling}function Pf(e,t,a,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:qt(e,t,a,s),l&2048&&dr(9,t);break;case 1:qt(e,t,a,s);break;case 3:qt(e,t,a,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Is(e)));break;case 12:if(l&2048){qt(e,t,a,s),e=t.stateNode;try{var c=t.memoizedProps,m=c.id,p=c.onPostCommit;typeof p=="function"&&p(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){be(t,t.return,w)}}else qt(e,t,a,s);break;case 31:qt(e,t,a,s);break;case 13:qt(e,t,a,s);break;case 23:break;case 22:c=t.stateNode,m=t.alternate,t.memoizedState!==null?c._visibility&2?qt(e,t,a,s):hr(e,t):c._visibility&2?qt(e,t,a,s):(c._visibility|=2,es(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Pu(m,t);break;case 24:qt(e,t,a,s),l&2048&&Wu(t.alternate,t);break;default:qt(e,t,a,s)}}function es(e,t,a,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,m=t,p=a,w=s,T=m.flags;switch(m.tag){case 0:case 11:case 15:es(c,m,p,w,l),dr(8,m);break;case 23:break;case 22:var U=m.stateNode;m.memoizedState!==null?U._visibility&2?es(c,m,p,w,l):hr(c,m):(U._visibility|=2,es(c,m,p,w,l)),l&&T&2048&&Pu(m.alternate,m);break;case 24:es(c,m,p,w,l),l&&T&2048&&Wu(m.alternate,m);break;default:es(c,m,p,w,l)}t=t.sibling}}function hr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,l=s.flags;switch(s.tag){case 22:hr(a,s),l&2048&&Pu(s.alternate,s);break;case 24:hr(a,s),l&2048&&Wu(s.alternate,s);break;default:hr(a,s)}t=t.sibling}}var mr=8192;function ts(e,t,a){if(e.subtreeFlags&mr)for(e=e.child;e!==null;)Wf(e,t,a),e=e.sibling}function Wf(e,t,a){switch(e.tag){case 26:ts(e,t,a),e.flags&mr&&e.memoizedState!==null&&Ny(a,Lt,e.memoizedState,e.memoizedProps);break;case 5:ts(e,t,a);break;case 3:case 4:var s=Lt;Lt=Yi(e.stateNode.containerInfo),ts(e,t,a),Lt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=mr,mr=16777216,ts(e,t,a),mr=s):ts(e,t,a));break;default:ts(e,t,a)}}function If(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Xe=s,eh(s,e)}If(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ff(e),e=e.sibling}function Ff(e){switch(e.tag){case 0:case 11:case 15:gr(e),e.flags&2048&&Ea(9,e,e.return);break;case 3:gr(e);break;case 12:gr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ri(e)):gr(e);break;default:gr(e)}}function Ri(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Xe=s,eh(s,e)}If(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ea(8,t,t.return),Ri(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ri(t));break;default:Ri(t)}e=e.sibling}}function eh(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Ea(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Is(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Xe=s;else e:for(a=e;Xe!==null;){s=Xe;var l=s.sibling,c=s.return;if(Yf(s),s===a){Xe=null;break e}if(l!==null){l.return=c,Xe=l;break e}Xe=c}}}var Y0={getCacheForType:function(e){var t=Ie(Be),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ie(Be).controller.signal}},Q0=typeof WeakMap=="function"?WeakMap:Map,me=0,Ce=null,se=null,ie=0,ve=0,bt=null,Ta=!1,as=!1,Iu=!1,ca=0,ke=0,Na=0,fn=0,Fu=0,_t=0,ns=0,yr=null,ot=null,eo=!1,Ui=0,th=0,ki=1/0,zi=null,Oa=null,Ve=0,Ra=null,ss=null,da=0,to=0,ao=null,ah=null,pr=0,no=null;function xt(){return(me&2)!==0&&ie!==0?ie&-ie:k.T!==null?oo():pc()}function nh(){if(_t===0)if((ie&536870912)===0||ue){var e=Gr;Gr<<=1,(Gr&3932160)===0&&(Gr=262144),_t=e}else _t=536870912;return e=pt.current,e!==null&&(e.flags|=32),_t}function ct(e,t,a){(e===Ce&&(ve===2||ve===9)||e.cancelPendingCommit!==null)&&(rs(e,0),Ua(e,ie,_t,!1)),Ls(e,a),((me&2)===0||e!==Ce)&&(e===Ce&&((me&2)===0&&(fn|=a),ke===4&&Ua(e,ie,_t,!1)),Kt(e))}function sh(e,t,a){if((me&6)!==0)throw Error(i(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Bs(e,t),l=s?J0(e,t):ro(e,t,!0),c=s;do{if(l===0){as&&!s&&Ua(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!K0(a)){l=ro(e,t,!1),c=!1;continue}if(l===2){if(c=t,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var p=e;l=yr;var w=p.current.memoizedState.isDehydrated;if(w&&(rs(p,m).flags|=256),m=ro(p,m,!1),m!==2){if(Iu&&!w){p.errorRecoveryDisabledLanes|=c,fn|=c,l=4;break e}c=ot,ot=l,c!==null&&(ot===null?ot=c:ot.push.apply(ot,c))}l=m}if(c=!1,l!==2)continue}}if(l===1){rs(e,0),Ua(e,t,0,!0);break}e:{switch(s=e,c=l,c){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ua(s,t,_t,!Ta);break e;case 2:ot=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(l=Ui+300-tt(),10<l)){if(Ua(s,t,_t,!Ta),Yr(s,0,!0)!==0)break e;da=t,s.timeoutHandle=Dh(rh.bind(null,s,a,ot,zi,eo,t,_t,fn,ns,Ta,c,"Throttled",-0,0),l);break e}rh(s,a,ot,zi,eo,t,_t,fn,ns,Ta,c,null,-0,0)}}break}while(!0);Kt(e)}function rh(e,t,a,s,l,c,m,p,w,T,U,D,N,O){if(e.timeoutHandle=-1,D=t.subtreeFlags,D&8192||(D&16785408)===16785408){D={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Wf(t,c,D);var Y=(c&62914560)===c?Ui-tt():(c&4194048)===c?th-tt():0;if(Y=Oy(D,Y),Y!==null){da=c,e.cancelPendingCommit=Y(hh.bind(null,e,t,c,a,s,l,m,p,w,U,D,null,N,O)),Ua(e,c,m,!T);return}}hh(e,t,c,a,s,l,m,p,w)}function K0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var l=a[s],c=l.getSnapshot;l=l.value;try{if(!gt(c(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ua(e,t,a,s){t&=~Fu,t&=~fn,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var c=31-mt(l),m=1<<c;s[c]=-1,l&=~m}a!==0&&mc(e,a,t)}function Di(){return(me&6)===0?(vr(0),!1):!0}function so(){if(se!==null){if(ve===0)var e=se.return;else e=se,ea=an=null,_u(e),Zn=null,er=0,e=se;for(;e!==null;)Mf(e.alternate,e),e=e.return;se=null}}function rs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,fy(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),da=0,so(),Ce=e,se=a=It(e.current,null),ie=t,ve=0,bt=null,Ta=!1,as=Bs(e,t),Iu=!1,ns=_t=Fu=fn=Na=ke=0,ot=yr=null,eo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-mt(s),c=1<<l;t|=e[l],s&=~c}return ca=t,ai(),a}function ih(e,t){ae=null,k.H=ur,t===Jn||t===ci?(t=xd(),ve=3):t===uu?(t=xd(),ve=4):ve=t===Mu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bt=t,se===null&&(ke=1,ji(e,Et(t,e.current)))}function lh(){var e=pt.current;return e===null?!0:(ie&4194048)===ie?Rt===null:(ie&62914560)===ie||(ie&536870912)!==0?e===Rt:!1}function uh(){var e=k.H;return k.H=ur,e===null?ur:e}function oh(){var e=k.A;return k.A=Y0,e}function Mi(){ke=4,Ta||(ie&4194048)!==ie&&pt.current!==null||(as=!0),(Na&134217727)===0&&(fn&134217727)===0||Ce===null||Ua(Ce,ie,_t,!1)}function ro(e,t,a){var s=me;me|=2;var l=uh(),c=oh();(Ce!==e||ie!==t)&&(zi=null,rs(e,t)),t=!1;var m=ke;e:do try{if(ve!==0&&se!==null){var p=se,w=bt;switch(ve){case 8:so(),m=6;break e;case 3:case 2:case 9:case 6:pt.current===null&&(t=!0);var T=ve;if(ve=0,bt=null,is(e,p,w,T),a&&as){m=0;break e}break;default:T=ve,ve=0,bt=null,is(e,p,w,T)}}X0(),m=ke;break}catch(U){ih(e,U)}while(!0);return t&&e.shellSuspendCounter++,ea=an=null,me=s,k.H=l,k.A=c,se===null&&(Ce=null,ie=0,ai()),m}function X0(){for(;se!==null;)ch(se)}function J0(e,t){var a=me;me|=2;var s=uh(),l=oh();Ce!==e||ie!==t?(zi=null,ki=tt()+500,rs(e,t)):as=Bs(e,t);e:do try{if(ve!==0&&se!==null){t=se;var c=bt;t:switch(ve){case 1:ve=0,bt=null,is(e,t,c,1);break;case 2:case 9:if(bd(c)){ve=0,bt=null,dh(t);break}t=function(){ve!==2&&ve!==9||Ce!==e||(ve=7),Kt(e)},c.then(t,t);break e;case 3:ve=7;break e;case 4:ve=5;break e;case 7:bd(c)?(ve=0,bt=null,dh(t)):(ve=0,bt=null,is(e,t,c,7));break;case 5:var m=null;switch(se.tag){case 26:m=se.memoizedState;case 5:case 27:var p=se;if(m?Ph(m):p.stateNode.complete){ve=0,bt=null;var w=p.sibling;if(w!==null)se=w;else{var T=p.return;T!==null?(se=T,Bi(T)):se=null}break t}}ve=0,bt=null,is(e,t,c,5);break;case 6:ve=0,bt=null,is(e,t,c,6);break;case 8:so(),ke=6;break e;default:throw Error(i(462))}}Z0();break}catch(U){ih(e,U)}while(!0);return ea=an=null,k.H=s,k.A=l,me=a,se!==null?0:(Ce=null,ie=0,ai(),ke)}function Z0(){for(;se!==null&&!vl();)ch(se)}function ch(e){var t=zf(e.alternate,e,ca);e.memoizedProps=e.pendingProps,t===null?Bi(e):se=t}function dh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Tf(a,t,t.pendingProps,t.type,void 0,ie);break;case 11:t=Tf(a,t,t.pendingProps,t.type.render,t.ref,ie);break;case 5:_u(t);default:Mf(a,t),t=se=ud(t,ca),t=zf(a,t,ca)}e.memoizedProps=e.pendingProps,t===null?Bi(e):se=t}function is(e,t,a,s){ea=an=null,_u(t),Zn=null,er=0;var l=t.return;try{if(B0(e,l,t,a,ie)){ke=1,ji(e,Et(a,e.current)),se=null;return}}catch(c){if(l!==null)throw se=l,c;ke=1,ji(e,Et(a,e.current)),se=null;return}t.flags&32768?(ue||s===1?e=!0:as||(ie&536870912)!==0?e=!1:(Ta=e=!0,(s===2||s===9||s===3||s===6)&&(s=pt.current,s!==null&&s.tag===13&&(s.flags|=16384))),fh(t,e)):Bi(t)}function Bi(e){var t=e;do{if((t.flags&32768)!==0){fh(t,Ta);return}e=t.return;var a=H0(t.alternate,t,ca);if(a!==null){se=a;return}if(t=t.sibling,t!==null){se=t;return}se=t=e}while(t!==null);ke===0&&(ke=5)}function fh(e,t){do{var a=$0(e.alternate,e);if(a!==null){a.flags&=32767,se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){se=e;return}se=e=a}while(e!==null);ke=6,se=null}function hh(e,t,a,s,l,c,m,p,w){e.cancelPendingCommit=null;do Li();while(Ve!==0);if((me&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(c=t.lanes|t.childLanes,c|=Xl,Tg(e,a,c,m,p,w),e===Ce&&(se=Ce=null,ie=0),ss=t,Ra=e,da=a,to=c,ao=l,ah=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,F0(J,function(){return vh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=k.T,k.T=null,l=L.p,L.p=2,m=me,me|=4;try{G0(e,t,a)}finally{me=m,L.p=l,k.T=s}}Ve=1,mh(),gh(),yh()}}function mh(){if(Ve===1){Ve=0;var e=Ra,t=ss,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var s=L.p;L.p=2;var l=me;me|=4;try{Jf(t,e);var c=vo,m=Fc(e.containerInfo),p=c.focusedElem,w=c.selectionRange;if(m!==p&&p&&p.ownerDocument&&Ic(p.ownerDocument.documentElement,p)){if(w!==null&&Gl(p)){var T=w.start,U=w.end;if(U===void 0&&(U=T),"selectionStart"in p)p.selectionStart=T,p.selectionEnd=Math.min(U,p.value.length);else{var D=p.ownerDocument||document,N=D&&D.defaultView||window;if(N.getSelection){var O=N.getSelection(),Y=p.textContent.length,I=Math.min(w.start,Y),je=w.end===void 0?I:Math.min(w.end,Y);!O.extend&&I>je&&(m=je,je=I,I=m);var A=Wc(p,I),j=Wc(p,je);if(A&&j&&(O.rangeCount!==1||O.anchorNode!==A.node||O.anchorOffset!==A.offset||O.focusNode!==j.node||O.focusOffset!==j.offset)){var E=D.createRange();E.setStart(A.node,A.offset),O.removeAllRanges(),I>je?(O.addRange(E),O.extend(j.node,j.offset)):(E.setEnd(j.node,j.offset),O.addRange(E))}}}}for(D=[],O=p;O=O.parentNode;)O.nodeType===1&&D.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<D.length;p++){var z=D[p];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}Pi=!!po,vo=po=null}finally{me=l,L.p=s,k.T=a}}e.current=t,Ve=2}}function gh(){if(Ve===2){Ve=0;var e=Ra,t=ss,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var s=L.p;L.p=2;var l=me;me|=4;try{Vf(e,t.alternate,t)}finally{me=l,L.p=s,k.T=a}}Ve=3}}function yh(){if(Ve===4||Ve===3){Ve=0,bl();var e=Ra,t=ss,a=da,s=ah;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ve=5:(Ve=0,ss=Ra=null,ph(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Oa=null),Sl(a),t=t.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ms,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=k.T,l=L.p,L.p=2,k.T=null;try{for(var c=e.onRecoverableError,m=0;m<s.length;m++){var p=s[m];c(p.value,{componentStack:p.stack})}}finally{k.T=t,L.p=l}}(da&3)!==0&&Li(),Kt(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===no?pr++:(pr=0,no=e):pr=0,vr(0)}}function ph(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Is(t)))}function Li(){return mh(),gh(),yh(),vh()}function vh(){if(Ve!==5)return!1;var e=Ra,t=to;to=0;var a=Sl(da),s=k.T,l=L.p;try{L.p=32>a?32:a,k.T=null,a=ao,ao=null;var c=Ra,m=da;if(Ve=0,ss=Ra=null,da=0,(me&6)!==0)throw Error(i(331));var p=me;if(me|=4,Ff(c.current),Pf(c,c.current,m,a),me=p,vr(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ms,c)}catch{}return!0}finally{L.p=l,k.T=s,ph(e,t)}}function bh(e,t,a){t=Et(a,t),t=Du(e.stateNode,t,2),e=ja(e,t,2),e!==null&&(Ls(e,2),Kt(e))}function be(e,t,a){if(e.tag===3)bh(e,e,a);else for(;t!==null;){if(t.tag===3){bh(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Oa===null||!Oa.has(s))){e=Et(a,e),a=_f(2),s=ja(t,a,2),s!==null&&(xf(a,s,t,e),Ls(s,2),Kt(s));break}}t=t.return}}function io(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new Q0;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(a)||(Iu=!0,l.add(a),e=P0.bind(null,e,t,a),t.then(e,e))}function P0(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ce===e&&(ie&a)===a&&(ke===4||ke===3&&(ie&62914560)===ie&&300>tt()-Ui?(me&2)===0&&rs(e,0):Fu|=a,ns===ie&&(ns=0)),Kt(e)}function _h(e,t){t===0&&(t=hc()),e=Fa(e,t),e!==null&&(Ls(e,t),Kt(e))}function W0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),_h(e,a)}function I0(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),_h(e,a)}function F0(e,t){return zs(e,t)}var qi=null,ls=null,lo=!1,Hi=!1,uo=!1,ka=0;function Kt(e){e!==ls&&e.next===null&&(ls===null?qi=ls=e:ls=ls.next=e),Hi=!0,lo||(lo=!0,ty())}function vr(e,t){if(!uo&&Hi){uo=!0;do for(var a=!1,s=qi;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var c=0;else{var m=s.suspendedLanes,p=s.pingedLanes;c=(1<<31-mt(42|e)+1)-1,c&=l&~(m&~p),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,jh(s,c))}else c=ie,c=Yr(s,s===Ce?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||Bs(s,c)||(a=!0,jh(s,c));s=s.next}while(a);uo=!1}}function ey(){xh()}function xh(){Hi=lo=!1;var e=0;ka!==0&&dy()&&(e=ka);for(var t=tt(),a=null,s=qi;s!==null;){var l=s.next,c=wh(s,t);c===0?(s.next=null,a===null?qi=l:a.next=l,l===null&&(ls=a)):(a=s,(e!==0||(c&3)!==0)&&(Hi=!0)),s=l}Ve!==0&&Ve!==5||vr(e),ka!==0&&(ka=0)}function wh(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-mt(c),p=1<<m,w=l[m];w===-1?((p&a)===0||(p&s)!==0)&&(l[m]=Eg(p,t)):w<=t&&(e.expiredLanes|=p),c&=~p}if(t=Ce,a=ie,a=Yr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(ve===2||ve===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ds(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Bs(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Ds(s),Sl(a)){case 2:case 8:a=Hr;break;case 32:a=J;break;case 268435456:a=ma;break;default:a=J}return s=Sh.bind(null,e),a=zs(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Ds(s),e.callbackPriority=2,e.callbackNode=null,2}function Sh(e,t){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Li()&&e.callbackNode!==a)return null;var s=ie;return s=Yr(e,e===Ce?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(sh(e,s,t),wh(e,tt()),e.callbackNode!=null&&e.callbackNode===a?Sh.bind(null,e):null)}function jh(e,t){if(Li())return null;sh(e,t,!0)}function ty(){hy(function(){(me&6)!==0?zs(qr,ey):xh()})}function oo(){if(ka===0){var e=Kn;e===0&&(e=$r,$r<<=1,($r&261888)===0&&($r=256)),ka=e}return ka}function Ch(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jr(""+e)}function Ah(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function ay(e,t,a,s,l){if(t==="submit"&&a&&a.stateNode===l){var c=Ch((l[st]||null).action),m=s.submitter;m&&(t=(t=m[st]||null)?Ch(t.formAction):m.getAttribute("formAction"),t!==null&&(c=t,m=null));var p=new Ir("action","action",null,s,l);e.push({event:p,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ka!==0){var w=m?Ah(l,m):new FormData(l);Nu(a,{pending:!0,data:w,method:l.method,action:c},null,w)}}else typeof c=="function"&&(p.preventDefault(),w=m?Ah(l,m):new FormData(l),Nu(a,{pending:!0,data:w,method:l.method,action:c},c,w))},currentTarget:l}]})}}for(var co=0;co<Kl.length;co++){var fo=Kl[co],ny=fo.toLowerCase(),sy=fo[0].toUpperCase()+fo.slice(1);Bt(ny,"on"+sy)}Bt(ad,"onAnimationEnd"),Bt(nd,"onAnimationIteration"),Bt(sd,"onAnimationStart"),Bt("dblclick","onDoubleClick"),Bt("focusin","onFocus"),Bt("focusout","onBlur"),Bt(_0,"onTransitionRun"),Bt(x0,"onTransitionStart"),Bt(w0,"onTransitionCancel"),Bt(rd,"onTransitionEnd"),Un("onMouseEnter",["mouseout","mouseover"]),Un("onMouseLeave",["mouseout","mouseover"]),Un("onPointerEnter",["pointerout","pointerover"]),Un("onPointerLeave",["pointerout","pointerover"]),Za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Za("onBeforeInput",["compositionend","keypress","textInput","paste"]),Za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ry=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(br));function Eh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],l=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var m=s.length-1;0<=m;m--){var p=s[m],w=p.instance,T=p.currentTarget;if(p=p.listener,w!==c&&l.isPropagationStopped())break e;c=p,l.currentTarget=T;try{c(l)}catch(U){ti(U)}l.currentTarget=null,c=w}else for(m=0;m<s.length;m++){if(p=s[m],w=p.instance,T=p.currentTarget,p=p.listener,w!==c&&l.isPropagationStopped())break e;c=p,l.currentTarget=T;try{c(l)}catch(U){ti(U)}l.currentTarget=null,c=w}}}}function re(e,t){var a=t[jl];a===void 0&&(a=t[jl]=new Set);var s=e+"__bubble";a.has(s)||(Th(t,e,2,!1),a.add(s))}function ho(e,t,a){var s=0;t&&(s|=4),Th(a,e,s,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function mo(e){if(!e[$i]){e[$i]=!0,_c.forEach(function(a){a!=="selectionchange"&&(ry.has(a)||ho(a,!1,e),ho(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$i]||(t[$i]=!0,ho("selectionchange",!1,t))}}function Th(e,t,a,s){switch(nm(t)){case 2:var l=ky;break;case 8:l=zy;break;default:l=No}a=l.bind(null,t,a,e),l=void 0,!kl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function go(e,t,a,s,l){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var p=s.stateNode.containerInfo;if(p===l)break;if(m===4)for(m=s.return;m!==null;){var w=m.tag;if((w===3||w===4)&&m.stateNode.containerInfo===l)return;m=m.return}for(;p!==null;){if(m=Nn(p),m===null)return;if(w=m.tag,w===5||w===6||w===26||w===27){s=c=m;continue e}p=p.parentNode}}s=s.return}Uc(function(){var T=c,U=Rl(a),D=[];e:{var N=id.get(e);if(N!==void 0){var O=Ir,Y=e;switch(e){case"keypress":if(Pr(a)===0)break e;case"keydown":case"keyup":O=Ig;break;case"focusin":Y="focus",O=Bl;break;case"focusout":Y="blur",O=Bl;break;case"beforeblur":case"afterblur":O=Bl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=t0;break;case ad:case nd:case sd:O=Vg;break;case rd:O=n0;break;case"scroll":case"scrollend":O=Lg;break;case"wheel":O=r0;break;case"copy":case"cut":case"paste":O=Qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Bc;break;case"toggle":case"beforetoggle":O=l0}var I=(t&4)!==0,je=!I&&(e==="scroll"||e==="scrollend"),A=I?N!==null?N+"Capture":null:N;I=[];for(var j=T,E;j!==null;){var z=j;if(E=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||E===null||A===null||(z=$s(j,A),z!=null&&I.push(_r(j,z,E))),je)break;j=j.return}0<I.length&&(N=new O(N,Y,null,a,U),D.push({event:N,listeners:I}))}}if((t&7)===0){e:{if(N=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",N&&a!==Ol&&(Y=a.relatedTarget||a.fromElement)&&(Nn(Y)||Y[Tn]))break e;if((O||N)&&(N=U.window===U?U:(N=U.ownerDocument)?N.defaultView||N.parentWindow:window,O?(Y=a.relatedTarget||a.toElement,O=T,Y=Y?Nn(Y):null,Y!==null&&(je=d(Y),I=Y.tag,Y!==je||I!==5&&I!==27&&I!==6)&&(Y=null)):(O=null,Y=T),O!==Y)){if(I=Dc,z="onMouseLeave",A="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(I=Bc,z="onPointerLeave",A="onPointerEnter",j="pointer"),je=O==null?N:Hs(O),E=Y==null?N:Hs(Y),N=new I(z,j+"leave",O,a,U),N.target=je,N.relatedTarget=E,z=null,Nn(U)===T&&(I=new I(A,j+"enter",Y,a,U),I.target=E,I.relatedTarget=je,z=I),je=z,O&&Y)t:{for(I=iy,A=O,j=Y,E=0,z=A;z;z=I(z))E++;z=0;for(var Z=j;Z;Z=I(Z))z++;for(;0<E-z;)A=I(A),E--;for(;0<z-E;)j=I(j),z--;for(;E--;){if(A===j||j!==null&&A===j.alternate){I=A;break t}A=I(A),j=I(j)}I=null}else I=null;O!==null&&Nh(D,N,O,I,!1),Y!==null&&je!==null&&Nh(D,je,Y,I,!0)}}e:{if(N=T?Hs(T):window,O=N.nodeName&&N.nodeName.toLowerCase(),O==="select"||O==="input"&&N.type==="file")var fe=Qc;else if(Vc(N))if(Kc)fe=p0;else{fe=g0;var Q=m0}else O=N.nodeName,!O||O.toLowerCase()!=="input"||N.type!=="checkbox"&&N.type!=="radio"?T&&Nl(T.elementType)&&(fe=Qc):fe=y0;if(fe&&(fe=fe(e,T))){Yc(D,fe,a,U);break e}Q&&Q(e,N,T),e==="focusout"&&T&&N.type==="number"&&T.memoizedProps.value!=null&&Tl(N,"number",N.value)}switch(Q=T?Hs(T):window,e){case"focusin":(Vc(Q)||Q.contentEditable==="true")&&(Ln=Q,Vl=T,Zs=null);break;case"focusout":Zs=Vl=Ln=null;break;case"mousedown":Yl=!0;break;case"contextmenu":case"mouseup":case"dragend":Yl=!1,ed(D,a,U);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":ed(D,a,U)}var ne;if(ql)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Bn?$c(e,a)&&(le="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(le="onCompositionStart");le&&(Lc&&a.locale!=="ko"&&(Bn||le!=="onCompositionStart"?le==="onCompositionEnd"&&Bn&&(ne=kc()):(pa=U,zl="value"in pa?pa.value:pa.textContent,Bn=!0)),Q=Gi(T,le),0<Q.length&&(le=new Mc(le,e,null,a,U),D.push({event:le,listeners:Q}),ne?le.data=ne:(ne=Gc(a),ne!==null&&(le.data=ne)))),(ne=o0?c0(e,a):d0(e,a))&&(le=Gi(T,"onBeforeInput"),0<le.length&&(Q=new Mc("onBeforeInput","beforeinput",null,a,U),D.push({event:Q,listeners:le}),Q.data=ne)),ay(D,e,T,a,U)}Eh(D,t)})}function _r(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Gi(e,t){for(var a=t+"Capture",s=[];e!==null;){var l=e,c=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||c===null||(l=$s(e,a),l!=null&&s.unshift(_r(e,l,c)),l=$s(e,t),l!=null&&s.push(_r(e,l,c))),e.tag===3)return s;e=e.return}return[]}function iy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Nh(e,t,a,s,l){for(var c=t._reactName,m=[];a!==null&&a!==s;){var p=a,w=p.alternate,T=p.stateNode;if(p=p.tag,w!==null&&w===s)break;p!==5&&p!==26&&p!==27||T===null||(w=T,l?(T=$s(a,c),T!=null&&m.unshift(_r(a,T,w))):l||(T=$s(a,c),T!=null&&m.push(_r(a,T,w)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var ly=/\r\n?/g,uy=/\u0000|\uFFFD/g;function Oh(e){return(typeof e=="string"?e:""+e).replace(ly,`
`).replace(uy,"")}function Rh(e,t){return t=Oh(t),Oh(e)===t}function Se(e,t,a,s,l,c){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||zn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&zn(e,""+s);break;case"className":Kr(e,"class",s);break;case"tabIndex":Kr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(e,a,s);break;case"style":Oc(e,s,c);break;case"data":if(t!=="object"){Kr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Jr(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Se(e,t,"name",l.name,l,null),Se(e,t,"formEncType",l.formEncType,l,null),Se(e,t,"formMethod",l.formMethod,l,null),Se(e,t,"formTarget",l.formTarget,l,null)):(Se(e,t,"encType",l.encType,l,null),Se(e,t,"method",l.method,l,null),Se(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Jr(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Pt);break;case"onScroll":s!=null&&re("scroll",e);break;case"onScrollEnd":s!=null&&re("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Jr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":re("beforetoggle",e),re("toggle",e),Qr(e,"popover",s);break;case"xlinkActuate":Zt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Zt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Zt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Zt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Zt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Zt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Zt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Zt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Zt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Qr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Mg.get(a)||a,Qr(e,a,s))}}function yo(e,t,a,s,l,c){switch(a){case"style":Oc(e,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof s=="string"?zn(e,s):(typeof s=="number"||typeof s=="bigint")&&zn(e,""+s);break;case"onScroll":s!=null&&re("scroll",e);break;case"onScrollEnd":s!=null&&re("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),c=e[st]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,l),typeof s=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,l);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Qr(e,a,s)}}}function et(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":re("error",e),re("load",e);var s=!1,l=!1,c;for(c in a)if(a.hasOwnProperty(c)){var m=a[c];if(m!=null)switch(c){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Se(e,t,c,m,a,null)}}l&&Se(e,t,"srcSet",a.srcSet,a,null),s&&Se(e,t,"src",a.src,a,null);return;case"input":re("invalid",e);var p=c=m=l=null,w=null,T=null;for(s in a)if(a.hasOwnProperty(s)){var U=a[s];if(U!=null)switch(s){case"name":l=U;break;case"type":m=U;break;case"checked":w=U;break;case"defaultChecked":T=U;break;case"value":c=U;break;case"defaultValue":p=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,t));break;default:Se(e,t,s,U,a,null)}}Ac(e,c,p,w,T,m,l,!1);return;case"select":re("invalid",e),s=m=c=null;for(l in a)if(a.hasOwnProperty(l)&&(p=a[l],p!=null))switch(l){case"value":c=p;break;case"defaultValue":m=p;break;case"multiple":s=p;default:Se(e,t,l,p,a,null)}t=c,a=m,e.multiple=!!s,t!=null?kn(e,!!s,t,!1):a!=null&&kn(e,!!s,a,!0);return;case"textarea":re("invalid",e),c=l=s=null;for(m in a)if(a.hasOwnProperty(m)&&(p=a[m],p!=null))switch(m){case"value":s=p;break;case"defaultValue":l=p;break;case"children":c=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:Se(e,t,m,p,a,null)}Tc(e,s,l,c);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(s=a[w],s!=null))switch(w){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Se(e,t,w,s,a,null)}return;case"dialog":re("beforetoggle",e),re("toggle",e),re("cancel",e),re("close",e);break;case"iframe":case"object":re("load",e);break;case"video":case"audio":for(s=0;s<br.length;s++)re(br[s],e);break;case"image":re("error",e),re("load",e);break;case"details":re("toggle",e);break;case"embed":case"source":case"link":re("error",e),re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(T in a)if(a.hasOwnProperty(T)&&(s=a[T],s!=null))switch(T){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Se(e,t,T,s,a,null)}return;default:if(Nl(t)){for(U in a)a.hasOwnProperty(U)&&(s=a[U],s!==void 0&&yo(e,t,U,s,a,void 0));return}}for(p in a)a.hasOwnProperty(p)&&(s=a[p],s!=null&&Se(e,t,p,s,a,null))}function oy(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,c=null,m=null,p=null,w=null,T=null,U=null;for(O in a){var D=a[O];if(a.hasOwnProperty(O)&&D!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":w=D;default:s.hasOwnProperty(O)||Se(e,t,O,null,s,D)}}for(var N in s){var O=s[N];if(D=a[N],s.hasOwnProperty(N)&&(O!=null||D!=null))switch(N){case"type":c=O;break;case"name":l=O;break;case"checked":T=O;break;case"defaultChecked":U=O;break;case"value":m=O;break;case"defaultValue":p=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(137,t));break;default:O!==D&&Se(e,t,N,O,s,D)}}El(e,m,p,w,T,U,c,l);return;case"select":O=m=p=N=null;for(c in a)if(w=a[c],a.hasOwnProperty(c)&&w!=null)switch(c){case"value":break;case"multiple":O=w;default:s.hasOwnProperty(c)||Se(e,t,c,null,s,w)}for(l in s)if(c=s[l],w=a[l],s.hasOwnProperty(l)&&(c!=null||w!=null))switch(l){case"value":N=c;break;case"defaultValue":p=c;break;case"multiple":m=c;default:c!==w&&Se(e,t,l,c,s,w)}t=p,a=m,s=O,N!=null?kn(e,!!a,N,!1):!!s!=!!a&&(t!=null?kn(e,!!a,t,!0):kn(e,!!a,a?[]:"",!1));return;case"textarea":O=N=null;for(p in a)if(l=a[p],a.hasOwnProperty(p)&&l!=null&&!s.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Se(e,t,p,null,s,l)}for(m in s)if(l=s[m],c=a[m],s.hasOwnProperty(m)&&(l!=null||c!=null))switch(m){case"value":N=l;break;case"defaultValue":O=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(i(91));break;default:l!==c&&Se(e,t,m,l,s,c)}Ec(e,N,O);return;case"option":for(var Y in a)if(N=a[Y],a.hasOwnProperty(Y)&&N!=null&&!s.hasOwnProperty(Y))switch(Y){case"selected":e.selected=!1;break;default:Se(e,t,Y,null,s,N)}for(w in s)if(N=s[w],O=a[w],s.hasOwnProperty(w)&&N!==O&&(N!=null||O!=null))switch(w){case"selected":e.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Se(e,t,w,N,s,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in a)N=a[I],a.hasOwnProperty(I)&&N!=null&&!s.hasOwnProperty(I)&&Se(e,t,I,null,s,N);for(T in s)if(N=s[T],O=a[T],s.hasOwnProperty(T)&&N!==O&&(N!=null||O!=null))switch(T){case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(137,t));break;default:Se(e,t,T,N,s,O)}return;default:if(Nl(t)){for(var je in a)N=a[je],a.hasOwnProperty(je)&&N!==void 0&&!s.hasOwnProperty(je)&&yo(e,t,je,void 0,s,N);for(U in s)N=s[U],O=a[U],!s.hasOwnProperty(U)||N===O||N===void 0&&O===void 0||yo(e,t,U,N,s,O);return}}for(var A in a)N=a[A],a.hasOwnProperty(A)&&N!=null&&!s.hasOwnProperty(A)&&Se(e,t,A,null,s,N);for(D in s)N=s[D],O=a[D],!s.hasOwnProperty(D)||N===O||N==null&&O==null||Se(e,t,D,N,s,O)}function Uh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var l=a[s],c=l.transferSize,m=l.initiatorType,p=l.duration;if(c&&p&&Uh(m)){for(m=0,p=l.responseEnd,s+=1;s<a.length;s++){var w=a[s],T=w.startTime;if(T>p)break;var U=w.transferSize,D=w.initiatorType;U&&Uh(D)&&(w=w.responseEnd,m+=U*(w<p?1:(p-T)/(w-T)))}if(--s,t+=8*(c+m)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var po=null,vo=null;function Vi(e){return e.nodeType===9?e:e.ownerDocument}function kh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _o=null;function dy(){var e=window.event;return e&&e.type==="popstate"?e===_o?!1:(_o=e,!0):(_o=null,!1)}var Dh=typeof setTimeout=="function"?setTimeout:void 0,fy=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,hy=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(e){return Mh.resolve(null).then(e).catch(my)}:Dh;function my(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function Bh(e,t){var a=t,s=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(l),ds(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")xr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,xr(a);for(var c=a.firstChild;c;){var m=c.nextSibling,p=c.nodeName;c[qs]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=m}}else a==="body"&&xr(e.ownerDocument.body);a=l}while(a);ds(t)}function Lh(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function xo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xo(a),Cl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function gy(e,t,a,s){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[qs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Ut(e.nextSibling),e===null)break}return null}function yy(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ut(e.nextSibling),e===null))return null;return e}function qh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ut(e.nextSibling),e===null))return null;return e}function wo(e){return e.data==="$?"||e.data==="$~"}function So(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function py(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var jo=null;function Hh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Ut(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function $h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Gh(e,t,a){switch(t=Vi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function xr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cl(e)}var kt=new Map,Vh=new Set;function Yi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fa=L.d;L.d={f:vy,r:by,D:_y,C:xy,L:wy,m:Sy,X:Cy,S:jy,M:Ay};function vy(){var e=fa.f(),t=Di();return e||t}function by(e){var t=On(e);t!==null&&t.tag===5&&t.type==="form"?rf(t):fa.r(e)}var us=typeof document>"u"?null:document;function Yh(e,t,a){var s=us;if(s&&typeof t=="string"&&t){var l=Ct(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),Vh.has(l)||(Vh.add(l),e={rel:e,crossOrigin:a,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),et(t,"link",e),Ke(t),s.head.appendChild(t)))}}function _y(e){fa.D(e),Yh("dns-prefetch",e,null)}function xy(e,t){fa.C(e,t),Yh("preconnect",e,t)}function wy(e,t,a){fa.L(e,t,a);var s=us;if(s&&e&&t){var l='link[rel="preload"][as="'+Ct(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Ct(a.imageSizes)+'"]')):l+='[href="'+Ct(e)+'"]';var c=l;switch(t){case"style":c=os(e);break;case"script":c=cs(e)}kt.has(c)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),kt.set(c,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(wr(c))||t==="script"&&s.querySelector(Sr(c))||(t=s.createElement("link"),et(t,"link",e),Ke(t),s.head.appendChild(t)))}}function Sy(e,t){fa.m(e,t);var a=us;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Ct(s)+'"][href="'+Ct(e)+'"]',c=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=cs(e)}if(!kt.has(c)&&(e=b({rel:"modulepreload",href:e},t),kt.set(c,e),a.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sr(c)))return}s=a.createElement("link"),et(s,"link",e),Ke(s),a.head.appendChild(s)}}}function jy(e,t,a){fa.S(e,t,a);var s=us;if(s&&e){var l=Rn(s).hoistableStyles,c=os(e);t=t||"default";var m=l.get(c);if(!m){var p={loading:0,preload:null};if(m=s.querySelector(wr(c)))p.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=kt.get(c))&&Co(e,a);var w=m=s.createElement("link");Ke(w),et(w,"link",e),w._p=new Promise(function(T,U){w.onload=T,w.onerror=U}),w.addEventListener("load",function(){p.loading|=1}),w.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Qi(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:p},l.set(c,m)}}}function Cy(e,t){fa.X(e,t);var a=us;if(a&&e){var s=Rn(a).hoistableScripts,l=cs(e),c=s.get(l);c||(c=a.querySelector(Sr(l)),c||(e=b({src:e,async:!0},t),(t=kt.get(l))&&Ao(e,t),c=a.createElement("script"),Ke(c),et(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(l,c))}}function Ay(e,t){fa.M(e,t);var a=us;if(a&&e){var s=Rn(a).hoistableScripts,l=cs(e),c=s.get(l);c||(c=a.querySelector(Sr(l)),c||(e=b({src:e,async:!0,type:"module"},t),(t=kt.get(l))&&Ao(e,t),c=a.createElement("script"),Ke(c),et(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(l,c))}}function Qh(e,t,a,s){var l=(l=St.current)?Yi(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=os(a.href),a=Rn(l).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=os(a.href);var c=Rn(l).hoistableStyles,m=c.get(e);if(m||(l=l.ownerDocument||l,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=l.querySelector(wr(e)))&&!c._p&&(m.instance=c,m.state.loading=5),kt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kt.set(e,a),c||Ey(l,e,a,m.state))),t&&s===null)throw Error(i(528,""));return m}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=cs(a),a=Rn(l).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function os(e){return'href="'+Ct(e)+'"'}function wr(e){return'link[rel="stylesheet"]['+e+"]"}function Kh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Ey(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),et(t,"link",a),Ke(t),e.head.appendChild(t))}function cs(e){return'[src="'+Ct(e)+'"]'}function Sr(e){return"script[async]"+e}function Xh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(s)return t.instance=s,Ke(s),s;var l=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ke(s),et(s,"style",l),Qi(s,a.precedence,e),t.instance=s;case"stylesheet":l=os(a.href);var c=e.querySelector(wr(l));if(c)return t.state.loading|=4,t.instance=c,Ke(c),c;s=Kh(a),(l=kt.get(l))&&Co(s,l),c=(e.ownerDocument||e).createElement("link"),Ke(c);var m=c;return m._p=new Promise(function(p,w){m.onload=p,m.onerror=w}),et(c,"link",s),t.state.loading|=4,Qi(c,a.precedence,e),t.instance=c;case"script":return c=cs(a.src),(l=e.querySelector(Sr(c)))?(t.instance=l,Ke(l),l):(s=a,(l=kt.get(c))&&(s=b({},a),Ao(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),Ke(l),et(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Qi(s,a.precedence,e));return t.instance}function Qi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,c=l,m=0;m<s.length;m++){var p=s[m];if(p.dataset.precedence===t)c=p;else if(c!==l)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Co(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ao(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ki=null;function Jh(e,t,a){if(Ki===null){var s=new Map,l=Ki=new Map;l.set(a,s)}else l=Ki,s=l.get(a),s||(s=new Map,l.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var c=a[l];if(!(c[qs]||c[Pe]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(t)||"";m=e+m;var p=s.get(m);p?p.push(c):s.set(m,[c])}}return s}function Zh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Ty(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ph(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ny(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=os(s.href),c=t.querySelector(wr(l));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Xi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,Ke(c);return}c=t.ownerDocument||t,s=Kh(s),(l=kt.get(l))&&Co(s,l),c=c.createElement("link"),Ke(c);var m=c;m._p=new Promise(function(p,w){m.onload=p,m.onerror=w}),et(c,"link",s),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Xi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Eo=0;function Oy(e,t){return e.stylesheets&&e.count===0&&Zi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Zi(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Eo===0&&(Eo=62500*cy());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zi(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Eo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function Xi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ji=null;function Zi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ji=new Map,t.forEach(Ry,e),Ji=null,Xi.call(e))}function Ry(e,t){if(!(t.state.loading&4)){var a=Ji.get(e);if(a)var s=a.get(null);else{a=new Map,Ji.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<l.length;c++){var m=l[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),s=m)}s&&a.set(null,s)}l=t.instance,m=l.getAttribute("data-precedence"),c=a.get(m)||s,c===s&&a.set(null,l),a.set(m,l),this.count++,s=Xi.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),c?c.parentNode.insertBefore(l,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var jr={$$typeof:q,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Uy(e,t,a,s,l,c,m,p,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.hiddenUpdates=xl(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Wh(e,t,a,s,l,c,m,p,w,T,U,D){return e=new Uy(e,t,a,m,w,T,U,D,p),t=1,c===!0&&(t|=24),c=yt(3,null,null,t),e.current=c,c.stateNode=e,t=ru(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:s,isDehydrated:a,cache:t},ou(c),e}function Ih(e){return e?(e=$n,e):$n}function Fh(e,t,a,s,l,c){l=Ih(l),s.context===null?s.context=l:s.pendingContext=l,s=Sa(t),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),a=ja(e,s,t),a!==null&&(ct(a,e,t),ar(a,e,t))}function em(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function To(e,t){em(e,t),(e=e.alternate)&&em(e,t)}function tm(e){if(e.tag===13||e.tag===31){var t=Fa(e,67108864);t!==null&&ct(t,e,67108864),To(e,67108864)}}function am(e){if(e.tag===13||e.tag===31){var t=xt();t=wl(t);var a=Fa(e,t);a!==null&&ct(a,e,t),To(e,t)}}var Pi=!0;function ky(e,t,a,s){var l=k.T;k.T=null;var c=L.p;try{L.p=2,No(e,t,a,s)}finally{L.p=c,k.T=l}}function zy(e,t,a,s){var l=k.T;k.T=null;var c=L.p;try{L.p=8,No(e,t,a,s)}finally{L.p=c,k.T=l}}function No(e,t,a,s){if(Pi){var l=Oo(s);if(l===null)go(e,t,s,Wi,a),sm(e,s);else if(My(l,e,t,a,s))s.stopPropagation();else if(sm(e,s),t&4&&-1<Dy.indexOf(e)){for(;l!==null;){var c=On(l);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Ja(c.pendingLanes);if(m!==0){var p=c;for(p.pendingLanes|=2,p.entangledLanes|=2;m;){var w=1<<31-mt(m);p.entanglements[1]|=w,m&=~w}Kt(c),(me&6)===0&&(ki=tt()+500,vr(0))}}break;case 31:case 13:p=Fa(c,2),p!==null&&ct(p,c,2),Di(),To(c,2)}if(c=Oo(s),c===null&&go(e,t,s,Wi,a),c===l)break;l=c}l!==null&&s.stopPropagation()}else go(e,t,s,null,a)}}function Oo(e){return e=Rl(e),Ro(e)}var Wi=null;function Ro(e){if(Wi=null,e=Nn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Wi=e,null}function nm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_l()){case qr:return 2;case Hr:return 8;case J:case Re:return 32;case ma:return 268435456;default:return 32}default:return 32}}var Uo=!1,Da=null,Ma=null,Ba=null,Cr=new Map,Ar=new Map,La=[],Dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sm(e,t){switch(e){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Cr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(t.pointerId)}}function Er(e,t,a,s,l,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:c,targetContainers:[l]},t!==null&&(t=On(t),t!==null&&tm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function My(e,t,a,s,l){switch(t){case"focusin":return Da=Er(Da,e,t,a,s,l),!0;case"dragenter":return Ma=Er(Ma,e,t,a,s,l),!0;case"mouseover":return Ba=Er(Ba,e,t,a,s,l),!0;case"pointerover":var c=l.pointerId;return Cr.set(c,Er(Cr.get(c)||null,e,t,a,s,l)),!0;case"gotpointercapture":return c=l.pointerId,Ar.set(c,Er(Ar.get(c)||null,e,t,a,s,l)),!0}return!1}function rm(e){var t=Nn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,vc(e.priority,function(){am(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,vc(e.priority,function(){am(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Oo(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Ol=s,a.target.dispatchEvent(s),Ol=null}else return t=On(a),t!==null&&tm(t),e.blockedOn=a,!1;t.shift()}return!0}function im(e,t,a){Ii(e)&&a.delete(t)}function By(){Uo=!1,Da!==null&&Ii(Da)&&(Da=null),Ma!==null&&Ii(Ma)&&(Ma=null),Ba!==null&&Ii(Ba)&&(Ba=null),Cr.forEach(im),Ar.forEach(im)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,Uo||(Uo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,By)))}var el=null;function lm(e){el!==e&&(el=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){el===e&&(el=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(Ro(s||a)===null)continue;break}var c=On(a);c!==null&&(e.splice(t,3),t-=3,Nu(c,{pending:!0,data:l,method:a.method,action:s},s,l))}}))}function ds(e){function t(w){return Fi(w,e)}Da!==null&&Fi(Da,e),Ma!==null&&Fi(Ma,e),Ba!==null&&Fi(Ba,e),Cr.forEach(t),Ar.forEach(t);for(var a=0;a<La.length;a++){var s=La[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<La.length&&(a=La[0],a.blockedOn===null);)rm(a),a.blockedOn===null&&La.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var l=a[s],c=a[s+1],m=l[st]||null;if(typeof c=="function")m||lm(a);else if(m){var p=null;if(c&&c.hasAttribute("formAction")){if(l=c,m=c[st]||null)p=m.formAction;else if(Ro(l)!==null)continue}else p=m.action;typeof p=="function"?a[s+1]=p:(a.splice(s,3),s-=3),lm(a)}}}function um(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return l=m})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function ko(e){this._internalRoot=e}tl.prototype.render=ko.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,s=xt();Fh(a,s,e,t,null,null)},tl.prototype.unmount=ko.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fh(e.current,2,null,e,null,null),Di(),t[Tn]=null}};function tl(e){this._internalRoot=e}tl.prototype.unstable_scheduleHydration=function(e){if(e){var t=pc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<La.length&&t!==0&&t<La[a].priority;a++);La.splice(a,0,e),a===0&&rm(e)}};var om=n.version;if(om!=="19.2.0")throw Error(i(527,om,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=v(t),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var Ly={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{Ms=al.inject(Ly),ht=al}catch{}}return Nr.createRoot=function(e,t){if(!u(e))throw Error(i(299));var a=!1,s="",l=yf,c=pf,m=vf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Wh(e,1,!1,null,null,a,s,null,l,c,m,um),e[Tn]=t.current,mo(e),new ko(t)},Nr.hydrateRoot=function(e,t,a){if(!u(e))throw Error(i(299));var s=!1,l="",c=yf,m=pf,p=vf,w=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(p=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),t=Wh(e,1,!0,t,a??null,s,l,w,c,m,p,um),t.context=Ih(null),a=t.current,s=xt(),s=wl(s),l=Sa(s),l.callback=null,ja(a,l,s),a=s,t.current.lanes=a,Ls(t,a),Kt(t),e[Tn]=t.current,mo(e),new tl(t)},Nr.version="19.2.0",Nr}var ym;function ip(){if(ym)return Bo.exports;ym=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Bo.exports=rp(),Bo.exports}var lp=ip();const up=Xm(lp);class op{authRepository;constructor(n){this.authRepository=n}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:this.isValidEmail(n)?this.authRepository.signIn(n,r):{success:!1,error:"Invalid email format"}}async signUp(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:this.isValidEmail(n)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(n,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(n){return this.authRepository.onAuthStateChange(n)}async completeProfile(n){const r=await this.authRepository.getCurrentUser();return r?n.displayName?.trim()?n.username?.trim()?n.username.length<3||n.username.length>30?{success:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(n.username)?this.authRepository.completeProfile(r.id,n.displayName.trim(),n.username.trim()):{success:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}:{success:!1,error:"Username is required"}:{success:!1,error:"Display name is required"}:{success:!1,error:"User not authenticated"}}async updateProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(n.displayName!==void 0&&!n.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(n.username!==void 0){if(!n.username?.trim())return{success:!1,error:"Username cannot be empty"};if(n.username.length<3||n.username.length>30)return{success:!1,error:"Username must be between 3 and 30 characters"};if(!/^[a-zA-Z0-9_-]+$/.test(n.username))return{success:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}return this.authRepository.updateProfile(r.id,n.displayName?.trim(),n.username?.trim())}async changePassword(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.currentPassword)return{success:!1,error:"Current password is required"};if(!n.newPassword)return{success:!1,error:"New password is required"};if(n.newPassword.length<8)return{success:!1,error:"New password must be at least 8 characters long"};const i=/[a-z]/.test(n.newPassword),u=/[A-Z]/.test(n.newPassword),d=/\d/.test(n.newPassword),f=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(n.newPassword);return!i||!u||!d||!f?{success:!1,error:"New password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:this.authRepository.changePassword(r.id,n.currentPassword,n.newPassword)}async deleteAccount(){const n=await this.authRepository.getCurrentUser();return n?this.authRepository.deleteAccount(n.id):{success:!1,error:"User not authenticated"}}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}}class cp{campaignRepository;authRepository;constructor(n,r){this.campaignRepository=n,this.authRepository=r}async getCampaigns(){const n=await this.authRepository.getCurrentUser();return n?this.campaignRepository.getCampaigns(n.id):{success:!1,error:"User not authenticated"}}async getCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(n)}async createCampaign(n){const r=await this.authRepository.getCurrentUser();return r?n.name?.trim()?n.name.length>100?{success:!1,error:"Campaign name must be 100 characters or less"}:this.campaignRepository.createCampaign(r.id,{name:n.name.trim(),description:n.description?.trim()}):{success:!1,error:"Campaign name is required"}:{success:!1,error:"User not authenticated"}}async updateCampaign(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,i.id);if(!u.success||u.data!=="admin")return{success:!1,error:"Only administrators can update campaigns"};if(r.name!==void 0&&!r.name?.trim())return{success:!1,error:"Campaign name cannot be empty"};if(r.name&&r.name.length>100)return{success:!1,error:"Campaign name must be 100 characters or less"};const d={};return r.name!==void 0&&(d.name=r.name.trim()),r.description!==void 0&&(d.description=r.description?.trim()),this.campaignRepository.updateCampaign(n,d)}async deleteCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.getUserRole(n,r.id);return!i.success||i.data!=="admin"?{success:!1,error:"Only administrators can delete campaigns"}:this.campaignRepository.deleteCampaign(n)}async getCampaignMembers(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(n)}async addMemberByEmail(n,r,i){const u=await this.authRepository.getCurrentUser();if(!u)return{success:!1,error:"User not authenticated"};const d=await this.campaignRepository.getUserRole(n,u.id);return!d.success||d.data!=="admin"?{success:!1,error:"Only administrators can add members"}:r?.trim()?this.isValidEmail(r)?["admin","gm","player"].includes(i)?this.campaignRepository.addMemberByEmail(n,r.trim(),i):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(n,r,i){const u=await this.authRepository.getCurrentUser();if(!u)return{success:!1,error:"User not authenticated"};const d=await this.campaignRepository.getUserRole(n,u.id);return!d.success||d.data!=="admin"?{success:!1,error:"Only administrators can update member roles"}:["admin","gm","player"].includes(i)?this.campaignRepository.updateMemberRole(n,r,i):{success:!1,error:"Invalid role specified"}}async removeMember(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,i.id);return!u.success||u.data!=="admin"?{success:!1,error:"Only administrators can remove members"}:this.campaignRepository.removeMember(n,r)}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}}const dp="modulepreload",fp=function(o){return"/traveller-dashboard/"+o},pm={},xn=function(n,r,i){let u=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(_=>Promise.resolve(_).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");u=y(r.map(v=>{if(v=fp(v),v in pm)return;pm[v]=!0;const _=v.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const x=document.createElement("link");if(x.rel=_?"stylesheet":dp,_||(x.as="script"),x.crossOrigin="",x.href=v,g&&x.setAttribute("nonce",g),document.head.appendChild(x),_)return new Promise((S,C)=>{x.addEventListener("load",S),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${v}`)))})}))}function d(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return u.then(f=>{for(const g of f||[])g.status==="rejected"&&d(g.reason);return n().catch(d)})},hp=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>xn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ts);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)};class oc extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class vm extends oc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class bm extends oc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class _m extends oc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Zo;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Zo||(Zo={}));var mp=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class gp{constructor(n,{headers:r={},customFetch:i,region:u=Zo.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=hp(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return mp(this,arguments,void 0,function*(r,i={}){var u;try{const{headers:d,method:f,body:g,signal:y}=i;let v={},{region:_}=i;_||(_=this.region);const b=new URL(`${this.url}/${r}`);_&&_!=="any"&&(v["x-region"]=_,b.searchParams.set("forceFunctionRegion",_));let x;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",x=g):typeof g=="string"?(v["Content-Type"]="text/plain",x=g):typeof FormData<"u"&&g instanceof FormData?x=g:(v["Content-Type"]="application/json",x=JSON.stringify(g)));const S=yield this.fetch(b.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),d),body:x,signal:y}).catch(G=>{throw G.name==="AbortError"?G:new vm(G)}),C=S.headers.get("x-relay-error");if(C&&C==="true")throw new bm(S);if(!S.ok)throw new _m(S);let R=((u=S.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),M;return R==="application/json"?M=yield S.json():R==="application/octet-stream"?M=yield S.blob():R==="text/event-stream"?M=S:R==="multipart/form-data"?M=yield S.formData():M=yield S.text(),{data:M,error:null,response:S}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new vm(d)}:{data:null,error:d,response:d instanceof _m||d instanceof bm?d.context:void 0}}})}}var Je={},fs={},hs={},ms={},gs={},ys={},yp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Es=yp();const pp=Es.fetch,Jm=Es.fetch.bind(Es),Zm=Es.Headers,vp=Es.Request,bp=Es.Response,Ts=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zm,Request:vp,Response:bp,default:Jm,fetch:pp},Symbol.toStringTag,{value:"Module"})),_p=Iy(Ts);var nl={},xm;function Pm(){if(xm)return nl;xm=1,Object.defineProperty(nl,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return nl.default=o,nl}var wm;function Wm(){if(wm)return ys;wm=1;var o=ys&&ys.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ys,"__esModule",{value:!0});const n=o(_p),r=o(Pm());class i{constructor(d){var f,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let y=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var _,b,x,S;let C=null,R=null,M=null,G=v.status,H=v.statusText;if(v.ok){if(this.method!=="HEAD"){const $=await v.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((_=this.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?R=$:R=JSON.parse($))}const V=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),F=(x=v.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");V&&F&&F.length>1&&(M=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(C={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,M=null,G=406,H="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const V=await v.text();try{C=JSON.parse(V),Array.isArray(C)&&v.status===404&&(R=[],C=null,G=200,H="OK")}catch{v.status===404&&V===""?(G=204,H="No Content"):C={message:V}}if(C&&this.isMaybeSingle&&(!((S=C?.details)===null||S===void 0)&&S.includes("0 rows"))&&(C=null,G=200,H="OK"),C&&this.shouldThrowOnError)throw new r.default(C)}return{error:C,data:R,count:M,status:G,statusText:H}});return this.shouldThrowOnError||(y=y.catch(v=>{var _,b,x;return{error:{message:`${(_=v?.name)!==null&&_!==void 0?_:"FetchError"}: ${v?.message}`,details:`${(b=v?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(x=v?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),y.then(d,f)}returns(){return this}overrideTypes(){return this}}return ys.default=i,ys}var Sm;function Im(){if(Sm)return gs;Sm=1;var o=gs&&gs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(gs,"__esModule",{value:!0});const n=o(Wm());class r extends n.default{select(u){let d=!1;const f=(u??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:g,referencedTable:y=g}={}){const v=y?`${y}.order`:"order",_=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${_?`${_},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:g=f}={}){const y=typeof g>"u"?"offset":`${g}.offset`,v=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${u}`),this.url.searchParams.set(v,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:g=!1,wal:y=!1,format:v="text"}={}){var _;const b=[u?"analyze":null,d?"verbose":null,f?"settings":null,g?"buffers":null,y?"wal":null].filter(Boolean).join("|"),x=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${x}"; options=${b};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return gs.default=r,gs}var jm;function cc(){if(jm)return ms;jm=1;var o=ms&&ms.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ms,"__esModule",{value:!0});const n=o(Im());class r extends n.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}in(u,d){const f=Array.from(new Set(d)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(u,`in.(${f})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:f,type:g}={}){let y="";g==="plain"?y="pl":g==="phrase"?y="ph":g==="websearch"&&(y="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(u,`${y}fts${v}.${d}`),this}match(u){return Object.entries(u).forEach(([d,f])=>{this.url.searchParams.append(d,`eq.${f}`)}),this}not(u,d,f){return this.url.searchParams.append(u,`not.${d}.${f}`),this}or(u,{foreignTable:d,referencedTable:f=d}={}){const g=f?`${f}.or`:"or";return this.url.searchParams.append(g,`(${u})`),this}filter(u,d,f){return this.url.searchParams.append(u,`${d}.${f}`),this}}return ms.default=r,ms}var Cm;function Fm(){if(Cm)return hs;Cm=1;var o=hs&&hs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(hs,"__esModule",{value:!0});const n=o(cc());class r{constructor(u,{headers:d={},schema:f,fetch:g}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=g}select(u,d){const{head:f=!1,count:g}=d??{},y=f?"HEAD":"GET";let v=!1;const _=(u??"*").split("").map(b=>/\s/.test(b)&&!v?"":(b==='"'&&(v=!v),b)).join("");return this.url.searchParams.set("select",_),g&&this.headers.append("Prefer",`count=${g}`),new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var g;const y="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const v=u.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(v.length>0){const _=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:g,defaultToNull:y=!0}={}){var v;const _="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const b=u.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(b.length>0){const x=[...new Set(b)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(u,{count:d}={}){var f;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return hs.default=r,hs}var Am;function xp(){if(Am)return fs;Am=1;var o=fs&&fs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(fs,"__esModule",{value:!0});const n=o(Fm()),r=o(cc());class i{constructor(d,{headers:f={},schema:g,fetch:y}={}){this.url=d,this.headers=new Headers(f),this.schemaName=g,this.fetch=y}from(d){const f=new URL(`${this.url}/${d}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new i(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:g=!1,get:y=!1,count:v}={}){var _;let b;const x=new URL(`${this.url}/rpc/${d}`);let S;g||y?(b=g?"HEAD":"GET",Object.entries(f).filter(([R,M])=>M!==void 0).map(([R,M])=>[R,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([R,M])=>{x.searchParams.append(R,M)})):(b="POST",S=f);const C=new Headers(this.headers);return v&&C.set("Prefer",`count=${v}`),new r.default({method:b,url:x,headers:C,schema:this.schemaName,body:S,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return fs.default=i,fs}var Em;function wp(){if(Em)return Je;Em=1;var o=Je&&Je.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Je,"__esModule",{value:!0}),Je.PostgrestError=Je.PostgrestBuilder=Je.PostgrestTransformBuilder=Je.PostgrestFilterBuilder=Je.PostgrestQueryBuilder=Je.PostgrestClient=void 0;const n=o(xp());Je.PostgrestClient=n.default;const r=o(Fm());Je.PostgrestQueryBuilder=r.default;const i=o(cc());Je.PostgrestFilterBuilder=i.default;const u=o(Im());Je.PostgrestTransformBuilder=u.default;const d=o(Wm());Je.PostgrestBuilder=d.default;const f=o(Pm());return Je.PostgrestError=f.default,Je.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},Je}var Sp=wp();const jp=Xm(Sp),{PostgrestClient:Cp,PostgrestQueryBuilder:q_,PostgrestFilterBuilder:H_,PostgrestTransformBuilder:$_,PostgrestBuilder:G_,PostgrestError:V_}=jp;class Ap{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,u=parseInt(i.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Ep="2.75.0",Tp=`realtime-js/${Ep}`,Np="1.0.0",Po=1e4,Op=1e3,Rp=100;var Rr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Rr||(Rr={}));var Ye;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Ye||(Ye={}));var $t;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})($t||($t={}));var Wo;(function(o){o.websocket="websocket"})(Wo||(Wo={}));var yn;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(yn||(yn={}));class Up{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,r,i)}_decodeBroadcast(n,r,i){const u=r.getUint8(1),d=r.getUint8(2);let f=this.HEADER_LENGTH+2;const g=i.decode(n.slice(f,f+u));f=f+u;const y=i.decode(n.slice(f,f+d));f=f+d;const v=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:g,event:y,payload:v}}}class eg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Ae||(Ae={}));const Tm=(o,n,r={})=>{var i;const u=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=kp(f,o,n,u),d),{}):{}},kp=(o,n,r,i)=>{const u=n.find(g=>g.name===o),d=u?.type,f=r[o];return d&&!i.includes(d)?tg(d,f):Io(f)},tg=(o,n)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return Bp(n,r)}switch(o){case Ae.bool:return zp(n);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return Dp(n);case Ae.json:case Ae.jsonb:return Mp(n);case Ae.timestamp:return Lp(n);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return Io(n);default:return Io(n)}},Io=o=>o,zp=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Dp=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Mp=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Bp=(o,n)=>{if(typeof o!="string")return o;const r=o.length-1,i=o[r];if(o[0]==="{"&&i==="}"){let d;const f=o.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(g=>tg(n,g))}return o},Lp=o=>typeof o=="string"?o.replace(" ","T"):o,ag=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Ho{constructor(n,r,i={},u=Po){this.channel=n,this.event=r,this.payload=i,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Nm;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Nm||(Nm={}));class Ur{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ur.syncState(this.state,u,d,f),this.pendingDiffs.forEach(y=>{this.state=Ur.syncDiff(this.state,y,d,f)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Ur.syncDiff(this.state,u,d,f),g())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,u){const d=this.cloneDeep(n),f=this.transformState(r),g={},y={};return this.map(d,(v,_)=>{f[v]||(y[v]=_)}),this.map(f,(v,_)=>{const b=d[v];if(b){const x=_.map(M=>M.presence_ref),S=b.map(M=>M.presence_ref),C=_.filter(M=>S.indexOf(M.presence_ref)<0),R=b.filter(M=>x.indexOf(M.presence_ref)<0);C.length>0&&(g[v]=C),R.length>0&&(y[v]=R)}else g[v]=_}),this.syncDiff(d,{joins:g,leaves:y},i,u)}static syncDiff(n,r,i,u){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),u||(u=()=>{}),this.map(d,(g,y)=>{var v;const _=(v=n[g])!==null&&v!==void 0?v:[];if(n[g]=this.cloneDeep(y),_.length>0){const b=n[g].map(S=>S.presence_ref),x=_.filter(S=>b.indexOf(S.presence_ref)<0);n[g].unshift(...x)}i(g,_,y)}),this.map(f,(g,y)=>{let v=n[g];if(!v)return;const _=y.map(b=>b.presence_ref);v=v.filter(b=>_.indexOf(b.presence_ref)<0),n[g]=v,u(g,v,y),v.length===0&&delete n[g]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const u=n[i];return"metas"in u?r[i]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[i]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Om;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Om||(Om={}));var kr;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(kr||(kr={}));var ha;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(ha||(ha={}));class dc{constructor(n,r={config:{}},i){var u,d;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ho(this,$t.join,this.params,this.timeout),this.rejoinTimer=new eg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Ur(this),this.broadcastEndpointURL=ag(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:f,presence:g,private:y}}=this.params,v=(u=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&u!==void 0?u:[],_=!!this.bindings[kr.PRESENCE]&&this.bindings[kr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,b={},x={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:_}),postgres_changes:v,private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(S=>n?.(ha.CHANNEL_ERROR,S)),this._onClose(()=>n?.(ha.CLOSED)),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var C;if(this.socket.setAuth(),S===void 0){n?.(ha.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,M=(C=R?.length)!==null&&C!==void 0?C:0,G=[];for(let H=0;H<M;H++){const q=R[H],{filter:{event:V,schema:F,table:$,filter:ee}}=q,ce=S&&S[H];if(ce&&ce.event===V&&ce.schema===F&&ce.table===$&&ce.filter===ee)G.push(Object.assign(Object.assign({},q),{id:ce.id}));else{this.unsubscribe(),this.state=Ye.errored,n?.(ha.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,n&&n(ha.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ye.errored,n?.(ha.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{n?.(ha.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===Ye.joined&&n===kr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,i)}async send(n,r={}){var i,u;if(!this._canPush()&&n.type==="broadcast"){const{event:d,payload:f}=n,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,g,y;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((y=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&d("ok"),v.receive("ok",()=>d("ok")),v.receive("error",()=>d("error")),v.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ye.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(u=>{i=new Ho(this,$t.leave,{},n),i.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const u=new AbortController,d=setTimeout(()=>u.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(d),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Ho(this,n,r,i);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Rp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var u,d;const f=n.toLocaleLowerCase(),{close:g,error:y,leave:v,join:_}=$t;if(i&&[g,y,v,_].indexOf(f)>=0&&i!==this._joinRef())return;let x=this._onMessage(f,r,i);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(S=>{var C,R,M;return((C=S.filter)===null||C===void 0?void 0:C.event)==="*"||((M=(R=S.filter)===null||R===void 0?void 0:R.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===f}).map(S=>S.callback(x,i)):(d=this.bindings[f])===null||d===void 0||d.filter(S=>{var C,R,M,G,H,q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in S){const V=S.id,F=(C=S.filter)===null||C===void 0?void 0:C.event;return V&&((R=r.ids)===null||R===void 0?void 0:R.includes(V))&&(F==="*"||F?.toLocaleLowerCase()===((M=r.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const V=(H=(G=S?.filter)===null||G===void 0?void 0:G.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return V==="*"||V===((q=r?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===f}).map(S=>{if(typeof x=="object"&&"ids"in x){const C=x.data,{schema:R,table:M,commit_timestamp:G,type:H,errors:q}=C;x=Object.assign(Object.assign({},{schema:R,table:M,commit_timestamp:G,eventType:H,new:{},old:{},errors:q}),this._getPayloadRecords(C))}S.callback(x,i)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const u=n.toLocaleLowerCase(),d={type:u,filter:r,callback:i};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&dc.isEqual(u.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on($t.close,{},n)}_onError(n){this._on($t.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Tm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Tm(n.columns,n.old_record)),r}}const $o=()=>{},sl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qp=[1e3,2e3,5e3,1e4],Hp=1e4,$p=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gp{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Po,this.transport=null,this.heartbeatIntervalMs=sl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$o,this.ref=0,this.reconnectTimer=null,this.logger=$o,this.conn=null,this.sendBuffer=[],this.serializer=new Up,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let d;return u?d=u:typeof fetch>"u"?d=(...f)=>xn(async()=>{const{default:g}=await Promise.resolve().then(()=>Ts);return{default:g}},void 0).then(({default:g})=>g(...f)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Wo.websocket}`,this.httpEndpoint=ag(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ap.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Np}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Rr.connecting:return yn.Connecting;case Rr.open:return yn.Open;case Rr.closing:return yn.Closing;default:return yn.Closed}}isConnected(){return this.connectionState()===yn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===i);if(u)return u;{const d=new dc(`realtime:${n}`,r,this);return this.channels.push(d),d}}push(n){const{topic:r,event:i,payload:u,ref:d}=n,f=()=>{this.encode(n,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${r} ${i} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Op,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},sl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:u,payload:d,ref:f}=r,g=f?`(${f})`:"",y=d.status||"";this.log("receive",`${y} ${i} ${u} ${g}`.trim(),d),this.channels.filter(v=>v._isMember(i)).forEach(v=>v._trigger(u,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger($t.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${i}${u}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([$p],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const u={access_token:r,version:Tp};r&&i.updateJoinPayload(u),i.joinedOnce&&i._isJoined()&&i._push($t.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new eg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,u,d,f,g,y,v,_;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Po,this.heartbeatIntervalMs=(u=n?.heartbeatIntervalMs)!==null&&u!==void 0?u:sl.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:$o,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n?.reconnectAfterMs)!==null&&y!==void 0?y:(b=>qp[b-1]||Hp),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((b,x)=>x(JSON.stringify(b))),this.decode=(_=n?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class fc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ge(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Vp extends fc{constructor(n,r,i){super(n),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fo extends fc{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var Yp=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const ng=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>xn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ts);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Qp=()=>Yp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xn(()=>Promise.resolve().then(()=>Ts),void 0)).Response:Response}),ec=o=>{if(Array.isArray(o))return o.map(r=>ec(r));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([r,i])=>{const u=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=ec(i)}),n},Kp=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var Sn=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const Go=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Xp=(o,n,r)=>Sn(void 0,void 0,void 0,function*(){const i=yield Qp();o instanceof i&&!r?.noResolveJson?o.json().then(u=>{const d=o.status||500,f=u?.statusCode||d+"";n(new Vp(Go(u),d,f))}).catch(u=>{n(new Fo(Go(u),u))}):n(new Fo(Go(o),o))}),Jp=(o,n,r,i)=>{const u={method:o,headers:n?.headers||{}};return o==="GET"||!i?u:(Kp(i)?(u.headers=Object.assign({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(i)):u.body=i,n?.duplex&&(u.duplex=n.duplex),Object.assign(Object.assign({},u),r))};function Br(o,n,r,i,u,d){return Sn(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(r,Jp(n,i,u,d)).then(y=>{if(!y.ok)throw y;return i?.noResolveJson?y:y.json()}).then(y=>f(y)).catch(y=>Xp(y,g,i))})})}function dl(o,n,r,i){return Sn(this,void 0,void 0,function*(){return Br(o,"GET",n,r,i)})}function Xt(o,n,r,i,u){return Sn(this,void 0,void 0,function*(){return Br(o,"POST",n,i,u,r)})}function tc(o,n,r,i,u){return Sn(this,void 0,void 0,function*(){return Br(o,"PUT",n,i,u,r)})}function Zp(o,n,r,i){return Sn(this,void 0,void 0,function*(){return Br(o,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function sg(o,n,r,i,u){return Sn(this,void 0,void 0,function*(){return Br(o,"DELETE",n,i,u,r)})}var Pp=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class Wp{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return Pp(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}}var Ip=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class Fp{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}asStream(){return new Wp(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.execute().then(n,r)}execute(){return Ip(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}}var dt=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const ev={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tv{constructor(n,r={},i,u){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=i,this.fetch=ng(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,i,u){return dt(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},Rm),u);let g=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const y=f.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl),y&&d.append("metadata",this.encodeMetadata(y))):(d=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,y&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),u?.headers&&(g=Object.assign(Object.assign({},g),u.headers));const v=this._removeEmptyFolders(r),_=this._getFinalPath(v),b=yield(n=="PUT"?tc:Xt)(this.fetch,`${this.url}/object/${_}`,d,Object.assign({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:v,id:b.Id,fullPath:b.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ge(d))return{data:null,error:d};throw d}})}upload(n,r,i){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,i)})}uploadToSignedUrl(n,r,i,u){return dt(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",r);try{let y;const v=Object.assign({upsert:Rm.upsert},u),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&i instanceof Blob?(y=new FormData,y.append("cacheControl",v.cacheControl),y.append("",i)):typeof FormData<"u"&&i instanceof FormData?(y=i,y.append("cacheControl",v.cacheControl)):(y=i,_["cache-control"]=`max-age=${v.cacheControl}`,_["content-type"]=v.contentType);const b=yield tc(this.fetch,g.toString(),y,{headers:_});return{data:{path:d,fullPath:b.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(Ge(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(n,r){return dt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const u=Object.assign({},this.headers);r?.upsert&&(u["x-upsert"]="true");const d=yield Xt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:u}),f=new URL(this.url+d.url),g=f.searchParams.get("token");if(!g)throw new fc("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:g},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}update(n,r,i){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,i)})}move(n,r,i){return dt(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ge(u))return{data:null,error:u};throw u}})}copy(n,r,i){return dt(this,void 0,void 0,function*(){try{return{data:{path:(yield Xt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ge(u))return{data:null,error:u};throw u}})}createSignedUrl(n,r,i){return dt(this,void 0,void 0,function*(){try{let u=this._getFinalPath(n),d=yield Xt(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ge(u))return{data:null,error:u};throw u}})}createSignedUrls(n,r,i){return dt(this,void 0,void 0,function*(){try{const u=yield Xt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),d=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ge(u))return{data:null,error:u};throw u}})}download(n,r){const u=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),f=d?`?${d}`:"",g=this._getFinalPath(n),y=()=>dl(this.fetch,`${this.url}/${u}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new Fp(y,this.shouldThrowOnError)}info(n){return dt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const i=yield dl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ec(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}exists(n){return dt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield Zp(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i)&&i instanceof Fo){const u=i.originalError;if([400,404].includes(u?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,r){const i=this._getFinalPath(n),u=[],d=r?.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&u.push(d);const g=typeof r?.transform<"u"?"render/image":"object",y=this.transformOptsToQueryString(r?.transform||{});y!==""&&u.push(y);let v=u.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${v}`)}}}remove(n){return dt(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}list(n,r,i){return dt(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},ev),r),{prefix:n||""});return{data:yield Xt(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},i),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ge(u))return{data:null,error:u};throw u}})}listV2(n,r){return dt(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield Xt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const av="2.75.0",nv={"X-Client-Info":`storage-js/${av}`};var ps=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class sv{constructor(n,r={},i,u){this.shouldThrowOnError=!1;const d=new URL(n);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nv),r),this.fetch=ng(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ps(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}getBucket(n){return ps(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}createBucket(n){return ps(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield Xt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ge(u))return{data:null,error:u};throw u}})}updateBucket(n,r){return ps(this,void 0,void 0,function*(){try{return{data:yield tc(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}emptyBucket(n){return ps(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}deleteBucket(n){return ps(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}}class rv extends sv{constructor(n,r={},i,u){super(n,r,i,u)}from(n){return new tv(this.url,this.headers,n,this.fetch)}}const iv="2.75.0";let Or="";typeof Deno<"u"?Or="deno":typeof document<"u"?Or="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Or="react-native":Or="node";const lv={"X-Client-Info":`supabase-js-${Or}/${iv}`},uv={headers:lv},ov={schema:"public"},cv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dv={};var fv=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};const hv=o=>{let n;return o?n=o:typeof fetch>"u"?n=Jm:n=fetch,(...r)=>n(...r)},mv=()=>typeof Headers>"u"?Zm:Headers,gv=(o,n,r)=>{const i=hv(r),u=mv();return(d,f)=>fv(void 0,void 0,void 0,function*(){var g;const y=(g=yield n())!==null&&g!==void 0?g:o;let v=new u(f?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${y}`),i(d,Object.assign(Object.assign({},f),{headers:v}))})};var yv=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};function pv(o){return o.endsWith("/")?o:o+"/"}function vv(o,n){var r,i;const{db:u,auth:d,realtime:f,global:g}=o,{db:y,auth:v,realtime:_,global:b}=n,x={db:Object.assign(Object.assign({},y),u),auth:Object.assign(Object.assign({},v),d),realtime:Object.assign(Object.assign({},_),f),storage:{},global:Object.assign(Object.assign(Object.assign({},b),g),{headers:Object.assign(Object.assign({},(r=b?.headers)!==null&&r!==void 0?r:{}),(i=g?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>yv(this,void 0,void 0,function*(){return""})};return o.accessToken?x.accessToken=o.accessToken:delete x.accessToken,x}function bv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const rg="2.75.0",Ss=30*1e3,ac=3,Vo=ac*Ss,_v="http://localhost:9999",xv="supabase.auth.token",wv={"X-Client-Info":`gotrue-js/${rg}`},nc="X-Supabase-Api-Version",ig={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jv=600*1e3;class Dr extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function W(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Cv extends Dr{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function Av(o){return W(o)&&o.name==="AuthApiError"}class pn extends Dr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Ya extends Dr{constructor(n,r,i,u){super(n,i,u),this.name=r,this.status=i}}class $a extends Ya{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ev(o){return W(o)&&o.name==="AuthSessionMissingError"}class vs extends Ya{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rl extends Ya{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class il extends Ya{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tv(o){return W(o)&&o.name==="AuthImplicitGrantRedirectError"}class Um extends Ya{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sc extends Ya{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Yo(o){return W(o)&&o.name==="AuthRetryableFetchError"}class km extends Ya{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class rc extends Ya{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zm=` 	
\r=`.split(""),Nv=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<zm.length;n+=1)o[zm[n].charCodeAt(0)]=-2;for(let n=0;n<fl.length;n+=1)o[fl[n].charCodeAt(0)]=n;return o})();function Dm(o,n,r){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(fl[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(fl[i]),n.queuedBits-=6}}function lg(o,n,r){const i=Nv[o];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Mm(o){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{Uv(f,i,r)};for(let f=0;f<o.length;f+=1)lg(o.charCodeAt(f),u,d);return n.join("")}function Ov(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Rv(o,n){for(let r=0;r<o.length;r+=1){let i=o.charCodeAt(r);if(i>55295&&i<=56319){const u=(i-55296)*1024&65535;i=(o.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}Ov(i,n)}}function Uv(o,n,r){if(n.utf8seq===0){if(o<=127){r(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function As(o){const n=[],r={queue:0,queuedBits:0},i=u=>{n.push(u)};for(let u=0;u<o.length;u+=1)lg(o.charCodeAt(u),r,i);return new Uint8Array(n)}function kv(o){const n=[];return Rv(o,r=>n.push(r)),new Uint8Array(n)}function vn(o){const n=[],r={queue:0,queuedBits:0},i=u=>{n.push(u)};return o.forEach(u=>Dm(u,r,i)),Dm(null,r,i),n.join("")}function zv(o){return Math.round(Date.now()/1e3)+o}function Dv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const wt=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},ug=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function Mv(o){const n={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return r.searchParams.forEach((i,u)=>{n[u]=i}),n}const og=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>xn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ts);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Bv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",js=async(o,n,r)=>{await o.setItem(n,JSON.stringify(r))},mn=async(o,n)=>{const r=await o.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ha=async(o,n)=>{await o.removeItem(n)};class gl{constructor(){this.promise=new gl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}gl.promiseConstructor=Promise;function Qo(o){const n=o.split(".");if(n.length!==3)throw new rc("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!Sv.test(n[i]))throw new rc("JWT not in base64url format");return{header:JSON.parse(Mm(n[0])),payload:JSON.parse(Mm(n[1])),signature:As(n[2]),raw:{header:n[0],payload:n[1]}}}async function Lv(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function qv(o,n){return new Promise((i,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await o(d);if(!n(d,null,f)){i(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function Hv(o){return("0"+o.toString(16)).substr(-2)}function $v(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let u="";for(let d=0;d<56;d++)u+=r.charAt(Math.floor(Math.random()*i));return u}return crypto.getRandomValues(n),Array.from(n,Hv).join("")}async function Gv(o){const r=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(i);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Vv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await Gv(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bs(o,n,r=!1){const i=$v();let u=i;r&&(u+="/PASSWORD_RECOVERY"),await js(o,`${n}-code-verifier`,u);const d=await Vv(i);return[d,i===d?"plain":"s256"]}const Yv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qv(o){const n=o.headers.get(nc);if(!n||!n.match(Yv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Kv(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function Xv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _s(o){if(!Jv.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ko(){const o={};return new Proxy(o,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bm(o){return JSON.parse(JSON.stringify(o))}var Zv=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)n.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(r[i[u]]=o[i[u]]);return r};const gn=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Pv=[502,503,504];async function Lm(o){var n;if(!Bv(o))throw new sc(gn(o),0);if(Pv.includes(o.status))throw new sc(gn(o),o.status);let r;try{r=await o.json()}catch(d){throw new pn(gn(d),d)}let i;const u=Qv(o);if(u&&u.getTime()>=ig["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new km(gn(r),o.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new $a}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new km(gn(r),o.status,r.weak_password.reasons);throw new Cv(gn(r),o.status||500,i)}const Wv=(o,n,r,i)=>{const u={method:o,headers:n?.headers||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(i),Object.assign(Object.assign({},u),r))};async function te(o,n,r,i){var u;const d=Object.assign({},i?.headers);d[nc]||(d[nc]=ig["2024-01-01"].name),i?.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const f=(u=i?.query)!==null&&u!==void 0?u:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",y=await Iv(o,n,r+g,{headers:d,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(y):{data:Object.assign({},y),error:null}}async function Iv(o,n,r,i,u,d){const f=Wv(n,i,u,d);let g;try{g=await o(r,Object.assign({},f))}catch(y){throw console.error(y),new sc(gn(y),0)}if(g.ok||await Lm(g),i?.noResolveJson)return g;try{return await g.json()}catch(y){await Lm(y)}}function Ht(o){var n;let r=null;tb(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=zv(o.expires_in)));const i=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:r,user:i},error:null}}function qm(o){const n=Ht(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=o.weak_password),n}function Ga(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function Fv(o){return{data:o,error:null}}function eb(o){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:u,verification_type:d}=o,f=Zv(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:r,hashed_token:i,redirect_to:u,verification_type:d},y=Object.assign({},f);return{data:{properties:g,user:y},error:null}}function Hm(o){return o}function tb(o){return o.access_token&&o.refresh_token&&o.expires_in}const Xo=["global","local","others"];var ab=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)n.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(r[i[u]]=o[i[u]]);return r};class nb{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=og(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Xo[0]){if(Xo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xo.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ga})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=ab(n,["options"]),u=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(u.new_email=i?.newEmail,delete u.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:eb,redirectTo:r?.redirectTo})}catch(r){if(W(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ga})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,u,d,f,g,y;try{const v={nextPage:null,lastPage:0,total:0},_=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Hm});if(_.error)throw _.error;const b=await _.json(),x=(f=_.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(y=(g=_.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return S.length>0&&(S.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(C.split(";")[1].split("=")[1]);v[`${M}Page`]=R}),v.total=parseInt(x)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(W(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){_s(n);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ga})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){_s(n);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Ga})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){_s(n);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ga})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){_s(n.userId);try{const{data:r,error:i}=await te(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:i}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteFactor(n){_s(n.userId),_s(n.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,u,d,f,g,y;try{const v={nextPage:null,lastPage:0,total:0},_=await te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Hm});if(_.error)throw _.error;const b=await _.json(),x=(f=_.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(y=(g=_.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return S.length>0&&(S.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(C.split(";")[1].split("=")[1]);v[`${M}Page`]=R}),v.total=parseInt(x)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(W(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}}function $m(o={}){return{getItem:n=>o[n]||null,setItem:(n,r)=>{o[n]=r},removeItem:n=>{delete o[n]}}}const xs={debug:!!(globalThis&&ug()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class sb extends cg{}async function rb(o,n,r){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async u=>{if(u){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await r()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(n===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new sb(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(xs.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function ib(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function dg(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function lb(o){return parseInt(o,16)}function ub(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function ob(o){var n;const{chainId:r,domain:i,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:g,requestId:y,resources:v,scheme:_,uri:b,version:x}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const S=dg(o.address),C=_?`${_}://${i}`:i,R=o.statement?`${o.statement}
`:"",M=`${C} wants you to sign in with your Ethereum account:
${S}

${R}`;let G=`URI: ${b}
Version: ${x}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(G+=`
Expiration Time: ${u.toISOString()}`),g&&(G+=`
Not Before: ${g.toISOString()}`),y&&(G+=`
Request ID: ${y}`),v){let H=`
Resources:`;for(const q of v){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);H+=`
- ${q}`}G+=H}return`${M}
${G}`}class $e extends Error{constructor({message:n,code:r,cause:i,name:u}){var d;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(d=u??(i instanceof Error?i.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class hl extends $e{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function cb({error:o,options:n}){var r,i,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new $e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new $e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((i=d.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new $e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new $e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new $e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new $e({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new $e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new $e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(hg(f)){if(d.rp.id!==f)return new $e({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new $e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new $e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new $e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new $e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function db({error:o,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new $e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new $e({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const i=window.location.hostname;if(hg(i)){if(r.rpId!==i)return new $e({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new $e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new $e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new $e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}var fg=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)n.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(r[i[u]]=o[i[u]]);return r};class fb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const hb=new fb;function mb(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:r,excludeCredentials:i}=o,u=fg(o,["challenge","user","excludeCredentials"]),d=As(n).buffer,f=Object.assign(Object.assign({},r),{id:As(r.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:d,user:f});if(i&&i.length>0){g.excludeCredentials=new Array(i.length);for(let y=0;y<i.length;y++){const v=i[y];g.excludeCredentials[y]=Object.assign(Object.assign({},v),{id:As(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return g}function gb(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:r}=o,i=fg(o,["challenge","allowCredentials"]),u=As(n).buffer,d=Object.assign(Object.assign({},i),{challenge:u});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},g),{id:As(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function yb(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:vn(new Uint8Array(o.response.attestationObject)),clientDataJSON:vn(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function pb(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,i=o.getClientExtensionResults(),u=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:vn(new Uint8Array(u.authenticatorData)),clientDataJSON:vn(new Uint8Array(u.clientDataJSON)),signature:vn(new Uint8Array(u.signature)),userHandle:u.userHandle?vn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function hg(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Gm(){var o,n;return!!(wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function vb(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new hl("Browser returned unexpected credential type",n)}:{data:null,error:new hl("Empty credential response",n)}}catch(n){return{data:null,error:cb({error:n,options:o})}}}async function bb(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new hl("Browser returned unexpected credential type",n)}:{data:null,error:new hl("Empty credential response",n)}}catch(n){return{data:null,error:db({error:n,options:o})}}}const _b={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},xb={userVerification:"preferred",hints:["security-key"]};function ml(...o){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),i={};for(const u of o)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))i[d]=f;else if(r(f))i[d]=f;else if(n(f)){const g=i[d];n(g)?i[d]=ml(g,f):i[d]=ml(f)}else i[d]=f}return i}function wb(o,n){return ml(_b,o,n||{})}function Sb(o,n){return ml(xb,o,n||{})}class jb{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:u},d){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:g};const y=u??hb.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${i}`),v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=wb(f.webauthn.credential_options.publicKey,d?.create),{data:_,error:b}=await vb({publicKey:v,signal:y});return _?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:_}},error:null}:{data:null,error:b}}case"request":{const v=Sb(f.webauthn.credential_options.publicKey,d?.request),{data:_,error:b}=await bb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:y}));return _?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:_}},error:null}:{data:null,error:b}}}}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new pn("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u}},d){if(!r)return{data:null,error:new Dr("rpId is required for WebAuthn authentication")};try{if(!Gm())return{data:null,error:new pn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:u},{request:d});if(!f)return{data:null,error:g};const{webauthn:y}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:i,credential_response:y.credential_response}})}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new pn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:u},d){if(!r)return{data:null,error:new Dr("rpId is required for WebAuthn registration")};try{if(!Gm())return{data:null,error:new pn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(_=>{var b;return(b=_.data)===null||b===void 0?void 0:b.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:g};const{data:y,error:v}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:u},{create:d});return y?this._verify({factorId:f.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:i,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:v}}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new pn("Unexpected error in register",f)}}}}ib();const Cb={url:_v,storageKey:xv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vm(o,n,r){return await r()}const ws={};class Mr{get jwks(){var n,r;return(r=(n=ws[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=ws[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{cachedAt:n})}constructor(n){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mr.nextInstanceID,Mr.nextInstanceID+=1,this.instanceID>0&&wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},Cb),n);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new nb({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=og(u.fetch),this.lock=u.lock||Vm,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:wt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=rb:this.lock=Vm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jb(this)},this.persistSession?(u.storage?this.storage=u.storage:ug()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$m(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=$m(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Mv(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),wt()&&this.detectSessionInUrl&&i!=="none"){const{data:u,error:d}=await this._getSessionFromURL(r,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Tv(d)){const y=(n=d.details)===null||n===void 0?void 0:n.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?{error:r}:{error:new pn("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,u;try{const d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Ht}),{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const y=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:v,session:y},error:null}}catch(d){if(W(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var r,i,u;try{let d;if("email"in n){const{email:_,password:b,options:x}=n;let S=null,C=null;this.flowType==="pkce"&&([S,C]=await bs(this.storage,this.storageKey)),d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:_,password:b,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:C},xform:Ht})}else if("phone"in n){const{phone:_,password:b,options:x}=n;d=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:b,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(u=x?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Ht})}else throw new rl("You must provide either an email or phone number and a password");const{data:f,error:g}=d;if(g||!f)return{data:{user:null,session:null},error:g};const y=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:v,session:y},error:null}}catch(d){if(W(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let r;if("email"in n){const{email:d,password:f,options:g}=n;r=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:qm})}else if("phone"in n){const{phone:d,password:f,options:g}=n;r=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:qm})}else throw new rl("You must provide either an email or phone number and a password");const{data:i,error:u}=r;return u?{data:{user:null,session:null},error:u}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new vs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:u})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,i,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,u,d,f,g,y,v,_,b,x;let S,C;if("message"in n)S=n.message,C=n.signature;else{const{chain:R,wallet:M,statement:G,options:H}=n;let q;if(wt())if(typeof M=="object")q=M;else{const Ee=window;if("ethereum"in Ee&&typeof Ee.ethereum=="object"&&"request"in Ee.ethereum&&typeof Ee.ethereum.request=="function")q=Ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!H?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=M}const V=new URL((r=H?.url)!==null&&r!==void 0?r:window.location.href),F=await q.request({method:"eth_requestAccounts"}).then(Ee=>Ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=dg(F[0]);let ee=(i=H?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ee){const Ee=await q.request({method:"eth_chainId"});ee=lb(Ee)}const ce={domain:V.host,address:$,statement:G,uri:V.href,version:"1",chainId:ee,nonce:(u=H?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=H?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=H?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=H?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(v=H?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(_=H?.signInWithEthereum)===null||_===void 0?void 0:_.resources};S=ob(ce),C=await q.request({method:"personal_sign",params:[ub(S),$]})}try{const{data:R,error:M}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:C},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ht});if(M)throw M;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new vs}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:M})}catch(R){if(W(R))return{data:{user:null,session:null},error:R};throw R}}async signInWithSolana(n){var r,i,u,d,f,g,y,v,_,b,x,S;let C,R;if("message"in n)C=n.message,R=n.signature;else{const{chain:M,wallet:G,statement:H,options:q}=n;let V;if(wt())if(typeof G=="object")V=G;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))V=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=G}const F=new URL((r=q?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in V&&V.signIn){const $=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),H?{statement:H}:null));let ee;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")ee=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)ee=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)C=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),R=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${F.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(u=(i=q?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=q?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((f=q?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((g=q?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((y=q?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((v=q?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((b=(_=q?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||b===void 0)&&b.length?["Resources",...q.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const $=await V.signMessage(new TextEncoder().encode(C),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=$}}try{const{data:M,error:G}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:vn(R)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Ht});if(G)throw G;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new vs}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:G})}catch(M){if(W(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(n){const r=await mn(this.storage,`${this.storageKey}-code-verifier`),[i,u]=(r??"").split("/");try{const{data:d,error:f}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Ht});if(await Ha(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new vs}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(W(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:r,provider:i,token:u,access_token:d,nonce:f}=n,g=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ht}),{data:y,error:v}=g;return v?{data:{user:null,session:null},error:v}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new vs}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:v})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,i,u,d,f;try{if("email"in n){const{email:g,options:y}=n;let v=null,_=null;this.flowType==="pkce"&&([v,_]=await bs(this.storage,this.storageKey));const{error:b}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=y?.data)!==null&&r!==void 0?r:{},create_user:(i=y?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:v,code_challenge_method:_},redirectTo:y?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:g,options:y}=n,{data:v,error:_}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=y?.data)!==null&&u!==void 0?u:{},create_user:(d=y?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(f=y?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:_}}throw new rl("You must provide either an email or phone number.")}catch(g){if(W(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(n){var r,i;try{let u,d;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,d=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:g}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:Ht});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const y=f.session,v=f.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:v,session:y},error:null}}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(n){var r,i,u;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await bs(this.storage,this.storageKey)),await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Fv})}catch(d){if(W(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new $a;const{error:u}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:u}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:u,options:d}=n,{error:f}=await te(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:u,options:d}=n,{data:f,error:g}=await te(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new rl("You must provide either an email or phone number and a type")}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Vo:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await mn(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Ko()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(y,v,_)=>(!f&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,v,_))})}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ga}):await this._useSession(async r=>{var i,u,d;const{data:f,error:g}=r;if(g)throw g;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $a}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:Ga})})}catch(r){if(W(r))return Ev(r)&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:u,error:d}=i;if(d)throw d;if(!u.session)throw new $a;const f=u.session;let g=null,y=null;this.flowType==="pkce"&&n.email!=null&&([g,y]=await bs(this.storage,this.storageKey));const{data:v,error:_}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:y}),jwt:f.access_token,xform:Ga});if(_)throw _;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new $a;const r=Date.now()/1e3;let i=r,u=!0,d=null;const{payload:f}=Qo(n.access_token);if(f.exp&&(i=f.exp,u=i<=r),u){const{data:g,error:y}=await this._callRefreshToken(n.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:y}=await this._getUser(n.access_token);if(y)throw y;d={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(r){if(W(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:g}=r;if(g)throw g;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new $a;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!wt())throw new il("No browser detected.");if(n.error||n.error_description||n.error_code)throw new il(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Um("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new il("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Um("No code detected.");const{data:H,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:g,expires_at:y,token_type:v}=n;if(!d||!g||!f||!v)throw new il("No session defined in URL");const _=Math.round(Date.now()/1e3),b=parseInt(g);let x=_+b;y&&(x=parseInt(y));const S=x-_;S*1e3<=Ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${b}s`);const C=x-b;_-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,x,_):_-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,x,_);const{data:R,error:M}=await this._getUser(d);if(M)throw M;const G={provider_token:i,provider_refresh_token:u,access_token:d,expires_in:b,expires_at:x,refresh_token:f,token_type:v,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:G,redirectType:n.type},error:null}}catch(i){if(W(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await mn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:u,error:d}=r;if(d)return{error:d};const f=(i=u.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:g}=await this.admin.signOut(f,n);if(g&&!(Av(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return n!=="others"&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Dv(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,u;try{const{data:{session:d},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,r={}){let i=null,u=null;this.flowType==="pkce"&&([i,u]=await bs(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(W(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:u}=await this._useSession(async d=>{var f,g,y,v,_;const{data:b,error:x}=d;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",S,{headers:this.headers,jwt:(_=(v=b.session)===null||v===void 0?void 0:v.access_token)!==null&&_!==void 0?_:void 0})});if(u)throw u;return wt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(W(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:u,data:{session:d}}=r;if(u)throw u;const{options:f,provider:g,token:y,access_token:v,nonce:_}=n,b=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=d?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:g,id_token:y,access_token:v,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ht}),{data:x,error:S}=b;return S?{data:{user:null,session:null},error:S}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new vs}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:S})}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,u;const{data:d,error:f}=r;if(f)throw f;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await qv(async u=>(u>0&&await Lv(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ht})),(u,d)=>{const f=200*Math.pow(2,u);return d&&Yo(d)&&Date.now()+f-i<Ss})}catch(i){if(this._debug(r,"error",i),W(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),wt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const u=await mn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await js(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f?.user)!==null&&n!==void 0?n:Ko()}else if(u&&!u.user&&!u.user){const f=await mn(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await Ha(this.storage,this.storageKey+"-user"),await js(this.storage,this.storageKey,u)):u.user=Ko()}if(this._debug(i,"session from storage",u),!this._isValidSession(u)){this._debug(i,"session is not valid"),u!==null&&await this._removeSession();return}const d=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vo;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${Vo}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Yo(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(i,"error",u),console.error(u);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new $a;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new gl;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new $a;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(u,"error",d),W(d)){const f={data:null,error:d};return Yo(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,i=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,r)}catch(y){d.push(y)}});if(await Promise.all(f),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await js(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const d=Bm(u);await js(this.storage,this.storageKey,d)}else{const u=Bm(r);await js(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await Ha(this.storage,this.storageKey),await Ha(this.storage,this.storageKey+"-code-verifier"),await Ha(this.storage,this.storageKey+"-user"),this.userStorage&&await Ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&wt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ss);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((i.expires_at*1e3-n)/Ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Ss}ms, refresh threshold is ${ac} ticks`),u<=ac&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof cg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const u=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&u.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,f]=await bs(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(i?.queryParams){const d=new URLSearchParams(i.queryParams);u.push(d.toString())}return i?.skipBrowserRedirect&&u.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:u,error:d}=r;return d?{data:null,error:d}:await te(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,u;const{data:d,error:f}=r;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:y,error:v}=await te(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=d?.session)===null||i===void 0?void 0:i.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&y.type==="totp"&&(!((u=y?.totp)===null||u===void 0)&&u.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:u,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?yb(n.webauthn.credential_response):pb(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:y}=await te(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:y})})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:u,error:d}=r;if(d)return{data:null,error:d};const f=await te(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:mb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:gb(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=r?.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,i;const{data:{session:u},error:d}=n;if(d)return{data:null,error:d};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Qo(u.access_token);let g=null;f.aal&&(g=f.aal);let y=g;((i=(r=u.user.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(y="aal2");const _=f.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:_},error:null}}))}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(g=>g.kid===n);if(i)return i;const u=Date.now();if(i=this.jwks.keys.find(g=>g.kid===n),i&&this.jwks_cached_at+jv>u)return i;const{data:d,error:f}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,i=d.keys.find(g=>g.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:S,error:C}=await this.getSession();if(C||!S.session)return{data:null,error:C};i=S.session.access_token}const{header:u,payload:d,signature:f,raw:{header:g,payload:y}}=Qo(i);r?.allowExpired||Kv(d.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!v){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:d,header:u,signature:f},error:null}}const _=Xv(u.alg),b=await crypto.subtle.importKey("jwk",v,_,!0,["verify"]);if(!await crypto.subtle.verify(_,b,f,kv(`${g}.${y}`)))throw new rc("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}}Mr.nextInstanceID=0;const Ab=Mr;class Eb extends Ab{constructor(n){super(n)}}var Tb=function(o,n,r,i){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(_){try{v(i.next(_))}catch(b){f(b)}}function y(_){try{v(i.throw(_))}catch(b){f(b)}}function v(_){_.done?d(_.value):u(_.value).then(g,y)}v((i=i.apply(o,n||[])).next())})};class Nb{constructor(n,r,i){var u,d,f;this.supabaseUrl=n,this.supabaseKey=r;const g=bv(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const y=`sb-${g.hostname.split(".")[0]}-auth-token`,v={db:ov,realtime:dv,auth:Object.assign(Object.assign({},cv),{storageKey:y}),global:uv},_=vv(i??{},v);this.storageKey=(u=_.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=_.global.headers)!==null&&d!==void 0?d:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=_.auth)!==null&&f!==void 0?f:{},this.headers,_.global.fetch),this.fetch=gv(r,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new Cp(new URL("rest/v1",g).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new rv(this.storageUrl.href,this.headers,this.fetch,i?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new gp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,i)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Tb(this,void 0,void 0,function*(){var n,r;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:u,userStorage:d,storageKey:f,flowType:g,lock:y,debug:v},_,b){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Eb({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),_),storageKey:f,autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:u,userStorage:d,flowType:g,lock:y,debug:v,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Gp(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(n,r,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ob=(o,n,r)=>new Nb(o,n,r);function Rb(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Rb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ub="https://xtdudfccgbdanmmncwhn.supabase.co",kb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",oe=Ob(Ub,kb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class zb{createUserFromProfileData(n,r){return{id:n.id,email:n.email||"",displayName:r?.display_name||n.user_metadata?.display_name||n.email?.split("@")[0],username:r?.username||n.user_metadata?.username||n.email?.split("@")[0],profileCompleted:r?.profile_completed||!!n.user_metadata?.profile_completed,createdAt:new Date(n.created_at)}}async mapAuthUserToUser(n){try{const{data:r}=await oe.from("user_profiles").select("display_name, username, profile_completed").eq("id",n.id).single();return r&&typeof r=="object"?this.createUserFromProfileData(n,r):this.createUserFromProfileData(n)}catch{return this.createUserFromProfileData(n)}}async getCurrentUser(){try{const{data:{user:n},error:r}=await oe.auth.getUser();return r||!n?null:await this.mapAuthUserToUser(n)}catch{return null}}async signIn(n,r){try{const{data:i,error:u}=await oe.auth.signInWithPassword({email:n,password:r});return u?{success:!1,error:u.message}:{success:!0,data:{id:i.user.id,email:i.user.email||"",displayName:i.user.user_metadata?.display_name,createdAt:new Date(i.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(n,r){try{const i=`${window.location.origin}${window.location.pathname}`,{data:u,error:d}=await oe.auth.signUp({email:n,password:r,options:{emailRedirectTo:i}});return d?{success:!1,error:d.message}:u.user?{success:!0,data:{id:u.user.id,email:u.user.email||"",displayName:u.user.user_metadata?.display_name,createdAt:new Date(u.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:n}=await oe.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(n){const{data:{subscription:r}}=oe.auth.onAuthStateChange(async(i,u)=>{if(u?.user){const d=await this.mapAuthUserToUser(u.user);n(d)}else n(null)});return()=>r.unsubscribe()}async completeProfile(n,r,i){try{const{error:u}=await oe.from("user_profiles").update({display_name:r,username:i,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",n);if(u)return u.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:u.message};const{data:d,error:f}=await oe.auth.updateUser({data:{display_name:r,username:i,profile_completed:!0}});return f?{success:!1,error:f.message}:{success:!0,data:{id:d.user.id,email:d.user.email||"",displayName:r,username:i,profileCompleted:!0,createdAt:new Date(d.user.created_at)}}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Failed to complete profile"}}}buildProfileUpdates(n,r){const i={updated_at:new Date().toISOString()};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}buildAuthUpdates(n,r){const i={};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}async updateProfile(n,r,i){try{const u=this.buildProfileUpdates(r,i),{error:d}=await oe.from("user_profiles").update(u).eq("id",n);if(d)return d.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:d.message};const f=this.buildAuthUpdates(r,i),{data:g,error:y}=await oe.auth.updateUser({data:f});if(y)return{success:!1,error:y.message};const{data:v}=await oe.from("user_profiles").select("*").eq("id",n).single(),_=v;return{success:!0,data:{id:g.user.id,email:g.user.email||"",displayName:_?.display_name||g.user.user_metadata?.display_name,username:_?.username||g.user.user_metadata?.username,profileCompleted:_?.profile_completed||g.user.user_metadata?.profile_completed||!1,createdAt:new Date(g.user.created_at)}}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Failed to update profile"}}}async changePassword(n,r,i){try{const{data:u}=await oe.auth.getUser();if(!u.user?.email)return{success:!1,error:"User not found"};const{error:d}=await oe.auth.signInWithPassword({email:u.user.email,password:r});if(d)return{success:!1,error:"Current password is incorrect"};const{error:f}=await oe.auth.updateUser({password:i});return f?{success:!1,error:f.message}:{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Failed to change password"}}}async deleteAccount(n){try{const{error:r}=await oe.from("user_profiles").delete().eq("id",n);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class mg{async getCampaigns(n){try{const{data:r,error:i}=await oe.from("campaigns").select(`
          *,
          campaign_members!inner(
            role,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",n).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(d=>({id:d.id,name:d.name,description:d.description||void 0,createdBy:d.created_by,createdAt:new Date(d.created_at),updatedAt:new Date(d.updated_at),userRole:d.campaign_members[0]?.role,memberCount:d.member_count?.[0]?.count||0,isOwner:d.created_by===n}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(n){try{const{data:r,error:i}=await oe.from("campaigns").select("*").eq("id",n).single();return i?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(n,r){try{const{data:i,error:u}=await oe.from("campaigns").insert({name:r.name,description:r.description,created_by:n}).select().single();if(u)return{success:!1,error:`Failed to create campaign: ${u.message}`};const{error:d}=await oe.from("campaign_members").insert({campaign_id:i.id,user_id:n,role:"admin"});return d?(await oe.from("campaigns").delete().eq("id",i.id),{success:!1,error:`Failed to set up campaign membership: ${d.message}`}):{success:!0,data:{id:i.id,name:i.name,description:i.description||void 0,createdBy:i.created_by,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(n,r){try{const{error:i}=await oe.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",n);return i?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(n){try{const{error:r}=await oe.from("campaigns").delete().eq("id",n);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(n){try{const{data:r,error:i}=await oe.from("campaign_members").select("id, user_id, role, created_at").eq("campaign_id",n).order("created_at",{ascending:!0});return i?{success:!1,error:"Failed to fetch campaign members"}:{success:!0,data:r.map(d=>({id:d.id,userId:d.user_id,email:`user_${d.user_id.slice(0,8)}@example.com`,displayName:void 0,role:d.role,joinedAt:new Date(d.created_at)}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(n,r,i){try{const{data:u,error:d}=await oe.from("user_profiles").select("id").eq("email",r).single();if(d||!u)return{success:!1,error:"User not found with that email address"};const{data:f}=await oe.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",u.id).single();if(f)return{success:!1,error:"User is already a member of this campaign"};const{error:g}=await oe.from("campaign_members").insert({campaign_id:n,user_id:u.id,role:i});return g?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(n,r,i){try{const{error:u}=await oe.from("campaign_members").update({role:i}).eq("campaign_id",n).eq("user_id",r);return u?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(n,r){try{const{error:i}=await oe.from("campaign_members").delete().eq("campaign_id",n).eq("user_id",r);return i?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(n,r){try{const{data:i,error:u}=await oe.from("campaign_members").select("role").eq("campaign_id",n).eq("user_id",r).single();return u||!i?{success:!1,error:"User is not a member of this campaign"}:{success:!0,data:i.role}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(n,r){try{const{data:i,error:u}=await oe.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",r).single();return u?{success:!0,data:!1}:{success:!0,data:!!i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(n){try{const{data:r,error:i}=await oe.from("characters").select("*").eq("campaign_id",n).order("created_at",{ascending:!0});return i?{success:!1,error:i.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(n,r,i,u,d){try{const{data:f,error:g}=await oe.from("characters").insert({campaign_id:n,name:i,player_name:u,character_name:d,owner_id:r}).select().single();return g?{success:!1,error:g.message}:{success:!0,data:f}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(n,r){try{const{data:i,error:u}=await oe.from("characters").select("*, campaigns!inner(created_by)").eq("id",n).single();if(u)return{success:!1,error:"Character not found"};if(i.owner_id!==r&&i.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:d}=await oe.from("characters").delete().eq("id",n);return d?{success:!1,error:d.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class bn{static instance;_authRepository;_campaignRepository;_authService;_campaignService;constructor(){this._authRepository=new zb,this._campaignRepository=new mg,this._authService=new op(this._authRepository),this._campaignService=new cp(this._campaignRepository,this._authRepository)}static getInstance(){return bn.instance||(bn.instance=new bn),bn.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}}function Db(){return bn.getInstance().authService}function gg(){return bn.getInstance().campaignService}const yl=()=>{const[o,n]=B.useState(null),[r,i]=B.useState(!0),u=Db();return B.useEffect(()=>((async()=>{const C=await u.getCurrentUser();console.log("useAuth: getCurrentUser result:",C),n(C),i(!1)})(),u.onAuthStateChange(C=>{console.log("useAuth: onAuthStateChange triggered with user:",C),n(C),i(!1)})),[u]),{user:o,loading:r,signIn:async(x,S)=>{const C=await u.signIn(x,S);return C.success&&C.data?(n(C.data),{success:!0}):{success:!1,error:C.error}},signUp:async(x,S)=>{const C=await u.signUp(x,S);return C.success&&C.data?(n(C.data),{success:!0}):{success:!1,error:C.error}},signOut:async()=>{const x=await u.signOut();return x.success?(n(null),{success:!0}):{success:!1,error:x.error}},completeProfile:async x=>{const S=await u.completeProfile(x);return S.success&&S.data?(n(S.data),{success:!0,user:S.data}):{success:!1,error:S.error}},updateProfile:async x=>{const S=await u.updateProfile(x);return S.success&&S.data?(n(S.data),{success:!0,user:S.data}):{success:!1,error:S.error}},changePassword:async x=>{const S=await u.changePassword(x);return S.success?{success:!0}:{success:!1,error:S.error}},deleteAccount:async()=>{const x=await u.deleteAccount();return x.success?(n(null),{success:!0}):{success:!1,error:x.error}}}};function ge({variant:o="default",size:n="md",className:r="",children:i,...u}){const f={default:"",primary:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",danger:"bg-red-600 hover:bg-red-700 text-white border-red-600",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"},g={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},y=["btn",f[o],g[n],r].filter(Boolean).join(" ");return h.jsx("button",{className:y,...u,children:i})}function Mb({icon:o,variant:n="default",className:r="",...i}){const u={default:"btn p-2",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"};return h.jsx("button",{className:`${u[n]} ${r}`,...i,children:o})}const X=B.forwardRef(({label:o,type:n="text",className:r,required:i=!1,error:u,...d},f)=>{const g="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",y=`input w-full ${u?"border-red-500 focus:border-red-500":""}`,v=()=>{if(n==="textarea"){const b=d;return h.jsx("textarea",{ref:f,className:r||y,required:i,...b})}if(n==="select"){const{children:b,...x}=d;return h.jsx("select",{ref:f,className:r||"select",required:i,...x,children:b})}const _=d;return h.jsx("input",{ref:f,type:n,step:n==="number"?"1":void 0,className:r||y,required:i,..._})};return h.jsxs("div",{children:[o&&h.jsxs("label",{className:g,children:[o," ",i&&"*"]}),v(),u&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u})]})});X.displayName="FormField";function Bb(){const[o,n]=B.useState("sign_in"),[r,i]=B.useState(""),[u,d]=B.useState(""),[f,g]=B.useState(!1),[y,v]=B.useState(""),{signIn:_,signUp:b}=yl(),x=async C=>{C.preventDefault(),g(!0),v("");try{let R;o==="sign_up"?(R=await b(r,u),R.success?v("Check your email for the confirmation link!"):v(R.error||"Sign up failed")):(R=await _(r,u),R.success||v(R.error||"Sign in failed"))}catch(R){v(R instanceof Error?R.message:"An error occurred")}finally{g(!1)}},S=()=>f?"Loading...":o==="sign_in"?"Sign In":"Sign Up";return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:o==="sign_in"?"Welcome Back":"Create Account"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:o==="sign_in"?"Sign in to your account":"Create a new account"})]}),h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[h.jsx("button",{type:"button",onClick:()=>n("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),h.jsx("button",{type:"button",onClick:()=>n("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),h.jsxs("form",{className:"space-y-4",onSubmit:x,children:[h.jsx(X,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:r,onChange:C=>i(C.target.value),placeholder:"Enter your email"}),h.jsx(X,{label:"Password",type:"password",autoComplete:o==="sign_up"?"new-password":"current-password",required:!0,value:u,onChange:C=>d(C.target.value),placeholder:"Enter your password"}),y&&h.jsx("div",{className:`p-3 rounded-xl text-sm ${y.includes("error")||y.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:y}),h.jsx(ge,{type:"submit",disabled:f,variant:"primary",className:"w-full justify-center py-3",children:S()})]})]})]})})]})}const Lb=o=>{const n=[];let r="weak";o.length<8&&n.push("Password must be at least 8 characters long");const i=/[a-z]/.test(o),u=/[A-Z]/.test(o),d=/\d/.test(o),f=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);i||n.push("Password must contain at least one lowercase letter"),u||n.push("Password must contain at least one uppercase letter"),d||n.push("Password must contain at least one number"),f||n.push("Password must contain at least one special character");const g=[i,u,d,f].filter(Boolean).length;let y=0;o.length>=12?y=2:o.length>=8&&(y=1);const v=g+y;return v>=5?r="strong":v>=3&&(r="medium"),{isValid:n.length===0,errors:n,strength:r}},qb=o=>{switch(o){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},Hb=o=>{switch(o){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},$b=o=>o.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:o.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(o)?/^[_-]|[_-]$/.test(o)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function Gb({onComplete:o,loading:n=!1}){const[r,i]=B.useState(""),[u,d]=B.useState(""),[f,g]=B.useState({}),[y,v]=B.useState(!1),_=()=>{const S={};if(r.trim()?r.trim().length<2?S.displayName="Name must be at least 2 characters long":r.trim().length>50&&(S.displayName="Name must be less than 50 characters long"):S.displayName="Name is required",!u.trim())S.username="Username is required";else{const C=$b(u.trim());C.isValid||(S.username=C.error||"Invalid username")}return g(S),Object.keys(S).length===0},b=async S=>{if(S.preventDefault(),!!_()){v(!0);try{const C=await o({displayName:r.trim(),username:u.trim().toLowerCase()});!C.success&&C.error&&(C.error.toLowerCase().includes("username")?g({username:C.error}):g({general:C.error}))}catch{g({general:"An unexpected error occurred. Please try again."})}finally{v(!1)}}},x=r.trim()&&u.trim()&&Object.keys(f).length===0;return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Complete Your Profile"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up your profile to start using Traveller Dashboard"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:h.jsx(ol,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:"Welcome to Traveller Dashboard"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Let's set up your profile to get started"})]}),h.jsx("div",{className:"card",children:h.jsxs("form",{className:"space-y-4",onSubmit:b,children:[h.jsxs("div",{children:[h.jsx(X,{label:"Your Name",type:"text",required:!0,value:r,onChange:S=>{i(S.target.value),f.displayName&&g(C=>({...C,displayName:""}))},placeholder:"Enter your first name or full name",error:f.displayName}),h.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This is how other players will see you in campaigns"})]}),h.jsxs("div",{children:[h.jsx(X,{label:"Username",type:"text",required:!0,value:u,onChange:S=>{d(S.target.value),f.username&&g(C=>({...C,username:""}))},placeholder:"Choose a unique username",error:f.username}),h.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),f.general&&h.jsx("div",{className:"p-3 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",children:f.general}),h.jsx(ge,{type:"submit",disabled:!x||y||n,variant:"primary",className:"w-full justify-center py-3",children:y||n?"Setting up...":"Complete Profile"})]})}),h.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:h.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const Vb=()=>{const[o,n]=B.useState([]),[r,i]=B.useState(!0),[u,d]=B.useState(null),f=gg(),g=B.useCallback(async()=>{try{i(!0),d(null);const b=await f.getCampaigns();b.success&&b.data?n(b.data):d(b.error||"Failed to fetch campaigns")}catch{d("An unexpected error occurred")}finally{i(!1)}},[f]),y=async b=>{try{d(null);const x=await f.createCampaign(b);return x.success?(await g(),{success:!0}):(d(x.error||"Failed to create campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return d(x),{success:!1,error:x}}},v=async(b,x)=>{try{d(null);const S=await f.updateCampaign(b,x);return S.success?(await g(),{success:!0}):(d(S.error||"Failed to update campaign"),{success:!1,error:S.error})}catch{const S="An unexpected error occurred";return d(S),{success:!1,error:S}}},_=async b=>{try{d(null);const x=await f.deleteCampaign(b);return x.success?(await g(),{success:!0}):(d(x.error||"Failed to delete campaign"),{success:!1,error:x.error})}catch{const x="An unexpected error occurred";return d(x),{success:!1,error:x}}};return B.useEffect(()=>{g()},[g]),{campaigns:o,loading:r,error:u,fetchCampaigns:g,createCampaign:y,updateCampaign:v,deleteCampaign:_}};function wn(o){const[n,r]=B.useState([]),[i,u]=B.useState(!1),[d,f]=B.useState(null),g=B.useMemo(()=>new mg,[]),y=B.useCallback(async b=>{if(b){u(!0),f(null);try{const x=await g.getCharactersByCampaign(b);if(x.success&&x.data&&x.data.length>0){const S=x.data.map(C=>({id:C.id,campaignId:C.campaign_id,displayName:C.name,playerName:C.player_name||"",characterName:C.character_name||"",ownerId:C.owner_id}));r(S)}else r([])}catch{r([]),f("Database connection failed - no characters available")}finally{u(!1)}}},[g]),v=B.useCallback(async(b,x,S)=>{if(!o)return{success:!1,error:"No campaign selected"};try{const C=`${b}  ${x}`,R=await g.createCharacterForCampaign(o,S,C,b,x);if(R.success&&R.data){const M={id:R.data.id,campaignId:R.data.campaign_id,displayName:R.data.name,playerName:b,characterName:x,ownerId:R.data.owner_id};return r(G=>[...G,M]),{success:!0,data:M}}return{success:!1,error:R.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[o,g]),_=B.useCallback(async(b,x)=>{try{const S=await g.deleteCharacter(b,x);return S.success?(r(C=>C.filter(R=>R.id!==b)),{success:!0}):{success:!1,error:S.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[g]);return B.useEffect(()=>{o?y(o):r([])},[o,y]),{characters:n,loading:i,error:d,createCharacter:v,deleteCharacter:_,refreshCharacters:()=>o&&y(o)}}const Yb=()=>{const[o,n]=B.useState([]),[r,i]=B.useState(!1),[u,d]=B.useState(null),f=gg(),g=async b=>{try{i(!0),d(null);const x=await f.getCampaignMembers(b);if(x.success&&x.data)return n(x.data),{success:!0,data:x.data};const S=x.error||"Failed to fetch members";return d(S),{success:!1,error:S}}catch{const x="An unexpected error occurred";return d(x),{success:!1,error:x}}finally{i(!1)}};return{members:o,loading:r,error:u,fetchMembers:g,addMemberByEmail:async(b,x,S)=>{try{d(null);const C=await f.addMemberByEmail(b,x,S);if(C.success)return await g(b),{success:!0};const R=C.error||"Failed to add member";return d(R),{success:!1,error:R}}catch{const C="An unexpected error occurred";return d(C),{success:!1,error:C}}},updateMemberRole:async(b,x,S)=>{try{d(null);const C=await f.updateMemberRole(b,x,S);if(C.success)return await g(b),{success:!0};const R=C.error||"Failed to update member role";return d(R),{success:!1,error:R}}catch{const C="An unexpected error occurred";return d(C),{success:!1,error:C}}},removeMember:async(b,x)=>{try{d(null);const S=await f.removeMember(b,x);if(S.success)return await g(b),{success:!0};const C=S.error||"Failed to remove member";return d(C),{success:!1,error:C}}catch{const S="An unexpected error occurred";return d(S),{success:!1,error:S}}}}};function Gt({isOpen:o,onClose:n,title:r,children:i,maxWidth:u="md"}){if(B.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),B.useEffect(()=>{const f=g=>{g.key==="Escape"&&n()};if(o)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[o,n]),!o)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f=>{f.target===f.currentTarget&&n()},children:h.jsxs("div",{className:`card w-full ${d[u]}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:r}),h.jsx(Mb,{icon:h.jsx(Hy,{size:20}),onClick:n,"aria-label":"Close modal"})]}),i]})})}function _n({onCancel:o,onConfirm:n,confirmText:r="Confirm",cancelText:i="Cancel",confirmVariant:u="primary",confirmDisabled:d=!1,confirmType:f="button",isLoading:g=!1,children:y}){return y?h.jsx("div",{className:"flex gap-2 mt-6",children:y}):h.jsxs("div",{className:"flex gap-2 mt-6",children:[o&&h.jsx(ge,{onClick:o,variant:"ghost",className:"flex-1 justify-center",disabled:g,children:i}),(n||f==="submit")&&h.jsx(ge,{onClick:f==="submit"?void 0:n,variant:u,className:"flex-1 justify-center",disabled:g||d,type:f,children:r})]})}function Qb({size:o="md",className:n=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return h.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[o]} ${n}`,role:"status","aria-label":"Loading"})}function Kb({message:o="Loading..."}){return h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[h.jsx(Qb,{size:"lg",className:"mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:o})]})}function Xb({campaign:o,onUpdateCampaign:n,onDeleteCampaign:r,onGetMembers:i,onRemoveMember:u,onClose:d}){const[f,g]=B.useState(!1),[y,v]=B.useState(!1),[_,b]=B.useState(!1),[x,S]=B.useState([]),[C,R]=B.useState(!1),[M,G]=B.useState(o.name),[H,q]=B.useState(o.description||""),[V,F]=B.useState(!1),[$,ee]=B.useState(!1),ce=async P=>{if(P.preventDefault(),!!M.trim())try{F(!0),await n(o.id,{name:M,description:H||null}),g(!1)}finally{F(!1)}},Ee=async()=>{try{ee(!0),await r(o.id),v(!1),d?.()}finally{ee(!1)}},Ze=async()=>{try{R(!0);const P=await i(o.id);P&&S(P),b(!0)}finally{R(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:o.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o.description||"No description provided"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),h.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[o.member_count||0," member(s)"]})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(ge,{onClick:()=>g(!0),className:"flex items-center gap-2 justify-center",children:[h.jsx(lc,{className:"w-4 h-4"}),"Edit Campaign"]}),h.jsxs(ge,{onClick:Ze,disabled:C,className:"flex items-center gap-2 justify-center",children:[h.jsx(zr,{className:"w-4 h-4"}),C?"Loading...":"Manage Members"]})]})]}),h.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[h.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),h.jsxs(ge,{onClick:()=>v(!0),variant:"danger",className:"flex items-center gap-2",children:[h.jsx(uc,{className:"w-4 h-4"}),"Delete Campaign"]})]}),h.jsx(Gt,{isOpen:f,onClose:()=>g(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),h.jsx("input",{type:"text",value:M,onChange:P=>G(P.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:H,onChange:P=>q(P.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(_n,{onCancel:()=>g(!1),cancelText:"Cancel",confirmText:V?"Updating...":"Update",confirmDisabled:V||!M.trim(),confirmType:"submit",isLoading:V})]})}),h.jsxs(Gt,{isOpen:y,onClose:()=>v(!1),title:"Delete Campaign",children:[h.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',o.name,'"? This action cannot be undone and will remove all campaign data and members.']}),h.jsx(_n,{onCancel:()=>v(!1),onConfirm:Ee,cancelText:"Cancel",confirmText:$?"Deleting...":"Delete",confirmVariant:"danger",isLoading:$})]}),h.jsx(Gt,{isOpen:_,onClose:()=>b(!1),title:"Campaign Members",maxWidth:"lg",children:h.jsxs("div",{className:"space-y-4",children:[x.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):h.jsx("div",{className:"space-y-3",children:x.map(P=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:P.user_profiles.display_name||"No Name"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.user_profiles.email})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:P.role}),P.role!=="admin"&&h.jsx(ge,{size:"sm",variant:"danger",onClick:()=>u(o.id,P.user_id),children:"Remove"})]})]},P.id))}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:h.jsxs(ge,{variant:"primary",className:"w-full justify-center",disabled:!0,title:"Feature coming soon",children:[h.jsx(ol,{className:"w-4 h-4"}),"Add Member (Coming Soon)"]})})]})})]})}function Jb(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Zb({campaign:o,onViewCampaign:n,onDeleteCharacter:r}){const{characters:i,loading:u,error:d}=wn(o.id);return u?h.jsxs("div",{className:"animate-pulse p-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):d?h.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",d]}):h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:o.name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," character(s)"]})]}),o.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Jb(o.userRole)}`,children:o.userRole.toUpperCase()})]}),i.length===0?h.jsxs("div",{className:"text-center py-6",children:[h.jsx(zr,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):h.jsx("div",{className:"space-y-3 mb-4",children:i.map(f=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:f.displayName}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",f.playerName]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ge,{size:"sm",onClick:()=>n(o.id),title:"View character details in campaign",children:h.jsx(lc,{className:"w-4 h-4"})}),h.jsx(ge,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>r(f.id,f.displayName,o.id),children:h.jsx(uc,{className:"w-4 h-4"})})]})]},f.id))}),h.jsx("div",{className:"flex gap-2",children:h.jsxs(ge,{onClick:()=>n(o.id),className:"flex items-center gap-2 flex-1",children:[h.jsx(zr,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function Pb({campaigns:o,onViewCampaign:n}){const{user:r}=yl(),[i,u]=B.useState(!1),[d,f]=B.useState(""),[g,y]=B.useState(""),[v,_]=B.useState(""),[b,x]=B.useState(!1),[S,C]=B.useState(null),[R,M]=B.useState(!1),[G,H]=B.useState(null),[q,V]=B.useState(!1),{createCharacter:F}=wn(d||""),{deleteCharacter:$}=wn(G?.campaignId||""),ee=o.filter(P=>P.memberCount&&P.memberCount>0),ce=async P=>{if(P.preventDefault(),!(!g.trim()||!v.trim()||!d))try{x(!0),C(null);const ye=await F(g.trim(),v.trim(),"");ye.success?(y(""),_(""),f(""),u(!1)):C(ye.error||"Failed to create character")}finally{x(!1)}},Ee=(P,ye,zt)=>{H({id:P,name:ye,campaignId:zt}),M(!0)},Ze=async()=>{if(!(!G||!r))try{V(!0);const P=await $(G.id,r.id);P.success?(M(!1),H(null)):C(P.error||"Failed to delete character")}finally{V(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:ee.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ee.reduce((P,ye)=>P+(ye.memberCount||0),0)}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(ge,{onClick:()=>u(!0),disabled:o.length===0,className:"flex items-center gap-2 justify-center",children:[h.jsx(ol,{className:"w-4 h-4"}),"Create New Character"]}),h.jsxs(ge,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[h.jsx(lc,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),o.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),ee.length===0?h.jsxs("div",{className:"card text-center py-8",children:[h.jsx(zr,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),h.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),h.jsxs(ge,{onClick:()=>u(!0),disabled:o.length===0,className:"flex items-center gap-2",children:[h.jsx(ol,{className:"w-4 h-4"}),"Create Character"]})]}):h.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:ee.map(P=>h.jsx(Zb,{campaign:P,onViewCampaign:n,onDeleteCharacter:Ee},P.id))})]}),h.jsx(Gt,{isOpen:i,onClose:()=>u(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[S&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:S}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:d,onChange:P=>f(P.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),o.map(P=>h.jsx("option",{value:P.id,children:P.name},P.id))]})]}),h.jsx(X,{label:"Player Name",value:g,onChange:P=>y(P.target.value),placeholder:"e.g., John Smith",required:!0}),h.jsx(X,{label:"Character Name",value:v,onChange:P=>_(P.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),h.jsx(_n,{onCancel:()=>u(!1),cancelText:"Cancel",confirmText:b?"Creating...":"Create",confirmDisabled:b||!g.trim()||!v.trim()||!d,confirmType:"submit",isLoading:b})]})}),h.jsx(Gt,{isOpen:R,onClose:()=>M(!1),title:"Delete Character",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:h.jsx(uc,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),h.jsxs("div",{className:"flex-grow",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',G?.name,'"?']}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),h.jsx(_n,{onCancel:()=>M(!1),cancelText:"Cancel",confirmText:q?"Deleting...":"Delete",confirmDisabled:q,onConfirm:Ze,confirmVariant:"danger",isLoading:q})]})})]})}function Wb({user:o,onSettings:n,onSignOut:r}){const[i,u]=B.useState(!1),d=B.useRef(null);B.useEffect(()=>{const g=y=>{d.current&&!d.current.contains(y.target)&&u(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),B.useEffect(()=>{const g=y=>{y.key==="Escape"&&u(!1)};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[]);const f=o.displayName||o.username||o.email.split("@")[0];return h.jsxs("div",{className:"relative",ref:d,children:[h.jsxs("button",{onClick:()=>u(!i),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-expanded":i,"aria-haspopup":"true",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:h.jsx(cl,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),h.jsx("span",{className:"hidden sm:block max-w-24 truncate",children:f}),h.jsx($y,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&h.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-gray-200 dark:border-zinc-700 py-1 z-50",children:[h.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:h.jsx(cl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:f}),o.username&&h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",o.username]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o.email})]})]})}),h.jsxs("div",{className:"py-1",children:[h.jsxs("button",{onClick:()=>{u(!1),n()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors",children:[h.jsx(Qm,{className:"w-4 h-4 mr-3"}),"Account Settings"]}),h.jsxs("button",{onClick:()=>{u(!1),r()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors",children:[h.jsx(Gy,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})}function Ib({isOpen:o,onClose:n,user:r,onUpdateProfile:i,onChangePassword:u,onDeleteAccount:d}){const[f,g]=B.useState("profile"),[y,v]=B.useState(!1),[_,b]=B.useState(null),[x,S]=B.useState(r.displayName||""),[C,R]=B.useState(r.username||""),[M,G]=B.useState(""),[H,q]=B.useState(""),[V,F]=B.useState(""),[$,ee]=B.useState(!1),[ce,Ee]=B.useState(!1),[Ze,P]=B.useState(!1),ye=Lb(H),zt=async L=>{L.preventDefault(),v(!0),b(null);try{await i({displayName:x.trim()||void 0,username:C.trim()||void 0}),b({type:"success",text:"Profile updated successfully!"})}catch(K){b({type:"error",text:K instanceof Error?K.message:"Failed to update profile"})}finally{v(!1)}},Dt=async L=>{if(L.preventDefault(),v(!0),b(null),!ye.isValid){b({type:"error",text:"Please fix the password requirements"}),v(!1);return}if(H!==V){b({type:"error",text:"New passwords do not match"}),v(!1);return}try{await u({currentPassword:M,newPassword:H}),b({type:"success",text:"Password changed successfully!"}),G(""),q(""),F("")}catch(K){b({type:"error",text:K instanceof Error?K.message:"Failed to change password"})}finally{v(!1)}},nt=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&d()},k=[{id:"profile",label:"Profile",icon:cl},{id:"password",label:"Password",icon:Vy},{id:"danger",label:"Danger Zone",icon:cm}];return h.jsx(Gt,{isOpen:o,onClose:n,title:"Account Settings",maxWidth:"xl",children:h.jsxs("div",{className:"flex h-[32rem]",children:[h.jsx("div",{className:"w-56 border-r border-gray-200 dark:border-zinc-700 pr-6",children:h.jsx("nav",{className:"space-y-1",children:k.map(L=>{const K=L.icon;return h.jsxs("button",{onClick:()=>g(L.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f===L.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:[h.jsx(K,{className:"w-4 h-4 mr-3"}),L.label]},L.id)})})}),h.jsxs("div",{className:"flex-1 pl-8",children:[_&&h.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${_.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:_.text}),f==="profile"&&h.jsxs("form",{onSubmit:zt,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),h.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsx(Yy,{className:"w-4 h-4 text-gray-400 mr-3"}),h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),h.jsx(X,{label:"Display Name",type:"text",value:x,onChange:L=>S(L.target.value),placeholder:"Enter your display name"}),h.jsx(X,{label:"Username",type:"text",value:C,onChange:L=>R(L.target.value),placeholder:"Enter your username"}),h.jsx(ge,{type:"submit",disabled:y,className:"w-full",children:y?"Updating...":"Update Profile"})]}),f==="password"&&h.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(X,{label:"Current Password",type:$?"text":"password",value:M,onChange:L=>G(L.target.value),placeholder:"Enter your current password",required:!0}),h.jsx("button",{type:"button",onClick:()=>ee(!$),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:$?h.jsx(zo,{className:"w-4 h-4"}):h.jsx(Do,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"relative",children:[h.jsx(X,{label:"New Password",type:ce?"text":"password",value:H,onChange:L=>q(L.target.value),placeholder:"Enter your new password",required:!0}),h.jsx("button",{type:"button",onClick:()=>Ee(!ce),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ce?h.jsx(zo,{className:"w-4 h-4"}):h.jsx(Do,{className:"w-4 h-4"})})]}),H&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Password Strength:"}),h.jsx("span",{className:`text-sm font-medium ${qb(ye.strength)}`,children:Hb(ye.strength)})]}),h.jsx("div",{className:"space-y-1 text-xs",children:ye.errors.map((L,K)=>h.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[h.jsx("span",{className:"mr-2",children:""}),L]},K))})]}),h.jsxs("div",{className:"relative",children:[h.jsx(X,{label:"Confirm New Password",type:Ze?"text":"password",value:V,onChange:L=>F(L.target.value),placeholder:"Confirm your new password",required:!0}),h.jsx("button",{type:"button",onClick:()=>P(!Ze),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:Ze?h.jsx(zo,{className:"w-4 h-4"}):h.jsx(Do,{className:"w-4 h-4"})})]}),h.jsx(ge,{type:"submit",disabled:y||!ye.isValid||H!==V,className:"w-full",children:y?"Changing Password...":"Change Password"})]}),f==="danger"&&h.jsx("div",{className:"space-y-6",children:h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx(cm,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),h.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),h.jsx("div",{className:"mt-4",children:h.jsx(ge,{variant:"danger",onClick:nt,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function yg(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Jo({title:o,description:n,icon:r,onClick:i,disabled:u}){return h.jsx("div",{className:`card p-6 cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 ${u?"opacity-50 cursor-not-allowed":""}`,onClick:u?void 0:i,children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"flex-shrink-0 text-blue-600 dark:text-blue-400",children:r}),h.jsxs("div",{className:"flex-grow",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:o}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:n})]}),h.jsx("div",{className:"flex-shrink-0 text-gray-400 dark:text-gray-500",children:h.jsx(Xy,{className:"w-5 h-5"})})]})})}function Fb({campaigns:o,onCampaignSelect:n}){const r=o.sort((i,u)=>u.updatedAt.getTime()-i.updatedAt.getTime()).slice(0,3);return h.jsxs("div",{className:"card p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),o.length>3&&h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," total"]})]}),r.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):h.jsx("div",{className:"space-y-3",children:r.map(i=>h.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer transition-colors",onClick:()=>n(i.id),children:[h.jsxs("div",{className:"flex-grow",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:i.name}),i.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${yg(i.userRole)}`,children:i.userRole.toUpperCase()})]}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.memberCount||0," member(s)  Updated"," ",i.updatedAt.toLocaleDateString()]})]}),h.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:h.jsx(Ky,{className:"w-4 h-4"})})]},i.id))})]})}function e_({campaign:o,onSelect:n,onEdit:r,onSettings:i}){return h.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),o.userRole&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${yg(o.userRole)}`,children:o.userRole.toUpperCase()})]}),o.description&&h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2",children:o.description}),h.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:[h.jsxs("span",{children:[o.memberCount||0," member(s)"]}),h.jsxs("span",{children:["Created ",o.createdAt.toLocaleDateString()]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ge,{size:"sm",onClick:()=>n(o.id),className:"flex-1",children:"Enter Campaign"}),h.jsx(ge,{size:"sm",onClick:()=>r(o),children:h.jsx(Jy,{className:"w-4 h-4"})}),h.jsx(ge,{size:"sm",onClick:()=>i(o),children:h.jsx(Qm,{className:"w-4 h-4"})})]})]})}function t_({campaign:o,onViewCampaign:n}){const{characters:r,loading:i}=wn(o.id);return i?h.jsx("div",{className:"card",children:h.jsxs("div",{className:"animate-pulse",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})}):h.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 truncate",children:o.name}),h.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[r.length," CHARACTER",r.length!==1?"S":""]})]}),r.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(u=>h.jsxs("div",{className:"flex items-center text-sm",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),h.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:u.characterName||u.displayName})]},u.id)),r.length>3&&h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",r.length-3," more..."]})]})}),h.jsx(ge,{size:"sm",onClick:()=>n(o.id),className:"w-full",children:"View Campaign"})]})}function a_({campaigns:o,onSelect:n,onEdit:r,onSettings:i}){return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(u=>h.jsx(e_,{campaign:u,onSelect:n,onEdit:r,onSettings:i},u.id))})]})}function n_({campaigns:o,onViewCampaign:n}){const r=o.filter(i=>i.memberCount&&i.memberCount>0);return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),r.length===0?h.jsx("div",{className:"card p-6 text-center",children:h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(i=>h.jsx(t_,{campaign:i,onViewCampaign:n},i.id))})]})}function s_({onCampaignSelect:o}){const{campaigns:n,loading:r,error:i,createCampaign:u,updateCampaign:d,deleteCampaign:f}=Vb(),{fetchMembers:g,removeMember:y}=Yb(),{signOut:v,user:_,updateProfile:b,changePassword:x,deleteAccount:S}=yl(),[C,R]=B.useState(!1),[M,G]=B.useState(""),[H,q]=B.useState(""),[V,F]=B.useState(!1),[$,ee]=B.useState(!1),[ce,Ee]=B.useState(""),[Ze,P]=B.useState(""),[ye,zt]=B.useState(""),[Dt,nt]=B.useState(!1),[k,L]=B.useState(null),[K,pe]=B.useState(!1),[_e,Qe]=B.useState(null),[xe,de]=B.useState(""),[ze,ft]=B.useState(""),[St,Qa]=B.useState(!1),[Cn,Mt]=B.useState(!1),[Ka,Xa]=B.useState(null),[Rs,An]=B.useState(!1),[Jt,En]=B.useState(!1),{createCharacter:Us}=wn(ce),pl=async J=>{if(J.preventDefault(),!!M.trim())try{F(!0),(await u({name:M,description:H||void 0})).success&&(G(""),q(""),R(!1))}finally{F(!1)}},Lr=async J=>{if(J.preventDefault(),!(!_||!Ze.trim()||!ye.trim()||!ce))try{nt(!0),L(null);const Re=await Us(Ze.trim(),ye.trim(),_.id);Re.success?(P(""),zt(""),Ee(""),ee(!1)):L(Re.error||"Failed to create character")}finally{nt(!1)}},ks=()=>{if(n.length===0){L("You need to create a campaign first before adding characters!"),setTimeout(()=>L(null),5e3);return}ee(!0)},zs=J=>{Qe(J),de(J.name),ft(J.description||""),pe(!0)},Ds=async J=>{if(J.preventDefault(),!(!_e||!xe.trim()))try{Qa(!0),await d(_e.id,{name:xe,description:ze||void 0}),pe(!1),Qe(null)}finally{Qa(!1)}},vl=J=>{Xa(J),Mt(!0)},bl=async(J,Re)=>{await d(J,{name:Re.name,description:Re.description||void 0})},tt=async J=>{(await f(J)).success&&(Mt(!1),Xa(null))},_l=async J=>{const Re=await g(J);if(Re.success&&Re.data)return Re.data.map(ma=>({id:ma.id,user_id:ma.userId,role:ma.role,user_profiles:{email:ma.email,display_name:ma.displayName||null}}))},qr=async(J,Re)=>{await y(J,Re)},Hr=J=>({id:J.id,name:J.name,description:J.description||null,created_at:J.createdAt.toISOString(),created_by:J.createdBy,updated_at:J.updatedAt.toISOString(),role:J.userRole,member_count:J.memberCount});return r?h.jsx(Kb,{message:"Loading dashboard..."}):h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),_&&h.jsx(Wb,{user:_,onSettings:()=>An(!0),onSignOut:()=>v()})]})}),h.jsx("div",{className:"p-6 space-y-6",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[(i||k)&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:i||k}),h.jsx("div",{className:"mb-8",children:h.jsx(Fb,{campaigns:n,onCampaignSelect:o})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Jo,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:h.jsx(Qy,{className:"w-8 h-8"}),onClick:()=>R(!0)}),h.jsx(Jo,{title:"Create Character",description:"Add a new character to one of your campaigns",icon:h.jsx(cl,{className:"w-8 h-8"}),onClick:ks,disabled:n.length===0}),h.jsx(Jo,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:h.jsx(zr,{className:"w-8 h-8"}),onClick:()=>En(!0),disabled:n.length===0})]}),n.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"Create a campaign first to enable character management features."})]}),n.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(a_,{campaigns:n,onSelect:o,onEdit:zs,onSettings:vl})}),n.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(n_,{campaigns:n,onViewCampaign:o})})]})}),h.jsx(Gt,{isOpen:C,onClose:()=>R(!1),title:"Create New Campaign",children:h.jsxs("form",{onSubmit:pl,className:"space-y-4",children:[h.jsx(X,{label:"Campaign Name",value:M,onChange:J=>G(J.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:H,onChange:J=>q(J.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(_n,{onCancel:()=>R(!1),cancelText:"Cancel",confirmText:V?"Creating...":"Create",confirmDisabled:V||!M.trim(),confirmType:"submit",isLoading:V})]})}),h.jsx(Gt,{isOpen:$,onClose:()=>ee(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:Lr,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:ce,onChange:J=>Ee(J.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),n.map(J=>h.jsx("option",{value:J.id,children:J.name},J.id))]})]}),h.jsx(X,{label:"Player Name",value:Ze,onChange:J=>P(J.target.value),placeholder:"e.g. John Smith",required:!0}),h.jsx(X,{label:"Character Name",value:ye,onChange:J=>zt(J.target.value),placeholder:"e.g. Lt. Sally Riddle",required:!0}),h.jsx(_n,{onCancel:()=>ee(!1),cancelText:"Cancel",confirmText:Dt?"Creating...":"Create",confirmDisabled:Dt||!Ze.trim()||!ye.trim()||!ce,confirmType:"submit",isLoading:Dt})]})}),h.jsx(Gt,{isOpen:K,onClose:()=>pe(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:Ds,className:"space-y-4",children:[h.jsx(X,{label:"Campaign Name",value:xe,onChange:J=>de(J.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:ze,onChange:J=>ft(J.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(_n,{onCancel:()=>pe(!1),cancelText:"Cancel",confirmText:St?"Updating...":"Update",confirmDisabled:St||!xe.trim(),confirmType:"submit",isLoading:St})]})}),Ka&&h.jsx(Gt,{isOpen:Cn,onClose:()=>Mt(!1),title:`Settings - ${Ka.name}`,maxWidth:"xl",children:h.jsx(Xb,{campaign:Hr(Ka),onUpdateCampaign:bl,onDeleteCampaign:tt,onGetMembers:_l,onRemoveMember:qr,onClose:()=>Mt(!1)})}),h.jsx(Gt,{isOpen:Jt,onClose:()=>En(!1),title:"Character Management",maxWidth:"xl",children:h.jsx(Pb,{campaigns:n,onViewCampaign:o})}),_&&h.jsx(Ib,{isOpen:Rs,onClose:()=>An(!1),user:_,onUpdateProfile:async J=>{const Re=await b(J);if(!Re.success&&Re.error)throw new Error(Re.error)},onChangePassword:async J=>{const Re=await x(J);if(!Re.success&&Re.error)throw new Error(Re.error)},onDeleteAccount:()=>{S().then(()=>{An(!1)})}})]})}const pg="traveller-ui-state-v1",Ym={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function vg(){try{const o=localStorage.getItem(pg);if(!o)return Ym;const n=JSON.parse(o);return n.PCs||(n.PCs={}),Object.keys(n.PCs).forEach(r=>{n.PCs[r].Finance||(n.PCs[r].Finance=[]),n.PCs[r].Inventory||(n.PCs[r].Inventory=[]),n.PCs[r].Weapons||(n.PCs[r].Weapons=[]),n.PCs[r].Armour||(n.PCs[r].Armour=[]),n.PCs[r].Ammo||(n.PCs[r].Ammo=[])}),n}catch{return Ym}}function bg(o){localStorage.setItem(pg,JSON.stringify(o))}function Va(o){const n=vg();n.PCs[o]||(n.PCs[o]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},bg(n))}function r_(o){const n=B.useCallback((u,d,f)=>{o(g=>{g.PCs[u]||Va(u);const y=g.PCs[u]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...g,PCs:{...g.PCs,[u]:{...y,Ammo:(y.Ammo||[]).map((v,_)=>_===d?f:v)}}}})},[o]),r=B.useCallback((u,d)=>{o(f=>{if(!f.PCs[u])return Va(u),f;const g=f.PCs[u]?.Ammo?.[d];if(!g)return f;const y=Number(g["Rounds Loaded"]||0),v=Number(g["Spare Magazines"]||0),_=Number(g["Loose Rounds"]||0),b=Number(g["Magazine Size"]||0);let x=y,S=v,C=_;if(x>0)x-=1;else if(S>0)S-=1,x=b-1;else if(C>0&&b>0){const G=Math.min(C,b);C-=G,x=G-1}else return f;const R=x+S*b+C,M={...g,"Rounds Loaded":x,"Spare Magazines":S,"Loose Rounds":C,"Total Rounds":R};return{...f,PCs:{...f.PCs,[u]:{...f.PCs[u],Ammo:(f.PCs[u].Ammo||[]).map((G,H)=>H===d?M:G)}}}})},[o]),i=B.useCallback((u,d)=>{o(f=>{if(!f.PCs[u])return Va(u),f;const g=f.PCs[u]?.Ammo?.[d];if(!g)return f;const y=Number(g["Rounds Loaded"]||0),v=Number(g["Spare Magazines"]||0),_=Number(g["Loose Rounds"]||0),b=Number(g["Magazine Size"]||0);let x=y,S=v,C=_;if(S>0&&x<b)S-=1,x=b;else if(C>0&&x<b){const G=b-x,H=Math.min(C,G);C-=H,x+=H}const R=x+S*b+C,M={...g,"Rounds Loaded":x,"Spare Magazines":S,"Loose Rounds":C,"Total Rounds":R};return{...f,PCs:{...f.PCs,[u]:{...f.PCs[u],Ammo:(f.PCs[u].Ammo||[]).map((G,H)=>H===d?M:G)}}}})},[o]);return{updateCharacterAmmo:n,fireRound:r,reloadWeapon:i}}function i_(){const[o,n]=B.useState(vg());B.useEffect(()=>{bg(o)},[o]);const r=B.useCallback(b=>{n(x=>({...x,Party_Finances:b}))},[]),i=B.useCallback(b=>{n(x=>({...x,Ship_Accounts:b}))},[]),u=B.useCallback(b=>{n(x=>({...x,Ship_Cargo:[...x.Ship_Cargo,b]}))},[]),d=B.useCallback((b,x)=>{n(S=>(S.PCs[b]||Va(b),{...S,PCs:{...S.PCs,[b]:{...S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:x}}}))},[]),f=B.useCallback((b,x)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Inventory:[...C.Inventory,x]}}}})},[]),g=B.useCallback((b,x)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Ammo:[...C.Ammo||[],x]}}}})},[]),y=B.useCallback((b,x)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Weapons:[...C.Weapons||[],x]}}}})},[]),v=B.useCallback((b,x)=>{n(S=>{S.PCs[b]||Va(b);const C=S.PCs[b]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...S,PCs:{...S.PCs,[b]:{...C,Armour:[...C.Armour||[],x]}}}})},[]),_=r_(n);return{state:o,setState:n,updatePartyFinances:r,updateShipAccounts:i,addCargoLeg:u,updateCharacterFinance:d,addCharacterInventory:f,addCharacterAmmo:g,addCharacterWeapon:y,addCharacterArmour:v,..._}}function l_(o,n=0){let r=n;return o.map(i=>{const u=i["Amount (Cr)"],d=i.Category;return d==="Income"?r+=u:d==="Expense"&&(r-=u),{...i,"Running Total":r}})}function ul(o,n=0){return o.reduce((r,i)=>{const u=i["Amount (Cr)"],d=i.Category;return d==="Income"?r+u:d==="Expense"?r-u:r},n)}function u_(o,n,r=0){const i=[...o,n];return i.sort((u,d)=>new Date(u.Date).getTime()-new Date(d.Date).getTime()),l_(i,r)}function o_(o){const n=[];return o.Description?.trim()||n.push("Description is required"),o.Date||n.push("Date is required"),(o["Amount (Cr)"]===void 0||o["Amount (Cr)"]===null)&&n.push("Amount is required"),typeof o["Amount (Cr)"]=="number"&&o["Amount (Cr)"]<0&&n.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(o.Category||"")||n.push("Category must be Income, Expense, or Transfer"),{isValid:n.length===0,errors:n}}function ll(o){return`${o.toLocaleString()} Cr`}function c_(o){const n=o.reduce((r,i)=>{const u=i["Amount (Cr)"];return i.Category==="Income"?r.totalIncome+=u:i.Category==="Expense"&&(r.totalExpenses+=u),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...n,netChange:n.totalIncome-n.totalExpenses}}function d_(o,n){return B.useMemo(()=>({party:ul(o.Party_Finances,0),ship:ul(o.Ship_Accounts,0),character:ul(o.PCs[n]?.Finance||[],0)}),[o.Party_Finances,o.Ship_Accounts,o.PCs,n])}function f_(o,n){const r=B.useCallback(async u=>{try{const{importXlsx:d}=await xn(async()=>{const{importXlsx:f}=await import("./xlsx-iaGQw1-y.js");return{importXlsx:f}},__vite__mapDeps([0,1,2,3]));return await d(u,o),{success:!0}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Unknown error occurred"}}},[o]),i=B.useCallback(async()=>{try{const{exportXlsx:u}=await xn(async()=>{const{exportXlsx:d}=await import("./xlsx-iaGQw1-y.js");return{exportXlsx:d}},__vite__mapDeps([0,1,2,3]));return await u(n),{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Unknown error occurred"}}},[n]);return{handleImport:r,handleExport:i}}function h_({onImport:o,onExport:n}){const r=async d=>{const f=d.target.files?.[0];f&&((await o(f)).success||(d.target.value=""))},i=async()=>{await n()},u=d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.currentTarget.click())};return h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),h.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[h.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:u,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[h.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:r,"data-testid":"file-input"}),h.jsx(Zy,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),h.jsxs(ge,{onClick:i,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[h.jsx(Py,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const Cs=o=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(o)} Cr`,m_=()=>new Date().toISOString().slice(0,10);function g_({partyBalance:o,shipBalance:n,cargoLegsCount:r,characterCount:i}){return h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${Cs(o)}`,children:Cs(o)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${Cs(n)}`,children:Cs(n)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${r}`,children:r})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${i}`,children:i})]})]})}function _g({tabs:o,active:n,onChange:r}){const i=u=>{const d=o.findIndex(y=>y.id===n);let f=d;switch(u.key){case"ArrowLeft":u.preventDefault(),f=d>0?d-1:o.length-1;break;case"ArrowRight":u.preventDefault(),f=d<o.length-1?d+1:0;break;case"Home":u.preventDefault(),f=0;break;case"End":u.preventDefault(),f=o.length-1;break;default:return}const g=o[f].id;r(g)};return h.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:o.map(u=>h.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${n===u.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>r(u.id),onKeyDown:i,role:"tab","aria-selected":n===u.id,"aria-controls":`tabpanel-${u.id}`,id:`tab-${u.id}`,type:"button",tabIndex:n===u.id?0:-1,"data-testid":`tab-${u.id}`,children:u.label},u.id))})}function jn({title:o,children:n}){return h.jsxs("div",{className:"card space-y-3",children:[h.jsx("div",{className:"font-semibold",children:o}),n]})}function Ns({columns:o,rows:n}){const r=i=>B.isValidElement(i)?i:String(i??"");return h.jsx("div",{className:"overflow-auto border rounded-2xl",children:h.jsxs("table",{className:"table",children:[h.jsx("thead",{children:h.jsx("tr",{children:o.map(i=>h.jsx("th",{children:i},i))})}),h.jsx("tbody",{children:n.length===0?h.jsx("tr",{children:h.jsx("td",{className:"text-zinc-500 p-3",colSpan:o.length,children:"No rows yet."})}):n.map((i,u)=>h.jsx("tr",{children:o.map(d=>h.jsx("td",{children:r(i[d])},d))},u))})]})})}function Os(o){const[n,r]=B.useState(o),i=B.useCallback((y,v)=>{r(_=>({..._,[y]:v}))},[]),u=B.useCallback(y=>v=>{i(y,v.target.value)},[i]),d=B.useCallback(y=>{r(v=>{const _={...o};return y&&y.forEach(b=>{_[b]=v[b]}),_})},[o]),f=B.useCallback(y=>{r(v=>({...v,...y}))},[]),g=B.useCallback(()=>({...n}),[n]);return{form:n,updateField:i,createInputHandler:u,resetForm:d,updateFields:f,getFormData:g,setForm:r}}const y_={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function p_({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Os(y_),d=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const f=Number(r.Tons),g=Number(r.BuyPP),y=r.SellPP===""?null:Number(r.SellPP),v=r.Fees===""?0:Number(r.Fees),_=y===null?null:(y-g)*f-v;n({"Leg/Route":r.Route,Item:r.Item,Tons:f,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":g,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":y,"Broker (DM)":r.DM,"Fees/Taxes (Cr)":v,"Profit (Cr)":_}),u()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(jn,{title:"Record Cargo Leg",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(X,{placeholder:"Route (Vland  Regina)",value:r.Route,onChange:i("Route")}),h.jsx(X,{placeholder:"Item",value:r.Item,onChange:i("Item")}),h.jsx(X,{type:"number",placeholder:"Tons",value:r.Tons,onChange:i("Tons")}),h.jsx(X,{placeholder:"Purchase World",value:r.BuyWorld,onChange:i("BuyWorld")}),h.jsx(X,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:r.BuyPP,onChange:i("BuyPP")}),h.jsx(X,{placeholder:"Sale World (optional)",value:r.SellWorld,onChange:i("SellWorld")}),h.jsx(X,{type:"number",placeholder:"Sale Price (Cr/ton)",value:r.SellPP,onChange:i("SellPP")}),h.jsx(X,{placeholder:"Broker DM",value:r.DM,onChange:i("DM")}),h.jsx(X,{type:"number",placeholder:"Fees/Taxes (Cr)",value:r.Fees,onChange:i("Fees")})]}),h.jsx(ge,{className:"mt-2",onClick:d,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),h.jsx(Ns,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:o})]})}function v_({title:o,totalIncome:n,totalExpenses:r,netChange:i,currentBalance:u}){return h.jsx(jn,{title:`${o} Summary`,children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),h.jsx("div",{children:ll(n)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),h.jsx("div",{children:ll(r)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),h.jsx("div",{className:i>=0?"text-green-600":"text-red-600",children:ll(i)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),h.jsx("div",{className:u>=0?"text-green-600":"text-red-600",children:ll(u)})]})]})})}function b_({title:o,fundName:n,onSubmit:r}){const i={Date:m_(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:u,createInputHandler:d,resetForm:f}=Os(i),[g,y]=B.useState([]),v=()=>{y([]);const _={Date:u.Date,Description:u.Description,Category:u.Category,Subcategory:u.Subcategory,"Amount (Cr)":Number(u.Amount),"Paid By":n,"Paid From (Fund)":n,Notes:u.Notes},b=o_(_);if(!b.isValid){y(b.errors);return}r(_),f(["Date","Category"])};return h.jsxs(jn,{title:`Add ${o} Transaction`,children:[g.length>0&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h.jsx("ul",{className:"list-disc list-inside",children:g.map((_,b)=>h.jsx("li",{children:_},b))})}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(X,{type:"date",value:u.Date,onChange:d("Date")}),h.jsx(X,{placeholder:"Description",value:u.Description,onChange:d("Description")}),h.jsxs(X,{type:"select",value:u.Category,onChange:d("Category"),children:[h.jsx("option",{value:"Income",children:"Income"}),h.jsx("option",{value:"Expense",children:"Expense"}),h.jsx("option",{value:"Transfer",children:"Transfer"})]}),h.jsx(X,{placeholder:"Subcategory",value:u.Subcategory,onChange:d("Subcategory")}),h.jsx(X,{type:"number",placeholder:"Amount (Cr)",value:u.Amount,onChange:d("Amount")}),h.jsx(X,{placeholder:"Notes",value:u.Notes,onChange:d("Notes")})]}),h.jsx(ge,{className:"mt-2",onClick:v,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function ic({title:o,rows:n,onUpdate:r,fundName:i,initialBalance:u=0,showSummary:d=!0}){const f=ul(n,u),g=c_(n),y=_=>{const b=u_(n,_,u);r(b)},v=n.map(_=>({..._,"Amount (Cr)":_.Category==="Expense"?-Math.abs(_["Amount (Cr)"]):Math.abs(_["Amount (Cr)"])}));return h.jsxs("div",{className:"space-y-4",children:[d&&h.jsx(v_,{title:o,totalIncome:g.totalIncome,totalExpenses:g.totalExpenses,netChange:g.netChange,currentBalance:f}),h.jsx(b_,{title:o,fundName:i,onSubmit:y}),h.jsx(Ns,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:v})]})}function __({pc:o,rows:n,onAdd:r}){const i=o.includes("  ")?o.split("  ")[1]:o;return h.jsx("div",{className:"space-y-4",children:h.jsx(ic,{title:i,rows:n,onUpdate:r,fundName:`${i} Fund`,initialBalance:0,showSummary:!0})})}const x_={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function w_({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Os(x_),d=()=>{if(!r.Item||r.Qty==="")return;const f=Number(r.Qty||0),g=Number(r["Unit Mass (kg)"]||0),y=Number(r["Unit Value (Cr)"]||0);n({Item:r.Item,Qty:f,"Unit Mass (kg)":g,"Total Mass (kg)":f*g,"Unit Value (Cr)":y,"Total Value (Cr)":f*y,"Location/Container":r["Location/Container"],Notes:r.Notes}),u()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(jn,{title:"Add Inventory Item",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(X,{placeholder:"Item",value:r.Item,onChange:i("Item")}),h.jsx(X,{type:"number",placeholder:"Qty",value:r.Qty,onChange:i("Qty")}),h.jsx(X,{type:"number",placeholder:"Unit Mass (kg)",value:r["Unit Mass (kg)"],onChange:i("Unit Mass (kg)")}),h.jsx(X,{type:"number",placeholder:"Unit Value (Cr)",value:r["Unit Value (Cr)"],onChange:i("Unit Value (Cr)")}),h.jsx(X,{placeholder:"Location/Container",value:r["Location/Container"],onChange:i("Location/Container")}),h.jsx(X,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(ge,{className:"mt-2",onClick:d,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),h.jsx(Ns,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:o})]})}function S_({content:o,children:n,position:r="bottom",className:i=""}){const[u,d]=B.useState(!1),f={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},g={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return h.jsxs("div",{className:`relative inline-block ${i}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onFocus:()=>d(!0),onBlur:()=>d(!1),children:[n,u&&h.jsx(h.Fragment,{children:h.jsxs("div",{className:`absolute z-[9999] ${f[r]} transition-opacity duration-200`,children:[h.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:o}),h.jsx("div",{className:`absolute ${g[r]}`})]})})]})}const j_={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Notes:""};function C_({row:o,index:n,onFireRound:r,onReload:i}){return h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ge,{variant:"danger",size:"sm",onClick:()=>r?.(n),disabled:Number(o["Total Rounds"]||0)<=0,title:`Fire one round from ${o.Weapon}`,"aria-label":`Fire one round from ${o.Weapon}`,children:"Fire"}),h.jsx(ge,{variant:"primary",size:"sm",onClick:()=>i?.(n),disabled:Number(o["Spare Magazines"]||0)<=0&&Number(o["Loose Rounds"]||0)<=0,title:`Reload ${o.Weapon}`,"aria-label":`Reload ${o.Weapon}`,children:"Reload"})]})}function A_({rows:o,weapons:n=[],onAdd:r,onFireRound:i,onReload:u}){const{form:d,createInputHandler:f,resetForm:g,updateField:y}=Os(j_),v=()=>{if(!d.Weapon)return;const x=Number(d["Magazine Size"]||0),S=Number(d["Rounds Loaded"]||0),C=Number(d["Spare Magazines"]||0),R=Number(d["Loose Rounds"]||0),M=x*C+S+R;r({Weapon:d.Weapon,"Ammo Type":d["Ammo Type"],"Magazine Size":x,"Rounds Loaded":S,"Spare Magazines":C,"Loose Rounds":R,"Total Rounds":M,Notes:d.Notes}),g()},_=x=>{y("Weapon",x)},b=o.map((x,S)=>({...x,Actions:h.jsx(C_,{row:x,index:S,onFireRound:i,onReload:u})}));return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(jn,{title:"Add Ammunition Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsxs(X,{type:"select",value:d.Weapon==="__custom"?"":d.Weapon,onChange:f("Weapon"),children:[h.jsx("option",{value:"",children:"Select Weapon"}),n.map(x=>h.jsxs("option",{value:x.Weapon,children:[x.Weapon," (",x.Type,")"]},x.Weapon)),h.jsx("option",{value:"__custom",children:"--- Custom Weapon ---"})]}),d.Weapon==="__custom"&&h.jsx(X,{placeholder:"Custom Weapon Name",value:"",onChange:x=>_(x.target.value)}),h.jsx(X,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:d["Ammo Type"],onChange:f("Ammo Type")}),h.jsx(X,{type:"number",placeholder:"Magazine Size",value:d["Magazine Size"],onChange:f("Magazine Size")}),h.jsx(X,{type:"number",placeholder:"Rounds Loaded",value:d["Rounds Loaded"],onChange:f("Rounds Loaded")}),h.jsx(X,{type:"number",placeholder:"Spare Magazines",value:d["Spare Magazines"],onChange:f("Spare Magazines")}),h.jsx(X,{type:"number",placeholder:"Loose Rounds",value:d["Loose Rounds"],onChange:f("Loose Rounds")}),h.jsx(X,{placeholder:"Notes",value:d.Notes,onChange:f("Notes")})]}),h.jsx(ge,{className:"mt-2",onClick:v,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),h.jsx(S_,{content:h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),h.jsxs("ul",{className:"space-y-1 text-sm",children:[h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds  Spare magazines  Loose rounds"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:h.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:h.jsx(Wy,{className:"w-5 h-5"})})})]}),h.jsx(Ns,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:b})]})}const E_={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function T_({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Os(E_),d=()=>{r.Weapon&&(n({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),u())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(jn,{title:"Add Weapon Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(X,{placeholder:"Weapon Name",value:r.Weapon,onChange:i("Weapon")}),h.jsxs(X,{type:"select",value:r.Type,onChange:i("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Melee",children:"Melee"}),h.jsx("option",{value:"Pistol",children:"Pistol"}),h.jsx("option",{value:"Rifle",children:"Rifle"}),h.jsx("option",{value:"Shotgun",children:"Shotgun"}),h.jsx("option",{value:"Heavy Weapon",children:"Heavy Weapon"}),h.jsx("option",{value:"Explosive",children:"Explosive"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(X,{placeholder:"Damage (e.g., 3d6)",value:r.Damage,onChange:i("Damage")}),h.jsx(X,{placeholder:"Range (e.g., 150m)",value:r.Range,onChange:i("Range")}),h.jsx(X,{type:"number",placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),h.jsx(X,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),h.jsx(X,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(ge,{className:"mt-2",onClick:d,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),h.jsx(Ns,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:o})]})}const N_={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function O_({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:u}=Os(N_),d=()=>{r.Armour&&(n({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),u())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(jn,{title:"Add Armour Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(X,{placeholder:"Armour Name",value:r.Armour,onChange:i("Armour")}),h.jsxs(X,{type:"select",value:r.Type,onChange:i("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Cloth",children:"Cloth"}),h.jsx("option",{value:"Mesh",children:"Mesh"}),h.jsx("option",{value:"Flak Jacket",children:"Flak Jacket"}),h.jsx("option",{value:"Combat Armour",children:"Combat Armour"}),h.jsx("option",{value:"Battle Dress",children:"Battle Dress"}),h.jsx("option",{value:"Powered Armour",children:"Powered Armour"}),h.jsx("option",{value:"Vacc Suit",children:"Vacc Suit"}),h.jsx("option",{value:"Environmental Suit",children:"Environmental Suit"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(X,{placeholder:"Protection (e.g., +5, 1d6+2)",value:r.Protection,onChange:i("Protection")}),h.jsx(X,{placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),h.jsx(X,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),h.jsx(X,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(ge,{className:"mt-2",onClick:d,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),h.jsx(Ns,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:o})]})}function R_({campaignId:o,selectedPc:n,onPcChange:r,characterBalance:i,characterFinance:u,characterInventory:d,characterAmmo:f,characterWeapons:g,characterArmour:y,onUpdateFinance:v,onAddInventory:_,onAddAmmo:b,onAddWeapon:x,onAddArmour:S,onFireRound:C,onReloadWeapon:R}){const[M,G]=B.useState("ledger"),{characters:H,loading:q,error:V}=wn(o),F=H.find($=>$.displayName===n);return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("select",{className:"select",value:n,onChange:$=>r($.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:q,children:q?h.jsx("option",{children:"Loading characters..."}):H.map($=>h.jsx("option",{value:$.displayName,children:$.displayName},$.id))}),V&&h.jsx("span",{className:"text-xs text-yellow-600",title:V,children:" Offline mode"}),h.jsx("div",{className:"text-sm",children:h.jsxs("span",{"aria-label":`Current character balance: ${Cs(i)}`,children:["Current Balance:"," ",h.jsx("span",{className:"font-semibold",children:Cs(i)})]})})]}),F&&F.id.startsWith("character-")&&h.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",F.playerName," | Character:"," ",F.characterName]}),h.jsx(_g,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:M,onChange:$=>G($)}),M==="ledger"&&h.jsx(__,{pc:n,rows:u,onAdd:$=>v(n,$)}),M==="inventory"&&h.jsx(w_,{rows:d,onAdd:$=>_(n,$)}),M==="weapons"&&h.jsx(T_,{rows:g,onAdd:$=>x(n,$)}),M==="armour"&&h.jsx(O_,{rows:y,onAdd:$=>S(n,$)}),M==="ammo"&&h.jsx(A_,{rows:f,weapons:g,onAdd:$=>b(n,$),onFireRound:$=>C?.(n,$),onReload:$=>R?.(n,$)})]})}function U_({campaignId:o,activeTab:n,state:r,selectedCharacterDisplayName:i,characterBalance:u,onCharacterChange:d,onUpdatePartyFinances:f,onUpdateShipAccounts:g,onAddCargoLeg:y,onUpdateCharacterFinance:v,onAddCharacterInventory:_,onAddCharacterAmmo:b,onAddCharacterWeapon:x,onAddCharacterArmour:S,onFireRound:C,onReloadWeapon:R}){return h.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${n}`,id:`tabpanel-${n}`,children:[n==="party"&&h.jsx(ic,{title:"Party",rows:r.Party_Finances,onUpdate:f,fundName:"Party Fund",initialBalance:0,showSummary:!0}),n==="ship"&&h.jsx(ic,{title:"Ship",rows:r.Ship_Accounts,onUpdate:g,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),n==="cargo"&&h.jsx(p_,{rows:r.Ship_Cargo,onAdd:y}),n==="characters"&&h.jsx(R_,{campaignId:o,selectedPc:i,onPcChange:d,characterBalance:u,characterFinance:r.PCs[i]?.Finance||[],characterInventory:r.PCs[i]?.Inventory||[],characterAmmo:r.PCs[i]?.Ammo||[],characterWeapons:r.PCs[i]?.Weapons||[],characterArmour:r.PCs[i]?.Armour||[],onUpdateFinance:v,onAddInventory:_,onAddAmmo:b,onAddWeapon:x,onAddArmour:S,onFireRound:C,onReloadWeapon:R})]})}function k_({campaignId:o,onBackToCampaigns:n}){const[r,i]=B.useState("party"),{characters:u}=wn(o),[d,f]=B.useState(""),g=d||u[0]?.displayName||"",{state:y,setState:v,updatePartyFinances:_,updateShipAccounts:b,addCargoLeg:x,updateCharacterFinance:S,addCharacterInventory:C,addCharacterAmmo:R,addCharacterWeapon:M,addCharacterArmour:G,fireRound:H,reloadWeapon:q}=i_(),V=d_(y,g),{handleImport:F,handleExport:$}=f_(v,y);return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:" Back to Campaigns"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",o]})]})]})})}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsx(h_,{onImport:F,onExport:$}),h.jsx(g_,{partyBalance:V.party,shipBalance:V.ship,cargoLegsCount:y.Ship_Cargo.length,characterCount:u.length}),h.jsx(_g,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:ee=>i(ee)}),h.jsx(U_,{campaignId:o,activeTab:r,state:y,selectedCharacterDisplayName:g,characterBalance:V.character,onCharacterChange:f,onUpdatePartyFinances:_,onUpdateShipAccounts:b,onAddCargoLeg:x,onUpdateCharacterFinance:S,onAddCharacterInventory:C,onAddCharacterAmmo:R,onAddCharacterWeapon:M,onAddCharacterArmour:G,onFireRound:H,onReloadWeapon:q})]})]})}function z_(){const{user:o,loading:n,completeProfile:r}=yl(),[i,u]=B.useState(null);return n?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?o.profileCompleted?i?h.jsx(k_,{campaignId:i,onBackToCampaigns:()=>u(null)}):h.jsx(s_,{onCampaignSelect:u}):h.jsx(Gb,{onComplete:r}):h.jsx(Bb,{})}class D_ extends Km.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error boundary caught an error:",n,r)}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:h.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),h.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),h.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const xg=document.getElementById("root");if(!xg)throw new Error("Failed to find the root element");up.createRoot(xg).render(h.jsx(Km.StrictMode,{children:h.jsx(D_,{children:h.jsx(z_,{})})}));export{Ym as D,xn as _};
