const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx-dsiKhsZx.js","assets/icons-9UWp7c2_.js","assets/excel-Du8kUxR_.js","assets/vendor-Dfoqj1Wf.js"])))=>i.map(i=>d[i]);
import{r as O,U as jn,X as Wm,P as rl,a as Za,T as Rr,A as Fm,b as il,C as ny,S as eg,L as sy,c as ry,d as fm,M as iy,E as ko,e as Ro,f as tg,g as ly,R as cy,h as oy,D as uy,i as dy,j as ag}from"./icons-9UWp7c2_.js";import{g as ng,a as hy}from"./excel-Du8kUxR_.js";import{r as fy,a as my}from"./vendor-Dfoqj1Wf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var Uo={exports:{}},Cr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function gy(){if(mm)return Cr;mm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:o,type:i,key:f,ref:l!==void 0?l:null,props:u}}return Cr.Fragment=n,Cr.jsx=r,Cr.jsxs=r,Cr}var gm;function py(){return gm||(gm=1,Uo.exports=gy()),Uo.exports}var h=py(),zo={exports:{}},Ar={},Do={exports:{}},Mo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function yy(){return pm||(pm=1,(function(o){function n(D,G){var X=D.length;D.push(G);e:for(;0<X;){var ge=X-1>>>1,ve=D[ge];if(0<l(ve,G))D[ge]=G,D[X]=ve,X=ge;else break e}}function r(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var G=D[0],X=D.pop();if(X!==G){D[0]=X;e:for(var ge=0,ve=D.length,ze=ve>>>1;ge<ze;){var Ne=2*(ge+1)-1,me=D[Ne],qe=Ne+1,ot=D[qe];if(0>l(me,X))qe<ve&&0>l(ot,me)?(D[ge]=ot,D[qe]=X,ge=qe):(D[ge]=me,D[Ne]=X,ge=Ne);else if(qe<ve&&0>l(ot,X))D[ge]=ot,D[qe]=X,ge=qe;else break e}}return G}function l(D,G){var X=D.sortIndex-G.sortIndex;return X!==0?X:D.id-G.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();o.unstable_now=function(){return f.now()-m}}var p=[],y=[],v=1,x=null,_=3,w=!1,j=!1,T=!1,U=!1,q=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function V(D){for(var G=r(y);G!==null;){if(G.callback===null)i(y);else if(G.startTime<=D)i(y),G.sortIndex=G.expirationTime,n(p,G);else break;G=r(y)}}function Y(D){if(T=!1,V(D),!j)if(r(p)!==null)j=!0,$||($=!0,_e());else{var G=r(y);G!==null&&Ie(Y,G.startTime-D)}}var $=!1,ee=-1,ce=5,J=-1;function Te(){return U?!0:!(o.unstable_now()-J<ce)}function Ze(){if(U=!1,$){var D=o.unstable_now();J=D;var G=!0;try{e:{j=!1,T&&(T=!1,L(ee),ee=-1),w=!0;var X=_;try{t:{for(V(D),x=r(p);x!==null&&!(x.expirationTime>D&&Te());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,_=x.priorityLevel;var ve=ge(x.expirationTime<=D);if(D=o.unstable_now(),typeof ve=="function"){x.callback=ve,V(D),G=!0;break t}x===r(p)&&i(p),V(D)}else i(p);x=r(p)}if(x!==null)G=!0;else{var ze=r(y);ze!==null&&Ie(Y,ze.startTime-D),G=!1}}break e}finally{x=null,_=X,w=!1}G=void 0}}finally{G?_e():$=!1}}}var _e;if(typeof H=="function")_e=function(){H(Ze)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Oe=te.port2;te.port1.onmessage=Ze,_e=function(){Oe.postMessage(null)}}else _e=function(){q(Ze,0)};function Ie(D,G){ee=q(function(){D(o.unstable_now())},G)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(D){D.callback=null},o.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<D?Math.floor(1e3/D):5},o.unstable_getCurrentPriorityLevel=function(){return _},o.unstable_next=function(D){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var X=_;_=G;try{return D()}finally{_=X}},o.unstable_requestPaint=function(){U=!0},o.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=_;_=D;try{return G()}finally{_=X}},o.unstable_scheduleCallback=function(D,G,X){var ge=o.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ge+X:ge):X=ge,D){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,D={id:v++,callback:G,priorityLevel:D,startTime:X,expirationTime:ve,sortIndex:-1},X>ge?(D.sortIndex=X,n(y,D),r(p)===null&&D===r(y)&&(T?(L(ee),ee=-1):T=!0,Ie(Y,X-ge))):(D.sortIndex=ve,n(p,D),j||w||(j=!0,$||($=!0,_e()))),D},o.unstable_shouldYield=Te,o.unstable_wrapCallback=function(D){var G=_;return function(){var X=_;_=G;try{return D.apply(this,arguments)}finally{_=X}}}})(Mo)),Mo}var ym;function vy(){return ym||(ym=1,Do.exports=yy()),Do.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function by(){if(vm)return Ar;vm=1;var o=vy(),n=fy(),r=my();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function y(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var c=a.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){a=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===a)return p(c),e;if(d===s)return p(c),t;d=d.sibling}throw Error(i(188))}if(a.return!==s.return)a=c,s=d;else{for(var g=!1,b=c.child;b;){if(b===a){g=!0,a=c,s=d;break}if(b===s){g=!0,s=c,a=d;break}b=b.sibling}if(!g){for(b=d.child;b;){if(b===a){g=!0,a=d,s=c;break}if(b===s){g=!0,s=d,a=c;break}b=b.sibling}if(!g)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),H=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),Te=Symbol.for("react.memo_cache_sentinel"),Ze=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=Ze&&e[Ze]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function Oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case q:return"Profiler";case U:return"StrictMode";case Y:return"Suspense";case $:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case H:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return t=e.displayName||null,t!==null?t:Oe(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return Oe(e(t))}catch{}}return null}var Ie=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ge=[],ve=-1;function ze(e){return{current:e}}function Ne(e){0>ve||(e.current=ge[ve],ge[ve]=null,ve--)}function me(e,t){ve++,ge[ve]=e.current,e.current=t}var qe=ze(null),ot=ze(null),Tt=ze(null),Ve=ze(null);function Ht(e,t){switch(me(Tt,t),me(ot,e),me(qe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mf(t),e=qf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ne(qe),me(qe,e)}function Gt(){Ne(qe),Ne(ot),Ne(Tt)}function va(e){e.memoizedState!==null&&me(Ve,e);var t=qe.current,a=qf(t,e.type);t!==a&&(me(ot,e),me(qe,a))}function ae(e){ot.current===e&&(Ne(qe),Ne(ot)),Ve.current===e&&(Ne(Ve),_r._currentValue=X)}var xe,le;function Me(e){if(xe===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);xe=t&&t[1]||"",le=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+e+le}var Rs=!1;function Nn(e,t){if(!e||Rs)return"";Rs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(R){var k=R}Reflect.construct(e,[],B)}else{try{B.call()}catch(R){k=R}e.call(B.prototype)}}else{try{throw Error()}catch(R){k=R}(B=e())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(R){if(R&&k&&typeof R.stack=="string")return[R.stack,k.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),g=d[0],b=d[1];if(g&&b){var S=g.split(`
`),E=b.split(`
`);for(c=s=0;s<S.length&&!S[s].includes("DetermineComponentFrameRoot");)s++;for(;c<E.length&&!E[c].includes("DetermineComponentFrameRoot");)c++;if(s===S.length||c===E.length)for(s=S.length-1,c=E.length-1;1<=s&&0<=c&&S[s]!==E[c];)c--;for(;1<=s&&0<=c;s--,c--)if(S[s]!==E[c]){if(s!==1||c!==1)do if(s--,c--,0>c||S[s]!==E[c]){var z=`
`+S[s].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=s&&0<=c);break}}}finally{Rs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Me(a):""}function zg(e,t){switch(e.tag){case 26:case 27:case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return e.child!==t&&t!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Nn(e.type,!1);case 11:return Nn(e.type.render,!1);case 1:return Nn(e.type,!0);case 31:return Me("Activity");default:return""}}function hu(e){try{var t="",a=null;do t+=zg(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var gl=Object.prototype.hasOwnProperty,pl=o.unstable_scheduleCallback,yl=o.unstable_cancelCallback,Dg=o.unstable_shouldYield,Mg=o.unstable_requestPaint,vt=o.unstable_now,qg=o.unstable_getCurrentPriorityLevel,fu=o.unstable_ImmediatePriority,mu=o.unstable_UserBlockingPriority,Mr=o.unstable_NormalPriority,Bg=o.unstable_LowPriority,gu=o.unstable_IdlePriority,Lg=o.log,Hg=o.unstable_setDisableYieldValue,Us=null,bt=null;function ba(e){if(typeof Lg=="function"&&Hg(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Us,e)}catch{}}var xt=Math.clz32?Math.clz32:Vg,Gg=Math.log,$g=Math.LN2;function Vg(e){return e>>>=0,e===0?32:31-(Gg(e)/$g|0)|0}var qr=256,Br=262144,Lr=4194304;function Fa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hr(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var c=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~d,s!==0?c=Fa(s):(g&=b,g!==0?c=Fa(g):a||(a=b&~e,a!==0&&(c=Fa(a))))):(b=s&~d,b!==0?c=Fa(b):g!==0?c=Fa(g):a||(a=s&~e,a!==0&&(c=Fa(a)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,a=t&-t,d>=a||d===32&&(a&4194048)!==0)?t:c}function zs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Yg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pu(){var e=Lr;return Lr<<=1,(Lr&62914560)===0&&(Lr=4194304),e}function vl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ds(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qg(e,t,a,s,c,d){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,S=e.expirationTimes,E=e.hiddenUpdates;for(a=g&~a;0<a;){var z=31-xt(a),B=1<<z;b[z]=0,S[z]=-1;var k=E[z];if(k!==null)for(E[z]=null,z=0;z<k.length;z++){var R=k[z];R!==null&&(R.lane&=-536870913)}a&=~B}s!==0&&yu(e,s,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~t))}function yu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-xt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function vu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-xt(a),c=1<<s;c&t|e[s]&t&&(e[s]|=t),a&=~c}}function bu(e,t){var a=t&-t;return a=(a&42)!==0?1:bl(a),(a&(e.suspendedLanes|t))!==0?0:a}function bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xu(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:im(e.type))}function _u(e,t){var a=G.p;try{return G.p=e,t()}finally{G.p=a}}var xa=Math.random().toString(36).slice(2),nt="__reactFiber$"+xa,ut="__reactProps$"+xa,En="__reactContainer$"+xa,_l="__reactEvents$"+xa,Kg="__reactListeners$"+xa,Xg="__reactHandles$"+xa,wu="__reactResources$"+xa,Ms="__reactMarker$"+xa;function wl(e){delete e[nt],delete e[ut],delete e[_l],delete e[Kg],delete e[Xg]}function Tn(e){var t=e[nt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[En]||a[nt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Yf(e);e!==null;){if(a=e[nt])return a;e=Yf(e)}return t}e=a,a=e.parentNode}return null}function On(e){if(e=e[nt]||e[En]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function qs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function kn(e){var t=e[wu];return t||(t=e[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ms]=!0}var Su=new Set,ju={};function en(e,t){Rn(e,t),Rn(e+"Capture",t)}function Rn(e,t){for(ju[e]=t,e=0;e<t.length;e++)Su.add(t[e])}var Jg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cu={},Au={};function Pg(e){return gl.call(Au,e)?!0:gl.call(Cu,e)?!1:Jg.test(e)?Au[e]=!0:(Cu[e]=!0,!1)}function Gr(e,t,a){if(Pg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function $r(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Wt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zg(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,d=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sl(e){if(!e._valueTracker){var t=Nu(e)?"checked":"value";e._valueTracker=Zg(e,t,""+e[t])}}function Eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Nu(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ig=/[\n"\\]/g;function kt(e){return e.replace(Ig,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function jl(e,t,a,s,c,d,g,b){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Cl(e,g,Ot(t)):a!=null?Cl(e,g,Ot(a)):s!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Ot(b):e.removeAttribute("name")}function Tu(e,t,a,s,c,d,g,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Sl(e);return}a=a!=null?""+Ot(a):"",t=t!=null?""+Ot(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Sl(e)}function Cl(e,t,a){t==="number"&&Vr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Un(e,t,a,s){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Ot(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Ou(e,t,a){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ot(a):""}function ku(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(i(92));if(Ie(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Ot(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Sl(e)}function zn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Wg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ru(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Wg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Uu(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&a[c]!==s&&Ru(e,c,s)}else for(var d in t)t.hasOwnProperty(d)&&Ru(e,d,t[d])}function Al(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),e0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yr(e){return e0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ft(){}var Nl=null;function El(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dn=null,Mn=null;function zu(e){var t=On(e);if(t&&(e=t.stateNode)){var a=e[ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(jl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var c=s[ut]||null;if(!c)throw Error(i(90));jl(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Eu(s)}break e;case"textarea":Ou(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Un(e,!!a.multiple,t,!1)}}}var Tl=!1;function Du(e,t,a){if(Tl)return e(t,a);Tl=!0;try{var s=e(t);return s}finally{if(Tl=!1,(Dn!==null||Mn!==null)&&(ki(),Dn&&(t=Dn,e=Mn,Mn=Dn=null,zu(t),e)))for(t=0;t<e.length;t++)zu(e[t])}}function Bs(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ut]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=!1;if(ea)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Ol=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Ol=!1}var _a=null,kl=null,Qr=null;function Mu(){if(Qr)return Qr;var e,t=kl,a=t.length,s,c="value"in _a?_a.value:_a.textContent,d=c.length;for(e=0;e<a&&t[e]===c[e];e++);var g=a-e;for(s=1;s<=g&&t[a-s]===c[d-s];s++);return Qr=c.slice(e,1<s?1-s:void 0)}function Kr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xr(){return!0}function qu(){return!1}function dt(e){function t(a,s,c,d,g){this._reactName=a,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Xr:qu,this.isPropagationStopped=qu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),t}var tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jr=dt(tn),Hs=x({},tn,{view:0,detail:0}),t0=dt(Hs),Rl,Ul,Gs,Pr=x({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gs&&(Gs&&e.type==="mousemove"?(Rl=e.screenX-Gs.screenX,Ul=e.screenY-Gs.screenY):Ul=Rl=0,Gs=e),Rl)},movementY:function(e){return"movementY"in e?e.movementY:Ul}}),Bu=dt(Pr),a0=x({},Pr,{dataTransfer:0}),n0=dt(a0),s0=x({},Hs,{relatedTarget:0}),zl=dt(s0),r0=x({},tn,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=dt(r0),l0=x({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c0=dt(l0),o0=x({},tn,{data:0}),Lu=dt(o0),u0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h0[e])?!!t[e]:!1}function Dl(){return f0}var m0=x({},Hs,{key:function(e){if(e.key){var t=u0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?d0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(e){return e.type==="keypress"?Kr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g0=dt(m0),p0=x({},Pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hu=dt(p0),y0=x({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),v0=dt(y0),b0=x({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0}),x0=dt(b0),_0=x({},Pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w0=dt(_0),S0=x({},tn,{newState:0,oldState:0}),j0=dt(S0),C0=[9,13,27,32],Ml=ea&&"CompositionEvent"in window,$s=null;ea&&"documentMode"in document&&($s=document.documentMode);var A0=ea&&"TextEvent"in window&&!$s,Gu=ea&&(!Ml||$s&&8<$s&&11>=$s),$u=" ",Vu=!1;function Yu(e,t){switch(e){case"keyup":return C0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function N0(e,t){switch(e){case"compositionend":return Qu(t);case"keypress":return t.which!==32?null:(Vu=!0,$u);case"textInput":return e=t.data,e===$u&&Vu?null:e;default:return null}}function E0(e,t){if(qn)return e==="compositionend"||!Ml&&Yu(e,t)?(e=Mu(),Qr=kl=_a=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gu&&t.locale!=="ko"?null:t.data;default:return null}}var T0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T0[e.type]:t==="textarea"}function Xu(e,t,a,s){Dn?Mn?Mn.push(s):Mn=[s]:Dn=s,t=Bi(t,"onChange"),0<t.length&&(a=new Jr("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Vs=null,Ys=null;function O0(e){Of(e,0)}function Zr(e){var t=qs(e);if(Eu(t))return e}function Ju(e,t){if(e==="change")return t}var Pu=!1;if(ea){var ql;if(ea){var Bl="oninput"in document;if(!Bl){var Zu=document.createElement("div");Zu.setAttribute("oninput","return;"),Bl=typeof Zu.oninput=="function"}ql=Bl}else ql=!1;Pu=ql&&(!document.documentMode||9<document.documentMode)}function Iu(){Vs&&(Vs.detachEvent("onpropertychange",Wu),Ys=Vs=null)}function Wu(e){if(e.propertyName==="value"&&Zr(Ys)){var t=[];Xu(t,Ys,e,El(e)),Du(O0,t)}}function k0(e,t,a){e==="focusin"?(Iu(),Vs=t,Ys=a,Vs.attachEvent("onpropertychange",Wu)):e==="focusout"&&Iu()}function R0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zr(Ys)}function U0(e,t){if(e==="click")return Zr(t)}function z0(e,t){if(e==="input"||e==="change")return Zr(t)}function D0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:D0;function Qs(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var c=a[s];if(!gl.call(t,c)||!_t(e[c],t[c]))return!1}return!0}function Fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ed(e,t){var a=Fu(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fu(a)}}function td(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?td(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Vr(e.document)}return t}function Ll(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var M0=ea&&"documentMode"in document&&11>=document.documentMode,Bn=null,Hl=null,Ks=null,Gl=!1;function nd(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gl||Bn==null||Bn!==Vr(s)||(s=Bn,"selectionStart"in s&&Ll(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ks&&Qs(Ks,s)||(Ks=s,s=Bi(Hl,"onSelect"),0<s.length&&(t=new Jr("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Bn)))}function an(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ln={animationend:an("Animation","AnimationEnd"),animationiteration:an("Animation","AnimationIteration"),animationstart:an("Animation","AnimationStart"),transitionrun:an("Transition","TransitionRun"),transitionstart:an("Transition","TransitionStart"),transitioncancel:an("Transition","TransitionCancel"),transitionend:an("Transition","TransitionEnd")},$l={},sd={};ea&&(sd=document.createElement("div").style,"AnimationEvent"in window||(delete Ln.animationend.animation,delete Ln.animationiteration.animation,delete Ln.animationstart.animation),"TransitionEvent"in window||delete Ln.transitionend.transition);function nn(e){if($l[e])return $l[e];if(!Ln[e])return e;var t=Ln[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in sd)return $l[e]=t[a];return e}var rd=nn("animationend"),id=nn("animationiteration"),ld=nn("animationstart"),q0=nn("transitionrun"),B0=nn("transitionstart"),L0=nn("transitioncancel"),cd=nn("transitionend"),od=new Map,Vl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vl.push("scrollEnd");function $t(e,t){od.set(e,t),en(t,[e])}var Ir=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rt=[],Hn=0,Yl=0;function Wr(){for(var e=Hn,t=Yl=Hn=0;t<e;){var a=Rt[t];Rt[t++]=null;var s=Rt[t];Rt[t++]=null;var c=Rt[t];Rt[t++]=null;var d=Rt[t];if(Rt[t++]=null,s!==null&&c!==null){var g=s.pending;g===null?c.next=c:(c.next=g.next,g.next=c),s.pending=c}d!==0&&ud(a,c,d)}}function Fr(e,t,a,s){Rt[Hn++]=e,Rt[Hn++]=t,Rt[Hn++]=a,Rt[Hn++]=s,Yl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ql(e,t,a,s){return Fr(e,t,a,s),ei(e)}function sn(e,t){return Fr(e,null,null,t),ei(e)}function ud(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var c=!1,d=e.return;d!==null;)d.childLanes|=a,s=d.alternate,s!==null&&(s.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-xt(a),e=d.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=a|536870912),d):null}function ei(e){if(50<mr)throw mr=0,eo=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Gn={};function H0(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,a,s){return new H0(e,t,a,s)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ta(e,t){var a=e.alternate;return a===null?(a=wt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function dd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ti(e,t,a,s,c,d){var g=0;if(s=e,typeof e=="function")Kl(e)&&(g=1);else if(typeof e=="string")g=Qp(e,a,qe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=wt(31,a,t,c),e.elementType=J,e.lanes=d,e;case T:return rn(a.children,c,d,t);case U:g=8,c|=24;break;case q:return e=wt(12,a,t,c|2),e.elementType=q,e.lanes=d,e;case Y:return e=wt(13,a,t,c),e.elementType=Y,e.lanes=d,e;case $:return e=wt(19,a,t,c),e.elementType=$,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:g=10;break e;case L:g=9;break e;case V:g=11;break e;case ee:g=14;break e;case ce:g=16,s=null;break e}g=29,a=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=wt(g,a,t,c),t.elementType=e,t.type=s,t.lanes=d,t}function rn(e,t,a,s){return e=wt(7,e,s,t),e.lanes=a,e}function Xl(e,t,a){return e=wt(6,e,null,t),e.lanes=a,e}function hd(e){var t=wt(18,null,null,0);return t.stateNode=e,t}function Jl(e,t,a){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fd=new WeakMap;function Ut(e,t){if(typeof e=="object"&&e!==null){var a=fd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:hu(t)},fd.set(e,t),t)}return{value:e,source:t,stack:hu(t)}}var $n=[],Vn=0,ai=null,Xs=0,zt=[],Dt=0,wa=null,Xt=1,Jt="";function aa(e,t){$n[Vn++]=Xs,$n[Vn++]=ai,ai=e,Xs=t}function md(e,t,a){zt[Dt++]=Xt,zt[Dt++]=Jt,zt[Dt++]=wa,wa=e;var s=Xt;e=Jt;var c=32-xt(s)-1;s&=~(1<<c),a+=1;var d=32-xt(t)+c;if(30<d){var g=c-c%5;d=(s&(1<<g)-1).toString(32),s>>=g,c-=g,Xt=1<<32-xt(t)+c|a<<c|s,Jt=d+e}else Xt=1<<d|a<<c|s,Jt=e}function Pl(e){e.return!==null&&(aa(e,1),md(e,1,0))}function Zl(e){for(;e===ai;)ai=$n[--Vn],$n[Vn]=null,Xs=$n[--Vn],$n[Vn]=null;for(;e===wa;)wa=zt[--Dt],zt[Dt]=null,Jt=zt[--Dt],zt[Dt]=null,Xt=zt[--Dt],zt[Dt]=null}function gd(e,t){zt[Dt++]=Xt,zt[Dt++]=Jt,zt[Dt++]=wa,Xt=t.id,Jt=t.overflow,wa=e}var st=null,Re=null,fe=!1,Sa=null,Mt=!1,Il=Error(i(519));function ja(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Js(Ut(t,e)),Il}function pd(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[nt]=e,t[ut]=s,a){case"dialog":ue("cancel",t),ue("close",t);break;case"iframe":case"object":case"embed":ue("load",t);break;case"video":case"audio":for(a=0;a<pr.length;a++)ue(pr[a],t);break;case"source":ue("error",t);break;case"img":case"image":case"link":ue("error",t),ue("load",t);break;case"details":ue("toggle",t);break;case"input":ue("invalid",t),Tu(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ue("invalid",t);break;case"textarea":ue("invalid",t),ku(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||zf(t.textContent,a)?(s.popover!=null&&(ue("beforetoggle",t),ue("toggle",t)),s.onScroll!=null&&ue("scroll",t),s.onScrollEnd!=null&&ue("scrollend",t),s.onClick!=null&&(t.onclick=Ft),t=!0):t=!1,t||ja(e,!0)}function yd(e){for(st=e.return;st;)switch(st.tag){case 5:case 31:case 13:Mt=!1;return;case 27:case 3:Mt=!0;return;default:st=st.return}}function Yn(e){if(e!==st)return!1;if(!fe)return yd(e),fe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||po(e.type,e.memoizedProps)),a=!a),a&&Re&&ja(e),yd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Re=Vf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Re=Vf(e)}else t===27?(t=Re,Ba(e.type)?(e=_o,_o=null,Re=e):Re=t):Re=st?Bt(e.stateNode.nextSibling):null;return!0}function ln(){Re=st=null,fe=!1}function Wl(){var e=Sa;return e!==null&&(gt===null?gt=e:gt.push.apply(gt,e),Sa=null),e}function Js(e){Sa===null?Sa=[e]:Sa.push(e)}var Fl=ze(null),cn=null,na=null;function Ca(e,t,a){me(Fl,t._currentValue),t._currentValue=a}function sa(e){e._currentValue=Fl.current,Ne(Fl)}function ec(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function tc(e,t,a,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var g=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var S=0;S<t.length;S++)if(b.context===t[S]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),ec(d.return,a,e),s||(g=null);break e}d=b.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(i(341));g.lanes|=a,d=g.alternate,d!==null&&(d.lanes|=a),ec(g,a,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Qn(e,t,a,s){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var b=c.type;_t(c.pendingProps.value,g.value)||(e!==null?e.push(b):e=[b])}}else if(c===Ve.current){if(g=c.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(_r):e=[_r])}c=c.return}e!==null&&tc(t,e,a,s),t.flags|=262144}function ni(e){for(e=e.firstContext;e!==null;){if(!_t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function on(e){cn=e,na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return vd(cn,e)}function si(e,t){return cn===null&&on(e),vd(e,t)}function vd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},na===null){if(e===null)throw Error(i(308));na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else na=na.next=t;return a}var G0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},$0=o.unstable_scheduleCallback,V0=o.unstable_NormalPriority,Ye={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ac(){return{controller:new G0,data:new Map,refCount:0}}function Ps(e){e.refCount--,e.refCount===0&&$0(V0,function(){e.controller.abort()})}var Zs=null,nc=0,Kn=0,Xn=null;function Y0(e,t){if(Zs===null){var a=Zs=[];nc=0,Kn=io(),Xn={status:"pending",value:void 0,then:function(s){a.push(s)}}}return nc++,t.then(bd,bd),t}function bd(){if(--nc===0&&Zs!==null){Xn!==null&&(Xn.status="fulfilled");var e=Zs;Zs=null,Kn=0,Xn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Q0(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),s}var xd=D.S;D.S=function(e,t){nf=vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Y0(e,t),xd!==null&&xd(e,t)};var un=ze(null);function sc(){var e=un.current;return e!==null?e:Ee.pooledCache}function ri(e,t){t===null?me(un,un.current):me(un,t.pool)}function _d(){var e=sc();return e===null?null:{parent:Ye._currentValue,pool:e}}var Jn=Error(i(460)),rc=Error(i(474)),ii=Error(i(542)),li={then:function(){}};function wd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Sd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ft,Ft),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e;default:if(typeof t.status=="string")t.then(Ft,Ft);else{if(e=Ee,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e}throw hn=t,Jn}}function dn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(hn=a,Jn):a}}var hn=null;function jd(){if(hn===null)throw Error(i(459));var e=hn;return hn=null,e}function Cd(e){if(e===Jn||e===ii)throw Error(i(483))}var Pn=null,Is=0;function ci(e){var t=Is;return Is+=1,Pn===null&&(Pn=[]),Sd(Pn,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function oi(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ad(e){function t(A,C){if(e){var N=A.deletions;N===null?(A.deletions=[C],A.flags|=16):N.push(C)}}function a(A,C){if(!e)return null;for(;C!==null;)t(A,C),C=C.sibling;return null}function s(A){for(var C=new Map;A!==null;)A.key!==null?C.set(A.key,A):C.set(A.index,A),A=A.sibling;return C}function c(A,C){return A=ta(A,C),A.index=0,A.sibling=null,A}function d(A,C,N){return A.index=N,e?(N=A.alternate,N!==null?(N=N.index,N<C?(A.flags|=67108866,C):N):(A.flags|=67108866,C)):(A.flags|=1048576,C)}function g(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function b(A,C,N,M){return C===null||C.tag!==6?(C=Xl(N,A.mode,M),C.return=A,C):(C=c(C,N),C.return=A,C)}function S(A,C,N,M){var I=N.type;return I===T?z(A,C,N.props.children,M,N.key):C!==null&&(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ce&&dn(I)===C.type)?(C=c(C,N.props),Ws(C,N),C.return=A,C):(C=ti(N.type,N.key,N.props,null,A.mode,M),Ws(C,N),C.return=A,C)}function E(A,C,N,M){return C===null||C.tag!==4||C.stateNode.containerInfo!==N.containerInfo||C.stateNode.implementation!==N.implementation?(C=Jl(N,A.mode,M),C.return=A,C):(C=c(C,N.children||[]),C.return=A,C)}function z(A,C,N,M,I){return C===null||C.tag!==7?(C=rn(N,A.mode,M,I),C.return=A,C):(C=c(C,N),C.return=A,C)}function B(A,C,N){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Xl(""+C,A.mode,N),C.return=A,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case w:return N=ti(C.type,C.key,C.props,null,A.mode,N),Ws(N,C),N.return=A,N;case j:return C=Jl(C,A.mode,N),C.return=A,C;case ce:return C=dn(C),B(A,C,N)}if(Ie(C)||_e(C))return C=rn(C,A.mode,N,null),C.return=A,C;if(typeof C.then=="function")return B(A,ci(C),N);if(C.$$typeof===H)return B(A,si(A,C),N);oi(A,C)}return null}function k(A,C,N,M){var I=C!==null?C.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return I!==null?null:b(A,C,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case w:return N.key===I?S(A,C,N,M):null;case j:return N.key===I?E(A,C,N,M):null;case ce:return N=dn(N),k(A,C,N,M)}if(Ie(N)||_e(N))return I!==null?null:z(A,C,N,M,null);if(typeof N.then=="function")return k(A,C,ci(N),M);if(N.$$typeof===H)return k(A,C,si(A,N),M);oi(A,N)}return null}function R(A,C,N,M,I){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return A=A.get(N)||null,b(C,A,""+M,I);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return A=A.get(M.key===null?N:M.key)||null,S(C,A,M,I);case j:return A=A.get(M.key===null?N:M.key)||null,E(C,A,M,I);case ce:return M=dn(M),R(A,C,N,M,I)}if(Ie(M)||_e(M))return A=A.get(N)||null,z(C,A,M,I,null);if(typeof M.then=="function")return R(A,C,N,ci(M),I);if(M.$$typeof===H)return R(A,C,N,si(C,M),I);oi(C,M)}return null}function Q(A,C,N,M){for(var I=null,pe=null,P=C,ie=C=0,he=null;P!==null&&ie<N.length;ie++){P.index>ie?(he=P,P=null):he=P.sibling;var ye=k(A,P,N[ie],M);if(ye===null){P===null&&(P=he);break}e&&P&&ye.alternate===null&&t(A,P),C=d(ye,C,ie),pe===null?I=ye:pe.sibling=ye,pe=ye,P=he}if(ie===N.length)return a(A,P),fe&&aa(A,ie),I;if(P===null){for(;ie<N.length;ie++)P=B(A,N[ie],M),P!==null&&(C=d(P,C,ie),pe===null?I=P:pe.sibling=P,pe=P);return fe&&aa(A,ie),I}for(P=s(P);ie<N.length;ie++)he=R(P,A,ie,N[ie],M),he!==null&&(e&&he.alternate!==null&&P.delete(he.key===null?ie:he.key),C=d(he,C,ie),pe===null?I=he:pe.sibling=he,pe=he);return e&&P.forEach(function(Va){return t(A,Va)}),fe&&aa(A,ie),I}function F(A,C,N,M){if(N==null)throw Error(i(151));for(var I=null,pe=null,P=C,ie=C=0,he=null,ye=N.next();P!==null&&!ye.done;ie++,ye=N.next()){P.index>ie?(he=P,P=null):he=P.sibling;var Va=k(A,P,ye.value,M);if(Va===null){P===null&&(P=he);break}e&&P&&Va.alternate===null&&t(A,P),C=d(Va,C,ie),pe===null?I=Va:pe.sibling=Va,pe=Va,P=he}if(ye.done)return a(A,P),fe&&aa(A,ie),I;if(P===null){for(;!ye.done;ie++,ye=N.next())ye=B(A,ye.value,M),ye!==null&&(C=d(ye,C,ie),pe===null?I=ye:pe.sibling=ye,pe=ye);return fe&&aa(A,ie),I}for(P=s(P);!ye.done;ie++,ye=N.next())ye=R(P,A,ie,ye.value,M),ye!==null&&(e&&ye.alternate!==null&&P.delete(ye.key===null?ie:ye.key),C=d(ye,C,ie),pe===null?I=ye:pe.sibling=ye,pe=ye);return e&&P.forEach(function(ay){return t(A,ay)}),fe&&aa(A,ie),I}function Ae(A,C,N,M){if(typeof N=="object"&&N!==null&&N.type===T&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case w:e:{for(var I=N.key;C!==null;){if(C.key===I){if(I=N.type,I===T){if(C.tag===7){a(A,C.sibling),M=c(C,N.props.children),M.return=A,A=M;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ce&&dn(I)===C.type){a(A,C.sibling),M=c(C,N.props),Ws(M,N),M.return=A,A=M;break e}a(A,C);break}else t(A,C);C=C.sibling}N.type===T?(M=rn(N.props.children,A.mode,M,N.key),M.return=A,A=M):(M=ti(N.type,N.key,N.props,null,A.mode,M),Ws(M,N),M.return=A,A=M)}return g(A);case j:e:{for(I=N.key;C!==null;){if(C.key===I)if(C.tag===4&&C.stateNode.containerInfo===N.containerInfo&&C.stateNode.implementation===N.implementation){a(A,C.sibling),M=c(C,N.children||[]),M.return=A,A=M;break e}else{a(A,C);break}else t(A,C);C=C.sibling}M=Jl(N,A.mode,M),M.return=A,A=M}return g(A);case ce:return N=dn(N),Ae(A,C,N,M)}if(Ie(N))return Q(A,C,N,M);if(_e(N)){if(I=_e(N),typeof I!="function")throw Error(i(150));return N=I.call(N),F(A,C,N,M)}if(typeof N.then=="function")return Ae(A,C,ci(N),M);if(N.$$typeof===H)return Ae(A,C,si(A,N),M);oi(A,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,C!==null&&C.tag===6?(a(A,C.sibling),M=c(C,N),M.return=A,A=M):(a(A,C),M=Xl(N,A.mode,M),M.return=A,A=M),g(A)):a(A,C)}return function(A,C,N,M){try{Is=0;var I=Ae(A,C,N,M);return Pn=null,I}catch(P){if(P===Jn||P===ii)throw P;var pe=wt(29,P,null,A.mode);return pe.lanes=M,pe.return=A,pe}finally{}}}var fn=Ad(!0),Nd=Ad(!1),Aa=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ea(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(be&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=ei(e),ud(e,null,a),t}return Fr(e,s,t,a),ei(e)}function Fs(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,vu(e,a)}}function cc(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var c=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?c=d=g:d=d.next=g,a=a.next}while(a!==null);d===null?c=d=t:d=d.next=t}else c=d=t;a={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var oc=!1;function er(){if(oc){var e=Xn;if(e!==null)throw e}}function tr(e,t,a,s){oc=!1;var c=e.updateQueue;Aa=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var S=b,E=S.next;S.next=null,g===null?d=E:g.next=E,g=S;var z=e.alternate;z!==null&&(z=z.updateQueue,b=z.lastBaseUpdate,b!==g&&(b===null?z.firstBaseUpdate=E:b.next=E,z.lastBaseUpdate=S))}if(d!==null){var B=c.baseState;g=0,z=E=S=null,b=d;do{var k=b.lane&-536870913,R=k!==b.lane;if(R?(de&k)===k:(s&k)===k){k!==0&&k===Kn&&(oc=!0),z!==null&&(z=z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Q=e,F=b;k=t;var Ae=a;switch(F.tag){case 1:if(Q=F.payload,typeof Q=="function"){B=Q.call(Ae,B,k);break e}B=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=F.payload,k=typeof Q=="function"?Q.call(Ae,B,k):Q,k==null)break e;B=x({},B,k);break e;case 2:Aa=!0}}k=b.callback,k!==null&&(e.flags|=64,R&&(e.flags|=8192),R=c.callbacks,R===null?c.callbacks=[k]:R.push(k))}else R={lane:k,tag:b.tag,payload:b.payload,callback:b.callback,next:null},z===null?(E=z=R,S=B):z=z.next=R,g|=k;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;R=b,b=R.next,R.next=null,c.lastBaseUpdate=R,c.shared.pending=null}}while(!0);z===null&&(S=B),c.baseState=S,c.firstBaseUpdate=E,c.lastBaseUpdate=z,d===null&&(c.shared.lanes=0),Ua|=g,e.lanes=g,e.memoizedState=B}}function Ed(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Td(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ed(a[e],t)}var Zn=ze(null),ui=ze(0);function Od(e,t){e=fa,me(ui,e),me(Zn,t),fa=e|t.baseLanes}function uc(){me(ui,fa),me(Zn,Zn.current)}function dc(){fa=ui.current,Ne(Zn),Ne(ui)}var St=ze(null),qt=null;function Ta(e){var t=e.alternate;me(He,He.current&1),me(St,e),qt===null&&(t===null||Zn.current!==null||t.memoizedState!==null)&&(qt=e)}function hc(e){me(He,He.current),me(St,e),qt===null&&(qt=e)}function kd(e){e.tag===22?(me(He,He.current),me(St,e),qt===null&&(qt=e)):Oa()}function Oa(){me(He,He.current),me(St,St.current)}function jt(e){Ne(St),qt===e&&(qt=null),Ne(He)}var He=ze(0);function di(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bo(a)||xo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=0,re=null,je=null,Qe=null,hi=!1,In=!1,mn=!1,fi=0,ar=0,Wn=null,K0=0;function Be(){throw Error(i(321))}function fc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!_t(e[a],t[a]))return!1;return!0}function mc(e,t,a,s,c,d){return ra=d,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?mh:Tc,mn=!1,d=a(s,c),mn=!1,In&&(d=Ud(t,a,s,c)),Rd(e),d}function Rd(e){D.H=rr;var t=je!==null&&je.next!==null;if(ra=0,Qe=je=re=null,hi=!1,ar=0,Wn=null,t)throw Error(i(300));e===null||Ke||(e=e.dependencies,e!==null&&ni(e)&&(Ke=!0))}function Ud(e,t,a,s){re=e;var c=0;do{if(In&&(Wn=null),ar=0,In=!1,25<=c)throw Error(i(301));if(c+=1,Qe=je=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}D.H=gh,d=t(a,s)}while(In);return d}function X0(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?nr(t):t,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(re.flags|=1024),t}function gc(){var e=fi!==0;return fi=0,e}function pc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function yc(e){if(hi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}hi=!1}ra=0,Qe=je=re=null,In=!1,ar=fi=0,Wn=null}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?re.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ge(){if(je===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=Qe===null?re.memoizedState:Qe.next;if(t!==null)Qe=t,je=e;else{if(e===null)throw re.alternate===null?Error(i(467)):Error(i(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Qe===null?re.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function mi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nr(e){var t=ar;return ar+=1,Wn===null&&(Wn=[]),e=Sd(Wn,e,t),t=re,(Qe===null?t.memoizedState:Qe.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?mh:Tc),e}function gi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return nr(e);if(e.$$typeof===H)return rt(e)}throw Error(i(438,String(e)))}function vc(e){var t=null,a=re.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=re.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=mi(),re.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=Te;return t.index++,a}function ia(e,t){return typeof t=="function"?t(e):t}function pi(e){var t=Ge();return bc(t,je,e)}function bc(e,t,a){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=a;var c=e.baseQueue,d=s.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}t.baseQueue=c=d,s.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var b=g=null,S=null,E=t,z=!1;do{var B=E.lane&-536870913;if(B!==E.lane?(de&B)===B:(ra&B)===B){var k=E.revertLane;if(k===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),B===Kn&&(z=!0);else if((ra&k)===k){E=E.next,k===Kn&&(z=!0);continue}else B={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},S===null?(b=S=B,g=d):S=S.next=B,re.lanes|=k,Ua|=k;B=E.action,mn&&a(d,B),d=E.hasEagerState?E.eagerState:a(d,B)}else k={lane:B,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},S===null?(b=S=k,g=d):S=S.next=k,re.lanes|=B,Ua|=B;E=E.next}while(E!==null&&E!==t);if(S===null?g=d:S.next=b,!_t(d,e.memoizedState)&&(Ke=!0,z&&(a=Xn,a!==null)))throw a;e.memoizedState=d,e.baseState=g,e.baseQueue=S,s.lastRenderedState=d}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function xc(e){var t=Ge(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,c=a.pending,d=t.memoizedState;if(c!==null){a.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);_t(d,t.memoizedState)||(Ke=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),a.lastRenderedState=d}return[d,s]}function zd(e,t,a){var s=re,c=Ge(),d=fe;if(d){if(a===void 0)throw Error(i(407));a=a()}else a=t();var g=!_t((je||c).memoizedState,a);if(g&&(c.memoizedState=a,Ke=!0),c=c.queue,Sc(qd.bind(null,s,c,e),[e]),c.getSnapshot!==t||g||Qe!==null&&Qe.memoizedState.tag&1){if(s.flags|=2048,Fn(9,{destroy:void 0},Md.bind(null,s,c,a,t),null),Ee===null)throw Error(i(349));d||(ra&127)!==0||Dd(s,t,a)}return a}function Dd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=re.updateQueue,t===null?(t=mi(),re.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Md(e,t,a,s){t.value=a,t.getSnapshot=s,Bd(t)&&Ld(e)}function qd(e,t,a){return a(function(){Bd(t)&&Ld(e)})}function Bd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!_t(e,a)}catch{return!0}}function Ld(e){var t=sn(e,2);t!==null&&pt(t,e,2)}function _c(e){var t=ct();if(typeof e=="function"){var a=e;if(e=a(),mn){ba(!0);try{a()}finally{ba(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e},t}function Hd(e,t,a,s){return e.baseState=a,bc(e,je,typeof s=="function"?s:ia)}function J0(e,t,a,s,c){if(bi(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};D.T!==null?a(!0):d.isTransition=!1,s(d),a=t.pending,a===null?(d.next=t.pending=d,Gd(t,d)):(d.next=a.next,t.pending=a.next=d)}}function Gd(e,t){var a=t.action,s=t.payload,c=e.state;if(t.isTransition){var d=D.T,g={};D.T=g;try{var b=a(c,s),S=D.S;S!==null&&S(g,b),$d(e,t,b)}catch(E){wc(e,t,E)}finally{d!==null&&g.types!==null&&(d.types=g.types),D.T=d}}else try{d=a(c,s),$d(e,t,d)}catch(E){wc(e,t,E)}}function $d(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Vd(e,t,s)},function(s){return wc(e,t,s)}):Vd(e,t,a)}function Vd(e,t,a){t.status="fulfilled",t.value=a,Yd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Gd(e,a)))}function wc(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Yd(t),t=t.next;while(t!==s)}e.action=null}function Yd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qd(e,t){return t}function Kd(e,t){if(fe){var a=Ee.formState;if(a!==null){e:{var s=re;if(fe){if(Re){t:{for(var c=Re,d=Mt;c.nodeType!==8;){if(!d){c=null;break t}if(c=Bt(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Re=Bt(c.nextSibling),s=c.data==="F!";break e}}ja(s)}s=!1}s&&(t=a[0])}}return a=ct(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:t},a.queue=s,a=dh.bind(null,re,s),s.dispatch=a,s=_c(!1),d=Ec.bind(null,re,!1,s.queue),s=ct(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,a=J0.bind(null,re,c,d,a),c.dispatch=a,s.memoizedState=e,[t,a,!1]}function Xd(e){var t=Ge();return Jd(t,je,e)}function Jd(e,t,a){if(t=bc(e,t,Qd)[0],e=pi(ia)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=nr(t)}catch(g){throw g===Jn?ii:g}else s=t;t=Ge();var c=t.queue,d=c.dispatch;return a!==t.memoizedState&&(re.flags|=2048,Fn(9,{destroy:void 0},P0.bind(null,c,a),null)),[s,d,e]}function P0(e,t){e.action=t}function Pd(e){var t=Ge(),a=je;if(a!==null)return Jd(t,a,e);Ge(),t=t.memoizedState,a=Ge();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Fn(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=re.updateQueue,t===null&&(t=mi(),re.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Zd(){return Ge().memoizedState}function yi(e,t,a,s){var c=ct();re.flags|=e,c.memoizedState=Fn(1|t,{destroy:void 0},a,s===void 0?null:s)}function vi(e,t,a,s){var c=Ge();s=s===void 0?null:s;var d=c.memoizedState.inst;je!==null&&s!==null&&fc(s,je.memoizedState.deps)?c.memoizedState=Fn(t,d,a,s):(re.flags|=e,c.memoizedState=Fn(1|t,d,a,s))}function Id(e,t){yi(8390656,8,e,t)}function Sc(e,t){vi(2048,8,e,t)}function Z0(e){re.flags|=4;var t=re.updateQueue;if(t===null)t=mi(),re.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Wd(e){var t=Ge().memoizedState;return Z0({ref:t,nextImpl:e}),function(){if((be&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Fd(e,t){return vi(4,2,e,t)}function eh(e,t){return vi(4,4,e,t)}function th(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ah(e,t,a){a=a!=null?a.concat([e]):null,vi(4,4,th.bind(null,t,e),a)}function jc(){}function nh(e,t){var a=Ge();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&fc(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function sh(e,t){var a=Ge();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&fc(t,s[1]))return s[0];if(s=e(),mn){ba(!0);try{e()}finally{ba(!1)}}return a.memoizedState=[s,t],s}function Cc(e,t,a){return a===void 0||(ra&1073741824)!==0&&(de&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=rf(),re.lanes|=e,Ua|=e,a)}function rh(e,t,a,s){return _t(a,t)?a:Zn.current!==null?(e=Cc(e,a,s),_t(e,t)||(Ke=!0),e):(ra&42)===0||(ra&1073741824)!==0&&(de&261930)===0?(Ke=!0,e.memoizedState=a):(e=rf(),re.lanes|=e,Ua|=e,t)}function ih(e,t,a,s,c){var d=G.p;G.p=d!==0&&8>d?d:8;var g=D.T,b={};D.T=b,Ec(e,!1,t,a);try{var S=c(),E=D.S;if(E!==null&&E(b,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var z=Q0(S,s);sr(e,t,z,Nt(e))}else sr(e,t,s,Nt(e))}catch(B){sr(e,t,{then:function(){},status:"rejected",reason:B},Nt())}finally{G.p=d,g!==null&&b.types!==null&&(g.types=b.types),D.T=g}}function I0(){}function Ac(e,t,a,s){if(e.tag!==5)throw Error(i(476));var c=lh(e).queue;ih(e,c,t,X,a===null?I0:function(){return ch(e),a(s)})}function lh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:X},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ch(e){var t=lh(e);t.next===null&&(t=e.alternate.memoizedState),sr(e,t.next.queue,{},Nt())}function Nc(){return rt(_r)}function oh(){return Ge().memoizedState}function uh(){return Ge().memoizedState}function W0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Nt();e=Na(a);var s=Ea(t,e,a);s!==null&&(pt(s,t,a),Fs(s,t,a)),t={cache:ac()},e.payload=t;return}t=t.return}}function F0(e,t,a){var s=Nt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bi(e)?hh(t,a):(a=Ql(e,t,a,s),a!==null&&(pt(a,e,s),fh(a,t,s)))}function dh(e,t,a){var s=Nt();sr(e,t,a,s)}function sr(e,t,a,s){var c={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bi(e))hh(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,b=d(g,a);if(c.hasEagerState=!0,c.eagerState=b,_t(b,g))return Fr(e,t,c,0),Ee===null&&Wr(),!1}catch{}finally{}if(a=Ql(e,t,c,s),a!==null)return pt(a,e,s),fh(a,t,s),!0}return!1}function Ec(e,t,a,s){if(s={lane:2,revertLane:io(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},bi(e)){if(t)throw Error(i(479))}else t=Ql(e,a,s,2),t!==null&&pt(t,e,2)}function bi(e){var t=e.alternate;return e===re||t!==null&&t===re}function hh(e,t){In=hi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function fh(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,vu(e,a)}}var rr={readContext:rt,use:gi,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};rr.useEffectEvent=Be;var mh={readContext:rt,use:gi,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:Id,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,yi(4194308,4,th.bind(null,t,e),a)},useLayoutEffect:function(e,t){return yi(4194308,4,e,t)},useInsertionEffect:function(e,t){yi(4,2,e,t)},useMemo:function(e,t){var a=ct();t=t===void 0?null:t;var s=e();if(mn){ba(!0);try{e()}finally{ba(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=ct();if(a!==void 0){var c=a(t);if(mn){ba(!0);try{a(t)}finally{ba(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=F0.bind(null,re,e),[s.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:function(e){e=_c(e);var t=e.queue,a=dh.bind(null,re,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jc,useDeferredValue:function(e,t){var a=ct();return Cc(a,e,t)},useTransition:function(){var e=_c(!1);return e=ih.bind(null,re,e.queue,!0,!1),ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=re,c=ct();if(fe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Ee===null)throw Error(i(349));(de&127)!==0||Dd(s,t,a)}c.memoizedState=a;var d={value:a,getSnapshot:t};return c.queue=d,Id(qd.bind(null,s,d,e),[e]),s.flags|=2048,Fn(9,{destroy:void 0},Md.bind(null,s,d,a,t),null),a},useId:function(){var e=ct(),t=Ee.identifierPrefix;if(fe){var a=Jt,s=Xt;a=(s&~(1<<32-xt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=fi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=K0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Nc,useFormState:Kd,useActionState:Kd,useOptimistic:function(e){var t=ct();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ec.bind(null,re,!0,a),a.dispatch=t,[e,t]},useMemoCache:vc,useCacheRefresh:function(){return ct().memoizedState=W0.bind(null,re)},useEffectEvent:function(e){var t=ct(),a={impl:e};return t.memoizedState=a,function(){if((be&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Tc={readContext:rt,use:gi,useCallback:nh,useContext:rt,useEffect:Sc,useImperativeHandle:ah,useInsertionEffect:Fd,useLayoutEffect:eh,useMemo:sh,useReducer:pi,useRef:Zd,useState:function(){return pi(ia)},useDebugValue:jc,useDeferredValue:function(e,t){var a=Ge();return rh(a,je.memoizedState,e,t)},useTransition:function(){var e=pi(ia)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:nr(e),t]},useSyncExternalStore:zd,useId:oh,useHostTransitionStatus:Nc,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,t){var a=Ge();return Hd(a,je,e,t)},useMemoCache:vc,useCacheRefresh:uh};Tc.useEffectEvent=Wd;var gh={readContext:rt,use:gi,useCallback:nh,useContext:rt,useEffect:Sc,useImperativeHandle:ah,useInsertionEffect:Fd,useLayoutEffect:eh,useMemo:sh,useReducer:xc,useRef:Zd,useState:function(){return xc(ia)},useDebugValue:jc,useDeferredValue:function(e,t){var a=Ge();return je===null?Cc(a,e,t):rh(a,je.memoizedState,e,t)},useTransition:function(){var e=xc(ia)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:nr(e),t]},useSyncExternalStore:zd,useId:oh,useHostTransitionStatus:Nc,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var a=Ge();return je!==null?Hd(a,je,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:vc,useCacheRefresh:uh};gh.useEffectEvent=Wd;function Oc(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var kc={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Nt(),c=Na(s);c.payload=t,a!=null&&(c.callback=a),t=Ea(e,c,s),t!==null&&(pt(t,e,s),Fs(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Nt(),c=Na(s);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Ea(e,c,s),t!==null&&(pt(t,e,s),Fs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Nt(),s=Na(a);s.tag=2,t!=null&&(s.callback=t),t=Ea(e,s,a),t!==null&&(pt(t,e,a),Fs(t,e,a))}};function ph(e,t,a,s,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,g):t.prototype&&t.prototype.isPureReactComponent?!Qs(a,s)||!Qs(c,d):!0}function yh(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&kc.enqueueReplaceState(t,t.state,null)}function gn(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function vh(e){Ir(e)}function bh(e){console.error(e)}function xh(e){Ir(e)}function xi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function _h(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Rc(e,t,a){return a=Na(a),a.tag=3,a.payload={element:null},a.callback=function(){xi(e,t)},a}function wh(e){return e=Na(e),e.tag=3,e}function Sh(e,t,a,s){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;e.payload=function(){return c(d)},e.callback=function(){_h(t,a,s)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){_h(t,a,s),typeof c!="function"&&(za===null?za=new Set([this]):za.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function ep(e,t,a,s,c){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Qn(t,a,c,!0),a=St.current,a!==null){switch(a.tag){case 31:case 13:return qt===null?Ri():a.alternate===null&&Le===0&&(Le=3),a.flags&=-257,a.flags|=65536,a.lanes=c,s===li?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),no(e,s,c)),!1;case 22:return a.flags|=65536,s===li?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),no(e,s,c)),!1}throw Error(i(435,a.tag))}return no(e,s,c),Ri(),!1}if(fe)return t=St.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==Il&&(e=Error(i(422),{cause:s}),Js(Ut(e,a)))):(s!==Il&&(t=Error(i(423),{cause:s}),Js(Ut(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=Ut(s,a),c=Rc(e.stateNode,s,c),cc(e,c),Le!==4&&(Le=2)),!1;var d=Error(i(520),{cause:s});if(d=Ut(d,a),fr===null?fr=[d]:fr.push(d),Le!==4&&(Le=2),t===null)return!0;s=Ut(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Rc(a.stateNode,s,e),cc(a,e),!1;case 1:if(t=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(za===null||!za.has(d))))return a.flags|=65536,c&=-c,a.lanes|=c,c=wh(c),Sh(c,e,a,s),cc(a,c),!1}a=a.return}while(a!==null);return!1}var Uc=Error(i(461)),Ke=!1;function it(e,t,a,s){t.child=e===null?Nd(t,null,a,s):fn(t,e.child,a,s)}function jh(e,t,a,s,c){a=a.render;var d=t.ref;if("ref"in s){var g={};for(var b in s)b!=="ref"&&(g[b]=s[b])}else g=s;return on(t),s=mc(e,t,a,g,d,c),b=gc(),e!==null&&!Ke?(pc(e,t,c),la(e,t,c)):(fe&&b&&Pl(t),t.flags|=1,it(e,t,s,c),t.child)}function Ch(e,t,a,s,c){if(e===null){var d=a.type;return typeof d=="function"&&!Kl(d)&&d.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=d,Ah(e,t,d,s,c)):(e=ti(a.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Gc(e,c)){var g=d.memoizedProps;if(a=a.compare,a=a!==null?a:Qs,a(g,s)&&e.ref===t.ref)return la(e,t,c)}return t.flags|=1,e=ta(d,s),e.ref=t.ref,e.return=t,t.child=e}function Ah(e,t,a,s,c){if(e!==null){var d=e.memoizedProps;if(Qs(d,s)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=s=d,Gc(e,c))(e.flags&131072)!==0&&(Ke=!0);else return t.lanes=e.lanes,la(e,t,c)}return zc(e,t,a,s,c)}function Nh(e,t,a,s){var c=s.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~d}else s=0,t.child=null;return Eh(e,t,d,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ri(t,d!==null?d.cachePool:null),d!==null?Od(t,d):uc(),kd(t);else return s=t.lanes=536870912,Eh(e,t,d!==null?d.baseLanes|a:a,a,s)}else d!==null?(ri(t,d.cachePool),Od(t,d),Oa(),t.memoizedState=null):(e!==null&&ri(t,null),uc(),Oa());return it(e,t,c,a),t.child}function ir(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Eh(e,t,a,s,c){var d=sc();return d=d===null?null:{parent:Ye._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&ri(t,null),uc(),kd(t),e!==null&&Qn(e,t,s,!0),t.childLanes=c,null}function _i(e,t){return t=Si({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Th(e,t,a){return fn(t,e.child,null,a),e=_i(t,t.pendingProps),e.flags|=2,jt(t),t.memoizedState=null,e}function tp(e,t,a){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(fe){if(s.mode==="hidden")return e=_i(t,s),t.lanes=536870912,ir(null,e);if(hc(t),(e=Re)?(e=$f(e,Mt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:Xt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},a=hd(e),a.return=t,t.child=a,st=t,Re=null)):e=null,e===null)throw ja(t);return t.lanes=536870912,null}return _i(t,s)}var d=e.memoizedState;if(d!==null){var g=d.dehydrated;if(hc(t),c)if(t.flags&256)t.flags&=-257,t=Th(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Ke||Qn(e,t,a,!1),c=(a&e.childLanes)!==0,Ke||c){if(s=Ee,s!==null&&(g=bu(s,a),g!==0&&g!==d.retryLane))throw d.retryLane=g,sn(e,g),pt(s,e,g),Uc;Ri(),t=Th(e,t,a)}else e=d.treeContext,Re=Bt(g.nextSibling),st=t,fe=!0,Sa=null,Mt=!1,e!==null&&gd(t,e),t=_i(t,s),t.flags|=4096;return t}return e=ta(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function wi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function zc(e,t,a,s,c){return on(t),a=mc(e,t,a,s,void 0,c),s=gc(),e!==null&&!Ke?(pc(e,t,c),la(e,t,c)):(fe&&s&&Pl(t),t.flags|=1,it(e,t,a,c),t.child)}function Oh(e,t,a,s,c,d){return on(t),t.updateQueue=null,a=Ud(t,s,a,c),Rd(e),s=gc(),e!==null&&!Ke?(pc(e,t,d),la(e,t,d)):(fe&&s&&Pl(t),t.flags|=1,it(e,t,a,d),t.child)}function kh(e,t,a,s,c){if(on(t),t.stateNode===null){var d=Gn,g=a.contextType;typeof g=="object"&&g!==null&&(d=rt(g)),d=new a(s,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=kc,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=s,d.state=t.memoizedState,d.refs={},ic(t),g=a.contextType,d.context=typeof g=="object"&&g!==null?rt(g):Gn,d.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Oc(t,a,g,s),d.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&kc.enqueueReplaceState(d,d.state,null),tr(t,s,d,c),er(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,S=gn(a,b);d.props=S;var E=d.context,z=a.contextType;g=Gn,typeof z=="object"&&z!==null&&(g=rt(z));var B=a.getDerivedStateFromProps;z=typeof B=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||E!==g)&&yh(t,d,s,g),Aa=!1;var k=t.memoizedState;d.state=k,tr(t,s,d,c),er(),E=t.memoizedState,b||k!==E||Aa?(typeof B=="function"&&(Oc(t,a,B,s),E=t.memoizedState),(S=Aa||ph(t,a,S,s,k,E,g))?(z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=E),d.props=s,d.state=E,d.context=g,s=S):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{d=t.stateNode,lc(e,t),g=t.memoizedProps,z=gn(a,g),d.props=z,B=t.pendingProps,k=d.context,E=a.contextType,S=Gn,typeof E=="object"&&E!==null&&(S=rt(E)),b=a.getDerivedStateFromProps,(E=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==B||k!==S)&&yh(t,d,s,S),Aa=!1,k=t.memoizedState,d.state=k,tr(t,s,d,c),er();var R=t.memoizedState;g!==B||k!==R||Aa||e!==null&&e.dependencies!==null&&ni(e.dependencies)?(typeof b=="function"&&(Oc(t,a,b,s),R=t.memoizedState),(z=Aa||ph(t,a,z,s,k,R,S)||e!==null&&e.dependencies!==null&&ni(e.dependencies))?(E||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,R,S),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,R,S)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=R),d.props=s,d.state=R,d.context=S,s=z):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),s=!1)}return d=s,wi(e,t),s=(t.flags&128)!==0,d||s?(d=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&s?(t.child=fn(t,e.child,null,c),t.child=fn(t,null,a,c)):it(e,t,a,c),t.memoizedState=d.state,e=t.child):e=la(e,t,c),e}function Rh(e,t,a,s){return ln(),t.flags|=256,it(e,t,a,s),t.child}var Dc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mc(e){return{baseLanes:e,cachePool:_d()}}function qc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=At),e}function Uh(e,t,a){var s=t.pendingProps,c=!1,d=(t.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(He.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(fe){if(c?Ta(t):Oa(),(e=Re)?(e=$f(e,Mt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:Xt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},a=hd(e),a.return=t,t.child=a,st=t,Re=null)):e=null,e===null)throw ja(t);return xo(e)?t.lanes=32:t.lanes=536870912,null}var b=s.children;return s=s.fallback,c?(Oa(),c=t.mode,b=Si({mode:"hidden",children:b},c),s=rn(s,c,a,null),b.return=t,s.return=t,b.sibling=s,t.child=b,s=t.child,s.memoizedState=Mc(a),s.childLanes=qc(e,g,a),t.memoizedState=Dc,ir(null,s)):(Ta(t),Bc(t,b))}var S=e.memoizedState;if(S!==null&&(b=S.dehydrated,b!==null)){if(d)t.flags&256?(Ta(t),t.flags&=-257,t=Lc(e,t,a)):t.memoizedState!==null?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),b=s.fallback,c=t.mode,s=Si({mode:"visible",children:s.children},c),b=rn(b,c,a,null),b.flags|=2,s.return=t,b.return=t,s.sibling=b,t.child=s,fn(t,e.child,null,a),s=t.child,s.memoizedState=Mc(a),s.childLanes=qc(e,g,a),t.memoizedState=Dc,t=ir(null,s));else if(Ta(t),xo(b)){if(g=b.nextSibling&&b.nextSibling.dataset,g)var E=g.dgst;g=E,s=Error(i(419)),s.stack="",s.digest=g,Js({value:s,source:null,stack:null}),t=Lc(e,t,a)}else if(Ke||Qn(e,t,a,!1),g=(a&e.childLanes)!==0,Ke||g){if(g=Ee,g!==null&&(s=bu(g,a),s!==0&&s!==S.retryLane))throw S.retryLane=s,sn(e,s),pt(g,e,s),Uc;bo(b)||Ri(),t=Lc(e,t,a)}else bo(b)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Re=Bt(b.nextSibling),st=t,fe=!0,Sa=null,Mt=!1,e!==null&&gd(t,e),t=Bc(t,s.children),t.flags|=4096);return t}return c?(Oa(),b=s.fallback,c=t.mode,S=e.child,E=S.sibling,s=ta(S,{mode:"hidden",children:s.children}),s.subtreeFlags=S.subtreeFlags&65011712,E!==null?b=ta(E,b):(b=rn(b,c,a,null),b.flags|=2),b.return=t,s.return=t,s.sibling=b,t.child=s,ir(null,s),s=t.child,b=e.child.memoizedState,b===null?b=Mc(a):(c=b.cachePool,c!==null?(S=Ye._currentValue,c=c.parent!==S?{parent:S,pool:S}:c):c=_d(),b={baseLanes:b.baseLanes|a,cachePool:c}),s.memoizedState=b,s.childLanes=qc(e,g,a),t.memoizedState=Dc,ir(e.child,s)):(Ta(t),a=e.child,e=a.sibling,a=ta(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function Bc(e,t){return t=Si({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Si(e,t){return e=wt(22,e,null,t),e.lanes=0,e}function Lc(e,t,a){return fn(t,e.child,null,a),e=Bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zh(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ec(e.return,t,a)}function Hc(e,t,a,s,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:c,treeForkCount:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=a,g.tailMode=c,g.treeForkCount=d)}function Dh(e,t,a){var s=t.pendingProps,c=s.revealOrder,d=s.tail;s=s.children;var g=He.current,b=(g&2)!==0;if(b?(g=g&1|2,t.flags|=128):g&=1,me(He,g),it(e,t,s,a),s=fe?Xs:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zh(e,a,t);else if(e.tag===19)zh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&di(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Hc(t,!1,c,a,d,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&di(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Hc(t,!0,a,null,d,s);break;case"together":Hc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function la(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Qn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=ta(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ta(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Gc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ni(e)))}function ap(e,t,a){switch(t.tag){case 3:Ht(t,t.stateNode.containerInfo),Ca(t,Ye,e.memoizedState.cache),ln();break;case 27:case 5:va(t);break;case 4:Ht(t,t.stateNode.containerInfo);break;case 10:Ca(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,hc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ta(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Uh(e,t,a):(Ta(t),e=la(e,t,a),e!==null?e.sibling:null);Ta(t);break;case 19:var c=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Qn(e,t,a,!1),s=(a&t.childLanes)!==0),c){if(s)return Dh(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),me(He,He.current),s)break;return null;case 22:return t.lanes=0,Nh(e,t,a,t.pendingProps);case 24:Ca(t,Ye,e.memoizedState.cache)}return la(e,t,a)}function Mh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ke=!0;else{if(!Gc(e,a)&&(t.flags&128)===0)return Ke=!1,ap(e,t,a);Ke=(e.flags&131072)!==0}else Ke=!1,fe&&(t.flags&1048576)!==0&&md(t,Xs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=dn(t.elementType),t.type=e,typeof e=="function")Kl(e)?(s=gn(e,s),t.tag=1,t=kh(null,t,e,s,a)):(t.tag=0,t=zc(null,t,e,s,a));else{if(e!=null){var c=e.$$typeof;if(c===V){t.tag=11,t=jh(null,t,e,s,a);break e}else if(c===ee){t.tag=14,t=Ch(null,t,e,s,a);break e}}throw t=Oe(e)||e,Error(i(306,t,""))}}return t;case 0:return zc(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,c=gn(s,t.pendingProps),kh(e,t,s,c,a);case 3:e:{if(Ht(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var d=t.memoizedState;c=d.element,lc(e,t),tr(t,s,null,a);var g=t.memoizedState;if(s=g.cache,Ca(t,Ye,s),s!==d.cache&&tc(t,[Ye],a,!0),er(),s=g.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Rh(e,t,s,a);break e}else if(s!==c){c=Ut(Error(i(424)),t),Js(c),t=Rh(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Re=Bt(e.firstChild),st=t,fe=!0,Sa=null,Mt=!0,a=Nd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ln(),s===c){t=la(e,t,a);break e}it(e,t,s,a)}t=t.child}return t;case 26:return wi(e,t),e===null?(a=Jf(t.type,null,t.pendingProps,null))?t.memoizedState=a:fe||(a=t.type,e=t.pendingProps,s=Li(Tt.current).createElement(a),s[nt]=t,s[ut]=e,lt(s,a,e),et(s),t.stateNode=s):t.memoizedState=Jf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return va(t),e===null&&fe&&(s=t.stateNode=Qf(t.type,t.pendingProps,Tt.current),st=t,Mt=!0,c=Re,Ba(t.type)?(_o=c,Re=Bt(s.firstChild)):Re=c),it(e,t,t.pendingProps.children,a),wi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&fe&&((c=s=Re)&&(s=Rp(s,t.type,t.pendingProps,Mt),s!==null?(t.stateNode=s,st=t,Re=Bt(s.firstChild),Mt=!1,c=!0):c=!1),c||ja(t)),va(t),c=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,s=d.children,po(c,d)?s=null:g!==null&&po(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=mc(e,t,X0,null,null,a),_r._currentValue=c),wi(e,t),it(e,t,s,a),t.child;case 6:return e===null&&fe&&((e=a=Re)&&(a=Up(a,t.pendingProps,Mt),a!==null?(t.stateNode=a,st=t,Re=null,e=!0):e=!1),e||ja(t)),null;case 13:return Uh(e,t,a);case 4:return Ht(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=fn(t,null,s,a):it(e,t,s,a),t.child;case 11:return jh(e,t,t.type,t.pendingProps,a);case 7:return it(e,t,t.pendingProps,a),t.child;case 8:return it(e,t,t.pendingProps.children,a),t.child;case 12:return it(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,Ca(t,t.type,s.value),it(e,t,s.children,a),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,on(t),c=rt(c),s=s(c),t.flags|=1,it(e,t,s,a),t.child;case 14:return Ch(e,t,t.type,t.pendingProps,a);case 15:return Ah(e,t,t.type,t.pendingProps,a);case 19:return Dh(e,t,a);case 31:return tp(e,t,a);case 22:return Nh(e,t,a,t.pendingProps);case 24:return on(t),s=rt(Ye),e===null?(c=sc(),c===null&&(c=Ee,d=ac(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=a),c=d),t.memoizedState={parent:s,cache:c},ic(t),Ca(t,Ye,c)):((e.lanes&a)!==0&&(lc(e,t),tr(t,null,null,a),er()),c=e.memoizedState,d=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Ca(t,Ye,s)):(s=d.cache,Ca(t,Ye,s),s!==c.cache&&tc(t,[Ye],a,!0))),it(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ca(e){e.flags|=4}function $c(e,t,a,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(uf())e.flags|=8192;else throw hn=li,rc}else e.flags&=-16777217}function qh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ff(t))if(uf())e.flags|=8192;else throw hn=li,rc}function ji(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pu():536870912,e.lanes|=t,ns|=t)}function lr(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function np(e,t,a){var s=t.pendingProps;switch(Zl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Ue(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),sa(Ye),Gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Yn(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wl())),Ue(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(ca(t),d!==null?(Ue(t),qh(t,d)):(Ue(t),$c(t,c,null,s,a))):d?d!==e.memoizedState?(ca(t),Ue(t),qh(t,d)):(Ue(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ca(t),Ue(t),$c(t,c,e,s,a)),null;case 27:if(ae(t),a=Tt.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ca(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}e=qe.current,Yn(t)?pd(t):(e=Qf(c,s,a),t.stateNode=e,ca(t))}return Ue(t),null;case 5:if(ae(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ca(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}if(d=qe.current,Yn(t))pd(t);else{var g=Li(Tt.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof s.is=="string"?g.createElement("select",{is:s.is}):g.createElement("select"),s.multiple?d.multiple=!0:s.size&&(d.size=s.size);break;default:d=typeof s.is=="string"?g.createElement(c,{is:s.is}):g.createElement(c)}}d[nt]=t,d[ut]=s;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=d;e:switch(lt(d,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ca(t)}}return Ue(t),$c(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ca(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=Tt.current,Yn(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,c=st,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[nt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||zf(e.nodeValue,a)),e||ja(t,!0)}else e=Li(e).createTextNode(s),e[nt]=t,t.stateNode=e}return Ue(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Yn(t),a!==null){if(e===null){if(!s)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[nt]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),e=!1}else a=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(jt(t),t):(jt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Ue(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Yn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(i(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[nt]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),c=!1}else c=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(jt(t),t):(jt(t),null)}return jt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ji(t,t.updateQueue),Ue(t),null);case 4:return Gt(),e===null&&uo(t.stateNode.containerInfo),Ue(t),null;case 10:return sa(t.type),Ue(t),null;case 19:if(Ne(He),s=t.memoizedState,s===null)return Ue(t),null;if(c=(t.flags&128)!==0,d=s.rendering,d===null)if(c)lr(s,!1);else{if(Le!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=di(e),d!==null){for(t.flags|=128,lr(s,!1),e=d.updateQueue,t.updateQueue=e,ji(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)dd(a,e),a=a.sibling;return me(He,He.current&1|2),fe&&aa(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&vt()>Ti&&(t.flags|=128,c=!0,lr(s,!1),t.lanes=4194304)}else{if(!c)if(e=di(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,ji(t,e),lr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!fe)return Ue(t),null}else 2*vt()-s.renderingStartTime>Ti&&a!==536870912&&(t.flags|=128,c=!0,lr(s,!1),t.lanes=4194304);s.isBackwards?(d.sibling=t.child,t.child=d):(e=s.last,e!==null?e.sibling=d:t.child=d,s.last=d)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,a=He.current,me(He,c?a&1|2:a&1),fe&&aa(t,s.treeForkCount),e):(Ue(t),null);case 22:case 23:return jt(t),dc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),a=t.updateQueue,a!==null&&ji(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Ne(un),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),sa(Ye),Ue(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function sp(e,t){switch(Zl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sa(Ye),Gt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ae(t),null;case 31:if(t.memoizedState!==null){if(jt(t),t.alternate===null)throw Error(i(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(He),null;case 4:return Gt(),null;case 10:return sa(t.type),null;case 22:case 23:return jt(t),dc(),e!==null&&Ne(un),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return sa(Ye),null;case 25:return null;default:return null}}function Bh(e,t){switch(Zl(t),t.tag){case 3:sa(Ye),Gt();break;case 26:case 27:case 5:ae(t);break;case 4:Gt();break;case 31:t.memoizedState!==null&&jt(t);break;case 13:jt(t);break;case 19:Ne(He);break;case 10:sa(t.type);break;case 22:case 23:jt(t),dc(),e!==null&&Ne(un);break;case 24:sa(Ye)}}function cr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var c=s.next;a=c;do{if((a.tag&e)===e){s=void 0;var d=a.create,g=a.inst;s=d(),g.destroy=s}a=a.next}while(a!==c)}}catch(b){Se(t,t.return,b)}}function ka(e,t,a){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&e)===e){var g=s.inst,b=g.destroy;if(b!==void 0){g.destroy=void 0,c=t;var S=a,E=b;try{E()}catch(z){Se(c,S,z)}}}s=s.next}while(s!==d)}}catch(z){Se(t,t.return,z)}}function Lh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Td(t,a)}catch(s){Se(e,e.return,s)}}}function Hh(e,t,a){a.props=gn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Se(e,t,s)}}function or(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(c){Se(e,t,c)}}function Pt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(c){Se(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Se(e,t,c)}else a.current=null}function Gh(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(c){Se(e,e.return,c)}}function Vc(e,t,a){try{var s=e.stateNode;Ap(s,e.type,a,t),s[ut]=t}catch(c){Se(e,e.return,c)}}function $h(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ba(e.type)||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qc(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ft));else if(s!==4&&(s===27&&Ba(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Qc(e,t,a),e=e.sibling;e!==null;)Qc(e,t,a),e=e.sibling}function Ci(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ba(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ci(e,t,a),e=e.sibling;e!==null;)Ci(e,t,a),e=e.sibling}function Vh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);lt(t,s,a),t[nt]=e,t[ut]=a}catch(d){Se(e,e.return,d)}}var oa=!1,Xe=!1,Kc=!1,Yh=typeof WeakSet=="function"?WeakSet:Set,tt=null;function rp(e,t){if(e=e.containerInfo,mo=Ki,e=ad(e),Ll(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var g=0,b=-1,S=-1,E=0,z=0,B=e,k=null;t:for(;;){for(var R;B!==a||c!==0&&B.nodeType!==3||(b=g+c),B!==d||s!==0&&B.nodeType!==3||(S=g+s),B.nodeType===3&&(g+=B.nodeValue.length),(R=B.firstChild)!==null;)k=B,B=R;for(;;){if(B===e)break t;if(k===a&&++E===c&&(b=g),k===d&&++z===s&&(S=g),(R=B.nextSibling)!==null)break;B=k,k=B.parentNode}B=R}a=b===-1||S===-1?null:{start:b,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(go={focusedElem:e,selectionRange:a},Ki=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){switch(t=tt,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=t,c=d.memoizedProps,d=d.memoizedState,s=a.stateNode;try{var Q=gn(a.type,c);e=s.getSnapshotBeforeUpdate(Q,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(F){Se(a,a.return,F)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)vo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}}function Qh(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:da(e,a),s&4&&cr(5,a);break;case 1:if(da(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Se(a,a.return,g)}else{var c=gn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Se(a,a.return,g)}}s&64&&Lh(a),s&512&&or(a,a.return);break;case 3:if(da(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Td(e,t)}catch(g){Se(a,a.return,g)}}break;case 27:t===null&&s&4&&Vh(a);case 26:case 5:da(e,a),t===null&&s&4&&Gh(a),s&512&&or(a,a.return);break;case 12:da(e,a);break;case 31:da(e,a),s&4&&Jh(e,a);break;case 13:da(e,a),s&4&&Ph(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=mp.bind(null,a),zp(e,a))));break;case 22:if(s=a.memoizedState!==null||oa,!s){t=t!==null&&t.memoizedState!==null||Xe,c=oa;var d=Xe;oa=s,(Xe=t)&&!d?ha(e,a,(a.subtreeFlags&8772)!==0):da(e,a),oa=c,Xe=d}break;case 30:break;default:da(e,a)}}function Kh(e){var t=e.alternate;t!==null&&(e.alternate=null,Kh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&wl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,ht=!1;function ua(e,t,a){for(a=a.child;a!==null;)Xh(e,t,a),a=a.sibling}function Xh(e,t,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Us,a)}catch{}switch(a.tag){case 26:Xe||Pt(a,t),ua(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Xe||Pt(a,t);var s=De,c=ht;Ba(a.type)&&(De=a.stateNode,ht=!1),ua(e,t,a),vr(a.stateNode),De=s,ht=c;break;case 5:Xe||Pt(a,t);case 6:if(s=De,c=ht,De=null,ua(e,t,a),De=s,ht=c,De!==null)if(ht)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(a.stateNode)}catch(d){Se(a,t,d)}else try{De.removeChild(a.stateNode)}catch(d){Se(a,t,d)}break;case 18:De!==null&&(ht?(e=De,Hf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ds(e)):Hf(De,a.stateNode));break;case 4:s=De,c=ht,De=a.stateNode.containerInfo,ht=!0,ua(e,t,a),De=s,ht=c;break;case 0:case 11:case 14:case 15:ka(2,a,t),Xe||ka(4,a,t),ua(e,t,a);break;case 1:Xe||(Pt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Hh(a,t,s)),ua(e,t,a);break;case 21:ua(e,t,a);break;case 22:Xe=(s=Xe)||a.memoizedState!==null,ua(e,t,a),Xe=s;break;default:ua(e,t,a)}}function Jh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ds(e)}catch(a){Se(t,t.return,a)}}}function Ph(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(a){Se(t,t.return,a)}}function ip(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yh),t;default:throw Error(i(435,e.tag))}}function Ai(e,t){var a=ip(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var c=gp.bind(null,e,s);s.then(c,c)}})}function ft(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var c=a[s],d=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 27:if(Ba(b.type)){De=b.stateNode,ht=!1;break e}break;case 5:De=b.stateNode,ht=!1;break e;case 3:case 4:De=b.stateNode.containerInfo,ht=!0;break e}b=b.return}if(De===null)throw Error(i(160));Xh(d,g,c),De=null,ht=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Zh(t,e),t=t.sibling}var Vt=null;function Zh(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ft(t,e),mt(e),s&4&&(ka(3,e,e.return),cr(3,e),ka(5,e,e.return));break;case 1:ft(t,e),mt(e),s&512&&(Xe||a===null||Pt(a,a.return)),s&64&&oa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var c=Vt;if(ft(t,e),mt(e),s&512&&(Xe||a===null||Pt(a,a.return)),s&4){var d=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":d=c.getElementsByTagName("title")[0],(!d||d[Ms]||d[nt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(s),c.head.insertBefore(d,c.querySelector("head > title"))),lt(d,s,a),d[nt]=e,et(d),s=d;break e;case"link":var g=If("link","href",c).get(s+(a.href||""));if(g){for(var b=0;b<g.length;b++)if(d=g[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(b,1);break t}}d=c.createElement(s),lt(d,s,a),c.head.appendChild(d);break;case"meta":if(g=If("meta","content",c).get(s+(a.content||""))){for(b=0;b<g.length;b++)if(d=g[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(b,1);break t}}d=c.createElement(s),lt(d,s,a),c.head.appendChild(d);break;default:throw Error(i(468,s))}d[nt]=e,et(d),s=d}e.stateNode=s}else Wf(c,e.type,e.stateNode);else e.stateNode=Zf(c,s,e.memoizedProps);else d!==s?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,s===null?Wf(c,e.type,e.stateNode):Zf(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Vc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ft(t,e),mt(e),s&512&&(Xe||a===null||Pt(a,a.return)),a!==null&&s&4&&Vc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ft(t,e),mt(e),s&512&&(Xe||a===null||Pt(a,a.return)),e.flags&32){c=e.stateNode;try{zn(c,"")}catch(Q){Se(e,e.return,Q)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Vc(e,c,a!==null?a.memoizedProps:c)),s&1024&&(Kc=!0);break;case 6:if(ft(t,e),mt(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(Q){Se(e,e.return,Q)}}break;case 3:if($i=null,c=Vt,Vt=Hi(t.containerInfo),ft(t,e),Vt=c,mt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(Q){Se(e,e.return,Q)}Kc&&(Kc=!1,Ih(e));break;case 4:s=Vt,Vt=Hi(e.stateNode.containerInfo),ft(t,e),mt(e),Vt=s;break;case 12:ft(t,e),mt(e);break;case 31:ft(t,e),mt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ai(e,s)));break;case 13:ft(t,e),mt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ei=vt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ai(e,s)));break;case 22:c=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,E=oa,z=Xe;if(oa=E||c,Xe=z||S,ft(t,e),Xe=z,oa=E,mt(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||S||oa||Xe||pn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(d=S.stateNode,c)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=S.stateNode;var B=S.memoizedProps.style,k=B!=null&&B.hasOwnProperty("display")?B.display:null;b.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(Q){Se(S,S.return,Q)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=c?"":S.memoizedProps}catch(Q){Se(S,S.return,Q)}}}else if(t.tag===18){if(a===null){S=t;try{var R=S.stateNode;c?Gf(R,!0):Gf(S.stateNode,!1)}catch(Q){Se(S,S.return,Q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Ai(e,a))));break;case 19:ft(t,e),mt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ai(e,s)));break;case 30:break;case 21:break;default:ft(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if($h(s)){a=s;break}s=s.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var c=a.stateNode,d=Yc(e);Ci(e,d,c);break;case 5:var g=a.stateNode;a.flags&32&&(zn(g,""),a.flags&=-33);var b=Yc(e);Ci(e,b,g);break;case 3:case 4:var S=a.stateNode.containerInfo,E=Yc(e);Qc(e,E,S);break;default:throw Error(i(161))}}catch(z){Se(e,e.return,z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ih(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ih(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function da(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qh(e,t.alternate,t),t=t.sibling}function pn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ka(4,t,t.return),pn(t);break;case 1:Pt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Hh(t,t.return,a),pn(t);break;case 27:vr(t.stateNode);case 26:case 5:Pt(t,t.return),pn(t);break;case 22:t.memoizedState===null&&pn(t);break;case 30:pn(t);break;default:pn(t)}e=e.sibling}}function ha(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,d=t,g=d.flags;switch(d.tag){case 0:case 11:case 15:ha(c,d,a),cr(4,d);break;case 1:if(ha(c,d,a),s=d,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(E){Se(s,s.return,E)}if(s=d,c=s.updateQueue,c!==null){var b=s.stateNode;try{var S=c.shared.hiddenCallbacks;if(S!==null)for(c.shared.hiddenCallbacks=null,c=0;c<S.length;c++)Ed(S[c],b)}catch(E){Se(s,s.return,E)}}a&&g&64&&Lh(d),or(d,d.return);break;case 27:Vh(d);case 26:case 5:ha(c,d,a),a&&s===null&&g&4&&Gh(d),or(d,d.return);break;case 12:ha(c,d,a);break;case 31:ha(c,d,a),a&&g&4&&Jh(c,d);break;case 13:ha(c,d,a),a&&g&4&&Ph(c,d);break;case 22:d.memoizedState===null&&ha(c,d,a),or(d,d.return);break;case 30:break;default:ha(c,d,a)}t=t.sibling}}function Xc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ps(a))}function Jc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ps(e))}function Yt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wh(e,t,a,s),t=t.sibling}function Wh(e,t,a,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Yt(e,t,a,s),c&2048&&cr(9,t);break;case 1:Yt(e,t,a,s);break;case 3:Yt(e,t,a,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ps(e)));break;case 12:if(c&2048){Yt(e,t,a,s),e=t.stateNode;try{var d=t.memoizedProps,g=d.id,b=d.onPostCommit;typeof b=="function"&&b(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Se(t,t.return,S)}}else Yt(e,t,a,s);break;case 31:Yt(e,t,a,s);break;case 13:Yt(e,t,a,s);break;case 23:break;case 22:d=t.stateNode,g=t.alternate,t.memoizedState!==null?d._visibility&2?Yt(e,t,a,s):ur(e,t):d._visibility&2?Yt(e,t,a,s):(d._visibility|=2,es(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Xc(g,t);break;case 24:Yt(e,t,a,s),c&2048&&Jc(t.alternate,t);break;default:Yt(e,t,a,s)}}function es(e,t,a,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,g=t,b=a,S=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:es(d,g,b,S,c),cr(8,g);break;case 23:break;case 22:var z=g.stateNode;g.memoizedState!==null?z._visibility&2?es(d,g,b,S,c):ur(d,g):(z._visibility|=2,es(d,g,b,S,c)),c&&E&2048&&Xc(g.alternate,g);break;case 24:es(d,g,b,S,c),c&&E&2048&&Jc(g.alternate,g);break;default:es(d,g,b,S,c)}t=t.sibling}}function ur(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,c=s.flags;switch(s.tag){case 22:ur(a,s),c&2048&&Xc(s.alternate,s);break;case 24:ur(a,s),c&2048&&Jc(s.alternate,s);break;default:ur(a,s)}t=t.sibling}}var dr=8192;function ts(e,t,a){if(e.subtreeFlags&dr)for(e=e.child;e!==null;)Fh(e,t,a),e=e.sibling}function Fh(e,t,a){switch(e.tag){case 26:ts(e,t,a),e.flags&dr&&e.memoizedState!==null&&Kp(a,Vt,e.memoizedState,e.memoizedProps);break;case 5:ts(e,t,a);break;case 3:case 4:var s=Vt;Vt=Hi(e.stateNode.containerInfo),ts(e,t,a),Vt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=dr,dr=16777216,ts(e,t,a),dr=s):ts(e,t,a));break;default:ts(e,t,a)}}function ef(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function hr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];tt=s,af(s,e)}ef(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)tf(e),e=e.sibling}function tf(e){switch(e.tag){case 0:case 11:case 15:hr(e),e.flags&2048&&ka(9,e,e.return);break;case 3:hr(e);break;case 12:hr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ni(e)):hr(e);break;default:hr(e)}}function Ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];tt=s,af(s,e)}ef(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ka(8,t,t.return),Ni(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ni(t));break;default:Ni(t)}e=e.sibling}}function af(e,t){for(;tt!==null;){var a=tt;switch(a.tag){case 0:case 11:case 15:ka(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ps(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,tt=s;else e:for(a=e;tt!==null;){s=tt;var c=s.sibling,d=s.return;if(Kh(s),s===a){tt=null;break e}if(c!==null){c.return=d,tt=c;break e}tt=d}}}var lp={getCacheForType:function(e){var t=rt(Ye),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return rt(Ye).controller.signal}},cp=typeof WeakMap=="function"?WeakMap:Map,be=0,Ee=null,oe=null,de=0,we=0,Ct=null,Ra=!1,as=!1,Pc=!1,fa=0,Le=0,Ua=0,yn=0,Zc=0,At=0,ns=0,fr=null,gt=null,Ic=!1,Ei=0,nf=0,Ti=1/0,Oi=null,za=null,We=0,Da=null,ss=null,ma=0,Wc=0,Fc=null,sf=null,mr=0,eo=null;function Nt(){return(be&2)!==0&&de!==0?de&-de:D.T!==null?io():xu()}function rf(){if(At===0)if((de&536870912)===0||fe){var e=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),At=e}else At=536870912;return e=St.current,e!==null&&(e.flags|=32),At}function pt(e,t,a){(e===Ee&&(we===2||we===9)||e.cancelPendingCommit!==null)&&(rs(e,0),Ma(e,de,At,!1)),Ds(e,a),((be&2)===0||e!==Ee)&&(e===Ee&&((be&2)===0&&(yn|=a),Le===4&&Ma(e,de,At,!1)),Zt(e))}function lf(e,t,a){if((be&6)!==0)throw Error(i(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||zs(e,t),c=s?dp(e,t):ao(e,t,!0),d=s;do{if(c===0){as&&!s&&Ma(e,t,0,!1);break}else{if(a=e.current.alternate,d&&!op(a)){c=ao(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var b=e;c=fr;var S=b.current.memoizedState.isDehydrated;if(S&&(rs(b,g).flags|=256),g=ao(b,g,!1),g!==2){if(Pc&&!S){b.errorRecoveryDisabledLanes|=d,yn|=d,c=4;break e}d=gt,gt=c,d!==null&&(gt===null?gt=d:gt.push.apply(gt,d))}c=g}if(d=!1,c!==2)continue}}if(c===1){rs(e,0),Ma(e,t,0,!0);break}e:{switch(s=e,d=c,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ma(s,t,At,!Ra);break e;case 2:gt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(c=Ei+300-vt(),10<c)){if(Ma(s,t,At,!Ra),Hr(s,0,!0)!==0)break e;ma=t,s.timeoutHandle=Bf(cf.bind(null,s,a,gt,Oi,Ic,t,At,yn,ns,Ra,d,"Throttled",-0,0),c);break e}cf(s,a,gt,Oi,Ic,t,At,yn,ns,Ra,d,null,-0,0)}}break}while(!0);Zt(e)}function cf(e,t,a,s,c,d,g,b,S,E,z,B,k,R){if(e.timeoutHandle=-1,B=t.subtreeFlags,B&8192||(B&16785408)===16785408){B={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},Fh(t,d,B);var Q=(d&62914560)===d?Ei-vt():(d&4194048)===d?nf-vt():0;if(Q=Xp(B,Q),Q!==null){ma=d,e.cancelPendingCommit=Q(pf.bind(null,e,t,d,a,s,c,g,b,S,z,B,null,k,R)),Ma(e,d,g,!E);return}}pf(e,t,d,a,s,c,g,b,S)}function op(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var c=a[s],d=c.getSnapshot;c=c.value;try{if(!_t(d(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ma(e,t,a,s){t&=~Zc,t&=~yn,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var d=31-xt(c),g=1<<d;s[d]=-1,c&=~g}a!==0&&yu(e,a,t)}function ki(){return(be&6)===0?(gr(0),!1):!0}function to(){if(oe!==null){if(we===0)var e=oe.return;else e=oe,na=cn=null,yc(e),Pn=null,Is=0,e=oe;for(;e!==null;)Bh(e.alternate,e),e=e.return;oe=null}}function rs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Tp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ma=0,to(),Ee=e,oe=a=ta(e.current,null),de=t,we=0,Ct=null,Ra=!1,as=zs(e,t),Pc=!1,ns=At=Zc=yn=Ua=Le=0,gt=fr=null,Ic=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-xt(s),d=1<<c;t|=e[c],s&=~d}return fa=t,Wr(),a}function of(e,t){re=null,D.H=rr,t===Jn||t===ii?(t=jd(),we=3):t===rc?(t=jd(),we=4):we=t===Uc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ct=t,oe===null&&(Le=1,xi(e,Ut(t,e.current)))}function uf(){var e=St.current;return e===null?!0:(de&4194048)===de?qt===null:(de&62914560)===de||(de&536870912)!==0?e===qt:!1}function df(){var e=D.H;return D.H=rr,e===null?rr:e}function hf(){var e=D.A;return D.A=lp,e}function Ri(){Le=4,Ra||(de&4194048)!==de&&St.current!==null||(as=!0),(Ua&134217727)===0&&(yn&134217727)===0||Ee===null||Ma(Ee,de,At,!1)}function ao(e,t,a){var s=be;be|=2;var c=df(),d=hf();(Ee!==e||de!==t)&&(Oi=null,rs(e,t)),t=!1;var g=Le;e:do try{if(we!==0&&oe!==null){var b=oe,S=Ct;switch(we){case 8:to(),g=6;break e;case 3:case 2:case 9:case 6:St.current===null&&(t=!0);var E=we;if(we=0,Ct=null,is(e,b,S,E),a&&as){g=0;break e}break;default:E=we,we=0,Ct=null,is(e,b,S,E)}}up(),g=Le;break}catch(z){of(e,z)}while(!0);return t&&e.shellSuspendCounter++,na=cn=null,be=s,D.H=c,D.A=d,oe===null&&(Ee=null,de=0,Wr()),g}function up(){for(;oe!==null;)ff(oe)}function dp(e,t){var a=be;be|=2;var s=df(),c=hf();Ee!==e||de!==t?(Oi=null,Ti=vt()+500,rs(e,t)):as=zs(e,t);e:do try{if(we!==0&&oe!==null){t=oe;var d=Ct;t:switch(we){case 1:we=0,Ct=null,is(e,t,d,1);break;case 2:case 9:if(wd(d)){we=0,Ct=null,mf(t);break}t=function(){we!==2&&we!==9||Ee!==e||(we=7),Zt(e)},d.then(t,t);break e;case 3:we=7;break e;case 4:we=5;break e;case 7:wd(d)?(we=0,Ct=null,mf(t)):(we=0,Ct=null,is(e,t,d,7));break;case 5:var g=null;switch(oe.tag){case 26:g=oe.memoizedState;case 5:case 27:var b=oe;if(g?Ff(g):b.stateNode.complete){we=0,Ct=null;var S=b.sibling;if(S!==null)oe=S;else{var E=b.return;E!==null?(oe=E,Ui(E)):oe=null}break t}}we=0,Ct=null,is(e,t,d,5);break;case 6:we=0,Ct=null,is(e,t,d,6);break;case 8:to(),Le=6;break e;default:throw Error(i(462))}}hp();break}catch(z){of(e,z)}while(!0);return na=cn=null,D.H=s,D.A=c,be=a,oe!==null?0:(Ee=null,de=0,Wr(),Le)}function hp(){for(;oe!==null&&!Dg();)ff(oe)}function ff(e){var t=Mh(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?Ui(e):oe=t}function mf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Oh(a,t,t.pendingProps,t.type,void 0,de);break;case 11:t=Oh(a,t,t.pendingProps,t.type.render,t.ref,de);break;case 5:yc(t);default:Bh(a,t),t=oe=dd(t,fa),t=Mh(a,t,fa)}e.memoizedProps=e.pendingProps,t===null?Ui(e):oe=t}function is(e,t,a,s){na=cn=null,yc(t),Pn=null,Is=0;var c=t.return;try{if(ep(e,c,t,a,de)){Le=1,xi(e,Ut(a,e.current)),oe=null;return}}catch(d){if(c!==null)throw oe=c,d;Le=1,xi(e,Ut(a,e.current)),oe=null;return}t.flags&32768?(fe||s===1?e=!0:as||(de&536870912)!==0?e=!1:(Ra=e=!0,(s===2||s===9||s===3||s===6)&&(s=St.current,s!==null&&s.tag===13&&(s.flags|=16384))),gf(t,e)):Ui(t)}function Ui(e){var t=e;do{if((t.flags&32768)!==0){gf(t,Ra);return}e=t.return;var a=np(t.alternate,t,fa);if(a!==null){oe=a;return}if(t=t.sibling,t!==null){oe=t;return}oe=t=e}while(t!==null);Le===0&&(Le=5)}function gf(e,t){do{var a=sp(e.alternate,e);if(a!==null){a.flags&=32767,oe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){oe=e;return}oe=e=a}while(e!==null);Le=6,oe=null}function pf(e,t,a,s,c,d,g,b,S){e.cancelPendingCommit=null;do zi();while(We!==0);if((be&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=Yl,Qg(e,a,d,g,b,S),e===Ee&&(oe=Ee=null,de=0),ss=t,Da=e,ma=a,Wc=d,Fc=c,sf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,pp(Mr,function(){return _f(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=D.T,D.T=null,c=G.p,G.p=2,g=be,be|=4;try{rp(e,t,a)}finally{be=g,G.p=c,D.T=s}}We=1,yf(),vf(),bf()}}function yf(){if(We===1){We=0;var e=Da,t=ss,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var s=G.p;G.p=2;var c=be;be|=4;try{Zh(t,e);var d=go,g=ad(e.containerInfo),b=d.focusedElem,S=d.selectionRange;if(g!==b&&b&&b.ownerDocument&&td(b.ownerDocument.documentElement,b)){if(S!==null&&Ll(b)){var E=S.start,z=S.end;if(z===void 0&&(z=E),"selectionStart"in b)b.selectionStart=E,b.selectionEnd=Math.min(z,b.value.length);else{var B=b.ownerDocument||document,k=B&&B.defaultView||window;if(k.getSelection){var R=k.getSelection(),Q=b.textContent.length,F=Math.min(S.start,Q),Ae=S.end===void 0?F:Math.min(S.end,Q);!R.extend&&F>Ae&&(g=Ae,Ae=F,F=g);var A=ed(b,F),C=ed(b,Ae);if(A&&C&&(R.rangeCount!==1||R.anchorNode!==A.node||R.anchorOffset!==A.offset||R.focusNode!==C.node||R.focusOffset!==C.offset)){var N=B.createRange();N.setStart(A.node,A.offset),R.removeAllRanges(),F>Ae?(R.addRange(N),R.extend(C.node,C.offset)):(N.setEnd(C.node,C.offset),R.addRange(N))}}}}for(B=[],R=b;R=R.parentNode;)R.nodeType===1&&B.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<B.length;b++){var M=B[b];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}Ki=!!mo,go=mo=null}finally{be=c,G.p=s,D.T=a}}e.current=t,We=2}}function vf(){if(We===2){We=0;var e=Da,t=ss,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var s=G.p;G.p=2;var c=be;be|=4;try{Qh(e,t.alternate,t)}finally{be=c,G.p=s,D.T=a}}We=3}}function bf(){if(We===4||We===3){We=0,Mg();var e=Da,t=ss,a=ma,s=sf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?We=5:(We=0,ss=Da=null,xf(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(za=null),xl(a),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Us,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=D.T,c=G.p,G.p=2,D.T=null;try{for(var d=e.onRecoverableError,g=0;g<s.length;g++){var b=s[g];d(b.value,{componentStack:b.stack})}}finally{D.T=t,G.p=c}}(ma&3)!==0&&zi(),Zt(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===eo?mr++:(mr=0,eo=e):mr=0,gr(0)}}function xf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ps(t)))}function zi(){return yf(),vf(),bf(),_f()}function _f(){if(We!==5)return!1;var e=Da,t=Wc;Wc=0;var a=xl(ma),s=D.T,c=G.p;try{G.p=32>a?32:a,D.T=null,a=Fc,Fc=null;var d=Da,g=ma;if(We=0,ss=Da=null,ma=0,(be&6)!==0)throw Error(i(331));var b=be;if(be|=4,tf(d.current),Wh(d,d.current,g,a),be=b,gr(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Us,d)}catch{}return!0}finally{G.p=c,D.T=s,xf(e,t)}}function wf(e,t,a){t=Ut(a,t),t=Rc(e.stateNode,t,2),e=Ea(e,t,2),e!==null&&(Ds(e,2),Zt(e))}function Se(e,t,a){if(e.tag===3)wf(e,e,a);else for(;t!==null;){if(t.tag===3){wf(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(za===null||!za.has(s))){e=Ut(a,e),a=wh(2),s=Ea(t,a,2),s!==null&&(Sh(a,s,t,e),Ds(s,2),Zt(s));break}}t=t.return}}function no(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new cp;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(a)||(Pc=!0,c.add(a),e=fp.bind(null,e,t,a),t.then(e,e))}function fp(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ee===e&&(de&a)===a&&(Le===4||Le===3&&(de&62914560)===de&&300>vt()-Ei?(be&2)===0&&rs(e,0):Zc|=a,ns===de&&(ns=0)),Zt(e)}function Sf(e,t){t===0&&(t=pu()),e=sn(e,t),e!==null&&(Ds(e,t),Zt(e))}function mp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Sf(e,a)}function gp(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),Sf(e,a)}function pp(e,t){return pl(e,t)}var Di=null,ls=null,so=!1,Mi=!1,ro=!1,qa=0;function Zt(e){e!==ls&&e.next===null&&(ls===null?Di=ls=e:ls=ls.next=e),Mi=!0,so||(so=!0,vp())}function gr(e,t){if(!ro&&Mi){ro=!0;do for(var a=!1,s=Di;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var d=0;else{var g=s.suspendedLanes,b=s.pingedLanes;d=(1<<31-xt(42|e)+1)-1,d&=c&~(g&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Nf(s,d))}else d=de,d=Hr(s,s===Ee?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||zs(s,d)||(a=!0,Nf(s,d));s=s.next}while(a);ro=!1}}function yp(){jf()}function jf(){Mi=so=!1;var e=0;qa!==0&&Ep()&&(e=qa);for(var t=vt(),a=null,s=Di;s!==null;){var c=s.next,d=Cf(s,t);d===0?(s.next=null,a===null?Di=c:a.next=c,c===null&&(ls=a)):(a=s,(e!==0||(d&3)!==0)&&(Mi=!0)),s=c}We!==0&&We!==5||gr(e),qa!==0&&(qa=0)}function Cf(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-xt(d),b=1<<g,S=c[g];S===-1?((b&a)===0||(b&s)!==0)&&(c[g]=Yg(b,t)):S<=t&&(e.expiredLanes|=b),d&=~b}if(t=Ee,a=de,a=Hr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(we===2||we===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&yl(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||zs(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&yl(s),xl(a)){case 2:case 8:a=mu;break;case 32:a=Mr;break;case 268435456:a=gu;break;default:a=Mr}return s=Af.bind(null,e),a=pl(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&yl(s),e.callbackPriority=2,e.callbackNode=null,2}function Af(e,t){if(We!==0&&We!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zi()&&e.callbackNode!==a)return null;var s=de;return s=Hr(e,e===Ee?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(lf(e,s,t),Cf(e,vt()),e.callbackNode!=null&&e.callbackNode===a?Af.bind(null,e):null)}function Nf(e,t){if(zi())return null;lf(e,t,!0)}function vp(){Op(function(){(be&6)!==0?pl(fu,yp):jf()})}function io(){if(qa===0){var e=Kn;e===0&&(e=qr,qr<<=1,(qr&261888)===0&&(qr=256)),qa=e}return qa}function Ef(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yr(""+e)}function Tf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function bp(e,t,a,s,c){if(t==="submit"&&a&&a.stateNode===c){var d=Ef((c[ut]||null).action),g=s.submitter;g&&(t=(t=g[ut]||null)?Ef(t.formAction):g.getAttribute("formAction"),t!==null&&(d=t,g=null));var b=new Jr("action","action",null,s,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(qa!==0){var S=g?Tf(c,g):new FormData(c);Ac(a,{pending:!0,data:S,method:c.method,action:d},null,S)}}else typeof d=="function"&&(b.preventDefault(),S=g?Tf(c,g):new FormData(c),Ac(a,{pending:!0,data:S,method:c.method,action:d},d,S))},currentTarget:c}]})}}for(var lo=0;lo<Vl.length;lo++){var co=Vl[lo],xp=co.toLowerCase(),_p=co[0].toUpperCase()+co.slice(1);$t(xp,"on"+_p)}$t(rd,"onAnimationEnd"),$t(id,"onAnimationIteration"),$t(ld,"onAnimationStart"),$t("dblclick","onDoubleClick"),$t("focusin","onFocus"),$t("focusout","onBlur"),$t(q0,"onTransitionRun"),$t(B0,"onTransitionStart"),$t(L0,"onTransitionCancel"),$t(cd,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pr));function Of(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],c=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var g=s.length-1;0<=g;g--){var b=s[g],S=b.instance,E=b.currentTarget;if(b=b.listener,S!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=E;try{d(c)}catch(z){Ir(z)}c.currentTarget=null,d=S}else for(g=0;g<s.length;g++){if(b=s[g],S=b.instance,E=b.currentTarget,b=b.listener,S!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=E;try{d(c)}catch(z){Ir(z)}c.currentTarget=null,d=S}}}}function ue(e,t){var a=t[_l];a===void 0&&(a=t[_l]=new Set);var s=e+"__bubble";a.has(s)||(kf(t,e,2,!1),a.add(s))}function oo(e,t,a){var s=0;t&&(s|=4),kf(a,e,s,t)}var qi="_reactListening"+Math.random().toString(36).slice(2);function uo(e){if(!e[qi]){e[qi]=!0,Su.forEach(function(a){a!=="selectionchange"&&(wp.has(a)||oo(a,!1,e),oo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qi]||(t[qi]=!0,oo("selectionchange",!1,t))}}function kf(e,t,a,s){switch(im(t)){case 2:var c=Zp;break;case 8:c=Ip;break;default:c=Ao}a=c.bind(null,t,a,e),c=void 0,!Ol||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function ho(e,t,a,s,c){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var b=s.stateNode.containerInfo;if(b===c)break;if(g===4)for(g=s.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;b!==null;){if(g=Tn(b),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){s=d=g;continue e}b=b.parentNode}}s=s.return}Du(function(){var E=d,z=El(a),B=[];e:{var k=od.get(e);if(k!==void 0){var R=Jr,Q=e;switch(e){case"keypress":if(Kr(a)===0)break e;case"keydown":case"keyup":R=g0;break;case"focusin":Q="focus",R=zl;break;case"focusout":Q="blur",R=zl;break;case"beforeblur":case"afterblur":R=zl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=n0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=v0;break;case rd:case id:case ld:R=i0;break;case cd:R=x0;break;case"scroll":case"scrollend":R=t0;break;case"wheel":R=w0;break;case"copy":case"cut":case"paste":R=c0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Hu;break;case"toggle":case"beforetoggle":R=j0}var F=(t&4)!==0,Ae=!F&&(e==="scroll"||e==="scrollend"),A=F?k!==null?k+"Capture":null:k;F=[];for(var C=E,N;C!==null;){var M=C;if(N=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||N===null||A===null||(M=Bs(C,A),M!=null&&F.push(yr(C,M,N))),Ae)break;C=C.return}0<F.length&&(k=new R(k,Q,null,a,z),B.push({event:k,listeners:F}))}}if((t&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",k&&a!==Nl&&(Q=a.relatedTarget||a.fromElement)&&(Tn(Q)||Q[En]))break e;if((R||k)&&(k=z.window===z?z:(k=z.ownerDocument)?k.defaultView||k.parentWindow:window,R?(Q=a.relatedTarget||a.toElement,R=E,Q=Q?Tn(Q):null,Q!==null&&(Ae=u(Q),F=Q.tag,Q!==Ae||F!==5&&F!==27&&F!==6)&&(Q=null)):(R=null,Q=E),R!==Q)){if(F=Bu,M="onMouseLeave",A="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(F=Hu,M="onPointerLeave",A="onPointerEnter",C="pointer"),Ae=R==null?k:qs(R),N=Q==null?k:qs(Q),k=new F(M,C+"leave",R,a,z),k.target=Ae,k.relatedTarget=N,M=null,Tn(z)===E&&(F=new F(A,C+"enter",Q,a,z),F.target=N,F.relatedTarget=Ae,M=F),Ae=M,R&&Q)t:{for(F=Sp,A=R,C=Q,N=0,M=A;M;M=F(M))N++;M=0;for(var I=C;I;I=F(I))M++;for(;0<N-M;)A=F(A),N--;for(;0<M-N;)C=F(C),M--;for(;N--;){if(A===C||C!==null&&A===C.alternate){F=A;break t}A=F(A),C=F(C)}F=null}else F=null;R!==null&&Rf(B,k,R,F,!1),Q!==null&&Ae!==null&&Rf(B,Ae,Q,F,!0)}}e:{if(k=E?qs(E):window,R=k.nodeName&&k.nodeName.toLowerCase(),R==="select"||R==="input"&&k.type==="file")var pe=Ju;else if(Ku(k))if(Pu)pe=z0;else{pe=R0;var P=k0}else R=k.nodeName,!R||R.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?E&&Al(E.elementType)&&(pe=Ju):pe=U0;if(pe&&(pe=pe(e,E))){Xu(B,pe,a,z);break e}P&&P(e,k,E),e==="focusout"&&E&&k.type==="number"&&E.memoizedProps.value!=null&&Cl(k,"number",k.value)}switch(P=E?qs(E):window,e){case"focusin":(Ku(P)||P.contentEditable==="true")&&(Bn=P,Hl=E,Ks=null);break;case"focusout":Ks=Hl=Bn=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,nd(B,a,z);break;case"selectionchange":if(M0)break;case"keydown":case"keyup":nd(B,a,z)}var ie;if(Ml)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else qn?Yu(e,a)&&(he="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(he="onCompositionStart");he&&(Gu&&a.locale!=="ko"&&(qn||he!=="onCompositionStart"?he==="onCompositionEnd"&&qn&&(ie=Mu()):(_a=z,kl="value"in _a?_a.value:_a.textContent,qn=!0)),P=Bi(E,he),0<P.length&&(he=new Lu(he,e,null,a,z),B.push({event:he,listeners:P}),ie?he.data=ie:(ie=Qu(a),ie!==null&&(he.data=ie)))),(ie=A0?N0(e,a):E0(e,a))&&(he=Bi(E,"onBeforeInput"),0<he.length&&(P=new Lu("onBeforeInput","beforeinput",null,a,z),B.push({event:P,listeners:he}),P.data=ie)),bp(B,e,E,a,z)}Of(B,t)})}function yr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Bi(e,t){for(var a=t+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Bs(e,a),c!=null&&s.unshift(yr(e,c,d)),c=Bs(e,t),c!=null&&s.push(yr(e,c,d))),e.tag===3)return s;e=e.return}return[]}function Sp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rf(e,t,a,s,c){for(var d=t._reactName,g=[];a!==null&&a!==s;){var b=a,S=b.alternate,E=b.stateNode;if(b=b.tag,S!==null&&S===s)break;b!==5&&b!==26&&b!==27||E===null||(S=E,c?(E=Bs(a,d),E!=null&&g.unshift(yr(a,E,S))):c||(E=Bs(a,d),E!=null&&g.push(yr(a,E,S)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var jp=/\r\n?/g,Cp=/\u0000|\uFFFD/g;function Uf(e){return(typeof e=="string"?e:""+e).replace(jp,`
`).replace(Cp,"")}function zf(e,t){return t=Uf(t),Uf(e)===t}function Ce(e,t,a,s,c,d){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||zn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&zn(e,""+s);break;case"className":$r(e,"class",s);break;case"tabIndex":$r(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(e,a,s);break;case"style":Uu(e,s,d);break;case"data":if(t!=="object"){$r(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Yr(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(t!=="input"&&Ce(e,t,"name",c.name,c,null),Ce(e,t,"formEncType",c.formEncType,c,null),Ce(e,t,"formMethod",c.formMethod,c,null),Ce(e,t,"formTarget",c.formTarget,c,null)):(Ce(e,t,"encType",c.encType,c,null),Ce(e,t,"method",c.method,c,null),Ce(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Yr(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Ft);break;case"onScroll":s!=null&&ue("scroll",e);break;case"onScrollEnd":s!=null&&ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Yr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ue("beforetoggle",e),ue("toggle",e),Gr(e,"popover",s);break;case"xlinkActuate":Wt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Wt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Wt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Wt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Wt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Wt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Gr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fg.get(a)||a,Gr(e,a,s))}}function fo(e,t,a,s,c,d){switch(a){case"style":Uu(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof s=="string"?zn(e,s):(typeof s=="number"||typeof s=="bigint")&&zn(e,""+s);break;case"onScroll":s!=null&&ue("scroll",e);break;case"onScrollEnd":s!=null&&ue("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ju.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),d=e[ut]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof s=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,c);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Gr(e,a,s)}}}function lt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ue("error",e),ue("load",e);var s=!1,c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var g=a[d];if(g!=null)switch(d){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ce(e,t,d,g,a,null)}}c&&Ce(e,t,"srcSet",a.srcSet,a,null),s&&Ce(e,t,"src",a.src,a,null);return;case"input":ue("invalid",e);var b=d=g=c=null,S=null,E=null;for(s in a)if(a.hasOwnProperty(s)){var z=a[s];if(z!=null)switch(s){case"name":c=z;break;case"type":g=z;break;case"checked":S=z;break;case"defaultChecked":E=z;break;case"value":d=z;break;case"defaultValue":b=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,t));break;default:Ce(e,t,s,z,a,null)}}Tu(e,d,b,S,E,g,c,!1);return;case"select":ue("invalid",e),s=g=d=null;for(c in a)if(a.hasOwnProperty(c)&&(b=a[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":g=b;break;case"multiple":s=b;default:Ce(e,t,c,b,a,null)}t=d,a=g,e.multiple=!!s,t!=null?Un(e,!!s,t,!1):a!=null&&Un(e,!!s,a,!0);return;case"textarea":ue("invalid",e),d=c=s=null;for(g in a)if(a.hasOwnProperty(g)&&(b=a[g],b!=null))switch(g){case"value":s=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:Ce(e,t,g,b,a,null)}ku(e,s,c,d);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(s=a[S],s!=null))switch(S){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ce(e,t,S,s,a,null)}return;case"dialog":ue("beforetoggle",e),ue("toggle",e),ue("cancel",e),ue("close",e);break;case"iframe":case"object":ue("load",e);break;case"video":case"audio":for(s=0;s<pr.length;s++)ue(pr[s],e);break;case"image":ue("error",e),ue("load",e);break;case"details":ue("toggle",e);break;case"embed":case"source":case"link":ue("error",e),ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(s=a[E],s!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ce(e,t,E,s,a,null)}return;default:if(Al(t)){for(z in a)a.hasOwnProperty(z)&&(s=a[z],s!==void 0&&fo(e,t,z,s,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(s=a[b],s!=null&&Ce(e,t,b,s,a,null))}function Ap(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,g=null,b=null,S=null,E=null,z=null;for(R in a){var B=a[R];if(a.hasOwnProperty(R)&&B!=null)switch(R){case"checked":break;case"value":break;case"defaultValue":S=B;default:s.hasOwnProperty(R)||Ce(e,t,R,null,s,B)}}for(var k in s){var R=s[k];if(B=a[k],s.hasOwnProperty(k)&&(R!=null||B!=null))switch(k){case"type":d=R;break;case"name":c=R;break;case"checked":E=R;break;case"defaultChecked":z=R;break;case"value":g=R;break;case"defaultValue":b=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(137,t));break;default:R!==B&&Ce(e,t,k,R,s,B)}}jl(e,g,b,S,E,z,d,c);return;case"select":R=g=b=k=null;for(d in a)if(S=a[d],a.hasOwnProperty(d)&&S!=null)switch(d){case"value":break;case"multiple":R=S;default:s.hasOwnProperty(d)||Ce(e,t,d,null,s,S)}for(c in s)if(d=s[c],S=a[c],s.hasOwnProperty(c)&&(d!=null||S!=null))switch(c){case"value":k=d;break;case"defaultValue":b=d;break;case"multiple":g=d;default:d!==S&&Ce(e,t,c,d,s,S)}t=b,a=g,s=R,k!=null?Un(e,!!a,k,!1):!!s!=!!a&&(t!=null?Un(e,!!a,t,!0):Un(e,!!a,a?[]:"",!1));return;case"textarea":R=k=null;for(b in a)if(c=a[b],a.hasOwnProperty(b)&&c!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ce(e,t,b,null,s,c)}for(g in s)if(c=s[g],d=a[g],s.hasOwnProperty(g)&&(c!=null||d!=null))switch(g){case"value":k=c;break;case"defaultValue":R=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(i(91));break;default:c!==d&&Ce(e,t,g,c,s,d)}Ou(e,k,R);return;case"option":for(var Q in a)if(k=a[Q],a.hasOwnProperty(Q)&&k!=null&&!s.hasOwnProperty(Q))switch(Q){case"selected":e.selected=!1;break;default:Ce(e,t,Q,null,s,k)}for(S in s)if(k=s[S],R=a[S],s.hasOwnProperty(S)&&k!==R&&(k!=null||R!=null))switch(S){case"selected":e.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Ce(e,t,S,k,s,R)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var F in a)k=a[F],a.hasOwnProperty(F)&&k!=null&&!s.hasOwnProperty(F)&&Ce(e,t,F,null,s,k);for(E in s)if(k=s[E],R=a[E],s.hasOwnProperty(E)&&k!==R&&(k!=null||R!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(137,t));break;default:Ce(e,t,E,k,s,R)}return;default:if(Al(t)){for(var Ae in a)k=a[Ae],a.hasOwnProperty(Ae)&&k!==void 0&&!s.hasOwnProperty(Ae)&&fo(e,t,Ae,void 0,s,k);for(z in s)k=s[z],R=a[z],!s.hasOwnProperty(z)||k===R||k===void 0&&R===void 0||fo(e,t,z,k,s,R);return}}for(var A in a)k=a[A],a.hasOwnProperty(A)&&k!=null&&!s.hasOwnProperty(A)&&Ce(e,t,A,null,s,k);for(B in s)k=s[B],R=a[B],!s.hasOwnProperty(B)||k===R||k==null&&R==null||Ce(e,t,B,k,s,R)}function Df(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Np(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var c=a[s],d=c.transferSize,g=c.initiatorType,b=c.duration;if(d&&b&&Df(g)){for(g=0,b=c.responseEnd,s+=1;s<a.length;s++){var S=a[s],E=S.startTime;if(E>b)break;var z=S.transferSize,B=S.initiatorType;z&&Df(B)&&(S=S.responseEnd,g+=z*(S<b?1:(b-E)/(S-E)))}if(--s,t+=8*(d+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var mo=null,go=null;function Li(e){return e.nodeType===9?e:e.ownerDocument}function Mf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function po(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yo=null;function Ep(){var e=window.event;return e&&e.type==="popstate"?e===yo?!1:(yo=e,!0):(yo=null,!1)}var Bf=typeof setTimeout=="function"?setTimeout:void 0,Tp=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,Op=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(e){return Lf.resolve(null).then(e).catch(kp)}:Bf;function kp(e){setTimeout(function(){throw e})}function Ba(e){return e==="head"}function Hf(e,t){var a=t,s=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(c),ds(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")vr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,vr(a);for(var d=a.firstChild;d;){var g=d.nextSibling,b=d.nodeName;d[Ms]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=g}}else a==="body"&&vr(e.ownerDocument.body);a=c}while(a);ds(t)}function Gf(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function vo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vo(a),wl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Rp(e,t,a,s){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ms])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function Up(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bt(e.nextSibling),e===null))return null;return e}function $f(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bt(e.nextSibling),e===null))return null;return e}function bo(e){return e.data==="$?"||e.data==="$~"}function xo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function zp(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _o=null;function Vf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Bt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Yf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Qf(e,t,a){switch(t=Li(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function vr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);wl(e)}var Lt=new Map,Kf=new Set;function Hi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ga=G.d;G.d={f:Dp,r:Mp,D:qp,C:Bp,L:Lp,m:Hp,X:$p,S:Gp,M:Vp};function Dp(){var e=ga.f(),t=ki();return e||t}function Mp(e){var t=On(e);t!==null&&t.tag===5&&t.type==="form"?ch(t):ga.r(e)}var cs=typeof document>"u"?null:document;function Xf(e,t,a){var s=cs;if(s&&typeof t=="string"&&t){var c=kt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Kf.has(c)||(Kf.add(c),e={rel:e,crossOrigin:a,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),lt(t,"link",e),et(t),s.head.appendChild(t)))}}function qp(e){ga.D(e),Xf("dns-prefetch",e,null)}function Bp(e,t){ga.C(e,t),Xf("preconnect",e,t)}function Lp(e,t,a){ga.L(e,t,a);var s=cs;if(s&&e&&t){var c='link[rel="preload"][as="'+kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+kt(a.imageSizes)+'"]')):c+='[href="'+kt(e)+'"]';var d=c;switch(t){case"style":d=os(e);break;case"script":d=us(e)}Lt.has(d)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Lt.set(d,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(br(d))||t==="script"&&s.querySelector(xr(d))||(t=s.createElement("link"),lt(t,"link",e),et(t),s.head.appendChild(t)))}}function Hp(e,t){ga.m(e,t);var a=cs;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+kt(s)+'"][href="'+kt(e)+'"]',d=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=us(e)}if(!Lt.has(d)&&(e=x({rel:"modulepreload",href:e},t),Lt.set(d,e),a.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xr(d)))return}s=a.createElement("link"),lt(s,"link",e),et(s),a.head.appendChild(s)}}}function Gp(e,t,a){ga.S(e,t,a);var s=cs;if(s&&e){var c=kn(s).hoistableStyles,d=os(e);t=t||"default";var g=c.get(d);if(!g){var b={loading:0,preload:null};if(g=s.querySelector(br(d)))b.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Lt.get(d))&&wo(e,a);var S=g=s.createElement("link");et(S),lt(S,"link",e),S._p=new Promise(function(E,z){S.onload=E,S.onerror=z}),S.addEventListener("load",function(){b.loading|=1}),S.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Gi(g,t,s)}g={type:"stylesheet",instance:g,count:1,state:b},c.set(d,g)}}}function $p(e,t){ga.X(e,t);var a=cs;if(a&&e){var s=kn(a).hoistableScripts,c=us(e),d=s.get(c);d||(d=a.querySelector(xr(c)),d||(e=x({src:e,async:!0},t),(t=Lt.get(c))&&So(e,t),d=a.createElement("script"),et(d),lt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Vp(e,t){ga.M(e,t);var a=cs;if(a&&e){var s=kn(a).hoistableScripts,c=us(e),d=s.get(c);d||(d=a.querySelector(xr(c)),d||(e=x({src:e,async:!0,type:"module"},t),(t=Lt.get(c))&&So(e,t),d=a.createElement("script"),et(d),lt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Jf(e,t,a,s){var c=(c=Tt.current)?Hi(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=os(a.href),a=kn(c).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=os(a.href);var d=kn(c).hoistableStyles,g=d.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=c.querySelector(br(e)))&&!d._p&&(g.instance=d,g.state.loading=5),Lt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Lt.set(e,a),d||Yp(c,e,a,g.state))),t&&s===null)throw Error(i(528,""));return g}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=us(a),a=kn(c).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function os(e){return'href="'+kt(e)+'"'}function br(e){return'link[rel="stylesheet"]['+e+"]"}function Pf(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Yp(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),lt(t,"link",a),et(t),e.head.appendChild(t))}function us(e){return'[src="'+kt(e)+'"]'}function xr(e){return"script[async]"+e}function Zf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+kt(a.href)+'"]');if(s)return t.instance=s,et(s),s;var c=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),et(s),lt(s,"style",c),Gi(s,a.precedence,e),t.instance=s;case"stylesheet":c=os(a.href);var d=e.querySelector(br(c));if(d)return t.state.loading|=4,t.instance=d,et(d),d;s=Pf(a),(c=Lt.get(c))&&wo(s,c),d=(e.ownerDocument||e).createElement("link"),et(d);var g=d;return g._p=new Promise(function(b,S){g.onload=b,g.onerror=S}),lt(d,"link",s),t.state.loading|=4,Gi(d,a.precedence,e),t.instance=d;case"script":return d=us(a.src),(c=e.querySelector(xr(d)))?(t.instance=c,et(c),c):(s=a,(c=Lt.get(d))&&(s=x({},a),So(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),et(c),lt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Gi(s,a.precedence,e));return t.instance}function Gi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,d=c,g=0;g<s.length;g++){var b=s[g];if(b.dataset.precedence===t)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function wo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function So(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $i=null;function If(e,t,a){if($i===null){var s=new Map,c=$i=new Map;c.set(a,s)}else c=$i,s=c.get(a),s||(s=new Map,c.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var d=a[c];if(!(d[Ms]||d[nt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(t)||"";g=e+g;var b=s.get(g);b?b.push(d):s.set(g,[d])}}return s}function Wf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Qp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ff(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Kp(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=os(s.href),d=t.querySelector(br(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Vi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=d,et(d);return}d=t.ownerDocument||t,s=Pf(s),(c=Lt.get(c))&&wo(s,c),d=d.createElement("link"),et(d);var g=d;g._p=new Promise(function(b,S){g.onload=b,g.onerror=S}),lt(d,"link",s),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Vi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var jo=0;function Xp(e,t){return e.stylesheets&&e.count===0&&Qi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Qi(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&jo===0&&(jo=62500*Np());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qi(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>jo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function Vi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yi=null;function Qi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yi=new Map,t.forEach(Jp,e),Yi=null,Vi.call(e))}function Jp(e,t){if(!(t.state.loading&4)){var a=Yi.get(e);if(a)var s=a.get(null);else{a=new Map,Yi.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var g=c[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),s=g)}s&&a.set(null,s)}c=t.instance,g=c.getAttribute("data-precedence"),d=a.get(g)||s,d===s&&a.set(null,c),a.set(g,c),this.count++,s=Vi.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var _r={$$typeof:H,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Pp(e,t,a,s,c,d,g,b,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.hiddenUpdates=vl(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function em(e,t,a,s,c,d,g,b,S,E,z,B){return e=new Pp(e,t,a,g,S,E,z,B,b),t=1,d===!0&&(t|=24),d=wt(3,null,null,t),e.current=d,d.stateNode=e,t=ac(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:s,isDehydrated:a,cache:t},ic(d),e}function tm(e){return e?(e=Gn,e):Gn}function am(e,t,a,s,c,d){c=tm(c),s.context===null?s.context=c:s.pendingContext=c,s=Na(t),s.payload={element:a},d=d===void 0?null:d,d!==null&&(s.callback=d),a=Ea(e,s,t),a!==null&&(pt(a,e,t),Fs(a,e,t))}function nm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Co(e,t){nm(e,t),(e=e.alternate)&&nm(e,t)}function sm(e){if(e.tag===13||e.tag===31){var t=sn(e,67108864);t!==null&&pt(t,e,67108864),Co(e,67108864)}}function rm(e){if(e.tag===13||e.tag===31){var t=Nt();t=bl(t);var a=sn(e,t);a!==null&&pt(a,e,t),Co(e,t)}}var Ki=!0;function Zp(e,t,a,s){var c=D.T;D.T=null;var d=G.p;try{G.p=2,Ao(e,t,a,s)}finally{G.p=d,D.T=c}}function Ip(e,t,a,s){var c=D.T;D.T=null;var d=G.p;try{G.p=8,Ao(e,t,a,s)}finally{G.p=d,D.T=c}}function Ao(e,t,a,s){if(Ki){var c=No(s);if(c===null)ho(e,t,s,Xi,a),lm(e,s);else if(Fp(c,e,t,a,s))s.stopPropagation();else if(lm(e,s),t&4&&-1<Wp.indexOf(e)){for(;c!==null;){var d=On(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=Fa(d.pendingLanes);if(g!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;g;){var S=1<<31-xt(g);b.entanglements[1]|=S,g&=~S}Zt(d),(be&6)===0&&(Ti=vt()+500,gr(0))}}break;case 31:case 13:b=sn(d,2),b!==null&&pt(b,d,2),ki(),Co(d,2)}if(d=No(s),d===null&&ho(e,t,s,Xi,a),d===c)break;c=d}c!==null&&s.stopPropagation()}else ho(e,t,s,null,a)}}function No(e){return e=El(e),Eo(e)}var Xi=null;function Eo(e){if(Xi=null,e=Tn(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xi=e,null}function im(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qg()){case fu:return 2;case mu:return 8;case Mr:case Bg:return 32;case gu:return 268435456;default:return 32}default:return 32}}var To=!1,La=null,Ha=null,Ga=null,wr=new Map,Sr=new Map,$a=[],Wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lm(e,t){switch(e){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(t.pointerId)}}function jr(e,t,a,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},t!==null&&(t=On(t),t!==null&&sm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fp(e,t,a,s,c){switch(t){case"focusin":return La=jr(La,e,t,a,s,c),!0;case"dragenter":return Ha=jr(Ha,e,t,a,s,c),!0;case"mouseover":return Ga=jr(Ga,e,t,a,s,c),!0;case"pointerover":var d=c.pointerId;return wr.set(d,jr(wr.get(d)||null,e,t,a,s,c)),!0;case"gotpointercapture":return d=c.pointerId,Sr.set(d,jr(Sr.get(d)||null,e,t,a,s,c)),!0}return!1}function cm(e){var t=Tn(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,_u(e.priority,function(){rm(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,_u(e.priority,function(){rm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=No(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Nl=s,a.target.dispatchEvent(s),Nl=null}else return t=On(a),t!==null&&sm(t),e.blockedOn=a,!1;t.shift()}return!0}function om(e,t,a){Ji(e)&&a.delete(t)}function ey(){To=!1,La!==null&&Ji(La)&&(La=null),Ha!==null&&Ji(Ha)&&(Ha=null),Ga!==null&&Ji(Ga)&&(Ga=null),wr.forEach(om),Sr.forEach(om)}function Pi(e,t){e.blockedOn===t&&(e.blockedOn=null,To||(To=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ey)))}var Zi=null;function um(e){Zi!==e&&(Zi=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Zi===e&&(Zi=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(Eo(s||a)===null)continue;break}var d=On(a);d!==null&&(e.splice(t,3),t-=3,Ac(d,{pending:!0,data:c,method:a.method,action:s},s,c))}}))}function ds(e){function t(S){return Pi(S,e)}La!==null&&Pi(La,e),Ha!==null&&Pi(Ha,e),Ga!==null&&Pi(Ga,e),wr.forEach(t),Sr.forEach(t);for(var a=0;a<$a.length;a++){var s=$a[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<$a.length&&(a=$a[0],a.blockedOn===null);)cm(a),a.blockedOn===null&&$a.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var c=a[s],d=a[s+1],g=c[ut]||null;if(typeof d=="function")g||um(a);else if(g){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,g=d[ut]||null)b=g.formAction;else if(Eo(c)!==null)continue}else b=g.action;typeof b=="function"?a[s+1]=b:(a.splice(s,3),s-=3),um(a)}}}function dm(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Oo(e){this._internalRoot=e}Ii.prototype.render=Oo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,s=Nt();am(a,s,e,t,null,null)},Ii.prototype.unmount=Oo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;am(e.current,2,null,e,null,null),ki(),t[En]=null}};function Ii(e){this._internalRoot=e}Ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=xu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<$a.length&&t!==0&&t<$a[a].priority;a++);$a.splice(a,0,e),a===0&&cm(e)}};var hm=n.version;if(hm!=="19.2.0")throw Error(i(527,hm,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var ty={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wi.isDisabled&&Wi.supportsFiber)try{Us=Wi.inject(ty),bt=Wi}catch{}}return Ar.createRoot=function(e,t){if(!l(e))throw Error(i(299));var a=!1,s="",c=vh,d=bh,g=xh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=em(e,1,!1,null,null,a,s,null,c,d,g,dm),e[En]=t.current,uo(e),new Oo(t)},Ar.hydrateRoot=function(e,t,a){if(!l(e))throw Error(i(299));var s=!1,c="",d=vh,g=bh,b=xh,S=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=em(e,1,!0,t,a??null,s,c,S,d,g,b,dm),t.context=tm(null),a=t.current,s=Nt(),s=bl(s),c=Na(s),c.callback=null,Ea(a,c,s),a=s,t.current.lanes=a,Ds(t,a),Zt(t),e[En]=t.current,uo(e),new Ii(t)},Ar.version="19.2.0",Ar}var bm;function xy(){if(bm)return zo.exports;bm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),zo.exports=by(),zo.exports}var _y=xy();const wy=ng(_y);function ll(o){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)}function xm(o){if(!o?.trim())return{isValid:!1,error:"Username is required"};const n=o.trim();return n.length<3||n.length>30?{isValid:!1,error:"Username must be between 3 and 30 characters"}:/^[a-zA-Z0-9_-]+$/.test(n)?{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"}}function Sy(o){if(!o)return{isValid:!1,error:"Password is required"};if(o.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};const n=/[a-z]/.test(o),r=/[A-Z]/.test(o),i=/\d/.test(o),l=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);return!n||!r||!i||!l?{isValid:!1,error:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}:{isValid:!0}}function _m(o){return o?.trim()?o.length>100?{isValid:!1,error:"Campaign name must be 100 characters or less"}:{isValid:!0}:{isValid:!1,error:"Campaign name is required"}}function wm(o){return["admin","gm","player"].includes(o)}function sg(o){const{isAdmin:n,isGm:r,isPlayer:i}=o;return!(!n&&!r&&!i||r&&i&&!n)}function qo(o){return typeof o=="string"?["admin","gm"].includes(o):o.isAdmin||o.isGm}function jy(o){return typeof o=="string"?o==="admin":o.isAdmin}function Cy(o){return typeof o=="string"?o==="admin":o.isAdmin}function hl(o){const n=[];return o.isAdmin&&n.push("Admin"),o.isGm&&n.push("GM"),o.isPlayer&&n.push("Player"),n.length===0?"No roles":n.length===1?n[0]:n.length===2?n.join(" + "):`${n.slice(0,-1).join(", ")} + ${n[n.length-1]}`}function Nr(o,n){return`Only ${n.length===1?`${n[0]}s`:`${n.slice(0,-1).join(", ")} and ${n[n.length-1]}s`} can ${o}`}class Ay{authRepository;constructor(n){this.authRepository=n}async getCurrentUser(){return this.authRepository.getCurrentUser()}async signIn(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:ll(n)?this.authRepository.signIn(n,r):{success:!1,error:"Invalid email format"}}async signUp(n,r){return!n||!r?{success:!1,error:"Email and password are required"}:ll(n)?r.length<6?{success:!1,error:"Password must be at least 6 characters"}:this.authRepository.signUp(n,r):{success:!1,error:"Invalid email format"}}async signOut(){return this.authRepository.signOut()}onAuthStateChange(n){return this.authRepository.onAuthStateChange(n)}async completeProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.displayName?.trim())return{success:!1,error:"Display name is required"};const i=xm(n.username);return i.isValid?this.authRepository.completeProfile(r.id,n.displayName.trim(),n.username.trim()):{success:!1,error:i.error}}async updateProfile(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(n.displayName!==void 0&&!n.displayName?.trim())return{success:!1,error:"Display name cannot be empty"};if(n.username!==void 0){const i=xm(n.username);if(!i.isValid)return{success:!1,error:i.error}}return this.authRepository.updateProfile(r.id,n.displayName?.trim(),n.username?.trim())}async changePassword(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};if(!n.currentPassword)return{success:!1,error:"Current password is required"};const i=Sy(n.newPassword);return i.isValid?this.authRepository.changePassword(r.id,n.currentPassword,n.newPassword):{success:!1,error:i.error}}async deleteAccount(){const n=await this.authRepository.getCurrentUser();return n?this.authRepository.deleteAccount(n.id):{success:!1,error:"User not authenticated"}}}class Ny{campaignRepository;authRepository;constructor(n,r){this.campaignRepository=n,this.authRepository=r}async getCampaigns(){const n=await this.authRepository.getCurrentUser();return n?this.campaignRepository.getCampaigns(n.id):{success:!1,error:"User not authenticated"}}async getCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaign(n)}async createCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=_m(n.name);if(!i.isValid)return{success:!1,error:i.error};const l=n.creatorIsAlsoGM||!1;if(n.initialMembers)for(const f of n.initialMembers){if(!ll(f.email))return{success:!1,error:`Invalid email format: ${f.email}`};if(!wm(f.role))return{success:!1,error:`Invalid role: ${f.role}`}}const u=await this.campaignRepository.createCampaign(r.id,{name:n.name.trim(),description:n.description?.trim()},l);if(!u.success)return u;if(n.initialMembers&&n.initialMembers.length>0&&u.data)for(const f of n.initialMembers)await this.campaignRepository.addMemberByEmail(u.data.id,f.email.trim(),f.role);return u}async updateCampaign(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const l=await this.campaignRepository.getUserRole(n,i.id);if(!l.success||!l.data||!jy(l.data))return{success:!1,error:Nr("update campaigns",["admin"])};if(r.name!==void 0){const f=_m(r.name);if(!f.isValid)return{success:!1,error:f.error}}const u={};return r.name!==void 0&&(u.name=r.name.trim()),r.description!==void 0&&(u.description=r.description?.trim()),this.campaignRepository.updateCampaign(n,u)}async deleteCampaign(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.getUserRole(n,r.id);return!i.success||!i.data||!Cy(i.data)?{success:!1,error:Nr("delete campaigns",["admin"])}:this.campaignRepository.deleteCampaign(n)}async getCampaignMembers(n){const r=await this.authRepository.getCurrentUser();if(!r)return{success:!1,error:"User not authenticated"};const i=await this.campaignRepository.canUserAccessCampaign(n,r.id);return!i.success||!i.data?{success:!1,error:"Access denied to this campaign"}:this.campaignRepository.getCampaignMembers(n)}async addMemberByEmail(n,r,i){const l=await this.authRepository.getCurrentUser();if(!l)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,l.id);return!u.success||!u.data||!qo(u.data)?{success:!1,error:Nr("add members",["admin","gm"])}:r?.trim()?ll(r)?wm(i)?this.campaignRepository.addMemberByEmail(n,r.trim(),i):{success:!1,error:"Invalid role specified"}:{success:!1,error:"Invalid email format"}:{success:!1,error:"Email is required"}}async updateMemberRole(n,r,i){const l=await this.authRepository.getCurrentUser();if(!l)return{success:!1,error:"User not authenticated"};const u=await this.campaignRepository.getUserRole(n,l.id);return!u.success||!u.data||!qo(u.data)?{success:!1,error:Nr("update member roles",["admin","gm"])}:sg(i)?this.campaignRepository.updateMemberRole(n,r,i):{success:!1,error:"Invalid role combination. Must have at least one role and cannot be GM+Player without Admin."}}async removeMember(n,r){const i=await this.authRepository.getCurrentUser();if(!i)return{success:!1,error:"User not authenticated"};const l=await this.campaignRepository.getUserRole(n,i.id);return!l.success||!l.data||!qo(l.data)?{success:!1,error:Nr("remove members",["admin","gm"])}:this.campaignRepository.removeMember(n,r)}}const Ey="modulepreload",Ty=function(o){return"/traveller-dashboard/"+o},Sm={},Ia=function(n,r,i){let l=Promise.resolve();if(r&&r.length>0){let p=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");l=p(r.map(y=>{if(y=Ty(y),y in Sm)return;Sm[y]=!0;const v=y.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":Ey,v||(_.as="script"),_.crossOrigin="",_.href=y,m&&_.setAttribute("nonce",m),document.head.appendChild(_),v)return new Promise((w,j)=>{_.addEventListener("load",w),_.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return l.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return n().catch(u)})},Oy=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>Ia(async()=>{const{default:i}=await Promise.resolve().then(()=>Ts);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)};class ru extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class jm extends ru{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Cm extends ru{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Am extends ru{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Xo;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Xo||(Xo={}));var ky=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};class Ry{constructor(n,{headers:r={},customFetch:i,region:l=Xo.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=Oy(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ky(this,arguments,void 0,function*(r,i={}){var l;try{const{headers:u,method:f,body:m,signal:p}=i;let y={},{region:v}=i;v||(v=this.region);const x=new URL(`${this.url}/${r}`);v&&v!=="any"&&(y["x-region"]=v,x.searchParams.set("forceFunctionRegion",v));let _;m&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=m):typeof m=="string"?(y["Content-Type"]="text/plain",_=m):typeof FormData<"u"&&m instanceof FormData?_=m:(y["Content-Type"]="application/json",_=JSON.stringify(m)));const w=yield this.fetch(x.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:_,signal:p}).catch(q=>{throw q.name==="AbortError"?q:new jm(q)}),j=w.headers.get("x-relay-error");if(j&&j==="true")throw new Cm(w);if(!w.ok)throw new Am(w);let T=((l=w.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),U;return T==="application/json"?U=yield w.json():T==="application/octet-stream"?U=yield w.blob():T==="text/event-stream"?U=w:T==="multipart/form-data"?U=yield w.formData():U=yield w.text(),{data:U,error:null,response:w}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new jm(u)}:{data:null,error:u,response:u instanceof Am||u instanceof Cm?u.context:void 0}}})}}var at={},hs={},fs={},ms={},gs={},ps={},Uy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ns=Uy();const zy=Ns.fetch,rg=Ns.fetch.bind(Ns),ig=Ns.Headers,Dy=Ns.Request,My=Ns.Response,Ts=Object.freeze(Object.defineProperty({__proto__:null,Headers:ig,Request:Dy,Response:My,default:rg,fetch:zy},Symbol.toStringTag,{value:"Module"})),qy=hy(Ts);var Fi={},Nm;function lg(){if(Nm)return Fi;Nm=1,Object.defineProperty(Fi,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Fi.default=o,Fi}var Em;function cg(){if(Em)return ps;Em=1;var o=ps&&ps.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ps,"__esModule",{value:!0});const n=o(qy),r=o(lg());class i{constructor(u){var f,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(f=u.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=new Headers(this.headers),this.headers.set(u,f),this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var v,x,_,w;let j=null,T=null,U=null,q=y.status,L=y.statusText;if(y.ok){if(this.method!=="HEAD"){const $=await y.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?T=$:T=JSON.parse($))}const V=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),Y=(_=y.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");V&&Y&&Y.length>1&&(U=parseInt(Y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(j={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,U=null,q=406,L="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const V=await y.text();try{j=JSON.parse(V),Array.isArray(j)&&y.status===404&&(T=[],j=null,q=200,L="OK")}catch{y.status===404&&V===""?(q=204,L="No Content"):j={message:V}}if(j&&this.isMaybeSingle&&(!((w=j?.details)===null||w===void 0)&&w.includes("0 rows"))&&(j=null,q=200,L="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:T,count:U,status:q,statusText:L}});return this.shouldThrowOnError||(p=p.catch(y=>{var v,x,_;return{error:{message:`${(v=y?.name)!==null&&v!==void 0?v:"FetchError"}: ${y?.message}`,details:`${(x=y?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(_=y?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,f)}returns(){return this}overrideTypes(){return this}}return ps.default=i,ps}var Tm;function og(){if(Tm)return gs;Tm=1;var o=gs&&gs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(gs,"__esModule",{value:!0});const n=o(cg());class r extends n.default{select(l){let u=!1;const f=(l??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:f,foreignTable:m,referencedTable:p=m}={}){const y=p?`${p}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${l}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,u,{foreignTable:f,referencedTable:m=f}={}){const p=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(y,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:f=!1,buffers:m=!1,wal:p=!1,format:y="text"}={}){var v;const x=[l?"analyze":null,u?"verbose":null,f?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${_}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return gs.default=r,gs}var Om;function iu(){if(Om)return ms;Om=1;var o=ms&&ms.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ms,"__esModule",{value:!0});const n=o(og());class r extends n.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}}return ms.default=r,ms}var km;function ug(){if(km)return fs;km=1;var o=fs&&fs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(fs,"__esModule",{value:!0});const n=o(iu());class r{constructor(l,{headers:u={},schema:f,fetch:m}){this.url=l,this.headers=new Headers(u),this.schema=f,this.fetch=m}select(l,u){const{head:f=!1,count:m}=u??{},p=f?"HEAD":"GET";let y=!1;const v=(l??"*").split("").map(x=>/\s/.test(x)&&!y?"":(x==='"'&&(y=!y),x)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:f=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(y.length>0){const v=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:f=!1,count:m,defaultToNull:p=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((_,w)=>_.concat(Object.keys(w)),[]);if(x.length>0){const _=[...new Set(x)].map(w=>`"${w}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(l,{count:u}={}){var f;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:l}={}){var u;const f="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return fs.default=r,fs}var Rm;function By(){if(Rm)return hs;Rm=1;var o=hs&&hs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(hs,"__esModule",{value:!0});const n=o(ug()),r=o(iu());class i{constructor(u,{headers:f={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(f),this.schemaName=m,this.fetch=p}from(u){const f=new URL(`${this.url}/${u}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,f={},{head:m=!1,get:p=!1,count:y}={}){var v;let x;const _=new URL(`${this.url}/rpc/${u}`);let w;m||p?(x=m?"HEAD":"GET",Object.entries(f).filter(([T,U])=>U!==void 0).map(([T,U])=>[T,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([T,U])=>{_.searchParams.append(T,U)})):(x="POST",w=f);const j=new Headers(this.headers);return y&&j.set("Prefer",`count=${y}`),new r.default({method:x,url:_,headers:j,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return hs.default=i,hs}var Um;function Ly(){if(Um)return at;Um=1;var o=at&&at.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(at,"__esModule",{value:!0}),at.PostgrestError=at.PostgrestBuilder=at.PostgrestTransformBuilder=at.PostgrestFilterBuilder=at.PostgrestQueryBuilder=at.PostgrestClient=void 0;const n=o(By());at.PostgrestClient=n.default;const r=o(ug());at.PostgrestQueryBuilder=r.default;const i=o(iu());at.PostgrestFilterBuilder=i.default;const l=o(og());at.PostgrestTransformBuilder=l.default;const u=o(cg());at.PostgrestBuilder=u.default;const f=o(lg());return at.PostgrestError=f.default,at.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:f.default},at}var Hy=Ly();const Gy=ng(Hy),{PostgrestClient:$y,PostgrestQueryBuilder:d_,PostgrestFilterBuilder:h_,PostgrestTransformBuilder:f_,PostgrestBuilder:m_,PostgrestError:g_}=Gy;class Vy{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,l=parseInt(i.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Yy="2.75.0",Qy=`realtime-js/${Yy}`,Ky="1.0.0",Jo=1e4,Xy=1e3,Jy=100;var Tr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Tr||(Tr={}));var Fe;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Fe||(Fe={}));var Kt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Kt||(Kt={}));var Po;(function(o){o.websocket="websocket"})(Po||(Po={}));var _n;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(_n||(_n={}));class Py{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,r,i)}_decodeBroadcast(n,r,i){const l=r.getUint8(1),u=r.getUint8(2);let f=this.HEADER_LENGTH+2;const m=i.decode(n.slice(f,f+l));f=f+l;const p=i.decode(n.slice(f,f+u));f=f+u;const y=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:m,event:p,payload:y}}}class dg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(ke||(ke={}));const zm=(o,n,r={})=>{var i;const l=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((u,f)=>(u[f]=Zy(f,o,n,l),u),{}):{}},Zy=(o,n,r,i)=>{const l=n.find(m=>m.name===o),u=l?.type,f=r[o];return u&&!i.includes(u)?hg(u,f):Zo(f)},hg=(o,n)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return ev(n,r)}switch(o){case ke.bool:return Iy(n);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Wy(n);case ke.json:case ke.jsonb:return Fy(n);case ke.timestamp:return tv(n);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return Zo(n);default:return Zo(n)}},Zo=o=>o,Iy=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Wy=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Fy=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},ev=(o,n)=>{if(typeof o!="string")return o;const r=o.length-1,i=o[r];if(o[0]==="{"&&i==="}"){let u;const f=o.slice(1,r);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(m=>hg(n,m))}return o},tv=o=>typeof o=="string"?o.replace(" ","T"):o,fg=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Bo{constructor(n,r,i={},l=Jo){this.channel=n,this.event=r,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Dm;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Dm||(Dm={}));class Or{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:u,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Or.syncState(this.state,l,u,f),this.pendingDiffs.forEach(p=>{this.state=Or.syncDiff(this.state,p,u,f)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},l=>{const{onJoin:u,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Or.syncDiff(this.state,l,u,f),m())}),this.onJoin((l,u,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:f})}),this.onLeave((l,u,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,l){const u=this.cloneDeep(n),f=this.transformState(r),m={},p={};return this.map(u,(y,v)=>{f[y]||(p[y]=v)}),this.map(f,(y,v)=>{const x=u[y];if(x){const _=v.map(U=>U.presence_ref),w=x.map(U=>U.presence_ref),j=v.filter(U=>w.indexOf(U.presence_ref)<0),T=x.filter(U=>_.indexOf(U.presence_ref)<0);j.length>0&&(m[y]=j),T.length>0&&(p[y]=T)}else m[y]=v}),this.syncDiff(u,{joins:m,leaves:p},i,l)}static syncDiff(n,r,i,l){const{joins:u,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(u,(m,p)=>{var y;const v=(y=n[m])!==null&&y!==void 0?y:[];if(n[m]=this.cloneDeep(p),v.length>0){const x=n[m].map(w=>w.presence_ref),_=v.filter(w=>x.indexOf(w.presence_ref)<0);n[m].unshift(..._)}i(m,v,p)}),this.map(f,(m,p)=>{let y=n[m];if(!y)return;const v=p.map(x=>x.presence_ref);y=y.filter(x=>v.indexOf(x.presence_ref)<0),n[m]=y,l(m,y,p),y.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const l=n[i];return"metas"in l?r[i]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[i]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mm;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Mm||(Mm={}));var kr;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(kr||(kr={}));var pa;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(pa||(pa={}));class lu{constructor(n,r={config:{}},i){var l,u;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Bo(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new dg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Or(this),this.broadcastEndpointURL=fg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,y=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[kr.PRESENCE]&&this.bindings[kr.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},_={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(w=>n?.(pa.CHANNEL_ERROR,w)),this._onClose(()=>n?.(pa.CLOSED)),this.updateJoinPayload(Object.assign({config:_},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var j;if(this.socket.setAuth(),w===void 0){n?.(pa.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,U=(j=T?.length)!==null&&j!==void 0?j:0,q=[];for(let L=0;L<U;L++){const H=T[L],{filter:{event:V,schema:Y,table:$,filter:ee}}=H,ce=w&&w[L];if(ce&&ce.event===V&&ce.schema===Y&&ce.table===$&&ce.filter===ee)q.push(Object.assign(Object.assign({},H),{id:ce.id}));else{this.unsubscribe(),this.state=Fe.errored,n?.(pa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,n&&n(pa.SUBSCRIBED);return}}).receive("error",w=>{this.state=Fe.errored,n?.(pa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n?.(pa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===Fe.joined&&n===kr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,i)}async send(n,r={}){var i,l;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:f}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,m,p;const y=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Fe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new Bo(this,Kt.leave,{},n),i.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const l=new AbortController,u=setTimeout(()=>l.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(u),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Bo(this,n,r,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Jy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var l,u;const f=n.toLocaleLowerCase(),{close:m,error:p,leave:y,join:v}=Kt;if(i&&[m,p,y,v].indexOf(f)>=0&&i!==this._joinRef())return;let _=this._onMessage(f,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var j,T,U;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((U=(T=w.filter)===null||T===void 0?void 0:T.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===f}).map(w=>w.callback(_,i)):(u=this.bindings[f])===null||u===void 0||u.filter(w=>{var j,T,U,q,L,H;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in w){const V=w.id,Y=(j=w.filter)===null||j===void 0?void 0:j.event;return V&&((T=r.ids)===null||T===void 0?void 0:T.includes(V))&&(Y==="*"||Y?.toLocaleLowerCase()===((U=r.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const V=(L=(q=w?.filter)===null||q===void 0?void 0:q.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return V==="*"||V===((H=r?.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===f}).map(w=>{if(typeof _=="object"&&"ids"in _){const j=_.data,{schema:T,table:U,commit_timestamp:q,type:L,errors:H}=j;_=Object.assign(Object.assign({},{schema:T,table:U,commit_timestamp:q,eventType:L,new:{},old:{},errors:H}),this._getPayloadRecords(j))}w.callback(_,i)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const l=n.toLocaleLowerCase(),u={type:l,filter:r,callback:i};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&lu.isEqual(l.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Kt.close,{},n)}_onError(n){this._on(Kt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=zm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=zm(n.columns,n.old_record)),r}}const Lo=()=>{},el={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},av=[1e3,2e3,5e3,1e4],nv=1e4,sv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rv{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jo,this.transport=null,this.heartbeatIntervalMs=el.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lo,this.ref=0,this.reconnectTimer=null,this.logger=Lo,this.conn=null,this.sendBuffer=[],this.serializer=new Py,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...f)=>Ia(async()=>{const{default:m}=await Promise.resolve().then(()=>Ts);return{default:m}},void 0).then(({default:m})=>m(...f)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...f)=>u(...f)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Po.websocket}`,this.httpEndpoint=fg(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vy.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ky}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return _n.Connecting;case Tr.open:return _n.Open;case Tr.closing:return _n.Closing;default:return _n.Closed}}isConnected(){return this.connectionState()===_n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,l=this.getChannels().find(u=>u.topic===i);if(l)return l;{const u=new lu(`realtime:${n}`,r,this);return this.channels.push(u),u}}push(n){const{topic:r,event:i,payload:l,ref:u}=n,f=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${i} (${u})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Xy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},el.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:l,payload:u,ref:f}=r,m=f?`(${f})`:"",p=u.status||"";this.log("receive",`${p} ${i} ${l} ${m}`.trim(),u),this.channels.filter(y=>y._isMember(i)).forEach(y=>y._trigger(l,u,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Kt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${i}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([sv],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const l={access_token:r,version:Qy};r&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push(Kt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new dg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},el.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,l,u,f,m,p,y,v;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Jo,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:el.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:Lo,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(x=>av[x-1]||nv),this.encode=(y=n?.encode)!==null&&y!==void 0?y:((x,_)=>_(JSON.stringify(x))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class cu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Pe(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class iv extends cu{constructor(n,r,i){super(n),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Io extends cu{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var lv=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};const mg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>Ia(async()=>{const{default:i}=await Promise.resolve().then(()=>Ts);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},cv=()=>lv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ia(()=>Promise.resolve().then(()=>Ts),void 0)).Response:Response}),Wo=o=>{if(Array.isArray(o))return o.map(r=>Wo(r));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([r,i])=>{const l=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[l]=Wo(i)}),n},ov=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var Cn=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};const Ho=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),uv=(o,n,r)=>Cn(void 0,void 0,void 0,function*(){const i=yield cv();o instanceof i&&!r?.noResolveJson?o.json().then(l=>{const u=o.status||500,f=l?.statusCode||u+"";n(new iv(Ho(l),u,f))}).catch(l=>{n(new Io(Ho(l),l))}):n(new Io(Ho(o),o))}),dv=(o,n,r,i)=>{const l={method:o,headers:n?.headers||{}};return o==="GET"||!i?l:(ov(i)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(i)):l.body=i,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),r))};function Dr(o,n,r,i,l,u){return Cn(this,void 0,void 0,function*(){return new Promise((f,m)=>{o(r,dv(n,i,l,u)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>uv(p,m,i))})})}function cl(o,n,r,i){return Cn(this,void 0,void 0,function*(){return Dr(o,"GET",n,r,i)})}function It(o,n,r,i,l){return Cn(this,void 0,void 0,function*(){return Dr(o,"POST",n,i,l,r)})}function Fo(o,n,r,i,l){return Cn(this,void 0,void 0,function*(){return Dr(o,"PUT",n,i,l,r)})}function hv(o,n,r,i){return Cn(this,void 0,void 0,function*(){return Dr(o,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function gg(o,n,r,i,l){return Cn(this,void 0,void 0,function*(){return Dr(o,"DELETE",n,i,l,r)})}var fv=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};class mv{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return fv(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pe(n))return{data:null,error:n};throw n}})}}var gv=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};class pv{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}asStream(){return new mv(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.execute().then(n,r)}execute(){return gv(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pe(n))return{data:null,error:n};throw n}})}}var yt=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};const yv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vv{constructor(n,r={},i,l){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=i,this.fetch=mg(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,i,l){return yt(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},qm),l);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const y=this._removeEmptyFolders(r),v=this._getFinalPath(y),x=yield(n=="PUT"?Fo:It)(this.fetch,`${this.url}/object/${v}`,u,Object.assign({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Pe(u))return{data:null,error:u};throw u}})}upload(n,r,i){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,i)})}uploadToSignedUrl(n,r,i,l){return yt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",r);try{let p;const y=Object.assign({upsert:qm.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",y.cacheControl)):(p=i,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const x=yield Fo(this.fetch,m.toString(),p,{headers:v});return{data:{path:u,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Pe(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,r){return yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const l=Object.assign({},this.headers);r?.upsert&&(l["x-upsert"]="true");const u=yield It(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:l}),f=new URL(this.url+u.url),m=f.searchParams.get("token");if(!m)throw new cu("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pe(i))return{data:null,error:i};throw i}})}update(n,r,i){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,i)})}move(n,r,i){return yt(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pe(l))return{data:null,error:l};throw l}})}copy(n,r,i){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pe(l))return{data:null,error:l};throw l}})}createSignedUrl(n,r,i){return yt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),u=yield It(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pe(l))return{data:null,error:l};throw l}})}createSignedUrls(n,r,i){return yt(this,void 0,void 0,function*(){try{const l=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:l.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pe(l))return{data:null,error:l};throw l}})}download(n,r){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(r?.transform||{}),f=u?`?${u}`:"",m=this._getFinalPath(n),p=()=>cl(this.fetch,`${this.url}/${l}/${m}${f}`,{headers:this.headers,noResolveJson:!0});return new pv(p,this.shouldThrowOnError)}info(n){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const i=yield cl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Wo(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pe(i))return{data:null,error:i};throw i}})}exists(n){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield hv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pe(i)&&i instanceof Io){const l=i.originalError;if([400,404].includes(l?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,r){const i=this._getFinalPath(n),l=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&l.push(u);const m=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&l.push(p);let y=l.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${y}`)}}}remove(n){return yt(this,void 0,void 0,function*(){try{return{data:yield gg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pe(r))return{data:null,error:r};throw r}})}list(n,r,i){return yt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},yv),r),{prefix:n||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pe(l))return{data:null,error:l};throw l}})}listV2(n,r){return yt(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield It(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pe(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const bv="2.75.0",xv={"X-Client-Info":`storage-js/${bv}`};var ys=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};class _v{constructor(n,r={},i,l){this.shouldThrowOnError=!1;const u=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xv),r),this.fetch=mg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ys(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pe(n))return{data:null,error:n};throw n}})}getBucket(n){return ys(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pe(r))return{data:null,error:r};throw r}})}createBucket(n){return ys(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pe(l))return{data:null,error:l};throw l}})}updateBucket(n,r){return ys(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pe(i))return{data:null,error:i};throw i}})}emptyBucket(n){return ys(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pe(r))return{data:null,error:r};throw r}})}deleteBucket(n){return ys(this,void 0,void 0,function*(){try{return{data:yield gg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pe(r))return{data:null,error:r};throw r}})}}class wv extends _v{constructor(n,r={},i,l){super(n,r,i,l)}from(n){return new vv(this.url,this.headers,n,this.fetch)}}const Sv="2.75.0";let Er="";typeof Deno<"u"?Er="deno":typeof document<"u"?Er="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Er="react-native":Er="node";const jv={"X-Client-Info":`supabase-js-${Er}/${Sv}`},Cv={headers:jv},Av={schema:"public"},Nv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ev={};var Tv=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};const Ov=o=>{let n;return o?n=o:typeof fetch>"u"?n=rg:n=fetch,(...r)=>n(...r)},kv=()=>typeof Headers>"u"?ig:Headers,Rv=(o,n,r)=>{const i=Ov(r),l=kv();return(u,f)=>Tv(void 0,void 0,void 0,function*(){var m;const p=(m=yield n())!==null&&m!==void 0?m:o;let y=new l(f?.headers);return y.has("apikey")||y.set("apikey",o),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),i(u,Object.assign(Object.assign({},f),{headers:y}))})};var Uv=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};function zv(o){return o.endsWith("/")?o:o+"/"}function Dv(o,n){var r,i;const{db:l,auth:u,realtime:f,global:m}=o,{db:p,auth:y,realtime:v,global:x}=n,_={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},v),f),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(r=x?.headers)!==null&&r!==void 0?r:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Uv(this,void 0,void 0,function*(){return""})};return o.accessToken?_.accessToken=o.accessToken:delete _.accessToken,_}function Mv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const pg="2.75.0",Ss=30*1e3,eu=3,Go=eu*Ss,qv="http://localhost:9999",Bv="supabase.auth.token",Lv={"X-Client-Info":`gotrue-js/${pg}`},tu="X-Supabase-Api-Version",yg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gv=600*1e3;class Ur extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function W(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class $v extends Ur{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function Vv(o){return W(o)&&o.name==="AuthApiError"}class wn extends Ur{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Wa extends Ur{constructor(n,r,i,l){super(n,i,l),this.name=r,this.status=i}}class Qa extends Wa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yv(o){return W(o)&&o.name==="AuthSessionMissingError"}class vs extends Wa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tl extends Wa{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class al extends Wa{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Qv(o){return W(o)&&o.name==="AuthImplicitGrantRedirectError"}class Bm extends Wa{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class au extends Wa{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function $o(o){return W(o)&&o.name==="AuthRetryableFetchError"}class Lm extends Wa{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class nu extends Wa{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const ol="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hm=` 	
\r=`.split(""),Kv=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<Hm.length;n+=1)o[Hm[n].charCodeAt(0)]=-2;for(let n=0;n<ol.length;n+=1)o[ol[n].charCodeAt(0)]=n;return o})();function Gm(o,n,r){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(ol[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(ol[i]),n.queuedBits-=6}}function vg(o,n,r){const i=Kv[o];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function $m(o){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=f=>{Pv(f,i,r)};for(let f=0;f<o.length;f+=1)vg(o.charCodeAt(f),l,u);return n.join("")}function Xv(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Jv(o,n){for(let r=0;r<o.length;r+=1){let i=o.charCodeAt(r);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(o.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}Xv(i,n)}}function Pv(o,n,r){if(n.utf8seq===0){if(o<=127){r(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function As(o){const n=[],r={queue:0,queuedBits:0},i=l=>{n.push(l)};for(let l=0;l<o.length;l+=1)vg(o.charCodeAt(l),r,i);return new Uint8Array(n)}function Zv(o){const n=[];return Jv(o,r=>n.push(r)),new Uint8Array(n)}function Sn(o){const n=[],r={queue:0,queuedBits:0},i=l=>{n.push(l)};return o.forEach(l=>Gm(l,r,i)),Gm(null,r,i),n.join("")}function Iv(o){return Math.round(Date.now()/1e3)+o}function Wv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const Et=()=>typeof window<"u"&&typeof document<"u",vn={tested:!1,writable:!1},bg=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vn.tested)return vn.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),vn.tested=!0,vn.writable=!0}catch{vn.tested=!0,vn.writable=!1}return vn.writable};function Fv(o){const n={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,u)=>{n[u]=l})}catch{}return r.searchParams.forEach((i,l)=>{n[l]=i}),n}const xg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>Ia(async()=>{const{default:i}=await Promise.resolve().then(()=>Ts);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},eb=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",js=async(o,n,r)=>{await o.setItem(n,JSON.stringify(r))},bn=async(o,n)=>{const r=await o.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ya=async(o,n)=>{await o.removeItem(n)};class fl{constructor(){this.promise=new fl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}fl.promiseConstructor=Promise;function Vo(o){const n=o.split(".");if(n.length!==3)throw new nu("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!Hv.test(n[i]))throw new nu("JWT not in base64url format");return{header:JSON.parse($m(n[0])),payload:JSON.parse($m(n[1])),signature:As(n[2]),raw:{header:n[0],payload:n[1]}}}async function tb(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function ab(o,n){return new Promise((i,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await o(u);if(!n(u,null,f)){i(f);return}}catch(f){if(!n(u,f)){l(f);return}}})()})}function nb(o){return("0"+o.toString(16)).substr(-2)}function sb(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let l="";for(let u=0;u<56;u++)l+=r.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(n),Array.from(n,nb).join("")}async function rb(o){const r=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(i);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function ib(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await rb(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bs(o,n,r=!1){const i=sb();let l=i;r&&(l+="/PASSWORD_RECOVERY"),await js(o,`${n}-code-verifier`,l);const u=await ib(i);return[u,i===u?"plain":"s256"]}const lb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cb(o){const n=o.headers.get(tu);if(!n||!n.match(lb))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function ob(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function ub(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const db=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xs(o){if(!db.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yo(){const o={};return new Proxy(o,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vm(o){return JSON.parse(JSON.stringify(o))}var hb=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(o);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(o,i[l])&&(r[i[l]]=o[i[l]]);return r};const xn=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),fb=[502,503,504];async function Ym(o){var n;if(!eb(o))throw new au(xn(o),0);if(fb.includes(o.status))throw new au(xn(o),o.status);let r;try{r=await o.json()}catch(u){throw new wn(xn(u),u)}let i;const l=cb(o);if(l&&l.getTime()>=yg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Lm(xn(r),o.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Qa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new Lm(xn(r),o.status,r.weak_password.reasons);throw new $v(xn(r),o.status||500,i)}const mb=(o,n,r,i)=>{const l={method:o,headers:n?.headers||{}};return o==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),r))};async function se(o,n,r,i){var l;const u=Object.assign({},i?.headers);u[tu]||(u[tu]=yg["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const f=(l=i?.query)!==null&&l!==void 0?l:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await gb(o,n,r+m,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function gb(o,n,r,i,l,u){const f=mb(n,i,l,u);let m;try{m=await o(r,Object.assign({},f))}catch(p){throw console.error(p),new au(xn(p),0)}if(m.ok||await Ym(m),i?.noResolveJson)return m;try{return await m.json()}catch(p){await Ym(p)}}function Qt(o){var n;let r=null;vb(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=Iv(o.expires_in)));const i=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:r,user:i},error:null}}function Qm(o){const n=Qt(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=o.weak_password),n}function Ka(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function pb(o){return{data:o,error:null}}function yb(o){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:l,verification_type:u}=o,f=hb(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:i,redirect_to:l,verification_type:u},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function Km(o){return o}function vb(o){return o.access_token&&o.refresh_token&&o.expires_in}const Qo=["global","local","others"];var bb=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(o);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(o,i[l])&&(r[i[l]]=o[i[l]]);return r};class xb{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=xg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Qo[0]){if(Qo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qo.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ka})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=bb(n,["options"]),l=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(l.new_email=i?.newEmail,delete l.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:yb,redirectTo:r?.redirectTo})}catch(r){if(W(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ka})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,l,u,f,m,p;try{const y={nextPage:null,lastPage:0,total:0},v=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Km});if(v.error)throw v.error;const x=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,w=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(j=>{const T=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(j.split(";")[1].split("=")[1]);y[`${U}Page`]=T}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(W(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){xs(n);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ka})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){xs(n);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Ka})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){xs(n);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ka})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){xs(n.userId);try{const{data:r,error:i}=await se(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:i}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteFactor(n){xs(n.userId),xs(n.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,l,u,f,m,p;try{const y={nextPage:null,lastPage:0,total:0},v=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Km});if(v.error)throw v.error;const x=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,w=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(j=>{const T=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(j.split(";")[1].split("=")[1]);y[`${U}Page`]=T}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(W(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}}function Xm(o={}){return{getItem:n=>o[n]||null,setItem:(n,r)=>{o[n]=r},removeItem:n=>{delete o[n]}}}const _s={debug:!!(globalThis&&bg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _g extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class _b extends _g{}async function wb(o,n,r){_s.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),_s.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){_s.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,l.name);try{return await r()}finally{_s.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,l.name)}}else{if(n===0)throw _s.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new _b(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(_s.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Sb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wg(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function jb(o){return parseInt(o,16)}function Cb(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Ab(o){var n;const{chainId:r,domain:i,expirationTime:l,issuedAt:u=new Date,nonce:f,notBefore:m,requestId:p,resources:y,scheme:v,uri:x,version:_}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const w=wg(o.address),j=v?`${v}://${i}`:i,T=o.statement?`${o.statement}
`:"",U=`${j} wants you to sign in with your Ethereum account:
${w}

${T}`;let q=`URI: ${x}
Version: ${_}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${u.toISOString()}`;if(l&&(q+=`
Expiration Time: ${l.toISOString()}`),m&&(q+=`
Not Before: ${m.toISOString()}`),p&&(q+=`
Request ID: ${p}`),y){let L=`
Resources:`;for(const H of y){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);L+=`
- ${H}`}q+=L}return`${U}
${q}`}class Je extends Error{constructor({message:n,code:r,cause:i,name:l}){var u;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=l??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class ul extends Je{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Nb({error:o,options:n}){var r,i,l;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Je({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return u.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(jg(f)){if(u.rp.id!==f)return new Je({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function Eb({error:o,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Je({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const i=window.location.hostname;if(jg(i)){if(r.rpId!==i)return new Je({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}var Sg=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(o);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(o,i[l])&&(r[i[l]]=o[i[l]]);return r};class Tb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Ob=new Tb;function kb(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:r,excludeCredentials:i}=o,l=Sg(o,["challenge","user","excludeCredentials"]),u=As(n).buffer,f=Object.assign(Object.assign({},r),{id:As(r.id).buffer}),m=Object.assign(Object.assign({},l),{challenge:u,user:f});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const y=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},y),{id:As(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function Rb(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:r}=o,i=Sg(o,["challenge","allowCredentials"]),l=As(n).buffer,u=Object.assign(Object.assign({},i),{challenge:l});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const m=r[f];u.allowCredentials[f]=Object.assign(Object.assign({},m),{id:As(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function Ub(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:Sn(new Uint8Array(o.response.attestationObject)),clientDataJSON:Sn(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function zb(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,i=o.getClientExtensionResults(),l=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:Sn(new Uint8Array(l.authenticatorData)),clientDataJSON:Sn(new Uint8Array(l.clientDataJSON)),signature:Sn(new Uint8Array(l.signature)),userHandle:l.userHandle?Sn(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function jg(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Jm(){var o,n;return!!(Et()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Db(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ul("Browser returned unexpected credential type",n)}:{data:null,error:new ul("Empty credential response",n)}}catch(n){return{data:null,error:Nb({error:n,options:o})}}}async function Mb(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ul("Browser returned unexpected credential type",n)}:{data:null,error:new ul("Empty credential response",n)}}catch(n){return{data:null,error:Eb({error:n,options:o})}}}const qb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Bb={userVerification:"preferred",hints:["security-key"]};function dl(...o){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),i={};for(const l of o)if(l)for(const u in l){const f=l[u];if(f!==void 0)if(Array.isArray(f))i[u]=f;else if(r(f))i[u]=f;else if(n(f)){const m=i[u];n(m)?i[u]=dl(m,f):i[u]=dl(f)}else i[u]=f}return i}function Lb(o,n){return dl(qb,o,n||{})}function Hb(o,n){return dl(Bb,o,n||{})}class Gb{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:l},u){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:m};const p=l??Ob.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${i}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=Lb(f.webauthn.credential_options.publicKey,u?.create),{data:v,error:x}=await Db({publicKey:y,signal:p});return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}case"request":{const y=Hb(f.webauthn.credential_options.publicKey,u?.request),{data:v,error:x}=await Mb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:p}));return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}}}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new wn("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}},u){if(!r)return{data:null,error:new Ur("rpId is required for WebAuthn authentication")};try{if(!Jm())return{data:null,error:new wn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:l},{request:u});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:i,credential_response:p.credential_response}})}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new wn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l},u){if(!r)return{data:null,error:new Ur("rpId is required for WebAuthn registration")};try{if(!Jm())return{data:null,error:new wn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(v=>{var x;return(x=v.data)===null||x===void 0?void 0:x.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:m};const{data:p,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:l},{create:u});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:y}}catch(f){return W(f)?{data:null,error:f}:{data:null,error:new wn("Unexpected error in register",f)}}}}Sb();const $b={url:qv,storageKey:Bv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Lv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pm(o,n,r){return await r()}const ws={};class zr{get jwks(){var n,r;return(r=(n=ws[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=ws[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{cachedAt:n})}constructor(n){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zr.nextInstanceID,zr.nextInstanceID+=1,this.instanceID>0&&Et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},$b),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new xb({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=xg(l.fetch),this.lock=l.lock||Pm,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Et()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=wb:this.lock=Pm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Gb(this)},this.persistSession?(l.storage?this.storage=l.storage:bg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xm(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Xm(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Fv(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Et()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:u}=await this._getSessionFromURL(r,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Qv(u)){const p=(n=u.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?{error:r}:{error:new wn("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,l;try{const u=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Qt}),{data:f,error:m}=u;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var r,i,l;try{let u;if("email"in n){const{email:v,password:x,options:_}=n;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await bs(this.storage,this.storageKey)),u=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:x,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:w,code_challenge_method:j},xform:Qt})}else if("phone"in n){const{phone:v,password:x,options:_}=n;u=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(l=_?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Qt})}else throw new tl("You must provide either an email or phone number and a password");const{data:f,error:m}=u;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let r;if("email"in n){const{email:u,password:f,options:m}=n;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Qm})}else if("phone"in n){const{phone:u,password:f,options:m}=n;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Qm})}else throw new tl("You must provide either an email or phone number and a password");const{data:i,error:l}=r;return l?{data:{user:null,session:null},error:l}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new vs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,i,l,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,l,u,f,m,p,y,v,x,_;let w,j;if("message"in n)w=n.message,j=n.signature;else{const{chain:T,wallet:U,statement:q,options:L}=n;let H;if(Et())if(typeof U=="object")H=U;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")H=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=U}const V=new URL((r=L?.url)!==null&&r!==void 0?r:window.location.href),Y=await H.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=wg(Y[0]);let ee=(i=L?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ee){const J=await H.request({method:"eth_chainId"});ee=jb(J)}const ce={domain:V.host,address:$,statement:q,uri:V.href,version:"1",chainId:ee,nonce:(l=L?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(f=(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=L?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(y=L?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=L?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=Ab(ce),j=await H.request({method:"personal_sign",params:[Cb(w),$]})}try{const{data:T,error:U}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:j},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Qt});if(U)throw U;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new vs}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:U})}catch(T){if(W(T))return{data:{user:null,session:null},error:T};throw T}}async signInWithSolana(n){var r,i,l,u,f,m,p,y,v,x,_,w;let j,T;if("message"in n)j=n.message,T=n.signature;else{const{chain:U,wallet:q,statement:L,options:H}=n;let V;if(Et())if(typeof q=="object")V=q;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))V=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!H?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=q}const Y=new URL((r=H?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in V&&V.signIn){const $=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H?.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),L?{statement:L}:null));let ee;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")ee=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)ee=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)j=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),T=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${Y.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(l=(i=H?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=H?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((f=H?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((m=H?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((p=H?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((y=H?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((x=(v=H?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...H.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const $=await V.signMessage(new TextEncoder().encode(j),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=$}}try{const{data:U,error:q}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Sn(T)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Qt});if(q)throw q;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new vs}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:q})}catch(U){if(W(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(n){const r=await bn(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(r??"").split("/");try{const{data:u,error:f}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Qt});if(await Ya(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new vs}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:f})}catch(u){if(W(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:r,provider:i,token:l,access_token:u,nonce:f}=n,m=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Qt}),{data:p,error:y}=m;return y?{data:{user:null,session:null},error:y}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new vs}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:y})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,i,l,u,f;try{if("email"in n){const{email:m,options:p}=n;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await bs(this.storage,this.storageKey));const{error:x}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in n){const{phone:m,options:p}=n,{data:y,error:v}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=p?.data)!==null&&l!==void 0?l:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:v}}throw new tl("You must provide either an email or phone number.")}catch(m){if(W(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var r,i;try{let l,u;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:m}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Qt});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,y=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(l){if(W(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var r,i,l;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await bs(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:pb})}catch(u){if(W(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Qa;const{error:l}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:l,options:u}=n,{error:f}=await se(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:l,options:u}=n,{data:f,error:m}=await se(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:m}}throw new tl("You must provide either an email or phone number and a type")}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await bn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Go:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await bn(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Yo()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,y,v)=>(!f&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,y,v))})}return{data:{session:n},error:null}}const{data:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ka}):await this._useSession(async r=>{var i,l,u;const{data:f,error:m}=r;if(m)throw m;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qa}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Ka})})}catch(r){if(W(r))return Yv(r)&&(await this._removeSession(),await Ya(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:l,error:u}=i;if(u)throw u;if(!l.session)throw new Qa;const f=l.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await bs(this.storage,this.storageKey));const{data:y,error:v}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:Ka});if(v)throw v;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Qa;const r=Date.now()/1e3;let i=r,l=!0,u=null;const{payload:f}=Vo(n.access_token);if(f.exp&&(i=f.exp,l=i<=r),l){const{data:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;u={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(r){if(W(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:m}=r;if(m)throw m;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Qa;const{data:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!Et())throw new al("No browser detected.");if(n.error||n.error_description||n.error_code)throw new al(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new al("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Bm("No code detected.");const{data:L,error:H}=await this._exchangeCodeForSession(n.code);if(H)throw H;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:u,refresh_token:f,expires_in:m,expires_at:p,token_type:y}=n;if(!u||!m||!f||!y)throw new al("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(m);let _=v+x;p&&(_=parseInt(p));const w=_-v;w*1e3<=Ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${x}s`);const j=_-x;v-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,_,v):v-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,_,v);const{data:T,error:U}=await this._getUser(u);if(U)throw U;const q={provider_token:i,provider_refresh_token:l,access_token:u,expires_in:x,expires_at:_,refresh_token:f,token_type:y,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:n.type},error:null}}catch(i){if(W(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await bn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:l,error:u}=r;if(u)return{error:u};const f=(i=l.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(Vv(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await Ya(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Wv(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,l;try{const{data:{session:u},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,r={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await bs(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(W(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:l}=await this._useSession(async u=>{var f,m,p,y,v;const{data:x,error:_}=u;if(_)throw _;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return Et()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(W(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:l,data:{session:u}}=r;if(l)throw l;const{options:f,provider:m,token:p,access_token:y,nonce:v}=n,x=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Qt}),{data:_,error:w}=x;return w?{data:{user:null,session:null},error:w}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new vs}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:w})}catch(l){if(W(l))return{data:{user:null,session:null},error:l};throw l}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,l;const{data:u,error:f}=r;if(f)throw f;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await ab(async l=>(l>0&&await tb(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Qt})),(l,u)=>{const f=200*Math.pow(2,l);return u&&$o(u)&&Date.now()+f-i<Ss})}catch(i){if(this._debug(r,"error",i),W(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),Et()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await bn(this.storage,this.storageKey);if(l&&this.userStorage){let f=await bn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await js(this.userStorage,this.storageKey+"-user",f)),l.user=(n=f?.user)!==null&&n!==void 0?n:Yo()}else if(l&&!l.user&&!l.user){const f=await bn(this.storage,this.storageKey+"-user");f&&f?.user?(l.user=f.user,await Ya(this.storage,this.storageKey+"-user"),await js(this.storage,this.storageKey,l)):l.user=Yo()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const u=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Go;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Go}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),$o(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(l.access_token);!m&&f?.user?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Qa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new fl;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new Qa;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={data:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(l,"error",u),W(u)){const f={data:null,error:u};return $o(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,i=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(p){u.push(p)}});if(await Promise.all(f),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await js(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const u=Vm(l);await js(this.storage,this.storageKey,u)}else{const l=Vm(r);await js(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Ya(this.storage,this.storageKey),await Ya(this.storage,this.storageKey+"-code-verifier"),await Ya(this.storage,this.storageKey+"-user"),this.userStorage&&await Ya(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Et()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ss);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-n)/Ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Ss}ms, refresh threshold is ${eu} ticks`),l<=eu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof _g)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const l=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,f]=await bs(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(m.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);l.push(u.toString())}return i?.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:l,error:u}=r;return u?{data:null,error:u}:await se(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,l;const{data:u,error:f}=r;if(f)return{data:null,error:f};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:y}=await se(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&p.type==="totp"&&(!((l=p?.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:u}=r;if(u)return{data:null,error:u};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Ub(n.webauthn.credential_response):zb(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:p}=await se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:p})})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:u}=r;if(u)return{data:null,error:u};const f=await se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:kb(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Rb(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=r?.factors)!==null&&n!==void 0?n:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,i;const{data:{session:l},error:u}=n;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Vo(l.access_token);let m=null;f.aal&&(m=f.aal);let p=m;((i=(r=l.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const v=f.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(m=>m.kid===n);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(m=>m.kid===n),i&&this.jwks_cached_at+Gv>l)return i;const{data:u,error:f}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,i=u.keys.find(m=>m.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:w,error:j}=await this.getSession();if(j||!w.session)return{data:null,error:j};i=w.session.access_token}const{header:l,payload:u,signature:f,raw:{header:m,payload:p}}=Vo(i);r?.allowExpired||ob(u.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!y){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:u,header:l,signature:f},error:null}}const v=ub(l.alg),x=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,f,Zv(`${m}.${p}`)))throw new nu("Invalid JWT signature");return{data:{claims:u,header:l,signature:f},error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}}zr.nextInstanceID=0;const Vb=zr;class Yb extends Vb{constructor(n){super(n)}}var Qb=function(o,n,r,i){function l(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(v){try{y(i.next(v))}catch(x){f(x)}}function p(v){try{y(i.throw(v))}catch(x){f(x)}}function y(v){v.done?u(v.value):l(v.value).then(m,p)}y((i=i.apply(o,n||[])).next())})};class Kb{constructor(n,r,i){var l,u,f;this.supabaseUrl=n,this.supabaseKey=r;const m=Mv(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:Av,realtime:Ev,auth:Object.assign(Object.assign({},Nv),{storageKey:p}),global:Cv},v=Dv(i??{},y);this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=v.auth)!==null&&f!==void 0?f:{},this.headers,v.global.fetch),this.fetch=Rv(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new $y(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new wv(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Ry(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,i)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Qb(this,void 0,void 0,function*(){var n,r;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:l,userStorage:u,storageKey:f,flowType:m,lock:p,debug:y},v,x){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yb({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),v),storageKey:f,autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:l,userStorage:u,flowType:m,lock:p,debug:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new rv(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(n,r,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xb=(o,n,r)=>new Kb(o,n,r);function Jb(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Jb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pb="https://xtdudfccgbdanmmncwhn.supabase.co",Zb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0ZHVkZmNjZ2JkYW5tbW5jd2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDAzMjAsImV4cCI6MjA3NTY3NjMyMH0.y1lsJh-kNWyLxXAdkMZbRoHUAVTdHq17SbXq-llrT2g",K=Xb(Pb,Zb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Ib=Object.freeze(Object.defineProperty({__proto__:null,supabase:K},Symbol.toStringTag,{value:"Module"}));class Wb{createUserFromProfileData(n,r){return{id:n.id,email:n.email||"",displayName:r?.display_name||n.user_metadata?.display_name||n.email?.split("@")[0],username:r?.username||n.user_metadata?.username||n.email?.split("@")[0],profileCompleted:r?.profile_completed||!!n.user_metadata?.profile_completed,createdAt:new Date(n.created_at)}}async mapAuthUserToUser(n){try{const{data:r}=await K.from("user_profiles").select("display_name, username, profile_completed").eq("id",n.id).single();return r&&typeof r=="object"?this.createUserFromProfileData(n,r):this.createUserFromProfileData(n)}catch{return this.createUserFromProfileData(n)}}async getCurrentUser(){try{const{data:{user:n},error:r}=await K.auth.getUser();return r||!n?null:await this.mapAuthUserToUser(n)}catch{return null}}async signIn(n,r){try{const{data:i,error:l}=await K.auth.signInWithPassword({email:n,password:r});return l?{success:!1,error:l.message}:{success:!0,data:{id:i.user.id,email:i.user.email||"",displayName:i.user.user_metadata?.display_name,createdAt:new Date(i.user.created_at)}}}catch{return{success:!1,error:"An unexpected error occurred during sign in"}}}async signUp(n,r){try{const i=`${window.location.origin}${window.location.pathname}`,{data:l,error:u}=await K.auth.signUp({email:n,password:r,options:{emailRedirectTo:i}});return u?{success:!1,error:u.message}:l.user?{success:!0,data:{id:l.user.id,email:l.user.email||"",displayName:l.user.user_metadata?.display_name,createdAt:new Date(l.user.created_at)}}:{success:!1,error:"Failed to create user account"}}catch{return{success:!1,error:"An unexpected error occurred during sign up"}}}async signOut(){try{const{error:n}=await K.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred during sign out"}}}onAuthStateChange(n){const{data:{subscription:r}}=K.auth.onAuthStateChange(async(i,l)=>{if(l?.user){const u=await this.mapAuthUserToUser(l.user);n(u)}else n(null)});return()=>r.unsubscribe()}async completeProfile(n,r,i){try{const{error:l}=await K.from("user_profiles").update({display_name:r,username:i,profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",n);if(l)return l.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:l.message};const{data:u,error:f}=await K.auth.updateUser({data:{display_name:r,username:i,profile_completed:!0}});return f?{success:!1,error:f.message}:{success:!0,data:{id:u.user.id,email:u.user.email||"",displayName:r,username:i,profileCompleted:!0,createdAt:new Date(u.user.created_at)}}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to complete profile"}}}buildProfileUpdates(n,r){const i={updated_at:new Date().toISOString()};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}buildAuthUpdates(n,r){const i={};return n!==void 0&&(i.display_name=n),r!==void 0&&(i.username=r),i}async updateProfile(n,r,i){try{const l=this.buildProfileUpdates(r,i),{error:u}=await K.from("user_profiles").update(l).eq("id",n);if(u)return u.code==="23505"?{success:!1,error:"Username is already taken"}:{success:!1,error:u.message};const f=this.buildAuthUpdates(r,i),{data:m,error:p}=await K.auth.updateUser({data:f});if(p)return{success:!1,error:p.message};const{data:y}=await K.from("user_profiles").select("*").eq("id",n).single(),v=y;return{success:!0,data:{id:m.user.id,email:m.user.email||"",displayName:v?.display_name||m.user.user_metadata?.display_name,username:v?.username||m.user.user_metadata?.username,profileCompleted:v?.profile_completed||m.user.user_metadata?.profile_completed||!1,createdAt:new Date(m.user.created_at)}}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to update profile"}}}async changePassword(n,r,i){try{const{data:l}=await K.auth.getUser();if(!l.user?.email)return{success:!1,error:"User not found"};const{error:u}=await K.auth.signInWithPassword({email:l.user.email,password:r});if(u)return{success:!1,error:"Current password is incorrect"};const{error:f}=await K.auth.updateUser({password:i});return f?{success:!1,error:f.message}:{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Failed to change password"}}}async deleteAccount(n){try{const{error:r}=await K.from("user_profiles").delete().eq("id",n);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete account"}}}}class Cg{async getCampaigns(n){try{const{data:r,error:i}=await K.from("campaigns").select(`
          *,
          campaign_members!inner(
            is_admin,
            is_gm,
            is_player,
            user_id
          ),
          member_count:campaign_members(count)
        `).eq("campaign_members.user_id",n).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch campaigns"}:{success:!0,data:r.map(u=>{const f=u.campaign_members[0];return{id:u.id,name:u.name,description:u.description||void 0,createdBy:u.created_by,createdAt:new Date(u.created_at||Date.now()),updatedAt:new Date(u.updated_at||Date.now()),userRoles:f?{isAdmin:f.is_admin||!1,isGm:f.is_gm||!1,isPlayer:f.is_player||!1}:{isAdmin:!1,isGm:!1,isPlayer:!1},memberCount:u.member_count?.[0]?.count||0,isOwner:u.created_by===n}})}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaign(n){try{const{data:r,error:i}=await K.from("campaigns").select("*").eq("id",n).single();return i?{success:!1,error:"Campaign not found"}:{success:!0,data:{id:r.id,name:r.name,description:r.description||void 0,createdBy:r.created_by,createdAt:new Date(r.created_at||Date.now()),updatedAt:new Date(r.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaign(n,r,i=!1){try{const{data:l,error:u}=await K.from("campaigns").insert({name:r.name,description:r.description,created_by:n}).select().single();if(u)return{success:!1,error:`Failed to create campaign: ${u.message}`};const{error:f}=await K.from("campaign_members").insert({campaign_id:l.id,user_id:n,role:"admin"});if(f)return await K.from("campaigns").delete().eq("id",l.id),{success:!1,error:`Failed to set up campaign admin: ${f.message}`};if(i){const{error:p}=await K.from("campaign_members").insert({campaign_id:l.id,user_id:n,role:"gm"})}return{success:!0,data:{id:l.id,name:l.name,description:l.description||void 0,createdBy:l.created_by,createdAt:new Date(l.created_at||Date.now()),updatedAt:new Date(l.updated_at||Date.now())}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateCampaign(n,r){try{const{error:i}=await K.from("campaigns").update({name:r.name,description:r.description,updated_at:new Date().toISOString()}).eq("id",n);return i?{success:!1,error:"Failed to update campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCampaign(n){try{const{error:r}=await K.from("campaigns").delete().eq("id",n);return r?{success:!1,error:"Failed to delete campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCampaignMembers(n){try{const{data:r,error:i}=await K.from("campaign_members").select("id, user_id, is_admin, is_gm, is_player, created_at").eq("campaign_id",n).order("created_at",{ascending:!0});if(i)return{success:!1,error:"Failed to fetch campaign members"};const l=[];for(const u of r){const f=u;try{const{data:m,error:p}=await K.from("user_profiles").select("email, display_name, username").eq("id",f.user_id).single();let y,v;if(!p&&m){const x=m;y=x.email||`user_${f.user_id.slice(0,8)}@example.com`,v=x.display_name||x.username||void 0}else y=`user_${f.user_id.slice(0,8)}@example.com`,v=void 0;l.push({id:f.id,userId:f.user_id,email:y,displayName:v,roles:{isAdmin:f.is_admin||!1,isGm:f.is_gm||!1,isPlayer:f.is_player||!1},joinedAt:new Date(f.created_at)})}catch{l.push({id:f.id,userId:f.user_id,email:`user_${f.user_id.slice(0,8)}@example.com`,displayName:void 0,roles:{isAdmin:f.is_admin||!1,isGm:f.is_gm||!1,isPlayer:f.is_player||!1},joinedAt:new Date(f.created_at)})}}return{success:!0,data:l}}catch{return{success:!1,error:"An unexpected error occurred"}}}async addMemberByEmail(n,r,i){try{const{data:l,error:u}=await K.from("user_profiles").select("id").eq("email",r).single();if(u||!l){const p=(await K.auth.getUser()).data.user?.id;if(!p)return{success:!1,error:"You must be logged in to send invitations"};const y=await this.createPendingInvitation(n,r,i,p);return y.success?{success:!0}:{success:!1,error:y.error||"Failed to send invitation"}}const{data:f}=await K.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",l.id).single();if(f)return{success:!1,error:"User is already a member of this campaign"};const{error:m}=await K.from("campaign_members").insert({campaign_id:n,user_id:l.id,role:i});return m?{success:!1,error:"Failed to add member to campaign"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async updateMemberRole(n,r,i){try{const{error:l}=await K.from("campaign_members").update({is_admin:i.isAdmin,is_gm:i.isGm,is_player:i.isPlayer}).eq("campaign_id",n).eq("user_id",r);return l?{success:!1,error:"Failed to update member role"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async removeMember(n,r){try{const{error:i}=await K.from("campaign_members").delete().eq("campaign_id",n).eq("user_id",r);return i?{success:!1,error:"Failed to remove member"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createPendingInvitation(n,r,i,l){try{const{data:u}=await K.from("pending_invitations").select("id").eq("email",r).eq("campaign_id",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(u)return{success:!1,error:"An invitation has already been sent to this email address for this campaign"};const{data:f}=await K.from("campaigns").select("name").eq("id",n).single(),{data:m}=await K.from("user_profiles").select("display_name, email").eq("id",l).single(),{data:p,error:y}=await K.from("pending_invitations").insert({email:r,campaign_id:n,invited_by:l,role:i}).select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at
        `).single();return y?{success:!1,error:"Failed to create invitation"}:(await K.rpc("send_campaign_invitation",{p_email:r,p_campaign_id:n,p_campaign_name:f?.name||"Unknown Campaign",p_inviter_name:m?.display_name||m?.email||"Unknown User",p_role:i}),{success:!0,data:{id:p.id,email:p.email,campaignId:p.campaign_id,campaignName:f?.name,invitedBy:p.invited_by,inviterName:m?.display_name||m?.email,role:p.role,createdAt:new Date(p.created_at||""),expiresAt:new Date(p.expires_at||""),acceptedAt:p.accepted_at?new Date(p.accepted_at):void 0}})}catch{return{success:!1,error:"An unexpected error occurred"}}}async getPendingInvitations(n){try{const{data:r,error:i}=await K.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("campaign_id",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(u=>({id:u.id,email:u.email,campaignId:u.campaign_id,campaignName:u.campaigns?.name,invitedBy:u.invited_by,inviterName:void 0,role:u.role,createdAt:new Date(u.created_at||""),expiresAt:new Date(u.expires_at||""),acceptedAt:u.accepted_at?new Date(u.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserPendingInvitations(n){try{const{data:r,error:i}=await K.from("pending_invitations").select(`
          id,
          email,
          campaign_id,
          invited_by,
          role,
          created_at,
          expires_at,
          accepted_at,
          campaigns(name)
        `).eq("email",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return i?{success:!1,error:"Failed to fetch pending invitations"}:{success:!0,data:(r||[]).map(u=>({id:u.id,email:u.email,campaignId:u.campaign_id,campaignName:u.campaigns?.name,invitedBy:u.invited_by,inviterName:void 0,role:u.role,createdAt:new Date(u.created_at||""),expiresAt:new Date(u.expires_at||""),acceptedAt:u.accepted_at?new Date(u.accepted_at):void 0}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptPendingInvitation(n,r){try{const{data:i,error:l}=await K.from("pending_invitations").select("*").eq("id",n).is("accepted_at",null).gte("expires_at",new Date().toISOString()).single();if(l||!i)return{success:!1,error:"Invitation not found or expired"};const{data:u}=await K.from("campaign_members").select("id").eq("campaign_id",i.campaign_id).eq("user_id",r).single();if(u)return await K.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",n),{success:!1,error:"You are already a member of this campaign"};const{error:f}=await K.from("campaign_members").insert({campaign_id:i.campaign_id,user_id:r,is_admin:i.role==="admin",is_gm:i.role==="gm",is_player:i.role==="player"});if(f)return{success:!1,error:"Failed to add you to the campaign"};const{error:m}=await K.from("pending_invitations").update({accepted_at:new Date().toISOString()}).eq("id",n);return{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declinePendingInvitation(n){try{const{error:r}=await K.from("pending_invitations").delete().eq("id",n);return r?{success:!1,error:"Failed to decline invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async cancelPendingInvitation(n){try{const{error:r}=await K.from("pending_invitations").delete().eq("id",n);return r?{success:!1,error:"Failed to cancel invitation"}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRole(n,r){try{const i=await this.getUserRoles(n,r);if(!i.success||!i.data)return{success:!1,error:i.error||"User is not a member of this campaign"};const l=i.data;let u;return l.isAdmin?u="admin":l.isGm?u="gm":u="player",{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserRoles(n,r){try{const{data:i,error:l}=await K.from("campaign_members").select("is_admin, is_gm, is_player").eq("campaign_id",n).eq("user_id",r).single();if(l||!i)return{success:!1,error:"User is not a member of this campaign"};const u=i;return{success:!0,data:{isAdmin:u.is_admin||!1,isGm:u.is_gm||!1,isPlayer:u.is_player||!1}}}catch{return{success:!1,error:"An unexpected error occurred"}}}async canUserAccessCampaign(n,r){try{const{data:i,error:l}=await K.from("campaign_members").select("id").eq("campaign_id",n).eq("user_id",r).single();return l?{success:!0,data:!1}:{success:!0,data:!!i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getCharactersByCampaign(n){try{const{data:r,error:i}=await K.from("characters").select("*").eq("campaign_id",n).order("created_at",{ascending:!0});return i?{success:!1,error:i.message}:{success:!0,data:r||[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCharacterForCampaign(n,r,i,l,u){try{const{data:f,error:m}=await K.from("characters").insert({campaign_id:n,name:i,player_name:l,character_name:u,owner_id:r}).select().single();return m?{success:!1,error:m.message}:{success:!0,data:f}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createStandaloneCharacter(n,r,i,l){try{const{data:u,error:f}=await K.rpc("create_standalone_character",{user_id:n,char_name:r,player_name:i||void 0,character_name:l||void 0});return f?{success:!1,error:f.message}:{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getStandaloneCharacters(n){try{const{data:r,error:i}=await K.from("characters").select("*").eq("owner_id",n).is("campaign_id",null).order("created_at",{ascending:!1});return i?{success:!1,error:i.message}:{success:!0,data:(r||[]).map(u=>({id:u.id,name:u.name,player_name:u.player_name||void 0,character_name:u.character_name||void 0,owner_id:u.owner_id||"",created_at:u.created_at||"",updated_at:u.updated_at||""}))}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteStandaloneCharacter(n,r){try{const{data:i,error:l}=await K.from("characters").select("owner_id, campaign_id").eq("id",n).single();if(l||!i)return{success:!1,error:"Character not found"};if(i.campaign_id!==null)return{success:!1,error:"This is not a standalone character"};if(i.owner_id!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:u}=await K.from("characters").delete().eq("id",n);return u?{success:!1,error:u.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async assignCharacterToCampaign(n,r,i){try{const{data:l,error:u}=await K.from("characters").select("owner_id, campaign_id").eq("id",n).single();if(u||!l)return{success:!1,error:"Character not found"};if(l.owner_id!==i)return{success:!1,error:"You don't have permission to move this character"};if(l.campaign_id!==null)return{success:!1,error:"Character is already assigned to a campaign"};const{data:f,error:m}=await K.from("campaign_members").select("id").eq("campaign_id",r).eq("user_id",i).single();if(m||!f)return{success:!1,error:"You are not a member of this campaign"};const{error:p}=await K.from("characters").update({campaign_id:r}).eq("id",n);return p?{success:!1,error:p.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}async createCampaignInvitation(n,r,i,l){try{const{data:u,error:f}=await K.rpc("create_campaign_invitation",{p_campaign_id:n,p_invited_email:r,p_invited_by:i,p_roles_offered:JSON.stringify(l)});return f?{success:!1,error:f.message}:{success:!0,data:u}}catch{return{success:!1,error:"An unexpected error occurred"}}}async getUserInvitations(n){try{const{data:r,error:i}=await K.rpc("get_user_invitations",{p_user_email:n});return i?{success:!1,error:i.message}:{success:!0,data:Array.isArray(r)?r.map(u=>({id:u.id,campaignId:u.campaign_id,campaignName:u.campaign_name,invitedEmail:u.invited_email,invitedBy:u.invited_by,invitedByName:u.inviter_name,rolesOffered:typeof u.roles_offered=="string"?JSON.parse(u.roles_offered):u.roles_offered,status:u.status,expiresAt:u.expires_at?new Date(u.expires_at):null,createdAt:new Date(u.created_at),acceptedAt:u.accepted_at?new Date(u.accepted_at):null})):[]}}catch{return{success:!1,error:"An unexpected error occurred"}}}async acceptCampaignInvitation(n,r){try{const{data:i,error:l}=await K.rpc("accept_campaign_invitation",{p_invitation_id:n,p_user_id:r});return l?{success:!1,error:l.message}:{success:!0,data:i}}catch{return{success:!1,error:"An unexpected error occurred"}}}async declineCampaignInvitation(n){try{const{data:r,error:i}=await K.rpc("decline_campaign_invitation",{p_invitation_id:n});return i?{success:!1,error:i.message}:{success:!0,data:r}}catch{return{success:!1,error:"An unexpected error occurred"}}}async deleteCharacter(n,r){try{const{data:i,error:l}=await K.from("characters").select("owner_id, campaign_id, campaigns!inner(created_by)").eq("id",n).single();if(l)return{success:!1,error:"Character not found"};if(i.owner_id!==r&&i.campaigns.created_by!==r)return{success:!1,error:"You don't have permission to delete this character"};const{error:u}=await K.from("characters").delete().eq("id",n);return u?{success:!1,error:u.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}}}class Ja{static instance;_authRepository;_campaignRepository;_authService;_campaignService;constructor(){this._authRepository=new Wb,this._campaignRepository=new Cg,this._authService=new Ay(this._authRepository),this._campaignService=new Ny(this._campaignRepository,this._authRepository)}static getInstance(){return Ja.instance||(Ja.instance=new Ja),Ja.instance}get authService(){return this._authService}get campaignService(){return this._campaignService}get authRepository(){return this._authRepository}get campaignRepository(){return this._campaignRepository}}function Fb(){return Ja.getInstance().authService}function Ag(){return Ja.getInstance().campaignService}function ou(){return Ja.getInstance().campaignRepository}const ya=()=>{const[o,n]=O.useState(null),[r,i]=O.useState(!0),l=Fb();return O.useEffect(()=>((async()=>{const j=await l.getCurrentUser();console.log("useAuth: getCurrentUser result:",j),n(j),i(!1)})(),l.onAuthStateChange(j=>{console.log("useAuth: onAuthStateChange triggered with user:",j),n(j),i(!1)})),[l]),{user:o,loading:r,signIn:async(_,w)=>{const j=await l.signIn(_,w);return j.success&&j.data?(n(j.data),{success:!0}):{success:!1,error:j.error}},signUp:async(_,w)=>{const j=await l.signUp(_,w);return j.success&&j.data?(n(j.data),{success:!0}):{success:!1,error:j.error}},signOut:async()=>{const _=await l.signOut();return _.success?(n(null),{success:!0}):{success:!1,error:_.error}},completeProfile:async _=>{const w=await l.completeProfile(_);return w.success&&w.data?(n(w.data),{success:!0,user:w.data}):{success:!1,error:w.error}},updateProfile:async _=>{const w=await l.updateProfile(_);return w.success&&w.data?(n(w.data),{success:!0,user:w.data}):{success:!1,error:w.error}},changePassword:async _=>{const w=await l.changePassword(_);return w.success?{success:!0}:{success:!1,error:w.error}},deleteAccount:async()=>{const _=await l.deleteAccount();return _.success?(n(null),{success:!0}):{success:!1,error:_.error}}}};function ne({variant:o="default",size:n="md",className:r="",children:i,...l}){const f={default:"",primary:"bg-blue-600 hover:bg-blue-700 hover:shadow-lg hover:-translate-y-0.5 text-white border-blue-600 transition-all duration-200",danger:"bg-red-600 hover:bg-red-700 hover:shadow-lg hover:-translate-y-0.5 text-white border-red-600 transition-all duration-200",ghost:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-sm transition-all duration-200"},m={sm:"px-2 py-1 text-sm",md:"",full:"w-full justify-center"},p=["btn",f[o],m[n],r].filter(Boolean).join(" ");return h.jsx("button",{className:p,...l,children:i})}function ex({icon:o,variant:n="default",className:r="",...i}){const l={default:"btn p-2 hover:scale-110 transition-all duration-200",danger:"btn p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:scale-110 transition-all duration-200"};return h.jsx("button",{className:`${l[n]} ${r}`,...i,children:o})}const Z=O.forwardRef(({label:o,type:n="text",className:r,required:i=!1,error:l,...u},f)=>{const m="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",p=`input w-full ${l?"border-red-500 focus:border-red-500":""}`,y=()=>{if(n==="textarea"){const x=u;return h.jsx("textarea",{ref:f,className:r||p,required:i,...x})}if(n==="select"){const{children:x,..._}=u;return h.jsx("select",{ref:f,className:r||"select",required:i,..._,children:x})}const v=u;return h.jsx("input",{ref:f,type:n,step:n==="number"?"1":void 0,className:r||p,required:i,...v})};return h.jsxs("div",{children:[o&&h.jsxs("label",{className:m,children:[o," ",i&&"*"]}),y(),l&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:l})]})});Z.displayName="FormField";function tx(){const[o,n]=O.useState("sign_in"),[r,i]=O.useState(""),[l,u]=O.useState(""),[f,m]=O.useState(!1),[p,y]=O.useState(""),{signIn:v,signUp:x}=ya(),_=async j=>{j.preventDefault(),m(!0),y("");try{let T;o==="sign_up"?(T=await x(r,l),T.success?y("Check your email for the confirmation link!"):y(T.error||"Sign up failed")):(T=await v(r,l),T.success||y(T.error||"Sign in failed"))}catch(T){y(T instanceof Error?T.message:"An error occurred")}finally{m(!1)}},w=()=>f?"Loading...":o==="sign_in"?"Sign In":"Sign Up";return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Campaign Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-user campaign management system"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:o==="sign_in"?"Welcome Back":"Create Account"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:o==="sign_in"?"Sign in to your account":"Create a new account"})]}),h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex rounded-xl overflow-hidden mb-6",children:[h.jsx("button",{type:"button",onClick:()=>n("sign_in"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_in"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign In"}),h.jsx("button",{type:"button",onClick:()=>n("sign_up"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${o==="sign_up"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-zinc-700"}`,children:"Sign Up"})]}),h.jsxs("form",{className:"space-y-4",onSubmit:_,children:[h.jsx(Z,{label:"Email address",type:"email",autoComplete:"email",required:!0,value:r,onChange:j=>i(j.target.value),placeholder:"Enter your email"}),h.jsx(Z,{label:"Password",type:"password",autoComplete:o==="sign_up"?"new-password":"current-password",required:!0,value:l,onChange:j=>u(j.target.value),placeholder:"Enter your password"}),p&&h.jsx("div",{className:`p-3 rounded-xl text-sm ${p.includes("error")||p.includes("Error")?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400"}`,children:p}),h.jsx(ne,{type:"submit",disabled:f,variant:"primary",className:"w-full justify-center py-3",children:w()})]})]})]})})]})}const ax=o=>{const n=[];let r="weak";o.length<8&&n.push("Password must be at least 8 characters long");const i=/[a-z]/.test(o),l=/[A-Z]/.test(o),u=/\d/.test(o),f=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(o);i||n.push("Password must contain at least one lowercase letter"),l||n.push("Password must contain at least one uppercase letter"),u||n.push("Password must contain at least one number"),f||n.push("Password must contain at least one special character");const m=[i,l,u,f].filter(Boolean).length;let p=0;o.length>=12?p=2:o.length>=8&&(p=1);const y=m+p;return y>=5?r="strong":y>=3&&(r="medium"),{isValid:n.length===0,errors:n,strength:r}},nx=o=>{switch(o){case"weak":return"text-red-600 dark:text-red-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"strong":return"text-green-600 dark:text-green-400"}},sx=o=>{switch(o){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong"}},rx=o=>o.length<3?{isValid:!1,error:"Username must be at least 3 characters long"}:o.length>30?{isValid:!1,error:"Username must be less than 30 characters long"}:/^[a-zA-Z0-9_-]+$/.test(o)?/^[_-]|[_-]$/.test(o)?{isValid:!1,error:"Username cannot start or end with hyphens or underscores"}:{isValid:!0}:{isValid:!1,error:"Username can only contain letters, numbers, hyphens, and underscores"};function ix({onComplete:o,loading:n=!1}){const[r,i]=O.useState(""),[l,u]=O.useState(""),[f,m]=O.useState({}),[p,y]=O.useState(!1),v=()=>{const w={};if(r.trim()?r.trim().length<2?w.displayName="Name must be at least 2 characters long":r.trim().length>50&&(w.displayName="Name must be less than 50 characters long"):w.displayName="Name is required",!l.trim())w.username="Username is required";else{const j=rx(l.trim());j.isValid||(w.username=j.error||"Invalid username")}return m(w),Object.keys(w).length===0},x=async w=>{if(w.preventDefault(),!!v()){y(!0);try{const j=await o({displayName:r.trim(),username:l.trim().toLowerCase()});!j.success&&j.error&&(j.error.toLowerCase().includes("username")?m({username:j.error}):m({general:j.error}))}catch{m({general:"An unexpected error occurred. Please try again."})}finally{y(!1)}}},_=r.trim()&&l.trim()&&Object.keys(f).length===0;return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Complete Your Profile"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up your profile to start using Traveller Dashboard"})]})}),h.jsx("div",{className:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:h.jsx(jn,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-zinc-50",children:"Welcome to Traveller Dashboard"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Let's set up your profile to get started"})]}),h.jsx("div",{className:"card",children:h.jsxs("form",{className:"space-y-4",onSubmit:x,children:[h.jsxs("div",{children:[h.jsx(Z,{label:"Your Name",type:"text",required:!0,value:r,onChange:w=>{i(w.target.value),f.displayName&&m(j=>({...j,displayName:""}))},placeholder:"Enter your first name or full name",error:f.displayName}),h.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This is how other players will see you in campaigns"})]}),h.jsxs("div",{children:[h.jsx(Z,{label:"Username",type:"text",required:!0,value:l,onChange:w=>{u(w.target.value),f.username&&m(j=>({...j,username:""}))},placeholder:"Choose a unique username",error:f.username}),h.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"3-30 characters, letters, numbers, hyphens and underscores only"})]}),f.general&&h.jsx("div",{className:"p-3 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",children:f.general}),h.jsx(ne,{type:"submit",disabled:!_||p||n,variant:"primary",className:"w-full justify-center py-3",children:p||n?"Setting up...":"Complete Profile"})]})}),h.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:h.jsx("p",{children:"You can always change these settings later in your profile"})})]})})]})}const lx=()=>{const[o,n]=O.useState([]),[r,i]=O.useState(!0),[l,u]=O.useState(null),f=Ag(),m=O.useCallback(async()=>{try{i(!0),u(null);const x=await f.getCampaigns();x.success&&x.data?n(x.data):u(x.error||"Failed to fetch campaigns")}catch{u("An unexpected error occurred")}finally{i(!1)}},[f]),p=async x=>{try{u(null);const _=await f.createCampaign(x);return _.success?(await m(),{success:!0}):(u(_.error||"Failed to create campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return u(_),{success:!1,error:_}}},y=async(x,_)=>{try{u(null);const w=await f.updateCampaign(x,_);return w.success?(await m(),{success:!0}):(u(w.error||"Failed to update campaign"),{success:!1,error:w.error})}catch{const w="An unexpected error occurred";return u(w),{success:!1,error:w}}},v=async x=>{try{u(null);const _=await f.deleteCampaign(x);return _.success?(await m(),{success:!0}):(u(_.error||"Failed to delete campaign"),{success:!1,error:_.error})}catch{const _="An unexpected error occurred";return u(_),{success:!1,error:_}}};return O.useEffect(()=>{m()},[m]),{campaigns:o,loading:r,error:l,fetchCampaigns:m,createCampaign:p,updateCampaign:y,deleteCampaign:v}};function ml(){const[o,n]=O.useState([]),[r,i]=O.useState(!1),[l,u]=O.useState(null),f=O.useCallback(async(_,...w)=>{i(!0),u(null);try{const j=await _(...w);if(j.success&&j.data!==void 0)return n(j.data),{success:!0,data:j.data};const T=j.error||"Operation failed";return u(T),{success:!1,error:T}}catch(j){const T=j instanceof Error?j.message:"An unexpected error occurred";return u(T),{success:!1,error:T}}finally{i(!1)}},[]),m=O.useCallback(_=>{n(w=>[...w,_])},[]),p=O.useCallback((_,w)=>{n(j=>j.map((T,U)=>U===_?w:T))},[]),y=O.useCallback(_=>{n(w=>w.filter((j,T)=>T!==_))},[]),v=O.useCallback(()=>{n([]),u(null),i(!1)},[]),x=O.useCallback(()=>{u(null)},[]);return{items:o,loading:r,error:l,execute:f,addItem:m,updateItem:p,removeItem:y,reset:v,clearError:x,setItems:n}}const cx=()=>{const{items:o,loading:n,error:r,execute:i}=ml(),l=O.useMemo(()=>Ag(),[]),u=O.useCallback(async y=>await i(async x=>{const _=await l.getCampaignMembers(x);return _.success&&_.data?{success:!0,data:_.data}:{success:!1,error:_.error||"Failed to fetch members"}},y),[l,i]),f=O.useCallback(async(y,v,x)=>{try{const _=await l.addMemberByEmail(y,v,x);return _.success?(await u(y),{success:!0}):{success:!1,error:_.error||"Failed to add member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[l,u]),m=O.useCallback(async(y,v,x)=>{try{const _=await l.updateMemberRole(y,v,x);return _.success?(await u(y),{success:!0}):{success:!1,error:_.error||"Failed to update member role"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[l,u]),p=O.useCallback(async(y,v)=>{try{const x=await l.removeMember(y,v);return x.success?(await u(y),{success:!0}):{success:!1,error:x.error||"Failed to remove member"}}catch{return{success:!1,error:"An unexpected error occurred"}}},[l,u]);return{members:o,loading:n,error:r,fetchMembers:u,addMemberByEmail:f,updateMemberRole:m,removeMember:p}};function ox({size:o="md",className:n=""}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return h.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[o]} ${n}`,role:"status","aria-label":"Loading"})}function ux({message:o="Loading..."}){return h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[h.jsx(ox,{size:"lg",className:"mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:o})]})}function $e({isOpen:o,onClose:n,title:r,children:i,maxWidth:l="md"}){if(O.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),O.useEffect(()=>{const f=m=>{m.key==="Escape"&&n()};if(o)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[o,n]),!o)return null;const u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f=>{f.target===f.currentTarget&&n()},children:h.jsxs("div",{className:`card w-full ${u[l]}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:r}),h.jsx(ex,{icon:h.jsx(Wm,{size:20}),onClick:n,"aria-label":"Close modal"})]}),i]})})}function Pa({onCancel:o,onConfirm:n,confirmText:r="Confirm",cancelText:i="Cancel",confirmVariant:l="primary",confirmDisabled:u=!1,confirmType:f="button",isLoading:m=!1,children:p}){return p?h.jsx("div",{className:"flex gap-2 mt-6",children:p}):h.jsxs("div",{className:"flex gap-2 mt-6",children:[o&&h.jsx(ne,{onClick:o,variant:"ghost",className:"flex-1 justify-center",disabled:m,children:i}),(n||f==="submit")&&h.jsx(ne,{onClick:f==="submit"?void 0:n,variant:l,className:"flex-1 justify-center",disabled:m||u,type:f,children:r})]})}function Zm({roles:o,onChange:n,disabled:r=!1,showError:i=!0}){const l=(m,p)=>{const y={...o,[m]:p};n(y)},u=sg(o),f=o.isGm&&o.isPlayer&&!o.isAdmin;return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:o.isAdmin,onChange:m=>l("isAdmin",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Administrator"}),h.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can manage campaign settings and members)"})]}),h.jsxs("label",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:o.isGm,onChange:m=>l("isGm",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Game Master (GM)"}),h.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can run game sessions)"})]}),h.jsxs("label",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:o.isPlayer,onChange:m=>l("isPlayer",m.target.checked),disabled:r,className:"rounded border-gray-300 dark:border-zinc-600 text-blue-600 focus:ring-blue-500"}),h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Player"}),h.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Can create and play characters)"})]})]}),h.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current roles:"," ",h.jsx("span",{className:"font-medium text-gray-900 dark:text-zinc-50",children:hl(o)})]})}),i&&!u&&h.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[!o.isAdmin&&!o.isGm&&!o.isPlayer&&"Must select at least one role.",f&&"Cannot be both GM and Player without Administrator privileges. This prevents conflicts of interest."]})})]})}function dx({campaign:o,onUpdateCampaign:n,onDeleteCampaign:r,onGetMembers:i,onAddMember:l,onUpdateMemberRole:u,onRemoveMember:f,onClose:m}){const[p,y]=O.useState(!1),[v,x]=O.useState(!1),[_,w]=O.useState(!1),[j,T]=O.useState(!1),[U,q]=O.useState([]),[L,H]=O.useState(!1),[V,Y]=O.useState(!1),[$,ee]=O.useState(null),[ce,J]=O.useState(o.name),[Te,Ze]=O.useState(o.description||""),[_e,te]=O.useState(!1),[Oe,Ie]=O.useState(!1),[D,G]=O.useState(""),[X,ge]=O.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),[ve,ze]=O.useState(null),Ne=async le=>{if(le.preventDefault(),!!ce.trim())try{te(!0),await n(o.id,{name:ce,description:Te||null}),y(!1)}finally{te(!1)}},me=async()=>{try{Ie(!0),await r(o.id),x(!1),m?.()}finally{Ie(!1)}},qe=async()=>{try{const le=await i(o.id);le&&q(le)}catch{}},ot=async()=>{if(U.length>0&&!_){w(!0);return}try{H(!0);const le=await i(o.id);le&&q(le),w(!0)}finally{H(!1)}},Tt=async le=>{if(le.preventDefault(),!!D.trim()){Y(!0),ze(null);try{const Me=await l(o.id,D,X);Me.success?(G(""),ge({isAdmin:!1,isGm:!1,isPlayer:!0}),T(!1),qe()):ze(Me.error||"Failed to add member")}catch(Me){ze(Me instanceof Error?Me.message:"Failed to add member")}finally{Y(!1)}}},[Ve,Ht]=O.useState(null),[Gt,va]=O.useState({isAdmin:!1,isGm:!1,isPlayer:!0}),ae=async le=>{if(!Ve)return;const Me=Ve.user_id||Ve.userId;if(Me){ee(Me);try{if((await u(o.id,Me,le)).success){const Nn=await i(o.id);Nn&&q(Nn),Ht(null)}}finally{ee(null)}}},xe=le=>{Ht(le),va(le.roles)};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Information"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-900 dark:text-zinc-50",children:o.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o.description||"No description provided"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Members"}),h.jsxs("p",{className:"text-gray-900 dark:text-zinc-50",children:[o.member_count||0," member(s)"]})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(ne,{onClick:()=>y(!0),className:"flex items-center gap-2 justify-center",children:[h.jsx(rl,{className:"w-4 h-4"}),"Edit Campaign"]}),h.jsxs(ne,{onClick:ot,disabled:L,className:"flex items-center gap-2 justify-center",children:[h.jsx(Za,{className:"w-4 h-4"}),L?"Loading...":"Manage Members"]})]})]}),h.jsxs("div",{className:"card border-red-200 dark:border-red-800",children:[h.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete this campaign and all its data. This action cannot be undone."}),h.jsxs(ne,{onClick:()=>x(!0),variant:"danger",className:"flex items-center gap-2",children:[h.jsx(Rr,{className:"w-4 h-4"}),"Delete Campaign"]})]}),h.jsx($e,{isOpen:p,onClose:()=>y(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign Name"}),h.jsx("input",{type:"text",value:ce,onChange:le=>J(le.target.value),className:"input w-full",placeholder:"Enter campaign name",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:Te,onChange:le=>Ze(le.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(Pa,{onCancel:()=>y(!1),cancelText:"Cancel",confirmText:_e?"Updating...":"Update",confirmDisabled:_e||!ce.trim(),confirmType:"submit",isLoading:_e})]})}),h.jsxs($e,{isOpen:v,onClose:()=>x(!1),title:"Delete Campaign",children:[h.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete "',o.name,'"? This action cannot be undone and will remove all campaign data and members.']}),h.jsx(Pa,{onCancel:()=>x(!1),onConfirm:me,cancelText:"Cancel",confirmText:Oe?"Deleting...":"Delete",confirmVariant:"danger",isLoading:Oe})]}),h.jsx($e,{isOpen:_,onClose:()=>w(!1),title:"Campaign Members",maxWidth:"lg",children:h.jsxs("div",{className:"space-y-4",children:[U.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No members found or unable to load members."}):h.jsx("div",{className:"space-y-3",children:U.map(le=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900 dark:text-zinc-50",children:le.user_profiles?.display_name||le.displayName||"No Name"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:le.user_profiles?.email||le.email})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"flex flex-wrap gap-1",children:h.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:hl(le.roles)})}),h.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>xe(le),disabled:$===le.user_id,children:h.jsx(rl,{className:"w-3 h-3"})}),$===le.user_id&&h.jsx("span",{className:"text-xs text-gray-500",children:"Updating..."}),!le.roles.isAdmin&&h.jsx(ne,{size:"sm",variant:"danger",onClick:()=>{const Me=le.user_id||le.userId;Me&&f(o.id,Me)},children:h.jsx(Rr,{className:"w-3 h-3"})})]})]},le.id))}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-zinc-700",children:h.jsxs(ne,{variant:"primary",className:"w-full justify-center",onClick:()=>T(!0),children:[h.jsx(jn,{className:"w-4 h-4"}),"Add Member"]})})]})}),h.jsx($e,{isOpen:j,onClose:()=>{T(!1),G(""),ge({isAdmin:!1,isGm:!1,isPlayer:!0}),ze(null)},title:"Add Campaign Member",children:h.jsxs("form",{onSubmit:Tt,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),h.jsx("input",{type:"email",value:D,onChange:le=>G(le.target.value),className:"input w-full",placeholder:"Enter member's email",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles"}),h.jsx(Zm,{roles:X,onChange:ge})]}),ve&&h.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:ve})}),h.jsx(Pa,{onCancel:()=>{T(!1),G(""),ge({isAdmin:!1,isGm:!1,isPlayer:!0}),ze(null)},cancelText:"Cancel",confirmText:V?"Adding...":"Add Member",confirmDisabled:V||!D.trim(),confirmType:"submit",isLoading:V})]})}),Ve&&h.jsx($e,{isOpen:!!Ve,onClose:()=>Ht(null),title:`Edit Roles - ${Ve.user_profiles?.display_name||Ve.displayName||Ve.user_profiles?.email||Ve.email}`,children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Roles"}),h.jsx(Zm,{roles:Gt,onChange:va,disabled:$===Ve.user_id})]}),h.jsx(Pa,{onCancel:()=>Ht(null),cancelText:"Cancel",confirmText:$===Ve.user_id?"Updating...":"Update Roles",confirmDisabled:$===Ve.user_id,onConfirm:()=>ae(Gt),isLoading:$===Ve.user_id})]})})]})}function Es(o){const{items:n,loading:r,error:i,execute:l,setItems:u}=ml(),f=O.useMemo(()=>new Cg,[]),m=O.useCallback(async v=>{if(!v)return;await l(async _=>{const w=await f.getCharactersByCampaign(_);return w.success&&w.data&&w.data.length>0?{success:!0,data:w.data.map(T=>({id:T.id,campaignId:T.campaign_id||"",displayName:T.name,playerName:T.player_name||"",characterName:T.character_name||"",ownerId:T.owner_id||void 0}))}:{success:!0,data:[]}},v)},[f,l]),p=O.useCallback(async(v,x,_)=>{if(!o)return{success:!1,error:"No campaign selected"};try{const w=`${v}  ${x}`,j=await f.createCharacterForCampaign(o,_,w,v,x);if(j.success&&j.data){const T={id:j.data.id,campaignId:j.data.campaign_id||"",displayName:j.data.name,playerName:v,characterName:x,ownerId:j.data.owner_id||void 0};return u(U=>[...U,T]),{success:!0,data:T}}return{success:!1,error:j.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[o,f,u]),y=O.useCallback(async(v,x)=>{try{const _=await f.deleteCharacter(v,x);return _.success?(u(w=>w.filter(j=>j.id!==v)),{success:!0}):{success:!1,error:_.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[f,u]);return O.useEffect(()=>{o?m(o):u([])},[o,m,u]),{characters:n,loading:r,error:i,createCharacter:p,deleteCharacter:y,refreshCharacters:()=>o&&m(o)}}function uu(o){const{items:n,loading:r,error:i,execute:l,setItems:u}=ml(),f=O.useMemo(()=>ou(),[]),m=O.useCallback(async v=>{if(!v)return;await l(async _=>{const w=await f.getStandaloneCharacters(_);return w.success&&w.data?{success:!0,data:w.data.map(T=>({id:T.id,campaignId:null,displayName:T.name,playerName:T.player_name||"",characterName:T.character_name||"",ownerId:T.owner_id}))}:{success:!1,error:w.error||"Failed to load characters"}},v)},[f,l]),p=O.useCallback(async(v,x,_)=>{try{const w=`${v}  ${x}`,j=await f.createStandaloneCharacter(_,w,v,x);if(j.success&&j.data){const T={id:j.data.id,campaignId:null,displayName:j.data.name,playerName:j.data.player_name||v,characterName:j.data.character_name||x,ownerId:j.data.owner_id};return u(U=>[T,...U]),{success:!0,data:T}}return{success:!1,error:j.error||"Failed to create character"}}catch{return{success:!1,error:"An error occurred while creating the character"}}},[f,u]),y=O.useCallback(async(v,x)=>{try{const _=await f.deleteStandaloneCharacter(v,x);return _.success?(u(w=>w.filter(j=>j.id!==v)),{success:!0}):{success:!1,error:_.error||"Failed to delete character"}}catch{return{success:!1,error:"An error occurred while deleting the character"}}},[f,u]);return O.useEffect(()=>{o?m(o):u([])},[o,m,u]),{characters:n,loading:r,error:i,createCharacter:p,deleteCharacter:y,refreshCharacters:()=>o&&m(o)}}function Ng({isOpen:o,onClose:n,campaigns:r,onAssignmentComplete:i}){const{user:l}=ya(),{characters:u,loading:f,error:m,refreshCharacters:p}=uu(l?.id),[y,v]=O.useState([]),[x,_]=O.useState(null),w=O.useMemo(()=>r.filter(q=>q.userRoles.isAdmin||q.userRoles.isPlayer),[r]),j=async(q,L)=>{if(l){_(null),v(H=>[...H.filter(V=>V.characterId!==q),{characterId:q,campaignId:L,loading:!0}]);try{const V=await ou().assignCharacterToCampaign(q,L,l.id);V.success?(await p(),v(Y=>Y.filter($=>$.characterId!==q)),i?.()):(_(V.error||"Failed to assign character to campaign"),v(Y=>Y.filter($=>$.characterId!==q)))}catch{_("An unexpected error occurred while assigning character"),v(H=>H.filter(V=>V.characterId!==q))}}},T=q=>y.some(L=>L.characterId===q&&L.loading),U=q=>y.find(L=>L.characterId===q)?.campaignId;return f?h.jsx($e,{isOpen:o,onClose:n,title:"Assign Characters to Campaigns",children:h.jsxs("div",{className:"animate-pulse space-y-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"}),h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-2/3"})]})}):m?h.jsx($e,{isOpen:o,onClose:n,title:"Assign Characters to Campaigns",children:h.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-8",children:[h.jsxs("p",{children:["Error loading characters: ",m]}),h.jsx(ne,{onClick:p,variant:"primary",className:"mt-4",children:"Retry"})]})}):u.length===0?h.jsx($e,{isOpen:o,onClose:n,title:"Assign Characters to Campaigns",children:h.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[h.jsx(Za,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),h.jsx("p",{className:"text-lg font-medium mb-2",children:"No Standalone Characters"}),h.jsx("p",{className:"text-sm",children:"You don't have any standalone characters to assign to campaigns."}),h.jsx("p",{className:"text-sm mt-1",children:"Create some characters first, then come back to assign them!"})]})}):w.length===0?h.jsx($e,{isOpen:o,onClose:n,title:"Assign Characters to Campaigns",children:h.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[h.jsx(jn,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),h.jsx("p",{className:"text-lg font-medium mb-2",children:"No Available Campaigns"}),h.jsx("p",{className:"text-sm",children:"You're not a member of any campaigns where you can add characters."}),h.jsx("p",{className:"text-sm mt-1",children:"Join a campaign as a player or create your own to assign characters!"})]})}):h.jsx($e,{isOpen:o,onClose:n,title:"Assign Characters to Campaigns",maxWidth:"lg",children:h.jsxs("div",{className:"space-y-6",children:[h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Assign your standalone characters to campaigns where you're a member. Once assigned, characters will appear in the campaign's character list."}),x&&h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:h.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:x})}),h.jsx("div",{className:"space-y-4",children:u.map(q=>h.jsx("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 mb-1",children:q.displayName}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:q.playerName&&q.characterName&&h.jsxs(h.Fragment,{children:["Player: ",q.playerName,"  Character:"," ",q.characterName]})})]}),h.jsx("div",{className:"flex-shrink-0 ml-4",children:T(q.id)?h.jsxs("div",{className:"flex items-center text-sm text-blue-600 dark:text-blue-400",children:[h.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"}),"Assigning..."]}):h.jsxs("select",{className:"text-sm border rounded px-3 py-2 bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-zinc-50",value:U(q.id)||"",onChange:L=>{L.target.value&&j(q.id,L.target.value)},children:[h.jsx("option",{value:"",children:"Select Campaign..."}),w.map(L=>h.jsxs("option",{value:L.id,children:[L.name," (",L.userRoles.isAdmin?"Admin":"Player",")"]},L.id))]})})]})},q.id))}),h.jsx("div",{className:"border-t pt-4",children:h.jsx(ne,{onClick:n,className:"w-full",children:"Done"})})]})})}function hx(o){return o.isAdmin?"admin":o.isGm?"gm":o.isPlayer?"player":"unknown"}function fx(o){const n=[];return o.isAdmin&&n.push("ADMIN"),o.isGm&&n.push("GM"),o.isPlayer&&n.push("PLAYER"),n.join(" + ")}function mx(o){const n=hx(o);return n==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":n==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function gx({campaign:o,onViewCampaign:n,onDeleteCharacter:r}){const{characters:i,loading:l,error:u}=Es(o.id);return l?h.jsxs("div",{className:"animate-pulse p-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]}):u?h.jsxs("div",{className:"p-4 text-sm text-red-600 dark:text-red-400",children:["Error loading characters: ",u]}):h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:o.name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," character(s)"]})]}),o.userRoles&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${mx(o.userRoles)}`,children:fx(o.userRoles)})]}),i.length===0?h.jsxs("div",{className:"text-center py-6",children:[h.jsx(Za,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No characters in this campaign yet."})]}):h.jsx("div",{className:"space-y-3 mb-4",children:i.map(f=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-zinc-700 rounded-lg hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:f.displayName}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Player: ",f.playerName]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ne,{size:"sm",onClick:()=>n(o.id),title:"View character details in campaign",children:h.jsx(rl,{className:"w-4 h-4"})}),h.jsx(ne,{size:"sm",variant:"danger",title:"Delete character",onClick:()=>r(f.id,f.displayName,o.id),children:h.jsx(Rr,{className:"w-4 h-4"})})]})]},f.id))}),h.jsx("div",{className:"flex gap-2",children:h.jsxs(ne,{onClick:()=>n(o.id),className:"flex items-center gap-2 flex-1",children:[h.jsx(Za,{className:"w-4 h-4"}),"Manage in Campaign"]})})]})}function px({campaigns:o,onShowAssignment:n}){const{user:r}=ya(),{characters:i,loading:l,error:u,refreshCharacters:f}=uu(r?.id),m=o.filter(p=>p.userRoles.isAdmin||p.userRoles.isPlayer);return l?h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Your Standalone Characters"}),h.jsxs("div",{className:"animate-pulse space-y-3",children:[h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-3/4"}),h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/2"})]})]}):u?h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Your Standalone Characters"}),h.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm",children:["Error loading characters: ",u,h.jsx(ne,{onClick:f,variant:"ghost",size:"sm",className:"ml-2",children:"Retry"})]})]}):h.jsxs("div",{className:"card",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Your Standalone Characters"}),i.length>0&&m.length>0&&h.jsxs(ne,{onClick:n,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[h.jsx(Fm,{className:"w-4 h-4"}),"Assign to Campaigns"]})]}),i.length===0?h.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[h.jsx(Za,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),h.jsx("p",{className:"text-sm",children:"No standalone characters yet."}),h.jsx("p",{className:"text-xs mt-1",children:"Characters created outside of campaigns will appear here."})]}):h.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:i.map(p=>h.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50 dark:bg-zinc-800 dark:border-zinc-700",children:[h.jsx("div",{className:"font-medium text-gray-900 dark:text-zinc-50 text-sm mb-1",children:p.displayName}),h.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Player: ",p.playerName]}),h.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Character: ",p.characterName]}),h.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Available for assignment"})]},p.id))}),i.length>0&&m.length===0&&h.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mt-3",children:h.jsxs("p",{className:"text-amber-600 dark:text-amber-400 text-sm",children:["You have ",i.length," standalone character(s), but you're not a member of any campaigns where you can assign them."]})})]})}function yx({campaigns:o,onViewCampaign:n}){const{user:r}=ya(),[i,l]=O.useState(!1),[u,f]=O.useState(""),[m,p]=O.useState(""),[y,v]=O.useState(""),[x,_]=O.useState(!1),[w,j]=O.useState(null),[T,U]=O.useState(!1),[q,L]=O.useState(null),[H,V]=O.useState(!1),[Y,$]=O.useState(!1),{createCharacter:ee}=Es(u||""),{deleteCharacter:ce}=Es(q?.campaignId||""),J=o.filter(te=>te.memberCount&&te.memberCount>0),Te=async te=>{if(te.preventDefault(),!(!m.trim()||!y.trim()||!u))try{_(!0),j(null);const Oe=await ee(m.trim(),y.trim(),"");Oe.success?(p(""),v(""),f(""),l(!1)):j(Oe.error||"Failed to create character")}finally{_(!1)}},Ze=(te,Oe,Ie)=>{L({id:te,name:Oe,campaignId:Ie}),U(!0)},_e=async()=>{if(!(!q||!r))try{V(!0);const te=await ce(q.id,r.id);te.success?(U(!1),L(null)):j(te.error||"Failed to delete character")}finally{V(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Campaigns"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:J.length}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Campaigns with Characters"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:J.reduce((te,Oe)=>te+(Oe.memberCount||0),0)}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Characters"})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[h.jsxs(ne,{onClick:()=>l(!0),disabled:o.length===0,className:"flex items-center gap-2 justify-center",children:[h.jsx(jn,{className:"w-4 h-4"}),"Create New Character"]}),h.jsxs(ne,{disabled:!0,title:"Coming soon",className:"flex items-center gap-2 justify-center",children:[h.jsx(rl,{className:"w-4 h-4"}),"Bulk Character Actions"]})]}),o.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Create a campaign first before adding characters."})]}),h.jsx(px,{campaigns:o,onShowAssignment:()=>$(!0)}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Characters by Campaign"}),J.length===0?h.jsxs("div",{className:"card text-center py-8",children:[h.jsx(Za,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),h.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:"No Characters Yet"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first character to get started with your campaigns."}),h.jsxs(ne,{onClick:()=>l(!0),disabled:o.length===0,className:"flex items-center gap-2",children:[h.jsx(jn,{className:"w-4 h-4"}),"Create Character"]})]}):h.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:J.map(te=>h.jsx(gx,{campaign:te,onViewCampaign:n,onDeleteCharacter:Ze},te.id))})]}),h.jsx($e,{isOpen:i,onClose:()=>l(!1),title:"Create New Character",children:h.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[w&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md",children:w}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Campaign"}),h.jsxs("select",{value:u,onChange:te=>f(te.target.value),className:"input w-full",required:!0,children:[h.jsx("option",{value:"",children:"Select a campaign"}),o.map(te=>h.jsx("option",{value:te.id,children:te.name},te.id))]})]}),h.jsx(Z,{label:"Player Name",value:m,onChange:te=>p(te.target.value),placeholder:"e.g., John Smith",required:!0}),h.jsx(Z,{label:"Character Name",value:y,onChange:te=>v(te.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),h.jsx(Pa,{onCancel:()=>l(!1),cancelText:"Cancel",confirmText:x?"Creating...":"Create",confirmDisabled:x||!m.trim()||!y.trim()||!u,confirmType:"submit",isLoading:x})]})}),h.jsx($e,{isOpen:T,onClose:()=>U(!1),title:"Delete Character",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:h.jsx(Rr,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),h.jsxs("div",{className:"flex-grow",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50 mb-2",children:['Delete "',q?.name,'"?']}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. The character and all associated data will be permanently deleted."})]})]}),h.jsx(Pa,{onCancel:()=>U(!1),cancelText:"Cancel",confirmText:H?"Deleting...":"Delete",confirmDisabled:H,onConfirm:_e,confirmVariant:"danger",isLoading:H})]})}),h.jsx(Ng,{isOpen:Y,onClose:()=>$(!1),campaigns:o,onAssignmentComplete:()=>{window.location.reload()}})]})}function vx({characters:o,currentUserId:n,onDeleteCharacter:r}){return o.length===0?h.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[h.jsx(Za,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),h.jsx("p",{children:"No standalone characters yet."}),h.jsx("p",{className:"text-sm mt-1",children:"Create your first character to get started!"})]}):h.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:o.map(i=>h.jsxs("div",{className:"border rounded-lg p-4 bg-white dark:bg-zinc-800 dark:border-zinc-700",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50 truncate",children:i.displayName}),i.ownerId===n&&h.jsx(ne,{onClick:()=>r(i.id,i.displayName),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 p-1 h-auto",title:"Delete character",children:h.jsx(Rr,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Player:"})," ",i.playerName]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Character:"})," ",i.characterName]}),h.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Available for campaign invitations"})]})]},i.id))})}function bx({campaigns:o=[]}){const[n,r]=O.useState(!1),[i,l]=O.useState(""),[u,f]=O.useState(""),[m,p]=O.useState(!1),[y,v]=O.useState(null),[x,_]=O.useState(!1),[w,j]=O.useState(null),[T,U]=O.useState(!1),{user:q}=ya(),{characters:L,loading:H,error:V,createCharacter:Y,deleteCharacter:$,refreshCharacters:ee}=uu(q?.id),ce=async te=>{if(te.preventDefault(),v(null),!q){v("You must be logged in to create a character");return}if(!i.trim()){v("Player name is required");return}if(!u.trim()){v("Character name is required");return}p(!0);try{const Oe=await Y(i.trim(),u.trim(),q.id);Oe.success?(r(!1),l(""),f(""),v(null)):v(Oe.error||"Failed to create character")}catch{v("An unexpected error occurred")}finally{p(!1)}},J=(te,Oe)=>{j({id:te,name:Oe}),_(!0)},Te=async()=>{if(w&&q)try{const te=await $(w.id,q.id);te.success?(_(!1),j(null)):v(te.error||"Failed to delete character")}catch{v("An unexpected error occurred while deleting character")}},Ze=()=>{r(!1),l(""),f(""),v(null)},_e=()=>{r(!0),l(""),f(""),v(null)};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50",children:"Your Characters"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Create characters that can be used in any campaign when invited."})]}),h.jsxs("div",{className:"flex gap-3",children:[o.length>0&&h.jsxs(ne,{onClick:()=>U(!0),variant:"ghost",className:"flex items-center gap-2",children:[h.jsx(Fm,{className:"w-4 h-4"}),"Assign to Campaigns"]}),h.jsxs(ne,{onClick:_e,className:"flex items-center gap-2",children:[h.jsx(jn,{className:"w-4 h-4"}),"Create Character"]})]})]}),h.jsxs("div",{className:"card",children:[H&&h.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:h.jsx("p",{children:"Loading characters..."})}),!H&&V&&h.jsxs("div",{className:"text-center py-6 text-red-600 dark:text-red-400",children:[h.jsxs("p",{children:["Error: ",V]}),h.jsx(ne,{onClick:ee,variant:"ghost",size:"sm",className:"mt-2",children:"Try Again"})]}),!H&&!V&&h.jsx(vx,{characters:L,currentUserId:q?.id,onDeleteCharacter:J})]}),h.jsx($e,{isOpen:n,onClose:Ze,title:"Create New Character",children:h.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[h.jsx(Z,{label:"Player Name",value:i,onChange:te=>l(te.target.value),placeholder:"e.g., John Smith",required:!0}),h.jsx(Z,{label:"Character Name",value:u,onChange:te=>f(te.target.value),placeholder:"e.g., Lt. Sally Riddle",required:!0}),y&&h.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm",children:y}),h.jsxs("div",{className:"flex gap-3 pt-4",children:[h.jsx(ne,{type:"button",variant:"ghost",onClick:Ze,disabled:m,children:"Cancel"}),h.jsx(ne,{type:"submit",disabled:m||!i.trim()||!u.trim(),children:m?"Creating...":"Create Character"})]})]})}),h.jsx($e,{isOpen:x,onClose:()=>_(!1),title:"Delete Character",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',w?.name,'"? This action cannot be undone.']}),h.jsxs("div",{className:"flex gap-3 pt-4",children:[h.jsx(ne,{variant:"ghost",onClick:()=>_(!1),children:"Cancel"}),h.jsx(ne,{variant:"danger",onClick:Te,children:"Delete Character"})]})]})}),h.jsx(Ng,{isOpen:T,onClose:()=>U(!1),campaigns:o,onAssignmentComplete:()=>{ee()}})]})}function xx({user:o,onSettings:n,onSignOut:r}){const[i,l]=O.useState(!1),u=O.useRef(null);O.useEffect(()=>{const m=p=>{u.current&&!u.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),O.useEffect(()=>{const m=p=>{p.key==="Escape"&&l(!1)};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[]);const f=o.displayName||o.username||o.email.split("@")[0];return h.jsxs("div",{className:"relative",ref:u,children:[h.jsxs("button",{onClick:()=>l(!i),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 hover:shadow-sm rounded-lg transition-all duration-200","aria-expanded":i,"aria-haspopup":"true",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:h.jsx(il,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),h.jsx("span",{className:"hidden sm:block max-w-24 truncate",children:f}),h.jsx(ny,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&h.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-gray-200 dark:border-zinc-700 py-1 z-50",children:[h.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:h.jsx(il,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:f}),o.username&&h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",o.username]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o.email})]})]})}),h.jsxs("div",{className:"py-1",children:[h.jsxs("button",{onClick:()=>{l(!1),n()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-300 transition-all duration-200",children:[h.jsx(eg,{className:"w-4 h-4 mr-3 transition-transform duration-200 hover:rotate-45"}),"Account Settings"]}),h.jsxs("button",{onClick:()=>{l(!1),r()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-200",children:[h.jsx(sy,{className:"w-4 h-4 mr-3 transition-transform duration-200 hover:translate-x-1"}),"Sign Out"]})]})]})]})}function _x({isOpen:o,onClose:n,user:r,onUpdateProfile:i,onChangePassword:l,onDeleteAccount:u}){const[f,m]=O.useState("profile"),[p,y]=O.useState(!1),[v,x]=O.useState(null),[_,w]=O.useState(r.displayName||""),[j,T]=O.useState(r.username||""),[U,q]=O.useState(""),[L,H]=O.useState(""),[V,Y]=O.useState(""),[$,ee]=O.useState(!1),[ce,J]=O.useState(!1),[Te,Ze]=O.useState(!1),_e=ax(L),te=async G=>{G.preventDefault(),y(!0),x(null);try{await i({displayName:_.trim()||void 0,username:j.trim()||void 0}),x({type:"success",text:"Profile updated successfully!"})}catch(X){x({type:"error",text:X instanceof Error?X.message:"Failed to update profile"})}finally{y(!1)}},Oe=async G=>{if(G.preventDefault(),y(!0),x(null),!_e.isValid){x({type:"error",text:"Please fix the password requirements"}),y(!1);return}if(L!==V){x({type:"error",text:"New passwords do not match"}),y(!1);return}try{await l({currentPassword:U,newPassword:L}),x({type:"success",text:"Password changed successfully!"}),q(""),H(""),Y("")}catch(X){x({type:"error",text:X instanceof Error?X.message:"Failed to change password"})}finally{y(!1)}},Ie=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&u()},D=[{id:"profile",label:"Profile",icon:il},{id:"password",label:"Password",icon:ry},{id:"danger",label:"Danger Zone",icon:fm}];return h.jsx($e,{isOpen:o,onClose:n,title:"Account Settings",maxWidth:"xl",children:h.jsxs("div",{className:"flex h-[32rem]",children:[h.jsx("div",{className:"w-56 border-r border-gray-200 dark:border-zinc-700 pr-6",children:h.jsx("nav",{className:"space-y-1",children:D.map(G=>{const X=G.icon;return h.jsxs("button",{onClick:()=>m(G.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f===G.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:[h.jsx(X,{className:"w-4 h-4 mr-3"}),G.label]},G.id)})})}),h.jsxs("div",{className:"flex-1 pl-8",children:[v&&h.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${v.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:v.text}),f==="profile"&&h.jsxs("form",{onSubmit:te,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),h.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg",children:[h.jsx(iy,{className:"w-4 h-4 text-gray-400 mr-3"}),h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),h.jsx(Z,{label:"Display Name",type:"text",value:_,onChange:G=>w(G.target.value),placeholder:"Enter your display name"}),h.jsx(Z,{label:"Username",type:"text",value:j,onChange:G=>T(G.target.value),placeholder:"Enter your username"}),h.jsx(ne,{type:"submit",disabled:p,className:"w-full",children:p?"Updating...":"Update Profile"})]}),f==="password"&&h.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Z,{label:"Current Password",type:$?"text":"password",value:U,onChange:G=>q(G.target.value),placeholder:"Enter your current password",required:!0}),h.jsx("button",{type:"button",onClick:()=>ee(!$),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:$?h.jsx(ko,{className:"w-4 h-4"}):h.jsx(Ro,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Z,{label:"New Password",type:ce?"text":"password",value:L,onChange:G=>H(G.target.value),placeholder:"Enter your new password",required:!0}),h.jsx("button",{type:"button",onClick:()=>J(!ce),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ce?h.jsx(ko,{className:"w-4 h-4"}):h.jsx(Ro,{className:"w-4 h-4"})})]}),L&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Password Strength:"}),h.jsx("span",{className:`text-sm font-medium ${nx(_e.strength)}`,children:sx(_e.strength)})]}),h.jsx("div",{className:"space-y-1 text-xs",children:_e.errors.map((G,X)=>h.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[h.jsx("span",{className:"mr-2",children:""}),G]},X))})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Z,{label:"Confirm New Password",type:Te?"text":"password",value:V,onChange:G=>Y(G.target.value),placeholder:"Confirm your new password",required:!0}),h.jsx("button",{type:"button",onClick:()=>Ze(!Te),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:Te?h.jsx(ko,{className:"w-4 h-4"}):h.jsx(Ro,{className:"w-4 h-4"})})]}),h.jsx(ne,{type:"submit",disabled:p||!_e.isValid||L!==V,className:"w-full",children:p?"Changing Password...":"Change Password"})]}),f==="danger"&&h.jsx("div",{className:"space-y-6",children:h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx(fm,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Delete Account"}),h.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:"Once you delete your account, there is no going back. Please be certain."}),h.jsx("div",{className:"mt-4",children:h.jsx(ne,{variant:"danger",onClick:Ie,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Account"})})]})]})})})]})]})})}function wx({isOpen:o,onClose:n,onCreateCampaign:r}){const[i,l]=O.useState(""),[u,f]=O.useState(""),[m,p]=O.useState(!1),[y,v]=O.useState(!1),[x,_]=O.useState([]),[w,j]=O.useState(""),[T,U]=O.useState("player"),q=async Y=>{if(Y.preventDefault(),!!i.trim())try{v(!0),(await r({name:i.trim(),description:u.trim()||void 0,creatorIsAlsoGM:m,initialMembers:x.length>0?x:void 0})).success&&(l(""),f(""),p(!1),_([]),j(""),U("player"))}finally{v(!1)}},L=()=>{w.trim()&&(x.some(Y=>Y.email.toLowerCase()===w.toLowerCase())||(_([...x,{email:w.trim(),role:T}]),j(""),U("player")))},H=Y=>{_(x.filter(($,ee)=>ee!==Y))},V=()=>{l(""),f(""),p(!1),_([]),j(""),U("player"),n()};return h.jsx($e,{isOpen:o,onClose:V,title:"Create New Campaign",maxWidth:"lg",children:h.jsxs("form",{onSubmit:q,className:"space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Campaign Information"}),h.jsx(Z,{label:"Campaign Name",value:i,onChange:Y=>l(Y.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:u,onChange:Y=>f(Y.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"creatorIsAlsoGM",checked:m,onChange:Y=>p(Y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),h.jsx("label",{htmlFor:"creatorIsAlsoGM",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Also be the Game Master"})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You will always be an Administrator with full campaign control. Check this if you also want to run the game as GM."})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-zinc-50",children:"Invite Players (Optional)"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add players to your campaign. They'll need to have accounts to join."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"flex-1",children:h.jsx("input",{type:"email",value:w,onChange:Y=>j(Y.target.value),placeholder:"player@example.com",className:"input w-full",onKeyDown:Y=>{Y.key==="Enter"&&(Y.preventDefault(),L())}})}),h.jsxs("select",{value:T,onChange:Y=>U(Y.target.value),className:"input",children:[h.jsx("option",{value:"player",children:"Player"}),h.jsx("option",{value:"gm",children:"GM"}),h.jsx("option",{value:"admin",children:"Admin"})]}),h.jsx(ne,{type:"button",onClick:L,disabled:!w.trim(),size:"sm",children:h.jsx(jn,{className:"w-4 h-4"})})]}),x.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Initial Members (",x.length,")"]}),h.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:x.map((Y,$)=>h.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-zinc-800 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-50",children:Y.email}),h.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded-full",children:Y.role})]}),h.jsx("button",{type:"button",onClick:()=>H($),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:h.jsx(Wm,{className:"w-4 h-4"})})]},$))})]})]}),h.jsx(Pa,{onCancel:V,cancelText:"Cancel",confirmText:y?"Creating...":"Create Campaign",confirmDisabled:y||!i.trim(),confirmType:"submit",isLoading:y})]})})}const Sx=()=>{const{user:o}=ya(),{items:n,loading:r,error:i,execute:l,setItems:u}=ml(),f=O.useMemo(()=>ou(),[]),m=O.useCallback(async()=>{if(!o?.email)return;await l(async()=>{const _=await f.getUserInvitations(o.email);return _.success?{success:!0,data:_.data||[]}:_.error?.includes("function")&&_.error?.includes("does not exist")?{success:!0,data:[]}:{success:!1,error:_.error||"Failed to load invitations"}})},[o?.email,f,l]),p=O.useCallback(async x=>{if(!o)return{success:!1,error:"User not found"};try{const _=await f.acceptCampaignInvitation(x,o.id);return _.success&&u(w=>w.filter(j=>j.id!==x)),_}catch{return{success:!1,error:"Failed to accept invitation"}}},[o,f,u]),y=O.useCallback(async x=>{try{const _=await f.declineCampaignInvitation(x);return _.success&&u(w=>w.filter(j=>j.id!==x)),_}catch{return{success:!1,error:"Failed to decline invitation"}}},[f,u]),v=O.useCallback(async(x,_)=>{if(!o)return{success:!1,error:"User not found"};try{const w=await p(x);if(!w.success)return w;const j=n.find(q=>q.id===x);if(!j)return{success:!1,error:"Invitation not found"};const{supabase:T}=await Ia(async()=>{const{supabase:q}=await Promise.resolve().then(()=>Ib);return{supabase:q}},void 0),{error:U}=await T.from("characters").update({campaign_id:j.campaignId}).eq("id",_).eq("owner_id",o.id);return U?{success:!1,error:"Failed to assign character to campaign"}:{success:!0}}catch{return{success:!1,error:"Failed to accept invitation and assign character"}}},[o,n,p]);return O.useEffect(()=>{m()},[m]),{invitations:n,loading:r,error:i,acceptInvitation:p,declineInvitation:y,assignCharacterAndAccept:v,refreshInvitations:m}},jx=({onInvitationAccepted:o})=>{const{user:n}=ya(),{invitations:r,loading:i,error:l,acceptInvitation:u,declineInvitation:f,assignCharacterAndAccept:m}=Sx(),[p,y]=O.useState([]),[v,x]=O.useState(!1),[_,w]=O.useState(null),[j,T]=O.useState(""),[U,q]=O.useState(!1),L=O.useCallback(async()=>{if(n)try{const{data:J,error:Te}=await K.from("characters").select("id, name, campaign_id").eq("owner_id",n.id).is("campaign_id",null);!Te&&J&&y(J)}catch{}},[n]);O.useEffect(()=>{L()},[L]);const H=async J=>{q(!0);try{(await u(J.id)).success&&o?.()}finally{q(!1)}},V=J=>{w(J),x(!0)},Y=async()=>{if(!(!_||!j)){q(!0);try{(await m(_.id,j)).success&&(x(!1),w(null),T(""),await L(),o?.())}finally{q(!1)}}},$=async J=>{q(!0);try{await f(J)}finally{q(!1)}},ee=J=>{const Te=[];return J.isAdmin&&Te.push("Admin"),J.isGm&&Te.push("GM"),J.isPlayer&&Te.push("Player"),Te.length>0?Te.join(", "):"Player"},ce=J=>J?J.toLocaleDateString():"No expiration";return i?h.jsx("div",{className:"text-center py-4",children:"Loading invitations..."}):l?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx("h3",{className:"text-lg font-medium mb-2",children:"Campaign Invitations"}),h.jsx("p",{className:"text-red-600",children:l})]}):r.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx("h3",{className:"text-lg font-medium mb-2",children:"No pending invitations"}),h.jsx("p",{children:"You don't have any pending campaign invitations at the moment."})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Invitations"}),r.map(J=>h.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg",children:J.campaignName||"Unknown Campaign"}),h.jsxs("p",{className:"text-gray-600 text-sm",children:["Invited by ",J.invitedByName||"Unknown User"]})]}),h.jsxs("div",{className:"text-right text-sm text-gray-500",children:[h.jsxs("div",{children:["Expires: ",ce(J.expiresAt)]}),h.jsxs("div",{children:["Roles: ",ee(J.rolesOffered)]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ne,{onClick:()=>H(J),disabled:U,className:"bg-green-600 hover:bg-green-700",children:"Accept"}),p.length>0&&h.jsx(ne,{onClick:()=>V(J),disabled:U,className:"bg-blue-600 hover:bg-blue-700",children:"Accept & Assign Character"}),h.jsx(ne,{onClick:()=>$(J.id),disabled:U,variant:"default",children:"Decline"})]})]},J.id)),h.jsx($e,{isOpen:v,onClose:()=>{x(!1),w(null),T("")},title:"Accept Invitation & Assign Character",children:h.jsxs("div",{className:"space-y-4",children:[_&&h.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[h.jsx("h4",{className:"font-medium",children:_.campaignName}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Roles: ",ee(_.rolesOffered)]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"character-select",className:"block text-sm font-medium mb-2",children:"Select a character to assign:"}),h.jsxs("select",{id:"character-select",value:j,onChange:J=>T(J.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[h.jsx("option",{value:"",children:"Choose a character..."}),p.map(J=>h.jsx("option",{value:J.id,children:J.name},J.id))]})]}),h.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[h.jsx(ne,{onClick:()=>{x(!1),w(null),T("")},variant:"default",disabled:U,children:"Cancel"}),h.jsx(ne,{onClick:Y,disabled:U||!j,className:"bg-green-600 hover:bg-green-700",children:"Accept & Assign"})]})]})})]})},du=o=>o.isAdmin?"admin":o.isGm?"gm":"player";function Eg(o){return o==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":o==="gm"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400"}function Ko({title:o,description:n,icon:r,onClick:i,disabled:l=!1}){return h.jsx("button",{onClick:i,disabled:l,className:"card p-6 text-left hover:shadow-lg hover:shadow-blue-100 dark:hover:shadow-blue-900/20 hover:border-blue-300 dark:hover:border-blue-600 hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-none",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"text-blue-600 dark:text-blue-400 transition-transform duration-200 hover:scale-110",children:r}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-900 dark:text-zinc-50 transition-colors duration-200",children:o}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-200",children:n})]})]})})}function Cx({campaigns:o,onCampaignSelect:n}){const r=o.sort((i,l)=>l.updatedAt.getTime()-i.updatedAt.getTime()).slice(0,3);return h.jsxs("div",{className:"card p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:"Recent Campaigns"}),o.length>3&&h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," total"]})]}),r.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No campaigns yet. Create your first campaign to get started!"}):h.jsx("div",{className:"space-y-3",children:r.map(i=>h.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-zinc-700 hover:border-blue-300 dark:hover:border-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 hover:shadow-sm cursor-pointer transition-all duration-200",onClick:()=>n(i.id),children:[h.jsxs("div",{className:"flex-grow",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h4",{className:"font-medium text-gray-900 dark:text-zinc-50",children:i.name}),i.userRoles&&h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Eg(du(i.userRoles))}`,children:hl(i.userRoles)})]}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.memberCount||0," member(s)  Updated"," ",i.updatedAt.toLocaleDateString()]})]}),h.jsx(tg,{className:"w-4 h-4 text-gray-400 transition-transform duration-200 group-hover:translate-x-1"})]},i.id))})]})}function Ax({campaign:o,onSelect:n,onEdit:r,onSettings:i}){const l=du(o.userRoles);return h.jsxs("div",{className:"card p-6 hover:shadow-lg hover:shadow-gray-100 dark:hover:shadow-gray-900/20 hover:border-blue-300 dark:hover:border-blue-600 hover:-translate-y-1 transition-all duration-200",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50 mb-1",children:o.name}),o.description&&h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:o.description})]}),h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Eg(l)}`,children:hl(o.userRoles)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.memberCount||0," member(s)"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>r(o),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Edit Campaign",children:h.jsx(ly,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>i(o),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Campaign Settings",children:h.jsx(eg,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>n(o.id),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-all duration-200 hover:scale-110",title:"Enter Campaign",children:h.jsx(tg,{className:"w-4 h-4"})})]})]})]})}function Nx({campaign:o,onViewCampaign:n}){const{characters:r}=Es(o.id);return h.jsxs("div",{className:"card p-6 hover:shadow-lg hover:shadow-gray-100 dark:hover:shadow-gray-900/20 hover:border-green-300 dark:hover:border-green-600 hover:-translate-y-1 transition-all duration-200",children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-zinc-50",children:o.name}),h.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[r.length," CHARACTER",r.length!==1?"S":""]})]}),r.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No characters in this campaign yet."}):h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(i=>h.jsxs("div",{className:"flex items-center text-sm",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),h.jsx("span",{className:"text-gray-900 dark:text-zinc-50 font-medium",children:i.characterName||i.displayName})]},i.id)),r.length>3&&h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-4",children:["+",r.length-3," more characters"]})]})}),h.jsx("button",{onClick:()=>n(o.id),className:"w-full text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 font-medium py-2 px-3 rounded-md transition-all duration-200 hover:shadow-sm",children:"View Campaign "})]})}function Ex({campaigns:o,onSelect:n,onEdit:r,onSettings:i}){return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Campaign Management"}),h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(l=>h.jsx(Ax,{campaign:l,onSelect:n,onEdit:r,onSettings:i},l.id))})]})}function Tx({campaigns:o,onViewCampaign:n}){const r=o.filter(i=>i.memberCount&&i.memberCount>0);return h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Character Overview"}),r.length===0?h.jsx("div",{className:"card p-6 text-center",children:h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No characters in any campaigns yet. Create some characters to get started!"})}):h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(i=>h.jsx(Nx,{campaign:i,onViewCampaign:n},i.id))})]})}function Ox({onCampaignSelect:o}){const{campaigns:n,loading:r,error:i,createCampaign:l,updateCampaign:u,deleteCampaign:f}=lx(),{fetchMembers:m,addMemberByEmail:p,removeMember:y,updateMemberRole:v}=cx(),{signOut:x,user:_,updateProfile:w,changePassword:j,deleteAccount:T}=ya(),[U,q]=O.useState(!1),[L,H]=O.useState(!1),[V,Y]=O.useState(!1),[$,ee]=O.useState(!1),[ce,J]=O.useState(!1),[Te,Ze]=O.useState(!1),[_e,te]=O.useState(null),[Oe,Ie]=O.useState(""),[D,G]=O.useState(""),[X,ge]=O.useState(!1),[ve,ze]=O.useState(null),Ne=async ae=>{const xe=await l(ae);return xe.success&&q(!1),xe},me=ae=>{te(ae),Ie(ae.name),G(ae.description||""),H(!0)},qe=async ae=>{if(ae.preventDefault(),!!_e){ge(!0);try{(await u(_e.id,{name:Oe.trim(),description:D.trim()||void 0})).success&&(H(!1),te(null))}finally{ge(!1)}}},ot=ae=>{ze(ae),Y(!0)},Tt=async(ae,xe,le)=>{const Me=du(le);return await p(ae,xe,Me)},Ve=async(ae,xe)=>{await y(ae,xe)},Ht=async(ae,xe,le)=>await v(ae,xe,le),Gt=ae=>({id:ae.id,name:ae.name,description:ae.description||null,created_at:ae.createdAt.toISOString(),created_by:ae.createdBy,updated_at:ae.updatedAt.toISOString(),userRoles:ae.userRoles,member_count:ae.memberCount}),va=async ae=>{const xe=await m(ae);return xe.success?xe.data:void 0};return r?h.jsx(ux,{message:"Loading dashboard..."}):h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Traveller Dashboard"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back! Manage your campaigns and characters."})]}),_&&h.jsx(xx,{user:_,onSettings:()=>Ze(!0),onSignOut:()=>x()})]})}),h.jsx("div",{className:"p-6 space-y-6",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[i&&h.jsx("div",{className:"p-3 text-sm text-red-800 bg-red-100 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md mb-6",children:i}),h.jsx("div",{className:"mb-8",children:h.jsx(jx,{onInvitationAccepted:()=>{}})}),h.jsx("div",{className:"mb-8",children:h.jsx(Cx,{campaigns:n,onCampaignSelect:o})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-zinc-50 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Ko,{title:"Create Campaign",description:"Start a new Traveller campaign and invite players",icon:h.jsx(cy,{className:"w-8 h-8"}),onClick:()=>q(!0)}),h.jsx(Ko,{title:"Your Characters",description:"Create and manage your standalone characters",icon:h.jsx(il,{className:"w-8 h-8"}),onClick:()=>J(!0)}),h.jsx(Ko,{title:"Manage Characters",description:"View and manage all characters across campaigns",icon:h.jsx(Za,{className:"w-8 h-8"}),onClick:()=>ee(!0)})]})]}),n.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(Ex,{campaigns:n,onSelect:o,onEdit:me,onSettings:ot})}),n.length>0&&h.jsx("div",{className:"mb-8",children:h.jsx(Tx,{campaigns:n,onViewCampaign:o})})]})}),h.jsx(wx,{isOpen:U,onClose:()=>q(!1),onCreateCampaign:Ne}),h.jsx($e,{isOpen:L,onClose:()=>H(!1),title:"Edit Campaign",children:h.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[h.jsx(Z,{label:"Campaign Name",value:Oe,onChange:ae=>Ie(ae.target.value),placeholder:"Enter campaign name",required:!0}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),h.jsx("textarea",{value:D,onChange:ae=>G(ae.target.value),className:"input w-full",rows:3,placeholder:"Describe your campaign"})]}),h.jsx(Pa,{onCancel:()=>H(!1),cancelText:"Cancel",confirmText:X?"Updating...":"Update Campaign",confirmDisabled:X||!Oe.trim(),confirmType:"submit",isLoading:X})]})}),ve&&h.jsx($e,{isOpen:V,onClose:()=>Y(!1),title:"Campaign Settings",maxWidth:"xl",children:h.jsx(dx,{campaign:Gt(ve),onClose:()=>Y(!1),onGetMembers:va,onAddMember:Tt,onRemoveMember:Ve,onUpdateMemberRole:Ht,onUpdateCampaign:async(ae,xe)=>{await u(ae,{name:xe.name,description:xe.description||void 0})},onDeleteCampaign:async ae=>{(await f(ae)).success&&(Y(!1),ze(null))}})}),h.jsx($e,{isOpen:$,onClose:()=>ee(!1),title:"Character Management",maxWidth:"xl",children:h.jsx(yx,{campaigns:n,onViewCampaign:ae=>{ee(!1),o(ae)}})}),h.jsx($e,{isOpen:ce,onClose:()=>J(!1),title:"Your Characters",maxWidth:"xl",children:h.jsx(bx,{campaigns:n})}),_&&h.jsx(_x,{isOpen:Te,onClose:()=>Ze(!1),user:_,onUpdateProfile:async ae=>{const xe=await w(ae);if(!xe.success&&xe.error)throw new Error(xe.error)},onChangePassword:async ae=>{const xe=await j(ae);if(!xe.success&&xe.error)throw new Error(xe.error)},onDeleteAccount:()=>{T().then(()=>{Ze(!1)})}})]})}const Tg="traveller-ui-state-v1",Im={Party_Finances:[],Ship_Accounts:[],Ship_Cargo:[],Ship_Maintenance_Log:[],Loans_Mortgage:[],Party_Inventory:[],Ammo_Tracker:[],PCs:{}};function Og(){try{const o=localStorage.getItem(Tg);if(!o)return Im;const n=JSON.parse(o);return n.PCs||(n.PCs={}),Object.keys(n.PCs).forEach(r=>{n.PCs[r].Finance||(n.PCs[r].Finance=[]),n.PCs[r].Inventory||(n.PCs[r].Inventory=[]),n.PCs[r].Weapons||(n.PCs[r].Weapons=[]),n.PCs[r].Armour||(n.PCs[r].Armour=[]),n.PCs[r].Ammo||(n.PCs[r].Ammo=[])}),n}catch{return Im}}function kg(o){localStorage.setItem(Tg,JSON.stringify(o))}function Xa(o){const n=Og();n.PCs[o]||(n.PCs[o]={Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},kg(n))}function kx(o){const n=O.useCallback((l,u,f)=>{o(m=>{m.PCs[l]||Xa(l);const p=m.PCs[l]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...m,PCs:{...m.PCs,[l]:{...p,Ammo:(p.Ammo||[]).map((y,v)=>v===u?f:y)}}}})},[o]),r=O.useCallback((l,u)=>{o(f=>{if(!f.PCs[l])return Xa(l),f;const m=f.PCs[l]?.Ammo?.[u];if(!m)return f;const p=Number(m["Rounds Loaded"]||0),y=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),x=Number(m["Magazine Size"]||0);let _=p,w=y,j=v;if(_>0)_-=1;else if(w>0)w-=1,_=x-1;else if(j>0&&x>0){const q=Math.min(j,x);j-=q,_=q-1}else return f;const T=_+w*x+j,U={...m,"Rounds Loaded":_,"Spare Magazines":w,"Loose Rounds":j,"Total Rounds":T};return{...f,PCs:{...f.PCs,[l]:{...f.PCs[l],Ammo:(f.PCs[l].Ammo||[]).map((q,L)=>L===u?U:q)}}}})},[o]),i=O.useCallback((l,u)=>{o(f=>{if(!f.PCs[l])return Xa(l),f;const m=f.PCs[l]?.Ammo?.[u];if(!m)return f;const p=Number(m["Rounds Loaded"]||0),y=Number(m["Spare Magazines"]||0),v=Number(m["Loose Rounds"]||0),x=Number(m["Magazine Size"]||0);let _=p,w=y,j=v;if(w>0&&_<x)w-=1,_=x;else if(j>0&&_<x){const q=x-_,L=Math.min(j,q);j-=L,_+=L}const T=_+w*x+j,U={...m,"Rounds Loaded":_,"Spare Magazines":w,"Loose Rounds":j,"Total Rounds":T};return{...f,PCs:{...f.PCs,[l]:{...f.PCs[l],Ammo:(f.PCs[l].Ammo||[]).map((q,L)=>L===u?U:q)}}}})},[o]);return{updateCharacterAmmo:n,fireRound:r,reloadWeapon:i}}function Rx(){const[o,n]=O.useState(Og());O.useEffect(()=>{kg(o)},[o]);const r=O.useCallback(x=>{n(_=>({..._,Party_Finances:x}))},[]),i=O.useCallback(x=>{n(_=>({..._,Ship_Accounts:x}))},[]),l=O.useCallback(x=>{n(_=>({..._,Ship_Cargo:[..._.Ship_Cargo,x]}))},[]),u=O.useCallback((x,_)=>{n(w=>(w.PCs[x]||Xa(x),{...w,PCs:{...w.PCs,[x]:{...w.PCs[x]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]},Finance:_}}}))},[]),f=O.useCallback((x,_)=>{n(w=>{w.PCs[x]||Xa(x);const j=w.PCs[x]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[x]:{...j,Inventory:[...j.Inventory,_]}}}})},[]),m=O.useCallback((x,_)=>{n(w=>{w.PCs[x]||Xa(x);const j=w.PCs[x]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[x]:{...j,Ammo:[...j.Ammo||[],_]}}}})},[]),p=O.useCallback((x,_)=>{n(w=>{w.PCs[x]||Xa(x);const j=w.PCs[x]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[x]:{...j,Weapons:[...j.Weapons||[],_]}}}})},[]),y=O.useCallback((x,_)=>{n(w=>{w.PCs[x]||Xa(x);const j=w.PCs[x]||{Finance:[],Inventory:[],Weapons:[],Armour:[],Ammo:[]};return{...w,PCs:{...w.PCs,[x]:{...j,Armour:[...j.Armour||[],_]}}}})},[]),v=kx(n);return{state:o,setState:n,updatePartyFinances:r,updateShipAccounts:i,addCargoLeg:l,updateCharacterFinance:u,addCharacterInventory:f,addCharacterAmmo:m,addCharacterWeapon:p,addCharacterArmour:y,...v}}function Ux(o,n=0){let r=n;return o.map(i=>{const l=i["Amount (Cr)"],u=i.Category;return u==="Income"?r+=l:u==="Expense"&&(r-=l),{...i,"Running Total":r}})}function sl(o,n=0){return o.reduce((r,i)=>{const l=i["Amount (Cr)"],u=i.Category;return u==="Income"?r+l:u==="Expense"?r-l:r},n)}function zx(o,n,r=0){const i=[...o,n];return i.sort((l,u)=>new Date(l.Date).getTime()-new Date(u.Date).getTime()),Ux(i,r)}function Dx(o){const n=[];return o.Description?.trim()||n.push("Description is required"),o.Date||n.push("Date is required"),(o["Amount (Cr)"]===void 0||o["Amount (Cr)"]===null)&&n.push("Amount is required"),typeof o["Amount (Cr)"]=="number"&&o["Amount (Cr)"]<0&&n.push("Amount must be positive (use Expense category for negative impact)"),["Income","Expense","Transfer"].includes(o.Category||"")||n.push("Category must be Income, Expense, or Transfer"),{isValid:n.length===0,errors:n}}function nl(o){return`${o.toLocaleString()} Cr`}function Mx(o){const n=o.reduce((r,i)=>{const l=i["Amount (Cr)"];return i.Category==="Income"?r.totalIncome+=l:i.Category==="Expense"&&(r.totalExpenses+=l),r.transactionCount++,r},{totalIncome:0,totalExpenses:0,transactionCount:0});return{...n,netChange:n.totalIncome-n.totalExpenses}}function qx(o,n){return O.useMemo(()=>({party:sl(o.Party_Finances,0),ship:sl(o.Ship_Accounts,0),character:sl(o.PCs[n]?.Finance||[],0)}),[o.Party_Finances,o.Ship_Accounts,o.PCs,n])}function Bx(o,n){const r=O.useCallback(async l=>{try{const{importXlsx:u}=await Ia(async()=>{const{importXlsx:f}=await import("./xlsx-dsiKhsZx.js");return{importXlsx:f}},__vite__mapDeps([0,1,2,3]));return await u(l,o),{success:!0}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Unknown error occurred"}}},[o]),i=O.useCallback(async()=>{try{const{exportXlsx:l}=await Ia(async()=>{const{exportXlsx:u}=await import("./xlsx-dsiKhsZx.js");return{exportXlsx:u}},__vite__mapDeps([0,1,2,3]));return await l(n),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Unknown error occurred"}}},[n]);return{handleImport:r,handleExport:i}}function Lx({onImport:o,onExport:n}){const r=async u=>{const f=u.target.files?.[0];f&&((await o(f)).success||(u.target.value=""))},i=async()=>{await n()},l=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),u.currentTarget.click())};return h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Traveller Campaign Dashboard"}),h.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"File operations",children:[h.jsxs("label",{className:"btn","data-testid":"import-button",onKeyDown:l,tabIndex:0,"aria-label":"Import Excel file containing campaign data",children:[h.jsx("input",{type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:r,"data-testid":"file-input"}),h.jsx(oy,{className:"w-4 h-4","aria-hidden":"true"}),"Import XLSX"]}),h.jsxs(ne,{onClick:i,type:"button","data-testid":"export-button","aria-label":"Export campaign data to Excel file",children:[h.jsx(uy,{className:"w-4 h-4","aria-hidden":"true"}),"Export XLSX"]})]})]})}const Cs=o=>`${new Intl.NumberFormat(void 0,{style:"decimal",maximumFractionDigits:0}).format(o)} Cr`,Hx=()=>new Date().toISOString().slice(0,10);function Gx({partyBalance:o,shipBalance:n,cargoLegsCount:r,characterCount:i}){return h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",role:"region","aria-label":"Campaign statistics",children:[h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Party Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Party fund balance: ${Cs(o)}`,children:Cs(o)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Ship Fund"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Ship fund balance: ${Cs(n)}`,children:Cs(n)})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Cargo Legs"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of cargo legs: ${r}`,children:r})]}),h.jsxs("div",{className:"card",children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"PCs Tracked"}),h.jsx("div",{className:"text-xl font-semibold","aria-label":`Number of player characters tracked: ${i}`,children:i})]})]})}function Rg({tabs:o,active:n,onChange:r}){const i=l=>{const u=o.findIndex(p=>p.id===n);let f=u;switch(l.key){case"ArrowLeft":l.preventDefault(),f=u>0?u-1:o.length-1;break;case"ArrowRight":l.preventDefault(),f=u<o.length-1?u+1:0;break;case"Home":l.preventDefault(),f=0;break;case"End":l.preventDefault(),f=o.length-1;break;default:return}const m=o[f].id;r(m)};return h.jsx("div",{className:"flex flex-wrap gap-2 border-b mb-2",role:"tablist","aria-label":"Main navigation tabs",children:o.map(l=>h.jsx("button",{className:`px-3 py-2 rounded-t-xl transition-colors cursor-pointer focus-ring
            ${n===l.id?"bg-zinc-100 dark:bg-zinc-900 border border-b-0":"border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,onClick:()=>r(l.id),onKeyDown:i,role:"tab","aria-selected":n===l.id,"aria-controls":`tabpanel-${l.id}`,id:`tab-${l.id}`,type:"button",tabIndex:n===l.id?0:-1,"data-testid":`tab-${l.id}`,children:l.label},l.id))})}function An({title:o,children:n}){return h.jsxs("div",{className:"card space-y-3",children:[h.jsx("div",{className:"font-semibold",children:o}),n]})}function Os({columns:o,rows:n}){const r=i=>O.isValidElement(i)?i:String(i??"");return h.jsx("div",{className:"overflow-auto border rounded-2xl",children:h.jsxs("table",{className:"table",children:[h.jsx("thead",{children:h.jsx("tr",{children:o.map(i=>h.jsx("th",{children:i},i))})}),h.jsx("tbody",{children:n.length===0?h.jsx("tr",{children:h.jsx("td",{className:"text-zinc-500 p-3",colSpan:o.length,children:"No rows yet."})}):n.map((i,l)=>h.jsx("tr",{children:o.map(u=>h.jsx("td",{children:r(i[u])},u))},l))})]})})}function ks(o){const[n,r]=O.useState(o),i=O.useCallback((p,y)=>{r(v=>({...v,[p]:y}))},[]),l=O.useCallback(p=>y=>{i(p,y.target.value)},[i]),u=O.useCallback(p=>{r(y=>{const v={...o};return p&&p.forEach(x=>{v[x]=y[x]}),v})},[o]),f=O.useCallback(p=>{r(y=>({...y,...p}))},[]),m=O.useCallback(()=>({...n}),[n]);return{form:n,updateField:i,createInputHandler:l,resetForm:u,updateFields:f,getFormData:m,setForm:r}}const $x={Route:"",Item:"",Tons:"",BuyWorld:"",BuyPP:"",SellWorld:"",SellPP:"",DM:"",Fees:""};function Vx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:l}=ks($x),u=()=>{if(!r.Route||!r.Item||!r.Tons||!r.BuyWorld||!r.BuyPP)return;const f=Number(r.Tons),m=Number(r.BuyPP),p=r.SellPP===""?null:Number(r.SellPP),y=r.Fees===""?0:Number(r.Fees),v=p===null?null:(p-m)*f-y;n({"Leg/Route":r.Route,Item:r.Item,Tons:f,"Purchase World":r.BuyWorld,"Purchase Price (Cr/ton)":m,"Sale World":r.SellWorld,"Sale Price (Cr/ton)":p,"Broker (DM)":r.DM,"Fees/Taxes (Cr)":y,"Profit (Cr)":v}),l()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(An,{title:"Record Cargo Leg",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Route (Vland  Regina)",value:r.Route,onChange:i("Route")}),h.jsx(Z,{placeholder:"Item",value:r.Item,onChange:i("Item")}),h.jsx(Z,{type:"number",placeholder:"Tons",value:r.Tons,onChange:i("Tons")}),h.jsx(Z,{placeholder:"Purchase World",value:r.BuyWorld,onChange:i("BuyWorld")}),h.jsx(Z,{type:"number",placeholder:"Purchase Price (Cr/ton)",value:r.BuyPP,onChange:i("BuyPP")}),h.jsx(Z,{placeholder:"Sale World (optional)",value:r.SellWorld,onChange:i("SellWorld")}),h.jsx(Z,{type:"number",placeholder:"Sale Price (Cr/ton)",value:r.SellPP,onChange:i("SellPP")}),h.jsx(Z,{placeholder:"Broker DM",value:r.DM,onChange:i("DM")}),h.jsx(Z,{type:"number",placeholder:"Fees/Taxes (Cr)",value:r.Fees,onChange:i("Fees")})]}),h.jsx(ne,{className:"mt-2",onClick:u,type:"button","data-testid":"add-cargo-button","aria-label":"Add new cargo item to ship manifest",children:"Add Cargo"})]}),h.jsx(Os,{columns:["Leg/Route","Item","Tons","Purchase World","Purchase Price (Cr/ton)","Sale World","Sale Price (Cr/ton)","Broker (DM)","Fees/Taxes (Cr)","Profit (Cr)"],rows:o})]})}function Yx({title:o,totalIncome:n,totalExpenses:r,netChange:i,currentBalance:l}){return h.jsx(An,{title:`${o} Summary`,children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-green-600",children:"Total Income"}),h.jsx("div",{children:nl(n)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-red-600",children:"Total Expenses"}),h.jsx("div",{children:nl(r)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-blue-600",children:"Net Change"}),h.jsx("div",{className:i>=0?"text-green-600":"text-red-600",children:nl(i)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-semibold text-gray-600",children:"Current Balance"}),h.jsx("div",{className:l>=0?"text-green-600":"text-red-600",children:nl(l)})]})]})})}function Qx({title:o,fundName:n,onSubmit:r}){const i={Date:Hx(),Description:"",Category:"Expense",Subcategory:"",Amount:"",Notes:""},{form:l,createInputHandler:u,resetForm:f}=ks(i),[m,p]=O.useState([]),y=()=>{p([]);const v={Date:l.Date,Description:l.Description,Category:l.Category,Subcategory:l.Subcategory,"Amount (Cr)":Number(l.Amount),"Paid By":n,"Paid From (Fund)":n,Notes:l.Notes},x=Dx(v);if(!x.isValid){p(x.errors);return}r(v),f(["Date","Category"])};return h.jsxs(An,{title:`Add ${o} Transaction`,children:[m.length>0&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h.jsx("ul",{className:"list-disc list-inside",children:m.map((v,x)=>h.jsx("li",{children:v},x))})}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{type:"date",value:l.Date,onChange:u("Date")}),h.jsx(Z,{placeholder:"Description",value:l.Description,onChange:u("Description")}),h.jsxs(Z,{type:"select",value:l.Category,onChange:u("Category"),children:[h.jsx("option",{value:"Income",children:"Income"}),h.jsx("option",{value:"Expense",children:"Expense"}),h.jsx("option",{value:"Transfer",children:"Transfer"})]}),h.jsx(Z,{placeholder:"Subcategory",value:l.Subcategory,onChange:u("Subcategory")}),h.jsx(Z,{type:"number",placeholder:"Amount (Cr)",value:l.Amount,onChange:u("Amount")}),h.jsx(Z,{placeholder:"Notes",value:l.Notes,onChange:u("Notes")})]}),h.jsx(ne,{className:"mt-2",onClick:y,type:"button","data-testid":"add-transaction-button","aria-label":"Add new transaction to the financial record",children:"Add Transaction"})]})}function su({title:o,rows:n,onUpdate:r,fundName:i,initialBalance:l=0,showSummary:u=!0}){const f=sl(n,l),m=Mx(n),p=v=>{const x=zx(n,v,l);r(x)},y=n.map(v=>({...v,"Amount (Cr)":v.Category==="Expense"?-Math.abs(v["Amount (Cr)"]):Math.abs(v["Amount (Cr)"])}));return h.jsxs("div",{className:"space-y-4",children:[u&&h.jsx(Yx,{title:o,totalIncome:m.totalIncome,totalExpenses:m.totalExpenses,netChange:m.netChange,currentBalance:f}),h.jsx(Qx,{title:o,fundName:i,onSubmit:p}),h.jsx(Os,{columns:["Date","Description","Category","Subcategory","Amount (Cr)","Running Total","Paid By","Notes"],rows:y})]})}function Kx({pc:o,rows:n,onAdd:r}){const i=o.includes("  ")?o.split("  ")[1]:o;return h.jsx("div",{className:"space-y-4",children:h.jsx(su,{title:i,rows:n,onUpdate:r,fundName:`${i} Fund`,initialBalance:0,showSummary:!0})})}const Xx={Item:"",Qty:"","Unit Mass (kg)":"","Unit Value (Cr)":"","Location/Container":"",Notes:""};function Jx({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:l}=ks(Xx),u=()=>{if(!r.Item||r.Qty==="")return;const f=Number(r.Qty||0),m=Number(r["Unit Mass (kg)"]||0),p=Number(r["Unit Value (Cr)"]||0);n({Item:r.Item,Qty:f,"Unit Mass (kg)":m,"Total Mass (kg)":f*m,"Unit Value (Cr)":p,"Total Value (Cr)":f*p,"Location/Container":r["Location/Container"],Notes:r.Notes}),l()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(An,{title:"Add Inventory Item",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Item",value:r.Item,onChange:i("Item")}),h.jsx(Z,{type:"number",placeholder:"Qty",value:r.Qty,onChange:i("Qty")}),h.jsx(Z,{type:"number",placeholder:"Unit Mass (kg)",value:r["Unit Mass (kg)"],onChange:i("Unit Mass (kg)")}),h.jsx(Z,{type:"number",placeholder:"Unit Value (Cr)",value:r["Unit Value (Cr)"],onChange:i("Unit Value (Cr)")}),h.jsx(Z,{placeholder:"Location/Container",value:r["Location/Container"],onChange:i("Location/Container")}),h.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(ne,{className:"mt-2",onClick:u,type:"button","data-testid":"add-inventory-button","aria-label":"Add new item to character inventory",children:"Add Item"})]}),h.jsx(Os,{columns:["Item","Qty","Unit Mass (kg)","Total Mass (kg)","Unit Value (Cr)","Total Value (Cr)","Location/Container","Notes"],rows:o})]})}function Px({content:o,children:n,position:r="bottom",className:i=""}){const[l,u]=O.useState(!1),f={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},m={top:"top-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-slate-800",bottom:"bottom-full left-1/2 -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-slate-800",left:"left-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-t-transparent border-b-transparent border-l-slate-800",right:"right-full top-1/2 -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-t-transparent border-b-transparent border-r-slate-800"};return h.jsxs("div",{className:`relative inline-block ${i}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onFocus:()=>u(!0),onBlur:()=>u(!1),children:[n,l&&h.jsx(h.Fragment,{children:h.jsxs("div",{className:`absolute z-[9999] ${f[r]} transition-opacity duration-200`,children:[h.jsx("div",{className:"bg-slate-800 text-white text-sm rounded-lg p-4 w-80 shadow-2xl border border-slate-600",children:o}),h.jsx("div",{className:`absolute ${m[r]}`})]})})]})}const Zx={Weapon:"","Ammo Type":"","Magazine Size":"","Rounds Loaded":"","Spare Magazines":"","Loose Rounds":"",Notes:""};function Ix({row:o,index:n,onFireRound:r,onReload:i}){return h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ne,{variant:"danger",size:"sm",onClick:()=>r?.(n),disabled:Number(o["Total Rounds"]||0)<=0,title:`Fire one round from ${o.Weapon}`,"aria-label":`Fire one round from ${o.Weapon}`,children:"Fire"}),h.jsx(ne,{variant:"primary",size:"sm",onClick:()=>i?.(n),disabled:Number(o["Spare Magazines"]||0)<=0&&Number(o["Loose Rounds"]||0)<=0,title:`Reload ${o.Weapon}`,"aria-label":`Reload ${o.Weapon}`,children:"Reload"})]})}function Wx({rows:o,weapons:n=[],onAdd:r,onFireRound:i,onReload:l}){const{form:u,createInputHandler:f,resetForm:m,updateField:p}=ks(Zx),y=()=>{if(!u.Weapon)return;const _=Number(u["Magazine Size"]||0),w=Number(u["Rounds Loaded"]||0),j=Number(u["Spare Magazines"]||0),T=Number(u["Loose Rounds"]||0),U=_*j+w+T;r({Weapon:u.Weapon,"Ammo Type":u["Ammo Type"],"Magazine Size":_,"Rounds Loaded":w,"Spare Magazines":j,"Loose Rounds":T,"Total Rounds":U,Notes:u.Notes}),m()},v=_=>{p("Weapon",_)},x=o.map((_,w)=>({..._,Actions:h.jsx(Ix,{row:_,index:w,onFireRound:i,onReload:l})}));return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(An,{title:"Add Ammunition Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsxs(Z,{type:"select",value:u.Weapon==="__custom"?"":u.Weapon,onChange:f("Weapon"),children:[h.jsx("option",{value:"",children:"Select Weapon"}),n.map(_=>h.jsxs("option",{value:_.Weapon,children:[_.Weapon," (",_.Type,")"]},_.Weapon)),h.jsx("option",{value:"__custom",children:"--- Custom Weapon ---"})]}),u.Weapon==="__custom"&&h.jsx(Z,{placeholder:"Custom Weapon Name",value:"",onChange:_=>v(_.target.value)}),h.jsx(Z,{placeholder:"Ammo Type (e.g., 9mm, .45 ACP)",value:u["Ammo Type"],onChange:f("Ammo Type")}),h.jsx(Z,{type:"number",placeholder:"Magazine Size",value:u["Magazine Size"],onChange:f("Magazine Size")}),h.jsx(Z,{type:"number",placeholder:"Rounds Loaded",value:u["Rounds Loaded"],onChange:f("Rounds Loaded")}),h.jsx(Z,{type:"number",placeholder:"Spare Magazines",value:u["Spare Magazines"],onChange:f("Spare Magazines")}),h.jsx(Z,{type:"number",placeholder:"Loose Rounds",value:u["Loose Rounds"],onChange:f("Loose Rounds")}),h.jsx(Z,{placeholder:"Notes",value:u.Notes,onChange:f("Notes")})]}),h.jsx(ne,{className:"mt-2",onClick:y,type:"button","data-testid":"add-ammo-button","aria-label":"Add new ammunition entry to character equipment",children:"Add Ammunition"})]}),h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Ammunition Tracking"}),h.jsx(Px,{content:h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold mb-2",children:"Ammunition Tracking"}),h.jsxs("ul",{className:"space-y-1 text-sm",children:[h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Fire Button:"})," Consumes one round. Auto-reloads from spare magazines when current magazine is empty."]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Reload Button:"})," Manually reload from spare magazines or loose rounds."]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Ammo Priority:"})," Loaded rounds  Spare magazines  Loose rounds"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Total Rounds:"})," Automatically calculated and updated after each action."]})]})]}),position:"right",children:h.jsx("button",{className:"text-gray-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1 transition-colors duration-200",children:h.jsx(dy,{className:"w-5 h-5"})})})]}),h.jsx(Os,{columns:["Weapon","Ammo Type","Magazine Size","Rounds Loaded","Spare Magazines","Loose Rounds","Total Rounds","Notes","Actions"],rows:x})]})}const Fx={Weapon:"",Type:"",Damage:"",Range:"",Mass:"",Cost:"",Notes:""};function e_({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:l}=ks(Fx),u=()=>{r.Weapon&&(n({Weapon:r.Weapon,Type:r.Type,Damage:r.Damage,Range:r.Range,Mass:r.Mass?Number(r.Mass):void 0,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),l())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(An,{title:"Add Weapon Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Weapon Name",value:r.Weapon,onChange:i("Weapon")}),h.jsxs(Z,{type:"select",value:r.Type,onChange:i("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Melee",children:"Melee"}),h.jsx("option",{value:"Pistol",children:"Pistol"}),h.jsx("option",{value:"Rifle",children:"Rifle"}),h.jsx("option",{value:"Shotgun",children:"Shotgun"}),h.jsx("option",{value:"Heavy Weapon",children:"Heavy Weapon"}),h.jsx("option",{value:"Explosive",children:"Explosive"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(Z,{placeholder:"Damage (e.g., 3d6)",value:r.Damage,onChange:i("Damage")}),h.jsx(Z,{placeholder:"Range (e.g., 150m)",value:r.Range,onChange:i("Range")}),h.jsx(Z,{type:"number",placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),h.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),h.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(ne,{className:"mt-2",onClick:u,type:"button","data-testid":"add-weapon-button","aria-label":"Add new weapon entry to character equipment",children:"Add Weapon"})]}),h.jsx(Os,{columns:["Weapon","Type","Damage","Range","Mass","Cost","Notes"],rows:o})]})}const t_={Armour:"",Type:"",Protection:"",Mass:"",Cost:"",Notes:""};function a_({rows:o,onAdd:n}){const{form:r,createInputHandler:i,resetForm:l}=ks(t_),u=()=>{r.Armour&&(n({Armour:r.Armour,Type:r.Type,Protection:r.Protection?Number(r.Protection):r.Protection,Mass:r.Mass?Number(r.Mass):r.Mass,Cost:r.Cost?Number(r.Cost):void 0,Notes:r.Notes}),l())};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(An,{title:"Add Armour Entry",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[h.jsx(Z,{placeholder:"Armour Name",value:r.Armour,onChange:i("Armour")}),h.jsxs(Z,{type:"select",value:r.Type,onChange:i("Type"),children:[h.jsx("option",{value:"",children:"Select Type"}),h.jsx("option",{value:"Cloth",children:"Cloth"}),h.jsx("option",{value:"Mesh",children:"Mesh"}),h.jsx("option",{value:"Flak Jacket",children:"Flak Jacket"}),h.jsx("option",{value:"Combat Armour",children:"Combat Armour"}),h.jsx("option",{value:"Battle Dress",children:"Battle Dress"}),h.jsx("option",{value:"Powered Armour",children:"Powered Armour"}),h.jsx("option",{value:"Vacc Suit",children:"Vacc Suit"}),h.jsx("option",{value:"Environmental Suit",children:"Environmental Suit"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsx(Z,{placeholder:"Protection (e.g., +5, 1d6+2)",value:r.Protection,onChange:i("Protection")}),h.jsx(Z,{placeholder:"Mass (kg)",value:r.Mass,onChange:i("Mass")}),h.jsx(Z,{type:"number",placeholder:"Cost (Cr)",value:r.Cost,onChange:i("Cost")}),h.jsx(Z,{placeholder:"Notes",value:r.Notes,onChange:i("Notes")})]}),h.jsx(ne,{className:"mt-2",onClick:u,type:"button","data-testid":"add-armour-button","aria-label":"Add new armour entry to character equipment",children:"Add Armour"})]}),h.jsx(Os,{columns:["Armour","Type","Protection","Mass","Cost","Notes"],rows:o})]})}function n_({campaignId:o,selectedPc:n,onPcChange:r,characterBalance:i,characterFinance:l,characterInventory:u,characterAmmo:f,characterWeapons:m,characterArmour:p,onUpdateFinance:y,onAddInventory:v,onAddAmmo:x,onAddWeapon:_,onAddArmour:w,onFireRound:j,onReloadWeapon:T}){const[U,q]=O.useState("ledger"),{characters:L,loading:H,error:V}=Es(o),Y=L.find($=>$.displayName===n);return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("select",{className:"select",value:n,onChange:$=>r($.target.value),"data-testid":"character-select","aria-label":"Select character to view and manage",disabled:H,children:H?h.jsx("option",{children:"Loading characters..."}):L.map($=>h.jsx("option",{value:$.displayName,children:$.displayName},$.id))}),V&&h.jsx("span",{className:"text-xs text-yellow-600",title:V,children:" Offline mode"}),h.jsx("div",{className:"text-sm",children:h.jsxs("span",{"aria-label":`Current character balance: ${Cs(i)}`,children:["Current Balance:"," ",h.jsx("span",{className:"font-semibold",children:Cs(i)})]})})]}),Y&&Y.id.startsWith("character-")&&h.jsxs("div",{className:"text-xs text-gray-600",children:["Player: ",Y.playerName," | Character:"," ",Y.characterName]}),h.jsx(Rg,{tabs:[{id:"ledger",label:"Ledger"},{id:"inventory",label:"Inventory"},{id:"weapons",label:"Weapons"},{id:"armour",label:"Armour"},{id:"ammo",label:"Ammo"}],active:U,onChange:$=>q($)}),U==="ledger"&&h.jsx(Kx,{pc:n,rows:l,onAdd:$=>y(n,$)}),U==="inventory"&&h.jsx(Jx,{rows:u,onAdd:$=>v(n,$)}),U==="weapons"&&h.jsx(e_,{rows:m,onAdd:$=>_(n,$)}),U==="armour"&&h.jsx(a_,{rows:p,onAdd:$=>w(n,$)}),U==="ammo"&&h.jsx(Wx,{rows:f,weapons:m,onAdd:$=>x(n,$),onFireRound:$=>j?.(n,$),onReload:$=>T?.(n,$)})]})}function s_({campaignId:o,activeTab:n,state:r,selectedCharacterDisplayName:i,characterBalance:l,onCharacterChange:u,onUpdatePartyFinances:f,onUpdateShipAccounts:m,onAddCargoLeg:p,onUpdateCharacterFinance:y,onAddCharacterInventory:v,onAddCharacterAmmo:x,onAddCharacterWeapon:_,onAddCharacterArmour:w,onFireRound:j,onReloadWeapon:T}){return h.jsxs("div",{role:"tabpanel","aria-labelledby":`tab-${n}`,id:`tabpanel-${n}`,children:[n==="party"&&h.jsx(su,{title:"Party",rows:r.Party_Finances,onUpdate:f,fundName:"Party Fund",initialBalance:0,showSummary:!0}),n==="ship"&&h.jsx(su,{title:"Ship",rows:r.Ship_Accounts,onUpdate:m,fundName:"Ship Fund",initialBalance:0,showSummary:!0}),n==="cargo"&&h.jsx(Vx,{rows:r.Ship_Cargo,onAdd:p}),n==="characters"&&h.jsx(n_,{campaignId:o,selectedPc:i,onPcChange:u,characterBalance:l,characterFinance:r.PCs[i]?.Finance||[],characterInventory:r.PCs[i]?.Inventory||[],characterAmmo:r.PCs[i]?.Ammo||[],characterWeapons:r.PCs[i]?.Weapons||[],characterArmour:r.PCs[i]?.Armour||[],onUpdateFinance:y,onAddInventory:v,onAddAmmo:x,onAddWeapon:_,onAddArmour:w,onFireRound:j,onReloadWeapon:T})]})}function r_({campaignId:o,onBackToCampaigns:n}){const[r,i]=O.useState("party"),{characters:l}=Es(o),[u,f]=O.useState(""),m=u||l[0]?.displayName||"",{state:p,setState:y,updatePartyFinances:v,updateShipAccounts:x,addCargoLeg:_,updateCharacterFinance:w,addCharacterInventory:j,addCharacterAmmo:T,addCharacterWeapon:U,addCharacterArmour:q,fireRound:L,reloadWeapon:H}=Rx(),V=qx(p,m),{handleImport:Y,handleExport:$}=Bx(y,p);return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-950",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-700 px-4 py-4",children:h.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors border border-gray-300 dark:border-zinc-600 rounded-md hover:border-gray-400 dark:hover:border-zinc-500",children:" Back to Campaigns"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-50",children:"Campaign Dashboard"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Campaign ID: ",o]})]})]})})}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsx(Lx,{onImport:Y,onExport:$}),h.jsx(Gx,{partyBalance:V.party,shipBalance:V.ship,cargoLegsCount:p.Ship_Cargo.length,characterCount:l.length}),h.jsx(Rg,{tabs:[{id:"party",label:"Party"},{id:"ship",label:"Ship"},{id:"cargo",label:"Cargo"},{id:"characters",label:"Characters"}],active:r,onChange:ee=>i(ee)}),h.jsx(s_,{campaignId:o,activeTab:r,state:p,selectedCharacterDisplayName:m,characterBalance:V.character,onCharacterChange:f,onUpdatePartyFinances:v,onUpdateShipAccounts:x,onAddCargoLeg:_,onUpdateCharacterFinance:w,onAddCharacterInventory:j,onAddCharacterAmmo:T,onAddCharacterWeapon:U,onAddCharacterArmour:q,onFireRound:L,onReloadWeapon:H})]})]})}function i_(){const{user:o,loading:n,completeProfile:r}=ya(),[i,l]=O.useState(null);return n?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?o.profileCompleted?i?h.jsx(r_,{campaignId:i,onBackToCampaigns:()=>l(null)}):h.jsx(Ox,{onCampaignSelect:l}):h.jsx(ix,{onComplete:r}):h.jsx(tx,{})}class l_ extends ag.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error boundary caught an error:",n,r)}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:h.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),h.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded overflow-auto",children:this.state.error?.message}),h.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto mt-2",children:this.state.error?.stack}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const Ug=document.getElementById("root");if(!Ug)throw new Error("Failed to find the root element");wy.createRoot(Ug).render(h.jsx(ag.StrictMode,{children:h.jsx(l_,{children:h.jsx(i_,{})})}));export{Im as D,Ia as _};
